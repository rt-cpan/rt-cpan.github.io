<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46509 for HTML-Template-Compiled: How to read the default_esape in a new plugin? How to use the escape plugins in a new plugin?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46509 for HTML-Template-Compiled: How to read the default_esape in a new plugin? How to use the escape plugins in a new plugin?</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/HTML-Template-Compiled/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/HTML-Template-Compiled/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/HTML-Template-Compiled/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/HTML-Template-Compiled/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/HTML-Template-Compiled">HTML-Template-Compiled CPAN distribution</a>.</p>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p><b>Note: there is a bug with caching and TMPL_INCLUDE_VAR since 0.97_004 until 0.98. either use an earlier version or upgrade to 0.98_001. Another workaround is to precompile all templates to file_cache_dir. The bug happens when including a template via INCLUDE_VAR and the template is not yet compiled or has changed.</b>
<br><br>
<b>I'm sorry if the change about aliases came quite unannounced. I didn't expect any problems since dollar signs are not allowed in template vars, but I heard from at least one case where people were doing exactly this.<br>
Please do not use unallowed characters in template vars.
Allowed are (from the HTML::Template::FAQ): Numbers, letters, '.', '/', '+', '-' and '_'.
<br>This should work in HTML::Template::Compiled::Classic.<br>
in HTML::Template::Compiled you should be only using numbers, letters and _.<br>
The dot, for example, is special. If you need to get a hash key from the template parameters with special charcaters, you can try &lt;tmpl_var _.$var$name$with$dollars &gt;<br><br>
There will be a workaround in the next version:<br>
local $HTML::Template::Compiled::Compiler::DISABLE_NEW_ALIAS = 1;
</b><br><br>

Please report any bug you find.<br>

The code is now hosted on <a href="https://github.com/perlpunk/HTML-Template-Compiled">https://github.com/perlpunk/HTML-Template-Compiled</a><br>
If you have a bug report, you can also post it there in the "Issues" section.<br>

In the bugreport, please include, if possible, the module version, perl version and a testcase that reproduces the error; that makes it easier to find the bug.
<br><br>
The issue with not reloading includes of includes should be fixed in version 0.95_003.
If you have any problems though please report!
<br><br>
Using query() and the dot syntax might not work together always. If you have a tmpL_var name="..foo" (going up the stash one level) the var foo is not detected and will not be reported by the query() function. Since the dot syntax is for dereferencing hashes and method calls the query function might not make sense anyway. I believe it is a bad idea to let the program do things if the template is using a certain variable.

<br><br>
Thanks!</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46509</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/HTML-Template-Compiled/Active/">HTML-Template-Compiled</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
STEFFENW [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-16072-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.93    </td>
  </tr>
  <tr id="CF-16073-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;30&nbsp;07:07:46&nbsp;2009</span>
    <span class="description">STEFFENW [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> How to read the default_esape in a new plugin? How to use the
 escape plugins in a new plugin?</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">There is no method to get the default_escape written in constructor. 
The escapes for my new plugin I get from template. But I need the 
default escape too to find out, how to escape.

The next thing is:
How can I use the given plugins for escaping in my new plugin? I wrote 
all this plugins in the constructor.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;11&nbsp;11:52:03&nbsp;2009</span>
    <span class="description">TINITA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sa. 30. Mai 2009, 07:07:46, STEFFENW wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There is no method to get the default_escape written in constructor. 
&gt; The escapes for my new plugin I get from template. But I need the 
&gt; default escape too to find out, how to escape.
&gt; 
&gt; The next thing is:
&gt; How can I use the given plugins for escaping in my new plugin? I 
</div>wrote 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; all this plugins in the constructor.
</div>
Hi,

I don&#39;t understand your questions.
Why is the default escape needed in a different escaping method?
And how to you want to use the &#34;gen pluins&#34; in your plugin?

regards,
tina
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;11&nbsp;11:52:04&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;13&nbsp;03:39:15&nbsp;2009</span>
    <span class="description">STEFFENW [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am writing an internationalization Plugin.

It runs perfectly but I need an initialisation method to give the same 
default_escape like HTML::Template::Compiled-&gt;new&#40;&#41;.

I know wich escape methods are stored at 
HTML::Template::Compiled::Util. HTC offers a plugin concept but does 
not use this itself. So I have to use HTML::Template::Compiled::Util 
to escape. All the others escapes must give at my initialization 
method like HTML::Template::Compiled-&gt;new&#40;&#41;.
 
use HTML::Template::Compiled;
use HTML::Template::Compiled::Plugin::I18N;

HTML::Template::Compiled::Plugin::I18N-&gt;init&#40;
    # all parameters are optional
    escape_plugins   =&gt; [ qw&#40;
        HTML::Template::Compiled::Plugins::ExampleEscape
    &#41; ],
    default_escape   =&gt; &#39;HTML&#39;,
    translator_class =&gt; &#39;MyProjectTranslator&#39;,
&#41;;

my $htc = HTML::Template::Compiled-&gt;new&#40;
    tagstyle =&gt; [qw&#40;-classic -comment +asp&#41;],
    plugin    =&gt; [ qw&#40;
        HTML::Template::Compiled::Plugin::I18N
        HTML::Template::Compiled::Plugin::ExampleEscape
    &#41; ],
    default_escape =&gt; &#39;HTML&#39;,
    scalarref =&gt; \&#39;&lt;%TEXT VALUE=&#34;Hello World!&#34; %&gt;&#39;,
&#41;;

Look here, some Examples to use the plugin:

# output depends on default_escape
&lt;%TEXT VALUE=&#34;some static text&#34;%&gt;
# but not here
&lt;%TEXT VALUE=&#34;some static text&#34; ESCAPE=HTML%&gt;

allows Locale::Maketext placeholders and switch off/change escaping
&lt;%TEXT VALUE=&#34;Hello [_1]!&#34; _1=&#34;world&#34;%&gt;
&lt;%TEXT VALUE=&#34;Hello [_1]!&#34; _1=&#34;world&#34; _1_ESCAPE=0%&gt;
&lt;%TEXT VALUE=&#34;Hello [_1]!&#34; _1=&#34;world&#34; ESCAPE=HTML%&gt;
&lt;%TEXT VALUE=&#34;Hello [_1]!&#34; _1=&#34;world&#34; _1_ESCAPE=0 ESCAPE=HTML%&gt;

allows Locale::TextDomain placeholders and switch off/change escaping
&lt;%TEXT VALUE=&#34;Hello {name}!&#34; _name=&#34;world&#34;%&gt;
&lt;%TEXT VALUE=&#34;Hello {name}!&#34; _name=&#34;world&#34; _name_ESCAPE=0%&gt;
&lt;%TEXT VALUE=&#34;Hello {name}!&#34; _name=&#34;world&#34; ESCAPE=HTML%&gt;
&lt;%TEXT VALUE=&#34;Hello {name}!&#34; _name=&#34;world&#34; _name_ESCAPE=0 ESCAPE=HTML%&gt;

More see at the POD part of <span class="clickylink"><a target="new" rel="nofollow" href="http://htc-plugin">http://htc-plugin</a></span>-
i18n.svn.sourceforge.net/viewvc/htc-plugin-
i18n/trunk/lib/HTML/Template/Compiled/Plugin/I18N.pm
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;13&nbsp;05:11:03&nbsp;2009</span>
    <span class="description">TINITA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I still don&#39;t understand where you have to access the default_escape 
and why it is not possible. Wherever you have an HTC object, you can 
call $htc-&gt;get_default_escape. If this isn&#39;t what you want then please 
make up a short example. Your example plugin is really big and I don&#39;t 
want to read through all of it just to understand this.
You have reported several bugs and wishes, and most of the time I had 
problems to understand them. Contact me on irc.perl.org so we can talk 
in german. I&#39;m always logged in so you can lesve me a /msg
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;29&nbsp;13:22:52&nbsp;2010</span>
    <span class="description">STEFFENW [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for &#34;$htc-&gt;get_default_escape&#34;. This is what I looked for.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;28&nbsp;13:51:48&nbsp;2011</span>
    <span class="description">TINITA [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
