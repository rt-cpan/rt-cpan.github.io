<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #31977 for Perl-Critic: &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #31977 for Perl-Critic: &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Perl-Critic/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Perl-Critic/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Perl-Critic/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Perl-Critic/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/Perl-Critic/Perl-Critic/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl-Critic">Perl-Critic CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">31977</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Perl-Critic/Active/">Perl-Critic</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mschwern [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-25198-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.088    </td>
  </tr>
  <tr id="CF-25199-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;28&nbsp;20:21:19&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">$ echo &#34;use strict;  chmod 0644, $file&#34; | perlcritic
Integer with leading zeros at line 1, column 20.  See page 58 of PBP. 
&#40;Severity: 5&#41;

Is it really bad practice to use the 0xxx form with chmod, the natural
Unix form of mode expression?  Can an exception be made for chmod 0xxx
so that it&#39;s accepted or at least at a reduced severity?

Interestingly, it ignores the real mistakes:

$ echo &#34;use strict;  chmod q[0644], $file&#34; | perlcritic
source OK

$ echo &#34;use strict;  chmod 644, $file&#34; | perlcritic
source OK

So really chmod needs &#34;Integer *without* leading zeros&#34; and &#34;mode as
string&#34; critics.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;28&nbsp;21:45:37&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Similar issues with dbmopen, mkdir and umask.

I&#39;d also throw in the bitwise operators at least for the &#34;it&#39;s ok to use
0xxx&#34; part.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;28&nbsp;21:45:39&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;00:13:33&nbsp;2007</span>
    <span class="description">jeffrey_thalhammer [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Dec 2007 21:06:06 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeffrey_thalhammer [...] yahoo.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">We can do that.  Do you think it should be a universal exemption, or something that you have to ask for in your perlcriticrc file?

-Jeff
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;01:39:30&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Dec 2007 22:38:49 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jeffrey Thalhammer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=31977">http://rt.cpan.org/Ticket/Display.html?id=31977</a></span> &gt;
&gt; 
&gt; We can do that.  Do you think it should be a universal exemption, or something that you have to ask for in your perlcriticrc file?
</div>
Universal, especially if combined with the aforementioned proper critiques of
the uses of masks &#40;ie. &#34;integer without leading zero&#34; and &#34;string used for
octal mode&#34;&#41;.


-- 
&#39;All anyone gets in a mirror is themselves,&#39; she said. &#39;But what you
gets in a good gumbo is everything.&#39;
    -- &#34;Witches Abroad&#34; by Terry Prachett
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;02:20:06&nbsp;2007</span>
    <span class="description">ELLIOTJS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ELLIOTJS [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Dec 28 21:45:37 2007, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d also throw in the bitwise operators at least for the &#34;it&#39;s ok to use
&gt; 0xxx&#34; part.
</div>
I&#39;d hope I wouldn&#39;t see such usage anywhere, but that may be personal preference. The only 
place I&#39;d personally accept octal is in relation to Unix permissions.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;11:27:27&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 08:26:41 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ELLIOTJS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=31977">http://rt.cpan.org/Ticket/Display.html?id=31977</a></span> &gt;
&gt; 
&gt; On Fri Dec 28 21:45:37 2007, MSCHWERN wrote:
<div class="message-stanza open">&gt;&gt; I&#39;d also throw in the bitwise operators at least for the &#34;it&#39;s ok to use
&gt;&gt; 0xxx&#34; part.
</div>&gt; 
&gt; I&#39;d hope I wouldn&#39;t see such usage anywhere, but that may be personal preference. The only 
&gt; place I&#39;d personally accept octal is in relation to Unix permissions.
</div>
To be fair, I haven&#39;t run across the bitwise case yet.  Everything else I&#39;ve
reported are actual MakeMaker issues &#40;which is now otherwise critic clean&#41;.

But looking at something like, say, File::chmod:
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/src/PINYAN/File-chmod-0.32/chmod.pm">http://search.cpan.org/src/PINYAN/File-chmod-0.32/chmod.pm</a></span>

    $VAL |= 0400 if /r/;
    $VAL |= 0200 if /w/;
    $VAL |= 0100 if /[xs]/;
    $VAL |= 04000 if /[sS]/;

That&#39;s perfectly natural for bitwise ops.  If I saw instead:

    $VAL |= oct 400 if /r/;
    $VAL |= oct 200 if /w/;
    $VAL |= oct 100 if /[xs]/;
    $VAL |= oct 4000 if /[sS]/;

I&#39;d question that.  I don&#39;t think it adds any clarity and instead strays from
accepted practice.  Kinda makes the brain go &#34;buh?&#34;

PBP doesn&#39;t actually have anything *against* octal numbers when used properly.
 It&#39;s when you use them improperly, as padding, expecting 007 to be the same
as 7.  Clearly with bitwise ops and masks you naturally want to be working in
octal or binary or hex.

Bitwise ops might be esoteric, but they have their place.  As much as we like
to avoid it as Perl programmers, sometimes you&#39;ve got to get down to fiddling
with individual bits.


-- 
Just call me &#39;Moron Sugar&#39;.
        <span class="clickylink"><a target="new" rel="nofollow" href="http://www.somethingpositive.net/sp05182002.shtml">http://www.somethingpositive.net/sp05182002.shtml</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;12:41:03&nbsp;2007</span>
    <span class="description">ELLIOTJS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ELLIOTJS [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Dec 29 11:27:27 2007, schwern@pobox.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ELLIOTJS via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=31977">http://rt.cpan.org/Ticket/Display.html?id=31977</a></span> &gt;
&gt; &gt;
&gt; &gt; On Fri Dec 28 21:45:37 2007, MSCHWERN wrote:
<div class="message-stanza open">&gt; &gt;&gt; I&#39;d also throw in the bitwise operators at least for the &#34;it&#39;s ok
&gt; &gt;&gt; to use 0xxx&#34; part.
</div>&gt; &gt;
&gt; &gt; I&#39;d hope I wouldn&#39;t see such usage anywhere, but that may be
&gt; &gt; personal preference. The only place I&#39;d personally accept octal
&gt; &gt; is in relation to Unix permissions.
</div>&gt; 
&gt; To be fair, I haven&#39;t run across the bitwise case yet.  Everything
&gt; else I&#39;ve reported are actual MakeMaker issues &#40;which is now
&gt; otherwise critic clean&#41;.
&gt; 
&gt; But looking at something like, say, File::chmod:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/src/PINYAN/File-chmod-0.32/chmod.pm">http://search.cpan.org/src/PINYAN/File-chmod-0.32/chmod.pm</a></span>
</div>[chop]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That&#39;s perfectly natural for bitwise ops.  If I saw instead:
</div>[chop]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d question that.  I don&#39;t think it adds any clarity and instead
&gt; strays from accepted practice.  Kinda makes the brain go &#34;buh?&#34;
</div>
That&#39;s a false complaint. Obviously File::chmod is dealing with Unix permissions. The fact 
that it&#39;s using bitwise operators to deal with them is beside the point.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Clearly with bitwise ops and masks you naturally want to be
&gt; working in octal or binary or hex.
&gt; 
&gt; Bitwise ops might be esoteric, but they have their place.  As
&gt; much as we like to avoid it as Perl programmers, sometimes
&gt; you&#39;ve got to get down to fiddling with individual bits.
</div>
Again, you&#39;re generalizing my statements. I didn&#39;t say anything about not using bitwise 
operations. I said I don&#39;t want octal anywhere other than Unix permissions. Bitwise 
operations should be done using hex &#40;again with the exception above for things like 
File::chmod&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;13:37:55&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 10:34:00 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ELLIOTJS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I&#39;d question that.  I don&#39;t think it adds any clarity and instead
&gt;&gt; strays from accepted practice.  Kinda makes the brain go &#34;buh?&#34;
</div>&gt; 
&gt; That&#39;s a false complaint. Obviously File::chmod is dealing with Unix permissions. The fact 
&gt; that it&#39;s using bitwise operators to deal with them is beside the point.
</div>
My complain is more pragmatic:  How does Perl::Critic tell the difference?  It
can&#39;t know that File::chmod is working with unix permissions, all it sees is
the bitwise ops.

So the exception for &#34;integer without leading zero&#34; should extend to bitwise ops.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Clearly with bitwise ops and masks you naturally want to be
&gt;&gt; working in octal or binary or hex.
&gt;&gt;
&gt;&gt; Bitwise ops might be esoteric, but they have their place.  As
&gt;&gt; much as we like to avoid it as Perl programmers, sometimes
&gt;&gt; you&#39;ve got to get down to fiddling with individual bits.
</div>&gt; 
&gt; Again, you&#39;re generalizing my statements. I didn&#39;t say anything about not using bitwise 
&gt; operations. I said I don&#39;t want octal anywhere other than Unix permissions. Bitwise 
&gt; operations should be done using hex &#40;again with the exception above for things like 
&gt; File::chmod&#41;.
</div>
What is the reason for preferring hex?

Hex and octal are both base x**2 so it shouldn&#39;t really matter for bitwise
work.  In fact, if you&#39;re working in bytes thinking base 8 makes a lot more
sense.  This is something that Perl::Critic can&#39;t really say much about,
either is fine and their appropriate use is situational.

It does further support the &#34;integer does *not* contain leading zero&#34; critic
for bitwise ops indicating someone tried to use a decimal for bitwise ops
which, we can agree, is probably wrong.

Let&#39;s check if we&#39;re having a violent agreement.  Here&#39;s what I&#39;d recommend:

*&#41;  Leave the &#34;integer with leading zeros&#34; critic in for the general case

*&#41;  Exempt dbmopen, mkdir, umask and chmod file masks and bitwise operations.

For those the warning should be &#34;integer without leading zero&#34; or more clearly
&#34;decimal number used with $operator&#34; to warn against the use of a decimal
number and &#34;string used with $operator&#34; for a string.

        # integer with leading zeros
        $spy = 007;

        # decimal permissions used with chmod
        chmod 666, $file;

        # string mask used with mkdir
        mkdir $dir, &#34;0755&#34;;

        # ok
        chmod 0666, $file;

        # ok
        $mode |= 0755;

        # ok
        $thing = $num | 0b1001001;

        # ok
        $thing = $num &#38; 0xDEADBEEF;

        # decimal number used with bitwise op
        $mask |= 755;

        # string used with bitwise op
        $mask |= &#34;0755&#34;;

-- 
There will be snacks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;15:12:32&nbsp;2007</span>
    <span class="description">ELLIOTJS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 14:12:04 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;elliotjs [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My complain is more pragmatic:  How does Perl::Critic tell the
&gt; difference?  It can&#39;t know that File::chmod is working with unix
&gt; permissions, all it sees is the bitwise ops.
&gt; 
&gt; So the exception for &#34;integer without leading zero&#34; should extend to
&gt; bitwise ops.
</div>
File::chmod is an exception, not the rule.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What is the reason for preferring hex?
&gt;
&gt; Hex and octal are both base x**2 so it shouldn&#39;t really matter for
&gt; bitwise work.  In fact, if you&#39;re working in bytes thinking base 8
&gt; makes a lot more sense.
</div>
Base 8 is only good if you&#39;re thinking strict ASCII, but not bytes, since almost all architectures now use 8 bits.  &#40;In a college programming languages course I took there was someone who worked with an architecture with 9 bits per byte, for which it would be appropriate to use octal.  But this was close to 20 years ago.&#41;  Having a leading &#34;digit&#34; &#40;octit?&#41; that can only be 0 or 1 seems stupid to me.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It does further support the &#34;integer does *not* contain leading zero&#34;
&gt; critic for bitwise ops indicating someone tried to use a decimal for
&gt; bitwise ops which, we can agree, is probably wrong.
</div>
I can certainly see a separate ProhibitDecimalWithBitwiseOperator policy which would allow binary, octal, or hex being useful.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Let&#39;s check if we&#39;re having a violent agreement.  Here&#39;s what I&#39;d
&gt; recommend:
&gt; 
&gt; *&#41;  Leave the &#34;integer with leading zeros&#34; critic in for the general
&gt; case
&gt; 
&gt; *&#41;  Exempt dbmopen, mkdir, umask and chmod file masks and bitwise
&gt; operations.
</div>
The second to last word in that latter point I disagree with.  Again, this may be personal preference.  I don&#39;t like forms that don&#39;t match with bytes.

Otherwise, I agree with your statements above.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For those the warning should be &#34;integer without leading zero&#34; or
&gt; more clearly &#34;decimal number used with $operator&#34; to warn against the
&gt; use of a decimal number and &#34;string used with $operator&#34; for a
&gt; string.
</div>
Again, the new separate policy suggestion above.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;16:07:08&nbsp;2007</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 15:06:50 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Elliot Shank wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; It does further support the &#34;integer does *not* contain leading zero&#34;
&gt;&gt; critic for bitwise ops indicating someone tried to use a decimal for
&gt;&gt; bitwise ops which, we can agree, is probably wrong.
</div>&gt; 
&gt; I can certainly see a separate ProhibitDecimalWithBitwiseOperator policy 
&gt; which would allow binary, octal, or hex being useful.
</div>
Expressions::ProhibitDecimalWithBitwiseOperator and Expressions::ProhibitStringsWithBitwiseOperator added to TODO list.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;16:33:53&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 13:32:58 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ELLIOTJS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=31977">http://rt.cpan.org/Ticket/Display.html?id=31977</a></span> &gt;
&gt; 
&gt; Michael G Schwern via RT wrote:
<div class="message-stanza open">&gt;&gt; My complain is more pragmatic:  How does Perl::Critic tell the
&gt;&gt; difference?  It can&#39;t know that File::chmod is working with unix
&gt;&gt; permissions, all it sees is the bitwise ops.
&gt;&gt;
&gt;&gt; So the exception for &#34;integer without leading zero&#34; should extend to
&gt;&gt; bitwise ops.
</div>&gt; 
&gt; File::chmod is an exception, not the rule.
</div>
I think this can boil down to one simple question:  What *exactly* is wrong
with using octal in bitwise ops to the point that you&#39;d actively prohibit it?

Reading the original PBP on this, the point was to avoid people who mistake
0123 for 123 and think it&#39;s just padding.  There&#39;s nothing actually wrong with
octal numbers.

Thinking about it further, if you&#39;re mistakenly using 0123 on bitwise ops TWO
failures have to take place at the user end:

1&#41;  They don&#39;t realize that 0123 is octal &#40;yet they&#39;re doing bitwise math&#41;
2&#41;  They&#39;re really trying to do bitwise on decimal numbers

I find the combination of user failures to be unlikely.

What mistake is perlcritic preventing by prohibiting $foo &#38; 0777 ?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; What is the reason for preferring hex?
&gt;&gt;
&gt;&gt; Hex and octal are both base x**2 so it shouldn&#39;t really matter for
&gt;&gt; bitwise work.  In fact, if you&#39;re working in bytes thinking base 8
&gt;&gt; makes a lot more sense.
</div>&gt; 
&gt; Base 8 is only good if you&#39;re thinking strict ASCII, but not bytes, since almost
&gt; all architectures now use 8 bits.
</div>
Uhh, aren&#39;t we agreeing then?  I wasn&#39;t thinking ASCII at all, just that each
octal digit neatly represents one byte and isn&#39;t that handy?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;In a college programming languages course I took there was someone who worked
&gt; with an architecture with 9 bits per byte, for which it would be appropriate
</div>to use octal.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But this was close to 20 years ago.&#41;
</div>
I don&#39;t understand how octal is appropriate for 9 bit bytes.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Having a leading &#34;digit&#34; &#40;octit?&#41; that can only be 0 or 1 seems stupid to me.
</div>
Again, I&#39;m sorry, but I don&#39;t follow.  I will admit, I&#39;m not Mr. Bitwise.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; It does further support the &#34;integer does *not* contain leading zero&#34;
&gt;&gt; critic for bitwise ops indicating someone tried to use a decimal for
&gt;&gt; bitwise ops which, we can agree, is probably wrong.
</div>&gt; 
&gt; I can certainly see a separate ProhibitDecimalWithBitwiseOperator policy which would 
&gt; allow binary, octal, or hex being useful.
</div>
Would that be a separately installed and activated policy?  If so, I&#39;m going
to continue to slug it out in that perlcritic is misapplying PBP&#39;s advice.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Let&#39;s check if we&#39;re having a violent agreement.  Here&#39;s what I&#39;d
&gt;&gt; recommend:
&gt;&gt;
&gt;&gt; *&#41;  Leave the &#34;integer with leading zeros&#34; critic in for the general
&gt;&gt; case
&gt;&gt;
&gt;&gt; *&#41;  Exempt dbmopen, mkdir, umask and chmod file masks and bitwise
&gt;&gt; operations.
</div>&gt; 
&gt; The second to last word in that latter point I disagree with.
</div>
Ok, we&#39;re getting somewhere.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Again, this may be personal preference.  I don&#39;t like forms that don&#39;t match
</div>with bytes.

Again, I don&#39;t get it.  How does base 8 not match up with 8 bit bytes?  For
that matter, how does hex?  Each digit of hex is two bytes.

And, here&#39;s the most important question, why does perlcritic have anything to
say about this?


-- 
You know what the chain of command is? It&#39;s the chain I go get and beat you
with &#39;til you understand who&#39;s in ruttin&#39; command here.
        -- Jayne Cobb, &#34;Firefly&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;16:38:36&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 13:37:56 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Immediately after I sent that last reply someone explained the octal / 9 bits
thing to me.  Now I get it.

Even so, given that bitwise ops are commonly used for Unix masks and how
highly unlikely it is that using octal digits on bitwise ops is a mistake, I
don&#39;t see why perlcritic should have an opinion about octal with bitwise ops
and just what mistake it&#39;s preventing.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;17:47:19&nbsp;2007</span>
    <span class="description">ELLIOTJS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 16:47:05 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;elliotjs [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think this can boil down to one simple question:  What *exactly* is
&gt; wrong with using octal in bitwise ops to the point that you&#39;d
&gt; actively prohibit it?
&gt; 
&gt; Reading the original PBP on this, the point was to avoid people who
&gt; mistake 0123 for 123 and think it&#39;s just padding.  There&#39;s nothing
&gt; actually wrong with octal numbers.
</div>
To quote: &#34;To avoid this covert transmutation of the numbers, never start a literal integer with zero.  Even if you do intend to specify octal numbers, don&#39;t use a leading zero, as that may still mislead inattentive future readers of your code.&#34;

What part of &#34;never&#34; do you not understand?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; What is the reason for preferring hex?
&gt;&gt;&gt; 
&gt;&gt;&gt; Hex and octal are both base x**2 so it shouldn&#39;t really matter
&gt;&gt;&gt; for bitwise work.  In fact, if you&#39;re working in bytes thinking
&gt;&gt;&gt; base 8 makes a lot more sense.
</div>&gt;&gt;
&gt;&gt; Base 8 is only good if you&#39;re thinking strict ASCII, but not bytes,
&gt;&gt; since almost all architectures now use 8 bits.
</div>&gt; 
&gt; Uhh, aren&#39;t we agreeing then?  I wasn&#39;t thinking ASCII at all, just
&gt; that each octal digit neatly represents one byte and isn&#39;t that
&gt; handy?
</div>
No.  An octal digit represents three bits.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Having a leading &#34;digit&#34; &#40;octit?&#41; that can only be 0 or 1 seems
&gt;&gt; stupid to me.
</div>&gt; 
&gt; Again, I&#39;m sorry, but I don&#39;t follow.  I will admit, I&#39;m not Mr.
&gt; Bitwise.
</div>
My bad in not being more specific.  For signed values, the most significant octit can only be 0 or 1.  For signed values, it&#39;s 0 to 3.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I can certainly see a separate ProhibitDecimalWithBitwiseOperator
&gt;&gt; policy which would allow binary, octal, or hex being useful.
</div>&gt; 
&gt; Would that be a separately installed and activated policy?
</div>
Yup.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Again, this may be personal preference.  I don&#39;t like forms that
&gt;&gt; don&#39;t match with bytes.
</div>&gt; 
&gt; Again, I don&#39;t get it.  How does base 8 not match up with 8 bit
&gt; bytes?  For that matter, how does hex?  Each digit of hex is two
&gt; bytes.
</div>
Each &#34;hit&#34; represents two nybbles, thus coming together to represent a single byte.

Base 8 means that you can represent the values 0-7.  This takes three bits, i.e. 07 == 0b111. Thus, after taking 6 bits to represent the least significant part of the byte, you&#39;re left with two bits to represent the most significant part, which in octal means the values 0 to 3.

The maximum value an unsigned byte can hold:

0b11111111 == 255 == 0377 == 0xff

Thus my complaint about using an octal number to represent a byte: the most significant part of the number is restricted to the values 0 to 3, while the other parts go 0 to 7.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And, here&#39;s the most important question, why does perlcritic have
&gt; anything to say about this?
</div>
Because PBP does.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;18:45:55&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 15:45:07 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ELLIOTJS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Michael G Schwern via RT wrote:
<div class="message-stanza open">&gt;&gt; I think this can boil down to one simple question:  What *exactly* is
&gt;&gt; wrong with using octal in bitwise ops to the point that you&#39;d
&gt;&gt; actively prohibit it?
&gt;&gt;
&gt;&gt; Reading the original PBP on this, the point was to avoid people who
&gt;&gt; mistake 0123 for 123 and think it&#39;s just padding.  There&#39;s nothing
&gt;&gt; actually wrong with octal numbers.
</div>&gt; 
&gt; To quote: &#34;To avoid this covert transmutation of the numbers, never start a 
&gt; literal integer with zero.  Even if you do intend to specify octal numbers,
</div>don&#39;t use a
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; leading zero, as that may still mislead inattentive future readers of your
</div>code.&#34;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; What part of &#34;never&#34; do you not understand?
</div>
That&#39;s just the rule, not the reasoning.  I dislike blindly following rules,
it&#39;s better to examine the argument leading up to the rule.  Rules are often
situational.  Once you know the reasoning behind the rule you can know when
and where to apply it.

The argument against octal comes from the idea that the user has mistakenly
used 0123 to mean 123.  That they don&#39;t realize they can&#39;t pad numbers with
zeros.  I&#39;ve never actually seen that mistake, nor heard that argument, but
I&#39;ll accept that Damian has encountered the problem when teaching beginners.

But as I laid out, this is unlikely to apply to someone using bitwise ops.  In
that case it&#39;s A&#41; getting in the way and B&#41; missing the real mistake which is
using a decimal or string.  Would you argue that they probably DID make a mistake?

I was thinking about this some while riding around.  It&#39;s very easy to dismiss
this all as &#34;exceptional&#34; and stick to the simple rule &#34;don&#39;t use literal
octals&#34;.  But if I wanted simple rules that don&#39;t actually apply to the messy
reality I&#39;d program Java.  DWIM is simple for the user, but not necessary for
the poor schmuck implementing it.  Still, we value it here in Perl enough to
go the extra step.

Like tests, every false reading degrades my confidence in a tool&#39;s utility.
That&#39;s why I&#39;m continuing to push for a fix in Perl::Critic itself rather than
hacking my own .perlcriticrc or spreading &#34;## no critic&#34; around.

Besides, it&#39;s not like PBP hasn&#39;t been wrong before.  It&#39;s not some set of
stone tablets from God to Damian to Perl::Critic.  I see perlcritic doesn&#39;t
ding me for my use of floating point $VERSION despite 17.3 clearly stating
&#34;Don&#39;t use floating-point version numbers.&#34;


-- 
Ahh email, my old friend.  Do you know that revenge is a dish that is best
served cold?  And it is very cold on the Internet!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;19:23:54&nbsp;2007</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 18:23:38 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That&#39;s just the rule, not the reasoning.  I dislike blindly following
&gt; rules, it&#39;s better to examine the argument leading up to the rule.
&gt; Rules are often situational.  Once you know the reasoning behind the
&gt; rule you can know when and where to apply it.
</div>
Then turn the rule off.  If you don&#39;t agree with the policy, don&#39;t use it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The argument against octal comes from the idea that the user has
&gt; mistakenly used 0123 to mean 123.  That they don&#39;t realize they can&#39;t
&gt; pad numbers with zeros.  I&#39;ve never actually seen that mistake, nor
&gt; heard that argument, but I&#39;ll accept that Damian has encountered the
&gt; problem when teaching beginners.
</div>
You are not an average programmer.  You&#39;d be surprised by some stuff I&#39;ve seen.

Your separate complaint about &#34;no strict&#34; is in this vein as well.  Most programmers shouldn&#39;t be doing /anything/ that requires no strict.  I&#39;m very glad to be working with a language that supports things like no strict.  That doesn&#39;t mean you should be using it all over the place in average code.

The code that you personally write is exceptional, in more than one way.  You shouldn&#39;t expect things designed for the common programmer to cover the things that you write.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But as I laid out, this is unlikely to apply to someone using bitwise
&gt; ops.  In that case it&#39;s A&#41; getting in the way and B&#41; missing the real
&gt; mistake which is using a decimal or string.  Would you argue that
&gt; they probably DID make a mistake?
</div>
The whole reason for the entry in PBP is to make your intent blindingly obvious.  If, say, octal numbers were written using 0o777, things might be different.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I was thinking about this some while riding around.  It&#39;s very easy
&gt; to dismiss this all as &#34;exceptional&#34; and stick to the simple rule
&gt; &#34;don&#39;t use literal octals&#34;.  But if I wanted simple rules that don&#39;t
&gt; actually apply to the messy reality I&#39;d program Java.  DWIM is simple
&gt; for the user, but not necessary for the poor schmuck implementing it.
&gt; Still, we value it here in Perl enough to go the extra step.
</div>
Yup.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Like tests, every false reading degrades my confidence in a tool&#39;s
&gt; utility. That&#39;s why I&#39;m continuing to push for a fix in Perl::Critic
&gt; itself rather than hacking my own .perlcriticrc or spreading &#34;## no
&gt; critic&#34; around.
</div>
Have you looked at the P::C source?  :]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Besides, it&#39;s not like PBP hasn&#39;t been wrong before.  It&#39;s not some
&gt; set of stone tablets from God to Damian to Perl::Critic.
</div>
As he says in the introduction in the book.  P::C&#39;s role is to enable you to enforce the set of rules that you agree with.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I see perlcritic doesn&#39;t ding me for my use of floating point
&gt; $VERSION despite 17.3 clearly stating &#34;Don&#39;t use floating-point
&gt; version numbers.&#34;
</div>
No, it doesn&#39;t.  Yet.  Care to contribute one that does?  &#40;Actually, there&#39;s two policies in the TODO related to requiring the version pragma and three part version numbers.&#41;


...


Let&#39;s turn this question around.  Are there any places where you personally would like this policy to complain?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;21:41:11&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 18:40:19 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Elliot Shank via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=31977">http://rt.cpan.org/Ticket/Display.html?id=31977</a></span> &gt;
&gt; 
&gt; Michael G Schwern via RT wrote:
<div class="message-stanza open">&gt;&gt; That&#39;s just the rule, not the reasoning.  I dislike blindly following
&gt;&gt; rules, it&#39;s better to examine the argument leading up to the rule.
&gt;&gt; Rules are often situational.  Once you know the reasoning behind the
&gt;&gt; rule you can know when and where to apply it.
</div>&gt; 
&gt; Then turn the rule off.  If you don&#39;t agree with the policy, don&#39;t use it.
</div>
Somebody has to decide on the defaults.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; The argument against octal comes from the idea that the user has
&gt;&gt; mistakenly used 0123 to mean 123.  That they don&#39;t realize they can&#39;t
&gt;&gt; pad numbers with zeros.  I&#39;ve never actually seen that mistake, nor
&gt;&gt; heard that argument, but I&#39;ll accept that Damian has encountered the
&gt;&gt; problem when teaching beginners.
</div>&gt; 
&gt; You are not an average programmer.  You&#39;d be surprised by some stuff I&#39;ve seen.
</div>
Not applicable, I&#39;m not doing anything particularly bizarre here.

I disagree with the implied notion that perlcritic isn&#39;t useful across all
spectrums of abilities.  To back away from the goal is to give &#34;expert&#34;
programmers &#40;whether they actually are or just think they are&#41; carte blanche.
 As I pointed out earlier, it even did a good job on the hairball of
MakeMaker.  There is value even to experts.

Anyhow, I agree with the general idea that 0xxx might be confusing.  I
disagree that there aren&#39;t sensible exceptions.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Your separate complaint about &#34;no strict&#34; is in this vein as well.  
&gt; Most programmers shouldn&#39;t be doing /anything/ that requires no strict.
&gt; I&#39;m very glad to be working with a language that supports things like no
</div>strict.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That doesn&#39;t mean you should be using it all over the place in average code.
</div>
Many programmers wouldn&#39;t even bother to turn it on in the first place.

At some point it&#39;s ok for perlcritic to read some of the more obviously
implicit &#34;I know what I&#39;m doing&#34; rather than having to state it explicitly.

&#34;Code before strictures are enabled&#34; is a pretty well accepted bad practice.
Selectively turning off individual strictures in limited scopes is
speculation.  If nothing else speculative critics should not be of highest
severity.

You can narrow the critique against turning off strict even more.  There are
valid reasons to turn off strict references, even for mere mortal programmers.
 Method generation isn&#39;t that hard and I&#39;d rather teach that than see people
use AUTOLOAD which is what they usually reach for first.  &#40;Hey, does PC
complain about AUTOLOAD?... nope&#41;  But there&#39;s no good reason to turn off
strict vars or subs.

&#34;no strict &#39;refs&#39;&#34; in a limited scope, ok.  Any other use of &#34;no strict&#34;, bad.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; But as I laid out, this is unlikely to apply to someone using bitwise
&gt;&gt; ops.  In that case it&#39;s A&#41; getting in the way and B&#41; missing the real
&gt;&gt; mistake which is using a decimal or string.  Would you argue that
&gt;&gt; they probably DID make a mistake?
</div>&gt; 
&gt; The whole reason for the entry in PBP is to make your intent blindingly obvious.
&gt; If, say, octal numbers were written using 0o777, things might be different.
</div>
There&#39;s obvious and then there&#39;s silly.  Sometimes eschewing certain language
idioms in favor of &#34;obvious&#34; code can actually have the opposite effect.

So far everyone I&#39;ve put the recommend code in front of:

        $mask &#38;= oct 755;

has scratched their head as to why someone would do that instead of 0755.  I
would argue it has made it less obvious.

If there&#39;s a non-obvious part there it&#39;s all about using bitwise ops, not the
octal number.

It&#39;s like someone writing:

        my $count = scalar @array;

You could argue that &#34;scalar&#34; makes it more obvious and protects you against
mistakes like:

        my&#40;$count&#41; = @array;

But this reasoning is speculative.  The mistake is easily testable.  The
&#34;improved&#34; idiom is verbose, not idiomatic and implies a fear of Perlish
thinking &#40;in this case, embracing contexts&#41;.  It adds in &#34;scaffolding&#34; code
&#40;to use a Damianism&#41; that really doesn&#39;t do anything.  Finally, it is a
documented part of Perl.

Another example might be this:

        if&#40; foo&#40;@args&#41; &#41; {
                do_bar&#40;&#41;;
        }

One could argue that all the explicit parens make it &#34;obvious&#34; what&#39;s going
on.  That may be so, but they also clutter up the space with lots of parens
and braces doing different things.  Compare...

        if&#40; foo @args &#41; {
                do_bar;
        }

Or even:

        do_bar if foo @args;

Then it&#39;s ok to have your parens back.

        do_bar&#40;&#41; if foo&#40;@args&#41;;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Like tests, every false reading degrades my confidence in a tool&#39;s
&gt;&gt; utility. That&#39;s why I&#39;m continuing to push for a fix in Perl::Critic
&gt;&gt; itself rather than hacking my own .perlcriticrc or spreading &#34;## no
&gt;&gt; critic&#34; around.
</div>&gt; 
&gt; Have you looked at the P::C source?  :]
</div>
No, but I know where I put my own and why.

Having to put &#34;no critic&#34; on something genuinely weird is fine.  These are the
valid critics in MakeMaker that I individually hushed with specific reasons.

./lib/ExtUtils/MakeMaker.pm:sub prompt &#40;$;$&#41; {  ## no critic
./lib/ExtUtils/MM.pm:eval &#34;require $class&#34; unless $INC{&#34;ExtUtils/MM_$OS.pm&#34;};
## no critic
./lib/ExtUtils/MM_Unix.pm:        if&#40; open&#40;STDERR_COPY, &#39;&gt;&#38;STDERR&#39;&#41; &#41; {  ## no
critic
./lib/ExtUtils/MM_Unix.pm:                open STDERR, &#34;&gt;&#38;STDERR_COPY&#34;  ## no
critic
./lib/ExtUtils/MM_Unix.pm:        $result = eval&#40;$eval&#41;;  ## no critic
./lib/ExtUtils/MM_VMS.pm:        %xs = map { s/.xs$//; &#40;$_,1&#41; } glob&#40;&#39;*.xs&#39;&#41;;
 ## no critic

I agree with perlcritic, I am breaking good programming practice, and I&#39;m fine
with having to think about and note the exceptions.

perlcritic found a bunch more weird things that I instead altered to conform
with perlcritic&#39;s recommendations.  They were good recommendations.  This is
why I&#39;m so adamant that perlcritic not consider expert programmers exceptional.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Besides, it&#39;s not like PBP hasn&#39;t been wrong before.  It&#39;s not some
&gt;&gt; set of stone tablets from God to Damian to Perl::Critic.
</div>&gt; 
&gt; As he says in the introduction in the book.  P::C&#39;s role is to enable you to enforce the 
&gt; set of rules that you agree with.
</div>
Ahh, but somebody has to choose the defaults and the rules.  And presumably
they put some thought into that.

The better it works out of the box the better chance someone will use it.
When you&#39;re already skeptical about the value of a tool, being told you have
to spend a bunch of time tweaking tends to just fuel that skepticism.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I see perlcritic doesn&#39;t ding me for my use of floating point
&gt;&gt; $VERSION despite 17.3 clearly stating &#34;Don&#39;t use floating-point
&gt;&gt; version numbers.&#34;
</div>&gt; 
&gt; No, it doesn&#39;t.  Yet.  Care to contribute one that does?
</div>
Even Damian doesn&#39;t think that&#39;s a good idea anymore.  I&#39;m more than a little
horrified because it implies that Perl::Critic *is* blindly following PBP!

The solution is worse than the problem.  version.pm introduces all sorts of
fascinating complications, much worse than the odd floating point error.  This
is a spot where I can say I probably know more about it than Damian, although
perhaps not after he published PBP and got all the fun feedback about that
particular recommendation.

I have just two requirements for a version number:
1&#41;  It compares as a number and without warnings.
2&#41;  It only goes up over time.

These days I&#39;m recommending integer version numbers, but X.YYY is still fine.
<span class="clickylink"><a target="new" rel="nofollow" href="http://use.perl.org/~schwern/journal/35127">http://use.perl.org/~schwern/journal/35127</a></span>

There is one part of the PBP version discussion that I would enforce:  Don&#39;t
use vstrings.

I&#39;d add in another, that $VERSION should not be /^\d\.\d$/;  That is, just one
decimal point.  This strongly implies that the user expects 1.2 &lt; 1.11.

A final critic is if $VERSION is a number &#40;not a string&#41; and /0$/ as in 1.10.
 The trailing zero will be lost.  It&#39;s possible it might be handy to recommend
all simple decimal versions be strings.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Let&#39;s turn this question around.  Are there any places where you personally
&gt; would like this policy to complain?
</div>
Not personally, no, I haven&#39;t run into this yet in my own code and never run
into anyone who got confused.

Like I said I can accept the idea that in the general case bare octal numbers
may be used incorrectly by a beginner.  I&#39;ve never run into it myself, but I&#39;m
willing to defer to Damian&#39;s wider newbie teaching experience.  As the policy
is more than a bit speculative, and the mistake quickly revealed, I wouldn&#39;t
put it at the highest severity.

Compare with, say, the policy against 2 arg open.  That&#39;s a clear security
hole and thus perlcritic can say, with good certainty, that 2 arg open is a
bad idea.  It&#39;s also the sort of thing that, if it&#39;s never explained to you,
you probably never would have known it&#39;s a problem.  I didn&#39;t know until
yesterday.

As opposed to the notion that 0123 == 123.  A notion that won&#39;t last very long
if you actually try to apply it.


-- 
THIS I COMMAND!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;29&nbsp;22:35:16&nbsp;2007</span>
    <span class="description">ELLIOTJS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Dec 2007 21:35:03 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;elliotjs [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Michael G Schwern via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt; That&#39;s just the rule, not the reasoning.  I dislike blindly following
&gt;&gt;&gt; rules, it&#39;s better to examine the argument leading up to the rule.
&gt;&gt;&gt; Rules are often situational.  Once you know the reasoning behind the
&gt;&gt;&gt; rule you can know when and where to apply it.
</div>&gt;&gt; Then turn the rule off.  If you don&#39;t agree with the policy, don&#39;t use it.
</div>&gt; 
&gt; Somebody has to decide on the defaults.
</div>
Yup.  All policies are turned on by default.  Even policies from add-on distributions.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyhow, I agree with the general idea that 0xxx might be confusing.  I
&gt; disagree that there aren&#39;t sensible exceptions.
</div>
You can get agreement from me on that in the obvious permissions situations, but not otherwise.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; At some point it&#39;s ok for perlcritic to read some of the more obviously
&gt; implicit &#34;I know what I&#39;m doing&#34; rather than having to state it explicitly.
</div>
Define obvious.  For a computer and for an arbitrary programmer.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There&#39;s obvious and then there&#39;s silly.
</div>
For whom?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So far everyone I&#39;ve put the recommend code in front of:
&gt; 
&gt;       $mask &#38;= oct 755;
&gt; 
&gt; has scratched their head as to why someone would do that instead of 0755.  I
&gt; would argue it has made it less obvious.
</div>
Yes, for something dealing with file permissions, I accept octal.  However, how is P::C supposed to know this?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ahh, but somebody has to choose the defaults and the rules.  And presumably
&gt; they put some thought into that.
</div>
Don&#39;t blame me.  I didn&#39;t write this policy.  :]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There is one part of the PBP version discussion that I would enforce:  Don&#39;t
&gt; use vstrings.
</div>
Already covered: ValuesAndExpressions::ProhibitVersionStrings

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Let&#39;s turn this question around.  Are there any places where you personally
&gt;&gt; would like this policy to complain?
</div>&gt; 
&gt; Not personally, no, I haven&#39;t run into this yet in my own code and never run
&gt; into anyone who got confused.
</div>
Then why are we having this discussion?  :]  &#40;I know, I know.  It&#39;s just a rhetorical question.&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As opposed to the notion that 0123 == 123.  A notion that won&#39;t last very long
&gt; if you actually try to apply it.
</div>
The problem is 0123 == $x.


Conclusion: I am willing, when I have enough tuits, to make exceptions for the obvious file permissions cases.  I am not willing to make others.

But that&#39;s just me.  I&#39;m not the only one on the project and anyone else is free to do as you suggest.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;30&nbsp;17:43:58&nbsp;2007</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Dec 2007 14:43:17 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ELLIOTJS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Conclusion: I am willing, when I have enough tuits, to make exceptions for the obvious
&gt; file permissions cases.  I am not willing to make others.
&gt; 
&gt; But that&#39;s just me.  I&#39;m not the only one on the project and anyone else is free to do
&gt; as you suggest.
</div>
I was thinking something similar, especially after I saw your Twitter message.

Why don&#39;t I report the bitwise/octal thing as a separate bug to move it out of
the way and then we can fix the obvious [1] Unix mode issues?


[1] Oh no, I can&#39;t define obvious!!!!!1!1one ;P

-- 
But there&#39;s no sense crying over every mistake.
You just keep on trying till you run out of cake.
    -- Jonathan Coulton, &#34;Still Alive&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;30&nbsp;18:33:16&nbsp;2007</span>
    <span class="description">ELLIOTJS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Dec 2007 17:32:15 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;elliotjs [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ELLIOTJS via RT wrote:
<div class="message-stanza open">&gt;&gt; Conclusion: I am willing, when I have enough tuits, to make exceptions for the obvious
&gt;&gt; file permissions cases.  I am not willing to make others.
&gt;&gt;
&gt;&gt; But that&#39;s just me.  I&#39;m not the only one on the project and anyone else is free to do
&gt;&gt; as you suggest.
</div>&gt; 
&gt; I was thinking something similar, especially after I saw your Twitter message.
</div>
Basically, my reason for this is that I hate octal &#40;with the exception of the natural match with permissions&#41; due to its mismatch with bytes and want to discourage its use.  So, if there&#39;s something that makes using it annoying, I&#39;m for it.  :]
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;30&nbsp;20:45:24&nbsp;2007</span>
    <span class="description">chris [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Dec 2007 19:45:08 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Dolan &lt;chris [...] chrisdolan.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Dec 30, 2007, at 5:33 PM, ELLIOTJS via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Basically, my reason for this is that I hate octal &#40;with the  
&gt; exception of the natural match with permissions&#41; due to its  
&gt; mismatch with bytes and want to discourage its use.  So, if there&#39;s  
&gt; something that makes using it annoying, I&#39;m for it.  :]
</div>
:-&#41;  I love this quote!

Chris
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;22&nbsp;19:44:47&nbsp;2008</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Jun 2008 16:44:26 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Perl-Critic
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=31977">http://rt.cpan.org/Ticket/Display.html?id=31977</a></span> &gt;
&gt; 
&gt; Similar issues with dbmopen, mkdir and umask.
</div>
Just checked in changes for the permissions arguments to chmod, dbmopen, mkdir, sysopen, and umask.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;04&nbsp;14:01:12&nbsp;2008</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #31977] &#34;Integer with leading zeros&#34; exceptions for chmod&#40;&#41;?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 04 Jul 2008 13:00:51 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Elliot Shank via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Michael G Schwern via RT wrote:
<div class="message-stanza open">&gt;&gt; Similar issues with dbmopen, mkdir and umask.
</div>&gt; 
&gt; Just checked in changes for the permissions arguments to chmod,
&gt; dbmopen, mkdir, sysopen, and umask.
</div>
Just released in 1.088.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;09&nbsp;15:56:12&nbsp;2008</span>
    <span class="description">thaljef [...] cpan.org -  Broken in 1.088 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;09&nbsp;15:56:12&nbsp;2008</span>
    <span class="description">thaljef [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
