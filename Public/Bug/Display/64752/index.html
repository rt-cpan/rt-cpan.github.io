<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #64752 for DBD-Oracle: DBD ERROR: OCIStmtPrepare</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #64752 for DBD-Oracle: DBD ERROR: OCIStmtPrepare</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/pythian/DBD-Oracle/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Oracle">DBD-Oracle CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">64752</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-Oracle/Active/">DBD-Oracle</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dflewelling [...] epsilon.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-10192-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.24    </td>
  </tr>
  <tr id="CF-10193-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;13&nbsp;15:13:47&nbsp;2011</span>
    <span class="description">dflewelling [...] epsilon.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD ERROR: OCIStmtPrepare</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">AIX 6.1.0.0
Perl: v5.8.8 built for aix-thread-multi
DBI Version:1.613
DBD::Oracle: 1.24
Oracle: 10.2.0.3

DBD Oracle seems to get corrupted if I am switching back/forth between 
an ODBC connection and Oracle connection.

for example: I have a connection to an ODBC &#40;netezza&#41; database and 
Oracle database.

I can prepare and execute a statement against the ODBC connection, but 
when I try to prepare a subsequent statement against the Oracle 
database, I get the following error:

 ORA-24373: invalid length specified for statement &#40;DBD ERROR: 
OCIStmtPrepare&#41; [for Statement &#34;SELECT * FROM EXTRACT_ATTR&#34;]

However, if I reverse the order of the statements &#40;e.g. Oracle first 
and ODBC second&#41;, both work fine.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;14&nbsp;11:43:21&nbsp;2011</span>
    <span class="description">dflewelling [...] epsilon.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dflewelling [...] epsilon.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jan 13 15:13:47 2011, dflewelling wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; AIX 6.1.0.0
&gt; Perl: v5.8.8 built for aix-thread-multi
&gt; DBI Version:1.613
&gt; DBD::Oracle: 1.24
&gt; Oracle: 10.2.0.3
&gt; 
&gt; DBD Oracle seems to get corrupted if I am switching back/forth 
</div>between 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; an ODBC connection and Oracle connection.
&gt; 
&gt; for example: I have a connection to an ODBC &#40;netezza&#41; database and 
&gt; Oracle database.
&gt; 
&gt; I can prepare and execute a statement against the ODBC connection, 
</div>but 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; when I try to prepare a subsequent statement against the Oracle 
&gt; database, I get the following error:
&gt; 
&gt;  ORA-24373: invalid length specified for statement &#40;DBD ERROR: 
&gt; OCIStmtPrepare&#41; [for Statement &#34;SELECT * FROM EXTRACT_ATTR&#34;]
&gt; 
&gt; However, if I reverse the order of the statements &#40;e.g. Oracle first 
&gt; and ODBC second&#41;, both work fine.
&gt; 
</div>additional information:
as long as I prepare a statement against Oracle FIRST, everything seems 
to work fine...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;18&nbsp;04:30:38&nbsp;2011</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jan 14 11:43:21 2011, dflewelling wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Jan 13 15:13:47 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; AIX 6.1.0.0
&gt; &gt; Perl: v5.8.8 built for aix-thread-multi
&gt; &gt; DBI Version:1.613
&gt; &gt; DBD::Oracle: 1.24
&gt; &gt; Oracle: 10.2.0.3
&gt; &gt; 
&gt; &gt; DBD Oracle seems to get corrupted if I am switching back/forth 
</div>&gt; between 
<div class="message-stanza open">&gt; &gt; an ODBC connection and Oracle connection.
&gt; &gt; 
&gt; &gt; for example: I have a connection to an ODBC &#40;netezza&#41; database and 
&gt; &gt; Oracle database.
&gt; &gt; 
&gt; &gt; I can prepare and execute a statement against the ODBC connection, 
</div>&gt; but 
<div class="message-stanza open">&gt; &gt; when I try to prepare a subsequent statement against the Oracle 
&gt; &gt; database, I get the following error:
&gt; &gt; 
&gt; &gt;  ORA-24373: invalid length specified for statement &#40;DBD ERROR: 
&gt; &gt; OCIStmtPrepare&#41; [for Statement &#34;SELECT * FROM EXTRACT_ATTR&#34;]
&gt; &gt; 
&gt; &gt; However, if I reverse the order of the statements &#40;e.g. Oracle first 
&gt; &gt; and ODBC second&#41;, both work fine.
&gt; &gt; 
</div>&gt; additional information:
&gt; as long as I prepare a statement against Oracle FIRST, everything seems 
&gt; to work fine...
&gt; 
</div>
The only time I&#39;ve seen this is when two connections use different
shared objects but both contain the same symbol e.g., using DBD::ODBC
with any ODBC driver and DBD::DB2 with their cli driver &#40;they both
contain SQLxxx fns&#41;. The solution in that case was to set
PERL_DL_NONLAZY and export it before running the script.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;18&nbsp;04:30:40&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;18&nbsp;09:33:12&nbsp;2011</span>
    <span class="description">dflewelling [...] epsilon.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dflewelling [...] epsilon.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jan 18 04:30:38 2011, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Jan 14 11:43:21 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; On Thu Jan 13 15:13:47 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; &gt; AIX 6.1.0.0
&gt; &gt; &gt; Perl: v5.8.8 built for aix-thread-multi
&gt; &gt; &gt; DBI Version:1.613
&gt; &gt; &gt; DBD::Oracle: 1.24
&gt; &gt; &gt; Oracle: 10.2.0.3
&gt; &gt; &gt; 
&gt; &gt; &gt; DBD Oracle seems to get corrupted if I am switching back/forth 
</div>&gt; &gt; between 
<div class="message-stanza open">&gt; &gt; &gt; an ODBC connection and Oracle connection.
&gt; &gt; &gt; 
&gt; &gt; &gt; for example: I have a connection to an ODBC &#40;netezza&#41; database 
</div></div></div>and 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; Oracle database.
&gt; &gt; &gt; 
&gt; &gt; &gt; I can prepare and execute a statement against the ODBC 
</div></div>connection, 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; but 
<div class="message-stanza open">&gt; &gt; &gt; when I try to prepare a subsequent statement against the Oracle 
&gt; &gt; &gt; database, I get the following error:
&gt; &gt; &gt; 
&gt; &gt; &gt;  ORA-24373: invalid length specified for statement &#40;DBD ERROR: 
&gt; &gt; &gt; OCIStmtPrepare&#41; [for Statement &#34;SELECT * FROM EXTRACT_ATTR&#34;]
&gt; &gt; &gt; 
&gt; &gt; &gt; However, if I reverse the order of the statements &#40;e.g. Oracle 
</div></div></div>first 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; and ODBC second&#41;, both work fine.
&gt; &gt; &gt; 
</div>&gt; &gt; additional information:
&gt; &gt; as long as I prepare a statement against Oracle FIRST, everything 
</div></div>seems 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; to work fine...
&gt; &gt; 
</div>&gt; 
&gt; The only time I&#39;ve seen this is when two connections use different
&gt; shared objects but both contain the same symbol e.g., using DBD::ODBC
&gt; with any ODBC driver and DBD::DB2 with their cli driver &#40;they both
&gt; contain SQLxxx fns&#41;. The solution in that case was to set
&gt; PERL_DL_NONLAZY and export it before running the script.
&gt; 
&gt; Martin
</div>
Thanks for the suggestion.  I just tried that and it made no 
difference.  any ideas what code I should be looking at ?  &#40;I&#39;m fairly 
new to perl and not sure where to start looking...&#41;

Thanks
Dwight
 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;18&nbsp;15:13:23&nbsp;2011</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jan 18 09:33:12 2011, dflewelling wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Jan 18 04:30:38 2011, MJEVANS wrote:
<div class="message-stanza open">&gt; &gt; On Fri Jan 14 11:43:21 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Thu Jan 13 15:13:47 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; AIX 6.1.0.0
&gt; &gt; &gt; &gt; Perl: v5.8.8 built for aix-thread-multi
&gt; &gt; &gt; &gt; DBI Version:1.613
&gt; &gt; &gt; &gt; DBD::Oracle: 1.24
&gt; &gt; &gt; &gt; Oracle: 10.2.0.3
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; DBD Oracle seems to get corrupted if I am switching back/forth 
</div>&gt; &gt; &gt; between 
<div class="message-stanza open">&gt; &gt; &gt; &gt; an ODBC connection and Oracle connection.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; for example: I have a connection to an ODBC &#40;netezza&#41; database 
</div></div></div>&gt; and 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; Oracle database.
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; I can prepare and execute a statement against the ODBC 
</div></div>&gt; connection, 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; but 
<div class="message-stanza open">&gt; &gt; &gt; &gt; when I try to prepare a subsequent statement against the Oracle 
&gt; &gt; &gt; &gt; database, I get the following error:
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt;  ORA-24373: invalid length specified for statement &#40;DBD ERROR: 
&gt; &gt; &gt; &gt; OCIStmtPrepare&#41; [for Statement &#34;SELECT * FROM EXTRACT_ATTR&#34;]
&gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; However, if I reverse the order of the statements &#40;e.g. Oracle 
</div></div></div>&gt; first 
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; and ODBC second&#41;, both work fine.
&gt; &gt; &gt; &gt; 
</div>&gt; &gt; &gt; additional information:
&gt; &gt; &gt; as long as I prepare a statement against Oracle FIRST, everything 
</div></div>&gt; seems 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; to work fine...
&gt; &gt; &gt; 
</div>&gt; &gt; 
&gt; &gt; The only time I&#39;ve seen this is when two connections use different
&gt; &gt; shared objects but both contain the same symbol e.g., using DBD::ODBC
&gt; &gt; with any ODBC driver and DBD::DB2 with their cli driver &#40;they both
&gt; &gt; contain SQLxxx fns&#41;. The solution in that case was to set
&gt; &gt; PERL_DL_NONLAZY and export it before running the script.
&gt; &gt; 
&gt; &gt; Martin
</div>&gt; 
&gt; Thanks for the suggestion.  I just tried that and it made no 
&gt; difference.  any ideas what code I should be looking at ?  &#40;I&#39;m fairly 
&gt; new to perl and not sure where to start looking...&#41;
&gt; 
&gt; Thanks
&gt; Dwight
&gt;  
</div>
I&#39;m not saying it is definitely what I described but the only time I&#39;ve
seen it was when 2 libs under DBDs exported the same symbols in shared
objects &#40;.a files on AIX containing shared objects&#41;. If you set
PERL_DL_NONLAZY and it did not make the problem go away them /maybe/ it
is a different issue. We discovered it by running nm on the libs used by
the Perl DBDs and seeing they exported the same symbols. PERL_DL_NONLAZY
changes the way symbols are resolved &#40;downwards&#41; in groups.

I&#39;ve not got all of your databases so I cannot reproduce here and help
diagnose - you may be on your own :-&#40;

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;06&nbsp;09:31:05&nbsp;2011</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jan 18 15:13:23 2011, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Jan 18 09:33:12 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; On Tue Jan 18 04:30:38 2011, MJEVANS wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Fri Jan 14 11:43:21 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On Thu Jan 13 15:13:47 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; AIX 6.1.0.0
&gt; &gt; &gt; &gt; &gt; Perl: v5.8.8 built for aix-thread-multi
&gt; &gt; &gt; &gt; &gt; DBI Version:1.613
&gt; &gt; &gt; &gt; &gt; DBD::Oracle: 1.24
&gt; &gt; &gt; &gt; &gt; Oracle: 10.2.0.3
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; DBD Oracle seems to get corrupted if I am switching back/forth 
</div>&gt; &gt; &gt; &gt; between 
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; an ODBC connection and Oracle connection.
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; for example: I have a connection to an ODBC &#40;netezza&#41; database 
</div></div></div>&gt; &gt; and 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Oracle database.
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; I can prepare and execute a statement against the ODBC 
</div></div>&gt; &gt; connection, 
<div class="message-stanza open">&gt; &gt; &gt; &gt; but 
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; when I try to prepare a subsequent statement against the 
</div></div></div></div>Oracle 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; database, I get the following error:
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt;  ORA-24373: invalid length specified for statement &#40;DBD ERROR: 
&gt; &gt; &gt; &gt; &gt; OCIStmtPrepare&#41; [for Statement &#34;SELECT * FROM EXTRACT_ATTR&#34;]
&gt; &gt; &gt; &gt; &gt; 
&gt; &gt; &gt; &gt; &gt; However, if I reverse the order of the statements &#40;e.g. Oracle 
</div></div>&gt; &gt; first 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; and ODBC second&#41;, both work fine.
&gt; &gt; &gt; &gt; &gt; 
</div>&gt; &gt; &gt; &gt; additional information:
&gt; &gt; &gt; &gt; as long as I prepare a statement against Oracle FIRST, 
</div></div></div>everything 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; seems 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; to work fine...
&gt; &gt; &gt; &gt; 
</div>&gt; &gt; &gt; 
&gt; &gt; &gt; The only time I&#39;ve seen this is when two connections use different
&gt; &gt; &gt; shared objects but both contain the same symbol e.g., using 
</div></div></div>DBD::ODBC
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; with any ODBC driver and DBD::DB2 with their cli driver &#40;they both
&gt; &gt; &gt; contain SQLxxx fns&#41;. The solution in that case was to set
&gt; &gt; &gt; PERL_DL_NONLAZY and export it before running the script.
&gt; &gt; &gt; 
&gt; &gt; &gt; Martin
</div>&gt; &gt; 
&gt; &gt; Thanks for the suggestion.  I just tried that and it made no 
&gt; &gt; difference.  any ideas what code I should be looking at ?  &#40;I&#39;m 
</div></div>fairly 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; new to perl and not sure where to start looking...&#41;
&gt; &gt; 
&gt; &gt; Thanks
&gt; &gt; Dwight
&gt; &gt;  
</div>&gt; 
&gt; I&#39;m not saying it is definitely what I described but the only time 
</div>I&#39;ve
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; seen it was when 2 libs under DBDs exported the same symbols in shared
&gt; objects &#40;.a files on AIX containing shared objects&#41;. If you set
&gt; PERL_DL_NONLAZY and it did not make the problem go away them /maybe/ 
</div>it
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; is a different issue. We discovered it by running nm on the libs used 
</div>by
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the Perl DBDs and seeing they exported the same symbols. 
</div>PERL_DL_NONLAZY
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; changes the way symbols are resolved &#40;downwards&#41; in groups.
&gt; 
&gt; I&#39;ve not got all of your databases so I cannot reproduce here and help
&gt; diagnose - you may be on your own :-&#40;
&gt; 
&gt; Martin
</div>
Did you get anywhere with this? Can we close this rt now?

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;06&nbsp;09:31:55&nbsp;2011</span>
    <span class="description">dflewelling [...] epsilon.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #64752] DBD ERROR: OCIStmtPrepare </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 6 Apr 2011 09:31:43 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-DBD-Oracle [...] rt.cpan.org&#34; &lt;bug-DBD-Oracle [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Flewelling, Dwight&#34; &lt;dflewelling [...] epsilon.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Never resolved it.  But we have a work around...


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Martin J Evans via RT [mailto:bug-DBD-Oracle@rt.cpan.org]
Sent: Wednesday, April 06, 2011 9:31 AM
To: Flewelling, Dwight
Subject: [rt.cpan.org #64752] DBD ERROR: OCIStmtPrepare

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=64752">https://rt.cpan.org/Ticket/Display.html?id=64752</a></span> &gt;

On Tue Jan 18 15:13:23 2011, MJEVANS wrote:
<div class="message-stanza open">&gt; On Tue Jan 18 09:33:12 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; On Tue Jan 18 04:30:38 2011, MJEVANS wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Fri Jan 14 11:43:21 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On Thu Jan 13 15:13:47 2011, dflewelling wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; AIX 6.1.0.0
&gt; &gt; &gt; &gt; &gt; Perl: v5.8.8 built for aix-thread-multi
&gt; &gt; &gt; &gt; &gt; DBI Version:1.613
&gt; &gt; &gt; &gt; &gt; DBD::Oracle: 1.24
&gt; &gt; &gt; &gt; &gt; Oracle: 10.2.0.3
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; DBD Oracle seems to get corrupted if I am switching back/forth
</div>&gt; &gt; &gt; &gt; between
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; an ODBC connection and Oracle connection.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; for example: I have a connection to an ODBC &#40;netezza&#41; database
</div></div></div>&gt; &gt; and
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Oracle database.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I can prepare and execute a statement against the ODBC
</div></div>&gt; &gt; connection,
<div class="message-stanza open">&gt; &gt; &gt; &gt; but
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; when I try to prepare a subsequent statement against the
</div></div></div></div>Oracle
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; database, I get the following error:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;  ORA-24373: invalid length specified for statement &#40;DBD ERROR:
&gt; &gt; &gt; &gt; &gt; OCIStmtPrepare&#41; [for Statement &#34;SELECT * FROM EXTRACT_ATTR&#34;]
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; However, if I reverse the order of the statements &#40;e.g. Oracle
</div></div>&gt; &gt; first
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; and ODBC second&#41;, both work fine.
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt; additional information:
&gt; &gt; &gt; &gt; as long as I prepare a statement against Oracle FIRST,
</div></div></div>everything
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; seems
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; to work fine...
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; The only time I&#39;ve seen this is when two connections use different
&gt; &gt; &gt; shared objects but both contain the same symbol e.g., using
</div></div></div>DBD::ODBC
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; with any ODBC driver and DBD::DB2 with their cli driver &#40;they both
&gt; &gt; &gt; contain SQLxxx fns&#41;. The solution in that case was to set
&gt; &gt; &gt; PERL_DL_NONLAZY and export it before running the script.
&gt; &gt; &gt;
&gt; &gt; &gt; Martin
</div>&gt; &gt;
&gt; &gt; Thanks for the suggestion.  I just tried that and it made no
&gt; &gt; difference.  any ideas what code I should be looking at ?  &#40;I&#39;m
</div></div>fairly
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; new to perl and not sure where to start looking...&#41;
&gt; &gt;
&gt; &gt; Thanks
&gt; &gt; Dwight
&gt; &gt;
</div>&gt;
&gt; I&#39;m not saying it is definitely what I described but the only time
</div>I&#39;ve
<div class="message-stanza open">&gt; seen it was when 2 libs under DBDs exported the same symbols in shared
&gt; objects &#40;.a files on AIX containing shared objects&#41;. If you set
&gt; PERL_DL_NONLAZY and it did not make the problem go away them /maybe/
</div>it
<div class="message-stanza open">&gt; is a different issue. We discovered it by running nm on the libs used
</div>by
<div class="message-stanza open">&gt; the Perl DBDs and seeing they exported the same symbols.
</div>PERL_DL_NONLAZY
<div class="message-stanza open">&gt; changes the way symbols are resolved &#40;downwards&#41; in groups.
&gt;
&gt; I&#39;ve not got all of your databases so I cannot reproduce here and help
&gt; diagnose - you may be on your own :-&#40;
&gt;
&gt; Martin
</div>
Did you get anywhere with this? Can we close this rt now?

Martin
--
Martin J. Evans
Wetherby, UK

This e-mail and files transmitted with it are confidential, and are intended solely for the use of the individual or entity to whom this e-mail is addressed. If you are not the intended recipient, or the employee or agent responsible to deliver it to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you are not one of the named recipient&#40;s&#41; or otherwise have reason to believe that you received this message in error, please immediately notify sender by e-mail, and destroy the original message. Thank You.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;05&nbsp;12:22:08&nbsp;2011</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;22&nbsp;14:16:55&nbsp;2019</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;stalled&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
