<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #57562 for DBD-DB2: Perl DBD::DB2 v1.78 problem with the CLOB data type</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #57562 for DBD-DB2: Perl DBD::DB2 v1.78 problem with the CLOB data type</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-DB2">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-DB2">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-DB2">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-DB2">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-DB2">DBD-DB2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">57562</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-DB2">DBD-DB2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tolix [...] olviko.ru

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10084-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10085-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




perl_null_lob_patch.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/791239/410028/perl_null_lob_patch.diff">
Tue Jun 15 11:42:37 2010 (490b) by opendev [...] us.ibm.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=57562">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-778243" href="/Public/Bug/Display.html?id=57562#txn-778243">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;17&nbsp;15:19:24&nbsp;2010</span>
    <span class="description">tolix [...] olviko.ru -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Perl DBD::DB2 v1.78 problem with the CLOB data type</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 May 2010 23:18:43 +0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> opendev [...] us.ibm.com, bug-DBD-DB2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Anatoly Davidov &lt;tolix [...] olviko.ru&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/778243/403059/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/403059">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello!

It looks like the new version of DBD::DB2 &#40;v1.78&#41; has an issue with the 
CLOB data type &#40;at least&#41; on my CentOS/RedHat Linux 5.5 32bit box 
running DB2 Express-C v9.7, perl v5.8.8.

The problem: when a SELECT statement does not contain a CLOB field in 
the list of fields to return, it works fine &#40;returns rows&#41;. But when I 
am adding a CLOB field - the resulting data set becomes 
empty.&#40;$sth-&gt;fetchrow_array&#40;&#41; returns undef immediately&#41;.


The issue is not reproducible on previous versions of DBD::DB2 &#40;v1.76, 
v1.1&#41;.

The script to reproduce:

#!/usr/bin/perl

use strict;
use DBI;
use Data::Dumper;

my $dbh = DBI-&gt;connect&#40;&#39;dbi:DB2:o3x&#39;, &#39;&#39;, &#39;&#39;&#41; || die DBI::errstr&#40;&#41;;

$dbh-&gt;{LongReadLen} = 2000000;
$dbh-&gt;{LongTruncOk} = 1;

$dbh-&gt;do&#40;&#39;SET SCHEMA o3x&#39;&#41;;

# docfield.defvalue is CLOB, codepage CP1251.

my $q1 = qq{
         SELECT
             docfield.tablename,
             docfield.docfieldtag,
             docfield.tablefieldname,
             docfield.docfieldname,
             docfield.defvalue,
             docfield.quoteme
         FROM
             docfield
         WHERE
             docfield.doctype = &#39;Man&#39;
};

my $sth = $dbh-&gt;prepare&#40;$q1&#41; || die $dbh-&gt;errstr&#40;&#41;;
$sth-&gt;execute&#40;&#41;;

while&#40; my @row = $sth-&gt;fetchrow_array&#40;&#41; &#41;
{
     print join&#40;&#39;, &#39;, @row&#41;, &#34;\n&#34;;
}

die $sth-&gt;errstr&#40;&#41; if $sth-&gt;err;

$sth-&gt;finish&#40;&#41;;
$dbh-&gt;disconnect&#40;&#41;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-786224" href="/Public/Bug/Display.html?id=57562#txn-786224">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;03&nbsp;22:26:07&nbsp;2010</span>
    <span class="description">campbell.leigh [...] abc.net.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> campbell.leigh [...] abc.net.au</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/786224/407328/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/407328">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon May 17 15:19:24 2010, tolix@olviko.ru wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello!
&gt; 
&gt; It looks like the new version of DBD::DB2 &#40;v1.78&#41; has an issue with the 
&gt; CLOB data type &#40;at least&#41; on my CentOS/RedHat Linux 5.5 32bit box 
&gt; running DB2 Express-C v9.7, perl v5.8.8.
&gt; 
&gt; The problem: when a SELECT statement does not contain a CLOB field in 
&gt; the list of fields to return, it works fine &#40;returns rows&#41;. But when I 
&gt; am adding a CLOB field - the resulting data set becomes 
&gt; empty.&#40;$sth-&gt;fetchrow_array&#40;&#41; returns undef immediately&#41;.
&gt; 
&gt; 
&gt; The issue is not reproducible on previous versions of DBD::DB2 &#40;v1.76, 
&gt; v1.1&#41;.
&gt; 
&gt; The script to reproduce:
&gt; 
&gt; #!/usr/bin/perl
&gt; 
&gt; use strict;
&gt; use DBI;
&gt; use Data::Dumper;
&gt; 
&gt; my $dbh = DBI-&gt;connect&#40;&#39;dbi:DB2:o3x&#39;, &#39;&#39;, &#39;&#39;&#41; || die DBI::errstr&#40;&#41;;
&gt; 
&gt; $dbh-&gt;{LongReadLen} = 2000000;
&gt; $dbh-&gt;{LongTruncOk} = 1;
&gt; 
&gt; $dbh-&gt;do&#40;&#39;SET SCHEMA o3x&#39;&#41;;
&gt; 
&gt; # docfield.defvalue is CLOB, codepage CP1251.
&gt; 
&gt; my $q1 = qq{
&gt;          SELECT
&gt;              docfield.tablename,
&gt;              docfield.docfieldtag,
&gt;              docfield.tablefieldname,
&gt;              docfield.docfieldname,
&gt;              docfield.defvalue,
&gt;              docfield.quoteme
&gt;          FROM
&gt;              docfield
&gt;          WHERE
&gt;              docfield.doctype = &#39;Man&#39;
&gt; };
&gt; 
&gt; my $sth = $dbh-&gt;prepare&#40;$q1&#41; || die $dbh-&gt;errstr&#40;&#41;;
&gt; $sth-&gt;execute&#40;&#41;;
&gt; 
&gt; while&#40; my @row = $sth-&gt;fetchrow_array&#40;&#41; &#41;
&gt; {
&gt;      print join&#40;&#39;, &#39;, @row&#41;, &#34;\n&#34;;
&gt; }
&gt; 
&gt; die $sth-&gt;errstr&#40;&#41; if $sth-&gt;err;
&gt; 
&gt; $sth-&gt;finish&#40;&#41;;
&gt; $dbh-&gt;disconnect&#40;&#41;;
&gt; 
</div>

Hi

I can also confirm the problem on AIX 5.2, Perl 5.12.0 &#40;64-bit&#41; and DB2
8.1 FP18.

However, cannot repeat the problem on AIX 5.2, Perl 5.12.0 &#40;64-bit
threaded&#41; and DB2 8.1 FP8.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-786227" href="/Public/Bug/Display.html?id=57562#txn-786227">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;03&nbsp;22:26:09&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-787422" href="/Public/Bug/Display.html?id=57562#txn-787422">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;07&nbsp;01:44:32&nbsp;2010</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/787422/407957/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/407957">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 447b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I tried the use case described here and am able to retrieve the data
correctly. I tried with a simple table containing 3 fields, 1 clob and
other 2 varchar.

Could you provide us with the CLI trace for your test case run. This
will help us with more insight into the problem. Follow the link
<span class="clickylink"><a target="new" rel="nofollow" href="http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/c0008936.html">http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.trb.doc/doc/c0008936.html</a></span>
 to obtain the cli trace.

Thanks

Praveen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-791239" href="/Public/Bug/Display.html?id=57562#txn-791239">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;15&nbsp;11:42:37&nbsp;2010</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/791239/410027/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/410027">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 431b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Anatoly/Leigh,

I was able to reproduce the issue that you are seeing. This happens when
the value in the CLOB column is null. I am attaching a patch, containing
the fix, to the dbdimp.c file in this defect log. Apply the same and you
should be able to get away with the error.

Let me know if you require any clarifications.

-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> perl_null_lob_patch.diff</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/791239/410028/perl_null_lob_patch.diff">Download perl_null_lob_patch.diff</a><br />
<span class="downloadcontenttype">text/x-diff 490b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- /home/user/perl/DBD-DB2/dbdimp.c	&#40; Version 1.78 &#41;
+++ /home/user/perl/DBD-DB2/dbdimp.c	&#40; Working Copy &#41;
@@ -2562,6 +2562,11 @@
   SQLHANDLE        new_hstmt;
   SQLRETURN        rc;
 
+  if&#40; fbh-&gt;loc_ind == SQL_NULL_DATA &#41; { /* If column value is NULL then set rlen to -1 and return SQL_SUCCESS */
+    fbh-&gt;rlen = -1;
+    return SQL_SUCCESS;
+  }
+
   rc = SQLAllocHandle&#40;SQL_HANDLE_STMT, hdbc, &#38;new_hstmt&#41;;
 
   if&#40; rc != SQL_SUCCESS &#38;&#38; rc != SQL_SUCCESS_WITH_INFO &#41; {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-822075" href="/Public/Bug/Display.html?id=57562#txn-822075">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;25&nbsp;02:08:45&nbsp;2010</span>
    <span class="description">opendev [...] us.ibm.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/822075/425945/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/425945">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 147b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix for the Problem available in version 1.79
-- 
Thanks
Praveen
IBM OpenSource Application Development Team
India Software Labs, Bangalore &#40;India&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-822077" href="/Public/Bug/Display.html?id=57562#txn-822077">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;25&nbsp;02:08:46&nbsp;2010</span>
    <span class="description">opendev [...] us.ibm.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.366683</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
