<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47527 for DBD-Sybase: DBD::Sybase 1.09 unable to connect to ASE 15.0.2 via Kerberos</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47527 for DBD-Sybase: DBD::Sybase 1.09 unable to connect to ASE 15.0.2 via Kerberos</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-Sybase">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-Sybase">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-Sybase">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-Sybase">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Sybase">DBD-Sybase CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47527</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-Sybase">DBD-Sybase</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">mpeppler [...] peppler.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kevin.ruscoe [...] ubs.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-10262-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.09    </td>
  </tr>
  <tr id="CF-10263-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




dbd-sybase.dbi_trace_out.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/627553/319446/dbd-sybase.dbi_trace_out.txt">
Thu Jul 02 22:19:38 2009 (2.8k) by KRUSCOE [...] cpan.org
</a>
</font></li>
</ul>


dbd-sybase.ldd_out.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/627553/319440/dbd-sybase.ldd_out.txt">
Thu Jul 02 22:19:38 2009 (1.3k) by KRUSCOE [...] cpan.org
</a>
</font></li>
</ul>


dbd-sybase.perl.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/627553/319437/dbd-sybase.perl.txt">
Thu Jul 02 22:19:38 2009 (430b) by KRUSCOE [...] cpan.org
</a>
</font></li>
</ul>


dbd-sybase.strace_out.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/627553/319443/dbd-sybase.strace_out.txt">
Thu Jul 02 22:19:38 2009 (806b) by KRUSCOE [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=47527">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627553" href="/Public/Bug/Display.html?id=47527#txn-627553">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;22:19:38&nbsp;2009</span>
    <span class="description">KRUSCOE [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD::Sybase 1.09 unable to connect to ASE 15.0.2 via Kerberos</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/627553/319434/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/319434">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi

I have recently built DBI-1.608 and DBD-Sybase-1.09 on RHEL 5.3 64bit. 
Connecting &#34;normally&#34; to an ASE 15.0.2 dataserver using this build works
fine.  Connecting with isql via Kerberos also works fine. 
Unfortunately, connecting with the built DBD::Sybase module via Kerberos
does not work.  The only error message I receive from the data server is
&#34;error string not available&#34;.  More details below and attached.

1&#41; First, I obtain a Kerberos ticket

$ env - /usr/kerberos/bin/kinit -V -k -t
/home/ruscoeke/Kerberos/grBatch@SWISSBANK.COM grBatch@SWISSBANK.COM
Authenticated to Kerberos v5

2&#41; Next, I test that connecting to the dataserver using isql via Kerberos
works.

$ env - \
PATH=/bin:/usr/bin:/usr/kerberos/bin \
SYBASE=/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM \
SYBASE_OCS=OCS-15_0 \
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/bin/isql
-V -S SM_GR_QA4_SQL
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">1&gt; quit
</div>
3&#41; Finally, I run the attached dbd-sybase.perl.txt script, which fails
to connect.  See the attachments for details.

Attachments
-----------
dbd-sybase.ldd_out.txt: library dependencies for the DBD::Sybase module
I have built.

dbd-sybase.perl.txt: the test script I am using to connect to ASE 15.0.2
using DBD::Sybase via Kerberos.

dbd-sybase.dbi_trace_out.txt: output of test script with DBI_TRACE set to 2.

dbd-sybase.strace_out.txt: abbreviated output of test script using strace.


Many thanks for any help you can give.

Regards
Kevin Ruscoe
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dbd-sybase.perl.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627553/319437/dbd-sybase.perl.txt">Download dbd-sybase.perl.txt</a><br />
<span class="downloadcontenttype">text/plain 430b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/sbcimp/run/pd/perl/32-bit/5.8.8/bin/perl

use strict;
use warnings;
use lib qw&#40; /home/ruscoeke/workspaces/TPO/products/cpan-extra/install/cpan-extra-dbd-sybase-5.8.8-2009.07/RHEL5/cpan-extra-dbd-sybase-5.8.8-2009.07/lib &#41;;
use DBI;

my $dbh = DBI-&gt;connect&#40; &#39;dbi:Sybase:server=SM_GR_QA4_SQL;kerberos=SM_GR_QA4_SQL&#39;, &#39;&#39;, &#39;&#39; &#41;;
my $rows_ref = $dbh-&gt;selectall_arrayref&#40;&#39;SELECT @@version&#39;&#41;;

print &#34;$rows_ref-&gt;[0][0]\n&#34;;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dbd-sybase.ldd_out.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627553/319440/dbd-sybase.ldd_out.txt">Download dbd-sybase.ldd_out.txt</a><br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">$ env - \
/usr/bin/ldd
/home/ruscoeke/workspaces/TPO/products/cpan-extra/install/cpan-extra-dbd-sybase-5.8.8-2009.07/RHEL5/cpan-extra-dbd-sybase-5.8.8-2009.07/lib/auto/DBD/Sybase/Sybase.so
        linux-gate.so.1 =&gt;  &#40;0xffffe000&#41;
        libsybct.so =&gt;
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/lib/libsybct.so
&#40;0xf7ead000&#41;
        libsybcs.so =&gt;
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/lib/libsybcs.so
&#40;0xf7e9f000&#41;
        libsybtcl.so =&gt;
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/lib/libsybtcl.so
&#40;0xf7e82000&#41;
        libsybcomn.so =&gt;
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/lib/libsybcomn.so
&#40;0xf7e02000&#41;
        libsybintl.so =&gt;
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/lib/libsybintl.so
&#40;0xf7dfb000&#41;
        libsybblk.so =&gt;
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/lib/libsybblk.so
&#40;0xf7de6000&#41;
        libdl.so.2 =&gt; /lib/libdl.so.2 &#40;0xf7dc9000&#41;
        libm.so.6 =&gt; /lib/libm.so.6 &#40;0xf7da2000&#41;
        libc.so.6 =&gt; /lib/libc.so.6 &#40;0xf7c5d000&#41;
        libnsl.so.1 =&gt; /lib/libnsl.so.1 &#40;0xf7c46000&#41;
        libsybunic.so =&gt;
/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/OCS-15_0/lib/libsybunic.so
&#40;0xf7bd9000&#41;
        /lib/ld-linux.so.2 &#40;0x004b6000&#41;</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dbd-sybase.strace_out.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627553/319443/dbd-sybase.strace_out.txt">Download dbd-sybase.strace_out.txt</a><br />
<span class="downloadcontenttype">text/plain 806b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">$ env - \
PATH=/bin:/usr/bin:/usr/kerberos/bin \
SYBASE=/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM \
SYBASE_OCS=OCS-15_0 \
strace -f ./dbd-sybase.perl
[snip]
open&#40;&#34;/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM/locales/message/us_english/ctlib.loc&#34;, O_RDONLY&#41; = 5
read&#40;5, &#34;; \&#34;ctlib.loc\&#34; - Localization fil&#34;..., 512&#41; = 512
read&#40;5, &#34;eement specifying the Government&#34;..., 512&#41; = 512
read&#40;5, &#34;e to get origin message string\&#34;\n&#34;..., 512&#41; = 512
close&#40;5&#41;                                = 0
write&#40;2, &#34;ct_con_props&#40;CS_SEC_NETWORKAUTH&#41;&#34;..., 206ct_con_props&#40;CS_SEC_NETWORKAUTH&#41; failed at /home/ruscoeke/workspaces/TPO/products/cpan-extra/install/cpan-extra-dbd-sybase-5.8.8-2009.07/RHEL5/cpan-extra-dbd-sybase-5.8.8-2009.07/lib/DBD/Sybase.pm line 92.
&#41; = 206
[snip]

</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dbd-sybase.dbi_trace_out.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627553/319446/dbd-sybase.dbi_trace_out.txt">Download dbd-sybase.dbi_trace_out.txt</a><br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">$ env - \
PATH=/bin:/usr/bin:/usr/kerberos/bin \
SYBASE=/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBPRLM \
SYBASE_OCS=OCS-15_0 \
DBI_TRACE=2 \
./dbd-sybase.perl
    DBI 1.608-ithread default trace level set to 0x0/2 &#40;pid 25095&#41; at DBI.pm line 273 via dbd-sybase.perl line 6
    -&gt; DBI-&gt;connect&#40;dbi:Sybase:server=SM_GR_QA4_SQL;kerberos=SM_GR_QA4_SQL, , ****&#41;
    -&gt; DBI-&gt;install_driver&#40;Sybase&#41; for linux perl=5.008008 pid=25095 ruid=8620 euid=8620
       install_driver: DBD::Sybase version 1.09 loaded from /home/ruscoeke/workspaces/TPO/products/cpan-extra/install/cpan-extra-dbd-sybase-5.8.8-2009.07/RHEL5/cpan-extra-dbd-sybase-5.8.8-2009.07/lib/DBD/Sybase.pm
    &lt;- install_driver= DBI::dr=HASH&#40;0x84427c8&#41;
    !! warn: 0 CLEARED by call to connect method
    -&gt; connect for DBD::Sybase::dr &#40;DBI::dr=HASH&#40;0x84427c8&#41;~0x8442924 &#39;server=SM_GR_QA4_SQL;kerberos=SM_GR_QA4_SQL&#39; &#39;&#39; **** HASH&#40;0x8451264&#41;&#41; thr#838e008
ct_con_props&#40;CS_SEC_NETWORKAUTH&#41; failed at /home/ruscoeke/workspaces/TPO/products/cpan-extra/install/cpan-extra-dbd-sybase-5.8.8-2009.07/RHEL5/cpan-extra-dbd-sybase-5.8.8-2009.07/lib/DBD/Sybase.pm line 92.
         DESTROY for DBI::db=HASH&#40;0x8532390&#41; ignored - handle not initialised
    !! ERROR: 12 &#39;OpenClient message: LAYER = &#40;7&#41; ORIGIN = &#40;9&#41; SEVERITY = &#40;5&#41; NUMBER = &#40;12&#41;
Server SM_GR_QA4_SQL, database 
Message String: ct_con_props&#40;SET&#41;: security service layer: internal security control layer error: error string not available
&#39; &#40;err#0&#41;
    &lt;- connect= undef at DBI.pm line 640
    -&gt; $DBI::errstr &#40;&#38;&#41; FETCH from lasth=HASH
    &lt;- $DBI::errstr= &#39;OpenClient message: LAYER = &#40;7&#41; ORIGIN = &#40;9&#41; SEVERITY = &#40;5&#41; NUMBER = &#40;12&#41;
Server SM_GR_QA4_SQL, database 
Message String: ct_con_props&#40;SET&#41;: security service layer: internal security control layer error: error string not available
&#39;
       DBI connect&#40;&#39;server=SM_GR_QA4_SQL;kerberos=SM_GR_QA4_SQL&#39;,&#39;&#39;,...&#41; failed: OpenClient message: LAYER = &#40;7&#41; ORIGIN = &#40;9&#41; SEVERITY = &#40;5&#41; NUMBER = &#40;12&#41;
Server SM_GR_QA4_SQL, database 
Message String: ct_con_props&#40;SET&#41;: security service layer: internal security control layer error: error string not available

DBI connect&#40;&#39;server=SM_GR_QA4_SQL;kerberos=SM_GR_QA4_SQL&#39;,&#39;&#39;,...&#41; failed: OpenClient message: LAYER = &#40;7&#41; ORIGIN = &#40;9&#41; SEVERITY = &#40;5&#41; NUMBER = &#40;12&#41;
Server SM_GR_QA4_SQL, database 
Message String: ct_con_props&#40;SET&#41;: security service layer: internal security control layer error: error string not available
 at ./dbd-sybase.perl line 8
Can&#39;t call method &#34;selectall_arrayref&#34; on an undefined value at ./dbd-sybase.perl line 10.
    -- DBI::END &#40;$@: , $!: &#41;
    !! ERROR: 12 CLEARED by call to disconnect_all method
    -&gt; disconnect_all for DBD::Sybase::dr &#40;DBI::dr=HASH&#40;0x84427c8&#41;~0x8442924&#41; thr#838e008
    &lt;- disconnect_all= 1 at DBI.pm line 719
!   -&gt; DESTROY in DBD::_::common for DBD::Sybase::dr &#40;DBI::dr=HASH&#40;0x8442924&#41;~INNER&#41; thr#838e008
!   &lt;- DESTROY= undef during global destruction

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627827" href="/Public/Bug/Display.html?id=47527#txn-627827">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;14:20:46&nbsp;2009</span>
    <span class="description">mpeppler [...] peppler.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/627827/319592/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/319592">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 259b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">In Sybase.pm, try to set dl_load_flags&#40;&#41; to return 0x01:

    # Make sure that dl_open&#40;&#41; calls use the RTLD_GLOBAL flag if
    # it is available. This appears not to work under AIX 5.x
    sub dl_load_flags { if&#40;$^O eq &#39;aix&#39;&#41; { 0x00 } else { 0x01 }}

Michael
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627828" href="/Public/Bug/Display.html?id=47527#txn-627828">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;14:20:48&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627830" href="/Public/Bug/Display.html?id=47527#txn-627830">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;14:21:28&nbsp;2009</span>
    <span class="description">kevin.ruscoe [...] ubs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Out of Office AutoReply: [rt.cpan.org #47527] DBD::Sybase 1.09 unable to connect to ASE 15.0.2 via Kerberos </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 4 Jul 2009 04:20:59 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Sybase [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;Kevin.Ruscoe [...] ubs.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627830/319594/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/319594">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am out of the office on annual leave until Monday 13 July and may not be answering email.  In my absence, please contact:

* DL-ERD-INFRA for all questions related to Advisory IT infrastructure
* Paul Whitby for escalation of issues relating specifically to Advisory IT
* Marco Pasquini for general escalation and all matters relating to IBTS EQ
* Chris Buckley for all questions related to the Distributed and Database Working Group
* Mark Barnes for questions relating to AIR
Visit our website at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.ubs.com">http://www.ubs.com</a></span>

This message contains confidential information and is intended only
for the individual named.  If you are not the named addressee you
should not disseminate, distribute or copy this e-mail.  Please
notify the sender immediately by e-mail if you have received this
e-mail by mistake and delete this e-mail from your system.

E-mails are not encrypted and cannot be guaranteed to be secure or
error-free as information could be intercepted, corrupted, lost,
destroyed, arrive late or incomplete, or contain viruses.  The sender
therefore does not accept liability for any errors or omissions in the
contents of this message which arise as a result of e-mail transmission.
If verification is required please request a hard-copy version.  This
message is provided for informational purposes and should not be
construed as a solicitation or offer to buy or sell any securities
or related financial instruments.


UBS reserves the right to retain all messages. Messages are protected
and accessed only in legally justified cases.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-636953" href="/Public/Bug/Display.html?id=47527#txn-636953">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;23&nbsp;03:22:06&nbsp;2009</span>
    <span class="description">KRUSCOE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/636953/324759/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/324759">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 187b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michael

Sorry for the delay in replying &#40;vacation&#41;.  I am running this on
RHEL5.3, so surely dl_load_flags&#40;&#41; will return 0x01 anyway?

$ perl -e &#39;print &#34;$^O\n&#34;&#39;  
linux

Regards
Kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-668609" href="/Public/Bug/Display.html?id=47527#txn-668609">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;25&nbsp;00:54:04&nbsp;2009</span>
    <span class="description">kevin.ruscoe [...] ubs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #47527] DBD::Sybase 1.09 unable to connect to ASE 15.0.2 via Kerberos </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 25 Sep 2009 14:53:41 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Sybase [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;Kevin.Ruscoe [...] ubs.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/668609/343466/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/343466">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michael

I just had another look at this and had more luck:

I built DBD::Sybase 1.08 and DBD::Sybase 1.09 in exactly the same way.
Both worked fine when connecting without Kerberos.  However, when using
Kerberos, I got the following:
 
1.09
----
 
$ env - PATH=/bin:/usr/bin:/usr/kerberos/bin
KRB5_CONFIG=/home/dbtools_ldn/SybSoftware/krb5.conf/krb5.conf.uat
SYBASE=/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBURLM
SYBASE_OCS=OCS-15_0 ./dbd-sybase.perl
ct_con_props&#40;CS_SEC_NETWORKAUTH&#41; failed at
/home/ruscoeke/downloads/install/5.8.8-dbd-sybase-1.09/lib/DBD/Sybase.pm
line 92.
DBI connect&#40;&#39;server=SM_GR_QA3_SQL;kerberos=SM_GR_QA3_SQL&#39;,&#39;&#39;,...&#41;
failed: OpenClient message: LAYER = &#40;7&#41; ORIGIN = &#40;9&#41; SEVERITY = &#40;5&#41;
NUMBER = &#40;12&#41;
Server SM_GR_QA3_SQL, database 
Message String: ct_con_props&#40;SET&#41;: security service layer: internal
security control layer error: error string not available
 at ./dbd-sybase.perl line 8
Can&#39;t call method &#34;selectall_arrayref&#34; on an undefined value at
./dbd-sybase.perl line 9.


i.e. the same &#34;error string not available&#34; message I saw when I
originally tried this.


1.08
----
 
$ env - PATH=/bin:/usr/bin:/usr/kerberos/bin
KRB5_CONFIG=/home/dbtools_ldn/SybSoftware/krb5.conf/krb5.conf.uat
SYBASE=/sbcimp/run/tp/sybase/OpenClientServer/v15.0ebf14845-KRBURLM
SYBASE_OCS=OCS-15_0 ./dbd-sybase.perl
Adaptive Server Enterprise/15.0.2/EBF 15687 ESD#5/P/x86_64/Enterprise
Linux/ase1502/2528/64-bit/FBO/Tue Jun 17 14:24:43 2008

 
So, it seems that a relevant bug was introduced in 1.09.

Cheers
Kevin
Visit our website at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.ubs.com">http://www.ubs.com</a></span>

This message contains confidential information and is intended only
for the individual named.  If you are not the named addressee you
should not disseminate, distribute or copy this e-mail.  Please
notify the sender immediately by e-mail if you have received this
e-mail by mistake and delete this e-mail from your system.

E-mails are not encrypted and cannot be guaranteed to be secure or
error-free as information could be intercepted, corrupted, lost,
destroyed, arrive late or incomplete, or contain viruses.  The sender
therefore does not accept liability for any errors or omissions in the
contents of this message which arise as a result of e-mail transmission.
If verification is required please request a hard-copy version.  This
message is provided for informational purposes and should not be
construed as a solicitation or offer to buy or sell any securities
or related financial instruments.


UBS reserves the right to retain all messages. Messages are protected
and accessed only in legally justified cases.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-927741" href="/Public/Bug/Display.html?id=47527#txn-927741">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;25&nbsp;11:11:47&nbsp;2011</span>
    <span class="description">mpeppler [...] peppler.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/927741/481446/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/481446">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 189b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is horribly late - but 1.09 did change the dl_load_flags&#40;&#41; sub to
always return 0.
That&#39;s the only change that I can think of that could affect kerberos
library loading/functionality.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-927743" href="/Public/Bug/Display.html?id=47527#txn-927743">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;25&nbsp;11:12:04&nbsp;2011</span>
    <span class="description">mpeppler [...] peppler.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-927744" href="/Public/Bug/Display.html?id=47527#txn-927744">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;25&nbsp;11:12:06&nbsp;2011</span>
    <span class="description">kevin.ruscoe [...] ubs.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Out of Office AutoReply: [rt.cpan.org #47527] DBD::Sybase 1.09 unable to connect to ASE 15.0.2 via Kerberos </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 Apr 2011 01:11:53 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBD-Sybase [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;kevin.ruscoe [...] ubs.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/927744/481448/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/481448">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am out of the office on annual leave until 2 May.  In my absence, please contact:

* Neil Coleman - all matters relating to my BSDM roles for Advisory IT, Equity Finance and Delta One.
* DL-AIR-Support - AIR
* Adrian Drewett and Shinro Taniguchi - Distributed Working Group
* Marco Pasquini - all other matters relating to EQ ISL
* Dan Eastwood - general escalation
Visit our website at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.ubs.com">http://www.ubs.com</a></span>

This message contains confidential information and is intended only
for the individual named.  If you are not the named addressee you
should not disseminate, distribute or copy this e-mail.  Please
notify the sender immediately by e-mail if you have received this
e-mail by mistake and delete this e-mail from your system.

E-mails are not encrypted and cannot be guaranteed to be secure or
error-free as information could be intercepted, corrupted, lost,
destroyed, arrive late or incomplete, or contain viruses.  The sender
therefore does not accept liability for any errors or omissions in the
contents of this message which arise as a result of e-mail transmission.
If verification is required please request a hard-copy version.  This
message is provided for informational purposes and should not be
construed as a solicitation or offer to buy or sell any securities
or related financial instruments.


UBS reserves the right to retain all messages. Messages are protected
and accessed only in legally justified cases.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.611042</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
