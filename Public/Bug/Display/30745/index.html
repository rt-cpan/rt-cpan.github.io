<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #30745 for Net-Pcap: Test failures on Win32</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #30745 for Net-Pcap: Test failures on Win32</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-Pcap">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-Pcap">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-Pcap">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-Pcap">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Pcap">Net-Pcap CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">30745</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-Pcap">Net-Pcap</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
derhoermi [...] gmx.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22994-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22995-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.15    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




net-pcap-make-test.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/383449/175757/net-pcap-make-test.txt">
Wed Nov 14 20:41:02 2007 (9.3k) by derhoermi [...] gmx.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=30745">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-383449" href="/Public/Bug/Display.html?id=30745#txn-383449">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;14&nbsp;20:41:02&nbsp;2007</span>
    <span class="description">derhoermi [...] gmx.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failures on Win32</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 15 Nov 2007 02:39:40 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bjoern Hoehrmann &lt;derhoermi [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/383449/175756/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/175756">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 590b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

  I tried installing the latest Net::Pcap on Win2k3 with WinPcap 4.x and
ran into two problems. First, the distribution depends on IO::Interface
which does not seem to be available for Win32 &#40;it&#39;s only used for the
pcapinfo utility so I removed the dependency&#41; and after a successful
build it generates many test failures. I&#39;ve attached those.

regards,
-- 
BjÃ¶rn HÃ¶hrmann Â· mailto:bjoern@hoehrmann.de Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</a></span>
Weinh. Str. 22 Â· Telefon: +49&#40;0&#41;621/4309674 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bjoernsworld.de">http://www.bjoernsworld.de</a></span>
68309 Mannheim Â· PGP Pub. KeyID: 0xA4357E78 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.websitedev.de/">http://www.websitedev.de/</a></span> 
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/383449/175757/net-pcap-make-test.txt">Download net-pcap-make-test.txt</a><br />
<span class="downloadcontenttype">text/plain 9.3k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-383470" href="/Public/Bug/Display.html?id=30745#txn-383470">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;14&nbsp;22:52:02&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 15 Nov 2007 04:51:36 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/383470/175773/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/175773">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bjoern Hoehrmann wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   I tried installing the latest Net::Pcap on Win2k3 with WinPcap  
&gt; 4.x and
&gt; ran into two problems. First, the distribution depends on  
&gt; IO::Interface
&gt; which does not seem to be available for Win32 &#40;it&#39;s only used for the
&gt; pcapinfo utility so I removed the dependency&#41;
</div>
I didn&#39;t know IO::Interface wasn&#39;t available under Win32. I&#39;ll modify  
Makefile.PL to not install pcapinfo and remove IO::Interface from the  
prereqs.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; after a successful build it generates many test failures. I&#39;ve  
&gt; attached those.
&gt;
&gt; [...]
&gt; #   Failed test &#39; - &#39;\&#39; must be present in the list returned by  
&gt; findalldevs&#40;&#41;&#39;
&gt; #   in t/02-lookup.t at line 135.
&gt; #          got: undef
&gt; #     expected: &#39;1&#39;
</div>
This is probably because the interfaces are incorrectly listed for  
some reason. Could you give me the output of the following commands:

   perl -wTIblib/lib -Iblib/arch -It -MNet::Pcap -MUtils -le &#34;print  
join$/,find_network_device&#40;&#41;&#34;

   perl -MNet::Pcap=:functions -le &#34;print join$/,findalldevs&#40;\$err&#41;&#34;

   ipconfig /all

You can hide the IP addresses if you want, what interest me here is  
the list of interface names.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t/12-next...........dubious
&gt;         Test returned status 42 &#40;wstat 10752, 0x2a00&#41;
&gt; DIED. FAILED tests 5-16, 18-19, 21-32, 34-35, 37-48, 50-51
&gt;         Failed 42/52 tests, 19.23% okay
</div>
Hmm, in fact, this test script should be skipped. It&#39;s a mistake on  
my part that it is enabled in the CPAN release. This test script is  
probably trying to check some of the areas of Net::Pcap where  
problems may come from bugs in libpcap/WinPcap or from the XS  
interface. Usually, they can be ignored, especially if the rest of  
the test suite passes.


-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-383471" href="/Public/Bug/Display.html?id=30745#txn-383471">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;14&nbsp;22:52:03&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-383474" href="/Public/Bug/Display.html?id=30745#txn-383474">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;14&nbsp;23:49:59&nbsp;2007</span>
    <span class="description">derhoermi [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 15 Nov 2007 05:49:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bjoern Hoehrmann &lt;derhoermi [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/383474/175776/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/175776">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* SÃ©bastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;I didn&#39;t know IO::Interface wasn&#39;t available under Win32. I&#39;ll modify  
&gt;Makefile.PL to not install pcapinfo and remove IO::Interface from the  
&gt;prereqs.
</div>
That is at least my impression, the .xs includes several header files
like sys/socket.h, sys/types.h, and sys/ioctl.h which are not part of
the Microsoft Platform SDK; it might well build on Cygwin or MingW.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;This is probably because the interfaces are incorrectly listed for  
&gt;some reason. Could you give me the output of the following commands:
</div>
Â  % perl -wTIblib/lib -Iblib/arch -It -MNet::Pcap -MUtils -le &#34;print join$/,find_network_device&#40;&#41;&#34; 
Â  \Device\NPF_{C55C9B9E-E5C7-4E87-93C5-733328A284C4}
Â  \Device\NPF_{D91F18B8-42F5-4504-A60F-85ECA2A76275}
Â  
Â  % perl -MNet::Pcap=:functions -le &#34;print join$/,findalldevs&#40;\$err&#41;&#34; 
Â  \Device\NPF_GenericDialupAdapter
Â  \Device\NPF_{C55C9B9E-E5C7-4E87-93C5-733328A284C4}
Â  \Device\NPF_{D91F18B8-42F5-4504-A60F-85ECA2A76275}

The only adapter with TCP/IP bindings is a Microsoft Loopback one,
which is called &#34;Ethernet-Adapter LAN-Verbindung 2&#34; which is all
`ipconfig /all` would say &#40;this is a german version of Win2k3 btw&#41;
unless I misunderstood you.
-- 
BjÃ¶rn HÃ¶hrmann Â· mailto:bjoern@hoehrmann.de Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</a></span>
Weinh. Str. 22 Â· Telefon: +49&#40;0&#41;621/4309674 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bjoernsworld.de">http://www.bjoernsworld.de</a></span>
68309 Mannheim Â· PGP Pub. KeyID: 0xA4357E78 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.websitedev.de/">http://www.websitedev.de/</a></span> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385102" href="/Public/Bug/Display.html?id=30745#txn-385102">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;18&nbsp;20:16:25&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 19 Nov 2007 02:15:59 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385102/176712/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176712">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bjoern Hoehrmann wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; This is probably because the interfaces are incorrectly listed for
&gt;&gt; some reason. Could you give me the output of the following commands:
</div>&gt;
&gt;   % perl -wTIblib/lib -Iblib/arch -It -MNet::Pcap -MUtils -le  
&gt; &#34;print join$/,find_network_device&#40;&#41;&#34;
&gt;   \Device\NPF_{C55C9B9E-E5C7-4E87-93C5-733328A284C4}
&gt;   \Device\NPF_{D91F18B8-42F5-4504-A60F-85ECA2A76275}
&gt;
&gt;   % perl -MNet::Pcap=:functions -le &#34;print join$/,findalldevs&#40;\$err&#41;&#34;
&gt;   \Device\NPF_GenericDialupAdapter
&gt;   \Device\NPF_{C55C9B9E-E5C7-4E87-93C5-733328A284C4}
&gt;   \Device\NPF_{D91F18B8-42F5-4504-A60F-85ECA2A76275}
&gt;
&gt; The only adapter with TCP/IP bindings is a Microsoft Loopback one,
&gt; which is called &#34;Ethernet-Adapter LAN-Verbindung 2&#34; which is all
&gt; `ipconfig /all` would say &#40;this is a german version of Win2k3 btw&#41;
&gt; unless I misunderstood you.
</div>
Ok, it seems that findalldevs&#40;&#41; and find_network_device&#40;&#41; work as  
expected. So I guess this is lookupdev&#40;&#41; which may return an invalid  
name. Could you give me the output of the following command:

   perl -MNet::Pcap=:functions -le &#34;print lookupdev&#40;\$err&#41;,$/,qq/err= 
$err/&#34;


-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385126" href="/Public/Bug/Display.html?id=30745#txn-385126">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;18&nbsp;22:33:27&nbsp;2007</span>
    <span class="description">derhoermi [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 19 Nov 2007 04:32:58 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bjoern Hoehrmann &lt;derhoermi [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385126/176726/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176726">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 652b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* SÃ©bastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Ok, it seems that findalldevs&#40;&#41; and find_network_device&#40;&#41; work as  
&gt;expected. So I guess this is lookupdev&#40;&#41; which may return an invalid  
&gt;name. Could you give me the output of the following command:
&gt;
&gt;   perl -MNet::Pcap=:functions -le &#34;print lookupdev&#40;\$err&#41;,$/,qq/err= 
&gt;$err/&#34;
</div>
Â  % perl -MNet::Pcap=:functions -le &#34;print lookupdev&#40;\$err&#41;,$/,qq/err=$err/&#34;
Â  \
Â  err=
-- 
BjÃ¶rn HÃ¶hrmann Â· mailto:bjoern@hoehrmann.de Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</a></span>
Weinh. Str. 22 Â· Telefon: +49&#40;0&#41;621/4309674 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bjoernsworld.de">http://www.bjoernsworld.de</a></span>
68309 Mannheim Â· PGP Pub. KeyID: 0xA4357E78 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.websitedev.de/">http://www.websitedev.de/</a></span> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385385" href="/Public/Bug/Display.html?id=30745#txn-385385">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;02:32:47&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 08:32:14 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385385/176843/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176843">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bjoern Hoehrmann wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; SÃ©bastien Aperghis-Tramoni wrote:
<div class="message-stanza open">&gt;&gt; Ok, it seems that findalldevs&#40;&#41; and find_network_device&#40;&#41; work as
&gt;&gt; expected. So I guess this is lookupdev&#40;&#41; which may return an invalid
&gt;&gt; name. Could you give me the output of the following command:
&gt;&gt;
&gt;&gt;   perl -MNet::Pcap=:functions -le &#34;print lookupdev&#40;\$err&#41;,$/,qq/err=
&gt;&gt; $err/&#34;
</div>&gt;
&gt;   % perl -MNet::Pcap=:functions -le &#34;print lookupdev&#40;\$err&#41;,$/,qq/ 
&gt; err=$err/&#34;
&gt;   \
&gt;   err=
</div>
As expected. Now we must check whether the bug is in Net::Pcap or in  
libpcap. I think it&#39;s probably in the WinPcap specific part of the XS  
function pcap_lookupdev&#40;&#41;, but I&#39;d like to be sure. Could you compile  
the following C code, execute it and give me its output?

--- file: lookupdev.c ------
#include &lt;stdio.h&gt;
#include &lt;pcap.h&gt;

int main&#40;void&#41; {
     char  err[PCAP_ERRBUF_SIZE];
     char *dev;

     dev = pcap_lookupdev&#40;err&#41;;
     printf&#40;&#34;dev&#40;%s&#41;  err&#40;%s&#41;\n&#34;, dev, err&#41;;

     return 0;
}
----------------------------


-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385396" href="/Public/Bug/Display.html?id=30745#txn-385396">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;02:48:27&nbsp;2007</span>
    <span class="description">derhoermi [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 08:47:57 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bjoern Hoehrmann &lt;derhoermi [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385396/176853/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176853">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 943b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* SÃ©bastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;As expected. Now we must check whether the bug is in Net::Pcap or in  
&gt;libpcap. I think it&#39;s probably in the WinPcap specific part of the XS  
&gt;function pcap_lookupdev&#40;&#41;, but I&#39;d like to be sure. Could you compile  
&gt;the following C code, execute it and give me its output?
&gt;
&gt;--- file: lookupdev.c ------
&gt;#include &lt;stdio.h&gt;
&gt;#include &lt;pcap.h&gt;
&gt;
&gt;int main&#40;void&#41; {
&gt;     char  err[PCAP_ERRBUF_SIZE];
&gt;     char *dev;
&gt;
&gt;     dev = pcap_lookupdev&#40;err&#41;;
&gt;     printf&#40;&#34;dev&#40;%s&#41;  err&#40;%s&#41;\n&#34;, dev, err&#41;;
&gt;
&gt;     return 0;
&gt;}
&gt;----------------------------
</div>
If I also initialize the err, this prints

Â  % lookupdev
Â  dev&#40;\&#41;  err&#40;&#41;

Otherwise it would print random memory.
-- 
BjÃ¶rn HÃ¶hrmann Â· mailto:bjoern@hoehrmann.de Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</a></span>
Weinh. Str. 22 Â· Telefon: +49&#40;0&#41;621/4309674 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bjoernsworld.de">http://www.bjoernsworld.de</a></span>
68309 Mannheim Â· PGP Pub. KeyID: 0xA4357E78 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.websitedev.de/">http://www.websitedev.de/</a></span> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385405" href="/Public/Bug/Display.html?id=30745#txn-385405">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;03:35:03&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 09:34:41 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385405/176862/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176862">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 872b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bjoern Hoehrmann wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; SÃ©bastien Aperghis-Tramoni wrote:
<div class="message-stanza open">&gt;&gt; As expected. Now we must check whether the bug is in Net::Pcap or in
&gt;&gt; libpcap. I think it&#39;s probably in the WinPcap specific part of the XS
&gt;&gt; function pcap_lookupdev&#40;&#41;, but I&#39;d like to be sure. Could you compile
&gt;&gt; the following C code, execute it and give me its output?
</div>&gt;
&gt; If I also initialize the err, this prints
&gt;
&gt;   % lookupdev
&gt;   dev&#40;\&#41;  err&#40;&#41;
&gt;
&gt; Otherwise it would print random memory.
</div>
Ah right. But now I realise that the include should have been wpcap.h  
and not pcap.h. Did you change it or did the pcap.h include work?

Anyway, this should mean that the problem is in WinPcap and not in  
Net::Pcap. They don&#39;t seem to have a bug tracker so I guess you  
should subscribe to the mailing list and report the bug here.


-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385408" href="/Public/Bug/Display.html?id=30745#txn-385408">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;03:41:44&nbsp;2007</span>
    <span class="description">derhoermi [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 09:41:22 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bjoern Hoehrmann &lt;derhoermi [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385408/176865/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176865">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 715b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* SÃ©bastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Ah right. But now I realise that the include should have been wpcap.h  
&gt;and not pcap.h. Did you change it or did the pcap.h include work?
</div>
No, there is no wpcap.h, only pcap.h.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Anyway, this should mean that the problem is in WinPcap and not in  
&gt;Net::Pcap. They don&#39;t seem to have a bug tracker so I guess you  
&gt;should subscribe to the mailing list and report the bug here.
</div>
If you could tell me what you think the bug in WinPcap is?
-- 
BjÃ¶rn HÃ¶hrmann Â· mailto:bjoern@hoehrmann.de Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</a></span>
Weinh. Str. 22 Â· Telefon: +49&#40;0&#41;621/4309674 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bjoernsworld.de">http://www.bjoernsworld.de</a></span>
68309 Mannheim Â· PGP Pub. KeyID: 0xA4357E78 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.websitedev.de/">http://www.websitedev.de/</a></span> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385456" href="/Public/Bug/Display.html?id=30745#txn-385456">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;06:07:47&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 12:07:20 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385456/176883/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176883">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 832b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bjoern Hoehrmann wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; SÃ©bastien Aperghis-Tramoni via RT wrote:
<div class="message-stanza open">&gt; &gt; Ah right. But now I realise that the include should have been wpcap.h
&gt; &gt; and not pcap.h. Did you change it or did the pcap.h include work?
</div>&gt;
&gt; No, there is no wpcap.h, only pcap.h.
</div>
Oh right, pcap.h is still pcap.h in WinPcap. It&#39;s libpcap.so which is
renamed to wpcap.dll

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Anyway, this should mean that the problem is in WinPcap and not in
&gt; &gt; Net::Pcap. They don&#39;t seem to have a bug tracker so I guess you
&gt; &gt; should subscribe to the mailing list and report the bug here.
</div>&gt;
&gt; If you could tell me what you think the bug in WinPcap is?
</div>
Well, pcap_lookupdev&#40;&#41; returns &#34;\&#34; on your system, where it should return
one the devices given by pcap_findalldevs&#40;&#41;, the ones named \Device\NPF_*


-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385482" href="/Public/Bug/Display.html?id=30745#txn-385482">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;06:29:26&nbsp;2007</span>
    <span class="description">derhoermi [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 12:28:38 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bjoern Hoehrmann &lt;derhoermi [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385482/176889/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176889">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 795b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* SÃ©bastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Well, pcap_lookupdev&#40;&#41; returns &#34;\&#34; on your system, where it should return
&gt;one the devices given by pcap_findalldevs&#40;&#41;, the ones named \Device\NPF_*
</div>
Okay <span class="clickylink"><a target="new" rel="nofollow" href="http://www.winpcap.org/pipermail/winpcap-bugs/2006-May/000220.html">http://www.winpcap.org/pipermail/winpcap-bugs/2006-May/000220.html</a></span>
says the function returns a wide string with all adapters rather than a
normal string with only one device. I also take it this is not going to
be changed in WinPcap. Perhaps the function should then be unavailable
on Win32? A note in the Net::Pcap documentation about this problem would
be nice.
-- 
BjÃ¶rn HÃ¶hrmann Â· mailto:bjoern@hoehrmann.de Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</a></span>
Weinh. Str. 22 Â· Telefon: +49&#40;0&#41;621/4309674 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bjoernsworld.de">http://www.bjoernsworld.de</a></span>
68309 Mannheim Â· PGP Pub. KeyID: 0xA4357E78 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.websitedev.de/">http://www.websitedev.de/</a></span> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385551" href="/Public/Bug/Display.html?id=30745#txn-385551">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;08:51:38&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 14:51:12 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385551/176922/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176922">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bjoern Hoehrmann wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; SÃ©bastien Aperghis-Tramoni via RT wrote:
<div class="message-stanza open">&gt; &gt; Well, pcap_lookupdev&#40;&#41; returns &#34;\&#34; on your system, where it should return
&gt; &gt; one the devices given by pcap_findalldevs&#40;&#41;, the ones named \Device\NPF_*
</div>&gt;
&gt; Okay <span class="clickylink"><a target="new" rel="nofollow" href="http://www.winpcap.org/pipermail/winpcap-bugs/2006-May/000220.html">http://www.winpcap.org/pipermail/winpcap-bugs/2006-May/000220.html</a></span>
&gt; says the function returns a wide string with all adapters rather than a
&gt; normal string with only one device.
</div>
Ok, this is returning a UCS-2 multistring. Very evil.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I also take it this is not going to
&gt; be changed in WinPcap. Perhaps the function should then be unavailable
&gt; on Win32? A note in the Net::Pcap documentation about this problem would
&gt; be nice.
</div>
The strange thing is that there&#39;s already code in the XS to handle this:

char *
pcap_lookupdev&#40;err&#41;
[...]
#ifdef _WPCAP
  {
    int length = lstrlenW&#40;&#40;PWSTR&#41;RETVAL&#41; + 2;
    char *r = safemalloc&#40;length&#41;;  /* Conversion from Unicode to ANSI */
    WideCharToMultiByte&#40;CP_ACP, 0, &#40;PWSTR&#41;RETVAL, -1, r, length, NULL, NULL&#41;;
    lstrcpyA&#40;RETVAL, r&#41;;
    safefree&#40;r&#41;;
  }
#endif
[...]

This code is here since version 0.08, released in october 2005.

Maybe the problem is that _WPCAP is not defined.. Hmm.. looking at the
Makefile.PL, it seems the macro is defined as &#34;WPCAP&#34; here, and &#34;_WPCAP&#34;
in Pcap.xs. This is ungood. Could you give me a capture of your screen
when you compile the module &#40;perl Makefile.PL &#38;&#38; make&#41; in order to confirm?

-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-385564" href="/Public/Bug/Display.html?id=30745#txn-385564">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;20&nbsp;09:26:02&nbsp;2007</span>
    <span class="description">derhoermi [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Nov 2007 15:25:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bjoern Hoehrmann &lt;derhoermi [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/385564/176932/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/176932">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* SÃ©bastien Aperghis-Tramoni via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;The strange thing is that there&#39;s already code in the XS to handle this:
&gt;
&gt;char *
&gt;pcap_lookupdev&#40;err&#41;
&gt;[...]
&gt;#ifdef _WPCAP
&gt;  {
&gt;    int length = lstrlenW&#40;&#40;PWSTR&#41;RETVAL&#41; + 2;
&gt;    char *r = safemalloc&#40;length&#41;;  /* Conversion from Unicode to ANSI */
&gt;    WideCharToMultiByte&#40;CP_ACP, 0, &#40;PWSTR&#41;RETVAL, -1, r, length, NULL, NULL&#41;;
&gt;    lstrcpyA&#40;RETVAL, r&#41;;
&gt;    safefree&#40;r&#41;;
&gt;  }
&gt;#endif
&gt;[...]
&gt;
&gt;This code is here since version 0.08, released in october 2005.
&gt;
&gt;Maybe the problem is that _WPCAP is not defined.. Hmm.. looking at the
&gt;Makefile.PL, it seems the macro is defined as &#34;WPCAP&#34; here, and &#34;_WPCAP&#34;
&gt;in Pcap.xs. This is ungood. Could you give me a capture of your screen
&gt;when you compile the module &#40;perl Makefile.PL &#38;&#38; make&#41; in order to confirm?
</div>
I added -D_WPCAP to the CFLAGS in the Makefile.PL and it now passes all
the tests &#40;not the 12-next ones, and some still unexpectedly succeed&#41; so
that indeed seems to be the problem.
-- 
BjÃ¶rn HÃ¶hrmann Â· mailto:bjoern@hoehrmann.de Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://bjoern.hoehrmann.de">http://bjoern.hoehrmann.de</a></span>
Weinh. Str. 22 Â· Telefon: +49&#40;0&#41;621/4309674 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.bjoernsworld.de">http://www.bjoernsworld.de</a></span>
68309 Mannheim Â· PGP Pub. KeyID: 0xA4357E78 Â· <span class="clickylink"><a target="new" rel="nofollow" href="http://www.websitedev.de/">http://www.websitedev.de/</a></span> 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-386515" href="/Public/Bug/Display.html?id=30745#txn-386515">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;23&nbsp;03:03:57&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #30745] Test failures on Win32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 23 Nov 2007 09:03:22 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Pcap [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SÃ©bastien Aperghis-Tramoni &lt;saper [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/386515/177402/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/177402">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 347b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bjoern Hoehrmann wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I added -D_WPCAP to the CFLAGS in the Makefile.PL and it now passes  
&gt; all
&gt; the tests &#40;not the 12-next ones, and some still unexpectedly  
&gt; succeed&#41; so
&gt; that indeed seems to be the problem.
</div>
Ok, I&#39;ve committed a fix in SVN. Thanks for your testing.

-- 
SÃ©bastien Aperghis-Tramoni

Close the world, txEn eht nepO.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-401057" href="/Public/Bug/Display.html?id=30745#txn-401057">#</a>      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;22&nbsp;18:59:36&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-401059" href="/Public/Bug/Display.html?id=30745#txn-401059">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;22&nbsp;18:59:38&nbsp;2007</span>
    <span class="description">SAPER [...] cpan.org -  Fixed in 0.15 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.661277</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
