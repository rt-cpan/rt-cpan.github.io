<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #41076 for Net-DNS: inconsistent handling of qname with special chars &#40;wire presentation or not&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #41076 for Net-DNS: inconsistent handling of qname with special chars &#40;wire presentation or not&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-DNS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-DNS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-DNS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-DNS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">41076</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-DNS">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Steffen_Ullrich [...] genua.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.63    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




PGP.sig<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/535389/268616/PGP.sig">
Thu Nov 20 08:24:11 2008 (235b) by olaf [...] dacht.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=41076">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-535090" href="/Public/Bug/Display.html?id=41076#txn-535090">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;19&nbsp;16:54:58&nbsp;2008</span>
    <span class="description">Steffen_Ullrich [...] genua.de - Ticket #41071:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> inconsistent handling of qname with special chars &#40;wire
 presentation or not&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/535090/268421/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/268421">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 802b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">sometimes the wire presentation is used, sometimes the text
presentation, depending if the packet was created from data or not:

use Net::DNS;
use strict;
my $pkt1 = Net::DNS::Packet-&gt;new&#40; &#34;spa ce&#34;,&#34;A&#34;,&#34;IN&#34; &#41;;
my $pkt2 = Net::DNS::Packet-&gt;new&#40; \$pkt1-&gt;data &#41;;
warn &#34;pkt1.q.qname=&#39;&#34;.&#40;$pkt1-&gt;question&#41;[0]-&gt;qname.&#34;&#39;\n&#34;;
warn &#34;pkt2.q.qname=&#39;&#34;.&#40;$pkt2-&gt;question&#41;[0]-&gt;qname.&#34;&#39;\n&#34;;
----
gives:
pkt1.q.qname=&#39;spa ce&#39;
pkt2.q.qname=&#39;spa\032ce&#39;

This was found when using the SPF test suite which uses DNS names with
spaces to check implementation


BTW, I cannot find any documentation that not the raw data &#40;wire
presentation&#41; are given, about the kind of text presentation used 
and I find it strange that in the text presentation \032 means 
chr&#40;32&#41; and not chr&#40;oct&#40;32&#41;&#41; like one would expect from perl strings
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-535149" href="/Public/Bug/Display.html?id=41076#txn-535149">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;19&nbsp;18:15:53&nbsp;2008</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net::DNS::RR for type AAAA handles short records wrong &#40;like ffff::1&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/535149/268466/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/268466">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 782b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">  use strict;
  use Net::DNS;
  
  my $pkt1 = Net::DNS::Packet-&gt;new&#40;&#39;e3.example.com&#39;,&#39;AAAA&#39;,&#39;IN&#39;&#41;;
  $pkt1-&gt;push&#40; answer =&gt; Net::DNS::RR-&gt;new&#40;
      name =&gt; &#39;e3.example.com&#39;,
      type =&gt; &#39;AAAA&#39;,
      address =&gt; &#39;CAFE:BABE::1&#39;
  &#41;&#41;;
  my $pkt2 = Net::DNS::Packet-&gt;new&#40; \$pkt1-&gt;data &#41;;
  warn &#34;pkt1.answer=&#34;.&#40;$pkt1-&gt;answer&#41;[0]-&gt;string.&#34;\n&#34;;
  warn &#34;pkt2.answer=&#34;.&#40;$pkt2-&gt;answer&#41;[0]-&gt;string.&#34;\n&#34;;
  ----

gives:
pkt1.answer=e3.example.com.     0       IN      AAAA    CAFE:BABE::1
pkt2.answer=e3.example.com.     0       IN      AAAA   
cafe:babe:0:1:0:0:0:0


In Net::DNS::RR::new_from_hash the only special handling is done for OPT
records, so the address gets saved like given.
But Net::DNS::RR::AAAA::rr_data assumes, that the address is in the form
%x:%x:%x:%x:%x:%x:%x:%x. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-535389" href="/Public/Bug/Display.html?id=41076#txn-535389">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;20&nbsp;08:24:11&nbsp;2008</span>
    <span class="description">olaf [...] dacht.net - Ticket #41071:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41071] inconsistent handling of qname with special chars &#40;wire presentation or not&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Nov 2008 07:23:43 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Olaf Kolkman &lt;olaf [...] dacht.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/535389/268615/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/268615">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Nov 19, 2008, at 3:55 PM, Steffen Ullrich via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Nov 19 16:54:58 2008: Request 41071 was acted upon.
&gt; Transaction: Ticket created by SULLR
&gt;       Queue: Net-DNS
&gt;     Subject: inconsistent handling of qname with special chars &#40;wire
&gt; presentation or not&#41;
&gt;   Broken in: 0.63
&gt;    Severity: Normal
&gt;       Owner: Nobody
&gt;  Requestors: Steffen_Ullrich@genua.de
&gt;      Status: new
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41071">http://rt.cpan.org/Ticket/Display.html?id=41071</a></span> &gt;
&gt;
&gt;
&gt; sometimes the wire presentation is used, sometimes the text
&gt; presentation, depending if the packet was created from data or not:
&gt;
&gt; use Net::DNS;
&gt; use strict;
&gt; my $pkt1 = Net::DNS::Packet-&gt;new&#40; &#34;spa ce&#34;,&#34;A&#34;,&#34;IN&#34; &#41;;
&gt; my $pkt2 = Net::DNS::Packet-&gt;new&#40; \$pkt1-&gt;data &#41;;
&gt; warn &#34;pkt1.q.qname=&#39;&#34;.&#40;$pkt1-&gt;question&#41;[0]-&gt;qname.&#34;&#39;\n&#34;;
&gt; warn &#34;pkt2.q.qname=&#39;&#34;.&#40;$pkt2-&gt;question&#41;[0]-&gt;qname.&#34;&#39;\n&#34;;
&gt; ----
&gt; gives:
&gt; pkt1.q.qname=&#39;spa ce&#39;
&gt; pkt2.q.qname=&#39;spa\032ce&#39;
&gt;
&gt; This was found when using the SPF test suite which uses DNS names with
&gt; spaces to check implementation
&gt;
&gt;
&gt; BTW, I cannot find any documentation that not the raw data &#40;wire
&gt; presentation&#41; are given, about the kind of text presentation used
&gt; and I find it strange that in the text presentation \032 means
&gt; chr&#40;32&#41; and not chr&#40;oct&#40;32&#41;&#41; like one would expect from perl strings
</div>

FWIW: spa\032ce is the correct representation &#40;zonefile format&#41;  
specified in RFC1035 section 5.1:

\DDD where each D is a digit is the octet corresponding to the decimal  
number described by DDD. The resulting octet is assumed to be text and  
is not checked for special meaning.

In other words &#39;spa ce&#39; is the buggy variety of the two and one could  
argue that the code should just throw an error when seeing such domain  
name &#40;lets not go there yet :-&#41; &#41;.  I&#39;ll look into why these two  
representations are different, but I suspect this is because it is we  
do not do any processing on the domain name when it has not &#40;yet&#41; been  
transformed to wire format &#40;and back&#41;.

--Olaf
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/535389/268616/PGP.sig">Download PGP.sig</a><br />
<span class="downloadcontenttype">application/pgp-signature 235b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-535390" href="/Public/Bug/Display.html?id=41076#txn-535390">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;20&nbsp;08:24:14&nbsp;2008</span>
    <span class="description">The RT System itself - Ticket #41071:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-535437" href="/Public/Bug/Display.html?id=41076#txn-535437">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;20&nbsp;10:02:55&nbsp;2008</span>
    <span class="description">Steffen_Ullrich [...] genua.de - Ticket #41071:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41071] inconsistent handling of qname with special chars &#40;wire presentation or not&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Nov 2008 16:02:28 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Olaf M. Kolkman via RT&#34; &lt;bug-Net-DNS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steffen Ullrich &lt;Steffen_Ullrich [...] genua.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/535437/268648/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/268648">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 634b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Olaf,
Thanks for your fast reply.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In other words &#39;spa ce&#39; is the buggy variety of the two and one could  
&gt; argue that the code should just throw an error when seeing such domain  
&gt; name &#40;lets not go there yet :-&#41; &#41;.  I&#39;ll look into why these two  
</div>
The section you mention is about the representation of the data
in the master files. In my opinion it would be the right thing to
quote the qname in things like Net::DNS::RR::string, but not, if
one calls qname&#40;&#41; directly.
Anyway, as long as it is consistent and documented it shouldn&#39;t matter
and fortunatly these kind of strang qnames are not that common.

Regards,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-544440" href="/Public/Bug/Display.html?id=41076#txn-544440">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;08:48:02&nbsp;2008</span>
    <span class="description">OLAF [...] cpan.org - Ticket #41071:  Merged into ticket #41076</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-544441" href="/Public/Bug/Display.html?id=41076#txn-544441">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;08:48:02&nbsp;2008</span>
    <span class="description">OLAF [...] cpan.org -  Merged into ticket #41076</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-544442" href="/Public/Bug/Display.html?id=41076#txn-544442">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;08:48:02&nbsp;2008</span>
    <span class="description">OLAF [...] cpan.org -  Subject changed from &#39;Net::DNS::RR for type AAAA handles short records wrong &#40;like ffff::1&#41;&#39; to &#39;inconsistent handling of qname with special chars &#40;wire presentation or not&#41;&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-544443" href="/Public/Bug/Display.html?id=41076#txn-544443">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;08:48:03&nbsp;2008</span>
    <span class="description">OLAF [...] cpan.org -  Severity Important changed to Normal</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-544444" href="/Public/Bug/Display.html?id=41076#txn-544444">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;08:58:53&nbsp;2008</span>
    <span class="description">OLAF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/544444/273751/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/273751">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 312b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix rt.cpan.org # 41076 and # 41071

  Net::DNS::RR-&gt;new_from_hash function would not normalize the content
  of the data so that a method getting a string representation would
  get inconsistent results depending on whether a RR was created from
  a string of from a hash. 


On the trunk as of SVN revision 730
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-544445" href="/Public/Bug/Display.html?id=41076#txn-544445">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;08:58:53&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-544448" href="/Public/Bug/Display.html?id=41076#txn-544448">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;16&nbsp;08:58:54&nbsp;2008</span>
    <span class="description">OLAF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-556214" href="/Public/Bug/Display.html?id=41076#txn-556214">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;19&nbsp;15:03:21&nbsp;2009</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-556215" href="/Public/Bug/Display.html?id=41076#txn-556215">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;19&nbsp;15:10:48&nbsp;2009</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/556215/280553/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/280553">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 878b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Di. 16. Dez. 2008, 08:58:53, OLAF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fix rt.cpan.org # 41076 and # 41071
&gt; 
&gt;   Net::DNS::RR-&gt;new_from_hash function would not normalize the content
&gt;   of the data so that a method getting a string representation would
&gt;   get inconsistent results depending on whether a RR was created from
&gt;   a string of from a hash. 
&gt; 
&gt; 
</div>
Sorry, but 41071 is not fixed.
cafe:babe::1 will still be shown as cafe:babe:0:1:0:0:0:0 instead
of cafe:babe:0:0:0:0:0:1

The reason is probably, that you use Net::DNS::RR::AAAA::rr_data called 
from Net::DNS::RR::rdata called from Net::DNS::RR::data called from
Net::DNS::Packet::data called from Net::DNS::RR::_normalize_rdata to
normalize the data.
But Net::DNS::RR::AAAA::rr_data expects an already normalized address
because it splits on &#39;:&#39; only, thus cafe:babe::1 will be interpreted
as &#39;cafe&#39;,&#39;babe&#39;,0,1,0,0,0,0.

Regards,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-560163" href="/Public/Bug/Display.html?id=41076#txn-560163">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;26&nbsp;16:38:13&nbsp;2009</span>
    <span class="description">OLAF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.535381</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
