<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #127120 for Tcl-pTk: [macOS] Right-click contextual menu</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #127120 for Tcl-pTk: [macOS] Right-click contextual menu</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Tcl-pTk">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Tcl-pTk">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Tcl-pTk">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Tcl-pTk">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tcl-pTk">Tcl-pTk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">127120</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Tcl-pTk">Tcl-pTk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">CAC [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
welleozean [...] googlemail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-234402-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-234403-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.95    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=127120">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810052" href="/Public/Bug/Display.html?id=127120#txn-1810052">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;16&nbsp;07:27:51&nbsp;2018</span>
    <span class="description">welleozean [...] googlemail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [macOS] Right-clic contextual menu</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Sep 2018 13:27:25 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl-pTk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> welle Ozean &lt;welleozean [...] googlemail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810052/974145/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974145">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 782b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Perl 5.28
macOS: HighSierra
Tcl: shipped with macOS
Tcl::pTk-0.94

I found a strange behavior when right-clicking &#40;I am using the trackpad&#41; on
any Widget that has a linked contextual menu &#40;Text, Entry and so on&#41;: the
menu is shown but at the same it seems to perform a copy and paste
operation. Simply try one of the demo widgets &#40;widgetTclpTk-&gt;Basic editable
text&#41;, highlight a word, and right-click on it. The popup is shown and
after a while &#40;the time windows seems to vary &#40;?!?&#41;&#41; the highlighted term
is copied in the Text Widget. I have already read the following node with
what are - I guess - related problems:
<span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1215349">https://www.perlmonks.org/?node_id=1215349</a></span>
This  problem prevents the use of any right-click features and should be
addressed. Any workaround?

Best,
Welle
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810052/974146/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974146">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810059" href="/Public/Bug/Display.html?id=127120#txn-1810059">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;16&nbsp;09:01:52&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810059/974152/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974152">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><span style="font-family:arial,helvetica,sans-serif;">On Sun Sep 16 06:27:51 2018, welleozean@googlemail.com wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,<br>

&gt;<br>

&gt; Perl 5.28<br>

&gt; macOS: HighSierra<br>

&gt; Tcl: shipped with macOS<br>

&gt; Tcl::pTk-0.94<br>

&gt;<br>

&gt; I found a strange behavior when right-clicking (I am using the trackpad) on<br>

&gt; any Widget that has a linked contextual menu (Text, Entry and so on): the<br>

&gt; menu is shown but at the same it seems to perform a copy and paste<br>

&gt; operation. Simply try one of the demo widgets (widgetTclpTk-&gt;Basic editable<br>

&gt; text), highlight a word, and right-click on it. The popup is shown and<br>

&gt; after a while (the time windows seems to vary (?!?)) the highlighted term<br>

&gt; is copied in the Text Widget. I have already read the following node with<br>

&gt; what are - I guess - related problems:<br>

&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1215349">https://www.perlmonks.org/?node_id=1215349</a></span><br>

&gt; This problem prevents the use of any right-click features and should be<br>

&gt; addressed. Any workaround?<br>

&gt;<br>

&gt; Best,<br>

&gt; Welle<br>
</div><br>

That does sound related to the general issue of middle-click and right-click (buttons 2 and 3) being swapped on macOS aqua (<a href="https://rt.cpan.org/Ticket/Display.html?id=125050">RT #125050</a>, which I believe I had fixed in Tcl::pTk 0.93).<br>

<br>

But what you&#39;re observing sounds more like both the intended right-click behavior (popup menu) as well the middle-click behavior (Unix-style shortcut to paste the selected text) happening at the same time. So far I cannot reproduce the issue in 0.94 with Tk 8.6.8, but I will look carefully again to see if there&#39;s something like extra `bind()` to the text or entry widget or one that I wrote backwards.<br>

<br>

I doubt that it&#39;s your machine/trackpad that&#39;s sending a middle-click event, since there doesn&#39;t seem to be anything in System Preferences for doing that with a trackpad.<br>

<br>

I&#39;m curious what happens on your machine for an actual middle-click event (I would expect nothing to happen given your observation). If you don&#39;t happen to have a USB/bluetooth mouse with a middle button (clickable mouse wheel), would you be able to try using Karabiner-elements to emulate a button2 click from the keyboard?</span><br>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810060" href="/Public/Bug/Display.html?id=127120#txn-1810060">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;16&nbsp;09:01:53&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810069" href="/Public/Bug/Display.html?id=127120#txn-1810069">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;16&nbsp;09:30:35&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810069/974155/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974155">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><span style="font-family:arial,helvetica,sans-serif;">On Sun Sep 16 08:01:52 2018, CAC wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Sep 16 06:27:51 2018, welleozean@googlemail.com wrote:<br>
<div class="message-stanza open">&gt; &gt; Hello,<br>

&gt; &gt;<br>

&gt; &gt; Perl 5.28<br>

&gt; &gt; macOS: HighSierra<br>

&gt; &gt; Tcl: shipped with macOS<br>

&gt; &gt; Tcl::pTk-0.94<br>

&gt; &gt;<br>

&gt; &gt; I found a strange behavior when right-clicking (I am using the<br>

&gt; &gt; trackpad) on<br>

&gt; &gt; any Widget that has a linked contextual menu (Text, Entry and so on):<br>

&gt; &gt; the<br>

&gt; &gt; menu is shown but at the same it seems to perform a copy and paste<br>

&gt; &gt; operation. Simply try one of the demo widgets (widgetTclpTk-&gt;Basic<br>

&gt; &gt; editable<br>

&gt; &gt; text), highlight a word, and right-click on it. The popup is shown<br>

&gt; &gt; and<br>

&gt; &gt; after a while (the time windows seems to vary (?!?)) the highlighted<br>

&gt; &gt; term<br>

&gt; &gt; is copied in the Text Widget. I have already read the following node<br>

&gt; &gt; with<br>

&gt; &gt; what are - I guess - related problems:<br>

&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1215349">https://www.perlmonks.org/?node_id=1215349</a></span><br>

&gt; &gt; This problem prevents the use of any right-click features and should<br>

&gt; &gt; be<br>

&gt; &gt; addressed. Any workaround?<br>

&gt; &gt;<br>

&gt; &gt; Best,<br>

&gt; &gt; Welle<br>
</div>&gt;<br>

&gt; That does sound related to the general issue of middle-click and<br>

&gt; right-click<br>

&gt; (buttons 2 and 3) being swapped on macOS aqua (RT #125050, which I<br>

&gt; believe I<br>

&gt; had fixed in Tcl::pTk 0.93).<br>

&gt;<br>

&gt; But what you&#39;re observing sounds more like both the intended right-<br>

&gt; click<br>

&gt; behavior (popup menu) as well the middle-click behavior (Unix-style<br>

&gt; shortcut to<br>

&gt; paste the selected text) happening at the same time. So far I cannot<br>

&gt; reproduce<br>

&gt; the issue in 0.94 with Tk 8.6.8, but I will look carefully again to<br>

&gt; see if<br>

&gt; there&#39;s something like extra `bind()` to the text or entry widget or<br>

&gt; one that I<br>

&gt; wrote backwards.<br>

&gt;<br>

&gt; I doubt that it&#39;s your machine/trackpad that&#39;s sending a middle-click<br>

&gt; event,<br>

&gt; since there doesn&#39;t seem to be anything in System Preferences for<br>

&gt; doing that<br>

&gt; with a trackpad.<br>

&gt;<br>

&gt; I&#39;m curious what happens on your machine for an actual middle-click<br>

&gt; event (I<br>

&gt; would expect nothing to happen given your observation). If you don&#39;t<br>

&gt; happen to<br>

&gt; have a USB/bluetooth mouse with a middle button (clickable mouse<br>

&gt; wheel), would<br>

&gt; you be able to try using Karabiner-elements to emulate a button2 click<br>

&gt; from the<br>

&gt; keyboard?<br>
</div><br>

I suspect the old Tk version might be what&#39;s causing this. I didn&#39;t quickly find anything in Tcl::pTk&#39;s perl code responsible for the middle-click paste using a `<span style="font-family:courier new,courier,monospace;">bind()</span>`, so I thought that it it might be handled by Tcl/Tk. I compared the Tcl/Tk widget demos for 8.5.9 and 8.6.8; and on 8.6.8, the paste happens for middle click, but for 8.5.9 it happens for right click. So the behavior for this seems to have changed between Tk 8.5.9 and 8.6.8. (I have not confirmed this from Tcl::pTk&#39;s widget demo with Tk 8.5.9, nor found a relevant commit/issue in Tk codebase.)<br>

<br>

As for a workaround, I haven&#39;t yet found if I can override middle-click paste from Perl, i.e. for making sure it&#39;s using the right button even for older Tcl/Tk version.</span><br>

<br>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810072" href="/Public/Bug/Display.html?id=127120#txn-1810072">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;16&nbsp;09:52:20&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810072/974158/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974158">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza">On Sun Sep 16 08:30:35 2018, CAC wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Sep 16 08:01:52 2018, CAC wrote:<br>
<div class="message-stanza open">&gt; &gt; On Sun Sep 16 06:27:51 2018, welleozean@googlemail.com wrote:<br>
<div class="message-stanza open">&gt; &gt; &gt; Hello,<br>

&gt; &gt; &gt;<br>

&gt; &gt; &gt; Perl 5.28<br>

&gt; &gt; &gt; macOS: HighSierra<br>

&gt; &gt; &gt; Tcl: shipped with macOS<br>

&gt; &gt; &gt; Tcl::pTk-0.94<br>

&gt; &gt; &gt;<br>

&gt; &gt; &gt; I found a strange behavior when right-clicking (I am using the<br>

&gt; &gt; &gt; trackpad) on<br>

&gt; &gt; &gt; any Widget that has a linked contextual menu (Text, Entry and so<br>

&gt; &gt; &gt; on):<br>

&gt; &gt; &gt; the<br>

&gt; &gt; &gt; menu is shown but at the same it seems to perform a copy and paste<br>

&gt; &gt; &gt; operation. Simply try one of the demo widgets (widgetTclpTk-&gt;Basic<br>

&gt; &gt; &gt; editable<br>

&gt; &gt; &gt; text), highlight a word, and right-click on it. The popup is shown<br>

&gt; &gt; &gt; and<br>

&gt; &gt; &gt; after a while (the time windows seems to vary (?!?)) the<br>

&gt; &gt; &gt; highlighted<br>

&gt; &gt; &gt; term<br>

&gt; &gt; &gt; is copied in the Text Widget. I have already read the following<br>

&gt; &gt; &gt; node<br>

&gt; &gt; &gt; with<br>

&gt; &gt; &gt; what are - I guess - related problems:<br>

&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1215349">https://www.perlmonks.org/?node_id=1215349</a></span><br>

&gt; &gt; &gt; This problem prevents the use of any right-click features and<br>

&gt; &gt; &gt; should<br>

&gt; &gt; &gt; be<br>

&gt; &gt; &gt; addressed. Any workaround?<br>

&gt; &gt; &gt;<br>

&gt; &gt; &gt; Best,<br>

&gt; &gt; &gt; Welle<br>
</div>&gt; &gt;<br>

&gt; &gt; That does sound related to the general issue of middle-click and<br>

&gt; &gt; right-click<br>

&gt; &gt; (buttons 2 and 3) being swapped on macOS aqua (RT #125050, which I<br>

&gt; &gt; believe I<br>

&gt; &gt; had fixed in Tcl::pTk 0.93).<br>

&gt; &gt;<br>

&gt; &gt; But what you&#39;re observing sounds more like both the intended right-<br>

&gt; &gt; click<br>

&gt; &gt; behavior (popup menu) as well the middle-click behavior (Unix-style<br>

&gt; &gt; shortcut to<br>

&gt; &gt; paste the selected text) happening at the same time. So far I cannot<br>

&gt; &gt; reproduce<br>

&gt; &gt; the issue in 0.94 with Tk 8.6.8, but I will look carefully again to<br>

&gt; &gt; see if<br>

&gt; &gt; there&#39;s something like extra `bind()` to the text or entry widget or<br>

&gt; &gt; one that I<br>

&gt; &gt; wrote backwards.<br>

&gt; &gt;<br>

&gt; &gt; I doubt that it&#39;s your machine/trackpad that&#39;s sending a middle-click<br>

&gt; &gt; event,<br>

&gt; &gt; since there doesn&#39;t seem to be anything in System Preferences for<br>

&gt; &gt; doing that<br>

&gt; &gt; with a trackpad.<br>

&gt; &gt;<br>

&gt; &gt; I&#39;m curious what happens on your machine for an actual middle-click<br>

&gt; &gt; event (I<br>

&gt; &gt; would expect nothing to happen given your observation). If you don&#39;t<br>

&gt; &gt; happen to<br>

&gt; &gt; have a USB/bluetooth mouse with a middle button (clickable mouse<br>

&gt; &gt; wheel), would<br>

&gt; &gt; you be able to try using Karabiner-elements to emulate a button2<br>

&gt; &gt; click<br>

&gt; &gt; from the<br>

&gt; &gt; keyboard?<br>
</div>&gt;<br>

&gt; I suspect the old Tk version might be what&#39;s causing this. I didn&#39;t<br>

&gt; quickly<br>

&gt; find anything in Tcl::pTk&#39;s perl code responsible for the middle-click<br>

&gt; paste<br>

&gt; using a `bind()`, so I thought that it it might be handled by Tcl/Tk.<br>

&gt; I<br>

&gt; compared the Tcl/Tk widget demos for 8.5.9 and 8.6.8; and on 8.6.8,<br>

&gt; the paste<br>

&gt; happens for middle click, but for 8.5.9 it happens for right click. So<br>

&gt; the<br>

&gt; behavior for this seems to have changed between Tk 8.5.9 and 8.6.8. (I<br>

&gt; have not<br>

&gt; confirmed this from Tcl::pTk&#39;s widget demo with Tk 8.5.9, nor found a<br>

&gt; relevant<br>

&gt; commit/issue in Tk codebase.)<br>

&gt;<br>

&gt; As for a workaround, I haven&#39;t yet found if I can override middle-<br>

&gt; click paste<br>

&gt; from Perl, i.e. for making sure it&#39;s using the right button even for<br>

&gt; older<br>

&gt; Tcl/Tk version.<br>
</div><br>

<span style="font-family:arial,helvetica,sans-serif;">I believe <a href="https://github.com/tcltk/tk/commit/eada16ad691fc8f8a5a769f2aa9801a45b822501#diff-ef79b82e17269a719f9322781c335c7dR462">this is the relevant commit in Tk</a>, where <span style="font-family:courier new,courier,monospace;">&lt;&lt;PasteSelection&gt;&gt;</span> becomes mapped to by <span style="font-family:courier new,courier,monospace;">&lt;ButtonRelease-3&gt;</span> instead of <span style="font-family:courier new,courier,monospace;">&lt;ButtonRelease-2&gt;</span> for aqua. The <a href="https://core.tcl.tk/tk/tktview/3016181">issue for the commit</a> did not specify anything about the middle-click paste event. This change was released as part of Tk 8.5.16 and 8.6.1.</span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810076" href="/Public/Bug/Display.html?id=127120#txn-1810076">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;16&nbsp;12:47:03&nbsp;2018</span>
    <span class="description">welleozean [...] googlemail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127120] [macOS] Right-clic contextual menu</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 16 Sep 2018 18:46:38 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl-pTk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> welle Ozean &lt;welleozean [...] googlemail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810076/974162/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974162">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I confirm that with a middle-click event nothing happens &#40;USB-Mouse&#41;. I
tried the demo widget with the latest ActiveTcl 8.6.7 and the problem does
not show up. I will give it a try and see if I can map the keys to fit the
older Tk, even if for the moment I haven&#39;t found any solution.

Am So., 16. Sep. 2018 um 15:52 Uhr schrieb Christopher Alexander Chavez via
RT &lt;bug-Tcl-pTk@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127120">https://rt.cpan.org/Ticket/Display.html?id=127120</a></span> &gt;
&gt;
&gt; On Sun Sep 16 08:30:35 2018, CAC wrote:
<div class="message-stanza open">&gt; &gt; On Sun Sep 16 08:01:52 2018, CAC wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Sun Sep 16 06:27:51 2018, welleozean@googlemail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Hello,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Perl 5.28
&gt; &gt; &gt; &gt; macOS: HighSierra
&gt; &gt; &gt; &gt; Tcl: shipped with macOS
&gt; &gt; &gt; &gt; Tcl::pTk-0.94
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I found a strange behavior when right-clicking &#40;I am using the
&gt; &gt; &gt; &gt; trackpad&#41; on
&gt; &gt; &gt; &gt; any Widget that has a linked contextual menu &#40;Text, Entry and so
&gt; &gt; &gt; &gt; on&#41;:
&gt; &gt; &gt; &gt; the
&gt; &gt; &gt; &gt; menu is shown but at the same it seems to perform a copy and paste
&gt; &gt; &gt; &gt; operation. Simply try one of the demo widgets &#40;widgetTclpTk-&gt;Basic
&gt; &gt; &gt; &gt; editable
&gt; &gt; &gt; &gt; text&#41;, highlight a word, and right-click on it. The popup is shown
&gt; &gt; &gt; &gt; and
&gt; &gt; &gt; &gt; after a while &#40;the time windows seems to vary &#40;?!?&#41;&#41; the
&gt; &gt; &gt; &gt; highlighted
&gt; &gt; &gt; &gt; term
&gt; &gt; &gt; &gt; is copied in the Text Widget. I have already read the following
&gt; &gt; &gt; &gt; node
&gt; &gt; &gt; &gt; with
&gt; &gt; &gt; &gt; what are - I guess - related problems:
&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1215349">https://www.perlmonks.org/?node_id=1215349</a></span>
&gt; &gt; &gt; &gt; This problem prevents the use of any right-click features and
&gt; &gt; &gt; &gt; should
&gt; &gt; &gt; &gt; be
&gt; &gt; &gt; &gt; addressed. Any workaround?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Best,
&gt; &gt; &gt; &gt; Welle
</div>&gt; &gt; &gt;
&gt; &gt; &gt; That does sound related to the general issue of middle-click and
&gt; &gt; &gt; right-click
&gt; &gt; &gt; &#40;buttons 2 and 3&#41; being swapped on macOS aqua &#40;RT #125050, which I
&gt; &gt; &gt; believe I
&gt; &gt; &gt; had fixed in Tcl::pTk 0.93&#41;.
&gt; &gt; &gt;
&gt; &gt; &gt; But what you&#39;re observing sounds more like both the intended right-
&gt; &gt; &gt; click
&gt; &gt; &gt; behavior &#40;popup menu&#41; as well the middle-click behavior &#40;Unix-style
&gt; &gt; &gt; shortcut to
&gt; &gt; &gt; paste the selected text&#41; happening at the same time. So far I cannot
&gt; &gt; &gt; reproduce
&gt; &gt; &gt; the issue in 0.94 with Tk 8.6.8, but I will look carefully again to
&gt; &gt; &gt; see if
&gt; &gt; &gt; there&#39;s something like extra `bind&#40;&#41;` to the text or entry widget or
&gt; &gt; &gt; one that I
&gt; &gt; &gt; wrote backwards.
&gt; &gt; &gt;
&gt; &gt; &gt; I doubt that it&#39;s your machine/trackpad that&#39;s sending a middle-click
&gt; &gt; &gt; event,
&gt; &gt; &gt; since there doesn&#39;t seem to be anything in System Preferences for
&gt; &gt; &gt; doing that
&gt; &gt; &gt; with a trackpad.
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;m curious what happens on your machine for an actual middle-click
&gt; &gt; &gt; event &#40;I
&gt; &gt; &gt; would expect nothing to happen given your observation&#41;. If you don&#39;t
&gt; &gt; &gt; happen to
&gt; &gt; &gt; have a USB/bluetooth mouse with a middle button &#40;clickable mouse
&gt; &gt; &gt; wheel&#41;, would
&gt; &gt; &gt; you be able to try using Karabiner-elements to emulate a button2
&gt; &gt; &gt; click
&gt; &gt; &gt; from the
&gt; &gt; &gt; keyboard?
</div>&gt; &gt;
&gt; &gt; I suspect the old Tk version might be what&#39;s causing this. I didn&#39;t
&gt; &gt; quickly
&gt; &gt; find anything in Tcl::pTk&#39;s perl code responsible for the middle-click
&gt; &gt; paste
&gt; &gt; using a `bind&#40;&#41;`, so I thought that it it might be handled by Tcl/Tk.
&gt; &gt; I
&gt; &gt; compared the Tcl/Tk widget demos for 8.5.9 and 8.6.8; and on 8.6.8,
&gt; &gt; the paste
&gt; &gt; happens for middle click, but for 8.5.9 it happens for right click. So
&gt; &gt; the
&gt; &gt; behavior for this seems to have changed between Tk 8.5.9 and 8.6.8. &#40;I
&gt; &gt; have not
&gt; &gt; confirmed this from Tcl::pTk&#39;s widget demo with Tk 8.5.9, nor found a
&gt; &gt; relevant
&gt; &gt; commit/issue in Tk codebase.&#41;
&gt; &gt;
&gt; &gt; As for a workaround, I haven&#39;t yet found if I can override middle-
&gt; &gt; click paste
&gt; &gt; from Perl, i.e. for making sure it&#39;s using the right button even for
&gt; &gt; older
&gt; &gt; Tcl/Tk version.
</div>&gt;
&gt; I believe this is the relevant commit in Tk, where &lt;&lt;PasteSelection&gt;&gt;
&gt; becomes
&gt; mapped to by &lt;ButtonRelease-3&gt; instead of &lt;ButtonRelease-2&gt; for aqua. The
&gt; issue
&gt; for the commit did not specify anything about the middle-click paste event.
&gt; This change was released as part of Tk 8.5.16 and 8.6.1.
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810076/974163/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974163">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.3k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810106" href="/Public/Bug/Display.html?id=127120#txn-1810106">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;01:17:52&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810106/974177/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974177">with headers</a>
<br />
<span class="downloadcontenttype">text/html 8.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza">On Sun Sep 16 11:47:03 2018, welleozean@googlemail.com wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I confirm that with a middle-click event nothing happens (USB-Mouse).<br>

&gt; I<br>

&gt; tried the demo widget with the latest ActiveTcl 8.6.7 and the problem<br>

&gt; does<br>

&gt; not show up. I will give it a try and see if I can map the keys to fit<br>

&gt; the<br>

&gt; older Tk, even if for the moment I haven&#39;t found any solution.<br>

&gt;<br>

&gt; Am So., 16. Sep. 2018 um 15:52 Uhr schrieb Christopher Alexander<br>

&gt; Chavez via<br>

&gt; RT &lt;bug-Tcl-pTk@rt.cpan.org&gt;:<br>

&gt;<br>
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127120">https://rt.cpan.org/Ticket/Display.html?id=127120</a></span> &gt;<br>

&gt; &gt;<br>

&gt; &gt; On Sun Sep 16 08:30:35 2018, CAC wrote:<br>
<div class="message-stanza open">&gt; &gt; &gt; On Sun Sep 16 08:01:52 2018, CAC wrote:<br>
<div class="message-stanza open">&gt; &gt; &gt; &gt; On Sun Sep 16 06:27:51 2018, welleozean@googlemail.com wrote:<br>
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Hello,<br>

&gt; &gt; &gt; &gt; &gt;<br>

&gt; &gt; &gt; &gt; &gt; Perl 5.28<br>

&gt; &gt; &gt; &gt; &gt; macOS: HighSierra<br>

&gt; &gt; &gt; &gt; &gt; Tcl: shipped with macOS<br>

&gt; &gt; &gt; &gt; &gt; Tcl::pTk-0.94<br>

&gt; &gt; &gt; &gt; &gt;<br>

&gt; &gt; &gt; &gt; &gt; I found a strange behavior when right-clicking (I am using the<br>

&gt; &gt; &gt; &gt; &gt; trackpad) on<br>

&gt; &gt; &gt; &gt; &gt; any Widget that has a linked contextual menu (Text, Entry and<br>

&gt; &gt; &gt; &gt; &gt; so<br>

&gt; &gt; &gt; &gt; &gt; on):<br>

&gt; &gt; &gt; &gt; &gt; the<br>

&gt; &gt; &gt; &gt; &gt; menu is shown but at the same it seems to perform a copy and<br>

&gt; &gt; &gt; &gt; &gt; paste<br>

&gt; &gt; &gt; &gt; &gt; operation. Simply try one of the demo widgets (widgetTclpTk-<br>
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt;Basic<br>
</div>&gt; &gt; &gt; &gt; &gt; editable<br>

&gt; &gt; &gt; &gt; &gt; text), highlight a word, and right-click on it. The popup is<br>

&gt; &gt; &gt; &gt; &gt; shown<br>

&gt; &gt; &gt; &gt; &gt; and<br>

&gt; &gt; &gt; &gt; &gt; after a while (the time windows seems to vary (?!?)) the<br>

&gt; &gt; &gt; &gt; &gt; highlighted<br>

&gt; &gt; &gt; &gt; &gt; term<br>

&gt; &gt; &gt; &gt; &gt; is copied in the Text Widget. I have already read the following<br>

&gt; &gt; &gt; &gt; &gt; node<br>

&gt; &gt; &gt; &gt; &gt; with<br>

&gt; &gt; &gt; &gt; &gt; what are - I guess - related problems:<br>

&gt; &gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1215349">https://www.perlmonks.org/?node_id=1215349</a></span><br>

&gt; &gt; &gt; &gt; &gt; This problem prevents the use of any right-click features and<br>

&gt; &gt; &gt; &gt; &gt; should<br>

&gt; &gt; &gt; &gt; &gt; be<br>

&gt; &gt; &gt; &gt; &gt; addressed. Any workaround?<br>

&gt; &gt; &gt; &gt; &gt;<br>

&gt; &gt; &gt; &gt; &gt; Best,<br>

&gt; &gt; &gt; &gt; &gt; Welle<br>
</div>&gt; &gt; &gt; &gt;<br>

&gt; &gt; &gt; &gt; That does sound related to the general issue of middle-click and<br>

&gt; &gt; &gt; &gt; right-click<br>

&gt; &gt; &gt; &gt; (buttons 2 and 3) being swapped on macOS aqua (RT #125050, which<br>

&gt; &gt; &gt; &gt; I<br>

&gt; &gt; &gt; &gt; believe I<br>

&gt; &gt; &gt; &gt; had fixed in Tcl::pTk 0.93).<br>

&gt; &gt; &gt; &gt;<br>

&gt; &gt; &gt; &gt; But what you&#39;re observing sounds more like both the intended<br>

&gt; &gt; &gt; &gt; right-<br>

&gt; &gt; &gt; &gt; click<br>

&gt; &gt; &gt; &gt; behavior (popup menu) as well the middle-click behavior (Unix-<br>

&gt; &gt; &gt; &gt; style<br>

&gt; &gt; &gt; &gt; shortcut to<br>

&gt; &gt; &gt; &gt; paste the selected text) happening at the same time. So far I<br>

&gt; &gt; &gt; &gt; cannot<br>

&gt; &gt; &gt; &gt; reproduce<br>

&gt; &gt; &gt; &gt; the issue in 0.94 with Tk 8.6.8, but I will look carefully again<br>

&gt; &gt; &gt; &gt; to<br>

&gt; &gt; &gt; &gt; see if<br>

&gt; &gt; &gt; &gt; there&#39;s something like extra `bind()` to the text or entry widget<br>

&gt; &gt; &gt; &gt; or<br>

&gt; &gt; &gt; &gt; one that I<br>

&gt; &gt; &gt; &gt; wrote backwards.<br>

&gt; &gt; &gt; &gt;<br>

&gt; &gt; &gt; &gt; I doubt that it&#39;s your machine/trackpad that&#39;s sending a middle-<br>

&gt; &gt; &gt; &gt; click<br>

&gt; &gt; &gt; &gt; event,<br>

&gt; &gt; &gt; &gt; since there doesn&#39;t seem to be anything in System Preferences for<br>

&gt; &gt; &gt; &gt; doing that<br>

&gt; &gt; &gt; &gt; with a trackpad.<br>

&gt; &gt; &gt; &gt;<br>

&gt; &gt; &gt; &gt; I&#39;m curious what happens on your machine for an actual middle-<br>

&gt; &gt; &gt; &gt; click<br>

&gt; &gt; &gt; &gt; event (I<br>

&gt; &gt; &gt; &gt; would expect nothing to happen given your observation). If you<br>

&gt; &gt; &gt; &gt; don&#39;t<br>

&gt; &gt; &gt; &gt; happen to<br>

&gt; &gt; &gt; &gt; have a USB/bluetooth mouse with a middle button (clickable mouse<br>

&gt; &gt; &gt; &gt; wheel), would<br>

&gt; &gt; &gt; &gt; you be able to try using Karabiner-elements to emulate a button2<br>

&gt; &gt; &gt; &gt; click<br>

&gt; &gt; &gt; &gt; from the<br>

&gt; &gt; &gt; &gt; keyboard?<br>
</div>&gt; &gt; &gt;<br>

&gt; &gt; &gt; I suspect the old Tk version might be what&#39;s causing this. I didn&#39;t<br>

&gt; &gt; &gt; quickly<br>

&gt; &gt; &gt; find anything in Tcl::pTk&#39;s perl code responsible for the middle-<br>

&gt; &gt; &gt; click<br>

&gt; &gt; &gt; paste<br>

&gt; &gt; &gt; using a `bind()`, so I thought that it it might be handled by<br>

&gt; &gt; &gt; Tcl/Tk.<br>

&gt; &gt; &gt; I<br>

&gt; &gt; &gt; compared the Tcl/Tk widget demos for 8.5.9 and 8.6.8; and on 8.6.8,<br>

&gt; &gt; &gt; the paste<br>

&gt; &gt; &gt; happens for middle click, but for 8.5.9 it happens for right click.<br>

&gt; &gt; &gt; So<br>

&gt; &gt; &gt; the<br>

&gt; &gt; &gt; behavior for this seems to have changed between Tk 8.5.9 and 8.6.8.<br>

&gt; &gt; &gt; (I<br>

&gt; &gt; &gt; have not<br>

&gt; &gt; &gt; confirmed this from Tcl::pTk&#39;s widget demo with Tk 8.5.9, nor found<br>

&gt; &gt; &gt; a<br>

&gt; &gt; &gt; relevant<br>

&gt; &gt; &gt; commit/issue in Tk codebase.)<br>

&gt; &gt; &gt;<br>

&gt; &gt; &gt; As for a workaround, I haven&#39;t yet found if I can override middle-<br>

&gt; &gt; &gt; click paste<br>

&gt; &gt; &gt; from Perl, i.e. for making sure it&#39;s using the right button even<br>

&gt; &gt; &gt; for<br>

&gt; &gt; &gt; older<br>

&gt; &gt; &gt; Tcl/Tk version.<br>
</div>&gt; &gt;<br>

&gt; &gt; I believe this is the relevant commit in Tk, where &lt;&lt;PasteSelection&gt;&gt;<br>

&gt; &gt; becomes<br>

&gt; &gt; mapped to by &lt;ButtonRelease-3&gt; instead of &lt;ButtonRelease-2&gt; for aqua.<br>

&gt; &gt; The<br>

&gt; &gt; issue<br>

&gt; &gt; for the commit did not specify anything about the middle-click paste<br>

&gt; &gt; event.<br>

&gt; &gt; This change was released as part of Tk 8.5.16 and 8.6.1.<br>

&gt; &gt;<br>

&gt; &gt;<br>
</div></div><br>

<span style="font-family:arial,helvetica,sans-serif;">Looking at the Tk source code (tk.tcl), it turns out that the relevant statement `<span style="font-family:courier new,courier,monospace;">event add &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-2&gt;</span>` is easily undone by `<span style="font-family:courier new,courier,monospace;">event delete &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-2&gt;</span>`. Then using `<span style="font-family:courier new,courier,monospace;">event add &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-3&gt;</span>` effectively fixes the behavior in Tk at runtime. Here&#39;s the workaround I&#39;m thinking of putting in Tcl::pTk (I&#39;m not yet sure exactly where it would belong):<br>

<br>

<span style="font-family:courier new,courier,monospace;"># RT #127120: Middle-click paste workaround<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">#&nbsp;for older Tcl/Tk versions on macOS aqua<br>
</div>if ($MW-&gt;windowingsystem eq &#39;aqua&#39;){<br>

&nbsp; &nbsp; # Check for affected versions of Tk<br>

&nbsp; &nbsp; if (<br>

&nbsp; &nbsp; &nbsp; &nbsp; ($MW-&gt;tclVersion eq &#39;8.4&#39;)<br>

&nbsp; &nbsp; &nbsp; &nbsp; or (($MW-&gt;tclVersion eq &#39;8.5&#39;) and ($MW-&gt;tclPatchlevel lt &#39;8.5.16&#39;))<br>

&nbsp; &nbsp; &nbsp; &nbsp; or (($MW-&gt;tclVersion eq &#39;8.6&#39;) and ($MW-&gt;tclPatchlevel lt &#39;8.6.1&#39;))<br>

&nbsp; &nbsp; ) {<br>

&nbsp; &nbsp; &nbsp; &nbsp; # Remove the wrong binding (right button)<br>

&nbsp; &nbsp; &nbsp; &nbsp; $MW-&gt;interp-&gt;Eval(&#39;event delete &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-2&gt;&#39;);<br>

&nbsp; &nbsp; &nbsp; &nbsp; # Replace it with the correct binding (middle button)<br>

&nbsp; &nbsp; &nbsp; &nbsp; $MW-&gt;interp-&gt;Eval(&#39;event delete &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-3&gt;&#39;);<br>

&nbsp; &nbsp; }<br>

}</span></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810109" href="/Public/Bug/Display.html?id=127120#txn-1810109">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;01:19:31&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810158" href="/Public/Bug/Display.html?id=127120#txn-1810158">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;08:28:00&nbsp;2018</span>
    <span class="description">welleozean [...] googlemail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127120] [macOS] Right-clic contextual menu</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Sep 2018 14:27:36 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tcl-pTk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> welle Ozean &lt;welleozean [...] googlemail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810158/974223/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974223">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Brilliant. The patch seems to work. I slightly adapted it and inserted it
directly in my application. Of course it would be great for other users to
have it directly in Tcl::pTk

I have only one observation
$MW-&gt;tclPatchlevel lt &#39;8.5.16&#39;
doesn&#39;t seem to work. If the value on the left is 8.5.9 the comparison&#39;s
result is FALSE, as I guess 9 is considered like 90 and therefore bigger
than 16.


Am Mo., 17. Sep. 2018 um 07:17 Uhr schrieb Christopher Alexander Chavez via
RT &lt;bug-Tcl-pTk@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127120">https://rt.cpan.org/Ticket/Display.html?id=127120</a></span> &gt;
&gt;
&gt; On Sun Sep 16 11:47:03 2018, welleozean@googlemail.com wrote:
<div class="message-stanza open">&gt; &gt; I confirm that with a middle-click event nothing happens &#40;USB-Mouse&#41;.
&gt; &gt; I
&gt; &gt; tried the demo widget with the latest ActiveTcl 8.6.7 and the problem
&gt; &gt; does
&gt; &gt; not show up. I will give it a try and see if I can map the keys to fit
&gt; &gt; the
&gt; &gt; older Tk, even if for the moment I haven&#39;t found any solution.
&gt; &gt;
&gt; &gt; Am So., 16. Sep. 2018 um 15:52 Uhr schrieb Christopher Alexander
&gt; &gt; Chavez via
&gt; &gt; RT &lt;bug-Tcl-pTk@rt.cpan.org&gt;:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127120">https://rt.cpan.org/Ticket/Display.html?id=127120</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Sun Sep 16 08:30:35 2018, CAC wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On Sun Sep 16 08:01:52 2018, CAC wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; On Sun Sep 16 06:27:51 2018, welleozean@googlemail.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; Hello,
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Perl 5.28
&gt; &gt; &gt; &gt; &gt; &gt; macOS: HighSierra
&gt; &gt; &gt; &gt; &gt; &gt; Tcl: shipped with macOS
&gt; &gt; &gt; &gt; &gt; &gt; Tcl::pTk-0.94
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; I found a strange behavior when right-clicking &#40;I am using the
&gt; &gt; &gt; &gt; &gt; &gt; trackpad&#41; on
&gt; &gt; &gt; &gt; &gt; &gt; any Widget that has a linked contextual menu &#40;Text, Entry and
&gt; &gt; &gt; &gt; &gt; &gt; so
&gt; &gt; &gt; &gt; &gt; &gt; on&#41;:
&gt; &gt; &gt; &gt; &gt; &gt; the
&gt; &gt; &gt; &gt; &gt; &gt; menu is shown but at the same it seems to perform a copy and
&gt; &gt; &gt; &gt; &gt; &gt; paste
&gt; &gt; &gt; &gt; &gt; &gt; operation. Simply try one of the demo widgets &#40;widgetTclpTk-
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; &gt;Basic
</div>&gt; &gt; &gt; &gt; &gt; &gt; editable
&gt; &gt; &gt; &gt; &gt; &gt; text&#41;, highlight a word, and right-click on it. The popup is
&gt; &gt; &gt; &gt; &gt; &gt; shown
&gt; &gt; &gt; &gt; &gt; &gt; and
&gt; &gt; &gt; &gt; &gt; &gt; after a while &#40;the time windows seems to vary &#40;?!?&#41;&#41; the
&gt; &gt; &gt; &gt; &gt; &gt; highlighted
&gt; &gt; &gt; &gt; &gt; &gt; term
&gt; &gt; &gt; &gt; &gt; &gt; is copied in the Text Widget. I have already read the following
&gt; &gt; &gt; &gt; &gt; &gt; node
&gt; &gt; &gt; &gt; &gt; &gt; with
&gt; &gt; &gt; &gt; &gt; &gt; what are - I guess - related problems:
&gt; &gt; &gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.perlmonks.org/?node_id=1215349">https://www.perlmonks.org/?node_id=1215349</a></span>
&gt; &gt; &gt; &gt; &gt; &gt; This problem prevents the use of any right-click features and
&gt; &gt; &gt; &gt; &gt; &gt; should
&gt; &gt; &gt; &gt; &gt; &gt; be
&gt; &gt; &gt; &gt; &gt; &gt; addressed. Any workaround?
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Best,
&gt; &gt; &gt; &gt; &gt; &gt; Welle
</div>&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; That does sound related to the general issue of middle-click and
&gt; &gt; &gt; &gt; &gt; right-click
&gt; &gt; &gt; &gt; &gt; &#40;buttons 2 and 3&#41; being swapped on macOS aqua &#40;RT #125050, which
&gt; &gt; &gt; &gt; &gt; I
&gt; &gt; &gt; &gt; &gt; believe I
&gt; &gt; &gt; &gt; &gt; had fixed in Tcl::pTk 0.93&#41;.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; But what you&#39;re observing sounds more like both the intended
&gt; &gt; &gt; &gt; &gt; right-
&gt; &gt; &gt; &gt; &gt; click
&gt; &gt; &gt; &gt; &gt; behavior &#40;popup menu&#41; as well the middle-click behavior &#40;Unix-
&gt; &gt; &gt; &gt; &gt; style
&gt; &gt; &gt; &gt; &gt; shortcut to
&gt; &gt; &gt; &gt; &gt; paste the selected text&#41; happening at the same time. So far I
&gt; &gt; &gt; &gt; &gt; cannot
&gt; &gt; &gt; &gt; &gt; reproduce
&gt; &gt; &gt; &gt; &gt; the issue in 0.94 with Tk 8.6.8, but I will look carefully again
&gt; &gt; &gt; &gt; &gt; to
&gt; &gt; &gt; &gt; &gt; see if
&gt; &gt; &gt; &gt; &gt; there&#39;s something like extra `bind&#40;&#41;` to the text or entry widget
&gt; &gt; &gt; &gt; &gt; or
&gt; &gt; &gt; &gt; &gt; one that I
&gt; &gt; &gt; &gt; &gt; wrote backwards.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I doubt that it&#39;s your machine/trackpad that&#39;s sending a middle-
&gt; &gt; &gt; &gt; &gt; click
&gt; &gt; &gt; &gt; &gt; event,
&gt; &gt; &gt; &gt; &gt; since there doesn&#39;t seem to be anything in System Preferences for
&gt; &gt; &gt; &gt; &gt; doing that
&gt; &gt; &gt; &gt; &gt; with a trackpad.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; I&#39;m curious what happens on your machine for an actual middle-
&gt; &gt; &gt; &gt; &gt; click
&gt; &gt; &gt; &gt; &gt; event &#40;I
&gt; &gt; &gt; &gt; &gt; would expect nothing to happen given your observation&#41;. If you
&gt; &gt; &gt; &gt; &gt; don&#39;t
&gt; &gt; &gt; &gt; &gt; happen to
&gt; &gt; &gt; &gt; &gt; have a USB/bluetooth mouse with a middle button &#40;clickable mouse
&gt; &gt; &gt; &gt; &gt; wheel&#41;, would
&gt; &gt; &gt; &gt; &gt; you be able to try using Karabiner-elements to emulate a button2
&gt; &gt; &gt; &gt; &gt; click
&gt; &gt; &gt; &gt; &gt; from the
&gt; &gt; &gt; &gt; &gt; keyboard?
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I suspect the old Tk version might be what&#39;s causing this. I didn&#39;t
&gt; &gt; &gt; &gt; quickly
&gt; &gt; &gt; &gt; find anything in Tcl::pTk&#39;s perl code responsible for the middle-
&gt; &gt; &gt; &gt; click
&gt; &gt; &gt; &gt; paste
&gt; &gt; &gt; &gt; using a `bind&#40;&#41;`, so I thought that it it might be handled by
&gt; &gt; &gt; &gt; Tcl/Tk.
&gt; &gt; &gt; &gt; I
&gt; &gt; &gt; &gt; compared the Tcl/Tk widget demos for 8.5.9 and 8.6.8; and on 8.6.8,
&gt; &gt; &gt; &gt; the paste
&gt; &gt; &gt; &gt; happens for middle click, but for 8.5.9 it happens for right click.
&gt; &gt; &gt; &gt; So
&gt; &gt; &gt; &gt; the
&gt; &gt; &gt; &gt; behavior for this seems to have changed between Tk 8.5.9 and 8.6.8.
&gt; &gt; &gt; &gt; &#40;I
&gt; &gt; &gt; &gt; have not
&gt; &gt; &gt; &gt; confirmed this from Tcl::pTk&#39;s widget demo with Tk 8.5.9, nor found
&gt; &gt; &gt; &gt; a
&gt; &gt; &gt; &gt; relevant
&gt; &gt; &gt; &gt; commit/issue in Tk codebase.&#41;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; As for a workaround, I haven&#39;t yet found if I can override middle-
&gt; &gt; &gt; &gt; click paste
&gt; &gt; &gt; &gt; from Perl, i.e. for making sure it&#39;s using the right button even
&gt; &gt; &gt; &gt; for
&gt; &gt; &gt; &gt; older
&gt; &gt; &gt; &gt; Tcl/Tk version.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; I believe this is the relevant commit in Tk, where &lt;&lt;PasteSelection&gt;&gt;
&gt; &gt; &gt; becomes
&gt; &gt; &gt; mapped to by &lt;ButtonRelease-3&gt; instead of &lt;ButtonRelease-2&gt; for aqua.
&gt; &gt; &gt; The
&gt; &gt; &gt; issue
&gt; &gt; &gt; for the commit did not specify anything about the middle-click paste
&gt; &gt; &gt; event.
&gt; &gt; &gt; This change was released as part of Tk 8.5.16 and 8.6.1.
&gt; &gt; &gt;
&gt; &gt; &gt;
</div></div>&gt;
&gt; Looking at the Tk source code &#40;tk.tcl&#41;, it turns out that the relevant
&gt; statement `event add &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-2&gt;` is easily
&gt; undone by
&gt; `event delete &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-2&gt;`. Then using `event add
&gt; &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-3&gt;` effectively fixes the behavior in Tk
&gt; at
&gt; runtime. Here&#39;s the workaround I&#39;m thinking of putting in Tcl::pTk &#40;I&#39;m
&gt; not yet
&gt; sure exactly where it would belong&#41;:
&gt;
&gt; # RT #127120: Middle-click paste workaround
&gt; # for older Tcl/Tk versions on macOS aqua
&gt; if &#40;$MW-&gt;windowingsystem eq &#39;aqua&#39;&#41;{
&gt; # Check for affected versions of Tk
&gt; if &#40;
&gt; &#40;$MW-&gt;tclVersion eq &#39;8.4&#39;&#41;
&gt; or &#40;&#40;$MW-&gt;tclVersion eq &#39;8.5&#39;&#41; and &#40;$MW-&gt;tclPatchlevel lt &#39;8.5.16&#39;&#41;&#41;
&gt; or &#40;&#40;$MW-&gt;tclVersion eq &#39;8.6&#39;&#41; and &#40;$MW-&gt;tclPatchlevel lt &#39;8.6.1&#39;&#41;&#41;
&gt; &#41; {
&gt; # Remove the wrong binding &#40;right button&#41;
&gt; $MW-&gt;interp-&gt;Eval&#40;&#39;event delete &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-2&gt;&#39;&#41;;
&gt; # Replace it with the correct binding &#40;middle button&#41;
&gt; $MW-&gt;interp-&gt;Eval&#40;&#39;event delete &lt;&lt;PasteSelection&gt;&gt; &lt;ButtonRelease-3&gt;&#39;&#41;;
&gt; }
&gt; }
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810158/974224/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974224">with headers</a>
<br />
<span class="downloadcontenttype">text/html 9.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1810181" href="/Public/Bug/Display.html?id=127120#txn-1810181">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;17&nbsp;10:01:06&nbsp;2018</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1810181/974239/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974239">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><span style="font-family:arial,helvetica,sans-serif;">On Mon Sep 17 07:28:00 2018, welleozean@googlemail.com wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Brilliant. The patch seems to work. I slightly adapted it and inserted it<br>

&gt; directly in my application. Of course it would be great for other users to<br>

&gt; have it directly in Tcl::pTk<br>

&gt;<br>

&gt; I have only one observation<br>

&gt; $MW-&gt;tclPatchlevel lt &#39;8.5.16&#39;<br>

&gt; doesn&#39;t seem to work. If the value on the left is 8.5.9 the comparison&#39;s<br>

&gt; result is FALSE, as I guess 9 is considered like 90 and therefore bigger<br>

&gt; than 16.<br>
</div><br>

Thank you for trying this out, and for catching the na&iuml;ve comparison I wrote. You&#39;re right, it won&#39;t work for comparing versions with different numbers of digits. Nor will it handle alpha/beta releases e.g. &#39;8.7a2&#39;&hellip;<br>

<br>

Also, at the moment I think it&#39;s likely that once the workaround is in Tcl::pTk, you might want to remove it from your program to prevent any errors from it doing the same thing twice.</span><br>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1835030" href="/Public/Bug/Display.html?id=127120#txn-1835030">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;24&nbsp;22:45:55&nbsp;2019</span>
    <span class="description">CAC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1835030/986610/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/986610">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza">On Mon Sep 17 09:01:06 2018, CAC wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Sep 17 07:28:00 2018, welleozean@googlemail.com wrote:<br>
<div class="message-stanza open">&gt; &gt; Brilliant. The patch seems to work. I slightly adapted it and<br>

&gt; &gt; inserted it<br>

&gt; &gt; directly in my application. Of course it would be great for other<br>

&gt; &gt; users to<br>

&gt; &gt; have it directly in Tcl::pTk<br>

&gt; &gt;<br>

&gt; &gt; I have only one observation<br>

&gt; &gt; $MW-&gt;tclPatchlevel lt &#39;8.5.16&#39;<br>

&gt; &gt; doesn&#39;t seem to work. If the value on the left is 8.5.9 the<br>

&gt; &gt; comparison&#39;s<br>

&gt; &gt; result is FALSE, as I guess 9 is considered like 90 and therefore<br>

&gt; &gt; bigger<br>

&gt; &gt; than 16.<br>
</div>&gt;<br>

&gt; Thank you for trying this out, and for catching the na&iuml;ve comparison I<br>

&gt; wrote.<br>

&gt; You&#39;re right, it won&#39;t work for comparing versions with different<br>

&gt; numbers of<br>

&gt; digits. Nor will it handle alpha/beta releases e.g. &#39;8.7a2&#39;&hellip;<br>

&gt;<br>

&gt; Also, at the moment I think it&#39;s likely that once the workaround is in<br>

&gt; Tcl::pTk, you might want to remove it from your program to prevent any<br>

&gt; errors<br>

&gt; from it doing the same thing twice.<br>
</div><br>

<span style="font-family:arial,helvetica,sans-serif;">I found that a more robust way to check the Tcl/Tk version (or patchlevel) is to just use Tcl&#39;s <a href="https://www.tcl.tk/man/tcl8.6/TclCmd/package.htm#M13"><span style="font-family:courier new,courier,monospace;">package vcompare</span></a> command, rather than to try inventing my own. Using that, I have incorporated a revised way of patching old Tk Aqua at runtime, as well as added a test to check that the middle-click paste behavior is correct regardless of the version of Tk Aqua present:&nbsp;<a href="https://github.com/chrstphrchvz/perl-tcl-ptk/commit/068b11022878322daa962520b9d48768bbf3e1d8"><span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/chrstphrchvz/perl-tcl-ptk/commit/068b11022878322daa962520b9d48768bbf3e1d8">https://github.com/chrstphrchvz/perl-tcl-ptk/commit/068b11022878322daa962520b9d48768bbf3e1d8</a></span></a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1835033" href="/Public/Bug/Display.html?id=127120#txn-1835033">#</a>      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;24&nbsp;22:45:55&nbsp;2019</span>
    <span class="description">CAC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1835244" href="/Public/Bug/Display.html?id=127120#txn-1835244">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;01:31:52&nbsp;2019</span>
    <span class="description">CAC [...] cpan.org -  Subject changed from &#39;[macOS] Right-clic contextual menu&#39; to &#39;[macOS] Right-click contextual menu&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1835245" href="/Public/Bug/Display.html?id=127120#txn-1835245">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;01:31:52&nbsp;2019</span>
    <span class="description">CAC [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1835247" href="/Public/Bug/Display.html?id=127120#txn-1835247">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;01:31:52&nbsp;2019</span>
    <span class="description">CAC [...] cpan.org -  Fixed in 0.95 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.636281</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
