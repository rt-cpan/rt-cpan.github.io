<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #110559 for Image-ExifTool: Unable to remove certain GPS Time/date tags with exiftool</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #110559 for Image-ExifTool: Unable to remove certain GPS Time/date tags with exiftool</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Image-ExifTool">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Image-ExifTool">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Image-ExifTool">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Image-ExifTool">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Image-ExifTool">Image-ExifTool CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">110559</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Image-ExifTool">Image-ExifTool</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
andycham [...] amazon.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16626-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16627-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=110559">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575755" href="/Public/Bug/Display.html?id=110559#txn-1575755">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;08:34:24&nbsp;2015</span>
    <span class="description">andycham [...] amazon.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Unable to remove certain GPS Time/date tags with exiftool</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 23 Dec 2015 13:33:41 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Image-ExifTool [...] rt.cpan.org&#34; &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Champ, Andy&#34; &lt;andycham [...] amazon.co.uk&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575755/841461/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841461">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 613b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">There are three tags relating to time and date:


Exiftool parameter name

meaning

XMP #7

-GPSTimeStamp

Timestamp of the GPS fix in 3 rational values

XMP#1D

-GPSDateStamp

Date of the GPS fix in ASCII

exif:GPSTimeStamp

-GPSDateTime

Time and date of the GPS fix in ASCII


I find that:

-          Setting either GPSTimeStamp or GPSDateStamp to an empty value also removes GPSDateTime

-          Setting GpsDateTime to an empty value has no effect
It&#39;s as if the code is regenerating the GPSDateTime tag if it has both a valid time and a date, rather than storing it as a separate value.

Tested on V10.0
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575755/841462/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841462">with headers</a>
<br />
<span class="downloadcontenttype">text/html 7.6k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575774" href="/Public/Bug/Display.html?id=110559#txn-1575774">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;09:51:07&nbsp;2015</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575774/841469/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841469">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 381b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I think you are confused by the two GPSDateTIme tags.

There is an XMP:GPSDateTime which may be read/written directly, and a Composite:GPSDateTime which is read only and derives its value from EXIF:GPSDateStamp and EXIF:GPSTimeStamp.

Use the -G option when reading to see which GPSDateTime you are seeing.  To change Composite:GPSDateTime, you need to write the EXIF tags.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575775" href="/Public/Bug/Display.html?id=110559#txn-1575775">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;09:51:07&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575802" href="/Public/Bug/Display.html?id=110559#txn-1575802">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;10:47:49&nbsp;2015</span>
    <span class="description">andycham [...] amazon.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #110559] Unable to remove certain GPS Time/date tags with exiftool</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 23 Dec 2015 15:47:15 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Image-ExifTool [...] rt.cpan.org&#34; &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Champ, Andy&#34; &lt;andycham [...] amazon.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575802/841489/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841489">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t think I&#39;m confused - but I might be ;&#41; in fact this whole area is pretty confusing.
In CIPA DC-010 -2012 Exif 2.3 metadata for XMP there&#39;s a table showing the mapping between tag based and XML properties. That lists the tags 7 and 1d, and states that they both map down to the XML property exif:GPSTimeStamp. AIUI both the tag based and the XML based properties can be written into the file, and they have independent values. It wouldn&#39;t make much sense for them to be different - but what I&#39;m trying to do is test my enhancements to support these particular tags in GStreamer. GStreamer has separate code to handle the two types of tag; I have to enhance the readers and writers for both types, and obviously to test this I want files with differing values.

Start with a file with no GPS tags &#40;you&#39;ll have to mangle the commands if you aren&#39;t Linux&#41;
rm -f foo.jpg;../../Image-ExifTool-10.00/exiftool ~/Pictures/100_0889.JPG -GPSDateTime=&#34;2015:12:25 01:23:45&#34; -o foo.jpg &#38;&#38; ../../Image-ExifTool-10.00/exiftool -args foo.jpg | grep GPS

gives
-GPSDateTime=2015:12:25 01:23:45

rm -f foo.jpg;../../Image-ExifTool-10.00/exiftool ~/Pictures/100_0889.JPG -GPSDateTime=&#34;2015:12:25 12:34:56:78&#34; -GPSTimeStamp=01:23:45.67 -o foo.jpg &#38;&#38; ../../Image-ExifTool-10.00/exiftool -args foo.jpg | grep GPS
gives
-GPSVersionID=2.3.0.0
-GPSTimeStamp=01:23:45.67
-GPSDateTime=2015:12:25 12:34:56

Note that there are two DIFFERENT times...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575813" href="/Public/Bug/Display.html?id=110559#txn-1575813">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;11:17:58&nbsp;2015</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575813/841496/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841496">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 276b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Add -g to your command when extracting metadata with the -args option.  You will see that you wrote XMP:GPSDateTime and EXIF:GPSTimeStamp.  I think what you want to write is EXIF:GPSDateStamp and EXIF:GPSTimeStamp:

-EXIF:GPSDateStamp=2015:12:25 -EXIF:GPSTimeStamp=01:23:45.67
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575815" href="/Public/Bug/Display.html?id=110559#txn-1575815">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;11:35:44&nbsp;2015</span>
    <span class="description">andycham [...] amazon.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #110559] Unable to remove certain GPS Time/date tags with exiftool</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 23 Dec 2015 16:35:13 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Image-ExifTool [...] rt.cpan.org&#34; &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Champ, Andy&#34; &lt;andycham [...] amazon.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575815/841498/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841498">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 774b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The whole reason I raised this is that when _removing_ tags I get strange behaviour.

AIUI the three tags are
XMP:GPSDateTime controlled by -GPSDateTime
EXIF:GPSTimeStamp controlled by -GPSTimeStamp
EXIF:GPSDateStamp controlled by - GPSDateStamp

That&#39;s sort of true. But not completely. I guess it makes sense to have some sort of interaction - most people would want the data stored in the same manner to tie up. &#40;I happen to be someone who doesn&#39;t&#41;.

If you empty either GPSDateStamp or GPSTimeStamp on a file that already has the full set then GPSDateTime is also removed.
If you have a file that doesn&#39;t already have any of them you can set them to different values.
If you have a file with the full set of data then you can&#39;t set them to different values.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575817" href="/Public/Bug/Display.html?id=110559#txn-1575817">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;11:45:23&nbsp;2015</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575817/841500/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841500">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 376b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">You&#39;re still missing the point.

On Wed Dec 23 11:35:44 2015, andycham@amazon.co.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you empty either GPSDateStamp or GPSTimeStamp on a file that
&gt; already has the full set then GPSDateTime is also removed.
</div>
No.  Only the tags you deleted are removed.  The Composite:GPSDateTime tag is not a physical tag -- its value is derived from GPSDateStamp and GPSTimeStamp.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1575819" href="/Public/Bug/Display.html?id=110559#txn-1575819">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;23&nbsp;12:02:34&nbsp;2015</span>
    <span class="description">andycham [...] amazon.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #110559] Unable to remove certain GPS Time/date tags with exiftool</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 23 Dec 2015 17:02:06 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Image-ExifTool [...] rt.cpan.org&#34; &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Champ, Andy&#34; &lt;andycham [...] amazon.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1575819/841502/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841502">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 343b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">No, there are three physical locations in the file involved in GPS time/date data.

This is shown by my previous example: Take a file with no GPS tags, and set -GPSTimeStamp and -GPSDateTime to DIFFERENT times, then look at the output. You&#39;ll see two different times, clearly demonstrating that the file contains two different time values.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1576305" href="/Public/Bug/Display.html?id=110559#txn-1576305">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;25&nbsp;11:19:00&nbsp;2015</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1576305/841774/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/841774">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 232b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, I know.  We&#39;re talking around in circles.  In my first response I explained all this.

So I don&#39;t understand the problem.   ExifTool just writes what you tell it.  You may choose to write conflicting values if you want.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1577726" href="/Public/Bug/Display.html?id=110559#txn-1577726">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;29&nbsp;05:24:30&nbsp;2015</span>
    <span class="description">andycham [...] amazon.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #110559] Unable to remove certain GPS Time/date tags with exiftool</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 29 Dec 2015 10:23:55 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Phil Harvey via RT &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Champ, Andy&#34; &lt;andycham [...] amazon.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1577726/842604/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/842604">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I agree, we&#39;re talking around in circles. Let me show you exactly what I am seeing. It looks to me as if the code is attempting some sort of merge between the XMP tags and the EXIF XML tags I mentioned in my original post.

First, here is a file that was written by a Samsung camera phone with GPS tags contains both values. I&#39;m running on LInux, and I can use grep to show just the tags I am interested in:

exiftool -args ~/Pictures/20151209_104853\ GPS\ tagged.jpg  | grep -i GPS | egrep -i &#34;time|date&#34;
-GPSTimeStamp=10:48:20
-GPSDateStamp=2015:12:09
-GPSDateTime=2015:12:09 10:48:20Z

Not surprisingly the two tag types contain the same time and date, albeit in slightly different formats.

With a file that contains no GPS tags at all:
exiftool -args ~/Pictures/100_0889.JPG  | grep -i GPS | egrep -i &#34;time|date&#34;

&#40;nothing gets through the grep patterns&#41;

Attempt to add mismatched tags to that file:
exiftool ~/Pictures/100_0889.JPG -GPSTimeStamp=10:48:20 -GPSDateStamp=2015:12:09 -GPSDateTime=&#34;2011:11:11 11:11:11&#34; -o foo.jpg
    1 image files created

exiftool -args foo.jpg  | grep -i GPS | egrep -i &#34;time|date&#34;
-GPSTimeStamp=10:48:20
-GPSDateStamp=2015:12:09
-GPSDateTime=2015:12:09 10:48:20Z

Notice that although I have set the GPSDateTime field to contain lots of 1s the value read back is the value set to the XMP tags, a couple of weeks ago.

If, on the other hand, I set one but not both of the XMP tags then it can contain a different value to the EXIF tag

rm foo.jpg

exiftool ~/Pictures/100_0889.JPG -GPSTimeStamp=10:48:20 -GPSDateTime=&#34;2011:11:11 11:11:11&#34; -o foo.jpg
    1 image files created

Image-ExifTool-10.00/exiftool -args foo.jpg  | grep -i GPS | egrep -i &#34;time|date&#34;
-GPSTimeStamp=10:48:20
-GPSDateTime=2011:11:11 11:11:11

rm foo.jpg

exiftool ~/Pictures/100_0889.JPG -GPSDateStamp=2015:12:09 -GPSDateTime=&#34;2011:11:11 11:11:11&#34; -o foo.jpg
    1 image files created

exiftool -args foo.jpg  | grep -i GPS | egrep -i &#34;time|date&#34;
-GPSDateStamp=2015:12:09
-GPSDateTime=2011:11:11 11:11:11

Further, if I take an input file that has both tags &#40;I&#39;ll add them through your tool&#41;

exiftool ~/Pictures/100_0889.JPG -GPSTimeStamp=10:48:20 -GPSDateStamp=2015:12:09 -GPSDateTime=&#34;2011:11:11 11:11:11&#34; -o tagged.jpg
    1 image files created

exiftool -args tagged.jpg  | grep -i GPS | egrep -i &#34;time|date&#34;
-GPSTimeStamp=10:48:20
-GPSDateStamp=2015:12:09
-GPSDateTime=2015:12:09 10:48:20Z

And then attempt to remove just the GPSTimeStamp XMP tag by setting it to an empty value the GPSDateTime is also removed

rm foo.jpg

exiftool tagged.jpg -GPSTimeStamp= -o foo.jpg
    1 image files created

exiftool -args foo.jpg  | grep -i GPS | egrep -i &#34;time|date&#34;
-GPSDateStamp=2015:12:09
-GPSDateTime=2011:11:11 11:11:11

err... WTH? That wasn&#39;t what I expected. Suddenly the GPSDateTime EXIF tag has become visible, set to the value I set it to - and it&#39;s not showing the value it was showing in the input file. It does the same thing on setting GPSDateStamp to an empty value. Opening the file tagged.jpg with an editor shows it contains the text
&lt;exif:GPSTimeStamp&gt;2011-11-11T11:11:11&lt;/exif:GPSTimeStamp&gt;
and also it contains the GPSDateStamp value elsewhere. &#40;This is less obvious with these values, as there are lots of 2015:12:09 in there, so I had to set a different date. GSTimeStamp is hidden from a text editor as it is written in binary.&#41;

So in this case it&#39;s the DISPLAY that&#39;s not working, not the setting of the tags - it&#39;s reporting a GPSTimeStamp value for the file which is not the same as the one in the XML metadata for that tag. Perhaps I&#39;ve reported the wrong bug. Could you please attempt to reproduce this on your system? If you don&#39;t get the same results that would be very interesting.

But wait until after Christmas ;&#41; you shouldn&#39;t have been working on the 25th!

Happy New Year!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1579288" href="/Public/Bug/Display.html?id=110559#txn-1579288">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;02&nbsp;11:34:46&nbsp;2016</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1579288/843506/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843506">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 246b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK.  You&#39;re getting fooled now because you are not seeing the duplicate tags.  This is FAQ number 3:

<span class="clickylink"><a target="new" rel="nofollow" href="http://owl.phy.queensu.ca/~phil/exiftool/faq.html#Q3">http://owl.phy.queensu.ca/~phil/exiftool/faq.html#Q3</a></span>

Add &#34;-a -G1&#34; to your command when extracting the tags to see what you are missing.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1579945" href="/Public/Bug/Display.html?id=110559#txn-1579945">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;04&nbsp;05:30:48&nbsp;2016</span>
    <span class="description">andycham [...] amazon.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #110559] Unable to remove certain GPS Time/date tags with exiftool</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 4 Jan 2016 10:30:04 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Image-ExifTool [...] rt.cpan.org&#34; &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Champ, Andy&#34; &lt;andycham [...] amazon.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1579945/843922/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843922">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 803b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Now I understand what&#39;s going on, with the help of the -a -G1 options.

Without the -a -G1 options being given:

A file with the XMP-exif tag alone shows the composite tag, manufactured from the tag.

A file with both the XMP tags 7 and 1d shows them separately, and shows the composite tag manufactured from the two tags.

A file with all three tags shows _exactly_ _the_ _same_ output_ as a file that has only the XMP tags 7 and 1d - it shows their values separately, and manufactures a composite tag from them.

I feel that this behaviour - silently overriding the value in the XMP-exif tag - is misleading. It certainly confused me. I had assumed that the three values shown in the output were related to the three values stored in the file - and this is not the case.

Happy New Year!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1580026" href="/Public/Bug/Display.html?id=110559#txn-1580026">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;04&nbsp;08:14:15&nbsp;2016</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.515611</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
