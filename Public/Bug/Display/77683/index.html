<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #77683 for Net-DNS: Net::DNS aborts with Windows 7 &#40;64bt&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #77683 for Net-DNS: Net::DNS aborts with Windows 7 &#40;64bt&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-DNS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">77683</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-DNS/Active/">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">NLNETLABS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
DGrayStephens [...] slb.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.68    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;07&nbsp;05:25:22&nbsp;2012</span>
    <span class="description">https://www.google.com/accounts/o8/id?id=AItOawnV05yumRynL7cbRgyV1AV1IsFKIw5HuVo -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net::DNS aborts with Windows 7 &#40;64bt&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am running 64bit perl on Windows 7SP1 with Net::DNS version 0.68
This is perl 5, version 14, subversion 2 &#40;v5.14.2&#41; built for MSWin32-x64-multi-thread
&#40;with 1 registered patch, see perl -V for more detail&#41;

Copyright 1987-2011, Larry Wall

Binary build 1402 [295342] provided by ActiveState <span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
Built Oct  7 2011 15:19:36

and if I try to use the Net::DNS module, then perl aborts with a pop up message to say that perl has stopped 
working &#40;see attached file for screen shot&#41;.

If I run perl in debugging, I get a more informative message, pointing to Net/DNS/Resolver/Win32.pm line 27:


perl -d -e 1

Loading DB routines from perl5db.pl version 1.33
Editor support available.

Enter h or `h h&#39; for help, or `perldoc perldebug&#39; for more help.

main::&#40;-e:1&#41;:   1
  DB&lt;1&gt; use Net::DNS
Signal SEGV at D:/Applications/Perl/site/lib/Net/DNS/Resolver/Win32.pm line 27
        Net::DNS::Resolver::Win32::init&#40;&#39;Net::DNS::Resolver&#39;&#41; called at 
D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 32
        require Net/DNS/Resolver.pm called at D:/Applications/Perl/site/lib/Net/DNS.pm line 106
        Net::DNS::BEGIN&#40;&#41; called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0
        eval {...} called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0
        require Net/DNS.pm called at &#40;eval 10&#41;[D:/Applications/Perl/lib/perl5db.pl:640] line 2
        main::BEGIN&#40;&#41; called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0
        eval {...} called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0
        eval &#39;&#40;$@, $!, $^E, $,, $/, $\\, $^W&#41; = @saved;package main; $^D = $^D | $DB::db_stop;
use Net::DNS;

;&#39; called at D:/Applications/Perl/lib/perl5db.pl line 640
        DB::eval called at D:/Applications/Perl/lib/perl5db.pl line 3436
        DB::DB called at -e line 1
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> clip1.jpg</td>
  </tr>
</table>

<div class="messagebody">
<img alt="clip1.jpg" title="clip1.jpg" src="/Ticket/Attachment/1087676/571735/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;09&nbsp;10:35:05&nbsp;2012</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">A similar problem is reported in ActiveState perl support forum:

<span class="clickylink"><a target="new" rel="nofollow" href="http://community.activestate.com/node/7874">http://community.activestate.com/node/7874</a></span>

Please can you follow the advice given there and capture the complete
output from the cpan shell.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;09&nbsp;10:35:07&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;27&nbsp;10:35:33&nbsp;2012</span>
    <span class="description">NLNETLABS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Douglas,

I have windows through Amazon EC2. When I install ActiveState perl &#40;32
bits&#41; on a 64 bits machine everything is fine and works as it should.

In your error message you get an SEGV on line 27 of
Net::DNS::Resolver::Win32. On this line WinIPHelper is used.

Is WinIPHelper functioning properly on your system?
Does the following produce the crash as well?
 
perl -d -e 1

Loading DB routines from perl5db.pl version 1.33 Editor support available.

Enter h or `h h&#39; for help, or `perldoc perldebug&#39; for more help.

main::&#40;-e:1&#41;:  1

  DB&lt;1&gt; use Win32::IPHelper

  DB&lt;2&gt; Win32::IPHelper::GetNetworkParams&#40;{}&#41;


Regards,

-- Willem
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;27&nbsp;10:35:41&nbsp;2012</span>
    <span class="description">NLNETLABS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;27&nbsp;12:45:27&nbsp;2012</span>
    <span class="description">DGrayStephens [...] slb.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #77683] Net::DNS aborts with Windows 7 &#40;64bt&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jun 2012 16:45:04 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-DNS [...] rt.cpan.org&#34; &lt;bug-Net-DNS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Douglas Gray Stephens &lt;dgraystephens [...] slb.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Willem,



I agree that the Actievstate perl 32bit installation does not seem to have the issue on Windows 7 &#40;64bit&#41; but if I install the 64bit version of Activestate Perl, then I get the error.



I&#39;m still trying to sort out access to a compiler, so I can build the module and run the tests to see if it is related to Actievstate&#39;s build.



I do not get the issue on calling GetNetworkParams:

Wed 27-Jun-12 17:37:33.71

d:\Douglas&gt;

perl -d -e 1



Loading DB routines from perl5db.pl version 1.33

Editor support available.



Enter h or `h h&#39; for help, or `perldoc perldebug&#39; for more help.



main::&#40;-e:1&#41;: 1

  DB&lt;1&gt; use Win32::IPHelper



  DB&lt;2&gt; use Win32::IPHelper



  DB&lt;3&gt; use Net::DNS

Signal SEGV at D:/Applications/Perl/site/lib/Net/DNS/Resolver/Win32.pm line 27

       Net::DNS::Resolver::Win32::init&#40;&#39;Net::DNS::Resolver&#39;&#41; called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 32

       require Net/DNS/Resolver.pm called at D:/Applications/Perl/site/lib/Net/DNS.pm line 106

       Net::DNS::BEGIN&#40;&#41; called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0

       eval {...} called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0

       require Net/DNS.pm called at &#40;eval 15&#41;[D:/Applications/Perl/lib/perl5db.pl:640] line 2

       main::BEGIN&#40;&#41; called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0

       eval {...} called at D:/Applications/Perl/site/lib/Net/DNS/Resolver.pm line 0

       eval &#39;&#40;$@, $!, $^E, $,, $/, $\\, $^W&#41; = @saved;package main; $^D = $^D | $DB::db_stop;

use Net::DNS;



;&#39; called at D:/Applications/Perl/lib/perl5db.pl line 640

       DB::eval called at D:/Applications/Perl/lib/perl5db.pl line 3436

       DB::DB called at -e line 1





Wed 27-Jun-12 17:38:10.27

d:\Douglas&gt;



regards,



Douglas.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -----Original Message-----
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; From: NLnet Labs via RT [mailto:bug-Net-DNS@rt.cpan.org]
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sent: Wednesday 27 June 2012 15:36
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; To: Douglas Gray Stephens
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Subject: [rt.cpan.org #77683] Net::DNS aborts with Windows 7 &#40;64bt&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=77683">https://rt.cpan.org/Ticket/Display.html?id=77683</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Douglas,
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have windows through Amazon EC2. When I install ActiveState perl &#40;32
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; bits&#41; on a 64 bits machine everything is fine and works as it should.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In your error message you get an SEGV on line 27 of Net::DNS::Resolver::Win32.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On this line WinIPHelper is used.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is WinIPHelper functioning properly on your system?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Does the following produce the crash as well?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -d -e 1
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Loading DB routines from perl5db.pl version 1.33 Editor support available.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Enter h or `h h&#39; for help, or `perldoc perldebug&#39; for more help.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; main::&#40;-e:1&#41;:  1
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   DB&lt;1&gt; use Win32::IPHelper
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   DB&lt;2&gt; Win32::IPHelper::GetNetworkParams&#40;{}&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Regards,
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -- Willem
</div>

</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;27&nbsp;16:44:39&nbsp;2012</span>
    <span class="description">willem [...] nlnetlabs.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #77683] Net::DNS aborts with Windows 7 &#40;64bt&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jun 2012 22:44:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Willem Toorop &lt;Willem [...] NLnetLabs.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Douglas,

Op 27-06-12 18:45, DGrayStephens@slb.com via RT schreef:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I agree that the Actievstate perl 32bit installation does not seem to have the issue on Windows 7 &#40;64bit&#41; but if I install the 64bit version of Activestate Perl, then I get the error.
</div>
I will try again with 64bits Activestate perl.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m still trying to sort out access to a compiler, so I can build the module and run the tests to see if it is related to Actievstate&#39;s build.
</div>
Me too. Having gcc in the path did not seem to work... How did you
install Net::DNS? It did not seem available via ppm.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I do not get the issue on calling GetNetworkParams:
</div>
Though in the debugger session you copied in this e-mail you didn&#39;t call
it...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   DB&lt;2&gt; use Win32::IPHelper
</div>
Are you sure you also tried:

        Win32::IPHelper::GetNetworkParams&#40;{}&#41;

? Because that is the function that is called at line 27 of

        D:/Applications/Perl/site/lib/Net/DNS/Resolver/Win32.pm

Or do you see something else on line 27 of that file?

Regards,

-- Willem
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;27&nbsp;18:25:18&nbsp;2012</span>
    <span class="description">DGrayStephens [...] slb.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #77683] Net::DNS aborts with Windows 7 &#40;64bt&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 Jun 2012 22:25:05 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-DNS [...] rt.cpan.org&#34; &lt;bug-Net-DNS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Douglas Gray Stephens &lt;dgraystephens [...] slb.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">William,





<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -----Original Message-----
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; From: Willem Toorop via RT [mailto:bug-Net-DNS@rt.cpan.org]
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sent: Wednesday 27 June 2012 21:45
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; To: Douglas Gray Stephens
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Subject: Re: [rt.cpan.org #77683] Net::DNS aborts with Windows 7 &#40;64bt&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=77683">https://rt.cpan.org/Ticket/Display.html?id=77683</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Douglas,
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Op 27-06-12 18:45, DGrayStephens@slb.com&lt;mailto:DGrayStephens@slb.com&gt; via RT schreef:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I agree that the Actievstate perl 32bit installation does not seem to have the
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; issue on Windows 7 &#40;64bit&#41; but if I install the 64bit version of Activestate Perl,
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; then I get the error.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I will try again with 64bits Activestate perl.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I&#39;m still trying to sort out access to a compiler, so I can build the module and
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; run the tests to see if it is related to Actievstate&#39;s build.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Me too. Having gcc in the path did not seem to work... How did you install
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Net::DNS? It did not seem available via ppm.
</div>
[Douglas Gray Stephens]

I&#39;m using the ActiveState distribution, so that includes a repository of precompiled modules, available via ppm

               <span class="clickylink"><a target="new" rel="nofollow" href="http://docs.activestate.com/activeperl/5.10/faq/ActivePerl-faq2.html">http://docs.activestate.com/activeperl/5.10/faq/ActivePerl-faq2.html</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I do not get the issue on calling GetNetworkParams:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Though in the debugger session you copied in this e-mail you didn&#39;t call it...
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>


[Douglas Gray Stephens]

Sorry, you are correct, I did not successfully copy and paste the 2nd command, so that does give the error:

Wed 27-Jun-12 17:38:10.27

d:\Douglas&gt;

perl -d -e 1



Loading DB routines from perl5db.pl version 1.33

Editor support available.



Enter h or `h h&#39; for help, or `perldoc perldebug&#39; for more help.



main::&#40;-e:1&#41;: 1

  DB&lt;1&gt; use Win32::IPHelper



  DB&lt;2&gt; Win32::IPHelper::GetNetworkParams&#40;{}&#41;

Signal SEGV at &#40;eval 14&#41;[D:/Applications/Perl/lib/perl5db.pl:640] line 2

       eval &#39;&#40;$@, $!, $^E, $,, $/, $\\, $^W&#41; = @saved;package main; $^D = $^D | $DB::db_stop;

Win32::IPHelper::GetNetworkParams&#40;{}&#41;;



;&#39; called at D:/Applications/Perl/lib/perl5db.pl line 640

       DB::eval called at D:/Applications/Perl/lib/perl5db.pl line 3436

       DB::DB called at -e line 1





Wed 27-Jun-12 23:18:41.41

d:\Douglas&gt;



Regards,



Douglas





<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;   DB&lt;2&gt; use Win32::IPHelper
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Are you sure you also tried:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;             Win32::IPHelper::GetNetworkParams&#40;{}&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ? Because that is the function that is called at line 27 of
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;             D:/Applications/Perl/site/lib/Net/DNS/Resolver/Win32.pm
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Or do you see something else on line 27 of that file?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Regards,
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -- Willem
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div>

</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;29&nbsp;10:33:56&nbsp;2012</span>
    <span class="description">NLNETLABS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">FYI,

I managed to reproduce...

Problem signature:
  Problem Event Name:   APPCRASH
  Application Name:     perl.exe
  Application Version:  5.14.2.1402
  Application Timestamp:        4e8f83bc
  Fault Module Name:    Iphlpapi.DLL
  Fault Module Version: 6.1.7601.17514
  Fault Module Timestamp:       4ce7c6da
  Exception Code:       c0000005
  Exception Offset:     0000000000008a64
  OS Version:   6.1.7601.2.1.0.400.8

It is in Iphlpapi.dll, so something goes wrong with the IPHelper call to
GetNetworkParams within Iphlpapi.dll. And then it has to be something
with the function arguments handling &#40;a pointer to a struct and a length
pointer&#41;, because other Win32::IPHelper functions are working fine.

B.t.w. de problem does not occur with 64bit Strawberry Perl. There has
actually been quiet some effort to get Win32::IPHelper working on 64bit
Strawberry Perl, however Strawberry did not crash calling the dll functions.

I suspect the problem lies within Win32::API. Maybe we should create a
ticket there...

On Wed 27 Jun 2012 18:25:18, DGrayStephens@slb.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; William,
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; -----Original Message-----
</div>&gt; 
<div class="message-stanza open">&gt; &gt; From: Willem
</div>&gt; Toorop via RT [mailto:bug-Net-DNS@rt.cpan.org]
&gt; 
<div class="message-stanza open">&gt; &gt; Sent: Wednesday 27
</div>&gt; June 2012 21:45
&gt; 
<div class="message-stanza open">&gt; &gt; To: Douglas Gray Stephens
</div>&gt; 
<div class="message-stanza open">&gt; &gt; Subject: Re:
</div>&gt; [rt.cpan.org #77683] Net::DNS aborts with Windows 7 &#40;64bt&#41;
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=77683">https://rt.cpan.org/Ticket/Display.html?id=77683</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; Hi
</div>&gt; Douglas,
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; Op 27-06-12 18:45,
</div>&gt; DGrayStephens@slb.com&lt;mailto:DGrayStephens@slb.com&gt; via RT schreef:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; I agree that the Actievstate perl 32bit installation does not seem
</div></div>&gt; to have the
&gt; 
<div class="message-stanza open">&gt; &gt; issue on Windows 7 &#40;64bit&#41; but if I install the 64bit
</div>&gt; version of Activestate Perl,
&gt; 
<div class="message-stanza open">&gt; &gt; then I get the error.
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; I
</div>&gt; will try again with 64bits Activestate perl.
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; I&#39;m still
</div></div>&gt; trying to sort out access to a compiler, so I can build the module and
<div class="message-stanza open">&gt; &gt; run the tests to see if it is related to Actievstate&#39;s build.
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; Me too. Having gcc in the path did not seem to work... How did you
</div>&gt; install
&gt; 
<div class="message-stanza open">&gt; &gt; Net::DNS? It did not seem available via ppm.
</div>&gt; 
&gt; [Douglas
&gt; Gray Stephens]
&gt; 
&gt; I&#39;m using the ActiveState distribution, so that
&gt; includes a repository of precompiled modules, available via ppm
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://docs.activestate.com/activeperl/5.10/faq/ActivePerl-faq2.html">http://docs.activestate.com/activeperl/5.10/faq/ActivePerl-faq2.html</a></span>
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; I do not get the issue on calling GetNetworkParams:
</div></div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; Though in the debugger session you copied in this e-mail you didn&#39;t
&gt; call it...
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
&gt; 
&gt; 
&gt; [Douglas Gray Stephens]
&gt; 
&gt; Sorry, you are
&gt; correct, I did not successfully copy and paste the 2nd command, so
&gt; that does give the error:
&gt; 
&gt; Wed 27-Jun-12 17:38:10.27
&gt; 
&gt; d:\Douglas&gt;
&gt; perl -d -e 1
&gt; 
&gt; 
&gt; 
&gt; Loading DB routines from perl5db.pl version 1.33
&gt; Editor support available.
&gt; 
&gt; 
&gt; 
&gt; Enter h or `h h&#39; for help, or
&gt; `perldoc perldebug&#39; for more help.
&gt; 
&gt; 
&gt; 
&gt; main::&#40;-e:1&#41;: 1
&gt; 
&gt;   DB&lt;1&gt;
&gt; use Win32::IPHelper
&gt; 
&gt; 
&gt; 
&gt;   DB&lt;2&gt;
&gt; Win32::IPHelper::GetNetworkParams&#40;{}&#41;
&gt; 
&gt; Signal SEGV at &#40;eval
&gt; 14&#41;[D:/Applications/Perl/lib/perl5db.pl:640] line 2
&gt; 
&gt;        eval
&gt; &#39;&#40;$@, $!, $^E, $,, $/, $\\, $^W&#41; = @saved;package main; $^D = $^D |
&gt; $DB::db_stop;
&gt; 
&gt; Win32::IPHelper::GetNetworkParams&#40;{}&#41;;
&gt; 
&gt; 
&gt; 
&gt; ;&#39;
&gt; called at D:/Applications/Perl/lib/perl5db.pl line 640
&gt; DB::eval called at D:/Applications/Perl/lib/perl5db.pl line 3436
&gt; DB::DB called at -e line 1
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; Wed 27-Jun-12 23:18:41.41
&gt; d:\Douglas&gt;
&gt; 
&gt; 
&gt; 
&gt; Regards,
&gt; 
&gt; 
&gt; 
&gt; Douglas
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;   DB&lt;2&gt; use
</div></div>&gt; Win32::IPHelper
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; Are you sure you also tried:
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; Win32::IPHelper::GetNetworkParams&#40;{}&#41;
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; ? Because that is the
</div>&gt; function that is called at line 27 of
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; D:/Applications/Perl/site/lib/Net/DNS/Resolver/Win32.pm
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; Or
</div>&gt; do you see something else on line 27 of that file?
&gt; 
<div class="message-stanza open">&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; Regards,
&gt; &gt;
</div>&gt; 
<div class="message-stanza open">&gt; &gt; -- Willem
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;18&nbsp;10:30:52&nbsp;2012</span>
    <span class="description">NLNETLABS [...] cpan.org -  Dependency on ticket #82090 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;18&nbsp;10:33:22&nbsp;2012</span>
    <span class="description">NLNETLABS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri 29 Jun 2012 10:33:56, NLNETLABS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I suspect the problem lies within Win32::API. Maybe we should create a
&gt; ticket there...
</div>
I have done that. It is ticket 82090. Hopefully they recognize the issue
and do not shift the problem to Win32::IPHelper. Although the culprit
might be at ActiveState...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;20&nbsp;20:21:31&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> Willem [...] NLnetLabs.nl, dgraystephens [...] slb.com, rwfranks [...] acm.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Dec 18 10:33:22 2012, NLNETLABS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri 29 Jun 2012 10:33:56, NLNETLABS wrote:
<div class="message-stanza open">&gt; &gt; I suspect the problem lies within Win32::API. Maybe we should create a
&gt; &gt; ticket there...
</div>&gt; 
&gt; I have done that. It is ticket 82090. Hopefully they recognize the issue
&gt; and do not shift the problem to Win32::IPHelper. Although the culprit
&gt; might be at ActiveState...
</div>
I&#39;ve responded in #82090.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;21&nbsp;10:04:26&nbsp;2012</span>
    <span class="description">NLNETLABS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Douglas,

I have been trying to pinpoint the issue again and it seems it does not
occur anymore after Win32::API is upgraded to version 0.75.

ppm-shell upgrade Win32-API

After that Net::DNS installs fine via cpan

cpan install Net::DNS

It is unfortunate that ActiveState perl ships with such an old version
of Win32::API. Perhaps you wish to file a bug report with them?

Thanks for reporting and regards,

-- Willem
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;21&nbsp;10:04:28&nbsp;2012</span>
    <span class="description">NLNETLABS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
