<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #64751 for Chart-OFC2: tips at values</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #64751 for Chart-OFC2: tips at values</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Chart-OFC2">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Chart-OFC2">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Chart-OFC2">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Chart-OFC2">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Chart-OFC2">Chart-OFC2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">64751</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">patched</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Chart-OFC2">Chart-OFC2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
frederik.jung [...] mcl.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-224870-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-224871-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Menu.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/882752/457434/Menu.pm">
Mon Jan 17 12:34:27 2011 (1.4k) by frederik.jung [...] mcl.de
</a>
</font></li>
</ul>


OFC2.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/882752/457432/OFC2.pm">
Mon Jan 17 12:34:27 2011 (10.8k) by frederik.jung [...] mcl.de
</a>
</font></li>
</ul>


PieValues.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/882752/457433/PieValues.pm">
Mon Jan 17 12:34:27 2011 (2.8k) by frederik.jung [...] mcl.de
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/881239/456558/PieValues.pm">
Thu Jan 13 13:41:59 2011 (2.5k) by frederik.jung [...] mcl.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=64751">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-881239" href="/Public/Bug/Display.html?id=64751#txn-881239">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;13&nbsp;13:41:59&nbsp;2011</span>
    <span class="description">frederik.jung [...] mcl.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tips at values</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/881239/456557/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/456557">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 125b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">hi,

you have forget that you also can add &#39;tips&#39; to values.
I&#39;ve added.

it would be cool if you could change it.

thank you
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> PieValues.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/881239/456558/PieValues.pm">Download PieValues.pm</a><br />
<span class="downloadcontenttype">text/x-perl 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Chart::OFC2::PieValues;

=head1 NAME

Chart::OFC2::PieValues - OFC2 values for pie charts object

=head1 SYNOPSIS

=head1 DESCRIPTION

=cut

use Moose;
use Moose::Util::TypeConstraints;
use MooseX::StrictConstructor;

use Carp::Clan &#39;croak&#39;;
use List::MoreUtils &#39;any&#39;;

our $VERSION = &#39;0.07&#39;;

coerce &#39;Chart::OFC2::PieValues&#39;
    =&gt; from &#39;ArrayRef&#39;
    =&gt; via { Chart::OFC2::PieValues-&gt;_new_from_arrayref&#40;$_&#41; };

=head1 PROPERTIES

    has &#39;values&#39; =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;
    has &#39;texts&#39;  =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;,  &#41;;
	has &#39;tips&#39;    =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;

=cut

has &#39;values&#39;  =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#39;required&#39; =&gt; 1&#41;;
has &#39;labels&#39;  =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;,  &#41;;
has &#39;colours&#39; =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;
has &#39;tips&#39;    =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;


=head1 METHODS

=head2 new&#40;&#41;

Object constructor.

=head1 _new_from_arrayref

Allow object creation by coerce of ArrayRef.

=cut

sub _new_from_arrayref {
    my $class           = shift;
    my $arrayref_values = shift;
    
    croak &#39;pass ArrayRef as argument&#39;
        if not ref $arrayref_values ne &#39;ArrayRef&#39;;
    
    my &#40;@values, @labels, @colours, @tips&#41;;
    foreach my $value &#40;@{$arrayref_values}&#41; {
        if &#40;ref $value eq &#39;HASH&#39;&#41; {
            push @values,  $value-&gt;{&#39;value&#39;};
            push @labels,  $value-&gt;{&#39;label&#39;};
            push @colours, $value-&gt;{&#39;colour&#39;};
			push @tips,    $value-&gt;{&#39;tip&#39;};
        }
        else {
            push @values, $value;
            push @labels, undef;
            push @colours, undef;
			push @tips, undef;
        }
    }
    
    return $class-&gt;new&#40;
        &#39;values&#39;  =&gt; \@values,
        &#39;labels&#39;  =&gt; \@labels,
        &#39;tips&#39;  =&gt; \@tips,
        &#40;&#40;any { defined $_ } @colours&#41; ? &#40;&#39;colours&#39; =&gt; \@colours&#41; : &#40;&#41;&#41;
    &#41;;
}

=head2 TO_JSON&#40;&#41;

Returns HashRef that is possible to give to C&lt;encode_json&#40;&#41;&gt; function.

=cut

sub TO_JSON {
    my &#40;$self&#41; = @_;
    
    my @values_with_labels;
    my @values = @{$self-&gt;values};
    my @labels = @{$self-&gt;labels};
    my @tips = @{$self-&gt;tips};
    for &#40;my $i = 0; $i &lt; @values; $i++&#41; {
		my $value;
		if &#40;defined&#40;$labels[$i]&#41; || defined&#40;$tips[$i]&#41;&#41; {
			$value = { value =&gt; $values[$i] };
			$value-&gt;{label} = $labels[$i] if defined&#40;$labels[$i]&#41;;
			$value-&gt;{tip} = $tips[$i] if defined&#40;$tips[$i]&#41;;
		} else {
			$value = $values[$i];
		}
        push&#40;@values_with_labels, $value&#41;;
    }
    
    return \@values_with_labels;
}

__PACKAGE__-&gt;meta-&gt;make_immutable;

1;


__END__

=head1 AUTHOR

Jozef Kutej

=cut
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-882107" href="/Public/Bug/Display.html?id=64751#txn-882107">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;15&nbsp;16:41:01&nbsp;2011</span>
    <span class="description">jozef [...] kutej.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/882107/457034/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/457034">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 255b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;ll have a look and keep you posted.

Thank you,
Jozef

On Thu Jan 13 13:41:59 2011, frederik.jung wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; hi,
&gt; 
&gt; you have forget that you also can add &#39;tips&#39; to values.
&gt; I&#39;ve added.
&gt; 
&gt; it would be cool if you could change it.
&gt; 
&gt; thank you
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-882110" href="/Public/Bug/Display.html?id=64751#txn-882110">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;15&nbsp;16:41:02&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-882752" href="/Public/Bug/Display.html?id=64751#txn-882752">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;17&nbsp;12:34:27&nbsp;2011</span>
    <span class="description">frederik.jung [...] mcl.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> frederik.jung [...] mcl.de</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/882752/457431/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/457431">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 435b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

i have added the click event and the chart menu.

can you look at this too.

thanx
Frederik

Am Sa 15. Jan 2011, 16:41:01, JKUTEJ schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I&#39;ll have a look and keep you posted.
&gt; 
&gt; Thank you,
&gt; Jozef
&gt; 
&gt; On Thu Jan 13 13:41:59 2011, frederik.jung wrote:
<div class="message-stanza open">&gt; &gt; hi,
&gt; &gt; 
&gt; &gt; you have forget that you also can add &#39;tips&#39; to values.
&gt; &gt; I&#39;ve added.
&gt; &gt; 
&gt; &gt; it would be cool if you could change it.
&gt; &gt; 
&gt; &gt; thank you
</div>&gt; 
</div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> OFC2.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/882752/457432/OFC2.pm">Download OFC2.pm</a><br />
<span class="downloadcontenttype">text/x-perl 10.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Chart::OFC2;

=encoding utf8

=head1 NAME

Chart::OFC2 - Generate html and data files for use with Open Flash Chart version 2

=head1 SYNOPSIS

OFC2 html:

    use Chart::OFC2;

    my $chart = Chart::OFC2-&gt;new&#40;
        &#39;title&#39;  =&gt; &#39;Bar chart test&#39;,
    &#41;;
    print $chart-&gt;render_swf&#40;600, 400, &#39;chart-data.json&#39;, &#39;test-chart&#39;&#41;;

OFC2 bar chart data:

    use Chart::OFC2;
    use Chart::OFC2::Axis;
    use Chart::OFC2::Bar;

    my $chart = Chart::OFC2-&gt;new&#40;
        &#39;title&#39;  =&gt; &#39;Bar chart test&#39;,
        x_axis =&gt; {
            labels =&gt; {
                labels =&gt; [ &#39;Jan&#39;, &#39;Feb&#39;, &#39;Mar&#39;, &#39;Apr&#39;, &#39;May&#39; ],
            }
        },
    &#41;;

    my $bar = Chart::OFC2::Bar-&gt;new&#40;&#41;;
    $bar-&gt;values&#40;[ 1..5 ]&#41;;
    $chart-&gt;add_element&#40;$bar&#41;;

    print $chart-&gt;render_chart_data&#40;&#41;;

=head1 WARNING

Current version implements just subset of functionality that Open Flash
Chart 2 is offering. But it should help you to starting creating OFC2
graphs quite fast. The JSON format is quite intuitive and can be created
from any hash. This module is more like guideline.

This is early version B&lt;PROTOTYPE&gt; so the API B&lt;WILL&gt; change, be careful when upgrading
versions.

=head1 DESCRIPTION

OFC2 is a flash script for creating graphs. To have a graph we need an
F&lt;open-flash-chart.swf&gt; and a JSON data file describing graph data.
Complete examples you can find after successful run of this module
tests in F&lt;t/output/&gt; folder - F&lt;t/output/bar.html&gt;, F&lt;t/output/pie.html&gt;,
F&lt;t/output/hbar.html&gt; are html graphs and F&lt;t/output/bad-data.json&gt;,
F&lt;t/output/pie-data.json&gt;, F&lt;t/output/hbar-data.json&gt; are the data files.

=cut


use Moose;
use Moose::Util::TypeConstraints;
use MooseX::StrictConstructor;
use MooseX::Aliases;

our $VERSION = &#39;0.07&#39;;

use Carp::Clan &#39;croak&#39;;
use JSON::XS qw&#40;&#41;;

use Chart::OFC2::Axis;
use Chart::OFC2::Bar;
use Chart::OFC2::Title;
use Chart::OFC2::Extremes;
use Chart::OFC2::ToolTip;
use Chart::OFC2::Menu;
use List::Util &#39;min&#39;, &#39;max&#39;;
use List::MoreUtils &#39;any&#39;;

=head1 PROPERTIES

    has &#39;data_load_type&#39; =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;,  default =&gt; &#39;inline_js&#39;&#41;;
    has &#39;bootstrap&#39;      =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Bool&#39;, default =&gt; &#39;1&#39;&#41;;
    has &#39;title&#39;          =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::Title&#39;, default =&gt; sub { Chart::OFC2::Title-&gt;new&#40;&#41; }, lazy =&gt; 1, coerce  =&gt; 1&#41;;
    has &#39;x_axis&#39;         =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::XAxis&#39;, default =&gt; sub { Chart::OFC2::XAxis-&gt;new&#40;&#41; }, lazy =&gt; 1,&#41;;
    has &#39;y_axis&#39;         =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::YAxis&#39;, default =&gt; sub { Chart::OFC2::YAxis-&gt;new&#40;&#41; }, lazy =&gt; 1, &#41;;
    has &#39;elements&#39;       =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, default =&gt; sub{[]}, lazy =&gt; 1&#41;;
    has &#39;extremes&#39;       =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::Extremes&#39;,  default =&gt; sub { Chart::OFC2::Extremes-&gt;new&#40;&#41; }, lazy =&gt; 1&#41;;
    has &#39;tooltip&#39;        =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::ToolTip&#39;,&#41;;
    has &#39;bg_colour&#39;      =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;,  default =&gt; &#39;f8f8d8&#39;, alias =&gt; &#39;bg_color&#39; &#41;;

=cut

has &#39;data_load_type&#39; =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;,  default =&gt; &#39;inline_js&#39;&#41;;
has &#39;bootstrap&#39;      =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Bool&#39;, default =&gt; &#39;1&#39;&#41;;
has &#39;title&#39;          =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::Title&#39;, default =&gt; sub { Chart::OFC2::Title-&gt;new&#40;&#41; }, lazy =&gt; 1, coerce  =&gt; 1&#41;;
has &#39;x_axis&#39;         =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::XAxis&#39;, default =&gt; sub { Chart::OFC2::XAxis-&gt;new&#40;&#41; }, lazy =&gt; 1, coerce  =&gt; 1&#41;;
has &#39;y_axis&#39;         =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::YAxis&#39;, default =&gt; sub { Chart::OFC2::YAxis-&gt;new&#40;&#41; }, lazy =&gt; 1, coerce  =&gt; 1&#41;;
has &#39;elements&#39;       =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, default =&gt; sub{[]}, lazy =&gt; 1&#41;;
has &#39;extremes&#39;       =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::Extremes&#39;,  default =&gt; sub { Chart::OFC2::Extremes-&gt;new&#40;&#41; }, lazy =&gt; 1&#41;;
has &#39;_json&#39;          =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Object&#39;,  default =&gt; sub { JSON::XS-&gt;new-&gt;pretty&#40;1&#41;-&gt;convert_blessed&#40;1&#41; }, lazy =&gt; 1&#41;;
has &#39;tooltip&#39;        =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::ToolTip&#39;, coerce  =&gt; 1&#41;;
has &#39;menu&#39;        	 =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Chart::OFC2::Menu&#39;, coerce  =&gt; 1&#41;;
has &#39;bg_colour&#39;      =&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;,  default =&gt; &#39;f8f8d8&#39;, alias =&gt; &#39;bg_color&#39; &#41;;

=head1 METHODS

=head2 new&#40;&#41;

Object constructor.

=head2 get_element&#40;$type&#41;

Returns new chart object of selected type. Currently only C&lt;bar&gt; and C&lt;pie&gt;
is available.

=cut

# elements are the data series items, usually containing values to plot
sub get_element {
    my &#40;$self, $element_name&#41; = @_;

    my $element_module = &#40;
          $element_name eq &#39;bar&#39; ? &#39;Chart::OFC2::Bar&#39;
        : $element_name eq &#39;pie&#39; ? &#39;Chart::OFC2::Pie&#39;
        : undef
    &#41;;
    croak &#39;unsupported element - &#39;, $element_name
        if not defined $element_name;

    return $element_module-&gt;new&#40;&#41;;
}


=head2 add_element&#40;$element&#41;

Adds passed element to the graph.

=cut

sub add_element {
    my &#40;$self, $element&#41; = @_;

    if &#40;$element-&gt;use_extremes&#41; {
        $self-&gt;y_axis-&gt;max&#40;&#39;a&#39;&#41;;
        $self-&gt;y_axis-&gt;min&#40;&#39;a&#39;&#41;;
        $self-&gt;x_axis-&gt;max&#40;&#39;a&#39;&#41;;
        $self-&gt;x_axis-&gt;min&#40;&#39;a&#39;&#41;;
    }

    push&#40;@{ $self-&gt;elements }, $element&#41;;
}


=head2 render_chart_data

Returns stringified JSON encoded graph data.

=cut

sub render_chart_data {
    my $self = shift;

    $self-&gt;auto_extremes&#40;&#41;;

    return $self-&gt;_json-&gt;encode&#40;{
        &#39;title&#39;    =&gt; $self-&gt;title,
        &#39;x_axis&#39;   =&gt; $self-&gt;x_axis,
        &#39;y_axis&#39;   =&gt; $self-&gt;y_axis,
        &#39;tooltip&#39;  =&gt; $self-&gt;tooltip,
		&#39;menu&#39;     =&gt; $self-&gt;menu,
        &#39;elements&#39; =&gt; $self-&gt;elements,
        &#39;bg_colour&#39; =&gt; $self-&gt;bg_colour,
    }&#41;;
}


=head2 auto_extremes

Recalculate graph auto extremes.

=cut

sub auto_extremes {
    my $self = shift;

    foreach my $axis_name &#40;&#39;x_axis&#39;, &#39;y_axis&#39;&#41; {
        my $axis = $self-&gt;$axis_name;
        next if not defined $axis;

        foreach my $axis_type &#40;&#39;min&#39;, &#39;max&#39;&#41; {
            my $axis_value = $axis-&gt;$axis_type;
            if &#40;&#40;defined $axis_value&#41; and &#40;$axis_value eq &#39;a&#39;&#41;&#41; {
                $axis-&gt;$axis_type&#40;$self-&gt;smooth&#40;$axis_name, $axis_type&#41;&#41;;
            }
        }
    }

    return;
}


=head2 render_swf&#40;$width, $height, $data_url, $div_id&#41;

Returns html snippet that will represent one graph in a html document.

WARN: the arguments format will change to C&lt;key =&gt; value&gt; in the next
releases.

=cut

sub render_swf {
    my &#40;$self, $width, $height, $data_url, $div_id&#41; = @_;

    $div_id ||= &#39;my_chart&#39;;

    my $html = &#39;&#39;;

    if &#40;$self-&gt;data_load_type eq &#39;inline_js&#39;&#41; {
        if &#40;$self-&gt;bootstrap&#41; {
            $html .= &#39;&lt;script type=&#34;text/javascript&#34; src=&#34;swfobject.js&#34;&gt;&lt;/script&gt;&#39;;
            $self-&gt;{&#39;skip_bootstrap&#39;} = 1;
        }
        $html .= qq^
            &lt;div id=&#34;$div_id&#34;&gt;&lt;/div&gt;
            &lt;script type=&#34;text/javascript&#34;&gt;
                swfobject.embedSWF&#40;
                    &#34;open-flash-chart.swf&#34;, &#34;$div_id&#34;, &#34;$width&#34;, &#34;$height&#34;,
                    &#34;9.0.0&#34;, &#34;expressInstall.swf&#34;,
                    {&#34;data-file&#34;:&#34;$data_url&#34;}
                &#41;;
            &lt;/script&gt;
        ^;
    }
    else {
        $html .= qq^
            &lt;object
                classid=&#34;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&#34;
                codebase=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0&#34;">http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0&#34;</a></span>
                width=&#34;$width&#34;
                height=&#34;$height&#34;
                id=&#34;graph_2&#34;
                align=&#34;middle&#34;&gt;
            &lt;param name=&#34;allowScriptAccess&#34; value=&#34;sameDomain&#34; /&gt;
            &lt;param name=&#34;movie&#34; value=&#34;open-flash-chart.swf?width=$width&#38;height=$height&#38;data=$data_url&#34;/&gt;
            &lt;param name=&#34;quality&#34; value=&#34;high&#34; /&gt;
            &lt;param name=&#34;bgcolor&#34; value=&#34;#FFFFFF&#34; /&gt;
            &lt;embed
                src=&#34;open-flash-chart.swf?width=$width&#38;height=$height&#38;data=$data_url&#34;
                quality=&#34;high&#34;
                bgcolor=&#34;#FFFFFF&#34;
                width=&#34;$width&#34;
                height=&#34;$height&#34;
                name=&#34;open-flash-chart&#34;
                align=&#34;middle&#34;
                allowScriptAccess=&#34;sameDomain&#34;
                type=&#34;application/x-shockwave-flash&#34;
                pluginspage=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.macromedia.com/go/getflashplayer">http://www.macromedia.com/go/getflashplayer</a></span>&#34;
            /&gt;
            &lt;/object&gt;
        ^;
    }

    return $html;
}


=head1 FUNCTIONS

=head2 smoother_number

round the number up a bit to a nice round number also changes number to an int

=cut

sub smoother_number {
    my $number  = shift;
    my $min_max = shift;
    my $n       = $number;

    return
        if not defined $number;

    if &#40;$min_max eq &#39;max&#39;&#41; {
        $n += 1;
    }
    else {
        $n -= 1;
    }
    if &#40;$n &lt;= 10&#41; { $n = int&#40;$n&#41; }
    elsif &#40;$n &lt; 30&#41;    { $n = $n + &#40;-$n % 5&#41; }
    elsif &#40;$n &lt; 100&#41;   { $n = $n + &#40;-$n % 10&#41; }
    elsif &#40;$n &lt; 500&#41;   { $n = $n + &#40;-$n % 50&#41; }
    elsif &#40;$n &lt; 1000&#41;  { $n = $n + &#40;-$n % 100&#41; }
    elsif &#40;$n &lt; 10000&#41; { $n = $n + &#40;-$n % 200&#41; }
    else               { $n = $n + &#40;-$n % 500&#41; }
    return int&#40;$n&#41;;
}


=head2 smooth&#40;$axis_name, $axis_type&#41;

Smooth axis min/max.

=cut

sub smooth {
    my $self      = shift;
    my $axis_name = shift;
    my $axis_type = shift;

    my $extremes_name = $axis_name.&#39;_&#39;.$axis_type;
    my $cmp_function  = &#40;$axis_type eq &#39;min&#39; ? \&#38;min : \&#38;max&#41;;

    my $number;
    foreach my $element &#40;@{$self-&gt;elements}&#41; {
        my $element_number = $element-&gt;extremes-&gt;$extremes_name;

        next
            if not defined $element_number;
        $number = $element_number
            if not defined $number;
        $number = $cmp_function-&gt;&#40;$number, $element_number&#41;;
    }

    return smoother_number&#40;$number, $axis_type&#41;;
}

=head2 bg_color&#40;&#41;

Same as bg_colour&#40;&#41;.

=cut

sub bg_color {
    &#38;bg_colour;
}

__PACKAGE__-&gt;meta-&gt;make_immutable;

1;


__END__

=head1 NOTE

Refresh button will not cause the data file of the graph to be reloaded
so either use proper expiration settings for it or change the name of the
file in html every time you generate new data. Like C&lt;&#34;data.json?&#34;.time&#40;&#41;&gt;.

=head1 SEE ALSO

L&lt;Chart::OFC&gt;, L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://teethgrinder.co.uk/open-flash-chart-2/">http://teethgrinder.co.uk/open-flash-chart-2/</a></span>&gt;, L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/jozef/chart-ofc2/">http://github.com/jozef/chart-ofc2/</a></span>&gt;

=head1 AUTHOR

Jozef Kutej C&lt;&lt; &lt;jkutej@cpan.org&gt; &gt;&gt;

I&#39;ve used some of the code from the F&lt;perl-ofc-library/open_flash_chart.pm&gt;
that is shipped together with all the rest OFC2 files.

=head1 CONTRIBUTORS

The following people have contributed to the Chart::OFC2 by commiting their
code, sending patches, reporting bugs, asking questions, suggesting useful
advices, nitpicking, chatting on IRC or commenting on my blog &#40;in no particular
order&#41;:

    Rodney Webster
    John Goulah C&lt;&lt; &lt;jgoulah@cpan.org&gt; &gt;&gt;
    NoÃ« Snaterse
    Adam J. Foxson C&lt;&lt; &lt;atom@cpan.org&gt; &gt;&gt;
    Jeff Tam

=head1 SUPPORT

=over 4

=item * Mailinglist

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://lists.meon.sk/mailman/listinfo/chart-ofc2">http://lists.meon.sk/mailman/listinfo/chart-ofc2</a></span>&gt;

=item * GitHub: issues

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/jozef/chart-ofc2/issues">http://github.com/jozef/chart-ofc2/issues</a></span>&gt;

=item * RT: CPAN&#39;s request tracker

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=Chart-OFC2">http://rt.cpan.org/NoAuth/Bugs.html?Dist=Chart-OFC2</a></span>&gt;

=item * AnnoCPAN: Annotated CPAN documentation

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://annocpan.org/dist/Chart-OFC2">http://annocpan.org/dist/Chart-OFC2</a></span>&gt;

=item * CPAN Ratings

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://cpanratings.perl.org/d/Chart-OFC2">http://cpanratings.perl.org/d/Chart-OFC2</a></span>&gt;

=item * Search CPAN

L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/Chart-OFC2">http://search.cpan.org/dist/Chart-OFC2</a></span>&gt;

=back

=head1 COPYRIGHT AND LICENSE

GNU GPL

=cut
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> PieValues.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/882752/457433/PieValues.pm">Download PieValues.pm</a><br />
<span class="downloadcontenttype">text/x-perl 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Chart::OFC2::PieValues;

=head1 NAME

Chart::OFC2::PieValues - OFC2 values for pie charts object

=head1 SYNOPSIS

=head1 DESCRIPTION

=cut

use Moose;
use Moose::Util::TypeConstraints;
use MooseX::StrictConstructor;

use Carp::Clan &#39;croak&#39;;
use List::MoreUtils &#39;any&#39;;

our $VERSION = &#39;0.07&#39;;

coerce &#39;Chart::OFC2::PieValues&#39;
    =&gt; from &#39;ArrayRef&#39;
    =&gt; via { Chart::OFC2::PieValues-&gt;_new_from_arrayref&#40;$_&#41; };

=head1 PROPERTIES

    has &#39;values&#39; =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;
    has &#39;texts&#39;  =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;,  &#41;;
	has &#39;tips&#39;   =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;
	has &#39;clicks&#39; =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;

=cut

has &#39;values&#39;  =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#39;required&#39; =&gt; 1&#41;;
has &#39;labels&#39;  =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;,  &#41;;
has &#39;colours&#39; =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;
has &#39;tips&#39;    =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;
has &#39;clicks&#39;  =&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#41;;


=head1 METHODS

=head2 new&#40;&#41;

Object constructor.

=head1 _new_from_arrayref

Allow object creation by coerce of ArrayRef.

=cut

sub _new_from_arrayref {
    my $class           = shift;
    my $arrayref_values = shift;

    croak &#39;pass ArrayRef as argument&#39;
        if not ref $arrayref_values ne &#39;ArrayRef&#39;;

    my &#40;@values, @labels, @colours, @tips, @clicks&#41;;
    foreach my $value &#40;@{$arrayref_values}&#41; {
        if &#40;ref $value eq &#39;HASH&#39;&#41; {
            push @values,  $value-&gt;{&#39;value&#39;};
            push @labels,  $value-&gt;{&#39;label&#39;};
            push @colours, $value-&gt;{&#39;colour&#39;};
			push @tips,    $value-&gt;{&#39;tip&#39;};
			push @clicks,  $value-&gt;{&#39;click&#39;};
        }
        else {
            push @values, $value;
            push @labels, undef;
            push @colours, undef;
			push @tips, undef;
			push @clicks, undef;
        }
    }

    return $class-&gt;new&#40;
        &#39;values&#39;  =&gt; \@values,
        &#39;labels&#39;  =&gt; \@labels,
        &#39;tips&#39;    =&gt; \@tips,
        &#39;clicks&#39;  =&gt; \@clicks,
        &#40;&#40;any { defined $_ } @colours&#41; ? &#40;&#39;colours&#39; =&gt; \@colours&#41; : &#40;&#41;&#41;
    &#41;;
}

=head2 TO_JSON&#40;&#41;

Returns HashRef that is possible to give to C&lt;encode_json&#40;&#41;&gt; function.

=cut

sub TO_JSON {
    my &#40;$self&#41; = @_;

    my @values_with_labels;
    my @values = @{$self-&gt;values};
    my @labels = @{$self-&gt;labels};
    my @tips = @{$self-&gt;tips};
    my @clicks = @{$self-&gt;clicks};
    for &#40;my $i = 0; $i &lt; @values; $i++&#41; {
		my $value;
		if &#40;defined&#40;$labels[$i]&#41; || defined&#40;$tips[$i]&#41; || defined&#40;$clicks[$i]&#41;&#41; {
			$value = { value =&gt; $values[$i] };
			$value-&gt;{label} = $labels[$i] if defined&#40;$labels[$i]&#41;;
			$value-&gt;{tip} = $tips[$i] if defined&#40;$tips[$i]&#41;;
			$value-&gt;{&#39;on-click&#39;} = $clicks[$i] if defined&#40;$clicks[$i]&#41;;
		} else {
			$value = $values[$i];
		}
        push&#40;@values_with_labels, $value&#41;;
    }

    return \@values_with_labels;
}

__PACKAGE__-&gt;meta-&gt;make_immutable;

1;


__END__

=head1 AUTHOR

Jozef Kutej

=cut
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Menu.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/882752/457434/Menu.pm">Download Menu.pm</a><br />
<span class="downloadcontenttype">text/x-perl 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package Chart::OFC2::Menu;

=head1 NAME

Chart::OFC2::Menu - OFC2 menu object

=head1 SYNOPSIS

    use Chart::OFC2;
    use Chart::OFC2::Menu;

    $chart = Chart::OFC2-&gt;new&#40;
        &#39;menu&#39;  =&gt; Chart::OFC2::Menu-&gt;new&#40;
			values			=&gt; [
				{&#34;type&#34;:&#34;camera-icon&#34;,&#34;text&#34;:&#34;Hello&#34;,&#34;javascript-function&#34;:&#34;save_image&#34;},
				{&#34;type&#34;:&#34;camera-icon&#34;,&#34;text&#34;:&#34;Toggle old data&#34;,&#34;javascript-function&#34;:&#34;toggle&#34;}
			],
			colour			=&gt; &#34;#E0E0ff&#34;,
			outline_colour	=&gt;&#34;#707070&#34;
        &#41;,
    &#41;;

=head1 DESCRIPTION

=cut

use Moose;
use Moose::Util::TypeConstraints;
use MooseX::StrictConstructor;

our $VERSION = &#39;0.07&#39;;

coerce &#39;Chart::OFC2::Menu&#39;
    =&gt; from &#39;HashRef&#39;
    =&gt; via { Chart::OFC2::Menu-&gt;new&#40;$_&#41; };


=head1 PROPERTIES

	has &#39;values&#39;			=&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#39;required&#39; =&gt; 1&#41;;
	has &#39;colour&#39;			=&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;, &#41;;
	has &#39;outline_colour&#39;	=&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;, &#41;;

=cut

has &#39;values&#39;			=&gt; &#40; is =&gt; &#39;rw&#39;, isa =&gt; &#39;ArrayRef&#39;, &#39;required&#39; =&gt; 1&#41;;
has &#39;colour&#39;			=&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;, &#41;;
has &#39;outline_colour&#39;	=&gt; &#40;is =&gt; &#39;rw&#39;, isa =&gt; &#39;Str&#39;, &#41;;


=head1 METHODS

=head2 new&#40;&#41;

Object constructor.

=head2 TO_JSON&#40;&#41;

Returns HashRef that is possible to give to C&lt;encode_json&#40;&#41;&gt; function.

=cut

sub TO_JSON {
    my $self = shift;

    return {
        map  { my $v = $self-&gt;$_; &#40;defined $v ? &#40;$_ =&gt; $v&#41; : &#40;&#41;&#41; }
        map  { $_-&gt;name }
        $self-&gt;meta-&gt;get_all_attributes
    };
}

__PACKAGE__-&gt;meta-&gt;make_immutable;

1;


__END__

=head1 AUTHOR

Frederik Jung

=cut
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-886889" href="/Public/Bug/Display.html?id=64751#txn-886889">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;25&nbsp;11:02:16&nbsp;2011</span>
    <span class="description">jozef [...] kutej.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/886889/459688/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/459688">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 534b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Frederik,

your changes are committed to branch RT64751:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jozef/chart-ofc2/commit/be009caa81b095709934f5e729d75495575db43d">https://github.com/jozef/chart-ofc2/commit/be009caa81b095709934f5e729d75495575db43d</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jozef/chart-ofc2/commit/70814c11e8151515b71681d8c9b0382502d7fcbe">https://github.com/jozef/chart-ofc2/commit/70814c11e8151515b71681d8c9b0382502d7fcbe</a></span>

Please let me know if you have any other changes and if not I&#39;ll write
some tests and merge the changes to the master.

Thank you!
Jozef

On Mon Jan 17 12:34:27 2011, frederik.jung wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; i have added the click event and the chart menu.
&gt; 
&gt; can you look at this too.
&gt; 
&gt; thanx
&gt; Frederik
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-888230" href="/Public/Bug/Display.html?id=64751#txn-888230">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;27&nbsp;12:10:34&nbsp;2011</span>
    <span class="description">jozef [...] kutej.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/888230/460391/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/460391">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 126b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Frederik,

I&#39;ve just uploaded 0.08_02 development version to the CPAN that is
including your changes.

Best regards,
Jozef
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-888233" href="/Public/Bug/Display.html?id=64751#txn-888233">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;27&nbsp;12:10:35&nbsp;2011</span>
    <span class="description">jozef [...] kutej.net -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.48619</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
