<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #62266 for YAML-LibYAML: Bleadperl fb85c04 breaks CPAN</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #62266 for YAML-LibYAML: Bleadperl fb85c04 breaks CPAN</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/YAML-LibYAML/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/YAML-LibYAML/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/YAML-LibYAML/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/YAML-LibYAML/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/ingydotnet/yaml-libyaml-pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/YAML-LibYAML">YAML-LibYAML CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">62266</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/YAML-LibYAML/Active/">YAML-LibYAML</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-43496-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.34    </td>
  </tr>
  <tr id="CF-43497-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;19&nbsp;01:12:07&nbsp;2010</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bleadperl fb85c04 breaks CPAN</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for the spam. See

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.perl.org/rt3/Ticket/Display.html?id=78008">http://rt.perl.org/rt3/Ticket/Display.html?id=78008</a></span>

for more details.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;28&nbsp;17:15:49&nbsp;2010</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve just uploaded a patch that fixes the failing tests so that it works
both for old and new perls.

<span class="clickylink"><a target="new" rel="nofollow" href="http://cpan.cpantesters.org/authors/id/A/AN/ANDK/patches/YAML-LibYAML-0.34-ANDK-01.patch.gz">http://cpan.cpantesters.org/authors/id/A/AN/ANDK/patches/YAML-LibYAML-0.34-ANDK-01.patch.gz</a></span>

And here is a distroprefs file to enable the CPAN shelel to download and
apply the patch on the fly:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/andk/cpanpm/blob/master/distroprefs/INGY.YAML-LibYAML.yml">https://github.com/andk/cpanpm/blob/master/distroprefs/INGY.YAML-LibYAML.yml</a></span>

Enjoy,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;28&nbsp;17:15:52&nbsp;2010</span>
    <span class="description">ANDK [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;01&nbsp;16:02:12&nbsp;2010</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">And in the meantime I discovered there was another change causing
breakage soon after the first one. So I&#39;m providing a second patch.

<span class="clickylink"><a target="new" rel="nofollow" href="http://cpan.cpantesters.org/authors/id/A/AN/ANDK/patches/YAML-LibYAML-0.34-ANDK-02.patch.gz">http://cpan.cpantesters.org/authors/id/A/AN/ANDK/patches/YAML-LibYAML-0.34-ANDK-02.patch.gz</a></span>

I&#39;ve also adjusted the distroprefs file to reflect both patches

Enjoy,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;04&nbsp;05:31:16&nbsp;2010</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Another ticket for bleadperl is intersecting with YAML::XS:

<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.perl.org/rt3/Ticket/Display.html?id=80212">http://rt.perl.org/rt3/Ticket/Display.html?id=80212</a></span>

At the moment I don&#39;t know how this should be fixed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;11&nbsp;12:47:27&nbsp;2010</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">If demerphq is right, and since nobody contradicts in the ticket I&#39;ve
linked to he probably is, then the is&#40;&#41; tests in regexp.t need to be
replaced by tests that verify that the dumped and re-loaded regexps
work. This makes sense to me and I&#39;m tempted to withdraw my previous
patches and replace them with something that makes more sense in the
light of the recent development.

What does Ingy, what do others think/prefer?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;29&nbsp;14:59:53&nbsp;2011</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I ended up with this patch for our build system.  It just disables those tests that rely on exact 
match, only leaving those tests that verify that dumped and reloaded regexps match as 
expected.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> YAML-LibYAML-03-regexp-t.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From d4caa31ca688ab775f0359f7ede20722b7395f23 Mon Sep 17 00:00:00 2001
From: Gisle Aas &lt;gisle@activestate.com&gt;
Date: Tue, 29 Mar 2011 10:45:10 -0800
Subject: [PATCH] Skip strict match on stringified regexps for perl-5.14

Only leave tests that verify that the regexps can be loaded back
and still match the expected strings.

Ref <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62266">https://rt.cpan.org/Ticket/Display.html?id=62266</a></span>
---
 t/regexp.t |   31 ++++++++++++++++++++++++-------
 1 files changed, 24 insertions&#40;+&#41;, 7 deletions&#40;-&#41;

diff --git a/t/regexp.t b/t/regexp.t
index e6e5477..c2d9db2 100644
--- a/t/regexp.t
+++ b/t/regexp.t
@@ -4,21 +4,27 @@ use Devel::Peek&#40;&#41;;
 my $rx1 = qr/5050/;
 my $yaml1 = Dump $rx1;
 
-is $yaml1, &lt;&lt;&#39;...&#39;, &#39;Regular regexp dumps&#39;;
---- !!perl/regexp &#40;?-xism:5050&#41;
-...
-
 my $rx2 = qr/99999/;
 bless $rx2, &#39;Classy&#39;;
 my $yaml2 = Dump $rx2;
 
+my $rx3 = qr/^edcba/mi;
+my $yaml3 = Dump $rx3;
+
+sub perl514 {
+    # <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62266">https://rt.cpan.org/Ticket/Display.html?id=62266</a></span>
+    skip &#34;perl-5.14 regexp stringification is different&#34;, shift || 1 if $] &gt; 5.013;
+}
+
+SKIP: { perl514 5;
+is $yaml1, &lt;&lt;&#39;...&#39;, &#39;Regular regexp dumps&#39;;
+--- !!perl/regexp &#40;?-xism:5050&#41;
+...
+
 is $yaml2, &lt;&lt;&#39;...&#39;, &#39;Blessed regular regexp dumps&#39;;
 --- !!perl/regexp:Classy &#40;?-xism:99999&#41;
 ...
 
-my $rx3 = qr/^edcba/mi;
-my $yaml3 = Dump $rx3;
-
 is $yaml3, &lt;&lt;&#39;...&#39;, &#39;Regexp with flags dumps&#39;;
 --- !!perl/regexp &#40;?mi-xs:^edcba&#41;
 ...
@@ -37,27 +43,38 @@ my $yaml5 = Dump $rx5;
 is $yaml5, &lt;&lt;&#34;...&#34;, &#39;Unicode regexp dumps&#39;;
 --- !!perl/regexp &#40;?-xism:\xC4\x80&#41;
 ...
+}
 
 
 my $rx1_ = Load&#40;$yaml1&#41;;
 is ref&#40;$rx1_&#41;, &#39;Regexp&#39;, &#39;Can Load a regular regexp&#39;;
+SKIP: { perl514;
 is $rx1_, &#39;&#40;?-xism:5050&#41;&#39;, &#39;Loaded regexp value is correct&#39;;
+}
 like &#34;404050506060&#34;, $rx1_, &#39;Loaded regexp works&#39;;
 
 my $rx2_ = Load&#40;$yaml2&#41;;
 is ref&#40;$rx2_&#41;, &#39;Classy&#39;, &#39;Can Load a blessed regexp&#39;;
+SKIP: { perl514;
 is $rx2_, &#39;&#40;?-xism:99999&#41;&#39;, &#39;Loaded blessed regexp value is correct&#39;;
+}
 ok &#34;999999999&#34; =~ $rx2_, &#39;Loaded blessed regexp works&#39;;
 
 my $rx3_ = Load&#40;$yaml3&#41;;
 is ref&#40;$rx3_&#41;, &#39;Regexp&#39;, &#39;Can Load a regexp with flags&#39;;
+SKIP: { perl514;
 is $rx3_, &#39;&#40;?mi-xs:^edcba&#41;&#39;, &#39;Loaded regexp with flags value is correct&#39;;
+}
 like &#34;foo\neDcBA\n&#34;, $rx3_, &#39;Loaded regexp with flags works&#39;;
 
 my $rx4_ = Load&#40;&#34;--- !!perl/regexp &#40;?msix:123&#41;\n&#34;&#41;;
 is ref&#40;$rx4_&#41;, &#39;Regexp&#39;, &#39;Can Load a regexp with all flags&#39;;
+SKIP: { perl514;
 is $rx4_, &#39;&#40;?msix:123&#41;&#39;, &#39;Loaded regexp with all flags value is correct&#39;;
+}
 
 my $rx5_ = Load&#40;&#34;--- !!perl/regexp &#40;?msix:\xC4\x80&#41;\n&#34;&#41;;
 is ref&#40;$rx5_&#41;, &#39;Regexp&#39;, &#39;Can Load a unicode regexp&#39;;
+SKIP: { perl514;
 is $rx5_, &#34;&#40;?msix:\x{100}&#41;&#34;, &#39;Loaded unicode regexp value is correct&#39;;
+}
-- 
1.7.0.5

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;12:42:07&nbsp;2011</span>
    <span class="description">ingy [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I applied ANDK&#39;s last patch for now. Going to resolve this. Need to
refactor all tests anyway.

Tested against 5.10.1 and 5.14.0.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;12:42:08&nbsp;2011</span>
    <span class="description">ingy [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
