<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #110807 for JSON-MaybeXS: Troubles JSON::MaybeXS / Cpanel::JSON::XS &#40;HP-UX&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #110807 for JSON-MaybeXS: Troubles JSON::MaybeXS / Cpanel::JSON::XS &#40;HP-UX&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=JSON-MaybeXS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=JSON-MaybeXS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=JSON-MaybeXS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=JSON-MaybeXS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/JSON-MaybeXS">JSON-MaybeXS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">110807</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=JSON-MaybeXS">JSON-MaybeXS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MIK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
DBOOK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-249998-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-249999-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




JSON-MaybeXS-failure.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1578729/843162/JSON-MaybeXS-failure.txt">
Thu Dec 31 12:49:12 2015 (12.7k) by MIK [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=110807">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1578553" href="/Public/Bug/Display.html?id=110807#txn-1578553">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;31&nbsp;03:49:24&nbsp;2015</span>
    <span class="description">MIK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Troubles JSON::MaybeXS / Cpanel::JSON::XS &#40;HP-UX&#41;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1578553/843042/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843042">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 862b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I am currently dealing with some troubles when trying to install JSON-MaybeXS-1.003005 on a HP-UX box &#40;HP-UX B.11.23 PA-RISC&#41;.

Situation:
* I have perl v5.8.3 &#40;which is not important here&#41;
* I have local::lib + cpanm installed
* I have ExtUtils-MakeMaker-7.10 &#40;could be important&#41;
* I run: &#34;cpanm JSON::MaybeXS -v&#34;

The trouble is that Cpanel::JSON::XS fails to install on HP-UX &#40;which is obviously not your fault&#41;.

Although I would expect that Cpanel::JSON::XS is an optional dependency of JSON::MaybeXS &#40;so it is not necessary to be installed&#41; it seems that JSON::MaybeXS for some reason unconditionally requires Cpanel::JSON::XS and &#34;cpanm JSON::MaybeXS -v&#34; always fails.

My expectation is that JSON::MaybeXS will use JSON::PP &#40;which installs fine on the HP-UX box in question&#41; when Cpanel::JSON::XS is not installed and/or fails to install.

--
Karel
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1578714" href="/Public/Bug/Display.html?id=110807#txn-1578714">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;31&nbsp;11:31:27&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1578714/843154/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843154">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-12-31 00:49:24, MIK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I am currently dealing with some troubles when trying to install JSON-
&gt; MaybeXS-1.003005 on a HP-UX box &#40;HP-UX B.11.23 PA-RISC&#41;.
&gt; 
&gt; Situation:
&gt; * I have perl v5.8.3 &#40;which is not important here&#41;
&gt; * I have local::lib + cpanm installed
&gt; * I have ExtUtils-MakeMaker-7.10 &#40;could be important&#41;
&gt; * I run: &#34;cpanm JSON::MaybeXS -v&#34;
&gt; 
&gt; The trouble is that Cpanel::JSON::XS fails to install on HP-UX &#40;which
&gt; is obviously not your fault&#41;.
&gt; 
&gt; Although I would expect that Cpanel::JSON::XS is an optional
&gt; dependency of JSON::MaybeXS &#40;so it is not necessary to be installed&#41;
&gt; it seems that JSON::MaybeXS for some reason unconditionally requires
&gt; Cpanel::JSON::XS and &#34;cpanm JSON::MaybeXS -v&#34; always fails.
&gt; 
&gt; My expectation is that JSON::MaybeXS will use JSON::PP &#40;which installs
&gt; fine on the HP-UX box in question&#41; when Cpanel::JSON::XS is not
&gt; installed and/or fails to install.
&gt; 
</div>
Cpanel::JSON::XS is in the &#39;recommends&#39; section of the prereqs, which your client may be configured to install as well.

can you provide the build log?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1578715" href="/Public/Bug/Display.html?id=110807#txn-1578715">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;31&nbsp;11:31:28&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1578729" href="/Public/Bug/Display.html?id=110807#txn-1578729">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;31&nbsp;12:49:12&nbsp;2015</span>
    <span class="description">MIK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1578729/843161/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843161">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 232b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, Cpanel::JSON::XS seems to be in the &#39;recommends&#39; section, however there is some &#34;magic&#34; in Makefile.PL which puts it in PREREQ_PM.

See <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/JSON-MaybeXS-1.003005/Makefile.PL#L99">https://metacpan.org/source/ETHER/JSON-MaybeXS-1.003005/Makefile.PL#L99</a></span>

Build log attached
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> JSON-MaybeXS-failure.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1578729/843162/JSON-MaybeXS-failure.txt">Download JSON-MaybeXS-failure.txt</a><br />
<span class="downloadcontenttype">text/plain 12.7k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1578803" href="/Public/Bug/Display.html?id=110807#txn-1578803">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;31&nbsp;22:03:23&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1578803/843210/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843210">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 728b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-12-31 00:49:24, MIK wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My expectation is that JSON::MaybeXS will use JSON::PP &#40;which installs
&gt; fine on the HP-UX box in question&#41; when Cpanel::JSON::XS is not
&gt; installed and/or fails to install.
</div>
Unfortunately, the toolchain is not able to do that &#40;attempt to install X, but if X fails, fall back to Y&#41; -- the prereqs are determined in advance and cannot be changed after attempting to install them.

You can however work around the problem in this particular case, either by installing JSON::XS &#40;assuming it doesn&#39;t have the same compilation difficulties as Cpanel::JSON::XS&#41;, or by signalling that you don&#39;t want the XS component installed, with the PUREPERL_ONLY argument:

  perl Makefile.PL PUREPERL_ONLY=1
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1579206" href="/Public/Bug/Display.html?id=110807#txn-1579206">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;02&nbsp;09:21:28&nbsp;2016</span>
    <span class="description">miko [...] dcit.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #110807] Troubles JSON::MaybeXS / Cpanel::JSON::XS &#40;HP-UX&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 2 Jan 2016 15:21:06 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-MaybeXS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karel Miko &lt;miko [...] dcit.cz&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1579206/843451/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843451">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfortunately, the toolchain is not able to do that &#40;attempt to 
&gt; install X, but if X fails, fall back to Y&#41; -- the prereqs are 
&gt; determined in advance and cannot be changed after attempting to install 
</div>them.

That is true. But in my opinion it is not Makefile.PL&#39;s business to do 
this kind of &#34;detection&#34; it should be left to CPAN client &#40;like &#34;cpanm&#34;&#41; 
to decide.

In other words I think that JSON::MaybeXS should only declare proper: 
&#34;recommends&#34; and/or &#34;suggests&#34; items in Makefile.PL and meta.&#40;yml|json&#41; 
and that&#39;s all. Based on these &#34;recommends&#34;/&#34;suggests&#34; values CPAN client 
should decide what modules it will try to install and want installation 
failure can be ignored because they are only optional dependencies.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You can however work around the problem in this particular case, 
&gt; either by installing JSON::XS &#40;assuming it doesn&#39;t have the same 
&gt; compilation difficulties as Cpanel::JSON::XS&#41;, or by signalling that
&gt; you don&#39;t want the XS component installed, with the PUREPERL_ONLY 
</div>argument:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt;   perl Makefile.PL PUREPERL_ONLY=1
</div>
Thanks for the workaround, it works. But it is a good workaround for 
JSON::MaybeXS users not for an author of module depending on 
JSON::MaybeXS.

In my case I am an author of &#39;CryptX&#39; module and I used to use dependency 
on &#39;JSON&#39; module. Couple of months ago I got a pull request that it might 
be a good idea to switch to &#39;JSON::MaybeXS&#39; as it will use faster JSOM 
implementations when available. So I have switched &#39;CryptX&#39; to 
&#39;JSON::MaybeXS&#39; as according the documentation it looked good and worked 
on &#34;common&#34; platforms I use &#40;Windows/Linux&#41;.

Later, there was a user who wanted to install my &#39;CryptX&#39; on a HP-UX 
* so he ran &#39;cpanm CryptX&#39; 
* JSON::MaybeXS was not installed so CPAN client started the installationÂ¨
* now MaybeXS&#39;s Makefile.PL decided that it will forcefully require 
Cpanel::JSON::XS
* Cpanel::JSON::XS was not available so CPAN client started the 
installation
* unfortunately Cpanel::JSON::XS does not pass tests on HP-UX so it failed
* so JSON::MaybeXS installation failed as well
* so CryptX instalation had not even started as prereqs were not satisfied
* so bad luck

If you look at the scenario above from my point of view &#40;as an author of 
CryptX&#41; being dependant on JSON::MaybeXS is more or less the same as being 
dependant on Cpanel::JSON::XS &#40;which I do not want&#41;.

For sure I can easily switch CryptX back to JSON or JSON::PP and avoid 
JSON::MaybeXS. I only want you to know that despite the fact that the idea 
behind JSON::MaybeXS is good is has some caveats and does not always work 
well.

--
Karel
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1579206/843452/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/843452">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1610784" href="/Public/Bug/Display.html?id=110807#txn-1610784">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;23&nbsp;16:06:10&nbsp;2016</span>
    <span class="description">DBOOK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1610784/861809/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/861809">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jan 02 09:21:28 2016, miko@dcit.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Unfortunately, the toolchain is not able to do that &#40;attempt to 
&gt; &gt; install X, but if X fails, fall back to Y&#41; -- the prereqs are 
&gt; &gt; determined in advance and cannot be changed after attempting to install 
</div>&gt; them.
&gt; 
&gt; That is true. But in my opinion it is not Makefile.PL&#39;s business to do 
&gt; this kind of &#34;detection&#34; it should be left to CPAN client &#40;like &#34;cpanm&#34;&#41; 
&gt; to decide.
&gt; 
&gt; In other words I think that JSON::MaybeXS should only declare proper: 
&gt; &#34;recommends&#34; and/or &#34;suggests&#34; items in Makefile.PL and meta.&#40;yml|json&#41; 
&gt; and that&#39;s all. Based on these &#34;recommends&#34;/&#34;suggests&#34; values CPAN client 
&gt; should decide what modules it will try to install and want installation 
&gt; failure can be ignored because they are only optional dependencies.
&gt; 
</div>
Unfortunately it is not that simple. If CPAN clients implemented &#34;recommends&#34; and &#34;suggests&#34; correctly in general, a &#34;recommends Cpanel::JSON::XS&#34; would be the most correct approach. But this is not the case. Most CPAN clients ignore both recommends and suggests by default, and CPAN.pm still considers failing to install recommends as a failure to install prerequisites, which means it is ill-advised to enable it there usually. cpanm with --with-recommends is mostly sensible, but it&#39;s still not the default, so a &#34;recommends&#34; can&#39;t be relied upon even in that case. JSON::MaybeXS simply *needs* to try to install Cpanel::JSON::XS first in order to be useful &#40;but if it fails to install, this should not be a failure, you are correct&#41;, and the current &#34;recommends&#34; infrastructure is not capable of supporting that properly.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1610788" href="/Public/Bug/Display.html?id=110807#txn-1610788">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;23&nbsp;16:09:13&nbsp;2016</span>
    <span class="description">DBOOK [...] cpan.org -  Cc DBOOK added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1610790" href="/Public/Bug/Display.html?id=110807#txn-1610790">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;23&nbsp;16:15:02&nbsp;2016</span>
    <span class="description">miko [...] dcit.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #110807] Troubles JSON::MaybeXS / Cpanel::JSON::XS &#40;HP-UX&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 23 Mar 2016 21:14:47 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-MaybeXS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karel Miko &lt;miko [...] dcit.cz&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1610790/861815/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/861815">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 342b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; JSON::MaybeXS simply *needs* to try to install Cpanel::JSON::XS first
</div>
The reality is:

JSON::MaybeXS **requires** to install Cpanel::JSON::XS first and if 
Cpanel::JSON::XS fails JSON::MaybeXS fails as well

Feel free to close/postpone/reject this ticket as I have &#34;fixed&#34; this 
issue by removing dependency on JSON::MaybeXS

Regards
Karel
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1610790/861816/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/861816">with headers</a>
<br />
<span class="downloadcontenttype">text/html 563b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1610804" href="/Public/Bug/Display.html?id=110807#txn-1610804">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;23&nbsp;17:47:13&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1610804/861827/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/861827">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 684b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-03-23 13:15:02, miko@dcit.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; JSON::MaybeXS simply *needs* to try to install Cpanel::JSON::XS first
</div>&gt; 
&gt; The reality is:
&gt; 
&gt; JSON::MaybeXS **requires** to install Cpanel::JSON::XS first and if 
&gt; Cpanel::JSON::XS fails JSON::MaybeXS fails as well
&gt; 
&gt; Feel free to close/postpone/reject this ticket as I have &#34;fixed&#34; this 
&gt; issue by removing dependency on JSON::MaybeXS
</div>
One other thing you can do is do the installation in &#34;pure perl only&#34; mode -- e.g. &#34;cpanm &lt;your module&gt; --pureperl&#34;, which will cause JSON::MaybeXS to *not* add Cpanel::JSON::XS as a dependency.

Also, definitely please report this issue to Cpanel::JSON::XS, as its author is quite responsive.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1610820" href="/Public/Bug/Display.html?id=110807#txn-1610820">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;23&nbsp;19:26:45&nbsp;2016</span>
    <span class="description">miko [...] dcit.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #110807] Troubles JSON::MaybeXS / Cpanel::JSON::XS &#40;HP-UX&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 Mar 2016 00:26:34 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-MaybeXS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karel Miko &lt;miko [...] dcit.cz&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1610820/861836/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/861836">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 234b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, definitely please report this issue to Cpanel::JSON::XS, as 
&gt; its author is quite responsive.
</div>
I have created a github issue the same day as I have created this RT:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rurban/Cpanel-JSON-XS/issues/56">https://github.com/rurban/Cpanel-JSON-XS/issues/56</a></span>

--
Karel
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1610820/861837/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/861837">with headers</a>
<br />
<span class="downloadcontenttype">text/html 489b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1674418" href="/Public/Bug/Display.html?id=110807#txn-1674418">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;14:56:54&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1674418/898583/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/898583">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 239b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t think there&#39;s anything more we can do at this level -- cpan clients don&#39;t currently have a fallback mechanism to handle the case where optional prereqs fail their tests.  Hopefully Cpanel::JSON::XS will resolve the HPUX issue soon.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1674421" href="/Public/Bug/Display.html?id=110807#txn-1674421">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;14:56:56&nbsp;2016</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1791366" href="/Public/Bug/Display.html?id=110807#txn-1791366">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;16&nbsp;05:03:30&nbsp;2018</span>
    <span class="description">ZARQUON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1791366/963481/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/963481">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 389b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">looks like maybe this issue should be closed <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rurban/Cpanel-JSON-XS/issues/56">https://github.com/rurban/Cpanel-JSON-XS/issues/56</a></span>

On Mon Oct 03 14:56:54 2016, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t think there&#39;s anything more we can do at this level -- cpan
&gt; clients don&#39;t currently have a fallback mechanism to handle the case
&gt; where optional prereqs fail their tests.  Hopefully Cpanel::JSON::XS
&gt; will resolve the HPUX issue soon.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1791367" href="/Public/Bug/Display.html?id=110807#txn-1791367">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;16&nbsp;05:03:31&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1791472" href="/Public/Bug/Display.html?id=110807#txn-1791472">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;16&nbsp;17:47:35&nbsp;2018</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.696421</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
