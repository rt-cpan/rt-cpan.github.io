<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #92797 for REST-Neo4p: Failure after 3 * 681 queries in a row</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #92797 for REST-Neo4p: Failure after 3 * 681 queries in a row</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/REST-Neo4p/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/REST-Neo4p/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/REST-Neo4p/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/REST-Neo4p/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/REST-Neo4p">REST-Neo4p CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">92797</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/REST-Neo4p/Active/">REST-Neo4p</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">maj.fortinbras [...] gmail.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
stesin [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-245446-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.2233    </td>
  </tr>
  <tr id="CF-245447-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.2254    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;07&nbsp;02:34:17&nbsp;2014</span>
    <span class="description">stesin [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Failure after 3 * 681 queries in a row</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Mark,
the problem looks like this. I got a sample file with 10000 triplets of &#40; $lastname, $firstname, $middlename &#41; and some digit with each &#40;say frequency&#41;. Obviously, neither of three are unique, they are spreaded around the sample set. Now I want to make 3 sets &#40;labels&#41; FirstName, LastName and MiddleName where each node is unique. Ok I wrote a dumb and straightforward script which takes a triplet, prettyprints names, foreach name first asks &#34;is a node with it here already?&#34; and if not - creates a node. Both  queries return just COUNT&#40;node&#41;, 1 row of output. I&#39;ll send you sample data and script by mail.
When issueing a query, I check for error. No errors. But after some 681 triplets script fails - it fails, returning &#39;&#39; rows instead of 1. ???
Diagnostics: 681 34 &lt;Луценко&gt;&lt;Володимир&gt;&lt;Іванович&gt;Qry &lt;&lt;MATCH &#40;n:LastName  { name_ua: &#39;Луценко&#39; } &#41; RETURN COUNT&#40;n&#41;&gt;&gt; executed, expected 1 row got &lt;&lt;&gt;&gt;, stopped at Dict_BIG_loader.pl line 98, &lt;&gt; line 684.
This is case 1.
Ok I thought, and just replaced die for printing $numrows of result. This is case 2. At 681 triplet, it starts returning zeros instead of 1&#39;s for $numrows. No error diagnostics! that&#39;s the problem.
Ok I though and surrounded the piece of junkcode with transaction &#40;case 3&#41;. Got 2 rows of output &#40;how? why?&#41; and message &#34;Can&#39;t parse query response &#40;unexpected token looking for next row&#41;&#34; when trying to fetch&#40;&#41; that second row.
Would you mind looking at this, please?
With best regards,
Andrii
p.s. Email with sample data and scripts follows.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;15&nbsp;10:29:50&nbsp;2014</span>
    <span class="description">maj.fortinbras [...] gmail.com -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;17&nbsp;00:43:36&nbsp;2014</span>
    <span class="description">maj.fortinbras [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Andrii-

Ok, I fixed a couple of issues regarding the error reporting and the numrows of zero, these are in 0.2241 &#40;just uploaded&#41;.

The queries stopping after some fixed, not very large number-- this appears to be a server issue. The server actually stops responding &#40;the new error handling should show that now&#41;. I got it with your data and also data I generated. It&#39;s something worth raising with Neo4j, I think I will do that. 

However, there is a very effective workaround I think. If you create your queries one time, but use parameters, and then execute the queries in the loop with parameter values, you can get the script to go to completion. Here you execute&#40;&#41; the same query object many times. I think this will give you better per-query performance as well. 

Attached is your script modified to do this. It ran well for me. Please let me know how it goes-
Mark


On Fri Feb 07 02:34:17 2014, stesin@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Dear Mark,
&gt; the problem looks like this. I got a sample file with 10000 triplets
&gt; of &#40; $lastname, $firstname, $middlename &#41; and some digit with each
&gt; &#40;say frequency&#41;. Obviously, neither of three are unique, they are
&gt; spreaded around the sample set. Now I want to make 3 sets &#40;labels&#41;
&gt; FirstName, LastName and MiddleName where each node is unique. Ok I
&gt; wrote a dumb and straightforward script which takes a triplet,
&gt; prettyprints names, foreach name first asks &#34;is a node with it here
&gt; already?&#34; and if not - creates a node. Both  queries return just
&gt; COUNT&#40;node&#41;, 1 row of output. I&#39;ll send you sample data and script by
&gt; mail.
&gt; When issueing a query, I check for error. No errors. But after some
&gt; 681 triplets script fails - it fails, returning &#39;&#39; rows instead of 1.
&gt; ???
&gt; Diagnostics: 681 34 &lt;Луценко&gt;&lt;Володимир&gt;&lt;Іванович&gt;Qry &lt;&lt;MATCH
&gt; &#40;n:LastName  { name_ua: &#39;Луценко&#39; } &#41; RETURN COUNT&#40;n&#41;&gt;&gt; executed,
&gt; expected 1 row got &lt;&lt;&gt;&gt;, stopped at Dict_BIG_loader.pl line 98, &lt;&gt;
&gt; line 684.
&gt; This is case 1.
&gt; Ok I thought, and just replaced die for printing $numrows of result.
&gt; This is case 2. At 681 triplet, it starts returning zeros instead of
&gt; 1&#39;s for $numrows. No error diagnostics! that&#39;s the problem.
&gt; Ok I though and surrounded the piece of junkcode with transaction
&gt; &#40;case 3&#41;. Got 2 rows of output &#40;how? why?&#41; and message &#34;Can&#39;t parse
&gt; query response &#40;unexpected token looking for next row&#41;&#34; when trying to
&gt; fetch&#40;&#41; that second row.
&gt; Would you mind looking at this, please?
&gt; With best regards,
&gt; Andrii
&gt; p.s. Email with sample data and scripts follows.
</div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Dict_BIG_loader.pl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">$src_fullnames_file = &#34;Dict_FullNames_UA_Top2x10000.txt&#34;;
$src_FirstName1_file = &#34;Dict_FirstNames_UA_2x100.txt&#34;;

$neo4j_url = &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://127.0.0.1:7474">http://127.0.0.1:7474</a></span>&#39;;

use utf8;        use Encode;
use POSIX;       use IO::Handle;
use DateTime;    use DateTime::Locale;   use DateTime::Format::MSSQL;
use Text::Autoformat; use Text::Wrap; $Text::Wrap::columns = 144;
use REST::Neo4p;

system&#40; &#34;chcp 1251&#34; &#41;;
close STDERR; open STDERR, &#39;&gt;:encoding&#40;cp1251&#41;&#39;, &#39;CON:&#39; or die &#34;Open STDERR failed: &#34; . $! . &#34;\n&#34;;
close STDOUT; open STDOUT, &#39;&gt;:encoding&#40;cp1251&#41;&#39;, &#39;PostMortem_Queries.txt&#39; or die &#34;Open STDOUT failed: &#34; . $! . &#34;\n&#34;;

REST::Neo4p-&gt;connect&#40;$neo4j_url&#41; or die &#34;Neo4j connect failed: &#34; . $! . &#34;\n&#34;;
$version = REST::Neo4p-&gt;neo4j_version;
print STDERR &#34;Neo4j v.&#34; . $version . &#34; ready to serve.\n&#34; ;

close STDIN;  open STDIN,  &#39;&lt;:encoding&#40;utf8&#41;&#39;, $src_fullnames_file or die &#34;Open STDIN $src_fullnames_file failed: &#34; . $! . &#34;\n&#34;;
#
# skip 2 header rows
#
&lt;&gt;; &lt;&gt;;
$count = 0;

# create single instances of Query objects with parameters

my %queries;
for &#40;qw/FirstName MiddleName LastName/&#41; {
  $queries{check}{$_} = REST::Neo4p::Query-&gt;new&#40;&#34;MATCH &#40;n:$_&#41; WHERE n.name_ua = {name} RETURN COUNT&#40;n&#41;&#34;&#41;;
  $queries{create}{$_} = REST::Neo4p::Query-&gt;new&#40;&#34;CREATE &#40;n:$_&#41; SET n.name_ua = {name} RETURN COUNT&#40;n&#41;&#34;&#41;;
  $queries{freq}{$_} = REST::Neo4p::Query-&gt;new&#40;&#34;MATCH &#40;f:$_&#41; WHERE f.name_ua = {name} SET f.rating = {rating} RETURN f.rating&#34;&#41;;
} # only 9 total query objects

while&#40; &lt;&gt; &#41; {
	$count++;
	s/^\s+//; chomp; s/\s+/ /g;
	&#40; $no, $fullname, $qq, $dummy0, $dummy1 &#41; = split &#34;\\|&#34; ;
	chomp $no, $fullname, $qq;
	$fullname =~ s/^\s+//;
	$fullname =~ s/\s+$//;
	&#40; $lastname, $firstname, $midname &#41; = split&#40; /\s+/, $fullname &#41;;
	
	$lastname  = autoformat&#40; $lastname,  { case =&gt; &#39;highlight&#39; } &#41;; $lastname =~ s/\s+$//;
	$firstname = autoformat&#40; $firstname, { case =&gt; &#39;highlight&#39; } &#41;; $firstname =~ s/\s+$//;
	$midname   = autoformat&#40; $midname,   { case =&gt; &#39;highlight&#39; } &#41;; $midname =~ s/\s+$//;
	
	printf STDERR &#34;%8d %8d&lt;%20s&gt;&lt;%20s&gt;&lt;%20s&gt;&#34;, $count, $qq, $lastname, $firstname, $midname;

	store_name&#40; $lastname,  &#39;LastName&#39;   &#41;;
	store_name&#40; $firstname, &#39;FirstName&#39;  &#41;;
	store_name&#40; $midname,   &#39;MiddleName&#39; &#41;;
	print STDERR &#34;\n&#34;;
}

close STDIN;  open STDIN,  &#39;&lt;:encoding&#40;utf8&#41;&#39;, $src_FirstName1_file or die &#34;Open STDIN $src_fullnames_file failed: &#34; . $! . &#34;\n&#34;;
#
# skip 2 header rows
#
&lt;&gt;; &lt;&gt;;
$count = 0;
while&#40; &lt;&gt; &#41; {
	$count++;

	s/^\s+//; chomp; s/\s+/ /g;
	&#40; $no, $firstname, $qq, $dummy0, $dummy1 &#41; = split &#34;\\|&#34; ;
	chomp $no, $firstname, $qq;
	$firstname =~ s/^\s+//;
	$firstname =~ s/\s+$//;
	$firstname = autoformat&#40; $firstname, { case =&gt; &#39;highlight&#39; } &#41;; $firstname =~ s/\s+$//;
	
	printf STDERR &#34;%8d %8d&lt;%20s&gt;&#34;, $count, $qq, $firstname;

	store_name&#40; $firstname, &#39;FirstName&#39;  &#41;;

	undef $numrows;
#	$store_freq_qry = &#34;MATCH &#40;f:FirstName { name_ua: &#39;$firstname&#39; } SET f.rating = $qq RETURN f.rating&#34;;
#	$qry_store_freq = REST::Neo4p::Query-&gt;new&#40; $store_freq_qry  &#41; or die &#34;Failed to compile $store_freq_qry, stopped&#34;;
#	$numrows = $qry_store_freq-&gt;execute&#40;&#41;;
	$numrows = $queries{freq}{FirstName}-&gt;execute&#40; name =&gt; $firstname, rating =&gt; $qq &#41;;
	if&#40; $queries{freq}{FirstName}-&gt;err&#40;&#41; &#41; {
		die &#34;Qry &lt;&lt;&#34;.$queries{freq}{FirstName}-&gt;{Statement}.&#34;&gt;&gt; execution failed, code &#34; . $qry_store_freq-&gt;err&#40;&#41; . &#34;, errmsg &#34; . $qry_store_freq-&gt;errstr&#40;&#41; . &#34;, stopped&#34;;
	}
	if&#40; $numrows != 1 &#41; { die &#34;Qry &lt;&lt;&#34;.$queries{freq}{FirstName}-&gt;{Statement}.&#34;&gt;&gt; executed, expected 1 row got &lt;&lt;&#34; . $numrows . &#34;&gt;&gt;, stopped&#34;; };
	while&#40; $numrows &#41; {	$quant = $qry_store_freq-&gt;fetch-&gt;[0]; --$numrows; }

	print STDERR &#34;\n&#34;;

}

exit 0;
	
sub store_name { # name, label
	my $name  = shift;
	my $label = shift;
	undef $numrows;
	undef $quant;

#	$check_name_qry  = &#34;MATCH &#40;n:$label  { name_ua: &#39;$name&#39; } &#41; RETURN COUNT&#40;n&#41;&#34;;
#	$qry_check_name  = REST::Neo4p::Query-&gt;new&#40; $check_name_qry  &#41; or die &#34;Failed to compile $check_name_qry, stopped&#34;;
	# print wrap&#40; &#39;&#39;, &#39;&#39;, $check_lastname_qry, &#34;\n&#34; &#41;; print &#34;\n&#34;;
	#-case 3-
	REST::Neo4p-&gt;begin_work&#40;&#41;;

#	$numrows = $qry_check_name-&gt;execute&#40;&#41;;
	$numrows = $queries{check}{$label}-&gt;execute&#40; name =&gt; $name &#41;;
	if&#40; $queries{check}{$label}-&gt;err&#40;&#41; &#41; {
		die &#34;Qry &lt;&lt;&#34;.$queries{check}{$label}-&gt;{Statement}.&#34;&gt;&gt; execution failed, code &#34; . $qry_check_name-&gt;err&#40;&#41; . &#34;, errmsg &#34; . $queries{check}{$label}-&gt;errstr&#40;&#41; . &#34;, stopped&#34;;
	}

	#-case 1-
	#if&#40; $numrows != 1 &#41; { die &#34;Qry &lt;&lt;$check_name_qry&gt;&gt; executed, expected 1 row got &lt;&lt;&#34; . $numrows . &#34;&gt;&gt;, stopped&#34;; };
	#-case 2-
	if&#40; $numrows != 1 &#41; { printf STDERR &#34;_ %3d&#34;, $numrows; }

	while&#40; $numrows &#41; { $quant = $queries{check}{$label}-&gt;fetch-&gt;[0]; --$numrows; }

	if&#40; $quant == 0 &#41; {
#		$create_name_qry = &#34;CREATE &#40;n:$label  { name_ua: &#39;$name&#39; } &#41; RETURN COUNT&#40;n&#41;&#34;;
#		$qry_create_name = REST::Neo4p::Query-&gt;new&#40; $create_name_qry  &#41; or die &#34;Failed to compile $create_name_qry, stopped&#34;;

		$numrows = $queries{create}{$label}-&gt;execute&#40;name =&gt; $name&#41;;
		if&#40; $queries{create}{$label}-&gt;err&#40;&#41; &#41; {
			die &#34;Qry &lt;&lt;&#34;.$queries{create}{$label}-&gt;{Statement}.&#34;&gt;&gt; execution failed, code &#34; . $queries{create}{$label}-&gt;err&#40;&#41; . &#34;, errmsg &#34; . $queries{create}{$label}-&gt;errstr&#40;&#41; . &#34;, stopped&#34;;
		}

		#-case 1-
		#if&#40; $numrows != 1 &#41; { die &#34;Qry &lt;&lt;$create_name_qry&gt;&gt; executed, expected 1 row got &#34; . $numrows . &#34;, stopped&#34;; };
		#-case 2-
		if&#40; $numrows != 1 &#41; { printf STDERR &#34;! %3d&#34;, $numrows; }
		
		while&#40; $numrows &#41; { $quant = $queries{create}{$label}-&gt;fetch-&gt;[0]; --$numrows;	}
	}
	if &#40; $quant &gt; 1 &#41; {
		die &#34;More than 1 nodes &#39;$name&#39; :$label found, stopped&#34;;
	}

	#-case 3-
	REST::Neo4p-&gt;commit&#40;&#41;;

	return $quant;
}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;17&nbsp;00:43:36&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;00:13:16&nbsp;2014</span>
    <span class="description">maj.fortinbras [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Andrii -- I believe the actual problem underlying this issue should be fixed since v0.2254, and the multiple indivudal queries should work into the many thousands now- 
MAJ
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;00:13:17&nbsp;2014</span>
    <span class="description">maj.fortinbras [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;00:13:18&nbsp;2014</span>
    <span class="description">maj.fortinbras [...] gmail.com -  Fixed in 0.2254 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
