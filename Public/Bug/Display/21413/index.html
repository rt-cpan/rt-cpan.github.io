<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #21413 for Math-BigInt: blsft&#40;&#41; and brsft&#40;&#41; totally screwy</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #21413 for Math-BigInt: blsft&#40;&#41; and brsft&#40;&#41; totally screwy</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Math-BigInt/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Math-BigInt/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt">Math-BigInt CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">21413</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Math-BigInt/Active/">Math-BigInt</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TELS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
peter.john.acklam [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-20500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.77    </td>
  </tr>
  <tr id="CF-20501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.78    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;08:54:57&nbsp;2006</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> blsft&#40;&#41; and brsft&#40;&#41; totally screwy</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I categorized this as a critical bug since a math module is unreliable,
and thus for many purposes useless, if the results are so erroneous as
those below:

Math::BigInt::VERSION is 1.77
Math::BigFloat::VERSION is 1.51

perl is v5.8.7 built for cygwin-thread-multi-64int

The following works as expected:

  $ perl -MMath::BigFloat -wle \
  &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;blsft&#40;0, 10&#41;&#39; -- &#39;31.4159365&#39;
  31.4159365

The following also works as expected:

  $ perl -MMath::BigFloat -wle \
  &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;blsft&#40;1, 10&#41;&#39; -- &#39;31.4159365&#39;
  314.159365

The following should print &#39;3.14159365&#39;:

  $ perl -MMath::BigFloat -wle \
  &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;blsft&#40;-1, 10&#41;&#39; -- &#39;31.4159365&#39;
  3

The following works fine, sort of, but appends a trailing zero:

  $ perl -MMath::BigFloat -wle \
  &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;0, 10&#41;&#39; -- &#39;31.4159365&#39;
  31.41593650

The following should print &#39;3.14159365&#39;, but is really screwy
&#40;note the TWO decimal separators&#41;:

  $ perl -MMath::BigFloat -wle \
  &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;1, 10&#41;&#39; -- &#39;31.4159365&#39;
  3.141593651.4159365

The following should print &#39;314.159365&#39;, but is also screwy:

  $ perl -MMath::BigFloat -wle \
  &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;-1, 10&#41;&#39; -- &#39;31.4159365&#39;
  3000.02
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;09:44:33&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21413] blsft&#40;&#41; and brsft&#40;&#41; totally screwy</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 10 Sep 2006 15:45:58 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

- -----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moin,

On Sunday 10 September 2006 14:54, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sun Sep 10 08:54:57 2006: Request 21413 was acted upon.
</div>[snip]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I categorized this as a critical bug since a math module is unreliable,
&gt; and thus for many purposes useless, if the results are so erroneous as
&gt; those below:
&gt;
&gt; Math::BigInt::VERSION is 1.77
&gt; Math::BigFloat::VERSION is 1.51
&gt;
&gt; perl is v5.8.7 built for cygwin-thread-multi-64int
&gt;
&gt; The following works as expected:
&gt;
&gt;   $ perl -MMath::BigFloat -wle \
&gt;   &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;blsft&#40;0, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt;   31.4159365
&gt;
&gt; The following also works as expected:
&gt;
&gt;   $ perl -MMath::BigFloat -wle \
&gt;   &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;blsft&#40;1, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt;   314.159365
&gt;
&gt; The following should print &#39;3.14159365&#39;:
&gt;
&gt;   $ perl -MMath::BigFloat -wle \
&gt;   &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;blsft&#40;-1, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt;   3
</div>
I do not get why you think that shifting by a &#34;negative&#34; amount is 
supported :-D It clearly is not documented to be that way. &#40;I can 
understand that you would expect the result, tho&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The following works fine, sort of, but appends a trailing zero:
&gt;
&gt;   $ perl -MMath::BigFloat -wle \
&gt;   &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;0, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt;   31.41593650
</div>
Actually, it doesn&#39;t. 

        perl -MMath::BigFloat -wle   &#39;print scalar \
         Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;0, 10&#41;&#39; -- &#39;31.4159365&#39;

The reason is that print calls brsft&#40;&#41; in list context, and brsft&#40;&#41; does 
seem to call bdiv&#40;&#41; in list context, too:

        sub brsft
        {
        ...
        $x-&gt;bdiv&#40;$n-&gt;bpow&#40;$y&#41;,$a,$p,$r,$y&#41;;
        }

There probably should be a &#34;scalar&#34; before that call to bdiv.

The &#34;0&#34; is appended due to &#40;from the POD&#41;:

        =item bdiv

        The following will probably not do what you expect:

                print $c-&gt;bdiv&#40;123.456&#41;,&#34;\n&#34;;

        It prints both quotient and reminder since print works in list
        context. Also, bdiv&#40;&#41; will modify $c, so be carefull. You probably
        want to use

        print $c / 123.456,&#34;\n&#34;;
        print scalar $c-&gt;bdiv&#40;123.456&#41;,&#34;\n&#34;;  # or if you want to modify $c

        instead.

:&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The following should print &#39;3.14159365&#39;, but is really screwy
&gt; &#40;note the TWO decimal separators&#41;:
&gt;
&gt;   $ perl -MMath::BigFloat -wle \
&gt;   &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;1, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt;   3.141593651.4159365
</div>
Same &#34;bug&#34; again.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The following should print &#39;314.159365&#39;, but is also screwy:
&gt;
&gt;   $ perl -MMath::BigFloat -wle \
&gt;   &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;-1, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt;   3000.02
</div>
Same &#34;bug&#34;. It returns &#34;300&#34;, tho, so shifting by negative amounts could use 
some correction.

Negative amounts of shifting should probably either be supported, or 
disallowed. They certainly werent expected when I wrote the code.

I do not have much time right now, holidy coming up etc. It might be that I 
will not be able to look into these issues before 2006-10-10 :/

&#40;I fixed the scalar issue in my local copy of v1.78, see 
<span class="clickylink"><a target="new" rel="nofollow" href="http://Bloodgate.com/perl/packages/devel/Math-BigInt-1.78.tar.gz">http://Bloodgate.com/perl/packages/devel/Math-BigInt-1.78.tar.gz</a></span> for a 
snapshot&#41;

Thank you for your report!

All the best,

Tels

- - -- 
 Signed on Sun Sep 10 15:25:35 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;Given enough time, all legal battles in the tech industry will invoke
 the DMCA. This generally means that all constructive arguments have
 ended.&#34; NialScorva&#39;s law


- - -- 
 Signed on Sun Sep 10 15:37:28 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;Retsina?&#34; - &#34;Ja, Papa?&#34; - &#34;Warp 3.&#34; - &#34;Is gut, Papa.&#34;

- -----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRQQVlncLPEOTuEwVAQI0Kwf+IOhUoTnI4NZRXovuPo1Hn60KkO/rfKk+
8H9voiVYR3Fpw3f3pLGcoEwzRKh9g/OJoFyh9F/eOJ8iEAcE9YSDOZOlgCyp8SOW
con6+EK2Gw6NqqBpGHGYcb5o06nC3cZ5FyO5zFsqp+nGQvDnNaVYBDaqgZDxscWo
bErcod7D9qBraAniHDsimH1Y0DMJ1o+EapqXP/LgP33T8AVNCkqsKuFHiYYGYwXi
tktoEl6wnkO8RpqT2iWrkD31Ox98Vx/jWbrNA3GoBKvgFntBr0D7gBVlDs8Y2Tkw
4xJ1/5a9EVbEO3wWUYonV4f6gxS39gybTTCSOv4iyUYvbOOG4gOJHg==
=sWrR
- -----END PGP SIGNATURE-----
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRQQXFncLPEOTuEwVAQLHcAf+MFNYqnf3+JOWNxGfVzEIP4y0CJYOfYYv
m6CT2ZIW7iqkiDSULjercA5xb113yYMdOWGcx3e5nmUu/uLMxyzvTJWB+XMXE+Op
5tb6twPOwW7sc0+xOf7fkR1IRIAx08ESNEKKto/euv8LVkeh/UZXcXTcKRfbNIrr
2+UxUmFB1zaPJ3wVvRSEgDpWHBPhmOE4RFJMzpRvrVQHrCF2hPxyFjthd4F0xv8R
xMBgXKLgKrzvQzt2LWXBYNEts3W05HPCf6kLathJPf+KrQTBbqsIezkdAy8BMNIC
8ORLyuDz3jWJEYSWDid9GmM1ZiwsZ0z/oBajBoxfq2kEc5NV8Q979A==
=9rFL
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;09:44:34&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;10:16:29&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21413] blsft&#40;&#41; and brsft&#40;&#41; totally screwy</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 10 Sep 2006 16:13:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moin,

On Sunday 10 September 2006 15:44, nospam-abuse@bloodgate.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21413">http://rt.cpan.org/Ticket/Display.html?id=21413</a></span> &gt;
<div class="message-stanza open">&gt; &gt; The following works fine, sort of, but appends a trailing zero:
&gt; &gt;
&gt; &gt;   $ perl -MMath::BigFloat -wle \
&gt; &gt;   &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;0, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt; &gt;   31.41593650
</div>&gt;
&gt; Actually, it doesn&#39;t.
&gt;
&gt;       perl -MMath::BigFloat -wle   &#39;print scalar \
&gt;        Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;0, 10&#41;&#39; -- &#39;31.4159365&#39;
&gt;
&gt; The reason is that print calls brsft&#40;&#41; in list context, and brsft&#40;&#41; does
&gt; seem to call bdiv&#40;&#41; in list context, too:
&gt;
&gt;       sub brsft
&gt;       {
&gt;       ...
&gt;       $x-&gt;bdiv&#40;$n-&gt;bpow&#40;$y&#41;,$a,$p,$r,$y&#41;;
&gt;       }
&gt;
&gt; There probably should be a &#34;scalar&#34; before that call to bdiv.
</div>
Actually, there shouldn&#39;t because the doc say &#40;in the synopsis&#41;:

  $x-&gt;brsft&#40;$y&#41;;                # right shift
                                # return &#40;quo,rem&#41; or quo if scalar

I took the &#34;scalar &#34; out again. &#40;It remains in bpow&#40;&#41; since that isn&#39;t 
supposed to return the reminder only in one case&#41;

Thank you for your report!

Best wishes,

Tels

- -- 
 Signed on Sun Sep 10 16:12:02 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;We&#39;re confident that DNF will be one of the greatest, if not the
 greatest, game of 1998. And this confidence is not misplaced.&#34; -Scott
 Miller, 1997 &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://tinyurl.com/6m8nh&#41;">http://tinyurl.com/6m8nh&#41;</a></span>

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRQQdhHcLPEOTuEwVAQL7GAf+P0LedRs6ztqBrthQIDc5BRS2p585f32+
Rq3BdU75Ic+F3Q8SDro10MFjJ/Hog9Cr+KQx/0LevGjQxvKn2F2TJ9ubyUj2LElV
cVbVihliBeB7vycBbNsUaem7tB9BAJkHCTlm57jEGTEprU/tdYRIUwk8ypYyEpAd
7/2RsFuCuOwHGSvP452Lz85BZk93p+6D7zlfZh/iN9BjoIrPqBvvM8oTHBMmfAtC
Dtox7CgmLHJH1EX3PQCyV+oVhpRaHjoYBTpJ5bCJmqLW0WahMEwR/Hr6wa4Dwvlq
fvceX9FkamYugQU3aqfENFinLoiy/PBCtNgEkBpVr9CG91HGASd41Q==
=+VLc
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;10:22:30&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21413] blsft&#40;&#41; and brsft&#40;&#41; totally screwy</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 10 Sep 2006 16:28:09 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moin,

I updated the documentation under CAVEATS to avoid the gotcha! with the 
&#34;appended 0&#34; and the similiar issues you reported. I also made brsft&#40;&#41; and 
blsft&#40;&#41; call the other one on negative amounts.

perl -MMath::BigFloat -wle \
  &#39;print Math::BigFloat-&gt;new&#40;shift&#41;-&gt;brsft&#40;-1, 10&#41;&#39; -- &#39;31.4159365&#39;

prints now:

        314.159365

Can you please try the updated snapshot and see if that fixes all your 
issues?

        <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/perl/packages/devel/Math-BigInt-1.78.tar.gz">http://bloodgate.com/perl/packages/devel/Math-BigInt-1.78.tar.gz</a></span>

All the best,

Tels

- -- 
 Signed on Sun Sep 10 16:26:31 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 Q: &#34;Dr. Fisher, how did you begin your great career in Contact
 Dermatology?&#34; Dr. Alexander Fisher: &#34;I started from Scratch!&#34;

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRQQg+XcLPEOTuEwVAQKlmgf9HY15/BcwB3p/7qWesb++VwVlByXUYick
6tD/oRaCjzh/rI0LzynMeyny+wQSLT44XTRX1HfuTqyyYdiemvOTiaDGPI1BsT5q
/hhIH16VvRn/Rth6Xs1OenpD2qVkTFNzVP43H6BAhqbvQ9nrQF5HGvgolj0pKWoi
kK25EP6ysFNfuF2/2g67X24KhQ064VgM76TDgRuXpaE+IgtByT7u/OfacPA61Mx3
1JE0bd9tDHpoh4QM68yDSxDaHYrjciXYTTRHlLM2duelkQIgI2GByPQKdt5yzsgV
yAdbJxDTtOaXxUHJ8yj75r0csDniOlFPHvarqOHGkW6a+XFFDHWxRw==
=YeGZ
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;10:28:34&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;10:57:39&nbsp;2006</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> pjacklam [...] online.no</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">nospam-abuse@bloodgate.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I do not get why you think that shifting by a &#34;negative&#34; amount is
&gt; supported :-D It clearly is not documented to be that way. &#40;I can
&gt; understand that you would expect the result, tho&#41;
</div>
It&#39;s not documented not to be that way either, and no error is given, so
I assumed it would work. The documentation says

  $x-&gt;blsft&#40;$y&#41;;     # left shift
  $x-&gt;blsft&#40;$y,$n&#41;;  # left shift, in base $n &#40;like 10&#41;

with no restriction on $y. It&#39;s quite obvious that $y must be an
integer, but nowhere does it say $y must be non-negative.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Negative amounts of shifting should probably either be supported, or
&gt; disallowed. They certainly werent expected when I wrote the code.
</div>
OK. Then disallow them. At least for now. I guess that requires less
work than adding support for it. :-&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;11:20:38&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21413] blsft&#40;&#41; and brsft&#40;&#41; totally screwy</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 10 Sep 2006 17:27:09 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moin,

On Sunday 10 September 2006 16:57, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21413">http://rt.cpan.org/Ticket/Display.html?id=21413</a></span> &gt;
&gt;
&gt; nospam-abuse@bloodgate.com wrote:
<div class="message-stanza open">&gt; &gt; I do not get why you think that shifting by a &#34;negative&#34; amount is
&gt; &gt; supported :-D It clearly is not documented to be that way. &#40;I can
&gt; &gt; understand that you would expect the result, tho&#41;
</div>&gt;
&gt; It&#39;s not documented not to be that way either, and no error is given, so
&gt; I assumed it would work. The documentation says
&gt;
&gt;   $x-&gt;blsft&#40;$y&#41;;     # left shift
&gt;   $x-&gt;blsft&#40;$y,$n&#41;;  # left shift, in base $n &#40;like 10&#41;
&gt;
&gt; with no restriction on $y. It&#39;s quite obvious that $y must be an
&gt; integer, but nowhere does it say $y must be non-negative.
</div>
You are right, but then in my mind, &#34;left&#34; implies it moves left, not &#34;the 
other left&#34; :-&#41; I guess as a non-native speaker I am not actually qualified 
to write documentation. Problem is, as always, when the documentation 
write, programmer, tester, implementor, specificator and designer are all 
the same person :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Negative amounts of shifting should probably either be supported, or
&gt; &gt; disallowed. They certainly werent expected when I wrote the code.
</div>&gt;
&gt; OK. Then disallow them. At least for now. I guess that requires less
&gt; work than adding support for it. :-&#41;
</div>
Should work now, please see my other email :D testcases are still missing, 
tho, as my bathroom cleaning duty had priority.

Best wishes,

Tels

- -- 
 Signed on Sun Sep 10 17:25:15 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;I&#39;m not a vegetarian, but I eat animals who are&#34; -- Groucho Marx

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRQQuzncLPEOTuEwVAQL0CQf9Gd/QlOtH4HaGvwioSnid/W6VN5Z/Qku4
bY+hcsQkDojSkMssj9+pednbt3kWlfSz/ioiamTH6px5VPqyO51acEHqQXKDuP5h
P8ThFqVjqD+quwjsdI/TbJobhA7qxJsViPZclDuvmcr6/7lIJ92GaRcpTpJPsSjZ
o7BDlWOv+XyIeDkkCD5dn6KPDFd6xGEIxMiMbyF027wOpiF1322MxZqgu1UpnU3a
bOgO3Klx30f2byZ+12GKQC9wGdsH9BBUWdRMCXdc9e8sXK+OM20CmzkG2znrFII3
srBupbWRE3NX2g3je0o3tR4opcCXE5oiHAM8brYwv6Fo2fj6D0xGAg==
=O2hU
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;14:16:07&nbsp;2006</span>
    <span class="description">peter.john.acklam [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> pjacklam [...] online.no</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m sorry I missed the context issue. It didn&#39;t occur to me that blsft&#40;&#41;
and brsft&#40;&#41; behaved differently in list context. I have tested the new
version and it works nicely. Thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;10&nbsp;15:37:09&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #21413] blsft&#40;&#41; and brsft&#40;&#41; totally screwy</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 10 Sep 2006 21:43:31 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Moin,

On Sunday 10 September 2006 20:16, Peter John Acklam via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21413">http://rt.cpan.org/Ticket/Display.html?id=21413</a></span> &gt;
&gt;
&gt; I&#39;m sorry I missed the context issue. It didn&#39;t occur to me that blsft&#40;&#41;
&gt; and brsft&#40;&#41; behaved differently in list context. I have tested the new
&gt; version and it works nicely. Thanks.
</div>
No problem, it should have been documented better &#40;and it is still a bit 
wierd that only brsft&#40;&#41; works differently in list context&#41;.

best wishes,

tels

- -- 
 Signed on Sun Sep 10 21:42:58 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;If you want to travel around the world and be invited to speak at a lot
 of different places, just write a Unix operating system.&#34; -- Linus
 Torvalds

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 &#40;GNU/Linux&#41;

iQEVAwUBRQRq63cLPEOTuEwVAQKr9gf/Tc25IEmydDehAg+U3a63Wb59uITxPtng
R2EnUZF5zWd7Yl/ZMRpYUmcue4K5BjncEQuZq18oEyV/cFBKv+rqB0x4I15Ch6MQ
3onL/iaFA545tprS24BC00HFd1XHswJEJBnguX7uhHQMM47B03wYm8h/8+taBeTU
UxzPy0rgbsGvEI9J9eixiDL+REKl6FV5ZIoHBIt1JdO0f2YgECkaC9zioA84+Ul6
l8tG/g/gT5yJgIFmyklIJvJfx6Ipgu/lpvUqa8AD6pnvt0oIhmqzeLtmZeYLiF+H
icsPIVRAeFxIidAbnhXxGo7EvbBv/KB+7t0n6GbYgzr65V8bSdfwHQ==
=yWVx
-----END PGP SIGNATURE-----
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;02&nbsp;08:06:32&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Fixed in 1.78 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;02&nbsp;08:07:28&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This issue has been fixed in the released v1.78.

Thank you for your report,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;02&nbsp;08:07:33&nbsp;2007</span>
    <span class="description">TELS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
