<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #65703 for Inline: Build Problem - Inline::C fails at t/08taint.t</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #65703 for Inline: Build Problem - Inline::C fails at t/08taint.t</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Inline/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Inline/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Inline/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Inline/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/ingydotnet/inline-pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Inline">Inline CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">65703</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Inline/Active/">Inline</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
alexander.haeckel [...] web.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
jquelin [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16878-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-16879-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;13&nbsp;17:31:29&nbsp;2011</span>
    <span class="description">alexander.haeckel [...] web.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Build Problem - Inline::C fails at t/08taint.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 13 Feb 2011 22:42:32 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alexander Haeckel &lt;alexanderhaeckel [...] lavabit.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,
when building Inline-0.47 I get this message &#40;PERL_INLINE_BUILD_NOISY=1&#41;:
,----
| t/08taint.t ............. Expect a number of &#34;Blindly untainting ...&#34; warnings - these are intended.
| In Inline::env_untaint&#40;&#41; : Blindly untainting tainted fields in %ENV.
| In Inline::check_config_file&#40;&#41;: Blindly untainting Inline configuration file information.
| In Inline::env_untaint&#40;&#41; : Blindly untainting tainted fields in %ENV.
| In Inline::obj_untaint&#40;&#41; : Blindly untainting tainted fields in Inline object.
| Can&#39;t exec &#34;make&#34;: Datei oder Verzeichnis nicht gefunden at
|         ../blib/lib/Inline/C.pm line 794 &#40;#1&#41;
|     &#40;W exec&#41; A system&#40;&#41;, exec&#40;&#41;, or piped open call could not execute the
|     named program for the indicated reason.  Typical reasons include: the
|     permissions were wrong on the file, the file wasn&#39;t found in
|     $ENV{PATH}, the executable in question was compiled for another
|     architecture, or the #! line in a script points to an interpreter that
|     can&#39;t be run for similar reasons.  &#40;Or maybe your system doesn&#39;t support
|     #! at all.&#41;
| 
| Uncaught exception from user code:
| 
| A problem was encountered while attempting to compile and install your Inline
| C code. The command that failed was:
|   make
| 
| The build directory was:
| /tmp/Inline-0.47/C/_Inline_test/build/_08taint_t_6b3a
| 
| To debug the problem, cd to the build directory, and inspect the output files.
| 
|  at t/08taint.t line 33
| BEGIN failed--compilation aborted at t/08taint.t line 42.
|  at t/08taint.t line 42
| One or more DATA sections were not processed by Inline.
| 
| t/08taint.t ............. Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
| Failed 5/5 subtests
`----

Of course I have &#34;make&#34; at &#34;/usr/bin/make&#34; in $PATH.

$ perl -V
,----
| Summary of my perl5 &#40;revision 5 version 12 subversion 3&#41; configuration:
| 
|   Platform:
|     osname=linux, osvers=2.6.26-2-amd64, archname=x86_64-linux
|     uname=&#39;linux tentakel 2.6.26-2-amd64 #1 smp tue jan 25 05:59:43 utc 2011 x86_64 gnulinux &#39;
|     config_args=&#39;-de -Dprefix=/home/user1/perl5/perlbrew/perls/perl-512.3&#39;
|     hint=recommended, useposix=true, d_sigaction=define
|     useithreads=undef, usemultiplicity=undef
|     useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
|     use64bitint=define, use64bitall=define, uselongdouble=undef
|     usemymalloc=n, bincompat5005=undef
|   Compiler:
|     cc=&#39;cc&#39;, ccflags =&#39;-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE
|     -D_FILE_OFFSET_BITS=64&#39;,
|     optimize=&#39;-O2&#39;,
|     cppflags=&#39;-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include&#39;
|     ccversion=&#39;&#39;, gccversion=&#39;4.3.2&#39;, gccosandvers=&#39;&#39;
|     intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
|     d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
|     ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
|     alignbytes=8, prototype=define
|   Linker and Libraries:
|     ld=&#39;cc&#39;, ldflags =&#39; -fstack-protector -L/usr/local/lib&#39;
|     libpth=/usr/local/lib /lib /usr/lib /lib64 /usr/lib64 /usr/local/lib64
|     libs=-lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lc -lgdbm_compat
|     perllibs=-lnsl -ldl -lm -lcrypt -lutil -lc
|     libc=/lib/libc-2.7.so, so=so, useshrplib=false, libperl=libperl.a
|     gnulibc_version=&#39;2.7&#39;
|   Dynamic Linking:
|     dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#39;-Wl,-E&#39;
|     cccdlflags=&#39;-fPIC&#39;, lddlflags=&#39;-shared -O2 -L/usr/local/lib -fstack-protector&#39;
| 
| 
| Characteristics of this binary &#40;from libperl&#41;:
|   Compile-time options: PERL_DONT_CREATE_GVSV PERL_MALLOC_WRAP USE_64_BIT_ALL
|                         USE_64_BIT_INT USE_LARGE_FILES USE_PERLIO
|                         USE_PERL_ATOF
|   Built under linux
|   Compiled at Feb 13 2011 02:11:11
|   %ENV:
|     PERL6HOME=&#34;/home/user1/download/src/perl6/rakudo/parrot_install&#34;
|     PERLBREW_PATH=&#34;/home/user1/perl5/perlbrew/bin:/home/user1/perl5/perlbrew/perls/perl-5.12.3/bin&#34;
|     PERLBREW_PERL=&#34;perl-5.12.3&#34;
|     PERLBREW_ROOT=&#34;/home/user1/perl5/perlbrew&#34;
|     PERLBREW_VERSION=&#34;0.15&#34;
|     PERL_INLINE_BUILD_NOISY=&#34;1&#34;
|   @INC:
|     /home/user1/perl5/perlbrew/perls/perl-5.12.3/lib/site_perl/5.12.3/x86_64-linux
|     /home/user1/perl5/perlbrew/perls/perl-5.12.3/lib/site_perl/5.12.3
|     /home/user1/perl5/perlbrew/perls/perl-5.12.3/lib/5.12.3/x86_64-linux
|     /home/user1/perl5/perlbrew/perls/perl-5.12.3/lib/5.12.3
`----

Thanks for your help,
Alexander Haeckel

-- 
&#34;I can&#39;t understand why people are frightened of new ideas.
 I&#39;m frightened of the old ones.”
 - John Cage
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;15&nbsp;06:54:10&nbsp;2011</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> alexanderhaeckel [...] lavabit.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Feb 13 17:31:29 2011, alexander.haeckel@web.de wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Of course I have &#34;make&#34; at &#34;/usr/bin/make&#34; in $PATH.
&gt; 
</div>
In Inline.pm &#40;in sub env_untaint&#41; you&#39;ll find:

    $ENV{PATH} = $^O eq &#39;MSWin32&#39; ?
                 join &#39;;&#39;, grep {not /^\./ and -d $_
                                  } split /;/, $ENV{PATH}
                 :
                 join &#39;:&#39;, grep {not /^\./ and -d $_ and
                                      not &#40;&#40;stat&#40;$_&#41;&#41;[2] &#38; 0022&#41;
                                  } split /:/, $ENV{PATH};

Is that where /usr/bin/make gets removed from the path ? I don&#39;t know.
I&#39;ve seen reports of it having happened before - though only rarely, 
and not recently. It&#39;s not something I can reproduce on my linux box; 
nor have any of the cpan-testers who have tested 0.47 or 0.47_02 come 
across the problem &#40;afaik&#41;.

So we first need to identify the code that&#39;s causing it to happen, 
understand *why* that code is causing it to happen, and then work aout 
what to do about it.

If you&#39;re not going run in taint mode then, of course, this failure can 
be ignored. It would, however, be nice to remove this bug - even better 
if that can be done without making Inline&#39;s behaviour regarding 
untainting even more dubious than it already is.

Thanks for reporting this bug - and for any insights you can provide 
regarding what&#39;s causing it.

Maybe start by replacing the above mentioned:

                 join &#39;:&#39;, grep {not /^\./ and -d $_ and
                                      not &#40;&#40;stat&#40;$_&#41;&#41;[2] &#38; 0022&#41;
                                  } split /:/, $ENV{PATH};

with:

                 join &#39;:&#39;, grep {not /^\./ and -d $_                    
                                  } split /:/, $ENV{PATH};

Then rebuild from scratch &#40;or run &#39;make realclean&#39;&#41; before re-building, 
and see if that makes any difference.

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;15&nbsp;06:54:11&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;15&nbsp;16:18:12&nbsp;2011</span>
    <span class="description">alexander.haeckel [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #65703] Build Problem - Inline::C fails at t/08taint.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 15 Feb 2011 22:17:52 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alexander Haeckel &lt;alexanderhaeckel [...] lavabit.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Rob,
thank you very much for your quick reply. I looked into that and you were exactly right:
join &#39;:&#39;, grep {not /^\./ and -d $_
                                    #this is the offending code -&gt; and not &#40;&#40;stat&#40;$_&#41;&#41;[2] &#38; 0022&#41;
                                  } split /:/, $ENV{PATH};
Because I gave write permission to group &#34;adm&#34; for &#34;/usr/bin&#34;, &#34;/usr/local/bin&#34;, etc these directories
are removed from the path.

I hope that&#39;s helpful to you,
Alexander

Sisyphus via RT &lt;bug-Inline@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=65703">https://rt.cpan.org/Ticket/Display.html?id=65703</a></span> &gt;
&gt; On Sun Feb 13 17:31:29 2011, alexander.haeckel@web.de wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;
&gt;&gt; Of course I have &#34;make&#34; at &#34;/usr/bin/make&#34; in $PATH.
&gt;&gt;
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In Inline.pm &#40;in sub env_untaint&#41; you&#39;ll find:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     $ENV{PATH} = $^O eq &#39;MSWin32&#39; ?
&gt;                  join &#39;;&#39;, grep {not /^\./ and -d $_
&gt;                                 } split /;/, $ENV{PATH}
&gt;                  : join &#39;:&#39;, grep {not /^\./ and -d $_ and
&gt;                                     not &#40;&#40;stat&#40;$_&#41;&#41;[2] &#38; 0022&#41;
&gt;                                 } split /:/, $ENV{PATH};
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is that where /usr/bin/make gets removed from the path ? I don&#39;t know.
&gt; I&#39;ve seen reports of it having happened before - though only rarely,
&gt; and not recently. It&#39;s not something I can reproduce on my linux box;
&gt; nor have any of the cpan-testers who have tested 0.47 or 0.47_02 come
&gt; across the problem &#40;afaik&#41;.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So we first need to identify the code that&#39;s causing it to happen,
&gt; understand *why* that code is causing it to happen, and then work aout
&gt; what to do about it.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you&#39;re not going run in taint mode then, of course, this failure
&gt; can be ignored. It would, however, be nice to remove this bug - even
&gt; better if that can be done without making Inline&#39;s behaviour regarding
&gt; untainting even more dubious than it already is.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for reporting this bug - and for any insights you can provide
&gt; regarding what&#39;s causing it.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe start by replacing the above mentioned:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;                  join &#39;:&#39;, grep {not /^\./ and -d $_ and
&gt;                                     not &#40;&#40;stat&#40;$_&#41;&#41;[2] &#38; 0022&#41;
&gt;                                 } split /:/, $ENV{PATH};
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; with:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;                  join &#39;:&#39;, grep {not /^\./ and -d $_
&gt;                                 } split /:/, $ENV{PATH};
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Then rebuild from scratch &#40;or run &#39;make realclean&#39;&#41; before
&gt; re-building, and see if that makes any difference.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Cheers, Rob
</div>


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ____________________________________________________________________________________
&gt; Use the link below to report this message as spam.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://lavabit.com/apps/teacher?sig=1689256&#38;key=1111163831">https://lavabit.com/apps/teacher?sig=1689256&#38;key=1111163831</a></span>
&gt; ____________________________________________________________________________________
</div>

--
&#34;I can&#39;t understand why people are frightened of new ideas.
 I&#39;m frightened of the old ones.”
 - John Cage
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;15&nbsp;18:35:39&nbsp;2011</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> alexanderhaeckel [...] lavabit.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Feb 15 16:18:12 2011, alexander.haeckel@web.de wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Because I gave write permission to group &#34;adm&#34; for &#34;/usr/bin&#34;,
&gt; &#34;/usr/local/bin&#34;, etc these directories
&gt; are removed from the path.
&gt; 
&gt; I hope that&#39;s helpful to you,
</div>
Yes, it certainly is helpful.

We could construct Inline so that /usr/bin and /usr/local/bin are not 
removed from the path, even if they are writable. But I think that 
would defeat the purpose of running with the -T switch.

Seems to me that, in your case, the t/08taint.t test script should be 
skipped completely, with a message telling you that you *cannot* use -T 
with Inline::C because &#39;/usr/bin&#39; is writable.

Is that the right action to take ?

I&#39;d hate to be told by someone that &#34;I ran an Inline::C script, 
and /usr/bin got wiped, even though I was running under the -T switch&#34;. 
There are plenty of warnings about my reservations regarding the use 
of -T with Inline::C ... but that&#39;s still *one* message I&#39;d rather not 
receive :-&#41;

I would envisage using something like the following code to determine 
whether /usr/bin and/or /usr/local/bin are writable:

#################################
if&#40; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0022 &#41; {
  print &#34;Tests skipped - you can&#39;t run with -T switch as &#39;/usr/bin&#39; is 
writable\n&#34;;
}

if&#40; &#40;stat&#40;&#34;/usr/local/bin&#34;&#41;&#41;[2] &#38; 0022 &#41; {
  print &#34;Tests skipped - you can&#39;t run with -T switch 
as &#39;/usr/local/bin&#39; is writable\n&#34;;
}
#################################

Could you run that and check that it performs as intended ?

Cheers,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;15&nbsp;20:05:27&nbsp;2011</span>
    <span class="description">alexander.haeckel [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #65703] Build Problem - Inline::C fails at t/08taint.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 16 Feb 2011 02:04:41 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alexander Haeckel &lt;alexanderhaeckel [...] lavabit.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem here as I see it ist the use of
&#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0022
instead of
&#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0002
, because you must be authorized to write into
the first case, but needn&#39;t be in the second.
If you exclude 0020 you could exclude 0200 for
the same reasons.
To me it would seem more consistent to use the -w, -W operators
to check for every directory in the path if it
is writable at all. Then you can omit the
&#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0??? test completely and just write:

join &#39;:&#39;, grep {not /^\./ and -d $_ and not -w $_ || -W $_
                                  } split /:/, $ENV{PATH};

I hope this makes some sense to you.

Alexander
                                  
Sisyphus via RT &lt;bug-Inline@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=65703">https://rt.cpan.org/Ticket/Display.html?id=65703</a></span> &gt;
&gt; On Tue Feb 15 16:18:12 2011, alexander.haeckel@web.de wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Because I gave write permission to group &#34;adm&#34; for &#34;/usr/bin&#34;,
&gt;&gt; &#34;/usr/local/bin&#34;, etc these directories are removed from the path.
&gt;&gt; 
&gt;&gt; I hope that&#39;s helpful to you,
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, it certainly is helpful.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; We could construct Inline so that /usr/bin and /usr/local/bin are not
&gt; removed from the path, even if they are writable. But I think that
&gt; would defeat the purpose of running with the -T switch.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Seems to me that, in your case, the t/08taint.t test script should be
&gt; skipped completely, with a message telling you that you *cannot* use
&gt; -T with Inline::C because &#39;/usr/bin&#39; is writable.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is that the right action to take ?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d hate to be told by someone that &#34;I ran an Inline::C script, and
&gt; /usr/bin got wiped, even though I was running under the -T switch&#34;.
&gt; There are plenty of warnings about my reservations regarding the use
&gt; of -T with Inline::C ... but that&#39;s still *one* message I&#39;d rather not
&gt; receive :-&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would envisage using something like the following code to determine
&gt; whether /usr/bin and/or /usr/local/bin are writable:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #################################
&gt; if&#40; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0022 &#41; {
&gt;   print &#34;Tests skipped - you can&#39;t run with -T switch as &#39;/usr/bin&#39; is
&gt; writable\n&#34;;
&gt; }
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; if&#40; &#40;stat&#40;&#34;/usr/local/bin&#34;&#41;&#41;[2] &#38; 0022 &#41; {
&gt;   print &#34;Tests skipped - you can&#39;t run with -T switch
&gt; as &#39;/usr/local/bin&#39; is writable\n&#34;;
&gt; }
&gt; #################################
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Could you run that and check that it performs as intended ?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Cheers, Rob
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ____________________________________________________________________________________
&gt; Use the link below to report this message as spam.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://lavabit.com/apps/teacher?sig=1690966&#38;key=1802200634">https://lavabit.com/apps/teacher?sig=1690966&#38;key=1802200634</a></span>
&gt; ____________________________________________________________________________________
</div>

-- 
&#34;I can&#39;t understand why people are frightened of new ideas.
 I&#39;m frightened of the old ones.”
 - John Cage
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;15&nbsp;20:20:52&nbsp;2011</span>
    <span class="description">alexander.haeckel [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #65703] Build Problem - Inline::C fails at t/08taint.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 16 Feb 2011 02:20:27 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Inline [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alexander Haeckel &lt;alexanderhaeckel [...] lavabit.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem here as I see it ist the use of
&#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0022
instead of
&#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0002
, because you must be authorized to write into
the first case, but needn&#39;t be in the second.
If you exclude 0020 you could exclude 0200 for
the same reasons.
To me it would seem more consistent to use the -w, -W operators
to check for every directory in the path if it
is writable at all. Additionally it makes sense to test with
-o, -O for if the directory belongs to the user to prevent &#34;chmod-attacks&#34;.
Then you can omit the &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0??? test completely
and just write:

join &#39;:&#39;, grep {not /^\./ and -d $_ and not -w $_ || -W $_ || -o $_ || -O $_
                                  } split /:/, $ENV{PATH};

I hope this makes some sense to you.

Alexander
                                  
Sisyphus via RT &lt;bug-Inline@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=65703">https://rt.cpan.org/Ticket/Display.html?id=65703</a></span> &gt;
&gt; On Tue Feb 15 16:18:12 2011, alexander.haeckel@web.de wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Because I gave write permission to group &#34;adm&#34; for &#34;/usr/bin&#34;,
&gt;&gt; &#34;/usr/local/bin&#34;, etc these directories are removed from the path.
&gt;&gt; 
&gt;&gt; I hope that&#39;s helpful to you,
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, it certainly is helpful.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; We could construct Inline so that /usr/bin and /usr/local/bin are not
&gt; removed from the path, even if they are writable. But I think that
&gt; would defeat the purpose of running with the -T switch.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Seems to me that, in your case, the t/08taint.t test script should be
&gt; skipped completely, with a message telling you that you *cannot* use
&gt; -T with Inline::C because &#39;/usr/bin&#39; is writable.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is that the right action to take ?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d hate to be told by someone that &#34;I ran an Inline::C script, and
&gt; /usr/bin got wiped, even though I was running under the -T switch&#34;.
&gt; There are plenty of warnings about my reservations regarding the use
&gt; of -T with Inline::C ... but that&#39;s still *one* message I&#39;d rather not
&gt; receive :-&#41;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would envisage using something like the following code to determine
&gt; whether /usr/bin and/or /usr/local/bin are writable:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #################################
&gt; if&#40; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0022 &#41; {
&gt;   print &#34;Tests skipped - you can&#39;t run with -T switch as &#39;/usr/bin&#39; is
&gt; writable\n&#34;;
&gt; }
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; if&#40; &#40;stat&#40;&#34;/usr/local/bin&#34;&#41;&#41;[2] &#38; 0022 &#41; {
&gt;   print &#34;Tests skipped - you can&#39;t run with -T switch
&gt; as &#39;/usr/local/bin&#39; is writable\n&#34;;
&gt; }
&gt; #################################
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Could you run that and check that it performs as intended ?
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Cheers, Rob
</div>
-- 
&#34;I can&#39;t understand why people are frightened of new ideas.
 I&#39;m frightened of the old ones.”
 - John Cage
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;25&nbsp;05:08:12&nbsp;2011</span>
    <span class="description">jquelin [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">i get the same error:
================
A problem was encountered while attempting to compile and install your
Inline
C code. The command that failed was:
  make &gt; out.make 2&gt;&#38;1

The build directory was:
/home/jquelin/rpm/cauldron/perl-Inline/BUILD/Inline-0.48/C/_Inline_test/build/_08taint_1_p_0965

To debug the problem, cd to the build directory, and inspect the output
files.

 at ./t/08taint_1.p line 7
BEGIN failed--compilation aborted at ./t/08taint_1.p line 13.
Compilation failed in require at t/08taint.t line 30.
# Looks like you planned 10 tests but ran 1.
# Looks like your test exited with 2 just after 1.
================

but /usr/bin is not writable:
$ which make
/usr/bin/make
$ ll -d /usr/bin/make
-rwxr-xr-x 1 root root 174328 janv. 22 16:59 /usr/bin/make*
$ perl -E &#39;say &#40; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0022 &#41;&#39;
0

but the problem should be similar, since running make manually works fine:
================
$ cd
/home/jquelin/rpm/cauldron/perl-Inline/BUILD/Inline-0.48/C/_Inline_test/build/_08taint_1_p_0965
$ make
/usr/bin/perl5.12.3 /usr/lib/perl5/vendor_perl/5.12.3/ExtUtils/xsubpp 
-typemap /usr/lib/perl5/5.12.3/ExtUtils/typemap   _08taint_1_p_0965.xs &gt;
_08taint_1_p_0965.xsc &#38;&#38; mv _08taint_1_p_0965.xsc _08taint_1_p_0965.c
x86_64-mageia-linux-gnu-gcc -c   -D_REENTRANT -D_GNU_SOURCE
-fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -g -pipe -Wformat
-Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector
--param=ssp-buffer-size=4   -DVERSION=\&#34;0.00\&#34; -DXS_VERSION=\&#34;0.00\&#34;
-fPIC &#34;-I/usr/lib/perl5/5.12.3/x86_64-linux-thread-multi/CORE&#34;  
_08taint_1_p_0965.c
Running Mkbootstrap for _08taint_1_p_0965 &#40;&#41;
chmod 644 _08taint_1_p_0965.bs
rm -f blib/arch/auto/_08taint_1_p_0965/_08taint_1_p_0965.so
x86_64-mageia-linux-gnu-gcc  -shared -O2 -g -pipe -Wformat
-Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector
--param=ssp-buffer-size=4 -L/usr/local/lib64 _08taint_1_p_0965.o  -o
blib/arch/auto/_08taint_1_p_0965/_08taint_1_p_0965.so      \
        \

chmod 755 blib/arch/auto/_08taint_1_p_0965/_08taint_1_p_0965.so
cp _08taint_1_p_0965.bs
blib/arch/auto/_08taint_1_p_0965/_08taint_1_p_0965.bs
chmod 644 blib/arch/auto/_08taint_1_p_0965/_08taint_1_p_0965.bs
================
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;25&nbsp;05:08:40&nbsp;2011</span>
    <span class="description">jquelin [...] cpan.org -  Cc JQUELIN added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;23&nbsp;13:10:55&nbsp;2014</span>
    <span class="description">fraserbn [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> fraserbn [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Feb 15 20:05:27 2011, alexander.haeckel@web.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The problem here as I see it ist the use of
&gt; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0022
&gt; instead of
&gt; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0002
&gt; , because you must be authorized to write into
&gt; the first case, but needn&#39;t be in the second.
&gt; If you exclude 0020 you could exclude 0200 for
&gt; the same reasons.
&gt; To me it would seem more consistent to use the -w, -W operators
&gt; to check for every directory in the path if it
&gt; is writable at all. Then you can omit the
&gt; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0??? test completely and just write:
&gt; 
&gt; join &#39;:&#39;, grep {not /^\./ and -d $_ and not -w $_ || -W $_
&gt;                                   } split /:/, $ENV{PATH};
</div>
This issue just bit me when smoking CPAN on Android. Unfortunately, the above solution doesn&#39;t work for me.

tl;dr: Skipping the tests when $^O eq &#39;android&#39; would probably be for the best, if that filter is going to stay.

Android&#39;s an interesting case. It&#39;s basically a linux system that doesn&#39;t provide any toolchain whatsoever, so you either have to install one yourself &#40;and to do that, you need to root your phone and probably create/mount an ext3/4 partition in your sdcard&#41; or have an app install it for you.  Either way, the toolchain ends up in a non-standard location with non-standard permissions, and to use it you need to tweak with it&#39;s permissions and/or be root.

There&#39;s probably no ideal solution here, but either way my suggestion is to have the module skip t/08taint.t under Android, and then to have env_untaint actually check if an entry is already untainted &#40;with Scalar::Util::tainted in perl&gt;=5.8, and whatever the eval invocation in older perls is&#41;; if it is, trust it as-is, no need to filter anything. That way, if someone wants to use Inline on Android under taint, they can do it by manually untainting $ENV{PATH}, which they should&#39;ve been doing on the first place :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;05&nbsp;08:39:01&nbsp;2014</span>
    <span class="description">sisyphus1 [...] optusnet.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #65703] Build Problem - Inline::C fails at t/08taint.t</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 6 Mar 2014 00:37:43 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Inline [...] rt.cpan.org&gt;, &lt;inline [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;sisyphus1 [...] optusnet.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message----- 
From: Brian Fraser via RT

<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; To me it would seem more consistent to use the -w, -W operators
&gt;&gt; to check for every directory in the path if it
&gt;&gt; is writable at all. Then you can omit the
&gt;&gt; &#40;stat&#40;&#34;/usr/bin&#34;&#41;&#41;[2] &#38; 0??? test completely and just write:
&gt;&gt;
&gt;&gt; join &#39;:&#39;, grep {not /^\./ and -d $_ and not -w $_ || -W $_
&gt;&gt;                                   } split /:/, $ENV{PATH};
</div>&gt;
&gt; This issue just bit me when smoking CPAN on Android. Unfortunately, the
&gt; above solution doesn&#39;t work for me.
&gt;
&gt; tl;dr: Skipping the tests when $^O eq &#39;android&#39; would probably be for the
&gt; best, if that filter is going to stay.
</div>
I&#39;ve just uploaded Inline-0.53_01 to CPAN.
It includes Alexander&#39;s recommended change to env_untaint&#40;&#41; and also has
08taint.t skip the tests for Android.

Brian/Alexander - if you want any additional changes to env_untaint &#40;or
anything else, for that matter&#41; just send me the patch and we should be able
to get it incorporated into the next stable release &#40;0.54&#41;.

Thanks guys.

Cheers,
Rob 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;30&nbsp;05:11:58&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I got this &#40;I believe related&#41; error trying to install Inline &#40;+Inline::C&#41;

t/08taint.t ............. 1/10 Running Mkbootstrap for _08taint_1_p_0965 &#40;&#41;
chmod 644 _08taint_1_p_0965.bs
/home/ollisg/perl5/perlbrew/perls/perl-5.18.2c/bin/perl /home/ollisg/.perlbrew/libs/perl-5.18.2c@dev/lib/perl5/ExtUtils/xsubpp  -typemap &#34;/home/ollisg/perl5/perlbrew/perls/perl-5.18.2c/lib/5.18.2/ExtUtils/typemap&#34;   _08taint_1_p_0965.xs &gt; _08taint_1_p_0965.xsc &#38;&#38; mv _08taint_1_p_0965.xsc _08taint_1_p_0965.c
clang -c   -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\&#34;0.00\&#34; -DXS_VERSION=\&#34;0.00\&#34; -fPIC &#34;-I/home/ollisg/perl5/perlbrew/perls/perl-5.18.2c/lib/5.18.2/x86_64-linux/CORE&#34;   _08taint_1_p_0965.c
/bin/sh: 1: clang: not found
make: *** [_08taint_1_p_0965.o] Error 127

A problem was encountered while attempting to compile and install your Inline
C code. The command that failed was:
  make &gt; out.make 2&gt;&#38;1

The build directory was:
/home/ollisg/.cpanm/work/1398847813.20092/Inline-0.55/C/_Inline_test/build/_08taint_1_p_0965

To debug the problem, cd to the build directory, and inspect the output files.

 at ./t/08taint_1.p line 7.
        ...propagated at /home/ollisg/.perlbrew/libs/perl-5.18.2c@dev/lib/perl5/Inline/C.pm line 797.
BEGIN failed--compilation aborted at ./t/08taint_1.p line 7.
Compilation failed in require at t/08taint.t line 45.
# Looks like you planned 10 tests but ran 1.
# Looks like your test exited with 2 just after 1.
t/08taint.t ............. Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 9/10 subtests

I&#39;ve installed clang into my home directory because the version that comes with my OS is very old.  I feel like this configuration should be supported, but perhaps not?  As a work around I chmod -R -x the appropriate directorys in my clang install and the then install worked.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;06&nbsp;09:14:24&nbsp;2014</span>
    <span class="description">chm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza">I hit the same error with my cygwin64.&nbsp; In my specific<br>

case, the issue is that I have all of the added perl<br>

modules installed into a separate non-system location<br>

and PERL5LIB is set so that works.<br>

<br>

With -T PERL5LIB is not consulted.&nbsp; A look at the pod<br>

for taint in perlrun suggests to add<br>

<br>

&nbsp; use lib &#39;/my/perl5/lib/dir&#39;;<br>

<br>

When I did that, it all works.&nbsp; I&#39;m not sure if this is related<br>

to the other failures but it is definitely the problem for<br>

a non-system perl install with INSTALL_BASE and the<br>

use of PERL5LIB.<br>

<br>

--Chris<br>

<br>

<br>

On Wed Apr 30 05:11:58 2014, PLICEASE wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I got this (I believe related) error trying to install Inline<br>

&gt; (+Inline::C)<br>

&gt;<br>

&gt; t/08taint.t ............. 1/10 Running Mkbootstrap for<br>

&gt; _08taint_1_p_0965 ()<br>

&gt; chmod 644 _08taint_1_p_0965.bs<br>

&gt; /home/ollisg/perl5/perlbrew/perls/perl-5.18.2c/bin/perl<br>

&gt; /home/ollisg/.perlbrew/libs/perl-5.18.2c@dev/lib/perl5/ExtUtils/xsubpp<br>

&gt; -typemap &quot;/home/ollisg/perl5/perlbrew/perls/perl-<br>

&gt; 5.18.2c/lib/5.18.2/ExtUtils/typemap&quot; _08taint_1_p_0965.xs &gt;<br>

&gt; _08taint_1_p_0965.xsc &amp;&amp; mv _08taint_1_p_0965.xsc _08taint_1_p_0965.c<br>

&gt; clang -c -fno-strict-aliasing -pipe -fstack-protector<br>

&gt; -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2<br>

&gt; -DVERSION=\&quot;0.00\&quot; -DXS_VERSION=\&quot;0.00\&quot; -fPIC &quot;-<br>

&gt; I/home/ollisg/perl5/perlbrew/perls/perl-5.18.2c/lib/5.18.2/x86_64-<br>

&gt; linux/CORE&quot; _08taint_1_p_0965.c<br>

&gt; /bin/sh: 1: clang: not found<br>

&gt; make: *** [_08taint_1_p_0965.o] Error 127<br>

&gt;<br>

&gt; A problem was encountered while attempting to compile and install your<br>

&gt; Inline<br>

&gt; C code. The command that failed was:<br>

&gt; make &gt; out.make 2&gt;&amp;1<br>

&gt;<br>

&gt; The build directory was:<br>

&gt; /home/ollisg/.cpanm/work/1398847813.20092/Inline-<br>

&gt; 0.55/C/_Inline_test/build/_08taint_1_p_0965<br>

&gt;<br>

&gt; To debug the problem, cd to the build directory, and inspect the<br>

&gt; output files.<br>

&gt;<br>

&gt; at ./t/08taint_1.p line 7.<br>

&gt; ...propagated at /home/ollisg/.perlbrew/libs/perl-<br>

&gt; 5.18.2c@dev/lib/perl5/Inline/C.pm line 797.<br>

&gt; BEGIN failed--compilation aborted at ./t/08taint_1.p line 7.<br>

&gt; Compilation failed in require at t/08taint.t line 45.<br>
<div class="message-stanza open">&gt; # Looks like you planned 10 tests but ran 1.<br>

&gt; # Looks like your test exited with 2 just after 1.<br>
</div>&gt; t/08taint.t ............. Dubious, test returned 2 (wstat 512, 0x200)<br>

&gt; Failed 9/10 subtests<br>

&gt;<br>

&gt; I&#39;ve installed clang into my home directory because the version that<br>

&gt; comes with my OS is very old. I feel like this configuration should<br>

&gt; be supported, but perhaps not? As a work around I chmod -R -x the<br>

&gt; appropriate directorys in my clang install and the then install<br>

&gt; worked.<br>
</div><br>

<br>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;06&nbsp;09:15:50&nbsp;2014</span>
    <span class="description">chm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza">My use lib line was added just after all the<br>

BEGIN{} blocks in t/08taint.t...<br>

<br>

On Tue May 06 09:14:24 2014, CHM wrote:<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I hit the same error with my cygwin64. In my specific<br>

&gt; case, the issue is that I have all of the added perl<br>

&gt; modules installed into a separate non-system location<br>

&gt; and PERL5LIB is set so that works.<br>

&gt;<br>

&gt; With -T PERL5LIB is not consulted. A look at the pod<br>

&gt; for taint in perlrun suggests to add<br>

&gt;<br>

&gt; use lib &#39;/my/perl5/lib/dir&#39;;<br>

&gt;<br>

&gt; When I did that, it all works. I&#39;m not sure if this is related<br>

&gt; to the other failures but it is definitely the problem for<br>

&gt; a non-system perl install with INSTALL_BASE and the<br>

&gt; use of PERL5LIB.<br>

&gt;<br>

&gt; --Chris<br>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;12&nbsp;04:34:15&nbsp;2014</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> alexanderhaeckel [...] lavabit.com, fraserbn [...] gmail.com, inline [...] perl.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;d be very interested to know whether the change proposed in <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mohawk2/inline-pm/commit/f9242a2e92244d99a2ce051c9ae523913eb47fc4">https://github.com/mohawk2/inline-pm/commit/f9242a2e92244d99a2ce051c9ae523913eb47fc4</a></span> fixes this issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;24&nbsp;04:17:18&nbsp;2014</span>
    <span class="description">sisyphus [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Superseded by #96291 &#40;t/08taint.t fails on perl 5.20.0&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;24&nbsp;04:17:19&nbsp;2014</span>
    <span class="description">sisyphus [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
