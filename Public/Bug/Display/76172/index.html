<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #76172 for Scalar-List-Utils: sum&#40;&#41; should return 0</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #76172 for Scalar-List-Utils: sum&#40;&#41; should return 0</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Scalar-List-Utils">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Scalar-List-Utils">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Scalar-List-Utils">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Scalar-List-Utils">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Scalar-List-Utils">Scalar-List-Utils CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">76172</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Scalar-List-Utils">Scalar-List-Utils</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MAUKE [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-28278-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.25    </td>
  </tr>
  <tr id="CF-28279-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.26    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=76172">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1056718" href="/Public/Bug/Display.html?id=76172#txn-1056718">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;30&nbsp;14:27:00&nbsp;2012</span>
    <span class="description">MAUKE [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> sum&#40;&#41; should return 0</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1056718/552856/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/552856">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 451b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">sum&#40;@xs&#41; returns undef if @xs is empty. It should return 0 instead.

I know the documentation says to call it as sum&#40;0, @xs&#41; but IMHO this
behavior is simply broken, so why should I have to work around it in my
code? I&#39;m tired of having to define sub sum { List::Util::sum 0, @_ }
every time I want to use this function.

NB: In Haskell, sum [] == 0 and product [] == 1, because sum = reduce {
$a + $b } 0, @xs and product = reduce { $a * $b } 1, @xs.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1067931" href="/Public/Bug/Display.html?id=76172#txn-1067931">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;17:15:47&nbsp;2012</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1067931/561482/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/561482">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 275b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 30 14:27:00 2012, MAUKE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; NB: In Haskell, sum [] == 0 and product [] == 1, because sum = reduce {
&gt; $a + $b } 0, @xs and product = reduce { $a * $b } 1, @xs.
</div>
At first glance those sound sensible, yes. I&#39;ll take a look for the next
version.

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1067934" href="/Public/Bug/Display.html?id=76172#txn-1067934">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;15&nbsp;17:15:56&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1068134" href="/Public/Bug/Display.html?id=76172#txn-1068134">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;16&nbsp;08:22:41&nbsp;2012</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Apr 2012 07:22:28 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1068134/561642/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/561642">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 625b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Apr 15, 2012, at 16:15 , Paul Evans via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Scalar-List-Utils
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76172">https://rt.cpan.org/Ticket/Display.html?id=76172</a></span> &gt;
&gt; 
&gt; On Fri Mar 30 14:27:00 2012, MAUKE wrote:
<div class="message-stanza open">&gt;&gt; NB: In Haskell, sum [] == 0 and product [] == 1, because sum = reduce {
&gt;&gt; $a + $b } 0, @xs and product = reduce { $a * $b } 1, @xs.
</div>&gt; 
&gt; At first glance those sound sensible, yes. I&#39;ll take a look for the next
&gt; version.
</div>
It was a deliberate design decision for it to return undef when the argument list was empty
and I can guarantee that changing it will break existing code and suggest you do not change
it.

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1068147" href="/Public/Bug/Display.html?id=76172#txn-1068147">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;16&nbsp;08:59:16&nbsp;2012</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1068147/561653/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/561653">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 97b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Then how about

  sub sum0     { sum 0, @_ }
  sub product1 { product 1, @_ }

?

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1068171" href="/Public/Bug/Display.html?id=76172#txn-1068171">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;16&nbsp;10:23:44&nbsp;2012</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 16 Apr 2012 09:23:30 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1068171/561666/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/561666">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 469b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Apr 16, 2012, at 07:59 , Paul Evans via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Scalar-List-Utils
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76172">https://rt.cpan.org/Ticket/Display.html?id=76172</a></span> &gt;
&gt; 
&gt; Then how about
&gt; 
&gt;  sub sum0     { sum 0, @_ }
&gt;  sub product1 { product 1, @_ }
</div>
I do not think that has any benefit over the caller explicitly passing the identity as the documentation suggests. IMO this addiition needlessly adds to List::Util.

IMO, there is nothing to be done for this ticket.
 
Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135407" href="/Public/Bug/Display.html?id=76172#txn-1135407">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;01&nbsp;09:20:57&nbsp;2012</span>
    <span class="description">EDAVIS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135407/597493/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597493">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 603b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I also feel that it would be much more useful for sum&#40;&#41; to return 0.
The minimum value of an empty list is not defined, so min&#40;&#41; giving undef
makes perfect sense, but that doesn&#39;t generalize to the sum.

But you&#39;re right that for good or bad it is documented to return undef,
and there may be code relying on this &#40;though I would expect to see at
least as much code &#39;relying&#39; on the incorrect assumption that a number
is always returned&#41;.

One way forward would be to specify the behaviour at import time:

use List::Util qw&#40;sum0&#41;

Here you still get &#39;sum&#39; imported but with the more sensible behaviour.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135412" href="/Public/Bug/Display.html?id=76172#txn-1135412">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;01&nbsp;10:08:01&nbsp;2012</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 1 Nov 2012 09:07:41 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135412/597500/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597500">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 360b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I disagree that sum&#40;&#41; should return 0 for an empty list. An empty list has no value.

If you want 0 as the identity, then use sum&#40;0, @list&#41;; This is documented in the POD


  If your algorithm requires that sum produce an identity of 0, then make sure that you
  always pass 0 as the first argument to prevent undef being returned

    $foo = sum 0, @values;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135421" href="/Public/Bug/Display.html?id=76172#txn-1135421">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;01&nbsp;10:33:24&nbsp;2012</span>
    <span class="description">l.mai [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 01 Nov 2012 15:32:58 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lukas Mai &lt;l.mai [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135421/597509/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597509">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 853b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 01.11.2012 15:08, Graham Barr via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76172">https://rt.cpan.org/Ticket/Display.html?id=76172</a></span> &gt;
&gt;
&gt; I disagree that sum&#40;&#41; should return 0 for an empty list.
</div>
Yes, but you&#39;re wrong.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; An empty list has no value.
</div>
An empty list contains zero values. The sum of zero values is 0 because 
0 is the identity for +. Similarly, the product of zero values is 1 
because 1 is the identity for *.
This way it is always the case that sum&#40;$x, @xs&#41; == $x + sum&#40;@xs&#41; and 
similarly, product&#40;$x, @xs&#41; == $x * product&#40;@xs&#41;.

Sources: math, the Haskell standard library

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you want 0 as the identity, then use sum&#40;0, @list&#41;; This is documented in the POD
&gt;
&gt;
&gt;    If your algorithm requires that sum produce an identity of 0, then make sure that you
&gt;    always pass 0 as the first argument to prevent undef being returned
&gt;
&gt;      $foo = sum 0, @values;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135697" href="/Public/Bug/Display.html?id=76172#txn-1135697">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;02&nbsp;11:15:18&nbsp;2012</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135697/597661/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597661">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Nov 01 10:33:24 2012, l.mai@web.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 01.11.2012 15:08, Graham Barr via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76172">https://rt.cpan.org/Ticket/Display.html?id=76172</a></span> &gt;
&gt; &gt;
&gt; &gt; I disagree that sum&#40;&#41; should return 0 for an empty list.
</div>&gt; 
&gt; Yes, but you&#39;re wrong.
</div>
I&#39;m sorry but I&#39;m with Lukas on this one. The sum of an empty list very
much is zero.

Rather, the result of folding an empty list by a binary operator is
simply the identity value of that binary operation - so addition yields
0, multiplication yields 1.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; An empty list has no value.
</div>&gt; 
&gt; An empty list contains zero values. The sum of zero values is 0
&gt; because
&gt; 0 is the identity for +. Similarly, the product of zero values is 1
&gt; because 1 is the identity for *.
&gt; This way it is always the case that sum&#40;$x, @xs&#41; == $x + sum&#40;@xs&#41; and
&gt; similarly, product&#40;$x, @xs&#41; == $x * product&#40;@xs&#41;.
&gt; 
&gt; Sources: math, the Haskell standard library
&gt; 
<div class="message-stanza open">&gt; &gt; If you want 0 as the identity, then use sum&#40;0, @list&#41;; This is
</div>&gt; documented in the POD
<div class="message-stanza open">&gt; &gt;
&gt; &gt;
&gt; &gt;    If your algorithm requires that sum produce an identity of 0,
</div>&gt; then make sure that you
<div class="message-stanza open">&gt; &gt;    always pass 0 as the first argument to prevent undef being
</div>&gt; returned
<div class="message-stanza open">&gt; &gt;
&gt; &gt;      $foo = sum 0, @values;
</div>&gt; 
</div>
However, it would be annoying to change the current behavior of sum&#40;&#41;
and product&#40;&#41; now, because there may be a lot of old code relying on the
undef-return from an empty list.

I suggest a compromise solution.

I will add functions

  use List::Util qw&#40; sum0 product1 &#41;;

that yield 0 and 1 respectively when given an empty list.

I will also look into seeing if it&#39;s possible to detect the version
number that the module is used by, so we can apply similar hackery to

  use 5.010;

to detect a version, and import properly. Given that the current version
is 1.25, the next should be 1.26. Therefore I suggest that if we can
manage it, the following behaviour should hold:

  use List::Util qw&#40; sum sum0 &#41;;

  sum &#40;&#41;  =&gt; undef
  sum0 &#40;&#41; =&gt; 0


  ust List::Util 1.26 qw&#40; sum &#41;;

  sum &#40;&#41;  =&gt; 0

This would be implemented by importing the &#38;sum0 function as the sum
symbol if the requested version is 1.26 or above, meaning that each user
lexically gets to decide which sum behaviour they want.

This would avoid breaking previous code, but allow a neater behaviour
going forward.

Does that please everyone?

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135716" href="/Public/Bug/Display.html?id=76172#txn-1135716">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;02&nbsp;12:03:43&nbsp;2012</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 2 Nov 2012 11:02:53 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135716/597674/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597674">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 560b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Nov 2, 2012, at 10:15 , Paul Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Does that please everyone?
</div>
No. I do not see any point in wasting namespace for sum0 when it can be clearly written as sum&#40;0, @llist&#41; as documented.

And I am TOTALLY against changing sum&#40;&#41; to return 0 for any future version.

We have had this discussion in the past, MJD was one who raised it, and it was settled then that sum&#40;0, @list&#41; is a sufficient compromise to support those that want a zero identity and those that want to use undef to detect that sum&#40;@list&#41; was passed an empty list

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135886" href="/Public/Bug/Display.html?id=76172#txn-1135886">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;02&nbsp;16:57:49&nbsp;2012</span>
    <span class="description">l.mai [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> MAUKE [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 02 Nov 2012 21:57:30 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lukas Mai &lt;l.mai [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135886/597767/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597767">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 02.11.2012 17:03, Graham Barr via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76172">https://rt.cpan.org/Ticket/Display.html?id=76172</a></span> &gt;
&gt;
&gt;
&gt; On Nov 2, 2012, at 10:15 , Paul Evans via RT wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; Does that please everyone?
</div></div>
Just having sum0 would please me a lot. The versioning trickery would 
just be icing on the cake.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No. I do not see any point in wasting namespace for sum0 when it can be clearly written as sum&#40;0, @llist&#41; as documented.
</div>
The point is to have a mathematically correct sum function somewhere, 
preferably in List::Util. &#34;It can be clearly written as sum&#40;0, @list&#41; as 
documented&#34; is a bad excuse for providing a broken sum function by 
default, then expecting not just every user, but every calling site to 
remember to work around it by passing a dummy argument.

It&#39;s also not composable: If a higher-order function takes a coderef 
where I&#39;d normally pass \&#38;sum &#40;or \&#38;sum0 with Paul&#39;s proposal&#41;, I have 
to remember to write sub { sum 0, @_ } instead. Every single time. I&#39;ve 
literally never had a case where I&#39;ve wanted the existing behavior of sum.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And I am TOTALLY against changing sum&#40;&#41; to return 0 for any future version.
</div>
OK, this is debatable. I fully understand not wanting to break existing 
users &#40;though I have a hunch that at least some of them would actually 
be fixed by this change&#41;, but what&#39;s the argument against providing a 
different sum&#40;&#41; to callers who explicitly request it? It leaves existing 
code working and it doesn&#39;t consume a new name.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; We have had this discussion in the past, MJD was one who raised it, and it was settled then that sum&#40;0, @list&#41; is a sufficient compromise to support those that want a zero identity and those that want to use undef to detect that sum&#40;@list&#41; was passed an empty list
</div>
How did you convince MJD? Because as far as I can tell, the matter has 
been unsettled again. I don&#39;t find sum&#40;0, @list&#41; to be a sufficient 
compromise because I&#39;m skeptical that a compromise is needed in the 
first place. What is the use case for sum&#40;&#41; returning undef?

Assuming we did change sum, why is @list ? sum&#40;@list&#41; : undef not a 
sufficient compromise to get the other behavior? It more directly 
expresses the idea of wanting to detect an empty list and returning 
undef in that case.

But that wasn&#39;t even the proposal. I just don&#39;t understand why you&#39;re so 
against changing anything in List::Util ever.

Lukas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135889" href="/Public/Bug/Display.html?id=76172#txn-1135889">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;02&nbsp;17:03:45&nbsp;2012</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 2 Nov 2012 16:03:20 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135889/597770/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597770">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Nov 2, 2012, at 15:57 , Lukas Mai via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
<div class="message-stanza open">&gt;&gt; We have had this discussion in the past, MJD was one who raised it, and it was settled then that sum&#40;0, @list&#41; is a sufficient compromise to support those that want a zero identity and those that want to use undef to detect that sum&#40;@list&#41; was passed an empty list
</div>&gt; 
&gt; How did you convince MJD? Because as far as I can tell, the matter has 
&gt; been unsettled again.
</div>
Just because YOU do not like it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t find sum&#40;0, @list&#41; to be a sufficient 
&gt; compromise because I&#39;m skeptical that a compromise is needed in the 
&gt; first place. What is the use case for sum&#40;&#41; returning undef?
</div>
Whats the use case for NULL in a relational database ?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Assuming we did change sum, why is @list ? sum&#40;@list&#41; : undef not a 
&gt; sufficient compromise to get the other behavior?
</div>
Why is sum&#40;0, @list&#41; not a sufficient compromise ?

The field of programming is not always 100% mathematically correct. Sometimes things are added to make things easier

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It more directly 
&gt; expresses the idea of wanting to detect an empty list and returning 
&gt; undef in that case.
</div>
To me, a programmer not a mathematician sum&#40;0, @list&#41; more clearly expresses that I want zero as a default return.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; But that wasn&#39;t even the proposal. I just don&#39;t understand why you&#39;re so 
&gt; against changing anything in List::Util ever.
</div>
I am not, but I am against reducing functionality.

The point of common libraries is to make code as useful as possible to as many people as possible.
Having sum&#40;&#41; return 0 reduces that IMO.

sum&#40;&#41; is written is not broken as it does exactly what it is documented to do. It sounds like you
just got surprised because you got an undef returned sometime. But thats documented, so IMO is correct.

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1135958" href="/Public/Bug/Display.html?id=76172#txn-1135958">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;02&nbsp;18:26:18&nbsp;2012</span>
    <span class="description">l.mai [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 02 Nov 2012 23:25:59 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Scalar-List-Utils [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lukas Mai &lt;l.mai [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1135958/597807/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/597807">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 02.11.2012 22:03, Graham Barr via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76172">https://rt.cpan.org/Ticket/Display.html?id=76172</a></span> &gt;
&gt;
&gt;
&gt; On Nov 2, 2012, at 15:57 , Lukas Mai via RT wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; We have had this discussion in the past, MJD was one who raised it, and it was settled then that sum&#40;0, @list&#41; is a sufficient compromise to support those that want a zero identity and those that want to use undef to detect that sum&#40;@list&#41; was passed an empty list
</div>&gt;&gt;
&gt;&gt; How did you convince MJD? Because as far as I can tell, the matter has
&gt;&gt; been unsettled again.
</div>&gt;
&gt; Just because YOU do not like it.
</div>
Yes. Is that not enough?

But apparently it&#39;s not just me, because in this bug alone there are 
three people who think sum&#40;&#41; should return 0 &#40;as did MJD, apparently&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I don&#39;t find sum&#40;0, @list&#41; to be a sufficient
&gt;&gt; compromise because I&#39;m skeptical that a compromise is needed in the
&gt;&gt; first place. What is the use case for sum&#40;&#41; returning undef?
</div>&gt;
&gt; Whats the use case for NULL in a relational database ?
</div>
Representing unknown or indeterminate values in columns marked as 
allowing NULLs. For example, a table storing employees might have &#34;birth 
date&#34; or &#34;phone number&#34; fields with NULL entries when the values are not 
known.

What does that have to do with sum?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;
&gt;&gt; Assuming we did change sum, why is @list ? sum&#40;@list&#41; : undef not a
&gt;&gt; sufficient compromise to get the other behavior?
</div>&gt;
&gt; Why is sum&#40;0, @list&#41; not a sufficient compromise ?
</div>
Very funny. I gave a few reasons in the parts of my reply that you snipped.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The field of programming is not always 100% mathematically correct. Sometimes things are added to make things easier
</div>
Yes, and now we want to do exactly that. It just so happens that the 
thing we want to add to make things easier is also 100% mathematically 
correct.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; It more directly
&gt;&gt; expresses the idea of wanting to detect an empty list and returning
&gt;&gt; undef in that case.
</div>&gt;
&gt; To me, a programmer not a mathematician sum&#40;0, @list&#41; more clearly expresses that I want zero as a default return.
</div>
I&#39;m not a mathematician either, and I think the name &#34;sum&#34; already 
implies that. If you wanted a different behavior, I&#39;d suggest a name 
like &#34;sum_with_default&#34; &#40;or &#34;sum_from&#34; to indicate that the 0 is the 
initial value of the accumulator&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;
&gt;&gt; But that wasn&#39;t even the proposal. I just don&#39;t understand why you&#39;re so
&gt;&gt; against changing anything in List::Util ever.
</div>&gt;
&gt; I am not, but I am against reducing functionality.
</div>
I don&#39;t understand. The sum0 proposal adds functionality and removes 
nothing.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The point of common libraries is to make code as useful as possible to as many people as possible.
&gt; Having sum&#40;&#41; return 0 reduces that IMO.
</div>
Yes, but I&#39;m skeptical of your opinion. How do you know how many people 
prefer what?

Besides, &#34;as useful as possible to as many people as possible&#34; can&#39;t be 
our sole principle because blind application of it would lead us to an 
incoherent mess &#40;I&#39;m thinking of PHP here &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://php.net/gzgetss&#41;&#41;">http://php.net/gzgetss&#41;&#41;</a></span>.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; sum&#40;&#41; is written is not broken as it does exactly what it is documented to do. It sounds like you
&gt; just got surprised because you got an undef returned sometime. But thats documented, so IMO is correct.
</div>
I don&#39;t find this argument convincing. For example, consider a sqrt that 
returns the string &#34;nil&#34; if the argument is 0. I would call that broken 
because &#34;nil&#34; is obviously not the square root of anything, and sqrt has 
no business returning a string anyway -- even if that behavior is 
clearly documented, and even if some users actually want that behavior: 
they can just write $x ? sqrt $x : &#34;nil&#34; instead, which is clearer to 
anyone familiar with what sqrt normally does, I think.

To put it more bluntly: A bug doesn&#39;t cease to be a bug just because 
it&#39;s documented. &#40;I don&#39;t think this actually describes the sum issue - 
I&#39;m not accusing you of papering over a faulty implementation by 
documenting the problems or anything.&#41;

&#34;not a bug - works as designed&#34; is more convincing, but I&#39;m arguing that 
in this case the design could be improved.

Lukas
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1158211" href="/Public/Bug/Display.html?id=76172#txn-1158211">#</a>      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;22&nbsp;19:42:07&nbsp;2012</span>
    <span class="description">ether [...] cpan.org -  Cc ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1188134" href="/Public/Bug/Display.html?id=76172#txn-1188134">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;05&nbsp;12:48:14&nbsp;2013</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1188134/626758/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/626758">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 329b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Personally, I would have made sum&#40;&#41; return 0, following the principle of
least surprise.

Neverthless, the API has been set.

I would strongly favor sum0 and product1 *without* import trickery.  The
mere presence of those functions will serve as extra documentation that
regular sum and product might not give you what you want.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1233265" href="/Public/Bug/Display.html?id=76172#txn-1233265">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;08&nbsp;02:38:35&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1233265/651762/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/651762">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 88b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It looks like sum0 shipped with 1.26 last year. Perhaps this ticket should be closed...?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1233487" href="/Public/Bug/Display.html?id=76172#txn-1233487">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;08&nbsp;12:42:08&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> MAUKE [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #76172] sum&#40;&#41; should return 0</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 8 Jul 2013 09:41:35 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Peter Rabbitson via RT &lt;bug-Scalar-List-Utils [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1233487/651897/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/651897">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 422b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Jul 08, 2013 at 02:38:35AM -0400, Peter Rabbitson via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76172">https://rt.cpan.org/Ticket/Display.html?id=76172</a></span> &gt;
&gt; 
&gt; It looks like sum0 shipped with 1.26 last year. Perhaps this ticket should be closed...?
</div>
It would appear it did, however it is not mentioned in the changelog --
could this be added please?

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/diff/release/PEVANS/Scalar-List-Utils-1.25/PEVANS/Scalar-List-Utils-1.26">https://metacpan.org/diff/release/PEVANS/Scalar-List-Utils-1.25/PEVANS/Scalar-List-Utils-1.26</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1235824" href="/Public/Bug/Display.html?id=76172#txn-1235824">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;15&nbsp;12:14:25&nbsp;2013</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1235826" href="/Public/Bug/Display.html?id=76172#txn-1235826">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;15&nbsp;12:14:26&nbsp;2013</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Fixed in 1.26 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1277887" href="/Public/Bug/Display.html?id=76172#txn-1277887">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;22&nbsp;13:00:31&nbsp;2013</span>
    <span class="description">MJD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1277887/677006/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/677006">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 675b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 02 16:57:49 2012, l.mai@web.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; We have had this discussion in the past, MJD was one who raised it,
&gt; &gt; and it was settled then that sum&#40;0, @list&#41; is a sufficient compromise
&gt; &gt; to support those that want a zero identity and those that want to use
&gt; &gt; undef to detect that sum&#40;@list&#41; was passed an empty list
</div>&gt; 
&gt; How did you convince MJD?
</div>
I have just become aware of this discussion, and I would like to place on the record that Graham certainly did not convince me of anything.  My view is that he is clearly and entirely in the wrong here.

But I have seen enough discussions of this type to know when there is no point in arguing, so I let it drop.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.860798</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
