<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46628 for DBD-Oracle: bind_param_inout ORA_RSET causes MSWin32 access violation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46628 for DBD-Oracle: bind_param_inout ORA_RSET causes MSWin32 access violation</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-Oracle/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-Oracle/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/pythian/DBD-Oracle/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Oracle">DBD-Oracle CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46628</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-Oracle/Active/">DBD-Oracle</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jeff.holt [...] method-r.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-10192-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.23    </td>
  </tr>
  <tr id="CF-10193-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;16:25:01&nbsp;2009</span>
    <span class="description">jeff.holt [...] method-r.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bind_param_inout ORA_RSET causes MSWin32 access violation</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached test script causes an access violation on MSWin32 when an
anonymous PL/SQL block execution has an optional sys_refcursor.

The PL/SQL code could open the refcursor but does not. When it does not
and you execute it, then a subsequent bind_param_inout will cause the
access violation. An real example of when this might happen is if an
exception is raised before the sys_refcursor is opened.

My Oracle client version is 11.1.0.7. I applied the fix for bug #46246
&#40;which actually did fix that bug given the supplied repro&#41; but it did
not fix this problem.

Thanks.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 52cursor.t</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use Test::More;
use DBI;
use DBD::Oracle qw&#40;ORA_RSET&#41;;
use strict;

unshift @INC ,&#39;t&#39;;
require &#39;nchar_test_lib.pl&#39;;

plan tests =&gt; 4;

my $dsn = oracle_test_dsn&#40;&#41;;
my $dbuser = $ENV{ORACLE_USERID} || &#39;scott/tiger&#39;;
my $dbh = DBI-&gt;connect&#40;$dsn, $dbuser, &#39;&#39;, { PrintError =&gt; 0 }&#41;;

my $sth0 = $dbh-&gt;prepare&#40;qq{
	BEGIN
		IF FALSE THEN
			OPEN :r FOR SELECT * FROM dual;
		END IF;
	END;
}&#41;;
ok&#40;$sth0, &#39;open cursor&#39;&#41;;
my $sth1;
ok&#40;$sth0-&gt;bind_param_inout&#40;&#34;:r&#34;, \$sth1, 0, {ora_type=&gt;ORA_RSET}&#41;, &#39;bind&#39;&#41;;
ok&#40;$sth0-&gt;execute, &#39;first execute&#39;&#41;;
ok&#40;$sth0-&gt;execute, &#39;second execute&#39;&#41;;

$dbh-&gt;disconnect;

exit 0;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;00:09:44&nbsp;2009</span>
    <span class="description">jeff.holt [...] method-r.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jeff.holt [...] method-r.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Death is occurring in dbd_st_finish when OCIStmtFetch_log_stat, a macro
for OCIStmtFetch2, is executed.

I&#39;m pretty sure that it&#39;s the sys_refcursor handle that&#39;s being cleaned
up when the second $sth0-&gt;execute is executed.

I commented out the &#34;buggy&#34; call to OCIStmtFetch_log_stat and the
subsequent &#39;if&#39;. This had no effect on existing tests &#40;which is odd&#41; and
it did fix my bug. I&#39;ll admit that there were some skipped tests
&#40;10general, 23wide*, 30long, 60reauth&#41; but those don&#39;t appear to be
exercising this now-commented code.

I&#39;m having difficulty understanding why this small bit of code was added
without a test to cover it. It seems to be in a critical path and that&#39;s
why I consider it odd that commenting it out didn&#39;t cause any tests to fail.

At any rate, I don&#39;t like the fact that the fetch is in this function
but I&#39;ve a horrible headache and can&#39;t stomach the blame to find out why
it&#39;s there. Can someone enlighten me, please?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;26&nbsp;15:31:16&nbsp;2012</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I don&#39;t know enough about what is going on here to try to fix the
problem, but I tried the 52cursor.t test &#40;with RaiseError =&gt; 1&#41; and got

$ perl t/52cursor.t                                                    
                                   
1..4
ok 1 - open cursor
ok 2 - bind
DBD::Oracle::st execute failed: ORA-24338: statement handle not executed
&#40;DBD ERROR: OCIAttrGet OCI_ATTR_PARAM_COUNT&#41; [for Statement &#34;
        BEGIN
                IF FALSE THEN
                        OPEN :r FOR SELECT * FROM dual;
                END IF;
        END;
&#34; with ParamValues: :r=DBI::st=HASH&#40;0x9a98528&#41;] at t/52cursor.t line 27.
DBD::Oracle::st execute failed: ORA-24338: statement handle not executed
&#40;DBD ERROR: OCIAttrGet OCI_ATTR_PARAM_COUNT&#41; [for Statement &#34;
        BEGIN
                IF FALSE THEN
                        OPEN :r FOR SELECT * FROM dual;
                END IF;
        END;
&#34; with ParamValues: :r=DBI::st=HASH&#40;0x9a98528&#41;] at t/52cursor.t line 27.
# Looks like you planned 4 tests but ran 2.
# Looks like your test exited with 255 just after 2.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;26&nbsp;15:31:17&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;12&nbsp;12:35:33&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jun 03 00:09:44 2009, jeff.holt@method-r.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Death is occurring in dbd_st_finish when OCIStmtFetch_log_stat, a macro
&gt; for OCIStmtFetch2, is executed.
&gt; 
&gt; I&#39;m pretty sure that it&#39;s the sys_refcursor handle that&#39;s being cleaned
&gt; up when the second $sth0-&gt;execute is executed.
&gt; 
&gt; I commented out the &#34;buggy&#34; call to OCIStmtFetch_log_stat and the
&gt; subsequent &#39;if&#39;. This had no effect on existing tests &#40;which is odd&#41; and
&gt; it did fix my bug. I&#39;ll admit that there were some skipped tests
&gt; &#40;10general, 23wide*, 30long, 60reauth&#41; but those don&#39;t appear to be
&gt; exercising this now-commented code.
&gt; 
&gt; I&#39;m having difficulty understanding why this small bit of code was added
&gt; without a test to cover it. It seems to be in a critical path and that&#39;s
&gt; why I consider it odd that commenting it out didn&#39;t cause any tests to
</div>fail.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; At any rate, I don&#39;t like the fact that the fetch is in this function
&gt; but I&#39;ve a horrible headache and can&#39;t stomach the blame to find out why
&gt; it&#39;s there. Can someone enlighten me, please?
</div>
You may be interested in the dbi-dev discussion regarding an issue I
found very similar to the one you found. You can read it at
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html">http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html</a></span>

I&#39;d be interested in you trying my patch to fix my problem as I think
the problem you identified is very similar. If you are in a position to
do that please let me know and I&#39;ll provide you with the details. If it
does not fix your issue I am happy to work on that too.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;14&nbsp;11:01:56&nbsp;2013</span>
    <span class="description">jeff.holt [...] method-r.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46628] bind_param_inout ORA_RSET causes MSWin32 access violation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Jan 2013 10:01:31 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-Oracle [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Holt &lt;jeff.holt [...] method-r.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, Martin. I&#39;d be happy to try your patch and report back with what I
find. I read your post and agree that your second &#34;hack&#34; is a better
solution than your first. At the moment, I can&#39;t think of anything else to
try so if it works for me then I would endorse it.


On Sat, Jan 12, 2013 at 11:35 AM, Martin J Evans via RT &lt;
bug-DBD-Oracle@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46628">https://rt.cpan.org/Ticket/Display.html?id=46628</a></span> &gt;
&gt;
&gt; On Wed Jun 03 00:09:44 2009, jeff.holt@method-r.com wrote:
<div class="message-stanza open">&gt; &gt; Death is occurring in dbd_st_finish when OCIStmtFetch_log_stat, a macro
&gt; &gt; for OCIStmtFetch2, is executed.
&gt; &gt;
&gt; &gt; I&#39;m pretty sure that it&#39;s the sys_refcursor handle that&#39;s being cleaned
&gt; &gt; up when the second $sth0-&gt;execute is executed.
&gt; &gt;
&gt; &gt; I commented out the &#34;buggy&#34; call to OCIStmtFetch_log_stat and the
&gt; &gt; subsequent &#39;if&#39;. This had no effect on existing tests &#40;which is odd&#41; and
&gt; &gt; it did fix my bug. I&#39;ll admit that there were some skipped tests
&gt; &gt; &#40;10general, 23wide*, 30long, 60reauth&#41; but those don&#39;t appear to be
&gt; &gt; exercising this now-commented code.
&gt; &gt;
&gt; &gt; I&#39;m having difficulty understanding why this small bit of code was added
&gt; &gt; without a test to cover it. It seems to be in a critical path and that&#39;s
&gt; &gt; why I consider it odd that commenting it out didn&#39;t cause any tests to
</div>&gt; fail.
<div class="message-stanza open">&gt; &gt;
&gt; &gt; At any rate, I don&#39;t like the fact that the fetch is in this function
&gt; &gt; but I&#39;ve a horrible headache and can&#39;t stomach the blame to find out why
&gt; &gt; it&#39;s there. Can someone enlighten me, please?
</div>&gt;
&gt; You may be interested in the dbi-dev discussion regarding an issue I
&gt; found very similar to the one you found. You can read it at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html">http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html</a></span>
&gt;
&gt; I&#39;d be interested in you trying my patch to fix my problem as I think
&gt; the problem you identified is very similar. If you are in a position to
&gt; do that please let me know and I&#39;ll provide you with the details. If it
&gt; does not fix your issue I am happy to work on that too.
&gt;
&gt; Martin
&gt; --
&gt; Martin J. Evans
&gt; Wetherby, UK
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;14&nbsp;15:35:38&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 14 11:01:56 2013, jeff.holt@method-r.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, Martin. I&#39;d be happy to try your patch and report back with what I
&gt; find. I read your post and agree that your second &#34;hack&#34; is a better
&gt; solution than your first. At the moment, I can&#39;t think of anything else to
&gt; try so if it works for me then I would endorse it.
</div>
The only problem for me is my second patch could adversely affect anyone
who was expecting a real sth although in fairness it would have failed
later in the execute call calling OCIAttrGet for PARAM_COUNT &#40;so I doubt
anyone is doing that&#41;. Someone here obviously spotted this and put a
false select 1 from dual into the proc where it could not return a
cursor which I thought was really naff &#40;and as you state would not work
if the proc raised an error anyway&#41;. I&#39;ve emailed it to dbi-dev and
await responses &#40;although I note Tim is away for a week&#41;. If I emailed
you a tarball of the current subversion trunk with patch applied would
this be ok for you?

Ragarding the fetch issue you found in the finish/destroy method, I
think this would disappear with patch 2 as you&#39;d never have created a
sth in the first place. I did not write the code you refer to and don&#39;t
really get it so yet another reason why patch 2 is probably better.

I can email you a patched ditrib to try later tonigh or tomorrow.

Martin

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On Sat, Jan 12, 2013 at 11:35 AM, Martin J Evans via RT &lt;
&gt; bug-DBD-Oracle@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46628">https://rt.cpan.org/Ticket/Display.html?id=46628</a></span> &gt;
&gt; &gt;
&gt; &gt; On Wed Jun 03 00:09:44 2009, jeff.holt@method-r.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; Death is occurring in dbd_st_finish when OCIStmtFetch_log_stat, a
</div></div></div>macro
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; for OCIStmtFetch2, is executed.
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;m pretty sure that it&#39;s the sys_refcursor handle that&#39;s being
</div></div>cleaned
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; up when the second $sth0-&gt;execute is executed.
&gt; &gt; &gt;
&gt; &gt; &gt; I commented out the &#34;buggy&#34; call to OCIStmtFetch_log_stat and the
&gt; &gt; &gt; subsequent &#39;if&#39;. This had no effect on existing tests &#40;which is
</div></div>odd&#41; and
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; it did fix my bug. I&#39;ll admit that there were some skipped tests
&gt; &gt; &gt; &#40;10general, 23wide*, 30long, 60reauth&#41; but those don&#39;t appear to be
&gt; &gt; &gt; exercising this now-commented code.
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;m having difficulty understanding why this small bit of code was
</div></div>added
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; without a test to cover it. It seems to be in a critical path and
</div></div>that&#39;s
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; why I consider it odd that commenting it out didn&#39;t cause any tests to
</div>&gt; &gt; fail.
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; At any rate, I don&#39;t like the fact that the fetch is in this function
&gt; &gt; &gt; but I&#39;ve a horrible headache and can&#39;t stomach the blame to find
</div></div>out why
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; it&#39;s there. Can someone enlighten me, please?
</div>&gt; &gt;
&gt; &gt; You may be interested in the dbi-dev discussion regarding an issue I
&gt; &gt; found very similar to the one you found. You can read it at
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html">http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html</a></span>
&gt; &gt;
&gt; &gt; I&#39;d be interested in you trying my patch to fix my problem as I think
&gt; &gt; the problem you identified is very similar. If you are in a position to
&gt; &gt; do that please let me know and I&#39;ll provide you with the details. If it
&gt; &gt; does not fix your issue I am happy to work on that too.
&gt; &gt;
&gt; &gt; Martin
&gt; &gt; --
&gt; &gt; Martin J. Evans
&gt; &gt; Wetherby, UK
&gt; &gt;
</div>

-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;14&nbsp;16:02:12&nbsp;2013</span>
    <span class="description">jeff.holt [...] method-r.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46628] bind_param_inout ORA_RSET causes MSWin32 access violation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Jan 2013 15:02:00 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-Oracle [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Holt &lt;jeff.holt [...] method-r.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">That&#39;s fine, Martin. I can accept a tarball.

On a slightly unrelated note, I thought Tim was out of the DBD support
business. Didn&#39;t pythian take over?


On Mon, Jan 14, 2013 at 2:35 PM, Martin J Evans via RT &lt;
bug-DBD-Oracle@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46628">https://rt.cpan.org/Ticket/Display.html?id=46628</a></span> &gt;
&gt;
&gt; On Mon Jan 14 11:01:56 2013, jeff.holt@method-r.com wrote:
<div class="message-stanza open">&gt; &gt; Yes, Martin. I&#39;d be happy to try your patch and report back with what I
&gt; &gt; find. I read your post and agree that your second &#34;hack&#34; is a better
&gt; &gt; solution than your first. At the moment, I can&#39;t think of anything else
</div>&gt; to
<div class="message-stanza open">&gt; &gt; try so if it works for me then I would endorse it.
</div>&gt;
&gt; The only problem for me is my second patch could adversely affect anyone
&gt; who was expecting a real sth although in fairness it would have failed
&gt; later in the execute call calling OCIAttrGet for PARAM_COUNT &#40;so I doubt
&gt; anyone is doing that&#41;. Someone here obviously spotted this and put a
&gt; false select 1 from dual into the proc where it could not return a
&gt; cursor which I thought was really naff &#40;and as you state would not work
&gt; if the proc raised an error anyway&#41;. I&#39;ve emailed it to dbi-dev and
&gt; await responses &#40;although I note Tim is away for a week&#41;. If I emailed
&gt; you a tarball of the current subversion trunk with patch applied would
&gt; this be ok for you?
&gt;
&gt; Ragarding the fetch issue you found in the finish/destroy method, I
&gt; think this would disappear with patch 2 as you&#39;d never have created a
&gt; sth in the first place. I did not write the code you refer to and don&#39;t
&gt; really get it so yet another reason why patch 2 is probably better.
&gt;
&gt; I can email you a patched ditrib to try later tonigh or tomorrow.
&gt;
&gt; Martin
&gt;
<div class="message-stanza open">&gt; &gt;
&gt; &gt; On Sat, Jan 12, 2013 at 11:35 AM, Martin J Evans via RT &lt;
&gt; &gt; bug-DBD-Oracle@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46628">https://rt.cpan.org/Ticket/Display.html?id=46628</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Wed Jun 03 00:09:44 2009, jeff.holt@method-r.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Death is occurring in dbd_st_finish when OCIStmtFetch_log_stat, a
</div></div></div>&gt; macro
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; for OCIStmtFetch2, is executed.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I&#39;m pretty sure that it&#39;s the sys_refcursor handle that&#39;s being
</div></div>&gt; cleaned
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; up when the second $sth0-&gt;execute is executed.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I commented out the &#34;buggy&#34; call to OCIStmtFetch_log_stat and the
&gt; &gt; &gt; &gt; subsequent &#39;if&#39;. This had no effect on existing tests &#40;which is
</div></div>&gt; odd&#41; and
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; it did fix my bug. I&#39;ll admit that there were some skipped tests
&gt; &gt; &gt; &gt; &#40;10general, 23wide*, 30long, 60reauth&#41; but those don&#39;t appear to be
&gt; &gt; &gt; &gt; exercising this now-commented code.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I&#39;m having difficulty understanding why this small bit of code was
</div></div>&gt; added
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; without a test to cover it. It seems to be in a critical path and
</div></div>&gt; that&#39;s
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; why I consider it odd that commenting it out didn&#39;t cause any tests
</div></div>&gt; to
<div class="message-stanza open">&gt; &gt; &gt; fail.
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; At any rate, I don&#39;t like the fact that the fetch is in this function
&gt; &gt; &gt; &gt; but I&#39;ve a horrible headache and can&#39;t stomach the blame to find
</div></div>&gt; out why
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; it&#39;s there. Can someone enlighten me, please?
</div>&gt; &gt; &gt;
&gt; &gt; &gt; You may be interested in the dbi-dev discussion regarding an issue I
&gt; &gt; &gt; found very similar to the one you found. You can read it at
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html">http://www.mail-archive.com/dbi-dev@perl.org/msg06963.html</a></span>
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;d be interested in you trying my patch to fix my problem as I think
&gt; &gt; &gt; the problem you identified is very similar. If you are in a position to
&gt; &gt; &gt; do that please let me know and I&#39;ll provide you with the details. If it
&gt; &gt; &gt; does not fix your issue I am happy to work on that too.
&gt; &gt; &gt;
&gt; &gt; &gt; Martin
&gt; &gt; &gt; --
&gt; &gt; &gt; Martin J. Evans
&gt; &gt; &gt; Wetherby, UK
&gt; &gt; &gt;
</div>&gt;
&gt;
&gt; --
&gt; Martin J. Evans
&gt; Wetherby, UK
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;14&nbsp;16:20:35&nbsp;2013</span>
    <span class="description">champoux [...] pythian.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46628] bind_param_inout ORA_RSET causes MSWin32 access violation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Jan 2013 16:20:22 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-Oracle [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Yanick Champoux &lt;champoux [...] pythian.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 13-01-14 04:02 PM, Jeff Holt via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On a slightly unrelated note, I thought Tim was out of the DBD support
&gt; business. Didn&#39;t pythian take over?
</div>
     Kinda. We took on the maintainership of the module, but right now 
there is only me working &#40;sporadically&#41; on it. And as my DBD skills 
are... let&#39;s just say not up to par with the mad skillz of everybody 
else involved, I mostly take care of bundling the releases.  :-&#41;


Joy,
`/anick

-- 


--
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;15&nbsp;06:31:53&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 14 16:02:12 2013, jeff.holt@method-r.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That&#39;s fine, Martin. I can accept a tarball.
</div>
Attached DBD::Oracle 1.56 &#40;sorry I did not update the version&#41; with
patch. It also includes a new test case for 50cursor.t. First thing
would be to check it passes the test suite then whatever you were doing.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On a slightly unrelated note, I thought Tim was out of the DBD support
&gt; business. Didn&#39;t pythian take over?
</div>
It was more a case of getting his feedback on the change as I have 2
solutions. I help Yanick maintain DBD::Oracle when I can. Where I work
we heavily depend on DBD::Oracle.

You can find me on irc.perl.org #dbi &#40;as mje&#41; if that is more convenient
if you have any issues.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD-Oracle-1.56.tar.gz</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;16&nbsp;13:19:50&nbsp;2013</span>
    <span class="description">jeff.holt [...] method-r.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46628] bind_param_inout ORA_RSET causes MSWin32 access violation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 16 Jan 2013 12:19:38 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-Oracle [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Holt &lt;jeff.holt [...] method-r.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Your version of the code passes all the tests in the distribution plus my
test, 52cursor.t. I also downloaded the unpatched 1.56 code from cpan and
saw my test fail. I did all this on Linux 2.6.18-92.1.13 i386, perl 5.8.8,
and Oracle 11.1.0.7.

I tried to test the code on MSWin32 but nmake failed &#40;see below if you&#39;re
interested&#41;. It&#39;s been too long for me working on MSWin32 to remember how
to build on that platform.

Even so, I clearly remember my test failed on Linux and MSWin32. It&#39;s just
that the bug manifested slightly differently on the two platforms. So, my
hope is that if the test passes on Linux that it will also pass on MSWin32.


        cl -c  -IC:/ora/11.2.0/OCI/include -IC:/ora/11.2.0/rdbms/demo
-IC:\perl\site\lib\auto\DBI  -nologo -GF -W3 -MD -Zi -D
NDEBUG -O1 -DWIN32 -D_CONSOLE -DNO_STRICT -DHAVE_DES_FCRYPT
-DUSE_SITECUSTOMIZE -DPRIVLIB_LAST_IN_INC -DPERL_IMPLICIT_CONTEXT
 -DPERL_IMPLICIT_SYS -DUSE_PERLIO -DPERL_MSVCRT_READFIX -MD -Zi -DNDEBUG
-O1    -DVERSION=\&#34;1.56\&#34;  -DXS_VERSION=\&#34;1.56\&#34;  &#34;-
IC:\Perl\lib\CORE&#34;  -DUTF8_SUPPORT -DORA_OCI_VERSION=\&#34;11.2.0.1\&#34;
-DORA_OCI_102 -DORA_OCI_112 Oracle.c
cl : Command line warning D4029 : optimization is not available in the
standard edition compiler
Oracle.c
C:/ora\11.2.0\OCI\include\oratypes.h&#40;18&#41; : fatal error C1083: Cannot open
include file: &#39;stddef.h&#39;: No such file or directory

NMAKE : fatal error U1077: &#39;cl&#39; : return code &#39;0x2&#39;


On Tue, Jan 15, 2013 at 5:31 AM, Martin J Evans via RT &lt;
bug-DBD-Oracle@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46628">https://rt.cpan.org/Ticket/Display.html?id=46628</a></span> &gt;
&gt;
&gt; On Mon Jan 14 16:02:12 2013, jeff.holt@method-r.com wrote:
<div class="message-stanza open">&gt; &gt; That&#39;s fine, Martin. I can accept a tarball.
</div>&gt;
&gt; Attached DBD::Oracle 1.56 &#40;sorry I did not update the version&#41; with
&gt; patch. It also includes a new test case for 50cursor.t. First thing
&gt; would be to check it passes the test suite then whatever you were doing.
&gt;
<div class="message-stanza open">&gt; &gt; On a slightly unrelated note, I thought Tim was out of the DBD support
&gt; &gt; business. Didn&#39;t pythian take over?
</div>&gt;
&gt; It was more a case of getting his feedback on the change as I have 2
&gt; solutions. I help Yanick maintain DBD::Oracle when I can. Where I work
&gt; we heavily depend on DBD::Oracle.
&gt;
&gt; You can find me on irc.perl.org #dbi &#40;as mje&#41; if that is more convenient
&gt; if you have any issues.
&gt;
&gt; Martin
&gt; --
&gt; Martin J. Evans
&gt; Wetherby, UK
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;16&nbsp;15:11:56&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 16 13:19:50 2013, jeff.holt@method-r.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Your version of the code passes all the tests in the distribution plus my
&gt; test, 52cursor.t. I also downloaded the unpatched 1.56 code from cpan and
&gt; saw my test fail. I did all this on Linux 2.6.18-92.1.13 i386, perl 5.8.8,
&gt; and Oracle 11.1.0.7.
&gt; 
&gt; I tried to test the code on MSWin32 but nmake failed &#40;see below if you&#39;re
&gt; interested&#41;. It&#39;s been too long for me working on MSWin32 to remember how
&gt; to build on that platform.
&gt; 
&gt; Even so, I clearly remember my test failed on Linux and MSWin32. It&#39;s just
&gt; that the bug manifested slightly differently on the two platforms. So, my
&gt; hope is that if the test passes on Linux that it will also pass on
</div>MSWin32.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt;         cl -c  -IC:/ora/11.2.0/OCI/include -IC:/ora/11.2.0/rdbms/demo
&gt; -IC:\perl\site\lib\auto\DBI  -nologo -GF -W3 -MD -Zi -D
&gt; NDEBUG -O1 -DWIN32 -D_CONSOLE -DNO_STRICT -DHAVE_DES_FCRYPT
&gt; -DUSE_SITECUSTOMIZE -DPRIVLIB_LAST_IN_INC -DPERL_IMPLICIT_CONTEXT
&gt;  -DPERL_IMPLICIT_SYS -DUSE_PERLIO -DPERL_MSVCRT_READFIX -MD -Zi -DNDEBUG
&gt; -O1    -DVERSION=\&#34;1.56\&#34;  -DXS_VERSION=\&#34;1.56\&#34;  &#34;-
&gt; IC:\Perl\lib\CORE&#34;  -DUTF8_SUPPORT -DORA_OCI_VERSION=\&#34;11.2.0.1\&#34;
&gt; -DORA_OCI_102 -DORA_OCI_112 Oracle.c
&gt; cl : Command line warning D4029 : optimization is not available in the
&gt; standard edition compiler
&gt; Oracle.c
&gt; C:/ora\11.2.0\OCI\include\oratypes.h&#40;18&#41; : fatal error C1083: Cannot open
&gt; include file: &#39;stddef.h&#39;: No such file or directory
&gt; 
&gt; NMAKE : fatal error U1077: &#39;cl&#39; : return code &#39;0x2&#39;
</div>
I&#39;m not sure about the Windows issue as I don&#39;t use DBD::Oracle on
Windows. I might find some time to look at it.

Anyway, thanks for trying the patched version. I know the time this
takes and as there is some difference of opinion right now as to what
should happen in OCI in these circumstances &#40;when I see no ill effects
at all and the previous version was clearly broken&#41; it gives me extra
confidence to apply.

I&#39;m just waiting for replies from Charles and may be Tim next week and
then hopefully I will apply it.

Thanks again for the report. Sorry I didn&#39;t jump on it sooner but my
focus was elsewhere.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;05&nbsp;05:48:30&nbsp;2013</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;22&nbsp;15:12:50&nbsp;2013</span>
    <span class="description">champoux [...] pythian.com -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;22&nbsp;16:18:39&nbsp;2013</span>
    <span class="description">jeff.holt [...] method-r.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46628] Resolved: bind_param_inout ORA_RSET causes MSWin32 access violation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 May 2013 15:18:22 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-Oracle [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Holt &lt;jeff.holt [...] method-r.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The last status change is correct. The bug is broken in 1.56 but fixed in
the attached version of 1.56 and also fixed in the latest download from
CPAN, version 1.62.


On Wed, May 22, 2013 at 2:12 PM, Pythian Remote DBA via RT &lt;
bug-DBD-Oracle@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46628">https://rt.cpan.org/Ticket/Display.html?id=46628</a></span> &gt;
&gt;
&gt; According to our records, your request has been resolved. If you have any
&gt; further questions or concerns, please respond to this message.
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
