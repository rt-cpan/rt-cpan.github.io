<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #8263 for IPC-Run: Two AIX-Related bugs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #8263 for IPC-Run: Two AIX-Related bugs</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/IPC-Run/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/IPC-Run/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/IPC-Run/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/IPC-Run/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IPC-Run">IPC-Run CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">8263</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/IPC-Run/Active/">IPC-Run</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RSOD [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tylerm [...] activestate.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-17362-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.78    </td>
  </tr>
  <tr id="CF-17363-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;05&nbsp;16:53:46&nbsp;2004</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Two AIX-Related bugs</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">There are two bugs in IPC::Run which affect it&#39;s interaction with IO::Pty under AIX.

The first bug is identical to the bug in FreeBSD which causes the first block of pty tests to fail. That bug has not been fixed in this patch; the same test-skip logic has been applied when running under AIX.

The second bug involves the fact that AIX does not correctly report EOF when handling PTY&#39;s. I noticed that you have a catch for Win32 for this as well; logic has been added to correctly detect PTY EOF when running under AIX.

Thanks for the extremely handy module,
     Tyler

 
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -dur IPC-Run-0.78.orig/lib/IPC/Run.pm IPC-Run/lib/IPC/Run.pm
--- IPC-Run-0.78.orig/lib/IPC/Run.pm	2004-11-05 13:47:47.000000000 -0800
+++ IPC-Run/lib/IPC/Run.pm	2004-11-05 13:48:05.000000000 -0800
@@ -2397,7 +2397,8 @@
 	       ## read&#40;&#41; throws the bad file descriptor message if the
 	       ## kid dies on Win32.
                die $@ unless
-	          $@ =~ /^Input\/output error: read/
+	          $@ =~ /^Input\/output error: read/ ||
+		  &#40;$@ =~ /input or output/ &#38;&#38; $^O =~ /aix/&#41; 
 		  || &#40; Win32_MODE &#38;&#38; $@ =~ /Bad file descriptor/ &#41; ;
             }
 
diff -dur IPC-Run-0.78.orig/t/pty.t IPC-Run/t/pty.t
--- IPC-Run-0.78.orig/t/pty.t	2004-11-05 13:47:47.000000000 -0800
+++ IPC-Run/t/pty.t	2004-11-05 13:48:05.000000000 -0800
@@ -86,6 +86,7 @@
 my $exp ;
 
 my $freebsd = $^O =~ /freebsd/ ? &#34;freebsd deadlocks on this test&#34; : &#34;&#34; ;
+my $aix = $^O =~ /aix/ ? &#34;this does does not work on AIX&#34; : &#34;&#34; ;
 
 my @tests = &#40;
 ##
@@ -93,6 +94,7 @@
 ##
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    $out = &#39;REPLACE ME&#39; ;
    $? = 99 ;
    $fd_map = _map_fds ;
@@ -105,16 +107,19 @@
 },
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    $exp = qr/^HELLO\n&#40;?!\n&#41;$/ ;
    $err =~ $exp ? ok&#40; 1 &#41; : ok&#40; $err, $exp &#41; ;
 },
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    ok&#40; $in, &#39;&#39; &#41;
 },
 
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    $in  = &#34;world\n&#34; ;
    $? = 0 ;
    pump $h until $out =~ /world/ &#38;&#38; $err =~ /WORLD/ ;
@@ -122,25 +127,30 @@
 },
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    $exp = qr/^HELLO\nWORLD\n&#40;?!\n&#41;$/ ;
    $err =~ $exp ? ok&#40; 1 &#41; : ok&#40; $err, $exp &#41; ;
 },
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    ok&#40; $in, &#39;&#39; &#41;
 },
 
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    $in = &#34;quit\n&#34; ;
    ok&#40; $h-&gt;finish &#41; ;
 },
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    ok&#40; ! $? &#41;
 },
 sub {
    return skip $freebsd, 1 if $freebsd;
+   return skip $aix, 1 if $aix;
    ok&#40; _map_fds, $fd_map &#41;
 },
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;19&nbsp;18:09:22&nbsp;2005</span>
    <span class="description">RSOD [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;19&nbsp;18:09:22&nbsp;2005</span>
    <span class="description">RSOD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks, these fixes will be part of the next CPAN release in 1-3 days.

 - R.

[guest - Fri Nov  5 16:53:46 2004]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There are two bugs in IPC::Run which affect it&#39;s interaction with
&gt;    IO::Pty under AIX.
&gt; 
&gt; The first bug is identical to the bug in FreeBSD which causes the
&gt;    first block of pty tests to fail. That bug has not been fixed in
&gt;    this patch; the same test-skip logic has been applied when running
&gt;    under AIX.
&gt; 
&gt; The second bug involves the fact that AIX does not correctly report
&gt;    EOF when handling PTY&#39;s. I noticed that you have a catch for Win32
&gt;    for this as well; logic has been added to correctly detect PTY EOF
&gt;    when running under AIX.
&gt; 
&gt; Thanks for the extremely handy module,
&gt;      Tyler
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;19&nbsp;18:09:22&nbsp;2005</span>
    <span class="description">RSOD [...] cpan.org -  Given to RSOD</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
