<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #99607 for Wx: Issue using wxTextEntryBox</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #99607 for Wx: Issue using wxTextEntryBox</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Wx/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Wx/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Wx/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Wx/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Wx">Wx CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">99607</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Wx/Active/">Wx</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
pwnbusiness2012 [...] centurylink.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-36684-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-36685-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;20&nbsp;19:52:16&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 20 Oct 2014 19:52:05 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello, 

I was attempting to use a wxTextEntryBox object in my application and I ran into a little issue. 

I&#39;m using Wx 0.9923 and Strawberry Perl v. 5.16.3 &#40;built for MSWin32-x86-multi-thread&#41; under Windows XP 32-bit SP3. It think the WxWidgets install is v. 3.0.0. 

The following is the code: 

#!/usr/bin/env perl 

use warnings; 
use strict; 
use Wx qw&#40;:everything&#41;; 


package MyFrame; 

use base &#39;Wx::Frame&#39;; 

sub new { 

my $ref = shift; 
my $self = $ref-&gt;SUPER::new&#40; undef, 
1, 
&#39;Parent Window&#39;, 
Wx::wxDefaultPosition, 
[500, 500], 
&#41;; 
my $panel = Wx::Panel-&gt;new&#40; $self, 
2 
&#41;; 
my $dialog = Wx::TextEntryDialog-&gt;new&#40; $panel, 
&#39;Please Enter Text&#39;, 
&#39;Dialog Header&#39;, 
&#34;&#34;, 
Wx::wxOK|Wx::wxCANCEL, 
Wx::wxDefaultPosition 
&#41;; 

return $self; 
} 

package MyApp; 

use base &#39;Wx::App&#39;; 

sub OnInit { 

my $frame = MyFrame-&gt;new; 

$frame-&gt;Show&#40; 1 &#41;; 

} 

package main; 

my $app = MyApp-&gt;new; 
$app-&gt;MainLoop; 

When I launch this code from the command prompt in a command window and then exit the program normally &#40;using the red &#34;X&#34; in the upper right hand side of the window&#41;, the window closes, but the program does not terminate. I have to use Control+C to get the command prompt to return and I get the message &#34;Terminating on signal SIGINT&#40;2&#41;.&#34; If I comment out the call to the &#34;new&#34; method of the TextEntryDialog, the program will exit normally and the command prompt will be redisplayed with no error message. 

Thanks for your time. 

Patrick Nighswonger 
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;02:26:08&nbsp;2014</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Patrick,

Add this line after the dialog creation and try again. You might understand what is happening.

    $dialog-&gt;Show&#40;1&#41;;

-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;02:26:08&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;04:00:48&nbsp;2014</span>
    <span class="description">steve.cookson [...] sca-uk.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 09:00:26 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org, wxperl-users [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steve Cookson &lt;steve.cookson [...] sca-uk.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Patrick,

On 21-10-2014 00:52, Patrick via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; my $self = $ref-&gt;SUPER::new&#40; undef,
&gt; 1,
&gt; &#39;Parent Window&#39;,
&gt; Wx::wxDefaultPosition,
&gt; [500, 500],
&gt; &#41;;
&gt; my $panel = Wx::Panel-&gt;new&#40; $self,
&gt; 2
&gt; &#41;;
</div>If you use -1 &#40;or wxID_ANY&#41; as the widget ID, it will assign the next 
free identifier. Then you don&#39;t have to keep track of what has already 
been used.

Regards,

Steve.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;04:20:44&nbsp;2014</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 21 02:26:08 2014, ecocode wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Patrick,
&gt; 
&gt; Add this line after the dialog creation and try again. You might
&gt; understand what is happening.
&gt; 
&gt; $dialog-&gt;Show&#40;1&#41;;
</div>
I&#39;ll explain my point of view on this:

Wx::TextEntryBox is a &#39;convenience&#39; Dialog which, although &#39;parent&#39; aught to be defined in the constructor, the dialog is not added as a children to the parent. Reason for this is that $dialog has no wxwindow ID &#40;look at the constructor params&#41;. Therefor it can&#39;t be added as a children to any wx container.  This kind of dialogs are ment to be used in procedures where they are shown modally, and then destroyed.

You can use DDP to show the relation to other widgets i.e.:
use DDP;
p $frame-&gt;GetChildren;   # should show the panel as a children
p $panel-&gt;GetChildren;   # doesn&#39;t show the dialog as a children

also try 
p $panel;
p $dialog;

which illustrates the internal difference between both.

In conclusion: destroying $frame destroys $panel, but won&#39;t destroy $dialog, because it is _not_ the child of $panel.
So, you are on your own to destroy the dialog with

$dialog-&gt;Destroy;

you can argue against this behaviour, but this is rather wxwidgets related and probably shouldn&#39;t be altered in wxPerl, assuming it can be.
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;08:04:43&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 08:04:20 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the suggestion.  I find it convenient to use explicit identifiers on everything since I do need to use explicit identifiers on some things to access them in certain situations.  This code sample doesn&#39;t reflect that fact, but it is a clip from a larger piece.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Steve Cookson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 4:00:48 AM
Subject: Re: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

Hi Patrick,

On 21-10-2014 00:52, Patrick via RT wrote:
<div class="message-stanza open">&gt; my $self = $ref-&gt;SUPER::new&#40; undef,
&gt; 1,
&gt; &#39;Parent Window&#39;,
&gt; Wx::wxDefaultPosition,
&gt; [500, 500],
&gt; &#41;;
&gt; my $panel = Wx::Panel-&gt;new&#40; $self,
&gt; 2
&gt; &#41;;
</div>If you use -1 &#40;or wxID_ANY&#41; as the widget ID, it will assign the next 
free identifier. Then you don&#39;t have to keep track of what has already 
been used.

Regards,

Steve.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;08:06:09&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 08:05:59 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the response.  In another piece of code, I actually used a ShowModal&#40;&#41; call to display the window with the same result.  I think I follow what you are saying, and I will give it a try.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Erik Colson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 4:20:44 AM
Subject: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

On Tue Oct 21 02:26:08 2014, ecocode wrote:
<div class="message-stanza open">&gt; Hi Patrick,
&gt; 
&gt; Add this line after the dialog creation and try again. You might
&gt; understand what is happening.
&gt; 
&gt; $dialog-&gt;Show&#40;1&#41;;
</div>
I&#39;ll explain my point of view on this:

Wx::TextEntryBox is a &#39;convenience&#39; Dialog which, although &#39;parent&#39; aught to be defined in the constructor, the dialog is not added as a children to the parent. Reason for this is that $dialog has no wxwindow ID &#40;look at the constructor params&#41;. Therefor it can&#39;t be added as a children to any wx container.  This kind of dialogs are ment to be used in procedures where they are shown modally, and then destroyed.

You can use DDP to show the relation to other widgets i.e.:
use DDP;
p $frame-&gt;GetChildren;   # should show the panel as a children
p $panel-&gt;GetChildren;   # doesn&#39;t show the dialog as a children

also try 
p $panel;
p $dialog;

which illustrates the internal difference between both.

In conclusion: destroying $frame destroys $panel, but won&#39;t destroy $dialog, because it is _not_ the child of $panel.
So, you are on your own to destroy the dialog with

$dialog-&gt;Destroy;

you can argue against this behaviour, but this is rather wxwidgets related and probably shouldn&#39;t be altered in wxPerl, assuming it can be.
-- 
Erik
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;09:10:12&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 09:09:47 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I tried what you suggested, and nothing changes.  I use a SingleChoiceDialog in another program and this works flawlessly.  It seems to be of the same vein as the TextEntryBox.  How is the SingleChoiceDialog handled?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Erik Colson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 4:20:44 AM
Subject: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

On Tue Oct 21 02:26:08 2014, ecocode wrote:
<div class="message-stanza open">&gt; Hi Patrick,
&gt; 
&gt; Add this line after the dialog creation and try again. You might
&gt; understand what is happening.
&gt; 
&gt; $dialog-&gt;Show&#40;1&#41;;
</div>
I&#39;ll explain my point of view on this:

Wx::TextEntryBox is a &#39;convenience&#39; Dialog which, although &#39;parent&#39; aught to be defined in the constructor, the dialog is not added as a children to the parent. Reason for this is that $dialog has no wxwindow ID &#40;look at the constructor params&#41;. Therefor it can&#39;t be added as a children to any wx container.  This kind of dialogs are ment to be used in procedures where they are shown modally, and then destroyed.

You can use DDP to show the relation to other widgets i.e.:
use DDP;
p $frame-&gt;GetChildren;   # should show the panel as a children
p $panel-&gt;GetChildren;   # doesn&#39;t show the dialog as a children

also try 
p $panel;
p $dialog;

which illustrates the internal difference between both.

In conclusion: destroying $frame destroys $panel, but won&#39;t destroy $dialog, because it is _not_ the child of $panel.
So, you are on your own to destroy the dialog with

$dialog-&gt;Destroy;

you can argue against this behaviour, but this is rather wxwidgets related and probably shouldn&#39;t be altered in wxPerl, assuming it can be.
-- 
Erik
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;11:15:01&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 11:14:45 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Isn&#39;t the &#34;parent&#34; parameter in the call to the &#34;new&#34; method the parent window?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Erik Colson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 4:20:44 AM
Subject: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

On Tue Oct 21 02:26:08 2014, ecocode wrote:
<div class="message-stanza open">&gt; Hi Patrick,
&gt; 
&gt; Add this line after the dialog creation and try again. You might
&gt; understand what is happening.
&gt; 
&gt; $dialog-&gt;Show&#40;1&#41;;
</div>
I&#39;ll explain my point of view on this:

Wx::TextEntryBox is a &#39;convenience&#39; Dialog which, although &#39;parent&#39; aught to be defined in the constructor, the dialog is not added as a children to the parent. Reason for this is that $dialog has no wxwindow ID &#40;look at the constructor params&#41;. Therefor it can&#39;t be added as a children to any wx container.  This kind of dialogs are ment to be used in procedures where they are shown modally, and then destroyed.

You can use DDP to show the relation to other widgets i.e.:
use DDP;
p $frame-&gt;GetChildren;   # should show the panel as a children
p $panel-&gt;GetChildren;   # doesn&#39;t show the dialog as a children

also try 
p $panel;
p $dialog;

which illustrates the internal difference between both.

In conclusion: destroying $frame destroys $panel, but won&#39;t destroy $dialog, because it is _not_ the child of $panel.
So, you are on your own to destroy the dialog with

$dialog-&gt;Destroy;

you can argue against this behaviour, but this is rather wxwidgets related and probably shouldn&#39;t be altered in wxPerl, assuming it can be.
-- 
Erik
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;12:06:09&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 12:05:48 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I ran it with Data Dumper.  $dialog does not show up as a child.  When I create a wxSingleChoiceDialog, that does show up as a child.  Why is the handling of these two different?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Erik Colson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 4:20:44 AM
Subject: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

On Tue Oct 21 02:26:08 2014, ecocode wrote:
<div class="message-stanza open">&gt; Hi Patrick,
&gt; 
&gt; Add this line after the dialog creation and try again. You might
&gt; understand what is happening.
&gt; 
&gt; $dialog-&gt;Show&#40;1&#41;;
</div>
I&#39;ll explain my point of view on this:

Wx::TextEntryBox is a &#39;convenience&#39; Dialog which, although &#39;parent&#39; aught to be defined in the constructor, the dialog is not added as a children to the parent. Reason for this is that $dialog has no wxwindow ID &#40;look at the constructor params&#41;. Therefor it can&#39;t be added as a children to any wx container.  This kind of dialogs are ment to be used in procedures where they are shown modally, and then destroyed.

You can use DDP to show the relation to other widgets i.e.:
use DDP;
p $frame-&gt;GetChildren;   # should show the panel as a children
p $panel-&gt;GetChildren;   # doesn&#39;t show the dialog as a children

also try 
p $panel;
p $dialog;

which illustrates the internal difference between both.

In conclusion: destroying $frame destroys $panel, but won&#39;t destroy $dialog, because it is _not_ the child of $panel.
So, you are on your own to destroy the dialog with

$dialog-&gt;Destroy;

you can argue against this behaviour, but this is rather wxwidgets related and probably shouldn&#39;t be altered in wxPerl, assuming it can be.
-- 
Erik
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;15:43:41&nbsp;2014</span>
    <span class="description">steve.cookson [...] sca-uk.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 20:43:24 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org, wxperl-users [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steve Cookson &lt;steve.cookson [...] sca-uk.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Patrick,

On 21-10-2014 17:06, Patrick via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   When I create a wxSingleChoiceDialog, that does show up as a child.  Why is the handling of these two different?
</div>Well, the implementation of the wxSingleChoiceDialog is much more 
complicated. You can look in wxPerl::XS. Here isTextEntryBox:

    wxTextEntryDialog::new&#40; parent, message, caption =
    wxGetTextFromUserPromptStr, defaultValue = wxEmptyString, style =
    wxTextEntryDialogStyle, pos = wxDefaultPosition &#41;
         wxWindow* parent
         wxString message
         wxString caption
         wxString defaultValue
         long style
         wxPoint pos


and here is wxSingleChoiceDialog:

    wxSingleChoiceDialog::new&#40; parent, message, caption, chs, dt =
    &#38;PL_sv_undef, style = wxCHOICEDLG_STYLE, pos = wxDefaultPosition &#41;
         wxWindow* parent
         wxString message
         wxString caption
         SV* chs
         SV* dt
         long style
         wxPoint pos
       PREINIT:
         wxString* choices;
         SV** data;
         int n, n2;
       CODE:
         n = wxPli_av_2_stringarray&#40; aTHX_ chs, &#38;choices &#41;;
         if&#40; !SvOK&#40; dt &#41; &#41;
         {
           RETVAL = new wxPliSingleChoiceDialog&#40; parent, message,
    caption, n,
                 choices, 0, style, pos &#41;;
         }
         else
         {
           n2 = wxPli_av_2_svarray&#40; aTHX_ dt, &#38;data &#41;;
           if&#40; n != n2 &#41;
           {
             delete[] choices;
             delete[] data;
             choices = 0; data = 0; n = 0;
             croak&#40; &#34;supplied arrays of different size&#34; &#41;;
           }
           RETVAL = new wxPliSingleChoiceDialog&#40; parent, message,
    caption, n,
                 choices, data, style, pos &#41;;
           delete[] data;
         }
         delete[] choices;
       OUTPUT:
         RETVAL

wxSingleChoiceDialog has a whole new .cpp function 
&#40;wxPliSingleChoiceDialog&#41; written within wxPerl.  It also has a 
destructor there.  It is one of only 7 .cpps. It&#39;s not clear to me how 
the destructor it is called, but the two functions are implemented very 
differently.

It would be good to understand why they are different and bring them 
into line with each other.

Regards,

Steve.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;16:16:09&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 16:15:57 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the reply, Steve.  I can see what you are saying.  I have C and some slight C++ experience from years ago.  It was just when OOP was starting to take off.  I&#39;d be glad to try to get oriented enough that I could make a little contribution, but right now I&#39;m a little disoriented in the syntax and protocol of the open-source contribution system not to mention the wxperl contribution system.  What file is the wxTextEntryDialog code in?  I can see the wxSingleChoiceDialog that you are speaking of.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Steve Cookson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 3:43:42 PM
Subject: Re: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

Hi Patrick,

On 21-10-2014 17:06, Patrick via RT wrote:
<div class="message-stanza open">&gt;   When I create a wxSingleChoiceDialog, that does show up as a child.  Why is the handling of these two different?
</div>Well, the implementation of the wxSingleChoiceDialog is much more 
complicated. You can look in wxPerl::XS. Here isTextEntryBox:

    wxTextEntryDialog::new&#40; parent, message, caption =
    wxGetTextFromUserPromptStr, defaultValue = wxEmptyString, style =
    wxTextEntryDialogStyle, pos = wxDefaultPosition &#41;
         wxWindow* parent
         wxString message
         wxString caption
         wxString defaultValue
         long style
         wxPoint pos


and here is wxSingleChoiceDialog:

    wxSingleChoiceDialog::new&#40; parent, message, caption, chs, dt =
    &#38;PL_sv_undef, style = wxCHOICEDLG_STYLE, pos = wxDefaultPosition &#41;
         wxWindow* parent
         wxString message
         wxString caption
         SV* chs
         SV* dt
         long style
         wxPoint pos
       PREINIT:
         wxString* choices;
         SV** data;
         int n, n2;
       CODE:
         n = wxPli_av_2_stringarray&#40; aTHX_ chs, &#38;choices &#41;;
         if&#40; !SvOK&#40; dt &#41; &#41;
         {
           RETVAL = new wxPliSingleChoiceDialog&#40; parent, message,
    caption, n,
                 choices, 0, style, pos &#41;;
         }
         else
         {
           n2 = wxPli_av_2_svarray&#40; aTHX_ dt, &#38;data &#41;;
           if&#40; n != n2 &#41;
           {
             delete[] choices;
             delete[] data;
             choices = 0; data = 0; n = 0;
             croak&#40; &#34;supplied arrays of different size&#34; &#41;;
           }
           RETVAL = new wxPliSingleChoiceDialog&#40; parent, message,
    caption, n,
                 choices, data, style, pos &#41;;
           delete[] data;
         }
         delete[] choices;
       OUTPUT:
         RETVAL

wxSingleChoiceDialog has a whole new .cpp function 
&#40;wxPliSingleChoiceDialog&#41; written within wxPerl.  It also has a 
destructor there.  It is one of only 7 .cpps. It&#39;s not clear to me how 
the destructor it is called, but the two functions are implemented very 
differently.

It would be good to understand why they are different and bring them 
into line with each other.

Regards,

Steve.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;16:38:25&nbsp;2014</span>
    <span class="description">steveco.1959 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 21:38:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org, wxperl-users [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steve Cookson - gmail &lt;steveco.1959 [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Patrick,

On 21-10-2014 21:16, Patrick via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the reply, Steve.  I can see what you are saying.  I have C and some slight C++ experience from years ago.  It was just when OOP was starting to take off.  I&#39;d be glad to try to get oriented enough that I could make a little contribution, but right now I&#39;m a little disoriented in the syntax and protocol of the open-source contribution system not to mention the wxperl contribution system.
</div>Your not alone in that! wxPerl has been more organised in the past, but 
we&#39;ve been through a bit of a hiatus this year and we&#39;re still trying to 
pull ourselves together.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What file is the wxTextEntryDialog code in?
</div>wxPerl::XS::TextEntryDialog.xs

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can see the wxSingleChoiceDialog that you are speaking of.
</div>wxPerl::XS::SingleChoiceDialog.xs
wxPerl::cpp::SingleChoiceDialog.

But there are many other references to all these files across the 
directories in MANIFEST files, Makefile files and typemap files among 
others.

There are some descriptions about how it all hangs together on the wiki, 
here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/Main_Page">http://wiki.wxperl.nl/Main_Page</a></span>

especially the first two items:

here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/NewClass">http://wiki.wxperl.nl/NewClass</a></span>

and here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/Internals_-_Introduction_to_Wx_XS_Wrappers">http://wiki.wxperl.nl/Internals_-_Introduction_to_Wx_XS_Wrappers</a></span>

Good luck.

Regards

Steve
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;21&nbsp;16:54:35&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 21 Oct 2014 16:54:21 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Wx [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick Nighswonger&#34; &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks.  I&#39;ll see what I can digest of it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----- 
From: &#34;Steve Cookson - gmail via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: &lt;pwnbusiness2012@centurylink.net&gt;
Sent: Tuesday, October 21, 2014 4:38 PM
Subject: Re: [rt.cpan.org #99607] Issue using wxTextEntryBox


<div class="message-stanza open">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;
&gt;
&gt; Hi Patrick,
&gt;
&gt; On 21-10-2014 21:16, Patrick via RT wrote:
<div class="message-stanza open">&gt;&gt; Thanks for the reply, Steve.  I can see what you are saying.  I have C 
&gt;&gt; and some slight C++ experience from years ago.  It was just when OOP was 
&gt;&gt; starting to take off.  I&#39;d be glad to try to get oriented enough that I 
&gt;&gt; could make a little contribution, but right now I&#39;m a little disoriented 
&gt;&gt; in the syntax and protocol of the open-source contribution system not to 
&gt;&gt; mention the wxperl contribution system.
</div>&gt; Your not alone in that! wxPerl has been more organised in the past, but
&gt; we&#39;ve been through a bit of a hiatus this year and we&#39;re still trying to
&gt; pull ourselves together.
<div class="message-stanza open">&gt;&gt; What file is the wxTextEntryDialog code in?
</div>&gt; wxPerl::XS::TextEntryDialog.xs
&gt;
<div class="message-stanza open">&gt;&gt; I can see the wxSingleChoiceDialog that you are speaking of.
</div>&gt; wxPerl::XS::SingleChoiceDialog.xs
&gt; wxPerl::cpp::SingleChoiceDialog.
&gt;
&gt; But there are many other references to all these files across the
&gt; directories in MANIFEST files, Makefile files and typemap files among
&gt; others.
&gt;
&gt; There are some descriptions about how it all hangs together on the wiki,
&gt; here:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/Main_Page">http://wiki.wxperl.nl/Main_Page</a></span>
&gt;
&gt; especially the first two items:
&gt;
&gt; here:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/NewClass">http://wiki.wxperl.nl/NewClass</a></span>
&gt;
&gt; and here:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/Internals_-_Introduction_to_Wx_XS_Wrappers">http://wiki.wxperl.nl/Internals_-_Introduction_to_Wx_XS_Wrappers</a></span>
&gt;
&gt; Good luck.
&gt;
&gt; Regards
&gt;
&gt; Steve
&gt; 
</div>

---
This email is free from viruses and malware because avast! Antivirus protection is active.
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.avast.com">http://www.avast.com</a></span>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;22&nbsp;08:50:34&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Oct 2014 08:50:21 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just from a quick look over a few things, it looks like the only difference in is that the wxSingleChoiceDialog XS&#40;?&#41; file handles client data or if client data is not present, an overloading situation exits.  It may be a problem in wxWidgets itself and not in wxperl.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Steve Cookson - gmail via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 4:38:25 PM
Subject: Re: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

Hi Patrick,

On 21-10-2014 21:16, Patrick via RT wrote:
<div class="message-stanza open">&gt; Thanks for the reply, Steve.  I can see what you are saying.  I have C and some slight C++ experience from years ago.  It was just when OOP was starting to take off.  I&#39;d be glad to try to get oriented enough that I could make a little contribution, but right now I&#39;m a little disoriented in the syntax and protocol of the open-source contribution system not to mention the wxperl contribution system.
</div>Your not alone in that! wxPerl has been more organised in the past, but 
we&#39;ve been through a bit of a hiatus this year and we&#39;re still trying to 
pull ourselves together.
<div class="message-stanza open">&gt; What file is the wxTextEntryDialog code in?
</div>wxPerl::XS::TextEntryDialog.xs

<div class="message-stanza open">&gt; I can see the wxSingleChoiceDialog that you are speaking of.
</div>wxPerl::XS::SingleChoiceDialog.xs
wxPerl::cpp::SingleChoiceDialog.

But there are many other references to all these files across the 
directories in MANIFEST files, Makefile files and typemap files among 
others.

There are some descriptions about how it all hangs together on the wiki, 
here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/Main_Page">http://wiki.wxperl.nl/Main_Page</a></span>

especially the first two items:

here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/NewClass">http://wiki.wxperl.nl/NewClass</a></span>

and here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.wxperl.nl/Internals_-_Introduction_to_Wx_XS_Wrappers">http://wiki.wxperl.nl/Internals_-_Introduction_to_Wx_XS_Wrappers</a></span>

Good luck.

Regards

Steve
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;22&nbsp;08:55:14&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 22 Oct 2014 08:54:59 -0400 &#40;EDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Wx [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Patrick &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#40;repost&#41;
Just from a quick look over a few things, it looks like the only difference in them is that the wxSingleChoiceDialog XS&#40;?&#41; file handles client data or if client data is not present, an overloading situation exists.  It may be a problem in wxWidgets itself and not in wxperl.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: &#34;Patrick&#34; &lt;pwnbusiness2012@centurylink.net&gt;
To: bug-Wx@rt.cpan.org
Sent: Tuesday, October 21, 2014 4:15:57 PM
Subject: Re: [rt.cpan.org #99607] Issue using wxTextEntryBox

Thanks for the reply, Steve.  I can see what you are saying.  I have C and some slight C++ experience from years ago.  It was just when OOP was starting to take off.  I&#39;d be glad to try to get oriented enough that I could make a little contribution, but right now I&#39;m a little disoriented in the syntax and protocol of the open-source contribution system not to mention the wxperl contribution system.  What file is the wxTextEntryDialog code in?  I can see the wxSingleChoiceDialog that you are speaking of.

<div class="message-stanza open">----- Original Message -----
From: &#34;Steve Cookson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: pwnbusiness2012@centurylink.net
Sent: Tuesday, October 21, 2014 3:43:42 PM
Subject: Re: [rt.cpan.org #99607] Issue using wxTextEntryBox

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;

Hi Patrick,

On 21-10-2014 17:06, Patrick via RT wrote:
<div class="message-stanza open">&gt;   When I create a wxSingleChoiceDialog, that does show up as a child.  Why is the handling of these two different?
</div>Well, the implementation of the wxSingleChoiceDialog is much more 
complicated. You can look in wxPerl::XS. Here isTextEntryBox:

    wxTextEntryDialog::new&#40; parent, message, caption =
    wxGetTextFromUserPromptStr, defaultValue = wxEmptyString, style =
    wxTextEntryDialogStyle, pos = wxDefaultPosition &#41;
         wxWindow* parent
         wxString message
         wxString caption
         wxString defaultValue
         long style
         wxPoint pos


and here is wxSingleChoiceDialog:

    wxSingleChoiceDialog::new&#40; parent, message, caption, chs, dt =
    &#38;PL_sv_undef, style = wxCHOICEDLG_STYLE, pos = wxDefaultPosition &#41;
         wxWindow* parent
         wxString message
         wxString caption
         SV* chs
         SV* dt
         long style
         wxPoint pos
       PREINIT:
         wxString* choices;
         SV** data;
         int n, n2;
       CODE:
         n = wxPli_av_2_stringarray&#40; aTHX_ chs, &#38;choices &#41;;
         if&#40; !SvOK&#40; dt &#41; &#41;
         {
           RETVAL = new wxPliSingleChoiceDialog&#40; parent, message,
    caption, n,
                 choices, 0, style, pos &#41;;
         }
         else
         {
           n2 = wxPli_av_2_svarray&#40; aTHX_ dt, &#38;data &#41;;
           if&#40; n != n2 &#41;
           {
             delete[] choices;
             delete[] data;
             choices = 0; data = 0; n = 0;
             croak&#40; &#34;supplied arrays of different size&#34; &#41;;
           }
           RETVAL = new wxPliSingleChoiceDialog&#40; parent, message,
    caption, n,
                 choices, data, style, pos &#41;;
           delete[] data;
         }
         delete[] choices;
       OUTPUT:
         RETVAL

wxSingleChoiceDialog has a whole new .cpp function 
&#40;wxPliSingleChoiceDialog&#41; written within wxPerl.  It also has a 
destructor there.  It is one of only 7 .cpps. It&#39;s not clear to me how 
the destructor it is called, but the two functions are implemented very 
differently.

It would be good to understand why they are different and bring them 
into line with each other.

Regards,

Steve.
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;27&nbsp;15:05:08&nbsp;2014</span>
    <span class="description">mdootson [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Your issue with Wx::TextEntryBox arises from the basic way wxWidgets handles applications and windows.

The basic rule is that the main application loop will exit when no more instances of Wx::TopLevelWindow &#40; e.g. Wx::Frame and Wx::Dialog &#41; exist in the application.

Top level windows &#40;Frames and Dialogs&#41; must be explicitly destroyed.

$dialog_&gt;Destroy;

unless your code causes them to be destroyed by some other method &#40;such as being a child of another TopLevelWindow when it is destroyed or the automatic behaviour when you close the window using system menus / buttons&#41;.

In your example, none of these things happens so the application loop never exits. Your Wx::TextEntryDialog has no parent so continues to exist after you close your Frame.

Dialogs designed for modal usage, such as Wx::TextEntryDialog, need to have a valid parent to work properly, or be created as  a special case without a parent.

When you create the dialog and pass in the Wx::Panel as the parent the following things happen.

Dialogs need top level parents so the wxWidgets code determines the parent of Wx::Panel - your frame - and checks if that is a valid parent. It isn&#39;t - a parent top level window needs to be visible on the display to be a valid parent for a dialog. So the dialog is created without a parent. When you close the $frame, the TextEntryDialog is left hanging around so the main application loop never exits.

In this situation, wxWidgets will use anything you have set as the top window &#40;wxTheApp-&gt;SetTopWindow&#41; but your example does not do this.

In standard usage you would always do:

my $dialog = Wx::textEntryDialog-&gt;new&#40;....&#41;;
my $result = $dialog-&gt;ShowModal;
# .. get stuff from dialog
$dialog-&gt;Destroy;

so your particular issue would not arise.

With regard to the different in implementation between Wx:TextEntryDialog and Wx::SingleChoiceDialog, it is indeed because of the use of client data. The wxPerl implementation allows you to pass a reference to an array of anything &#40;so maybe references to objects&#41; so a C++ class is required to maintain the correct reference counts on the Perl SVs for the array ref.

Hope it helps

Mark
















 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;27&nbsp;15:05:09&nbsp;2014</span>
    <span class="description">mdootson [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;27&nbsp;18:31:41&nbsp;2014</span>
    <span class="description">pwnbusiness2012 [...] centurylink.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99607] Issue using wxTextEntryBox</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Oct 2014 18:31:25 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Wx [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Patrick Nighswonger&#34; &lt;pwnbusiness2012 [...] centurylink.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks.  Yes that helps.  So you are saying that I should wait until I call 
a subroutine to actually create a new instance of the TextEntryDialog.  That 
way the panel would already be visible and would therefore be a valid 
parent?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----- 
From: &#34;Mark Dootson via RT&#34; &lt;bug-Wx@rt.cpan.org&gt;
To: &lt;pwnbusiness2012@centurylink.net&gt;
Sent: Monday, October 27, 2014 3:05 PM
Subject: [rt.cpan.org #99607] Issue using wxTextEntryBox


<div class="message-stanza open">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99607">https://rt.cpan.org/Ticket/Display.html?id=99607</a></span> &gt;
&gt;
&gt; Hi,
&gt;
&gt; Your issue with Wx::TextEntryBox arises from the basic way wxWidgets 
&gt; handles applications and windows.
&gt;
&gt; The basic rule is that the main application loop will exit when no more 
&gt; instances of Wx::TopLevelWindow &#40; e.g. Wx::Frame and Wx::Dialog &#41; exist in 
&gt; the application.
&gt;
&gt; Top level windows &#40;Frames and Dialogs&#41; must be explicitly destroyed.
&gt;
&gt; $dialog_&gt;Destroy;
&gt;
&gt; unless your code causes them to be destroyed by some other method &#40;such as 
&gt; being a child of another TopLevelWindow when it is destroyed or the 
&gt; automatic behaviour when you close the window using system menus / 
&gt; buttons&#41;.
&gt;
&gt; In your example, none of these things happens so the application loop 
&gt; never exits. Your Wx::TextEntryDialog has no parent so continues to exist 
&gt; after you close your Frame.
&gt;
&gt; Dialogs designed for modal usage, such as Wx::TextEntryDialog, need to 
&gt; have a valid parent to work properly, or be created as  a special case 
&gt; without a parent.
&gt;
&gt; When you create the dialog and pass in the Wx::Panel as the parent the 
&gt; following things happen.
&gt;
&gt; Dialogs need top level parents so the wxWidgets code determines the parent 
&gt; of Wx::Panel - your frame - and checks if that is a valid parent. It 
&gt; isn&#39;t - a parent top level window needs to be visible on the display to be 
&gt; a valid parent for a dialog. So the dialog is created without a parent. 
&gt; When you close the $frame, the TextEntryDialog is left hanging around so 
&gt; the main application loop never exits.
&gt;
&gt; In this situation, wxWidgets will use anything you have set as the top 
&gt; window &#40;wxTheApp-&gt;SetTopWindow&#41; but your example does not do this.
&gt;
&gt; In standard usage you would always do:
&gt;
&gt; my $dialog = Wx::textEntryDialog-&gt;new&#40;....&#41;;
&gt; my $result = $dialog-&gt;ShowModal;
&gt; # .. get stuff from dialog
&gt; $dialog-&gt;Destroy;
&gt;
&gt; so your particular issue would not arise.
&gt;
&gt; With regard to the different in implementation between Wx:TextEntryDialog 
&gt; and Wx::SingleChoiceDialog, it is indeed because of the use of client 
&gt; data. The wxPerl implementation allows you to pass a reference to an array 
&gt; of anything &#40;so maybe references to objects&#41; so a C++ class is required to 
&gt; maintain the correct reference counts on the Perl SVs for the array ref.
&gt;
&gt; Hope it helps
&gt;
&gt; Mark
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; 
</div>

---
This email is free from viruses and malware because avast! Antivirus protection is active.
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.avast.com">http://www.avast.com</a></span>
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
