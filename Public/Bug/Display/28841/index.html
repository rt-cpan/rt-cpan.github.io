<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #28841 for SQL-Translator: SQL::Translator comments out part of create table command for PostgreSQL</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #28841 for SQL-Translator: SQL::Translator comments out part of create table command for PostgreSQL</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/SQL-Translator/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/SQL-Translator/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/SQL-Translator/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/SQL-Translator/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/SQL-Translator">SQL-Translator CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">28841</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/SQL-Translator/Active/">SQL-Translator</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">cpan [...] desert-island.me.uk
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jimdread [...] hotmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;01:59:46&nbsp;2007</span>
    <span class="description">jimdread [...] hotmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SQL::Translator comments out part of create table command for PostgreSQL</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Aug 2007 05:59:02 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SQL-Translator [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jim Dread&#34; &lt;jimdread [...] hotmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Part of create table command is commented with Pg producer
----------------------------------------------------------

Hello SQLFairy developers. Today I started to use your excellent tool,
but unfortunately had a few problems. One problem was that using the
PostgreSQL producer, the SQL that came out had part of the create
table command commented out. I was able to fix this with a dirty hack
oops I mean &#34;patch&#34; which is below after the test data and results.

I don&#39;t really know why this went wrong, maybe some flag or switch I
haven&#39;t set.

I don&#39;t guarantee the patch is useful to you, since I just did the
simplest thing I could see to make it work for me and didn&#39;t test all
possibilities. But I can&#39;t think of any reason why an extra linefeed
in front of &#34;CREATE TABLE&#34; would hurt anything. Feel free to use it if
you want to.

Thanks for a great tool.
Jim

Follows:
0. Version information
1. XML for test database
2. Command to run to produce output
3. Output of broken producer
4. Output of patched producer
5. Patch for producer

========================================================================

0. Version information

SQL::Translator is up to date &#40;0.08&#41;.
This is perl, v5.8.8 built for i486-linux-gnu-thread-multi
Linux asp 2.6.22 #2 Tue Jul 10 14:04:42 EST 2007 i686 GNU/Linux


-----------------------------8&lt;-----------------------------------------


1. SQLFairy XML for a simple database table

-----------------------------8&lt;-----------------------------------------

&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;

&lt;schema name=&#34;&#34; database=&#34;&#34; 
xmlns=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://sqlfairy.sourceforge.net/sqlfairy.xml">http://sqlfairy.sourceforge.net/sqlfairy.xml</a></span>&#34;&gt;
  &lt;extra /&gt;
  &lt;tables&gt;
    &lt;table name=&#34;control&#34; order=&#34;1&#34;&gt;
      &lt;extra /&gt;
      &lt;fields&gt;
        &lt;field name=&#34;id&#34; data_type=&#34;int&#34; size=&#34;11&#34; is_nullable=&#34;0&#34; 
is_auto_increment=&#34;1&#34; is_primary_key=&#34;1&#34; is_foreign_key=&#34;0&#34; order=&#34;1&#34;&gt;
          &lt;extra /&gt;
          &lt;comments&gt;&lt;/comments&gt;
        &lt;/field&gt;
        &lt;field name=&#34;name&#34; data_type=&#34;varchar&#34; size=&#34;255&#34; is_nullable=&#34;0&#34; 
is_auto_increment=&#34;0&#34; is_primary_key=&#34;0&#34; is_foreign_key=&#34;0&#34; order=&#34;2&#34;&gt;
          &lt;extra /&gt;
          &lt;comments&gt;&lt;/comments&gt;
        &lt;/field&gt;
      &lt;/fields&gt;
      &lt;indices&gt;
      &lt;/indices&gt;
      &lt;constraints&gt;
        &lt;constraint name=&#34;control-id&#34; type=&#34;PRIMARY KEY&#34; fields=&#34;id&#34; 
reference_table=&#34;&#34; reference_fields=&#34;&#34; on_delete=&#34;&#34; on_update=&#34;&#34; 
match_type=&#34;&#34; expression=&#34;&#34; options=&#34;&#34; deferrable=&#34;1&#34;&gt;
          &lt;extra /&gt;
        &lt;/constraint&gt;
        &lt;constraint name=&#34;control-name&#34; type=&#34;UNIQUE&#34; fields=&#34;name&#34; 
reference_table=&#34;&#34; reference_fields=&#34;&#34; on_delete=&#34;&#34; on_update=&#34;&#34; 
match_type=&#34;&#34; expression=&#34;&#34; options=&#34;&#34; deferrable=&#34;1&#34;&gt;
          &lt;extra /&gt;
        &lt;/constraint&gt;
      &lt;/constraints&gt;
      &lt;comments&gt;&lt;/comments&gt;
    &lt;/table&gt;
  &lt;/tables&gt;
  &lt;views&gt;&lt;/views&gt;
  &lt;triggers&gt;&lt;/triggers&gt;
  &lt;procedures&gt;&lt;/procedures&gt;
&lt;/schema&gt;

-----------------------------8&lt;-----------------------------------------

2. Command to run to produce output.

sqlt -f XML-SQLFairy -t PostgreSQL bugschema.xml

-----------------------------8&lt;-----------------------------------------


3. Output of broken producer. Note that the first line of the create
   table command is commented out. That turns good SQL into syntax
   errors.

-----------------------------8&lt;-----------------------------------------

--
-- Table: control
--CREATE TABLE &#34;control&#34; &#40;
  &#34;id&#34; serial NOT NULL,
  &#34;name&#34; character varying&#40;255&#41; NOT NULL,
  Constraint &#34;control-id&#34; PRIMARY KEY &#40;&#34;id&#34;&#41;,
  Constraint &#34;control-name&#34; UNIQUE &#40;&#34;name&#34;&#41;
&#41;;

-----------------------------8&lt;-----------------------------------------

4. Output of patched producer. Looks better to me.

-----------------------------8&lt;-----------------------------------------

--
-- Table: control
--
CREATE TABLE &#34;control&#34; &#40;
  &#34;id&#34; serial NOT NULL,
  &#34;name&#34; character varying&#40;255&#41; NOT NULL,
  Constraint &#34;control-id&#34; PRIMARY KEY &#40;&#34;id&#34;&#41;,
  Constraint &#34;control-name&#34; UNIQUE &#40;&#34;name&#34;&#41;
&#41;;

-----------------------------8&lt;-----------------------------------------

5. Patch for SQL::Translator::Producer::PostgreSQL.pm

-----------------------------8&lt;-----------------------------------------

--- PostgreSQL.pm       2007-08-15 05:50:56.000000000 +0000
+++ PostgreSQL.pm-orig  2007-08-15 05:50:41.000000000 +0000
@@ -379,7 +379,7 @@
     $create_statement = join&#40;&#34;\n&#34;, @comments&#41;;
     $create_statement .= qq[DROP TABLE $qt$table_name_ur$qt CASCADE;\n]
         if $add_drop_table;
-    $create_statement .= qq[\nCREATE TABLE $qt$table_name_ur$qt &#40;\n].
+    $create_statement .= qq[CREATE TABLE $qt$table_name_ur$qt &#40;\n].
                             join&#40; &#34;,\n&#34;, map { &#34;  $_&#34; } @field_defs, 
@constraint_defs &#41;.
                             &#34;\n&#41;;&#34;
                             ;


-----------------------------8&lt;-----------------------------------------

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">_________________________________________________________________
Puzzles, trivia teasers, word scrambles and more. Play for your chance to 
win! <span class="clickylink"><a target="new" rel="nofollow" href="http://club.live.com/home.aspx?icid=CLUB_hotmailtextlink">http://club.live.com/home.aspx?icid=CLUB_hotmailtextlink</a></span>
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;08:18:11&nbsp;2007</span>
    <span class="description">cpan [...] desert-island.me.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Jim! I&#39;ll look into this and see if you patch fixes the issue.

Jess


On Wed Aug 15 01:59:46 2007, jimdread@hotmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Part of create table command is commented with Pg producer
&gt; ----------------------------------------------------------
&gt; 
&gt; Hello SQLFairy developers. Today I started to use your excellent tool,
&gt; but unfortunately had a few problems. One problem was that using the
&gt; PostgreSQL producer, the SQL that came out had part of the create
&gt; table command commented out. I was able to fix this with a dirty hack
&gt; oops I mean &#34;patch&#34; which is below after the test data and results.
&gt; 
&gt; I don&#39;t really know why this went wrong, maybe some flag or switch I
&gt; haven&#39;t set.
&gt; 
&gt; I don&#39;t guarantee the patch is useful to you, since I just did the
&gt; simplest thing I could see to make it work for me and didn&#39;t test all
&gt; possibilities. But I can&#39;t think of any reason why an extra linefeed
&gt; in front of &#34;CREATE TABLE&#34; would hurt anything. Feel free to use it if
&gt; you want to.
&gt; 
&gt; Thanks for a great tool.
&gt; Jim
&gt; 
&gt; Follows:
&gt; 0. Version information
&gt; 1. XML for test database
&gt; 2. Command to run to produce output
&gt; 3. Output of broken producer
&gt; 4. Output of patched producer
&gt; 5. Patch for producer
&gt; 
&gt; 
</div>========================================================================
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 0. Version information
&gt; 
&gt; SQL::Translator is up to date &#40;0.08&#41;.
&gt; This is perl, v5.8.8 built for i486-linux-gnu-thread-multi
&gt; Linux asp 2.6.22 #2 Tue Jul 10 14:04:42 EST 2007 i686 GNU/Linux
&gt; 
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; 1. SQLFairy XML for a simple database table
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&gt; 
&gt; &lt;schema name=&#34;&#34; database=&#34;&#34; 
&gt; xmlns=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://sqlfairy.sourceforge.net/sqlfairy.xml">http://sqlfairy.sourceforge.net/sqlfairy.xml</a></span>&#34;&gt;
&gt;   &lt;extra /&gt;
&gt;   &lt;tables&gt;
&gt;     &lt;table name=&#34;control&#34; order=&#34;1&#34;&gt;
&gt;       &lt;extra /&gt;
&gt;       &lt;fields&gt;
&gt;         &lt;field name=&#34;id&#34; data_type=&#34;int&#34; size=&#34;11&#34; is_nullable=&#34;0&#34; 
&gt; is_auto_increment=&#34;1&#34; is_primary_key=&#34;1&#34; is_foreign_key=&#34;0&#34; order=&#34;1&#34;&gt;
&gt;           &lt;extra /&gt;
&gt;           &lt;comments&gt;&lt;/comments&gt;
&gt;         &lt;/field&gt;
&gt;         &lt;field name=&#34;name&#34; data_type=&#34;varchar&#34; size=&#34;255&#34; 
</div>is_nullable=&#34;0&#34; 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; is_auto_increment=&#34;0&#34; is_primary_key=&#34;0&#34; is_foreign_key=&#34;0&#34; order=&#34;2&#34;&gt;
&gt;           &lt;extra /&gt;
&gt;           &lt;comments&gt;&lt;/comments&gt;
&gt;         &lt;/field&gt;
&gt;       &lt;/fields&gt;
&gt;       &lt;indices&gt;
&gt;       &lt;/indices&gt;
&gt;       &lt;constraints&gt;
&gt;         &lt;constraint name=&#34;control-id&#34; type=&#34;PRIMARY KEY&#34; fields=&#34;id&#34; 
&gt; reference_table=&#34;&#34; reference_fields=&#34;&#34; on_delete=&#34;&#34; on_update=&#34;&#34; 
&gt; match_type=&#34;&#34; expression=&#34;&#34; options=&#34;&#34; deferrable=&#34;1&#34;&gt;
&gt;           &lt;extra /&gt;
&gt;         &lt;/constraint&gt;
&gt;         &lt;constraint name=&#34;control-name&#34; type=&#34;UNIQUE&#34; fields=&#34;name&#34; 
&gt; reference_table=&#34;&#34; reference_fields=&#34;&#34; on_delete=&#34;&#34; on_update=&#34;&#34; 
&gt; match_type=&#34;&#34; expression=&#34;&#34; options=&#34;&#34; deferrable=&#34;1&#34;&gt;
&gt;           &lt;extra /&gt;
&gt;         &lt;/constraint&gt;
&gt;       &lt;/constraints&gt;
&gt;       &lt;comments&gt;&lt;/comments&gt;
&gt;     &lt;/table&gt;
&gt;   &lt;/tables&gt;
&gt;   &lt;views&gt;&lt;/views&gt;
&gt;   &lt;triggers&gt;&lt;/triggers&gt;
&gt;   &lt;procedures&gt;&lt;/procedures&gt;
&gt; &lt;/schema&gt;
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 2. Command to run to produce output.
&gt; 
&gt; sqlt -f XML-SQLFairy -t PostgreSQL bugschema.xml
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; 3. Output of broken producer. Note that the first line of the create
&gt;    table command is commented out. That turns good SQL into syntax
&gt;    errors.
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; --
&gt; -- Table: control
&gt; --CREATE TABLE &#34;control&#34; &#40;
&gt;   &#34;id&#34; serial NOT NULL,
&gt;   &#34;name&#34; character varying&#40;255&#41; NOT NULL,
&gt;   Constraint &#34;control-id&#34; PRIMARY KEY &#40;&#34;id&#34;&#41;,
&gt;   Constraint &#34;control-name&#34; UNIQUE &#40;&#34;name&#34;&#41;
&gt; &#41;;
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 4. Output of patched producer. Looks better to me.
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; --
&gt; -- Table: control
&gt; --
&gt; CREATE TABLE &#34;control&#34; &#40;
&gt;   &#34;id&#34; serial NOT NULL,
&gt;   &#34;name&#34; character varying&#40;255&#41; NOT NULL,
&gt;   Constraint &#34;control-id&#34; PRIMARY KEY &#40;&#34;id&#34;&#41;,
&gt;   Constraint &#34;control-name&#34; UNIQUE &#40;&#34;name&#34;&#41;
&gt; &#41;;
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 5. Patch for SQL::Translator::Producer::PostgreSQL.pm
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; --- PostgreSQL.pm       2007-08-15 05:50:56.000000000 +0000
&gt; +++ PostgreSQL.pm-orig  2007-08-15 05:50:41.000000000 +0000
&gt; @@ -379,7 +379,7 @@
&gt;      $create_statement = join&#40;&#34;\n&#34;, @comments&#41;;
&gt;      $create_statement .= qq[DROP TABLE $qt$table_name_ur$qt 
</div>CASCADE;\n]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;          if $add_drop_table;
&gt; -    $create_statement .= qq[\nCREATE TABLE $qt$table_name_ur$qt &#40;\n].
&gt; +    $create_statement .= qq[CREATE TABLE $qt$table_name_ur$qt &#40;\n].
&gt;                              join&#40; &#34;,\n&#34;, map { &#34;  $_&#34; } @field_defs, 
&gt; @constraint_defs &#41;.
&gt;                              &#34;\n&#41;;&#34;
&gt;                              ;
&gt; 
&gt; 
&gt; -----------------------------8&lt;---------------------------------------
</div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; _________________________________________________________________
&gt; Puzzles, trivia teasers, word scrambles and more. Play for your 
</div>chance to 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; win! <span class="clickylink"><a target="new" rel="nofollow" href="http://club.live.com/home.aspx?icid=CLUB_hotmailtextlink">http://club.live.com/home.aspx?icid=CLUB_hotmailtextlink</a></span>
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;08:18:12&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;08:23:38&nbsp;2007</span>
    <span class="description">cpan [...] desert-island.me.uk -  Given to JROBINSON</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;08:44:26&nbsp;2007</span>
    <span class="description">cpan [...] desert-island.me.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Aha, looks like someone has fixed this in CVS already, I&#39;ll do another 
release soonish.

Jess


On Mon Aug 20 08:18:11 2007, JROBINSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks Jim! I&#39;ll look into this and see if you patch fixes the issue.
&gt; 
&gt; Jess
&gt; 
&gt; 
&gt; On Wed Aug 15 01:59:46 2007, jimdread@hotmail.com wrote:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; Part of create table command is commented with Pg producer
&gt; &gt; ----------------------------------------------------------
&gt; &gt; 
&gt; &gt; Hello SQLFairy developers. Today I started to use your excellent 
</div></div>tool,
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; but unfortunately had a few problems. One problem was that using the
&gt; &gt; PostgreSQL producer, the SQL that came out had part of the create
&gt; &gt; table command commented out. I was able to fix this with a dirty 
</div></div>hack
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; oops I mean &#34;patch&#34; which is below after the test data and results.
&gt; &gt; 
&gt; &gt; I don&#39;t really know why this went wrong, maybe some flag or switch I
&gt; &gt; haven&#39;t set.
&gt; &gt; 
&gt; &gt; I don&#39;t guarantee the patch is useful to you, since I just did the
&gt; &gt; simplest thing I could see to make it work for me and didn&#39;t test 
</div></div>all
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; possibilities. But I can&#39;t think of any reason why an extra linefeed
&gt; &gt; in front of &#34;CREATE TABLE&#34; would hurt anything. Feel free to use it 
</div></div>if
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; you want to.
&gt; &gt; 
&gt; &gt; Thanks for a great tool.
&gt; &gt; Jim
&gt; &gt; 
&gt; &gt; Follows:
&gt; &gt; 0. Version information
&gt; &gt; 1. XML for test database
&gt; &gt; 2. Command to run to produce output
&gt; &gt; 3. Output of broken producer
&gt; &gt; 4. Output of patched producer
&gt; &gt; 5. Patch for producer
&gt; &gt; 
&gt; &gt; 
</div>&gt; 
</div>========================================================================
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; 
&gt; &gt; 0. Version information
&gt; &gt; 
&gt; &gt; SQL::Translator is up to date &#40;0.08&#41;.
&gt; &gt; This is perl, v5.8.8 built for i486-linux-gnu-thread-multi
&gt; &gt; Linux asp 2.6.22 #2 Tue Jul 10 14:04:42 EST 2007 i686 GNU/Linux
&gt; &gt; 
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; 
&gt; &gt; 1. SQLFairy XML for a simple database table
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&gt; &gt; 
&gt; &gt; &lt;schema name=&#34;&#34; database=&#34;&#34; 
&gt; &gt; xmlns=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://sqlfairy.sourceforge.net/sqlfairy.xml">http://sqlfairy.sourceforge.net/sqlfairy.xml</a></span>&#34;&gt;
&gt; &gt;   &lt;extra /&gt;
&gt; &gt;   &lt;tables&gt;
&gt; &gt;     &lt;table name=&#34;control&#34; order=&#34;1&#34;&gt;
&gt; &gt;       &lt;extra /&gt;
&gt; &gt;       &lt;fields&gt;
&gt; &gt;         &lt;field name=&#34;id&#34; data_type=&#34;int&#34; size=&#34;11&#34; is_nullable=&#34;0&#34; 
&gt; &gt; is_auto_increment=&#34;1&#34; is_primary_key=&#34;1&#34; is_foreign_key=&#34;0&#34; 
</div></div>order=&#34;1&#34;&gt;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;           &lt;extra /&gt;
&gt; &gt;           &lt;comments&gt;&lt;/comments&gt;
&gt; &gt;         &lt;/field&gt;
&gt; &gt;         &lt;field name=&#34;name&#34; data_type=&#34;varchar&#34; size=&#34;255&#34; 
</div>&gt; is_nullable=&#34;0&#34; 
<div class="message-stanza open">&gt; &gt; is_auto_increment=&#34;0&#34; is_primary_key=&#34;0&#34; is_foreign_key=&#34;0&#34; 
</div></div>order=&#34;2&#34;&gt;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;           &lt;extra /&gt;
&gt; &gt;           &lt;comments&gt;&lt;/comments&gt;
&gt; &gt;         &lt;/field&gt;
&gt; &gt;       &lt;/fields&gt;
&gt; &gt;       &lt;indices&gt;
&gt; &gt;       &lt;/indices&gt;
&gt; &gt;       &lt;constraints&gt;
&gt; &gt;         &lt;constraint name=&#34;control-id&#34; type=&#34;PRIMARY KEY&#34; 
</div></div>fields=&#34;id&#34; 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; reference_table=&#34;&#34; reference_fields=&#34;&#34; on_delete=&#34;&#34; on_update=&#34;&#34; 
&gt; &gt; match_type=&#34;&#34; expression=&#34;&#34; options=&#34;&#34; deferrable=&#34;1&#34;&gt;
&gt; &gt;           &lt;extra /&gt;
&gt; &gt;         &lt;/constraint&gt;
&gt; &gt;         &lt;constraint name=&#34;control-name&#34; type=&#34;UNIQUE&#34; fields=&#34;name&#34; 
&gt; &gt; reference_table=&#34;&#34; reference_fields=&#34;&#34; on_delete=&#34;&#34; on_update=&#34;&#34; 
&gt; &gt; match_type=&#34;&#34; expression=&#34;&#34; options=&#34;&#34; deferrable=&#34;1&#34;&gt;
&gt; &gt;           &lt;extra /&gt;
&gt; &gt;         &lt;/constraint&gt;
&gt; &gt;       &lt;/constraints&gt;
&gt; &gt;       &lt;comments&gt;&lt;/comments&gt;
&gt; &gt;     &lt;/table&gt;
&gt; &gt;   &lt;/tables&gt;
&gt; &gt;   &lt;views&gt;&lt;/views&gt;
&gt; &gt;   &lt;triggers&gt;&lt;/triggers&gt;
&gt; &gt;   &lt;procedures&gt;&lt;/procedures&gt;
&gt; &gt; &lt;/schema&gt;
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; 2. Command to run to produce output.
&gt; &gt; 
&gt; &gt; sqlt -f XML-SQLFairy -t PostgreSQL bugschema.xml
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; 
&gt; &gt; 3. Output of broken producer. Note that the first line of the create
&gt; &gt;    table command is commented out. That turns good SQL into syntax
&gt; &gt;    errors.
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; --
&gt; &gt; -- Table: control
&gt; &gt; --CREATE TABLE &#34;control&#34; &#40;
&gt; &gt;   &#34;id&#34; serial NOT NULL,
&gt; &gt;   &#34;name&#34; character varying&#40;255&#41; NOT NULL,
&gt; &gt;   Constraint &#34;control-id&#34; PRIMARY KEY &#40;&#34;id&#34;&#41;,
&gt; &gt;   Constraint &#34;control-name&#34; UNIQUE &#40;&#34;name&#34;&#41;
&gt; &gt; &#41;;
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; 4. Output of patched producer. Looks better to me.
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; --
&gt; &gt; -- Table: control
&gt; &gt; --
&gt; &gt; CREATE TABLE &#34;control&#34; &#40;
&gt; &gt;   &#34;id&#34; serial NOT NULL,
&gt; &gt;   &#34;name&#34; character varying&#40;255&#41; NOT NULL,
&gt; &gt;   Constraint &#34;control-id&#34; PRIMARY KEY &#40;&#34;id&#34;&#41;,
&gt; &gt;   Constraint &#34;control-name&#34; UNIQUE &#40;&#34;name&#34;&#41;
&gt; &gt; &#41;;
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; 5. Patch for SQL::Translator::Producer::PostgreSQL.pm
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; --- PostgreSQL.pm       2007-08-15 05:50:56.000000000 +0000
&gt; &gt; +++ PostgreSQL.pm-orig  2007-08-15 05:50:41.000000000 +0000
&gt; &gt; @@ -379,7 +379,7 @@
&gt; &gt;      $create_statement = join&#40;&#34;\n&#34;, @comments&#41;;
&gt; &gt;      $create_statement .= qq[DROP TABLE $qt$table_name_ur$qt 
</div>&gt; CASCADE;\n]
<div class="message-stanza open">&gt; &gt;          if $add_drop_table;
&gt; &gt; -    $create_statement .= qq[\nCREATE TABLE $qt$table_name_ur$qt 
</div></div>&#40;\n].
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; +    $create_statement .= qq[CREATE TABLE $qt$table_name_ur$qt &#40;\n].
&gt; &gt;                              join&#40; &#34;,\n&#34;, map { &#34;  
</div></div>$_&#34; } @field_defs, 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; @constraint_defs &#41;.
&gt; &gt;                              &#34;\n&#41;;&#34;
&gt; &gt;                              ;
&gt; &gt; 
&gt; &gt; 
&gt; &gt; -----------------------------8&lt;-------------------------------------
</div></div>--
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; --
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; _________________________________________________________________
&gt; &gt; Puzzles, trivia teasers, word scrambles and more. Play for your 
</div>&gt; chance to 
<div class="message-stanza open">&gt; &gt; win! <span class="clickylink"><a target="new" rel="nofollow" href="http://club.live.com/home.aspx?icid=CLUB_hotmailtextlink">http://club.live.com/home.aspx?icid=CLUB_hotmailtextlink</a></span>
&gt; &gt; 
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;08:44:29&nbsp;2007</span>
    <span class="description">cpan [...] desert-island.me.uk -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
