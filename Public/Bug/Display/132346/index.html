<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #132346 for Graphics-TIFF: Enhancements to module</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #132346 for Graphics-TIFF: Enhancements to module</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Graphics-TIFF/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Graphics-TIFF/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Graphics-TIFF/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Graphics-TIFF/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Graphics-TIFF">Graphics-TIFF CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">132346</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Graphics-TIFF/Active/">Graphics-TIFF</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
PMPERRY [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-268474-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-268475-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;14&nbsp;20:12:18&nbsp;2020</span>
    <span class="description">PMPERRY [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Enhancements to module</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I use Graphics::TIFF in PDF::Builder to support TIFF images &#40;what else?&#41; and have a couple requests:

1. It appears that an existing libtiff.a library needs to exist, in a standard place. If you can&#39;t find one to build or copy in, or your version of Perl doesn&#39;t supply it &#40;Strawberry Perl *does*&#41;, I guess you&#39;re out of luck. If anyone is casting about for a &#34;fun&#34; little Alien project, a new Alien::TIFF package might be useful, to search for a usable libtiff.a, and build it from official sources if it&#39;s not found. I have not used Alien myself, so at this point I&#39;m not volunteering, but might change my mind if I can get some experience in using Alien myself.

2. The Graphics::TIFF wrapper provides everything I need for the replacement of the old and buggy pure Perl TIFF support in PDF::Builder, BUT for one thing. The old code permits the opening of both a file PATH/NAME &#40;as does the new, using Graphics::TIFF&#41;, AND an already opened filehandle. I don&#39;t know what can be done with C code to handle a Perl filehandle, but that would be a nice addition if anyone knows how to do it. I hope it would be as simple as skipping the normal file &#34;open&#34; call, but at this point I don&#39;t know.

Thanks much to anyone interested in providing either of these. I guess the first would be more important and general, for those poor souls whose system doesn&#39;t have a libtiff.a already.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;15&nbsp;02:50:46&nbsp;2020</span>
    <span class="description">jffry [...] posteo.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #132346] Enhancements to module</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Apr 2020 08:45:35 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Graphics-TIFF [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff &lt;jffry [...] posteo.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 1. It appears that an existing libtiff.a library needs to exist, in a standard place. If you can&#39;t find one to build or copy in, or your version of Perl doesn&#39;t supply it &#40;Strawberry Perl *does*&#41;, I guess you&#39;re out of luck. If anyone is casting about for a &#34;fun&#34; little Alien project, a new Alien::TIFF package might be useful, to search for a usable libtiff.a, and build it from official sources if it&#39;s not found. I have not used Alien myself, so at this point I&#39;m not volunteering, but might change my mind if I can get some experience in using Alien myself.
</div>
Only Windows needs libtiff.a. POSIX systems prefer libtiff.so. Neither
of these are supplied by Perl itself. Defining libtiff as a dependency
is not a problem for Linux distros, which do it as part of the packaging
process, so this is only a Windows problem.

Unfortunately, I don&#39;t have access to a Windows machine.

IIRC, there are several possible build systems on Windows, e.g. the MS
tools, the GnuWin32 tools, etc. and the build recipe would be different,
depending on the tools available.

Perhaps an alternative would be to automatically download premade
binaries from such as here &#40;rather old, unfortunately&#41;:

<span class="clickylink"><a target="new" rel="nofollow" href="https://sourceforge.net/projects/gnuwin32/files/tiff/3.8.2-1/tiff-3.8.2-1-bin.zip">https://sourceforge.net/projects/gnuwin32/files/tiff/3.8.2-1/tiff-3.8.2-1-bin.zip</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 2. The Graphics::TIFF wrapper provides everything I need for the replacement of the old and buggy pure Perl TIFF support in PDF::Builder, BUT for one thing. The old code permits the opening of both a file PATH/NAME &#40;as does the new, using Graphics::TIFF&#41;, AND an already opened filehandle. I don&#39;t know what can be done with C code to handle a Perl filehandle, but that would be a nice addition if anyone knows how to do it. I hope it would be as simple as skipping the normal file &#34;open&#34; call, but at this point I don&#39;t know.
</div>
It is certainly possible to pass an open filehandle to a C-library with
PerlXS. IIRC, the problem was that libtiff itself doesn&#39;t accept an open
filehandle.

I suppose it might be possible to add C-code duplicating most of
TIFFOpen&#40;&#41;, &#40;e.g. TIFFOpen_fh&#40;&#41;&#41;, add support for filehandles there, and
have a Perl wrapper call the correct method as appropriate.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;15&nbsp;02:50:47&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;16&nbsp;09:23:37&nbsp;2020</span>
    <span class="description">PMPERRY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 15 02:50:46 2020, RATCLIFFE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Only Windows needs libtiff.a. POSIX systems prefer libtiff.so. Neither
&gt; of these are supplied by Perl itself. Defining libtiff as a dependency
&gt; is not a problem for Linux distros, which do it as part of the
&gt; packaging process, so this is only a Windows problem.
</div>If Linux is guaranteed to have an up-to-date libtiff.so, that&#39;s great if Windows is then the only platform to worry about &#40;Mac?&#41;. Windows is far too large a market to ignore, though.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfortunately, I don&#39;t have access to a Windows machine.
</div>If you want to provide trial Alien::TIFF builds for me to test install on Windows, I&#39;ll be happy to try to help out here.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; IIRC, there are several possible build systems on Windows, e.g. the MS
&gt; tools, the GnuWin32 tools, etc. and the build recipe would be
&gt; different, depending on the tools available.
</div>Perhaps the Alien owner could provide some guidance here. In the end, the tools available for CPAN &#40;GNU?&#41; are very Linux-like, and certainly, native MS tools can be ignored. I think that only one recipe needs to be dealt with. The resulting libtiff.a &#40;or whatever&#41; might only be usable with Perl, but that&#39;s life.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perhaps an alternative would be to automatically download premade
&gt; binaries from such as here &#40;rather old, unfortunately&#41;:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://sourceforge.net/projects/gnuwin32/files/tiff/3.8.2-1/tiff-">https://sourceforge.net/projects/gnuwin32/files/tiff/3.8.2-1/tiff-</a></span>
&gt; 3.8.2-1-bin.zip
</div>I would be leery of this unless someone promises to maintain the package and keep it up to date. Presumably there is current TIFF library source available somewhere. I don&#39;t know if there are any licensing issues in grabbing and redistributing a current, premade libtiff.a from a distribution such as Strawberry Perl &#40;which is where my copy came from&#41;.

In the end, we may just have to write off anyone who doesn&#39;t have an up-to-date Perl that includes libtiff. That would certainly be the easiest approach, but some platforms such as ActiveState may be well behind the times. Strawberry Perl is leading edge and has had libtiff.a for a while, but who knows about other distros, which is why being able to build a missing libtiff would be nice.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It is certainly possible to pass an open filehandle to a C-library
&gt; with PerlXS. IIRC, the problem was that libtiff itself doesn&#39;t accept  &gt; an open filehandle.
&gt; 
&gt; I suppose it might be possible to add C-code duplicating most of
&gt; TIFFOpen&#40;&#41;, &#40;e.g. TIFFOpen_fh&#40;&#41;&#41;, add support for filehandles there,
&gt; and have a Perl wrapper call the correct method as appropriate.
</div>Well, this is more in the &#34;nice to have&#34; category rather than &#34;must have&#34;, so if it isn&#39;t something easily done &#40;i.e., requires extension of libtiff itself, rather than just something added to the wrapper&#41;, it can go on the back burner. I was hoping that libtiff accepted a handle &#40;provided by the wrapper&#41; instead of opening the file itself, but it sounds like that&#39;s not the case.

TIFF support in PDF::Builder is a &#34;nice&#34; thing, and a few people actually build things with it using TIFF, but that image format appears to be rather niche and not worth putting tremendous effort into. If it sounds like a fun little project for you, Alien::TIFF would be a great addition, but if you have no experience with Alien and don&#39;t have the time to learn, don&#39;t sweat it.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
