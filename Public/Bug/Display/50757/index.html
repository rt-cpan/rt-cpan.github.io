<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50757 for Business-OnlinePayment-PayflowPro: Support for Recurring Billing</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50757 for Business-OnlinePayment-PayflowPro: Support for Recurring Billing</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Business-OnlinePayment-PayflowPro">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Business-OnlinePayment-PayflowPro">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Business-OnlinePayment-PayflowPro">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Business-OnlinePayment-PayflowPro">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Business-OnlinePayment-PayflowPro">Business-OnlinePayment-PayflowPro CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50757</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Business-OnlinePayment-PayflowPro">Business-OnlinePayment-PayflowPro</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
olaf [...] wundersolutions.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-4690-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-4691-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Recurring.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/682944/351720/Recurring.pm">
Tue Oct 27 12:18:36 2009 (13k) by olaf [...] wundersolutions.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=50757">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680897" href="/Public/Bug/Display.html?id=50757#txn-680897">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;13:24:02&nbsp;2009</span>
    <span class="description">olaf [...] wundersolutions.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Support for Recurring Billing</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/680897/350530/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350530">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 322b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Are there any plans to support Recurring Transactions?  As it stands, I
had to subclass the module to be able to create recurring transactions. 

It would be a matter of allowing some more fields in:

my %params = $self-&gt;get_fields

and the _map_fields method would need to handle the &#34;action&#34; a little
differently.


Olaf
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680912" href="/Public/Bug/Display.html?id=50757#txn-680912">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:40:47&nbsp;2009</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/680912/350541/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350541">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 138b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Suggested patches are certainly welcome.  Or if you prefer you could
just send/attach your subclass/module and I see what we can work out.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680913" href="/Public/Bug/Display.html?id=50757#txn-680913">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:40:48&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680916" href="/Public/Bug/Display.html?id=50757#txn-680916">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:57:21&nbsp;2009</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/680916/350544/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350544">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 414b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 22 14:40:47 2009, PLOBBES wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Suggested patches are certainly welcome.  Or if you prefer you could
&gt; just send/attach your subclass/module and I see what we can work out.
</div>
Great!  I&#39;m just in the middle of this now, so I&#39;ll send you something
early next week when I have more confidence that I&#39;ve handled things
correctly.  Can I fork the source on GitHub or should I just send sample
code/patch?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-680925" href="/Public/Bug/Display.html?id=50757#txn-680925">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;15:03:25&nbsp;2009</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/680925/350553/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/350553">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 211b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can I fork the source on GitHub or should I just send sample code/patch?
</div>
Your call.  This will probably be simple and small enough that I&#39;d
probably just attach a patch to this bug, but I&#39;m not too picky.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682944" href="/Public/Bug/Display.html?id=50757#txn-682944">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;12:18:25&nbsp;2009</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/682944/351717/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351717">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 22 15:03:25 2009, PLOBBES wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Can I fork the source on GitHub or should I just send sample code/patch?
</div>&gt; 
&gt; Your call.  This will probably be simple and small enough that I&#39;d
&gt; probably just attach a patch to this bug, but I&#39;m not too picky.
&gt; 
</div>
Here is my subclassed module.  I&#39;ve tried to document my changes.  I&#39;m
not sure if it would be better to patch the current module or to
subclass it and create a new module on CPAN.  The issue with subclassing
it is that the submit&#40;&#41; method is fairly long and there are only a few
things which need to be tweaked, so keeping up with future changes to
submit&#40;&#41; would be troublesome.  If there were accessor/mutator methods
for the fields, that would make it a lot easier.

So, patching the current code is probably a better fit for now, but the
info you submit for recurring transactions is different enough that it
might warrant a new module to cut down on confusion.  

To deal with this, I&#39;ve added the _is_recurring&#40;&#41; method, which could be
used to distinguish transaction types if they both occur in the same module.

Let me know if you have any questions or need anything else from me. 
I&#39;ve only tested this with adding new profiles so far, but I&#39;ve added
support for other kinds of recurring transactions based on what is
available in the PayFlow docs.  I expect to use some of those in
production in future as well.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682944/351720/Recurring.pm">Download Recurring.pm</a><br />
<span class="downloadcontenttype">text/x-perl 13k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682961" href="/Public/Bug/Display.html?id=50757#txn-682961">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;12:35:38&nbsp;2009</span>
    <span class="description">ivan-pause [...] 420.am -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/682961/351738/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351738">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 301b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Suggest reworking this to use the B:OP standard interface for recurring
transactions.  See the Business::OnlinePayment manpage and
Business::OnlinePayment::AuthorizeNet for an example implementation.

Otherwise, what&#39;s the point?  CPAN already has a PayflowPro.pm for a
non-standardized interface.  :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682973" href="/Public/Bug/Display.html?id=50757#txn-682973">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;12:40:45&nbsp;2009</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/682973/351746/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351746">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 503b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 27 12:35:38 2009, IVAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Suggest reworking this to use the B:OP standard interface for recurring
&gt; transactions.  See the Business::OnlinePayment manpage and
&gt; Business::OnlinePayment::AuthorizeNet for an example implementation.
&gt; 
&gt; Otherwise, what&#39;s the point?  CPAN already has a PayflowPro.pm for a
&gt; non-standardized interface.  :&#41;
</div>
I&#39;ll have another look.  The AuthorizeNet example is more helpful.  The
recurring info on Business::OnlinePayment didn&#39;t really make me any wiser.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-683008" href="/Public/Bug/Display.html?id=50757#txn-683008">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;13:58:03&nbsp;2009</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/683008/351763/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351763">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 27 12:40:45 2009, OALDERS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Oct 27 12:35:38 2009, IVAN wrote:
<div class="message-stanza open">&gt; &gt; Suggest reworking this to use the B:OP standard interface for recurring
&gt; &gt; transactions.  See the Business::OnlinePayment manpage and
&gt; &gt; Business::OnlinePayment::AuthorizeNet for an example implementation.
&gt; &gt; 
&gt; &gt; Otherwise, what&#39;s the point?  CPAN already has a PayflowPro.pm for a
&gt; &gt; non-standardized interface.  :&#41;
</div>&gt; 
</div>
I&#39;ve had a closer look and I have some questions now.  :&#41;

Looks like PayflowPro has some recurring types which are not listed in
Business::OnlinePayment.  I&#39;ve tried to map all recurring actions here:

    # for recurring TRXTYPE can be one of:
    # my %trxtype = &#40;
    #     add         =&gt; &#39;A&#39;,
    #     modify      =&gt; &#39;M&#39;,
    #     reactivate  =&gt; &#39;R&#39;,
    #     cancel      =&gt; &#39;C&#39;,
    #     inquiry     =&gt; &#39;I&#39;,
    #     payment     =&gt; &#39;P&#39;,
    # &#41;;
    #
    # recurring ACTION is always &#34;R&#34;

    my %recurring_actions = &#40;
        &#39;recurring authorization&#39;               =&gt; &#39;A&#39;,
        &#39;modify recurring authorization&#39;        =&gt; &#39;M&#39;,
        &#39;reactivate recurring authorization&#39;    =&gt; &#39;R&#39;,
        &#39;cancel recurring authorization&#39;        =&gt; &#39;C&#39;,
        &#39;inquire recurring authorization&#39;       =&gt; &#39;I&#39;,
        &#39;reattempt recurring authorization&#39;     =&gt; &#39;P&#39;,
    &#41;;

Any suggestions as for naming conventions?  &#34;inquire&#34; doesn&#39;t make sense
to read it in that way.

Payflow&#39;s PAYPERIOD allows the following params:

PAYPERIOD: &#40;WEEK|BIWK|SMMO|FRWK|MONT|QTER|SMYR|YEAR&#41;

Any suggestion on how to do handle that?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-686071" href="/Public/Bug/Display.html?id=50757#txn-686071">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;05&nbsp;14:33:21&nbsp;2009</span>
    <span class="description">ivan-pause [...] 420.am -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50757] Support for Recurring Billing</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Nov 2009 11:32:26 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Olaf Alders via RT &lt;bug-Business-OnlinePayment-PayflowPro [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ivan Kohler &lt;ivan-pause [...] 420.am&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/686071/353182/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/353182">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Oct 27, 2009 at 01:58:04PM -0400, Olaf Alders via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve had a closer look and I have some questions now.  :&#41;
&gt; 
&gt; Looks like PayflowPro has some recurring types which are not listed in
&gt; Business::OnlinePayment.  I&#39;ve tried to map all recurring actions here:
</div>
That&#39;s okay, we&#39;ll just extend the interface to the new operations and 
note that not all processors &#40;that support recurring billing&#41; support 
all operations.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     my %recurring_actions = &#40;
&gt;         &#39;recurring authorization&#39;               =&gt; &#39;A&#39;,
&gt;         &#39;modify recurring authorization&#39;        =&gt; &#39;M&#39;,
&gt;         &#39;reactivate recurring authorization&#39;    =&gt; &#39;R&#39;,
&gt;         &#39;cancel recurring authorization&#39;        =&gt; &#39;C&#39;,
&gt;         &#39;inquire recurring authorization&#39;       =&gt; &#39;I&#39;,
&gt;         &#39;reattempt recurring authorization&#39;     =&gt; &#39;P&#39;,
&gt;     &#41;;
&gt; 
&gt; Any suggestions as for naming conventions?  &#34;inquire&#34; doesn&#39;t make sense
&gt; to read it in that way.
</div>
info?  Nothing in particular comes to mind.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Payflow&#39;s PAYPERIOD allows the following params:
&gt; 
&gt; PAYPERIOD: &#40;WEEK|BIWK|SMMO|FRWK|MONT|QTER|SMYR|YEAR&#41;
&gt; 
&gt; Any suggestion on how to do handle that?
</div>
It looks like the &#34;interval&#34; specification in B:OP is more flexible than 
what Payflow supports here.  I&#39;d say handle the cases you can &#40;&#34;7 days&#34; 
=&gt; &#39;WEEK&#39;, &#34;14 days&#34; =&gt; &#39;BIWK&#39;, &#39;1 month&#39; =&gt; &#39;MONT&#39;, etc.&#41; and throw an 
error for the cases you can&#39;t.

In the base B:OP documentation, we should put a warning and list the 
common cases currently handled by all recurring-capable modules.

-- 
_ivan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-692075" href="/Public/Bug/Display.html?id=50757#txn-692075">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;17&nbsp;11:53:27&nbsp;2009</span>
    <span class="description">dsteinbrunner [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dsteinbrunner [...] pobox.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/692075/356277/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/356277">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I emailed Olaf about his progress privately since I am looking to get PayflowPro recurring 
billing working for a project.  He let me know that he has move to a different solution and 
hence put off working on this but did send me his latest code.  So it appears I am picking up 
where Olaf left off.

So far I have encounter the following note worth bits:

The pay period SMMO that PayFlowPro defines does not appear to fit how intervals are 
currently defined.  Here is what the docs say:

SMMO: Twice Every Month - The 1st and 15th of the month. Results in 24 payments per year.  
SMMO can start on 1st to 15th of the month, second payment 15 days later or on the last day 
of the month.

Any suggestions on how this should be invoked via the interface?

PayFlowPro has what it calls a profile name.  It is a non-unique identifying text name for use 
in searching for a profiles.  Since a profile and subscription in B:OP match up I&#39;m guessing subscription_name would be the proper interface name to use?

Currently there is the idea of a trialamount with trialperiods which AuthorizeNet uses.  PayFlowPro has the concept of a initial  setup fee which I was thinking to put into trialamount 
but the more I think about it I&#39;m not sure this is the right thing to do.  First off, the proper 
interface name for this, to me, would be start_amount.  Secondly, the association of trialamount, trialperiods and periods confuses the the simple version of this that PayFlowPro 
offers.  At first, I was going to throw an error when trialperiods was set above one but then 
realized that the periods could be set to a month but the start date for them could be 2 
weeks out so trialperiods even being set to 1 would not be valid.  Thoughts? 

When the initial setup fee is used or the CC is checked for validity on when a profile is being 
created there are actually two transactions being done so the results have the CC results 
along with the profile/subscription results.  I can see someone, possibly even me, wanting 
access not only to the subscription order_number but the CC order_number.  Is this a case 
where extra methods outside of the standard interface would be advisable?
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.592151</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
