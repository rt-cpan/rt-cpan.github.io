<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #3072 for WWW-Mechanize: FW: Mech History Bug</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #3072 for WWW-Mechanize: FW: Mech History Bug</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/WWW-Mechanize/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/libwww-perl/WWW-Mechanize/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Mechanize">WWW-Mechanize CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">3072</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/WWW-Mechanize/Active/">WWW-Mechanize</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
acp7 [...] citmail.buffalo.edu

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-36214-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-36215-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;28&nbsp;15:21:09&nbsp;2003</span>
    <span class="description">acp7 [...] citmail.buffalo.edu -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Potozniak, Andrew&#34; &lt;acp7 [...] citmail.buffalo.edu&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;&#39;bug-www-mechanize [...] rt.cpan.org&#39;&#34; &lt;bug-www-mechanize [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> FW: Mech History Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Jul 2003 15:21:02 -0400</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Potozniak, Andrew 
Sent: Monday, July 28, 2003 3:19 PM
To: &#39;Andy Lester&#39;
Subject: Mech History Bug

 

Andy,

 

      Here is the code that will show you 2 cases of mech&#39;s history bug.  I
think I might have an idea what&#39;s happening from the results on case 1, but
I&#39;ll let you decide on that.

 

---------------------------------------------------

Andrew Potozniak

Administrative Computing

Student Assistant

State University of New York at Buffalo

 &lt;mailto:acp7@citmail.buffalo.edu&gt; acp7@citmail.buffalo.edu

645-3587 x 7123

 &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org">http://www.potozniak.org</a></span>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org">http://www.potozniak.org</a></span>

---------------------------------------------------
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;28&nbsp;15:38:15&nbsp;2003</span>
    <span class="description">acp7 [...] citmail.buffalo.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Potozniak, Andrew&#34; &lt;acp7 [...] citmail.buffalo.edu&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;&#39;bug-WWW-Mechanize [...] rt.cpan.org&#39;&#34; &lt;bug-WWW-Mechanize [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [cpan #3072] AutoReply: FW: Mech History Bug </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 28 Jul 2003 15:37:56 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">RT-Send-Cc:</td>
    <td class="message-header-value"> </td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I think I found why this bug happens:

OK so we surf to my home page by means of a 
$mech-&gt;get&#40;&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl&#39;&#41;">http://www.potozniak.org/perl&#39;&#41;</a></span>;

So in our history stack we currently have this:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl">http://www.potozniak.org/perl</a></span> &lt;- current page

Now I went to the first link corresponding to the 
$mech-&gt;follow_link&#40; n =&gt; 1 &#41;;
sub routine which brings us to perl/ted/

Now in our history stack we have this:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/ted/">http://www.potozniak.org/perl/ted/</a></span> &lt;- current page
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/">http://www.potozniak.org/perl/</a></span>

Then I went to the first link on our current page by 
the same means as last time.
$mech-&gt;follow_link&#40; n =&gt; 1 &#41;;
sub routine which brings us to perl/ted/post.pl

Now in our history stack we have this:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/ted/post.pl">http://www.potozniak.org/perl/ted/post.pl</a></span> &lt;- current page
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/ted/">http://www.potozniak.org/perl/ted/</a></span> 
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/">http://www.potozniak.org/perl/</a></span>

And then I decided to do a $mech-&gt;get&#40;&#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.google.com">http://www.google.com</a></span>&#39;&#41;;

So we would think that our history stack would look like this:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.google.com/">http://www.google.com/</a></span> &lt;- current page
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/ted/post.pl">http://www.potozniak.org/perl/ted/post.pl</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/ted/">http://www.potozniak.org/perl/ted/</a></span> 
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/">http://www.potozniak.org/perl/</a></span>

But when we do a back we go back to <span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/ted/">http://www.potozniak.org/ted/</a></span>

Why might this happen you may ask yourself.

I think that when you call get the current page before the get is
over ridden with the page we are now at from the get.  Making our
history stack look like this instead of the stack above:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.google.com/">http://www.google.com/</a></span> &lt;- current page
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/ted/">http://www.potozniak.org/perl/ted/</a></span> &lt;- will be the url after a back
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org/perl/">http://www.potozniak.org/perl/</a></span> &lt;- will be the url after a double back

I hope this helps out a bit.  :-D

---------------------------------------------------
Andrew Potozniak
Administrative Computing
Student Assistant
State University of New York at Buffalo
acp7@citmail.buffalo.edu
645-3587 x 7123
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.potozniak.org">http://www.potozniak.org</a></span>
---------------------------------------------------

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -----Original Message-----
&gt; From: WWW-Mechanize [mailto:bug-WWW-Mechanize@rt.cpan.org]
&gt; Sent: Monday, July 28, 2003 3:21 PM
&gt; To: acp7@citmail.buffalo.edu
&gt; Subject: [cpan #3072] AutoReply: FW: Mech History Bug
&gt; 
&gt; 
&gt;        Greetings,
&gt;         This message has been automatically generated in response to your
&gt; bug report about WWW-Mechanize, a summary of which appears below.
&gt; 
&gt; There is no need to reply to this message right now.  Your bug in WWW-
&gt; Mechanize has been assigned an ID of [cpan #3072]. Please include the
&gt; string:
&gt; 
&gt;          [cpan #3072]
&gt; 
&gt; in the subject line of all future correspondence about this issue. To do
&gt; so,
&gt; you may reply to this message.
&gt; 
&gt;                         Thank you,
&gt;                         bug-WWW-Mechanize@rt.cpan.org
&gt; 
&gt; -------------------------------------------------------------------------
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;04&nbsp;00:58:20&nbsp;2003</span>
    <span class="description">andy [...] petdance.com -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
