<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #27239 for Devel-PPPort: A few minor usability nits</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #27239 for Devel-PPPort: A few minor usability nits</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Devel-PPPort/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Devel-PPPort/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Devel-PPPort/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Devel-PPPort/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/mhx/Devel-PPPort/issues/">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Devel-PPPort">Devel-PPPort CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">27239</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Devel-PPPort/Active/">Devel-PPPort</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
steve.hay [...] uk.radan.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-11154-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.11    </td>
  </tr>
  <tr id="CF-11155-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
3.11_02    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;22&nbsp;07:31:48&nbsp;2007</span>
    <span class="description">shay [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> A few minor usability nits</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here&#39;s a few minor nits that I experienced when using &#34;perl ppport.h&#34;
recently.

1. I ran &#34;perl ppport.h --copy=new&#34; expecting that &#34;.new&#34; would be
appended to modified files&#39; names, but instead it only appended &#34;new&#34;.
The POD says &#34;--copy=suffix&#34; and to me &#34;suffix&#34; suggests just the
letters after the last &#34;.&#34; in a filename, so I didn&#39;t expect to have to
run &#34;perl ppport.h --copy=.new&#34; to get what I wanted. Perhaps a &#34;.&#34;
could be prepended to the value of the --copy option if that value
doesn&#39;t already begin with a &#34;.&#34;?

2. I ran &#34;perl ppport.h foo-c.inc&#34; and found that my explicitly named
file , &#34;foo-c.inc&#34;, got skipped unless I also specified --nofilter!
Perhaps the --nofilter option could be implied if files are explicitly
named rather than picked up by directory search or file glob?

3. In several cases, &#34;perl ppport.h --copy=.new&#34; output a new file in
which the only change was the addition of &#34;#include &#34;ppport.h&#34;&#34;. In each
case, that actually wasn&#39;t necessary because the source file in question
already #included another source file which #included ppport.h itself.
Would it be possible for the analyzer to follow #include directives to
spot cases like this?

Obviously these are not important issues, but it would have made things
run a little more smoothly for me the other day if the above changes had
been implemented.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;22&nbsp;15:37:23&nbsp;2007</span>
    <span class="description">mhx-perl [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27239] A few minor usability nits</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 22 May 2007 21:36:14 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Devel-PPPort [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marcus Holland-Moritz &lt;mhx-perl [...] gmx.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2007-05-22, at 07:31:50 -0400, via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here&#39;s a few minor nits that I experienced when using &#34;perl ppport.h&#34;
&gt; recently.
&gt; 
&gt; 1. I ran &#34;perl ppport.h --copy=new&#34; expecting that &#34;.new&#34; would be
&gt; appended to modified files&#39; names, but instead it only appended &#34;new&#34;.
&gt; The POD says &#34;--copy=suffix&#34; and to me &#34;suffix&#34; suggests just the
&gt; letters after the last &#34;.&#34; in a filename, so I didn&#39;t expect to have to
&gt; run &#34;perl ppport.h --copy=.new&#34; to get what I wanted. Perhaps a &#34;.&#34;
&gt; could be prepended to the value of the --copy option if that value
&gt; doesn&#39;t already begin with a &#34;.&#34;?
</div>
Mmmh, yes, that sounds reasonable. But what if you actually wanted
to leave the dot out in the middle? If ppport.h would automagically
add a dot, there would be no way to do this. &#40;I don&#39;t know if there
would probably be any sort of problems on VMS if you wanted to
rename a file &#34;foo.c&#34; to &#34;foo.c.new&#34;?&#41;

So, I really understand your point, but I think this problem is
best solved in the documentation.

And, for example, configure for gcc has options that influence the
names of the installed programs:

  Program names:
    --program-prefix=PREFIX            prepend PREFIX to installed program names
    --program-suffix=SUFFIX            append SUFFIX to installed program names

These options also don&#39;t add any characters in between.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 2. I ran &#34;perl ppport.h foo-c.inc&#34; and found that my explicitly named
&gt; file , &#34;foo-c.inc&#34;, got skipped unless I also specified --nofilter!
&gt; Perhaps the --nofilter option could be implied if files are explicitly
&gt; named rather than picked up by directory search or file glob?
</div>
Well, that would be a nice idea. Unfortunately, the shell already
does the globbing:

  mhx@r2d2 $ perl -le&#39;print for @ARGV&#39; *
  apicheck_c.PL
  blib
  Changes
  devel
  HACKERS
  [...]

The filtering is done mainly to stop ppport.h from doing stupid
things to files that are not source files.

I could blindly add &#39;.inc&#39; as an extension that passes through
the filter, but that&#39;s not safe. However, &#34;-c.inc&#34; and &#34;-xs.inc&#34;
are commonly used. I&#39;ll add these to the list of known file
extensions. This should, at least somehow, solve your problem.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 3. In several cases, &#34;perl ppport.h --copy=.new&#34; output a new file in
&gt; which the only change was the addition of &#34;#include &#34;ppport.h&#34;&#34;. In each
&gt; case, that actually wasn&#39;t necessary because the source file in question
&gt; already #included another source file which #included ppport.h itself.
&gt; Would it be possible for the analyzer to follow #include directives to
&gt; spot cases like this?
</div>
Uh, well, I guess it would be possible. But I have some concerns:

1. ppport.h is already too big. :-&#41;

2. There is code in ppport.h to actually remove an

     #include &#34;ppport.h&#34;

   if it appears not to be needed. If it&#39;s not needed in your
   included file, it might be dropped from there and moved to
   the other file that included the first one. This would make
   the logic much more complicated.

3. As ppport.h is configurable, it&#39;s not &#40;always&#41; a good idea
   to put it into a file that&#39;s included from another file.

I guess I&#39;ll have to think about this a little more. Maybe I can
come up with a fancy solution that doesn&#39;t increase the code size
too much.

I&#39;ve added this to my TODO list.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Obviously these are not important issues, but it would have made things
&gt; run a little more smoothly for me the other day if the above changes had
&gt; been implemented.
</div>
I think issues &#40;1&#41; and &#40;2&#41; should be solved in the next release.
I&#39;ve improved the documentation for --copy, and I&#39;ve added
-c.inc and -xs.inc to the list of known source file extensions.

Marcus

-- 
economist, n:
        Someone who&#39;s good with figures, but doesn&#39;t have enough
        personality to become an accountant.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;22&nbsp;15:37:29&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;03:43:21&nbsp;2007</span>
    <span class="description">MHX [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Issues &#40;1&#41; and &#40;2&#41; have been addressed in Devel::PPPort 3.11_02. &#40;Please
don&#39;t use that version though, as it has a defect that could cause an
infinite recursion when running ppport.h; use at least 3.11_03.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;03:43:23&nbsp;2007</span>
    <span class="description">MHX [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;03:43:56&nbsp;2007</span>
    <span class="description">MHX [...] cpan.org -  Fixed in 3.11_02 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
