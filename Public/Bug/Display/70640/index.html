<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #70640 for DBD-mysql: DBD::mysql does not support IPv6 addresses surrounded by square brackets</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #70640 for DBD-mysql: DBD::mysql does not support IPv6 addresses surrounded by square brackets</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-mysql/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-mysql/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-mysql/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-mysql/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-mysql">DBD-mysql CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">70640</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-mysql/Active/">DBD-mysql</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
perlbug [...] cg.cjb.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-10170-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
4.017    </td>
  </tr>
  <tr id="CF-10171-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;31&nbsp;11:41:43&nbsp;2011</span>
    <span class="description">perlbug [...] cg.cjb.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> DBD::mysql does not support IPv6 addresses</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">$ perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=[::1]&#34;,
&#34;&#34;, &#34;&#34;&#41;&#39;
DBI connect&#40;&#39;database=foobar;host=[::1]&#39;,&#39;&#39;,...&#41; failed: Unknown MySQL
server host &#39;[&#39; &#40;2&#41; at -e line 1
$

This is because the colon is interpreted as a separator in the DSN string.

Perl: v5.12.3
DBD::mysql: 4.017
DBI: 1.613
OS: Fedora 14
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;16&nbsp;05:27:35&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> CAPTTOFU [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Aug 31 11:41:43 2011, roblang wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=[::1]&#34;,
&gt; &#34;&#34;, &#34;&#34;&#41;&#39;
&gt; DBI connect&#40;&#39;database=foobar;host=[::1]&#39;,&#39;&#39;,...&#41; failed: Unknown MySQL
&gt; server host &#39;[&#39; &#40;2&#41; at -e line 1
&gt; $
&gt; 
&gt; This is because the colon is interpreted as a separator in the DSN string.
</div>
While this is true, if I do not use the square brackets:

$ perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=::1&#34;,&#34;&#34;, &#34;&#34;&#41;&#39;

I can connect without problems.

This is consistent with how DBD::Pg treats connection strings; with the quare brackets it does not work, without them it just works.

If there would be some compelling reason to insist on having the possibility to use square brackets, please let me know.
--
Mike
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;16&nbsp;05:27:36&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;16&nbsp;05:27:36&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;11&nbsp;18:27:50&nbsp;2014</span>
    <span class="description">tim [...] cpanel.net -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;11&nbsp;18:34:31&nbsp;2014</span>
    <span class="description">tim [...] cpanel.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim [...] cpanel.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Sep 16 05:27:35 2013, MICHIELB wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Aug 31 11:41:43 2011, roblang wrote:
<div class="message-stanza open">&gt; &gt; $ perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=[::1]&#34;,
&gt; &gt; &#34;&#34;, &#34;&#34;&#41;&#39;
&gt; &gt; DBI connect&#40;&#39;database=foobar;host=[::1]&#39;,&#39;&#39;,...&#41; failed: Unknown
&gt; &gt; MySQL
&gt; &gt; server host &#39;[&#39; &#40;2&#41; at -e line 1
&gt; &gt; $
&gt; &gt;
&gt; &gt; This is because the colon is interpreted as a separator in the DSN
&gt; &gt; string.
</div>&gt; 
&gt; While this is true, if I do not use the square brackets:
&gt; 
&gt; $ perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=::1&#34;,&#34;&#34;,
&gt; &#34;&#34;&#41;&#39;
&gt; 
&gt; I can connect without problems.
&gt; 
&gt; This is consistent with how DBD::Pg treats connection strings; with
&gt; the quare brackets it does not work, without them it just works.
&gt; 
&gt; If there would be some compelling reason to insist on having the
&gt; possibility to use square brackets, please let me know.
&gt; --
&gt; Mike
</div>
I&#39;ve found that:
perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=::1&#34;,&#34;&#34;, &#34;&#34;&#41;&#39;
works only as an edge case.  I.e., the _OdbcParse function interprets ::1 as an empty host value.  This works as well:
perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=;&#34;,&#34;&#34;, &#34;&#34;&#41;&#39;

If I supply a whole IPv6 address:
perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host= 2620:0:28a0:2107:2718::3&#34;,&#34;&#34;, &#34;&#34;&#41;&#39;

Then I get an error:  
 failed: Can&#39;t connect to MySQL server on &#39;2620&#39; &#40;107&#41; at -e line 1

The regular expression is only allowing the first segment of the IPv6 address to appear due to the use of colons as separators.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;13&nbsp;16:40:31&nbsp;2014</span>
    <span class="description">tim [...] cpanel.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tim [...] cpanel.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Feb 11 18:34:31 2014, timmullin wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Sep 16 05:27:35 2013, MICHIELB wrote:
<div class="message-stanza open">&gt; &gt; On Wed Aug 31 11:41:43 2011, roblang wrote:
<div class="message-stanza open">&gt; &gt; &gt; $ perl -MDBI -e &#39;DBI-
<div class="message-stanza open">&gt; &gt; &gt; &gt;connect&#40;&#34;DBI:mysql:database=foobar;host=[::1]&#34;,
</div>&gt; &gt; &gt; &#34;&#34;, &#34;&#34;&#41;&#39;
&gt; &gt; &gt; DBI connect&#40;&#39;database=foobar;host=[::1]&#39;,&#39;&#39;,...&#41; failed: Unknown
&gt; &gt; &gt; MySQL
&gt; &gt; &gt; server host &#39;[&#39; &#40;2&#41; at -e line 1
&gt; &gt; &gt; $
&gt; &gt; &gt;
&gt; &gt; &gt; This is because the colon is interpreted as a separator in the DSN
&gt; &gt; &gt; string.
</div>&gt; &gt;
&gt; &gt; While this is true, if I do not use the square brackets:
&gt; &gt;
&gt; &gt; $ perl -MDBI -e &#39;DBI-
<div class="message-stanza open">&gt; &gt; &gt;connect&#40;&#34;DBI:mysql:database=foobar;host=::1&#34;,&#34;&#34;,
</div>&gt; &gt; &#34;&#34;&#41;&#39;
&gt; &gt;
&gt; &gt; I can connect without problems.
&gt; &gt;
&gt; &gt; This is consistent with how DBD::Pg treats connection strings; with
&gt; &gt; the quare brackets it does not work, without them it just works.
&gt; &gt;
&gt; &gt; If there would be some compelling reason to insist on having the
&gt; &gt; possibility to use square brackets, please let me know.
&gt; &gt; --
&gt; &gt; Mike
</div>&gt; 
&gt; I&#39;ve found that:
&gt; perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=::1&#34;,&#34;&#34;,
&gt; &#34;&#34;&#41;&#39;
&gt; works only as an edge case.  I.e., the _OdbcParse function interprets
&gt; ::1 as an empty host value.  This works as well:
&gt; perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=;&#34;,&#34;&#34;,
&gt; &#34;&#34;&#41;&#39;
&gt; 
&gt; If I supply a whole IPv6 address:
&gt; perl -MDBI -e &#39;DBI-&gt;connect&#40;&#34;DBI:mysql:database=foobar;host=
&gt; 2620:0:28a0:2107:2718::3&#34;,&#34;&#34;, &#34;&#34;&#41;&#39;
&gt; 
&gt; Then I get an error:
&gt; failed: Can&#39;t connect to MySQL server on &#39;2620&#39; &#40;107&#41; at -e line 1
&gt; 
&gt; The regular expression is only allowing the first segment of the IPv6
&gt; address to appear due to the use of colons as separators.
</div>

The fix for this is pretty easy, just two lines.  If I change the regular expression in _OdbcParse to ignore any separators that are contained within brackets, I can freely use IPv6 addresses in the connection string if I put brackets around them:

diff --git a/lib/DBD/mysql.pm b/lib/DBD/mysql.pm
index 1a2111a..e66e16c 100644
--- a/lib/DBD/mysql.pm
+++ b/lib/DBD/mysql.pm
@@ -58,9 +58,10 @@ sub _OdbcParse&#40;$$$&#41; {
        return;
     }
     while &#40;length&#40;$dsn&#41;&#41; {
-       if &#40;$dsn =~ /&#40;[^:;]*&#41;[:;]&#40;.*&#41;/&#41; {
+       if &#40;$dsn =~ /&#40;[^:;]*\[.*]|[^:;]*&#41;[:;]&#40;.*&#41;/&#41; {
            $val = $1;
            $dsn = $2;
+           $val =~ s/\[|]//g;        # Remove [] if present, the rest of the code prefers plain IPv6 addresses
        } else {
            $val = $dsn;
            $dsn = &#39;&#39;;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;15:09:31&nbsp;2015</span>
    <span class="description">MICHIELB [...] cpan.org -  Subject changed from &#39;DBD::mysql does not support IPv6 addresses&#39; to &#39;DBD::mysql does not support IPv6 addresses surrounded by square brackets&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;15:17:47&nbsp;2015</span>
    <span class="description">MICHIELB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> tim [...] cpanel.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 13 16:40:31 2014, timmullin wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The fix for this is pretty easy, just two lines.  If I change the
&gt; regular expression in _OdbcParse to ignore any separators that are
&gt; contained within brackets, I can freely use IPv6 addresses in the
&gt; connection string if I put brackets around them:
&gt; 
&gt; diff --git a/lib/DBD/mysql.pm b/lib/DBD/mysql.pm
&gt; index 1a2111a..e66e16c 100644
&gt; --- a/lib/DBD/mysql.pm
&gt; +++ b/lib/DBD/mysql.pm
&gt; @@ -58,9 +58,10 @@ sub _OdbcParse&#40;$$$&#41; {
&gt;         return;
&gt;      }
&gt;      while &#40;length&#40;$dsn&#41;&#41; {
&gt; -       if &#40;$dsn =~ /&#40;[^:;]*&#41;[:;]&#40;.*&#41;/&#41; {
&gt; +       if &#40;$dsn =~ /&#40;[^:;]*\[.*]|[^:;]*&#41;[:;]&#40;.*&#41;/&#41; {
&gt;             $val = $1;
&gt;             $dsn = $2;
&gt; +           $val =~ s/\[|]//g;        # Remove [] if present, the rest
&gt; of the code prefers plain IPv6 addresses
&gt;         } else {
&gt;             $val = $dsn;
&gt;             $dsn = &#39;&#39;;
</div>

The first half of your fix was already supplied by someone else and applied to the code base. I now added the second part:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-dbi/DBD-mysql/commit/01817870eceac55d0bad1f180d339375b4373088">https://github.com/perl5-dbi/DBD-mysql/commit/01817870eceac55d0bad1f180d339375b4373088</a></span>

Thanks for your contribution!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;06&nbsp;15:17:51&nbsp;2015</span>
    <span class="description">MICHIELB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
