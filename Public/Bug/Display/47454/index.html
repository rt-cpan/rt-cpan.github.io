<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47454 for Archive-Zip: v1.29 Bareword &#34;Cwd::getcwd&#34; not allowed while &#34;strict subs&#34; in use</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47454 for Archive-Zip: v1.29 Bareword &#34;Cwd::getcwd&#34; not allowed while &#34;strict subs&#34; in use</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Archive-Zip/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Archive-Zip/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Archive-Zip/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Archive-Zip/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Archive-Zip">Archive-Zip CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47454</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Archive-Zip/Active/">Archive-Zip</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
configserver [...] googlemail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-2540-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.29    </td>
  </tr>
  <tr id="CF-2541-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.30    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;05:45:41&nbsp;2009</span>
    <span class="description">configserver [...] googlemail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> v1.29 Bareword &#34;Cwd::getcwd&#34; not allowed while &#34;strict subs&#34; in use</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 30 Jun 2009 10:45:12 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Archive-Zip [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jonathan Michaelson &lt;configserver [...] googlemail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">v1.29 of Archive::Zip breaks the MailScanner application.

Running on perl v5.8.8 on CentOS v5.3:

Bareword &#34;Cwd::getcwd&#34; not allowed while &#34;strict subs&#34; in use at
/usr/lib/perl5/site_perl/5.8.8/Archive/Zip.pm line 552.
Compilation failed in require at /usr/mailscanner/lib/MailScanner/Message.pm
line 48.
BEGIN failed--compilation aborted at
/usr/mailscanner/lib/MailScanner/Message.pm line 48.
Compilation failed in require at /usr/mailscanner/bin/MailScanner line 107.
BEGIN failed--compilation aborted at /usr/mailscanner/bin/MailScanner line
107.

This worked fine in Archive::Zip v1.28 and also works if you add the
following into Zip.pm:

use strict;
no  strict &#39;subs&#39;;
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;08:46:45&nbsp;2009</span>
    <span class="description">paul [...] city-fan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 30 05:45:41 2009, configserver@googlemail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; v1.29 of Archive::Zip breaks the MailScanner application.
&gt; 
&gt; Running on perl v5.8.8 on CentOS v5.3:
&gt; 
&gt; Bareword &#34;Cwd::getcwd&#34; not allowed while &#34;strict subs&#34; in use at
&gt; /usr/lib/perl5/site_perl/5.8.8/Archive/Zip.pm line 552.
&gt; Compilation failed in require at
</div>/usr/mailscanner/lib/MailScanner/Message.pm
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; line 48.
&gt; BEGIN failed--compilation aborted at
&gt; /usr/mailscanner/lib/MailScanner/Message.pm line 48.
&gt; Compilation failed in require at /usr/mailscanner/bin/MailScanner line
</div>107.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; BEGIN failed--compilation aborted at /usr/mailscanner/bin/MailScanner line
&gt; 107.
&gt; 
&gt; This worked fine in Archive::Zip v1.28 and also works if you add the
&gt; following into Zip.pm:
&gt; 
&gt; use strict;
&gt; no  strict &#39;subs&#39;;
</div>
This affects perl 5.8.6 on Fedora 4, 5.8.8 on Fedora 5 through 8, and
5.8.8 on RHEL 5. Unaffected are perl 5.8.6 and earlier releases on older
Fedoras, 5.10.0 on current Fedora releases, 5.8.0 on RHEL 3, and 5.8.5
on RHEL 4.

Attached patch works across all of the above releases and is used in my
RPMs here: <span class="clickylink"><a target="new" rel="nofollow" href="http://mirror.city-fan.org/ftp/contrib/perl-modules/">http://mirror.city-fan.org/ftp/contrib/perl-modules/</a></span>
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Archive-Zip-1.29/lib/Archive/Zip.pm	2009-06-29 14:24:59.000000000 +0100
+++ Archive-Zip-1.29/lib/Archive/Zip.pm	2009-06-30 09:37:33.000000000 +0100
@@ -549,7 +549,7 @@
     my $localName = File::Spec-&gt;catpath&#40; $volume, $localDirs, $filename &#41;;
     require Cwd;
     unless &#40; $volume &#41; {
-        $localName = File::Spec-&gt;rel2abs&#40; $localName, Cwd::getcwd &#41;;
+        $localName = File::Spec-&gt;rel2abs&#40; $localName, Cwd::getcwd&#40;&#41; &#41;;
     }
     return $localName;
 }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;08:46:46&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;01&nbsp;12:08:36&nbsp;2009</span>
    <span class="description">adam [...] ali.as -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47454] v1.29 Bareword &#34;Cwd::getcwd&#34; not allowed  while &#34;strict subs&#34; in use</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Jul 2009 02:08:18 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Archive-Zip [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adamkennedybackup [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Resolved in 1.30. Thank you for the report &#40;and sorry for the oversight&#41;

2009/6/30 paul@city-fan.org via RT &lt;bug-Archive-Zip@rt.cpan.org&gt;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Archive-Zip
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47454">https://rt.cpan.org/Ticket/Display.html?id=47454</a></span> &gt;
&gt;
&gt; On Tue Jun 30 05:45:41 2009, configserver@googlemail.com wrote:
<div class="message-stanza open">&gt;&gt; v1.29 of Archive::Zip breaks the MailScanner application.
&gt;&gt;
&gt;&gt; Running on perl v5.8.8 on CentOS v5.3:
&gt;&gt;
&gt;&gt; Bareword &#34;Cwd::getcwd&#34; not allowed while &#34;strict subs&#34; in use at
&gt;&gt; /usr/lib/perl5/site_perl/5.8.8/Archive/Zip.pm line 552.
&gt;&gt; Compilation failed in require at
</div>&gt; /usr/mailscanner/lib/MailScanner/Message.pm
<div class="message-stanza open">&gt;&gt; line 48.
&gt;&gt; BEGIN failed--compilation aborted at
&gt;&gt; /usr/mailscanner/lib/MailScanner/Message.pm line 48.
&gt;&gt; Compilation failed in require at /usr/mailscanner/bin/MailScanner line
</div>&gt; 107.
<div class="message-stanza open">&gt;&gt; BEGIN failed--compilation aborted at /usr/mailscanner/bin/MailScanner line
&gt;&gt; 107.
&gt;&gt;
&gt;&gt; This worked fine in Archive::Zip v1.28 and also works if you add the
&gt;&gt; following into Zip.pm:
&gt;&gt;
&gt;&gt; use strict;
&gt;&gt; no  strict &#39;subs&#39;;
</div>&gt;
&gt; This affects perl 5.8.6 on Fedora 4, 5.8.8 on Fedora 5 through 8, and
&gt; 5.8.8 on RHEL 5. Unaffected are perl 5.8.6 and earlier releases on older
&gt; Fedoras, 5.10.0 on current Fedora releases, 5.8.0 on RHEL 3, and 5.8.5
&gt; on RHEL 4.
&gt;
&gt; Attached patch works across all of the above releases and is used in my
&gt; RPMs here: <span class="clickylink"><a target="new" rel="nofollow" href="http://mirror.city-fan.org/ftp/contrib/perl-modules/">http://mirror.city-fan.org/ftp/contrib/perl-modules/</a></span>
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;09&nbsp;03:33:43&nbsp;2009</span>
    <span class="description">CHORNY [...] cpan.org -  Fixed in 1.30 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;09&nbsp;03:33:43&nbsp;2009</span>
    <span class="description">CHORNY [...] cpan.org -  Broken in 1.29 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
