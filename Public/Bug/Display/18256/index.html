<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18256 for Net-Daemon: t/ithreadm.t hang/fail on darwin</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18256 for Net-Daemon: t/ithreadm.t hang/fail on darwin</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-Daemon/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-Daemon/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-Daemon/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-Daemon/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Daemon">Net-Daemon CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18256</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">10 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-Daemon/Active/">Net-Daemon</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MNOONING [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cpan [...] clotho.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-22384-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.38    </td>
  </tr>
  <tr id="CF-22385-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Net-Daemon-hacking.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/322153/147321/Net-Daemon-hacking.diff">
Thu May 24 22:00:36 2007 (2.5k) by chris [...] chrisdolan.net
</a>
</font></li>
</ul>


Net-Daemon-hacking.log<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/322153/147322/Net-Daemon-hacking.log">
Thu May 24 22:00:36 2007 (206k) by chris [...] chrisdolan.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;20&nbsp;13:32:32&nbsp;2006</span>
    <span class="description">cpan [...] clotho.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/ithreadm.t hang/fail on darwin</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The t/ithreadm.t test hangs or fails on darwin &#40;Mac OS X&#41;.  I tried
running tests several times and got different results each time:

=== Run 1 ===
&#40;via CPANPLUS v0.061&#41;

t/ithreadm......Child 0: Error while reading: 0 &#40;&#41; at t/ithreadm.t line
47, &lt;GEN1&gt; line 7.
Child 1: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 96.
Child 2: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 2.
Child 3: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 34.
Child 5: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 126.
Child 6: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 12.
Child 8: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 415.

=== Run 2 ===
&#40;via CPANPLUS v0.061&#41;

t/ithreadm......Child 2: Error while reading: 0 &#40;Connection reset by
peer&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 3: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 22.
Child 4: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 5: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 16.
Child 6: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 23.
Child 9: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 47.


=== Run 3 ===
&#40;by hand, &#34;perl -Ilib t/ithreadm.t&#34;

Starting server: perl -Iblib/lib -Iblib/arch t/server --mode=ithreads
logfile=stderr debug
1..10
Child 1: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 8.
Child 3: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 2.
Child 4: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 22.
Child 6: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 11.
ok 1
not ok 2
ok 3
not ok 4
not ok 5
ok 6
not ok 7
Child 7: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
not ok 8
ok 9
ok 10
Terminating server.

=== Run 3 ===
&#40;by hand, &#34;perl -Ilib t/ithreadm.t&#34;

Starting server: perl -Iblib/lib -Iblib/arch t/server --mode=ithreads
logfile=stderr debug
1..10
Child 1: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 3.
Child 2: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 15.
Child 3: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 51.
Child 4: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 56.
Child 5: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 34.
Child 6: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 21.
ok 1
not ok 2
not ok 3
not ok 4
not ok 5
not ok 6
not ok 7
Child 8: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 10.
Child 9: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 7.
ok 8
not ok 9
not ok 10
Terminating server.

=== Run 5 ===
&#40;by hand, &#34;perl -Ilib t/ithreadm.t&#34;

Starting server: perl -Iblib/lib -Iblib/arch t/server --mode=ithreads
logfile=stderr debug
1..10
Child 3: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 4: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 6: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
ok 1
ok 2
ok 3
not ok 4
not ok 5
Alarm clock



My Perl is Apple&#39;s build of 5.8.6 &#40;&#34;darwin-thread-multi-2level&#34;&#41; on OS X
10.4.5.

Note, but perhaps not relevant: this platform has odd timeout behavior
on abruptly closed ports -- servers sometimes can&#39;t re-bind to ports for
25-40 seconds after an unexpected close.

  --Chris
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;08:52:21&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in Net-Daemon/Net-Daemon-0.40.tar.gz which is now on CPAN
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;08:52:22&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;13:55:52&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I do not have a Darwin machine to test this on, but it should work
&#40;famous last words&#41;.

Fixed in Net-Daemon-0.40 and Net-Daemon-0.41
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;13:55:55&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;13:55:58&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Given to MNOONING</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;22:10:47&nbsp;2007</span>
    <span class="description">chris+rt [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 23 13:55:52 2007, MNOONING wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I do not have a Darwin machine to test this on, but it should work
&gt; &#40;famous last words&#41;.
&gt; 
&gt; Fixed in Net-Daemon-0.40 and Net-Daemon-0.41
</div>

I&#39;m sorry to be the bearer of bad news, but it still fails on OSX
10.4.9, perl 5.8.6.  Are there any additional diagnostics I can provide,
or tests I can run for you?

Below is the output of two runs.  The first is unmodified code.  The
second is with some additional diagnostics enabled by hacking
t/ithreadm.t and t/server.  However, I can&#39;t make any sense of the
errors after reading code for 20 minutes...

Chris

% perl -Mblib t/ithreadm.t 
Starting server: perl -Iblib/lib -Iblib/arch t/server --mode=ithreads
logfile=stderr debug
1..10
Child 0: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 1: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 3: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 835.
Child 4: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 796.
not ok 1
not ok 2
ok 3
not ok 4
not ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
Terminating server.


% perl -Mblib t/ithreadm.t
Starting server: perl -w -Mblib t/server --mode=ithreads
--logfile=stderr --debug
1..10
Wed May 23 20:57:38 2007 debug, 0, Server starting in operation mode
ithreads
Wed May 23 20:57:38 2007 debug, 0, Created ndtest.prt with port 56914

Wed May 23 20:57:38 2007 notice, 0, Server starting
server on port 56914
Spawning child 0.
Wed May 23 20:57:39 2007 debug, 0, Connection from 127.0.0.1, port 56915
Wed May 23 20:57:39 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828c9c&#41;

Wed May 23 20:57:40 2007 debug, 1, New child starting
&#40;Multiplier=HASH&#40;0x18a6c70&#41;&#41;.
Wed May 23 20:57:40 2007 debug, 1, Accepting client from 127.0.0.1, port
56915
Wed May 23 20:57:40 2007 debug, 1, Accepting client
Spawning child 1.
Wed May 23 20:57:40 2007 debug, 1, Child terminating.
Wed May 23 20:57:40 2007 debug, 0, Connection from 127.0.0.1, port 56916
Wed May 23 20:57:40 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828ca8&#41;

Spawning child 2.
Wed May 23 20:57:40 2007 debug, 2, New child starting
&#40;Multiplier=HASH&#40;0x194098c&#41;&#41;.
Wed May 23 20:57:40 2007 debug, 2, Accepting client from 127.0.0.1, port
56916
Wed May 23 20:57:40 2007 debug, 2, Accepting client
Wed May 23 20:57:40 2007 debug, 2, Child terminating.
Child 1: Error while reading: 0 &#40;Connection reset by peer&#41;, iter 532 at
t/ithreadm.t line 48, &lt;GEN1&gt; line 532.
Wed May 23 20:57:40 2007 debug, 0, Connection from 127.0.0.1, port 56917
Wed May 23 20:57:40 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828c30&#41;

Spawning child 3.
Wed May 23 20:57:40 2007 debug, 3, New child starting
&#40;Multiplier=HASH&#40;0x19dab8c&#41;&#41;.
Wed May 23 20:57:40 2007 debug, 3, Accepting client from 127.0.0.1, port
56917
Wed May 23 20:57:40 2007 debug, 3, Accepting client
Wed May 23 20:57:40 2007 debug, 3, Child terminating.
Wed May 23 20:57:41 2007 debug, 0, Connection from 127.0.0.1, port 56918
Wed May 23 20:57:41 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x189d9cc&#41;

Spawning child 4.
Wed May 23 20:57:41 2007 debug, 4, New child starting
&#40;Multiplier=HASH&#40;0x1a7418c&#41;&#41;.
Wed May 23 20:57:41 2007 debug, 4, Accepting client from 127.0.0.1, port
56918
Wed May 23 20:57:41 2007 debug, 4, Accepting client
Wed May 23 20:57:41 2007 debug, 4, Child terminating.
Child 3: Error while reading: 0 &#40;Connection reset by peer&#41;, iter 1 at
t/ithreadm.t line 48, &lt;GEN1&gt; line 1.
Wed May 23 20:57:41 2007 debug, 0, Connection from 127.0.0.1, port 56919
Wed May 23 20:57:41 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828c9c&#41;

Spawning child 5.
Wed May 23 20:57:41 2007 debug, 5, New child starting
&#40;Multiplier=HASH&#40;0x1b0e78c&#41;&#41;.
Wed May 23 20:57:41 2007 debug, 5, Accepting client from 127.0.0.1, port
56919
Wed May 23 20:57:41 2007 debug, 5, Accepting client
Wed May 23 20:57:41 2007 debug, 5, Child terminating.
Wed May 23 20:57:41 2007 debug, 0, Connection from 127.0.0.1, port 56920
Wed May 23 20:57:41 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828ca8&#41;

Spawning child 6.
Wed May 23 20:57:41 2007 debug, 6, New child starting
&#40;Multiplier=HASH&#40;0x1ba818c&#41;&#41;.
Wed May 23 20:57:41 2007 debug, 6, Accepting client from 127.0.0.1, port
56920
Wed May 23 20:57:41 2007 debug, 6, Accepting client
Wed May 23 20:57:42 2007 debug, 6, Child terminating.
Spawning child 7.
Wed May 23 20:57:42 2007 debug, 0, Connection from 127.0.0.1, port 56921
Wed May 23 20:57:42 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828c30&#41;

Wed May 23 20:57:42 2007 debug, 7, New child starting
&#40;Multiplier=HASH&#40;0x1c4298c&#41;&#41;.
Wed May 23 20:57:42 2007 debug, 7, Accepting client from 127.0.0.1, port
56921
Wed May 23 20:57:42 2007 debug, 7, Accepting client
Wed May 23 20:57:42 2007 debug, 7, Child terminating.
Child 6: Error while reading: 0 &#40;Connection reset by peer&#41;, iter 1 at
t/ithreadm.t line 48, &lt;GEN1&gt; line 1.
Spawning child 8.
Wed May 23 20:57:42 2007 debug, 0, Connection from 127.0.0.1, port 56922
Wed May 23 20:57:42 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x189d9cc&#41;

Wed May 23 20:57:42 2007 debug, 8, New child starting
&#40;Multiplier=HASH&#40;0x1cdc58c&#41;&#41;.
Wed May 23 20:57:42 2007 debug, 8, Accepting client from 127.0.0.1, port
56922
Wed May 23 20:57:42 2007 debug, 8, Accepting client
Wed May 23 20:57:42 2007 debug, 8, Child terminating.
Wed May 23 20:57:42 2007 debug, 0, Connection from 127.0.0.1, port 56923
Wed May 23 20:57:42 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828c9c&#41;

Spawning child 9.
Child 7: Error while reading: 0 &#40;&#41;, iter 874 at t/ithreadm.t line 48,
&lt;GEN1&gt; line 874.
Wed May 23 20:57:42 2007 debug, 9, New child starting
&#40;Multiplier=HASH&#40;0x1d76d8c&#41;&#41;.
Wed May 23 20:57:42 2007 debug, 9, Accepting client from 127.0.0.1, port
56923
Wed May 23 20:57:42 2007 debug, 9, Accepting client
Wed May 23 20:57:43 2007 debug, 0, Connection from 127.0.0.1, port 56924
Wed May 23 20:57:43 2007 debug, 0, Child clone: Multiplier=HASH&#40;0x1828ca8&#41;

ok 1
Wed May 23 20:57:43 2007 debug, 9, Child terminating.
not ok 2
ok 3
Wed May 23 20:57:43 2007 debug, 10, New child starting
&#40;Multiplier=HASH&#40;0x1e1198c&#41;&#41;.
Wed May 23 20:57:43 2007 debug, 10, Accepting client from 127.0.0.1,
port 56924
Wed May 23 20:57:43 2007 debug, 10, Accepting client
Wed May 23 20:57:43 2007 debug, 10, Child terminating.
Child 9: Error while reading: 0 &#40;&#41;, iter 590 at t/ithreadm.t line 48,
&lt;GEN1&gt; line 590.
not ok 4
ok 5
ok 6
not ok 7
not ok 8
ok 9
not ok 10
Terminating server.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;23&nbsp;22:10:51&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;09:12:35&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the work.
ithreadm.t is only a little over 100 lines.  Please add &#34;:pid is $$:&#34; to
your print statements, run it again, and post the results and attach
ithreadm.t.

Thanks
M. Nooning
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;09:54:37&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On second thought, ...

Obviously line 47 is within sub ReadWrite.  ReadWrite is being called
from sub MyChild where $fh got its value from these lines:

        my $fh = IO::Socket::INET-&gt;new&#40;&#39;PeerAddr&#39; =&gt; &#39;127.0.0.1&#39;,
                                       &#39;PeerPort&#39; =&gt; $port&#41;;

I can see from other documentation that the invocation for $fh, as well
as $fh-&gt;getline&#40;&#41;, are being called correctly.  The error seems to be in
the Socket module, which is where I think getline&#40;&#41; is defined.  Please
make sure you have the latest IO::Socket.  INET inherits the getline&#40;&#41;
from Socket.  Or is it from IO?  In any case, please make sure you have
the latest of those modules since getline&#40;&#41; seems to be coming back
undefined to Net::Daemon.

Here is my reasoning.

If the parameter $fh as received by ReadWrite was not valid it would be
dieing at line 44.  Then the line
     my $line = $fh-&gt;getline&#40;&#41;;
is the culprit.  The question is, what is happening in getline?

I would like to see what the successful lines look like, so please
change the code around the said line to this:
     print STDERR &#40;&#34;# PID $$ ref fh is &#34;, ref&#40;$fh&#41;, &#34;\n&#34;&#41;;
     my $line = $fh-&gt;getline&#40;&#41;;
     if &#40; $defined&#40;$line&#41; &#41; {
        print STDERR &#40;&#34;# line is defined :$line:\n&#34;&#41;;
     } else {
        print STDERR &#40;&#34;# line is NOT defined :$line:\n&#34;&#41;;
     }


Um, one more thing.  Right after the MyChild line 

    my $fh = IO::Socket::INET-&gt;new ....
please add
    print STDERR &#40;&#34;PID $$ port is $port\n&#34;&#41;;

Thanks
M. Nooning
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;22:00:35&nbsp;2007</span>
    <span class="description">chris [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18256] t/ithreadm.t hang/fail on darwin </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 20:59:37 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Dolan &lt;chris [...] chrisdolan.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Malcolm,

I confirmed that I already have the latest IO::Socket &#40;v1.30&#41; and  
IO::Socket::INET &#40;v1.31&#41;.  As for Socket, I get this message:

[ERROR] The core Perl 5.008006 module &#39;Socket&#39; can only be upgraded  
from 1.77 to 1.78 by Perl itself &#40;perl-5.8.8.tar.gz&#41;. Aborting install.

It&#39;s worth pointing out that sometimes the failures I witnessed  
happened on the first iteration, but sometimes later &#40;e.g. in my  
report yesterday, one thread failed on iteration 532 of 1000;   
Today&#39;s report shows similar unpredictability&#41;.  Failures on  
iteration 1 are the most common, but other numbers appear  
sporadically.  Attached are two files: a diff showing my hacked t/ 
server and t/ithreadm.t, and a log of one output run.

Thanks for continuing the investigation.  At some point, though, we  
should consider just saying that threading on Mac perl5.8.6 may be  
unreliable.

Chris


--
Chris Dolan, Equilibrious LLC, <span class="clickylink"><a target="new" rel="nofollow" href="http://equilibrious.net/">http://equilibrious.net/</a></span>
Public key: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/public.key">http://chrisdolan.net/public.key</a></span>
vCard: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/ChrisDolan.vcf">http://chrisdolan.net/ChrisDolan.vcf</a></span>
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322153/147322/Net-Daemon-hacking.log">Download Net-Daemon-hacking.log</a><br />
<span class="downloadcontenttype">application/octet-stream 206k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"></div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;22:51:45&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">At <span class="clickylink"><a target="new" rel="nofollow" href="http://testers.cpan.org/show/Net-Daemon.html">http://testers.cpan.org/show/Net-Daemon.html</a></span> I see the pass/fail
Darwin items below. 

0.37 110801  PASS 5.8.1 on Darwin 6.8 &#40;darwin&#41;

0.38 252567  PASS 5.8.7 on Darwin 8.2.0 &#40;darwin-multi-2level-64int&#41;
0.38 251792  FAIL 5.8.7 on Darwin 8.2.0 &#40;darwin-thread-multi-2level&#41;
0.38 243259  FAIL 5.8.6 on Darwin 8.0 &#40;darwin-thread-multi-2level&#41;
0.38 168215  PASS 5.6.0 on Darwin 6.0 &#40;darwin&#41;
0.38 110892  PASS 5.8.1 on Darwin 6.8 &#40;darwin&#41;
0.38 110801  PASS 5.8.1 on Darwin 6.8 &#40;darwin&#41;

0.39 481598  PASS 5.8.8 on Darwin 8.9.1 &#40;darwin-2level&#41;

As you can see, the only two failures were with a machine like yours,
&#34;darwin-thread-multi-2level&#34;.  I don&#39;t know what to make of this since I
don&#39;t know Darwin, and I certainly do not know one Darwin version from
another.  Ouch!

Right now you are the only one to test on a Darwin machine with
Net::Daemon 0.41.  I am hoping there will soon be more CPAN testers with
Darwin, specifically machines like yours, testing the 0.41 module.  If
they consistently pass, or consistently fail, that will tell us
something.  Until then I will have to hope to get help from elsewhere.

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;23:53:53&nbsp;2007</span>
    <span class="description">chris [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18256] t/ithreadm.t hang/fail on darwin </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 22:51:54 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Dolan &lt;chris [...] chrisdolan.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On May 24, 2007, at 9:51 PM, Malcolm Nooning via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=18256">http://rt.cpan.org/Ticket/Display.html?id=18256</a></span> &gt;
&gt;
&gt; At <span class="clickylink"><a target="new" rel="nofollow" href="http://testers.cpan.org/show/Net-Daemon.html">http://testers.cpan.org/show/Net-Daemon.html</a></span> I see the pass/fail
&gt; Darwin items below.
&gt;
&gt; 0.37 110801  PASS 5.8.1 on Darwin 6.8 &#40;darwin&#41;
&gt;
&gt; 0.38 252567  PASS 5.8.7 on Darwin 8.2.0 &#40;darwin-multi-2level-64int&#41;
&gt; 0.38 251792  FAIL 5.8.7 on Darwin 8.2.0 &#40;darwin-thread-multi-2level&#41;
&gt; 0.38 243259  FAIL 5.8.6 on Darwin 8.0 &#40;darwin-thread-multi-2level&#41;
&gt; 0.38 168215  PASS 5.6.0 on Darwin 6.0 &#40;darwin&#41;
&gt; 0.38 110892  PASS 5.8.1 on Darwin 6.8 &#40;darwin&#41;
&gt; 0.38 110801  PASS 5.8.1 on Darwin 6.8 &#40;darwin&#41;
&gt;
&gt; 0.39 481598  PASS 5.8.8 on Darwin 8.9.1 &#40;darwin-2level&#41;
&gt;
&gt; As you can see, the only two failures were with a machine like yours,
&gt; &#34;darwin-thread-multi-2level&#34;.  I don&#39;t know what to make of this  
&gt; since I
&gt; don&#39;t know Darwin, and I certainly do not know one Darwin version from
&gt; another.  Ouch!
&gt;
&gt; Right now you are the only one to test on a Darwin machine with
&gt; Net::Daemon 0.41.  I am hoping there will soon be more CPAN testers  
&gt; with
&gt; Darwin, specifically machines like yours, testing the 0.41 module.  If
&gt; they consistently pass, or consistently fail, that will tell us
&gt; something.  Until then I will have to hope to get help from elsewhere.
</div>
Interesting.  Darwin is the open-source kernel of Mac OS X, and its  
version number closely parallels the OS X version number.  To give a  
little context:

   Mac OS X 10.0.x &#34;Cheetah&#34; &#40; == darwin 1.3.x&#41;  shipped with perl  
5.6.0     in 2001
   Mac OS X 10.1.x &#34;Puma&#34;    &#40; == darwin 5.x&#41;    shipped with perl  
5.6.0     in 2001
   Mac OS X 10.2.x &#34;Jaguar&#34;  &#40; == darwin 6.x&#41;    shipped with perl  
5.6.0     in 2002
   Mac OS X 10.3.x &#34;Panther&#34; &#40; == darwin 7.x&#41;    shipped with perl  
5.8.1-RC3 in 2003
   Mac OS X 10.4.x &#34;Tiger&#34;   &#40; == darwin 8.x&#41;    shipped with perl  
5.8.6     in 2005
   Mac OS X 10.5.x &#34;Leopard&#34; &#40; == darwin 9.x?&#41; will ship with perl  
5.8.8     in 2007

&#34;2level&#34; refers to a C-compiler namespace setting used to build  
perl.  I don&#39;t recall what the &#34;multi&#34; means.

If you see any versions other than those, it&#39;s a non-Apple build.

Chris


--
Chris Dolan, Equilibrious LLC, <span class="clickylink"><a target="new" rel="nofollow" href="http://equilibrious.net/">http://equilibrious.net/</a></span>
Public key: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/public.key">http://chrisdolan.net/public.key</a></span>
vCard: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/ChrisDolan.vcf">http://chrisdolan.net/ChrisDolan.vcf</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;10:08:13&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have a feeling it is not Darwin related.  A search for &#34;cpan testers
net::daemon&#34; shows seven PASS four FAIL test runs.  There is something
wrong with Net::Daemon.

I am a co-maintainer because I put together a some patches to fix things
I could find by putting in a lot of print statements and tracing through
the code.  That, and the fact that it had not worked on Windows for
three years and I am on a Windows machine.  The print statement and
backtracing approach only gets one but so far.  In reality I have never
seen any of this code before.  In addition, I&#39;ve never read up on
threads programming.  I would like to be more helpful but there is too
much I do not know in this subject area.

I wrote to the original author and asked him to look at the last few bugs.

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;26&nbsp;14:30:37&nbsp;2007</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Again, I am hoping the original author, or someone with a threads
programming background, will add some information here.  In the
meanwhile someone else wrote me that they are getting similar symptoms
on a Darwin machine, which I will paste bits and pieces of below.

------------------ paste bits and pieces 
Summary of my perl5 &#40;revision 5 version 8 subversion 8&#41; configuration:
 Platform:
   osname=darwin, osvers=8.8.0, archname=darwin-thread-multi-2level
   uname=&#39;darwin snowcrash 8.8.0 darwin kernel version 8.8.0: fri sep
8 17:18:57 pdt 2006; root:xnu-792.12.6.obj~1release_ppc power
macintosh powerpc


...
...

t/ithreadm......Child 1: Error while reading: 0 &#40;&#41; at t/ithreadm.t
line 47, &lt;GEN1&gt; line 575.
Child 2: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 428.
Child 3: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 616.
... ... 
etcetera, etcetera, etcetera
------------------ end paste bits and pieces


BTW: I posted &#34;Where does &lt;GEN1&gt; come from?&#34; on perlmonks.org and got an
interesting answer.  I paste their answers below for lack of anything
better to say about the GEN messages.  

From perlfunc for die:
    If the last element of LIST does not end in a newline, the current
script line number and input line number &#40;if any&#41; are also printed, and
a newline is supplied. Note that the ``input line number&#39;&#39; &#40;also known
as ``chunk&#39;&#39;&#41; is subject to whatever notion of ``line&#39;&#39; happens to be
currently in effect, and is also available as the special variable $.. 

...

It is a test file from Net::Daemon which uses IO::Socket so I&#39;d bet
it&#39;s just read from the second anonymous glob generated for a socket
&#40;the first would have been named GEN0&#41;. You can get the same handle
names yourself with gensym from the core Symbol module.
   --- 
It is the line number of the most recently opened filehandle.

Here&#39;s a &#40;slightly contrived&#41; example:

#!/usr/bin/perl

use strict;
use warnings;

use FileHandle;

my $iam = $0;
my $fh = new FileHandle;
open&#40;$fh, &#34;&lt;&#34;, $iam&#41; or die &#34;Can&#39;t open myself:  &#39;$iam&#39; &#40;$!&#41;\n&#34;;

my $cnt = 15;
while &#40;my $line = &lt;$fh&gt;&#41; {
    chomp $line;
    printf &#34;%2d:  %s\n&#34;, &#40;10 / $cnt--&#41;, $line;
}

When saved as the file &#34;mytest&#34;, and run, it errors out on the 15th
line, where a division by zero error occurs:

Illegal division by zero at mytest line 15, &lt;GEN0&gt; line 16.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;25&nbsp;21:30:47&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please try the latest version, 0.43.  

Per the CPAN testers at <span class="clickylink"><a target="new" rel="nofollow" href="http://testers.cpan.org/show/Net-Daemon.html">http://testers.cpan.org/show/Net-Daemon.html</a></span> 
the Net::Daemon package passes on all of the machines tested, but Darwin
is not one of them that was tried.

Does it still fail?

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;25&nbsp;22:53:47&nbsp;2007</span>
    <span class="description">chris+rt [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> cpan [...] chrisdolan.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 25 21:30:47 2007, MNOONING wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please try the latest version, 0.43.  
&gt; ...
&gt; Does it still fail?
</div>
Yes, it still fails.

t/base..........ok
t/config........ok
t/fork..........ok
t/forkm.........ok
t/ithread.......Perl exited with active threads:
        0 running and unjoined
        1 finished and unjoined
        0 running and detached
ok
t/ithreadm......Child 1: Error while reading: 0 &#40;Connection reset by
peer&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 3: Error while reading: 0 &#40;&#41; at t/ithreadm.t line 47, &lt;GEN1&gt; line 818.
Child 5: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 6: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
Child 7: Error while reading: 0 &#40;Connection reset by peer&#41; at
t/ithreadm.t line 47, &lt;GEN1&gt; line 1.
FAILED tests 2, 4, 6-8
        Failed 5/10 tests, 50.00% okay
t/loop-child....ok
t/loop..........ok
t/single........ok
t/thread........skipped
        all skipped: no reason given
t/threadm.......ok
t/unix..........ok
Failed Test  Stat Wstat Total Fail  List of Failed
-------------------------------------------------------------------------------
t/ithreadm.t               10    5  2 4 6-8
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;30&nbsp;20:38:11&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Arrrrrrgh!
To tell you the truth, I am kind of at a loss as to avenues of approach
to fix this for Darwin.  

Looking up &#34;cpan testers net::daemon&#34; reveals 
     0.43 &#40;32 PASSes, 2 UNKNOWNs&#41;

which means it works for all of the other platforms tried.  What is it
about Darwin that is different?.  If it failed on more platforms it
would probably be easier to track down.

Unless someone else comes up with some ideas, this will probably not see
much progress.  That is a killer as far as platform independence is
concerned.  I will just have to give this more thought.

Thanks
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;31&nbsp;00:41:58&nbsp;2007</span>
    <span class="description">chris+rt [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> cpan [...] chrisdolan.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I agree, it&#39;s confusing and frustrating and I too am stumped.  I just
tried it with a third-party build of Perl 5.8.8 &#40;intead of Apple&#39;s build
of 5.8.6&#41; and get similar errors.  I recommend that you just mark this
bug as &#34;stalled&#34;. :-&#40;

Chris

On Mon Jul 30 20:38:11 2007, MNOONING wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Arrrrrrgh!
&gt; To tell you the truth, I am kind of at a loss as to avenues of approach
&gt; to fix this for Darwin.  
&gt; 
&gt; Looking up &#34;cpan testers net::daemon&#34; reveals 
&gt;      0.43 &#40;32 PASSes, 2 UNKNOWNs&#41;
&gt; 
&gt; which means it works for all of the other platforms tried.  What is it
&gt; about Darwin that is different?.  If it failed on more platforms it
&gt; would probably be easier to track down.
&gt; 
&gt; Unless someone else comes up with some ideas, this will probably not see
&gt; much progress.  That is a killer as far as platform independence is
&gt; concerned.  I will just have to give this more thought.
&gt; 
&gt; Thanks
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;22&nbsp;18:18:33&nbsp;2020</span>
    <span class="description">TODDR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ticket migrated to github as <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/toddr/Net-Daemon/issues/11">https://github.com/toddr/Net-Daemon/issues/11</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;22&nbsp;18:18:34&nbsp;2020</span>
    <span class="description">TODDR [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
