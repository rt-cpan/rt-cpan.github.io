<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #104465 for Test-Most: Severe Bug: tests run after bail_on_fail</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #104465 for Test-Most: Severe Bug: tests run after bail_on_fail</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Test-Most">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Test-Most">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Test-Most">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Test-Most">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Most">Test-Most CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">104465</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Test-Most">Test-Most</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sebastian_rose [...] gmx.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220200-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220201-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=104465">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1496827" href="/Public/Bug/Display.html?id=104465#txn-1496827">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;15&nbsp;16:37:34&nbsp;2015</span>
    <span class="description">sebastian_rose [...] gmx.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Severe Bug: tests run after bail_on_fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 May 2015 22:37:17 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Most [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sebastian Rose &lt;sebastian_rose [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496827/797288/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797288">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 225b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello maintainers,


I just &#40;2015-05-15&#41; installed Test::Most.  I was especially interested
in the handy error handling features.

Unfortunately I found, what I consider a severe bug &#40;on the first
glance&#41;.  A few examples:
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496827/797289/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797289">with headers</a>
<br />
<span class="downloadcontenttype">text/x-perl 281b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">    use Test::Most &#39;no_plan&#39;;

    die_on_fail;
    ok 1, &#39;Throw on fail&#39;;

    restore_fail;  # The error happens with and without this line.

    bail_on_fail;
    ok 0, &#39;BAIL_OUT on fail&#39;;   # Expected to stop testing immediately!

    restore_fail;
    ok 1, &#39;Dangerous test&#39;;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496827/797290/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797290">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 726b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
sh# prove t/test_most_error_handling.t  -v
01  t/test_most_error_handling.t .. 
02  ok 1 - Throw on fail
03  not ok 2 - BAIL_OUT on fail
04  ok 3 - Dangerous test - WILL BE EXECUTED
05  1..3
06  Bailout called.  Further testing stopped:  Test failed.  BAIL OUT!.
07  Bail out!  Test failed.  BAIL OUT!.
08  
09  #   Failed test &#39;BAIL_OUT on fail&#39;
10  #   at t/test_most_error_handling.t line 9.
11  # Looks like you failed 1 test of 3.
12  FAILED--Further testing stopped: Test failed.  BAIL OUT!.


NOTE lines 4 and 11!  3 Tests were executed - instead of 2.  According
to the docs, this does not seem to be the intended behaviour &#40;to me&#41;.




Here comes the behaviour that I would expect &#40;triggering BAIL_OUT &#34;by
hand&#34;&#41;:
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496827/797291/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797291">with headers</a>
<br />
<span class="downloadcontenttype">text/x-perl 194b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">use Test::Most &#39;no_plan&#39;;

die_on_fail;
ok 1, &#39;Throw on fail&#39;;

bail_on_fail;
ok&#40; 0, &#39;BAIL_OUT on fail&#39; &#41; or BAIL_OUT&#40;&#34; S T O P &#34;&#41;;

restore_fail;
ok 1, &#39;Dangerous test - WILL NOT BE EXECUTED&#39;;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496827/797292/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797292">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 592b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

sh# prove t/test_most_error_handling.t  -v
01  t/test_most_error_handling.t .. 
02  ok 1 - Throw on fail
03  not ok 2 - BAIL_OUT on fail
04  Bailout called.  Further testing stopped:  S T O P
05  Bail out!   S T O P 
06  
07  #   Failed test &#39;BAIL_OUT on fail&#39;
08  #   at t/test_most_error_handling.t line 7.
09  FAILED--Further testing stopped: S T O P


Only two tests executed.  BAIL_OUT stopped the testing immediatly.
&#39;Dangerous test&#39; is NOT executed.








--


Ich setzte einen Fuß in die Luft, und sie trug.
                                                         &#40;Hilde Domin&#41;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1496830" href="/Public/Bug/Display.html?id=104465#txn-1496830">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;15&nbsp;17:08:43&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496830/797295/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797295">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 363b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-05-15 13:37:34, sebastian_rose@gmx.de wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello maintainers,
&gt; 
&gt; 
&gt; I just &#40;2015-05-15&#41; installed Test::Most.  I was especially interested
&gt; in the handy error handling features.
&gt; 
&gt; Unfortunately I found, what I consider a severe bug &#40;on the first
&gt; glance&#41;.  A few examples:
&gt; 
&gt; 
</div>

What is your installed version of Test::More and Test::Builder?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1496831" href="/Public/Bug/Display.html?id=104465#txn-1496831">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;15&nbsp;17:08:44&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1496853" href="/Public/Bug/Display.html?id=104465#txn-1496853">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;15&nbsp;17:17:24&nbsp;2015</span>
    <span class="description">exodist7 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496853/797301/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797301">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 772b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I seem to recall a discussion about this, and a Test::Builder feature request that never got fleshed out. Basically if you bail-out as soon as the failure happens you get no debugging, you simply get the &#39;not ok&#39; line and no info on what line it failed. So the way this feature is often implemented is to note that you should bail, but let stuff continue so that diag gets printed, then bail the next time ok is called.

So you have a choice between immediate bailing with no helpful diag, or helpful diag, but a delayed bail.

Here are related discussions, I may have some details wrong, so if the conversation contradicts anything above believe the conversation:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Test-More/test-more/issues/373">https://github.com/Test-More/test-more/issues/373</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Test-More/test-more/wiki/Stop-On-Fail">https://github.com/Test-More/test-more/wiki/Stop-On-Fail</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1496861" href="/Public/Bug/Display.html?id=104465#txn-1496861">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;15&nbsp;17:43:21&nbsp;2015</span>
    <span class="description">sebastian_rose [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #104465] Severe Bug: tests run after bail_on_fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 May 2015 23:43:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Karen Etheridge via RT&#34; &lt;bug-Test-Most [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sebastian Rose &lt;sebastian_rose [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496861/797307/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797307">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 892b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Karen Etheridge via RT&#34; &lt;bug-Test-Most@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=104465">https://rt.cpan.org/Ticket/Display.html?id=104465</a></span> &gt;
&gt;
&gt; On 2015-05-15 13:37:34, sebastian_rose@gmx.de wrote:
<div class="message-stanza open">&gt;&gt; Hello maintainers,
&gt;&gt; 
&gt;&gt; 
&gt;&gt; I just &#40;2015-05-15&#41; installed Test::Most.  I was especially interested
&gt;&gt; in the handy error handling features.
&gt;&gt; 
&gt;&gt; Unfortunately I found, what I consider a severe bug &#40;on the first
&gt;&gt; glance&#41;.  A few examples:
&gt;&gt; 
&gt;&gt; 
</div>&gt;
&gt;
&gt; What is your installed version of Test::More and Test::Builder?
&gt;
</div>
Hm - sorry - the info was missing.
I updated all my Perl modules just before I tried Test::Most.



$Test::More::VERSION = 1.001014
$Test::Builder::VERSION = 1.001014

This is perl 5, version 20, subversion 1 &#40;v5.20.1&#41; built for x86_64-linux-thread-multi





-- 


Ich setzte einen Fuß in die Luft, und sie trug.
                                                         &#40;Hilde Domin&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1496863" href="/Public/Bug/Display.html?id=104465#txn-1496863">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;15&nbsp;17:49:32&nbsp;2015</span>
    <span class="description">sebastian_rose [...] gmx.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #104465] Severe Bug: tests run after bail_on_fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 May 2015 23:49:21 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Chad Granum via RT&#34; &lt;bug-Test-Most [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Sebastian Rose &lt;sebastian_rose [...] gmx.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496863/797309/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797309">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Chad Granum via RT&#34; &lt;bug-Test-Most@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=104465">https://rt.cpan.org/Ticket/Display.html?id=104465</a></span> &gt;
&gt;
&gt; I seem to recall a discussion about this, and a Test::Builder feature request
&gt; that never got fleshed out. Basically if you bail-out as soon as the failure
&gt; happens you get no debugging, you simply get the &#39;not ok&#39; line and no info on
&gt; what line it failed. So the way this feature is often implemented is to note
&gt; that you should bail, but let stuff continue so that diag gets printed, then
&gt; bail the next time ok is called.
&gt;
&gt; So you have a choice between immediate bailing with no helpful diag, or helpful diag, but a delayed bail.
&gt;
&gt; Here are related discussions, I may have some details wrong, so if the conversation contradicts anything above believe the conversation:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Test-More/test-more/issues/373">https://github.com/Test-More/test-more/issues/373</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Test-More/test-more/wiki/Stop-On-Fail">https://github.com/Test-More/test-more/wiki/Stop-On-Fail</a></span>
</div>

Hallo Chad,

the problem is, that the docs say BAIL_OUT is called.  I would expect
the tests to stop.


  &#34;bail_on_fail&#34;
     bail_on_fail;
     is_deeply $foo, bar, &#39;... we bail out if this fails&#39;;

    This function, if called, will cause the test suite to BAIL_OUT&#40;&#41; if any
    tests fail after it.

...

    If the &#34;DIE_ON_FAIL&#34; or &#34;BAIL_ON_FAIL&#34; environment variables are true, any
    tests which use &#34;Test::Most&#34; will throw an exception or call BAIL_OUT on
    test failure.



perldoc Test::More


   BAIL_OUT
            BAIL_OUT&#40;$reason&#41;;

        Indicates to the harness that things are going so badly all testing
        should terminate. This includes the running of any additional test
        scripts.

        This is typically used when testing cannot continue such as a critical
        module failing to compile or a necessary external utility not being
        available such as a database connection failing.

        The test will exit with 255.

        For even better control look at Test::Most.




Debugging can be done differently &#40;and why not add more tests to find an
error?&#41;.






-- 


Ich setzte einen Fuß in die Luft, und sie trug.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1496883" href="/Public/Bug/Display.html?id=104465#txn-1496883">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;15&nbsp;21:08:29&nbsp;2015</span>
    <span class="description">exodist7 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1496883/797319/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/797319">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 484b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Test::Most can document/promise whatever it wants, that doesn&#39;t change the technical issues it would have to overcome to do what it promises while still using Test::Builder under the hood. I do not maintain Test::Most &#40;thank God&#41;, but whoever does needs to see how Test::Most implements die on fail and either fix it as a bug, or document its behavior better. I just wanted to make sure everyone involved knew about the Test::Builder architectural issues that had bearing on this bug.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.489908</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
