<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #35761 for File-Path: File-Path 2.05 broke tests of Kwiki-Test 0.03</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #35761 for File-Path: File-Path 2.05 broke tests of Kwiki-Test 0.03</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/File-Path/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/File-Path/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/File-Path/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/File-Path/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Path">File-Path CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">35761</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/File-Path/Active/">File-Path</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">dland [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-43556-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
2.05</li>
<li>
2.06</li>
</ul>
    </td>
  </tr>
  <tr id="CF-43557-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;10&nbsp;03:45:14&nbsp;2008</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> File-Path 2.05 broke tests of Kwiki-Test 0.03</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have not yet figured out what exactly Kwiki::Test does but when I run
its tests with File-Path 2.0[56] installed they fail and downgrading to
File-Path-2.04 helps them pass.

I tried this with maint-5.10 @33443 and @33787 and with bleadperl @33788.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;10&nbsp;03:59:32&nbsp;2008</span>
    <span class="description">ANDK [...] cpan.org -  Dependency by ticket #35762 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;10&nbsp;17:37:58&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 10 03:45:14 2008, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have not yet figured out what exactly Kwiki::Test does but when I run
&gt; its tests with File-Path 2.0[56] installed they fail and downgrading to
&gt; File-Path-2.04 helps them pass.
&gt; 
&gt; I tried this with maint-5.10 @33443 and @33787 and with bleadperl @33788.
</div>
Hmm, this is strange. The only real new code is to check whether the cwd
is /path/to/dir and we&#39;re being asked to remove /path/to. But that
should have already been causing the code to croak.

Then again, perhaps the call was in an eval block, in which case it
would have blown away the directory tree, but not known how to get back
to the original cwd which is no longer there, and died.

Now the code does not attempt to try to unlink anything if the cwd is
below the directory to be removed, so something along these lines would
be the sanest explanation.

I had a quick look at the code to K::T, and I can&#39;t even see where it
uses File::Path, apart from sub cleanup, that appears to use a &#39;rmtree&#39;
method, but I wasn&#39;t able to figure out where that was defined.

Thanks for the report.

Later,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;10&nbsp;17:38:00&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;12&nbsp;06:46:30&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 10 03:45:14 2008, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have not yet figured out what exactly Kwiki::Test does but when I run
&gt; its tests with File-Path 2.0[56] installed they fail and downgrading to
&gt; File-Path-2.04 helps them pass.
&gt; 
&gt; I tried this with maint-5.10 @33443 and @33787 and with bleadperl @33788.
</div>
Ok, I&#39;ve had a look at this. What&#39;s going on is that it&#39;s doing

mkdir /subdir
cd /subdir
# stuff
rmtree /subdir

leaving the current working directory pointing to a directory that no
longer exists. That&#39;s now illegal, because rmtree&#40;&#41; manipulates the
current working directory as it removes the tree and at the end it would
try to restore the original working directory to a directory that no
longer exists.

The code in question ought to do something like chdir updir&#40;&#41; or chdir
&#39;/some/safe/place&#39; before removing /subdir

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;12&nbsp;06:46:49&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Given to DLAND</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;13&nbsp;02:32:16&nbsp;2008</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for digging that out.

Maybe this change alone warrants a 3.x?

I haven&#39;t read the File::Path manpage for a while but today I discovered
the old style / modern style stuff in it and no mention about when this
change was implemented. I think this needs to be said somewhere and
switching major version numbers at such points in time gives users a
better chance to adapt their code to modern style.

Thanks for doing all that, I&#39;ve had my hands on File::Path many years
ago and I recall it was quite a challenging.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;13&nbsp;16:07:08&nbsp;2008</span>
    <span class="description">dland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 13 02:32:16 2008, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for digging that out.
&gt; 
&gt; Maybe this change alone warrants a 3.x?
</div>
This is the change that warranted 2.x.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I haven&#39;t read the File::Path manpage for a while but today I discovered
&gt; the old style / modern style stuff in it and no mention about when this
&gt; change was implemented. I think this needs to be said somewhere and
&gt; switching major version numbers at such points in time gives users a
&gt; better chance to adapt their code to modern style.
</div>
Well this is the funny thing. Another of the changes that went into 2.0
&#40;which is why I bumped the major version&#41; was less the
modern/traditional API change and more the race prevention code that was
first patched into Debian&#39;s version, and later made it to Suse, Red-Hat
and which ever other platforms adopted Debian&#39;s patch &#40;or was inspired
by it&#41;.

The release coincided with 5.10, and was dual-lifed at that time &#40;or the
months running up to it&#41;.

Anyway, such smoke failures should have been occurring over the years on
those platforms. But as far as I can tell they haven&#39;t. I dunno. Maybe I
transcribed the patch incorrectly. I don&#39;t think so, but I don&#39;t have a
better explanation.

Anyway, it occurred to me today that I can restore pretty much the
original behaviour by doing the removal, and then chdir&#39;ing to updir&#40;&#41;
until I finally anchor the cwd in a real directory. It will mean that
the process gets its cwd changed unexpectedly, but at least it winds up
in a sane place.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for doing all that, I&#39;ve had my hands on File::Path many years
&gt; ago and I recall it was quite a challenging.
</div>
Yah, it&#39;s a bit of a bugger to work with, but interesting.

Thanks,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;15&nbsp;21:23:11&nbsp;2015</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Tried to look at this ticket today, but couldn&#39;t get as far as Kwiki::Test due to build failures in prerequisites &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=103763&#41;">https://rt.cpan.org/Ticket/Display.html?id=103763&#41;</a></span>.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;16&nbsp;19:08:23&nbsp;2015</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 15 21:23:11 2015, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tried to look at this ticket today, but couldn&#39;t get as far as
&gt; Kwiki::Test due to build failures in prerequisites
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=103763&#41;">https://rt.cpan.org/Ticket/Display.html?id=103763&#41;</a></span>.
</div>
Thanks to some help from SREZIC++, I got past those prerequisite failures and was able to test Kwiki::Test directly.  The full log from &#39;cpanm --test-only Kwiki::Test&#39; is attached.  Important points:

#####
cannot remove path when cwd is /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki for /home/jke
enan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki:  at /home/jkeenan/perl5/lib/perl5/IO/All/Dir.pm line
 202.
#####

Here is the relevant section of IO::All::Dir:

#####
199 sub rmtree {
200     my $self = shift;
201     require File::Path;
202     File::Path::rmtree&#40;$self-&gt;pathname, @_&#41;;
203 }
204 
#####

Back to the build.log:

#####
Subroutine Kwiki::Test::io redefined at /home/jkeenan/perl5/lib/perl5/IO/All/Base.pm line 25.
unable to mkdir /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki
Can&#39;t make new Kwiki in a non-empty directory
# Looks like your test exited with 255 before it could output anything.
t/pages.t .......... 
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 7/7 subtests
#####

Got that &#34;Can&#39;t make new Kwiki in a non-empty directory&#34; for each of 3 test files.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> kwiki.test.build.log</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">cpanm &#40;App::cpanminus&#41; 1.7014 on perl 5.020001 built for x86_64-linux
Work directory is /home/jkeenan/.cpanm/work/1429225057.9699
You have make /usr/bin/make
You have LWP 6.07
You have /bin/tar: tar &#40;GNU tar&#41; 1.27.1
Copyright &#40;C&#41; 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by John Gilmore and Jay Fenlason.
You have /usr/bin/unzip
Checking if you have ExtUtils::MakeMaker 6.58 ... Yes &#40;7.02&#41;
Checking if you have ExtUtils::Install 1.46 ... Yes &#40;1.67&#41;
Searching Kwiki::Test on cpanmetadb ...
--&gt; Working on Kwiki::Test
Fetching <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpan.org/authors/id/C/CD/CDENT/Kwiki/Kwiki-Test-0.03.tar.gz">http://www.cpan.org/authors/id/C/CD/CDENT/Kwiki/Kwiki-Test-0.03.tar.gz</a></span>
-&gt; OK
Unpacking Kwiki-Test-0.03.tar.gz
Entering Kwiki-Test-0.03
Checking configure dependencies from META.yml
Configuring Kwiki-Test-0.03
Running Makefile.PL
Checking if your kit is complete...
Looks good
Generating a Unix-style Makefile
Writing Makefile for Kwiki::Test
Writing MYMETA.yml and MYMETA.json
-&gt; OK
Checking dependencies from MYMETA.json ...
Checking if you have ExtUtils::MakeMaker 0 ... Yes &#40;7.02&#41;
Checking if you have Kwiki 0.37 ... Yes &#40;0.39&#41;
Building and testing Kwiki-Test-0.03
cp lib/Kwiki/Test.pm blib/lib/Kwiki/Test.pm
Manifying 1 pod document
PERL_DL_NONLAZY=1 &#34;/home/jkeenan/perl5/perlbrew/perls/perl-5.20.1/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;inc&#39;, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
Subroutine Kwiki::Test::io redefined at /home/jkeenan/perl5/lib/perl5/IO/All/Base.pm line 25.

Kwiki software installed! Point your browser at this location.

cannot remove path when cwd is /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki for /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki:  at /home/jkeenan/perl5/lib/perl5/IO/All/Dir.pm line 202.
t/makes-system.t ... ok
Subroutine Kwiki::Test::io redefined at /home/jkeenan/perl5/lib/perl5/IO/All/Base.pm line 25.
unable to mkdir /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki
Can&#39;t make new Kwiki in a non-empty directory
# Looks like your test exited with 255 before it could output anything.
t/pages.t .......... 
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 7/7 subtests 
Subroutine Kwiki::Test::io redefined at /home/jkeenan/perl5/lib/perl5/IO/All/Base.pm line 25.
unable to mkdir /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki
Can&#39;t make new Kwiki in a non-empty directory
# Looks like your test exited with 255 before it could output anything.
t/simple_hook.t .... 
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 3/3 subtests 
Subroutine Kwiki::Test::io redefined at /home/jkeenan/perl5/lib/perl5/IO/All/Base.pm line 25.
unable to mkdir /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki
Can&#39;t make new Kwiki in a non-empty directory
# Looks like your test exited with 255 before it could output anything.
t/simple_widget.t .. 
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 2/2 subtests 

Test Summary Report
-------------------
t/pages.t        &#40;Wstat: 65280 Tests: 0 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 7 tests but ran 0.
t/simple_hook.t  &#40;Wstat: 65280 Tests: 0 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 3 tests but ran 0.
t/simple_widget.t &#40;Wstat: 65280 Tests: 0 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 2 tests but ran 0.
Files=4, Tests=6,  1 wallclock secs &#40; 0.02 usr  0.00 sys +  0.29 cusr  0.02 csys =  0.33 CPU&#41;
Result: FAIL
Failed 3/4 test programs. 0/6 subtests failed.
make: *** [test_dynamic] Error 255
-&gt; FAIL Testing Kwiki::Test failed. See /home/jkeenan/.cpanm/work/1429225057.9699/build.log for details. Retry with --force to force install it.
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;20:15:44&nbsp;2015</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Apr 16 19:08:23 2015, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Apr 15 21:23:11 2015, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; Tried to look at this ticket today, but couldn&#39;t get as far as
&gt; &gt; Kwiki::Test due to build failures in prerequisites
&gt; &gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=103763&#41;">https://rt.cpan.org/Ticket/Display.html?id=103763&#41;</a></span>.
</div>&gt; 
&gt; Thanks to some help from SREZIC++, I got past those prerequisite
&gt; failures and was able to test Kwiki::Test directly.  The full log from
&gt; &#39;cpanm --test-only Kwiki::Test&#39; is attached.  Important points:
&gt; 
&gt; #####
&gt; cannot remove path when cwd is
&gt; /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki for
&gt; /home/jke
&gt; enan/.cpanm/work/1429225057.9699/Kwiki-Test-0.03/kwiki:  at
&gt; /home/jkeenan/perl5/lib/perl5/IO/All/Dir.pm line
&gt;  202.
&gt; #####
&gt; 
&gt; Here is the relevant section of IO::All::Dir:
&gt; 
&gt; #####
&gt; 199 sub rmtree {
&gt; 200     my $self = shift;
&gt; 201     require File::Path;
&gt; 202     File::Path::rmtree&#40;$self-&gt;pathname, @_&#41;;
&gt; 203 }
&gt;  204
&gt; #####
&gt; 
&gt; Back to the build.log:
&gt; 
&gt; #####
&gt; Subroutine Kwiki::Test::io redefined at
&gt; /home/jkeenan/perl5/lib/perl5/IO/All/Base.pm line 25.
&gt; unable to mkdir /home/jkeenan/.cpanm/work/1429225057.9699/Kwiki-Test-
&gt; 0.03/kwiki
&gt; Can&#39;t make new Kwiki in a non-empty directory
&gt; # Looks like your test exited with 255 before it could output
&gt; anything.
&gt;  t/pages.t ..........
&gt; Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
&gt; Failed 7/7 subtests
&gt; #####
&gt; 
&gt; Got that &#34;Can&#39;t make new Kwiki in a non-empty directory&#34; for each of 3
&gt; test files.
&gt; 
&gt; Thank you very much.
&gt; Jim Keenan
</div>
I&#39;m classifying this ticket as Stalled because I am not currently able to get far enough in building/installing Kwiki::Test to see whether it still has a problem with File-Path.  The reason I can&#39;t get that far is that one of Kwiki::Test&#39;s prerequisites, Spoon, itself fails to build because one of *its* prequisites, CGI, is no longer distributed with the Perl 5 core &#40;as of 5.22.0&#41;.  And since Spoon has not had a new release since Dec 09 2006, I suspect it may be abandon-ware.  So, absent heroic efforts, I don&#39;t think the File-Path maintainers should worry about this ticket at the present time.

Hence: Stalled.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;20:15:50&nbsp;2015</span>
    <span class="description">jkeenan [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;26&nbsp;20:17:06&nbsp;2015</span>
    <span class="description">jkeenan [...] cpan.org -  Severity Critical changed to Unimportant</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;24&nbsp;18:20:56&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Due to lack of response, and I am unable to install Spoon as well, we will have to reject this RT.

When and if the upstream dependency issue is ever resolved, and the error reproduces, please re-open.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;24&nbsp;18:20:57&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;24&nbsp;18:20:58&nbsp;2015</span>
    <span class="description">RICHE [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
