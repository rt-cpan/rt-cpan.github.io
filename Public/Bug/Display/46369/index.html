<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46369 for Data-UUID: Data::UUID Makefile.PL requires interaction. Should have non-interactive abilities for automation.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46369 for Data-UUID: Data::UUID Makefile.PL requires interaction. Should have non-interactive abilities for automation.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Data-UUID/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Data-UUID/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Data-UUID/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Data-UUID/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/rjbs/Data-UUID/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-UUID">Data-UUID CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46369</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Data-UUID/Active/">Data-UUID</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
matthew.gallant [...] casalemedia.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;26&nbsp;10:40:43&nbsp;2009</span>
    <span class="description">matthew.gallant [...] casalemedia.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Data::UUID Makefile.PL requires interaction. Should have non-interactive abilities for automation.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 May 2009 10:40:06 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Data-UUID [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matthew Gallant &lt;matthew.gallant [...] casalemedia.com&gt;</td>
  </tr>
</table>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;10:47:24&nbsp;2009</span>
    <span class="description">daxim [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] RT #41123, RT# 46369: make configuration non-interactive</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix is attached. It applies cleanly against 1.202 with the command
    git apply *.patch
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 4863fad5997341b376d1aca993a58d88c6153a3b Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Lars=20D=C9=AA=E1=B4=87=E1=B4=84=E1=B4=8B=E1=B4=8F=E1=B4=A1=20=E8=BF=AA=E6=8B=89=E6=96=AF?= &lt;daxim@cpan.org&gt;
Date: Tue, 16 Jun 2009 16:30:54 +0200
Subject: [PATCH] RT #41123, RT# 46369: make configuration non-interactive

fixes for:
RT #41123: one should be able to script the install of this module
RT #46369: Data::UUID Makefile.PL requires interaction. Should have non-interactive abilities for automation.
---
 META.yml    |    2 +
 Makefile.PL |   74 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 74 insertions&#40;+&#41;, 2 deletions&#40;-&#41;

diff --git a/META.yml b/META.yml
index 2583c54..3f37afd 100644
--- a/META.yml
+++ b/META.yml
@@ -8,6 +8,8 @@ license:            bsd
 distribution_type:  module
 configure_requires:
     ExtUtils::MakeMaker:  0
+    Getopt::Long: 2.23
+    Pod::Usage: 1.12
 build_requires:
     ExtUtils::MakeMaker:  0
 requires:
diff --git a/Makefile.PL b/Makefile.PL
index 9021671..af025ef 100644
--- a/Makefile.PL
+++ b/Makefile.PL
@@ -1,5 +1,7 @@
 use ExtUtils::MakeMaker;
 use Config;
+use Getopt::Long qw&#40;GetOptions :config pass_through&#41;;
+use Pod::Usage qw&#40;pod2usage&#41;;
 # See lib/ExtUtils/MakeMaker.pm for details of how to influence
 # the contents of the Makefile that is written.
 
@@ -52,17 +54,29 @@ WriteMakefile&#40;
   # Un-comment this if you add C files to link with later:
   OBJECT              =&gt; &#39;$&#40;O_FILES&#41;&#39;, # link all the C files too
   CONFIGURE           =&gt; sub {
+    my %opt;
+    GetOptions&#40;\%opt, &#39;s|state-storage-directory:s&#39;, &#39;d|default-umask:s&#39;,
+        &#39;help|?&#39;, &#39;man&#39;&#41; or pod2usage&#40;2&#41;;
+    pod2usage&#40;1&#41; if $opt{help};
+    pod2usage&#40;-verbose =&gt; 2&#41; if $opt{man};
+
+    print &#34;Configured options &#40;run perl Makefile.PL --help for how to change this&#41;:\n&#34;;
+
     my $d;
     if &#40;$^O eq &#39;MSWin32&#39; and -d &#34;c:/tmp/&#34;&#41; {
      $d=&#34;c:/tmp&#34;;
     } else {
      $d=eval { require File::Spec; File::Spec-&gt;tmpdir; } || &#39;/var/tmp&#39;;
     }
-    $d = prompt&#40;&#34;UUID state storage&#34;, $d&#41;;
+    $d = $opt{s} || $d;
+    print &#34;\tUUID state storage: $d\n&#34;;
     $d =~ s/\\/\\\\/g if $^O eq &#39;MSWin32&#39;;
 
     my $m = &#39;0007&#39;;
-    $m = prompt&#40;&#34;default umask&#34;, $m&#41; unless $^O eq &#39;MSWin32&#39;;
+    unless &#40;$^O eq &#39;MSWin32&#39;&#41; {
+        $m = $opt{d} || $m;
+        print &#34;\tdefault umask: $m\n&#34;;
+    }
 
     chmod&#40;0666, sprintf&#40;&#34;%s/%s&#34;, $d, &#34;.UUID_NODEID&#34;&#41;&#41;;
     chmod&#40;0666, sprintf&#40;&#34;%s/%s&#34;, $d, &#34;.UUID_STATE&#34;&#41;&#41;;
@@ -73,3 +87,59 @@ WriteMakefile&#40;
     };
   }
 &#41;;
+
+__END__
+
+=head1 NAME
+
+Makefile.PL - configure Makefile for Data::UUID
+
+=head1 SYNOPSIS
+
+perl Makefile.PL [options] [EU::MM options]
+
+perl Makefile.PL -s=/var/local/lib/data-uuid -d=0007
+
+    Options:
+    --state-storage-directory   directory for storing library state information
+    --default-umask             umask for files in the state storage directory
+    --help                      brief help message
+    --man                       full documentation
+
+Options can be abbreviated, see L&lt;Getopt::Long/&#34;Case and abbreviations&#34;&gt;.
+
+=head1 OPTIONS
+
+=over
+
+=item --state-storage-directory
+
+Optional. Takes a string that is interpreted as directory for storing library
+state information. Default is c:/tmp/ on Windows if it already exists, or the
+operating system&#39;s temporary directory &#40;see tmpdir in L&lt;File::Spec/&#34;METHODS&#34;&gt;&#41;,
+or /var/tmp as fallback.
+
+=item --default-umask
+
+Optional. Takes a string that is interpreted as umask for the files in the state
+storage directory. Default is 0007. This is ignored on Windows.
+
+=item --help
+
+Print a brief help message and exits.
+
+=item --man
+
+Prints the manual page and exits.
+
+=back
+
+=head1 DESCRIPTION
+
+B&lt;Makefile.PL&gt; writes the Makefile for the Data::UUID library. It is configured
+with the options L&lt;/&#34;--state-storage-directory&#34;&gt; and L&lt;/&#34;--default-umask&#34;&gt;.
+Unless given, default values are used. In any case the values are printed for
+confirmation.
+
+Additionally, the usual EU::MM options are processed, see
+L&lt;ExtUtils::MakeMaker/&#34;Using Attributes and Parameters&#34;&gt;.
-- 
1.6.3

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;16&nbsp;10:47:25&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;03&nbsp;16:48:56&nbsp;2009</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">integrated in 1.203
-- 
rjbs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;03&nbsp;16:48:57&nbsp;2009</span>
    <span class="description">rjbs [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
