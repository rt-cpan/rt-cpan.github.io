<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #122551 for Test-Without-Module: v0.19 broke compatibility with Module::Load::Conditional</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #122551 for Test-Without-Module: v0.19 broke compatibility with Module::Load::Conditional</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Test-Without-Module">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Test-Without-Module">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Test-Without-Module">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Test-Without-Module">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Without-Module">Test-Without-Module CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">122551</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Test-Without-Module">Test-Without-Module</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dimitrios.kechagias [...] spareroom.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31690-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31691-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=122551">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1740230" href="/Public/Bug/Display.html?id=122551#txn-1740230">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;20&nbsp;11:24:36&nbsp;2017</span>
    <span class="description">dimitrios.kechagias [...] spareroom.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> v0.19 broke compatibility with Module::Load::Conditional</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Jul 2017 16:24:12 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Without-Module [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dimitrios Kechagias &lt;dimitrios.kechagias [...] spareroom.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1740230/935982/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/935982">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Version 0.18 was the last one that could be used with Module::Load::Conditional::can_load. Tested on CentOS 6 / Perl 5.10 and CentOS 7 / Perl 5.24 the following:

use Test::Without::Module qw&#40;Test::More&#41;;
use Module::Load::Conditional qw&#40;can_load&#41;;;

can_load&#40;
    modules =&gt; {
        &#39;Test::More&#39; =&gt; undef,
    }
&#41;;

Gives a &#34;Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the Test::More module&#41;… ” for Test::Without::Module versions 0.19, 0.20.

Flatshare is a limited company registered in England and Wales. Registration #04407847, Registered office: 32 Park Green, Macclesfield, Cheshire, SK11 7NA. T: 01625 666 750

This electronic mail may contain confidential or legally privileged information. It is for the intended recipient&#40;s&#41; only. Should you receive this message in error, please notify the sender immediately by replying to this email. If you are not the intended recipient, any disclosure, distribution, reproduction, printing or reliance on the contents of this information is strictly prohibited. Whilst all care has been taken, Flatshare Ltd is not responsible for the integrity or content of any attachment&#40;s&#41; or links included within.

* THE CONTENT OF THIS EMAIL IS NOT LEGAL ADVICE AND SHOULD NOT BE TREATED AS SUCH.  CONTENT IS THE AUTHORS OPINION BASED ON EXPERIENCE OR THEIR INTERPRETATION OF PUBLICLY AVAILABLE INFORMATION.  NONE OF OUR STAFF ARE LEGALLY TRAINED AND WE ALWAYS ADVISE THAT PROPER LEGAL ADVICE IS TAKEN IF REQUIRED.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1740235" href="/Public/Bug/Display.html?id=122551#txn-1740235">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;20&nbsp;12:19:12&nbsp;2017</span>
    <span class="description">corion [...] corion.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122551] v0.19 broke compatibility with Module::Load::Conditional</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Jul 2017 18:18:50 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Without-Module [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Max Maischein &lt;corion [...] corion.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1740235/935985/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/935985">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Dimitrios,

thank you very much for the bug report.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Version 0.18 was the last one that could be used with Module::Load::Conditional::can_load. Tested on CentOS 6 / Perl 5.10 and CentOS 7 / Perl 5.24 the following:
&gt; 
&gt; use Test::Without::Module qw&#40;Test::More&#41;;
&gt; use Module::Load::Conditional qw&#40;can_load&#41;;;
&gt; 
&gt; can_load&#40;
&gt;      modules =&gt; {
&gt;          &#39;Test::More&#39; =&gt; undef,
&gt;      }
&gt; &#41;;
&gt; 
&gt; Gives a &#34;Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the Test::More module&#41;… ” for Test::Without::Module versions 0.19, 0.20.
&gt; 
</div>
 From looking at the source code of Module::Load::Conditional, I would 
expect can_load&#40;&#41; fail, as it can&#39;t load Test::More.

What did happen with the versions before?

When I run the below test program, it passes its one test for me.

-max


#!/usr/bin/perl -w
use strict;
use Test::More tests =&gt; 1;

use Test::Without::Module qw&#40;Test::More&#41;;
use Module::Load::Conditional qw&#40;can_load&#41;;

my $res = can_load&#40;
      modules =&gt; {
          &#39;Test::More&#39; =&gt; undef,
      }
&#41;;
ok !$res, &#34;We don&#39;t load Test::More&#34;;

diag &#34;Test::Without::Module: $Test::Without::Module::VERSION&#34;;
diag &#34;Module::Load::Conditional: $Module::Load::Conditional::VERSION&#34;;
done_testing;

__END__

1..1
ok 1 - We don&#39;t load Test::More
# Test::Without::Module: 0.20
# Module::Load::Conditional: 0.62
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1740236" href="/Public/Bug/Display.html?id=122551#txn-1740236">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;20&nbsp;12:19:12&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1740251" href="/Public/Bug/Display.html?id=122551#txn-1740251">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;20&nbsp;13:53:22&nbsp;2017</span>
    <span class="description">dimitrios.kechagias [...] spareroom.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122551] v0.19 broke compatibility with Module::Load::Conditional</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Jul 2017 18:52:55 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Without-Module [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dimitrios Kechagias &lt;dimitrios.kechagias [...] spareroom.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1740251/935991/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/935991">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the prompt response. I can’t find Module::Load::Conditional: 0.62 on CPAN, but installing the current &#40;0.68&#41; version on a MacOS Sierra machine &#40;to try a completely different OS stack&#41;, along with Test::Without::Module: 0.20 and this is the result of your test:

1..1
Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the Test::More module&#41; &#40;@INC contains: CODE&#40;0x7f919520a960&#41; /usr/local/lib/perl5/site_perl [...] .&#41; at /Users/dimitrios/perl5/perlbrew/perls/perl-5.20.3/lib/site_perl/5.20.3/Module/Load/Conditional.pm line 215.
# Looks like your test exited with 255 before it could output anything.

Best regards,

Dimitrios

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 20 Jul 2017, at 17:19, Max Maischein via RT &lt;bug-Test-Without-Module@rt.cpan.org&gt; wrote:
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=122551">https://rt.cpan.org/Ticket/Display.html?id=122551</a></span> &gt;
&gt; 
&gt; Hello Dimitrios,
&gt; 
&gt; thank you very much for the bug report.
<div class="message-stanza open">&gt;&gt; Version 0.18 was the last one that could be used with Module::Load::Conditional::can_load. Tested on CentOS 6 / Perl 5.10 and CentOS 7 / Perl 5.24 the following:
&gt;&gt; 
&gt;&gt; use Test::Without::Module qw&#40;Test::More&#41;;
&gt;&gt; use Module::Load::Conditional qw&#40;can_load&#41;;;
&gt;&gt; 
&gt;&gt; can_load&#40;
&gt;&gt;     modules =&gt; {
&gt;&gt;         &#39;Test::More&#39; =&gt; undef,
&gt;&gt;     }
&gt;&gt; &#41;;
&gt;&gt; 
&gt;&gt; Gives a &#34;Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the Test::More module&#41;… ” for Test::Without::Module versions 0.19, 0.20.
&gt;&gt; 
</div>&gt; 
&gt; From looking at the source code of Module::Load::Conditional, I would 
&gt; expect can_load&#40;&#41; fail, as it can&#39;t load Test::More.
&gt; 
&gt; What did happen with the versions before?
&gt; 
&gt; When I run the below test program, it passes its one test for me.
&gt; 
&gt; -max
&gt; 
&gt; 
&gt; #!/usr/bin/perl -w
&gt; use strict;
&gt; use Test::More tests =&gt; 1;
&gt; 
&gt; use Test::Without::Module qw&#40;Test::More&#41;;
&gt; use Module::Load::Conditional qw&#40;can_load&#41;;
&gt; 
&gt; my $res = can_load&#40;
&gt;      modules =&gt; {
&gt;          &#39;Test::More&#39; =&gt; undef,
&gt;      }
&gt; &#41;;
&gt; ok !$res, &#34;We don&#39;t load Test::More&#34;;
&gt; 
&gt; diag &#34;Test::Without::Module: $Test::Without::Module::VERSION&#34;;
&gt; diag &#34;Module::Load::Conditional: $Module::Load::Conditional::VERSION&#34;;
&gt; done_testing;
&gt; 
&gt; __END__
&gt; 
&gt; 1..1
&gt; ok 1 - We don&#39;t load Test::More
&gt; # Test::Without::Module: 0.20
&gt; # Module::Load::Conditional: 0.62
&gt; 
</div>


Flatshare is a limited company registered in England and Wales. Registration #04407847, Registered office: 32 Park Green, Macclesfield, Cheshire, SK11 7NA. T: 01625 666 750

This electronic mail may contain confidential or legally privileged information. It is for the intended recipient&#40;s&#41; only. Should you receive this message in error, please notify the sender immediately by replying to this email. If you are not the intended recipient, any disclosure, distribution, reproduction, printing or reliance on the contents of this information is strictly prohibited. Whilst all care has been taken, Flatshare Ltd is not responsible for the integrity or content of any attachment&#40;s&#41; or links included within.

* THE CONTENT OF THIS EMAIL IS NOT LEGAL ADVICE AND SHOULD NOT BE TREATED AS SUCH.  CONTENT IS THE AUTHORS OPINION BASED ON EXPERIENCE OR THEIR INTERPRETATION OF PUBLICLY AVAILABLE INFORMATION.  NONE OF OUR STAFF ARE LEGALLY TRAINED AND WE ALWAYS ADVISE THAT PROPER LEGAL ADVICE IS TAKEN IF REQUIRED.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1740253" href="/Public/Bug/Display.html?id=122551#txn-1740253">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;20&nbsp;14:16:29&nbsp;2017</span>
    <span class="description">corion [...] corion.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122551] v0.19 broke compatibility with Module::Load::Conditional</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Jul 2017 20:15:56 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Without-Module [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Max Maischein &lt;corion [...] corion.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1740253/935993/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/935993">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Dimitrios,
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for the prompt response. I can’t find Module::Load::Conditional: 0.62 on CPAN, but installing the current &#40;0.68&#41; version on a MacOS Sierra machine &#40;to try a completely different OS stack&#41;, along with Test::Without::Module: 0.20 and this is the result of your test:
&gt; 
&gt; 1..1
&gt; Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the Test::More module&#41; &#40;@INC contains: CODE&#40;0x7f919520a960&#41; /usr/local/lib/perl5/site_perl [...] .&#41; at /Users/dimitrios/perl5/perlbrew/perls/perl-5.20.3/lib/site_perl/5.20.3/Module/Load/Conditional.pm line 215.
&gt; # Looks like your test exited with 255 before it could output anything.
</div>
That&#39;s really weird, because I still get the same result, after 
upgrading Module::Load::Conditional &#40;see below&#41;. Maybe there is 
something else in your setup &#40;or mine&#41; that makes this behaviour 
special. Maybe set

     $Module::Load::Conditional::VERBOSE=1;

With that set, I see the error messages but still don&#39;t get a crash 
afterwards, see the second test run below.

-max


c:\Users\Corion\Projekte\Test-Without-Module&gt;perl -Ilib -w t\rt122551.t
1..1
ok 1 - We don&#39;t load Test::More
# Test::Without::Module: 0.20
# Module::Load::Conditional: 0.68

c:\Users\Corion\Projekte\Test-Without-Module&gt;perl -v

This is perl 5, version 20, subversion 1 &#40;v5.20.1&#41; built for 
MSWin32-x64-multi-thread

Copyright 1987-2014, Larry Wall

Perl may be copied only under the terms of either the Artistic License 
or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.


c:\Users\Corion\Projekte\Test-Without-Module&gt;

---

c:\Users\Corion\Projekte\Test-Without-Module&gt;perl -Ilib -w t\rt122551.t
1..1
Cannot open file &#39;Test\More.pm&#39;:  at 
C:/strawberry-perl-5.20.1.1-x64/perl/site/l
ib/Module/Load/Conditional.pm line 228.
Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the 
Test::More module
&#41; &#40;@INC contains: CODE&#40;0x2c05ae0&#41; lib 
C:/strawberry-perl-5.20.1.1-x64/perl/site/
lib/MSWin32-x64-multi-thread 
C:/strawberry-perl-5.20.1.1-x64/perl/site/lib C:/st
rawberry-perl-5.20.1.1-x64/perl/vendor/lib 
C:/strawberry-perl-5.20.1.1-x64/perl/
lib .&#41; at C:/strawberry-perl-5.20.1.1-x64/perl/lib/Module/Load.pm line 77.
Can&#39;t locate Test/More in @INC &#40;@INC contains: CODE&#40;0x2c05ae0&#41; lib 
C:/strawberry
-perl-5.20.1.1-x64/perl/site/lib/MSWin32-x64-multi-thread 
C:/strawberry-perl-5.2
0.1.1-x64/perl/site/lib C:/strawberry-perl-5.20.1.1-x64/perl/vendor/lib 
C:/straw
berry-perl-5.20.1.1-x64/perl/lib .&#41; at 
C:/strawberry-perl-5.20.1.1-x64/perl/lib/
Module/Load.pm line 77.
  [THIS MAY BE A PROBLEM!] at t\rt122551.t line 10.
ok 1 - We don&#39;t load Test::More
# Test::Without::Module: 0.20
# Module::Load::Conditional: 0.68
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1740256" href="/Public/Bug/Display.html?id=122551#txn-1740256">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;20&nbsp;14:48:22&nbsp;2017</span>
    <span class="description">dimitrios.kechagias [...] spareroom.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122551] v0.19 broke compatibility with Module::Load::Conditional</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Jul 2017 19:48:06 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Without-Module [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dimitrios Kechagias &lt;dimitrios.kechagias [...] spareroom.co.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1740256/935996/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/935996">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmm, maybe Strawberry Perl behaves differently? I don’t have a Windows machine to try it on, but, on both Mac and Linux it dies and VERBOSE makes no difference in the output.
You could try running it with VERBOSE=1 on windows with Test::Without::Module 0.18 to see if there is a difference compared to 0.19-0.20.

Regards,
Dimitrios


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 20 Jul 2017, at 19:16, Max Maischein via RT &lt;bug-Test-Without-Module@rt.cpan.org&gt; wrote:
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=122551">https://rt.cpan.org/Ticket/Display.html?id=122551</a></span> &gt;
&gt; 
&gt; Hello Dimitrios,
<div class="message-stanza open">&gt;&gt; Thanks for the prompt response. I can’t find Module::Load::Conditional: 0.62 on CPAN, but installing the current &#40;0.68&#41; version on a MacOS Sierra machine &#40;to try a completely different OS stack&#41;, along with Test::Without::Module: 0.20 and this is the result of your test:
&gt;&gt; 
&gt;&gt; 1..1
&gt;&gt; Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the Test::More module&#41; &#40;@INC contains: CODE&#40;0x7f919520a960&#41; /usr/local/lib/perl5/site_perl [...] .&#41; at /Users/dimitrios/perl5/perlbrew/perls/perl-5.20.3/lib/site_perl/5.20.3/Module/Load/Conditional.pm line 215.
&gt;&gt; # Looks like your test exited with 255 before it could output anything.
</div>&gt; 
&gt; That&#39;s really weird, because I still get the same result, after 
&gt; upgrading Module::Load::Conditional &#40;see below&#41;. Maybe there is 
&gt; something else in your setup &#40;or mine&#41; that makes this behaviour 
&gt; special. Maybe set
&gt; 
&gt;     $Module::Load::Conditional::VERBOSE=1;
&gt; 
&gt; With that set, I see the error messages but still don&#39;t get a crash 
&gt; afterwards, see the second test run below.
&gt; 
&gt; -max
&gt; 
&gt; 
&gt; c:\Users\Corion\Projekte\Test-Without-Module&gt;perl -Ilib -w t\rt122551.t
&gt; 1..1
&gt; ok 1 - We don&#39;t load Test::More
&gt; # Test::Without::Module: 0.20
&gt; # Module::Load::Conditional: 0.68
&gt; 
&gt; c:\Users\Corion\Projekte\Test-Without-Module&gt;perl -v
&gt; 
&gt; This is perl 5, version 20, subversion 1 &#40;v5.20.1&#41; built for 
&gt; MSWin32-x64-multi-thread
&gt; 
&gt; Copyright 1987-2014, Larry Wall
&gt; 
&gt; Perl may be copied only under the terms of either the Artistic License 
&gt; or the
&gt; GNU General Public License, which may be found in the Perl 5 source kit.
&gt; 
&gt; Complete documentation for Perl, including FAQ lists, should be found on
&gt; this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
&gt; Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.
&gt; 
&gt; 
&gt; c:\Users\Corion\Projekte\Test-Without-Module&gt;
&gt; 
&gt; ---
&gt; 
&gt; c:\Users\Corion\Projekte\Test-Without-Module&gt;perl -Ilib -w t\rt122551.t
&gt; 1..1
&gt; Cannot open file &#39;Test\More.pm&#39;:  at 
&gt; C:/strawberry-perl-5.20.1.1-x64/perl/site/l
&gt; ib/Module/Load/Conditional.pm line 228.
&gt; Can&#39;t locate Test/More.pm in @INC &#40;you may need to install the 
&gt; Test::More module
&gt; &#41; &#40;@INC contains: CODE&#40;0x2c05ae0&#41; lib 
&gt; C:/strawberry-perl-5.20.1.1-x64/perl/site/
&gt; lib/MSWin32-x64-multi-thread 
&gt; C:/strawberry-perl-5.20.1.1-x64/perl/site/lib C:/st
&gt; rawberry-perl-5.20.1.1-x64/perl/vendor/lib 
&gt; C:/strawberry-perl-5.20.1.1-x64/perl/
&gt; lib .&#41; at C:/strawberry-perl-5.20.1.1-x64/perl/lib/Module/Load.pm line 77.
&gt; Can&#39;t locate Test/More in @INC &#40;@INC contains: CODE&#40;0x2c05ae0&#41; lib 
&gt; C:/strawberry
&gt; -perl-5.20.1.1-x64/perl/site/lib/MSWin32-x64-multi-thread 
&gt; C:/strawberry-perl-5.2
&gt; 0.1.1-x64/perl/site/lib C:/strawberry-perl-5.20.1.1-x64/perl/vendor/lib 
&gt; C:/straw
&gt; berry-perl-5.20.1.1-x64/perl/lib .&#41; at 
&gt; C:/strawberry-perl-5.20.1.1-x64/perl/lib/
&gt; Module/Load.pm line 77.
&gt;  [THIS MAY BE A PROBLEM!] at t\rt122551.t line 10.
&gt; ok 1 - We don&#39;t load Test::More
&gt; # Test::Without::Module: 0.20
&gt; # Module::Load::Conditional: 0.68
&gt; 
</div>


Flatshare is a limited company registered in England and Wales. Registration #04407847, Registered office: 32 Park Green, Macclesfield, Cheshire, SK11 7NA. T: 01625 666 750

This electronic mail may contain confidential or legally privileged information. It is for the intended recipient&#40;s&#41; only. Should you receive this message in error, please notify the sender immediately by replying to this email. If you are not the intended recipient, any disclosure, distribution, reproduction, printing or reliance on the contents of this information is strictly prohibited. Whilst all care has been taken, Flatshare Ltd is not responsible for the integrity or content of any attachment&#40;s&#41; or links included within.

* THE CONTENT OF THIS EMAIL IS NOT LEGAL ADVICE AND SHOULD NOT BE TREATED AS SUCH.  CONTENT IS THE AUTHORS OPINION BASED ON EXPERIENCE OR THEIR INTERPRETATION OF PUBLICLY AVAILABLE INFORMATION.  NONE OF OUR STAFF ARE LEGALLY TRAINED AND WE ALWAYS ADVISE THAT PROPER LEGAL ADVICE IS TAKEN IF REQUIRED.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1740281" href="/Public/Bug/Display.html?id=122551#txn-1740281">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;20&nbsp;16:18:17&nbsp;2017</span>
    <span class="description">corion [...] corion.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> chris [...] bingosnet.co.uk</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #122551] v0.19 broke compatibility with Module::Load::Conditional</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Jul 2017 22:17:33 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Without-Module [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Max Maischein &lt;corion [...] corion.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1740281/936009/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/936009">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 956b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Dimitrios,

yes, I can reproduce the problem under Unix, at least with Perl 5.18. 
But I think the problem is with Module::Load::Conditional, because it 
does not guard itself against the @INC callback die-ing, only against a 
file being unreadable or containing invalid Perl code.

I&#39;m not really sure that the error is with Test::Without::Module. It 
breaks backwards compatibility as Module::Load::Conditional doesn&#39;t work 
anymore, but as the change simplifies the hackery I had to do before, I 
would rather like it more if Module::Load::Conditional guarded itself 
against the callback failing, which is why I cc Chris :-&#41;

The current logic in Module::Load::Conditional &#40;line 210 onwards&#41; will 
skip an entry in @INC if it somehow fails. This means that the whole 
loop would need to be wrapped in an eval{} block to be close&#40;r&#41; to what 
Perl does in `require`...

Chris: If the change is OK with you, I will try to come up with a patch!
-max
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.351498</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
