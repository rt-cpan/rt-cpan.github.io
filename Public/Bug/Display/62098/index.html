<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #62098 for Java: memory leak</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #62098 for Java: memory leak</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Java/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Java/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Java/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Java/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Java">Java CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">62098</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Java/Active/">Java</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rainbow.karma.chameleon [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-17526-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
4.7    </td>
  </tr>
  <tr id="CF-17527-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;12&nbsp;22:09:34&nbsp;2010</span>
    <span class="description">rainbow.karma.chameleon [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> memory leak</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I tried to loop-run simple perl program&#40; only call new Java, my $java = 
new Java&#40;host =&gt; &#34;192.168.0.218&#34;, port =&gt; 9191, event_port =&gt; -1&#41;;&#41;
The program was stopped at 3621 count.

--- JavaServer&#39;s message -------------------------------
Exception in thread &#34;Javaserver TCPServer #3621&#34; 
java.lang.OutOfMemoryError: Java heap space
        at java.nio.HeapByteBuffer.&lt;init&gt;&#40;HeapByteBuffer.java:39&#41;
        at java.nio.ByteBuffer.allocate&#40;ByteBuffer.java:312&#41;
        at 
sun.nio.cs.StreamEncoder$CharsetSE.&lt;init&gt;&#40;StreamEncoder.java:310&#41;
        at 
sun.nio.cs.StreamEncoder$CharsetSE.&lt;init&gt;&#40;StreamEncoder.java:290&#41;
        at 
sun.nio.cs.StreamEncoder$CharsetSE.&lt;init&gt;&#40;StreamEncoder.java:274&#41;
        at 
sun.nio.cs.StreamEncoder.forOutputStreamWriter&#40;StreamEncoder.java:69&#41;
        at java.io.OutputStreamWriter.&lt;init&gt;&#40;OutputStreamWriter.java:93&#41;
        at com.zzo.javaserver.SocketHandler.run&#40;SocketHandler.java:86&#41;
        at com.zzo.javaserver.TCPServer.run&#40;TCPServer.java:191&#41;
        at java.lang.Thread.run&#40;Thread.java:595&#41;
The memory was exhausted on Java heap space. : requested 8208 bytes
  Java heap size / max Java heap size = 66046696 / 67108864
  Java perm size / max Java perm size = 2306536 / 67108864
-------------------------------------------------------------------
  
--- JavaServer&#39;s -Xrunhprof --------------------------------
TRACE 301951:
        java.nio.HeapByteBuffer.&lt;init&gt;&#40;HeapByteBuffer.java:39&#41;
        java.nio.ByteBuffer.allocate&#40;ByteBuffer.java:312&#41;
        
sun.nio.cs.StreamDecoder$CharsetSD.&lt;init&gt;&#40;StreamDecoder.java:378&#41;
        
sun.nio.cs.StreamDecoder$CharsetSD.&lt;init&gt;&#40;StreamDecoder.java:358&#41;
        
sun.nio.cs.StreamDecoder.forInputStreamReader&#40;StreamDecoder.java:74&#41;
        java.io.InputStreamReader.&lt;init&gt;&#40;InputStreamReader.java:57&#41;
        com.zzo.javaserver.SocketHandler.run&#40;SocketHandler.java:84&#41;
        com.zzo.javaserver.TCPServer.run&#40;TCPServer.java:191&#41;
        java.lang.Thread.run&#40;Thread.java:595&#41;

TRACE 302252:
        java.nio.HeapByteBuffer.&lt;init&gt;&#40;HeapByteBuffer.java:39&#41;
        java.nio.ByteBuffer.allocate&#40;ByteBuffer.java:312&#41;
        
sun.nio.cs.StreamEncoder$CharsetSE.&lt;init&gt;&#40;StreamEncoder.java:310&#41;
        
sun.nio.cs.StreamEncoder$CharsetSE.&lt;init&gt;&#40;StreamEncoder.java:290&#41;
        
sun.nio.cs.StreamEncoder$CharsetSE.&lt;init&gt;&#40;StreamEncoder.java:274&#41;
        
sun.nio.cs.StreamEncoder.forOutputStreamWriter&#40;StreamEncoder.java:69&#41;
        java.io.OutputStreamWriter.&lt;init&gt;&#40;OutputStreamWriter.java:93&#41;
        com.zzo.javaserver.SocketHandler.run&#40;SocketHandler.java:167&#41;
        com.zzo.javaserver.TCPServer.run&#40;TCPServer.java:191&#41;
        java.lang.Thread.run&#40;Thread.java:595&#41;

SITES BEGIN &#40;ordered by live bytes&#41; Tue Oct 12 11:03:28 2010
          percent          live          alloc&#39;ed  stack class
 rank   self  accum     bytes objs     bytes  objs trace name
    1 45.62% 45.62%  29712960 3620  29721168  3621 301951 byte[]
    2 45.62% 91.24%  29712960 3620  29712960  3620 302252 byte[]
    3  0.67% 91.91%    434640 3622    434640  3622 301876 
java.net.SocksSocketImpl
-------------------------------------------------------------------

--- JavaServer&#39;s jstat -gc -t 30190 1s  --------------------------------
Timestamp        S0C    S1C    S0U    S1U      EC       EU        OC         
OU       PC     PU    YGC     YGCT    FGC    FGCT     GCT
           48.0 512.0  512.0   0.0    0.0    3072.0   475.1     1408.0      
0.0     16384.0 1988.6      0    0.000   0      0.000    0.000
           49.0 512.0  512.0   0.0    0.0    3072.0   2213.4    1408.0      
0.0     16384.0 2180.5      0    0.000   0      0.000    0.000
           50.0 512.0  512.0   0.0   496.6   3072.0   589.9     1408.0      
0.0     16384.0 2187.4      1    0.004   0      0.000    0.004
           51.0 512.0  512.0   0.0   496.6   3072.0   1966.6    1408.0      
0.0     16384.0 2188.0      1    0.004   0      0.000    0.004
           52.0 512.0  512.0   0.0    0.0    3072.0   253.5     3392.0     
1137.8   16384.0 2192.7      2    0.009   1      0.017    0.026
           53.0 512.0  512.0   0.0    0.0    3072.0   2041.4    3392.0     
1137.8   16384.0 2200.2      2    0.009   1      0.017    0.026
          ..........................
          ..........................
          ..........................
          327.8 896.0  512.0   0.0    0.0    5312.0   5306.2   58304.0    
58298.7   16384.0 2252.5    131    1.195  132    12.442   13.637
          328.8 896.0  512.0   0.0    0.0    5312.0   5306.2   58304.0    
58298.7   16384.0 2252.5    131    1.195  132    12.442   13.637
          329.4 896.0  512.0   0.0    0.0    5312.0   5285.8   58304.0    
58298.3   16384.0 2258.5    131    1.195  136    12.971   14.165
          329.4 896.0  512.0   0.0    0.0    5312.0   5285.8   58304.0    
58298.3   16384.0 2258.5    131    1.195  136    12.971   14.165

-------------------------------------------------------------------


shutdownables&#40;TCPServer.java&#41; is extend 2 size every request from perl.
but shutdownables&#40;TCPServer.java&#41; have not been released ?
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
