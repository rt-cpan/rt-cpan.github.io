<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #68471 for Test-Spelling: Code tries to modify constants</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #68471 for Test-Spelling: Code tries to modify constants</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Test-Spelling">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Test-Spelling">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Test-Spelling">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Test-Spelling">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Spelling">Test-Spelling CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">68471</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Test-Spelling">Test-Spelling</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SILASMONK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-31604-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31605-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-Copy-each-stopword-to-avoid-modifying-readonly-value.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/939443/488351/0001-Copy-each-stopword-to-avoid-modifying-readonly-value.patch">
Wed May 25 18:26:29 2011 (1.2k) by rt.cpan [...] sartak.org
</a>
</font></li>
</ul>


dont_modify_constants.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/939439/488346/dont_modify_constants.patch">
Wed May 25 18:10:28 2011 (590b) by SILASMONK [...] cpan.org
</a>
</font></li>
</ul>


signature.asc<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/939740/488513/signature.asc">
Thu May 26 18:24:13 2011 (900b) by nicholas [...] periapt.co.uk
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=68471">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939439" href="/Public/Bug/Display.html?id=68471#txn-939439">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;25&nbsp;18:10:28&nbsp;2011</span>
    <span class="description">SILASMONK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Code tries to modify constants</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/939439/488345/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488345">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 394b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sometimes, in particular when using Build, I get the following error.

Modification of a read-only value attempted at
/usr/share/perl5/Test/Spelling.pm line 223, &lt;DATA&gt; line 1002.

If I try to debug the code, the issue goes away. However
I can see a very plausible patch, and I attach it. The bug was also
reported to Debian as follows.


<span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=627963">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=627963</a></span>
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> dont_modify_constants.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/939439/488346/dont_modify_constants.patch">Download dont_modify_constants.patch</a><br />
<span class="downloadcontenttype">text/x-diff 590b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- a/lib/Test/Spelling.pm
+++ b/lib/Test/Spelling.pm
@@ -217,13 +217,9 @@
 
 sub add_stopwords {
     for my $word &#40;@_&#41; {
-        # XXX: the processing this performs is to support &#34;perl t/spell.t 2&gt;&gt;
-        # t/spell.t&#34; which is bunk. in the near future the processing here will
-        # become more modern
-        $word =~ s/^#?\s*//;
-        $word =~ s/\s+$//;
-        next if $word =~ /\s/ or $word =~ /:/;
-        $Pod::Wordlist::Wordlist{$word} = 1;
+        if &#40;$word =~ m{\A\#?\s*&#40;[^\s\:]+&#41;\s*\z}xms&#41; {
+            $Pod::Wordlist::Wordlist{$1} = 1;
+        }
     }
 }
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939443" href="/Public/Bug/Display.html?id=68471#txn-939443">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;25&nbsp;18:26:29&nbsp;2011</span>
    <span class="description">rt.cpan [...] sartak.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/939443/488350/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488350">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 679b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011-5æœˆ-25 æ°´ 18:10:28, SILASMONK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sometimes, in particular when using Build, I get the following error.
&gt; 
&gt; Modification of a read-only value attempted at
&gt; /usr/share/perl5/Test/Spelling.pm line 223, &lt;DATA&gt; line 1002.
&gt; 
&gt; If I try to debug the code, the issue goes away. However
&gt; I can see a very plausible patch, and I attach it. The bug was also
&gt; reported to Debian as follows.
&gt; 
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=627963">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=627963</a></span>
</div>
Hi Nicholas,

Thanks for your bug report. I think I can make the patch a little bit
simpler and still solve the issue. See attached. What do you think? If
it solves your problem I&#39;ll release with it.

Thanks,
Shawn
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-Copy-each-stopword-to-avoid-modifying-readonly-value.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/939443/488351/0001-Copy-each-stopword-to-avoid-modifying-readonly-value.patch">Download 0001-Copy-each-stopword-to-avoid-modifying-readonly-value.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 9224d06b71b309250a5b3d482d154ea494c556c6 Mon Sep 17 00:00:00 2001
From: Shawn M Moore &lt;sartak@bestpractical.com&gt;
Date: Wed, 25 May 2011 18:23:09 -0400
Subject: [PATCH] Copy each stopword to avoid modifying readonly values

    This avoids &#34;Modification of a read-only value attempted&#34; errors
    when you use add_stopwords&#40;&#34;constant&#34;, &#34;strings&#34;, &#34;here&#34;&#41;

    This, similar to what we were doing, doesn&#39;t work:
    perl -e &#39;sub foo { for my $x &#40;@_&#41; { $x =~ s/./X/; print $x } } foo&#40;&#34;hello&#34;&#41;&#39;

    This, what we do as of this commit, does:
    perl -e &#39;sub foo { for &#40;@_&#41; { my $x = $_; $x =~ s/./X/; print $x } } foo&#40;&#34;hello&#34;&#41;&#39;
---
 lib/Test/Spelling.pm |    5 ++++-
 1 files changed, 4 insertions&#40;+&#41;, 1 deletions&#40;-&#41;

diff --git a/lib/Test/Spelling.pm b/lib/Test/Spelling.pm
index e134633..0c32f8d 100644
--- a/lib/Test/Spelling.pm
+++ b/lib/Test/Spelling.pm
@@ -216,7 +216,10 @@ sub _is_perl {
 }
 
 sub add_stopwords {
-    for my $word &#40;@_&#41; {
+    for &#40;@_&#41; {
+        # explicit copy so we don&#39;t modify constants as in add_stopwords&#40;&#34;SQLite&#34;&#41;
+        my $word = $_;
+
         # XXX: the processing this performs is to support &#34;perl t/spell.t 2&gt;&gt;
         # t/spell.t&#34; which is bunk. in the near future the processing here will
         # become more modern
-- 
1.7.5.1

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939446" href="/Public/Bug/Display.html?id=68471#txn-939446">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;25&nbsp;18:26:30&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939510" href="/Public/Bug/Display.html?id=68471#txn-939510">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;26&nbsp;02:49:44&nbsp;2011</span>
    <span class="description">SILASMONK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/939510/488392/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488392">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 25 18:26:29 2011, SARTAK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2011-5æœˆ-25 æ°´ 18:10:28, SILASMONK wrote:
<div class="message-stanza open">&gt; &gt; Sometimes, in particular when using Build, I get the following error.
&gt; &gt; 
&gt; &gt; Modification of a read-only value attempted at
&gt; &gt; /usr/share/perl5/Test/Spelling.pm line 223, &lt;DATA&gt; line 1002.
&gt; &gt; 
&gt; &gt; If I try to debug the code, the issue goes away. However
&gt; &gt; I can see a very plausible patch, and I attach it. The bug was also
&gt; &gt; reported to Debian as follows.
&gt; &gt; 
&gt; &gt; 
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=627963">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=627963</a></span>
</div>&gt; 
&gt; Hi Nicholas,
&gt; 
&gt; Thanks for your bug report. I think I can make the patch a little bit
&gt; simpler and still solve the issue. See attached. What do you think? If
&gt; it solves your problem I&#39;ll release with it.
&gt; 
&gt; Thanks,
&gt; Shawn
</div>
Shawn,
 It appears to work but I am not very happy with it.
1.&#41; Knowing which one works seems to require a very good understanding
of the semantics of $_.
2.&#41; It is a reversion to earlier code so what is to stop another flip-flop?
3.&#41; My proposal does NOT modify $word, so unambiguously works.
4.&#41; There is a comment in the code promising something more modern. Is
this not a great time to deliver? 


Also it would be great if the next version could have some decent tests.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939677" href="/Public/Bug/Display.html?id=68471#txn-939677">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;26&nbsp;13:23:34&nbsp;2011</span>
    <span class="description">rt.cpan [...] sartak.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/939677/488473/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488473">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011-5æœˆ-26 æœ¨ 02:49:44, SILASMONK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Shawn,
&gt;  It appears to work but I am not very happy with it.
&gt; 1.&#41; Knowing which one works seems to require a very good understanding
&gt; of the semantics of $_.
&gt; 2.&#41; It is a reversion to earlier code so what is to stop another
</div>flip-flop?
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 3.&#41; My proposal does NOT modify $word, so unambiguously works.
&gt; 4.&#41; There is a comment in the code promising something more modern. Is
&gt; this not a great time to deliver? 
&gt; 
&gt; 
&gt; Also it would be great if the next version could have some decent tests.
</div>
I understand your concerns and agree with most of them. However, the
lack of tests is what drives me to produce the minimal patch that is
obviously correct, as opposed to the more complicated rewrite in the
proposed patch. The original code written by Ivan is what worked, and
because we didn&#39;t have tests, it sadly broke in a refactor. I don&#39;t want
it to happen again, so tests are pretty high up on the priority list now.

I&#39;m not at all opposed to doing #4, modernizing the add_stopwords
function. Or perhaps the modern version should be a new function, along
the lines of add_structured_stopwords. That way we don&#39;t break
everyone&#39;s code yet again, and we keep the unusual &#34;perl t/spell.t 2&gt;&gt;
t/spell.t&#34; behavior that was the intent of add_stopwords&#39;s parsing.

Shawn
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939740" href="/Public/Bug/Display.html?id=68471#txn-939740">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;26&nbsp;18:24:13&nbsp;2011</span>
    <span class="description">nicholas [...] periapt.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> SILASMONK [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #68471] Code tries to modify constants</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 26 May 2011 23:24:48 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Spelling [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Nicholas Bamber &lt;nicholas [...] periapt.co.uk&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/939740/488512/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488512">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Shawn,
        The patch is ready to go in Debian and I am confident that although it
is a different style is a perfectly good solution. So if you want to
take your time we&#39;ll put the patch in and remove on the next release. On
the other if you want to put in a conservative release immediately,  and
address the bigger issues later, then we will wait for that immediate
release.
You have actually been very responsive and I thank you for that.

Nicholas

On 26/05/11 18:23, Shawn M Moore via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=68471">https://rt.cpan.org/Ticket/Display.html?id=68471</a></span> &gt;
&gt; 
&gt; On 2011-5æœˆ-26 æœ¨ 02:49:44, SILASMONK wrote:
<div class="message-stanza open">&gt;&gt; Shawn,
&gt;&gt;  It appears to work but I am not very happy with it.
&gt;&gt; 1.&#41; Knowing which one works seems to require a very good understanding
&gt;&gt; of the semantics of $_.
&gt;&gt; 2.&#41; It is a reversion to earlier code so what is to stop another
</div>&gt; flip-flop?
<div class="message-stanza open">&gt;&gt; 3.&#41; My proposal does NOT modify $word, so unambiguously works.
&gt;&gt; 4.&#41; There is a comment in the code promising something more modern. Is
&gt;&gt; this not a great time to deliver? 
&gt;&gt;
&gt;&gt;
&gt;&gt; Also it would be great if the next version could have some decent tests.
</div>&gt; 
&gt; I understand your concerns and agree with most of them. However, the
&gt; lack of tests is what drives me to produce the minimal patch that is
&gt; obviously correct, as opposed to the more complicated rewrite in the
&gt; proposed patch. The original code written by Ivan is what worked, and
&gt; because we didn&#39;t have tests, it sadly broke in a refactor. I don&#39;t want
&gt; it to happen again, so tests are pretty high up on the priority list now.
&gt; 
&gt; I&#39;m not at all opposed to doing #4, modernizing the add_stopwords
&gt; function. Or perhaps the modern version should be a new function, along
&gt; the lines of add_structured_stopwords. That way we don&#39;t break
&gt; everyone&#39;s code yet again, and we keep the unusual &#34;perl t/spell.t 2&gt;&gt;
&gt; t/spell.t&#34; behavior that was the intent of add_stopwords&#39;s parsing.
&gt; 
&gt; Shawn
&gt; 
</div>

-- 
Nicholas Bamber | <span class="clickylink"><a target="new" rel="nofollow" href="http://www.periapt.co.uk/">http://www.periapt.co.uk/</a></span>
PGP key 3BFFE73C from pgp.mit.edu
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/939740/488513/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 900b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939995" href="/Public/Bug/Display.html?id=68471#txn-939995">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;27&nbsp;14:24:51&nbsp;2011</span>
    <span class="description">rt.cpan [...] sartak.org -  Reference to http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=627963 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939996" href="/Public/Bug/Display.html?id=68471#txn-939996">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;27&nbsp;14:26:36&nbsp;2011</span>
    <span class="description">rt.cpan [...] sartak.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/939996/488651/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488651">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 732b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2011-5æœˆ-26 æœ¨ 18:24:13, nicholas@periapt.co.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Shawn,
&gt;       The patch is ready to go in Debian and I am confident that although it
&gt; is a different style is a perfectly good solution. So if you want to
&gt; take your time we&#39;ll put the patch in and remove on the next release. On
&gt; the other if you want to put in a conservative release immediately,  and
&gt; address the bigger issues later, then we will wait for that immediate
&gt; release.
&gt; You have actually been very responsive and I thank you for that.
&gt; 
&gt; Nicholas
</div>
Hi Nicholas,

I&#39;m preparing the 0.14 release now with just the simple bugfix patch.
For the next release, we&#39;ll shoot for better parsing and tests.

Thanks for being understanding and diligent. :&#41;

Shawn
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-946247" href="/Public/Bug/Display.html?id=68471#txn-946247">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;16&nbsp;17:51:08&nbsp;2011</span>
    <span class="description">rt.cpan [...] sartak.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-946253" href="/Public/Bug/Display.html?id=68471#txn-946253">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;16&nbsp;17:52:05&nbsp;2011</span>
    <span class="description">rt.cpan [...] sartak.org -  Reference by ticket #68881 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.565242</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
