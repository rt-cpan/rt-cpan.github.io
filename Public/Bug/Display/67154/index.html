<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #67154 for re-engine-RE2: limited support for look-ahead and \G</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #67154 for re-engine-RE2: limited support for look-ahead and \G</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=re-engine-RE2">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=re-engine-RE2">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=re-engine-RE2">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=re-engine-RE2">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/re-engine-RE2">re-engine-RE2 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">67154</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=re-engine-RE2">re-engine-RE2</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
POWERMAN [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-236642-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-236643-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=67154">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-917854" href="/Public/Bug/Display.html?id=67154#txn-917854">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;01&nbsp;13:08:20&nbsp;2011</span>
    <span class="description">POWERMAN [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> limited support for look-ahead and \G</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/917854/476107/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476107">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">One of typical usage for look-ahead is split string into parts for 
independent processing, like this:

while &#40;$html =~ /&lt;h2&gt;&#40;.*?&#41;&#40;?=&lt;h2|$&#41;/imsg&#41; {
  my $part = $1;
  while &#40;$part =~ /.../g&#41; {}
}

With re2 this may be rewritten in this way:

while &#40;$html =~ /&lt;h2&gt;&#40;.*?&#41;&#40;&lt;h2|$&#41;/imsg&#41; {
  pos&#40;$html&#41; = pos&#40;$html&#41; - length&#40;$2&#41;;
  my $part = $1;
  while &#40;$part =~ /.../g&#41; {}
}

I think this &#34;special&#34; case can be handled by re2 module internally - 
i.e. if re2 detect _one_ look-ahead at _end_ or regex, it may replace 
it with usual capturing parentheses, and after executing regexp update 
pos&#40;&#41; and remove extra $n var &#40;or leave extra var in place if removing 
it will be too complex, just mention this behavior in doc&#41;.


As for \G, I&#39;m not 100% sure, but I remember there was some re2-
specific features which may be used to tie match to some position in 
string. In this is true, then, again, as special case re2 module can 
replace \G at _beginning_ of regex with call to re2-specific function 
to tie match to current pos&#40;&#41; value.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918304" href="/Public/Bug/Display.html?id=67154#txn-918304">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;02&nbsp;15:34:04&nbsp;2011</span>
    <span class="description">dgl [...] dgl.cx -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67154] limited support for look-ahead and \G </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 2 Apr 2011 20:33:52 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-re-engine-RE2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Leadbeater &lt;dgl [...] dgl.cx&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/918304/476356/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476356">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 1 Apr 2011, at 18:08, Alex Efros via RT wrote:
[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think this &#34;special&#34; case can be handled by re2 module internally - 
&gt; i.e. if re2 detect _one_ look-ahead at _end_ or regex, it may replace 
&gt; it with usual capturing parentheses, and after executing regexp update 
&gt; pos&#40;&#41; and remove extra $n var &#40;or leave extra var in place if removing 
&gt; it will be too complex, just mention this behavior in doc&#41;.
</div>
I really don&#39;t want to get into trying to parse regexps if I can avoid it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As for \G, I&#39;m not 100% sure, but I remember there was some re2-
&gt; specific features which may be used to tie match to some position in 
&gt; string. In this is true, then, again, as special case re2 module can 
&gt; replace \G at _beginning_ of regex with call to re2-specific function 
&gt; to tie match to current pos&#40;&#41; value.
</div>
Again, really don&#39;t want to get into parsing &#40;obviously could just do something very basic like \G has to start at the first byte, but not sure I like that, a patch might convince me otherwise though ;&#41; &#41;. 

RE2 does have a FindAndConsume API call, I wonder if something that allows Perl to call to this would be nicer &#40;but obviously the interoperability with Perl RE goes away if this is non-standard&#41;.

Sorry to be so reluctant but I don&#39;t really feel it&#39;s a direction that I&#39;d find that useful and it&#39;s a lot of work which seems like it could be rather fragile and I don&#39;t really want to be maintaining. However I&#39;d be willing to maybe consider something like a subclass that provides this functionality.

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918306" href="/Public/Bug/Display.html?id=67154#txn-918306">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;02&nbsp;15:34:04&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918307" href="/Public/Bug/Display.html?id=67154#txn-918307">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;02&nbsp;16:47:34&nbsp;2011</span>
    <span class="description">powerman [...] powerman.name -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67154] limited support for look-ahead and \G</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 2 Apr 2011 23:47:23 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Leadbeater via RT &lt;bug-re-engine-RE2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alex Efros &lt;powerman [...] powerman.name&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/918307/476358/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476358">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry to be so reluctant…
</div>
No, you right and I was expecting this sort of answer. I generally didn&#39;t
like to add this sort of functionality &#40;and support it&#41; too.

But, thing is, we either have vanilla RE2 &#40;without features like these&#41; or 
drop-in replacement for perl&#39;s default regex engine which should be better
than default engine in _some_ cases.

In first case users will expect RE2 benefits &#40;like guaranteed run in time
linear in the size of the input&#41;, but &#34;fall back&#34; to default engine for
some cases will break this guarantee and deceive the user&#39;s expectations.
I think there is should be sort of &#39;strict&#39; mode for this case, in which
your module just refuse to compile/execute regexps unsupported by RE2 -
and thus user will know: if his app compile &#40;or run without runtime
errors - that depends on your implementation&#41; then all used regexps are
compatible with RE2 and perl&#39;s default engine will not be used.

In second case users will expect some &#39;magic&#39; performance improvement for
part of used regexps. To do this work as best as possible, features like I
proposed with \G, look-ahead and probably some other similar special cases
should be implemented, just to increase amount of &#34;supported&#34; by RE2
regexps and so increase effect of &#39;magic&#39; speedup.

Moreover, both cases can be implemented at once:
    use re::engine::RE2 qw&#40;strict&#41;;
will croak&#40;&#41; on unsupported regexps, while
    use re::engine::RE2;
will just try to use RE2 for as much regexps as possible and fall back to
default engine otherwise.

Everything above is just abstract thought about ways to make this module
more useful/usable. As for me, I think &#39;strict&#39; mode is much ease to
implement and much more important to have, than &#39;magic&#39; mode with a lot of
special cases and optimizations.

-- 
                        WBR, Alex.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918436" href="/Public/Bug/Display.html?id=67154#txn-918436">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;06:21:23&nbsp;2011</span>
    <span class="description">powerman [...] powerman.name -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67154] limited support for look-ahead and \G</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Apr 2011 13:21:09 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Leadbeater via RT &lt;bug-re-engine-RE2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alex Efros &lt;powerman [...] powerman.name&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/918436/476421/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476421">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 725b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

On Sat, Apr 02, 2011 at 03:34:04PM -0400, David Leadbeater via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; As for \G, I&#39;m not 100% sure, but I remember there was some re2-
&gt; &gt; specific features which may be used to tie match to some position in 
</div>&gt; RE2 does have a FindAndConsume API call…
</div>
BTW, I&#39;m right now updating my RE2 wrapper for OS Inferno
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://code.google.com/p/inferno-re2/&#41;">http://code.google.com/p/inferno-re2/&#41;</a></span> to latests RE2,
and I notice Match&#40;&#41; function API was changed: endpos parameter was added.

That happens in last update, 1 month ago:
<span class="clickylink"><a target="new" rel="nofollow" href="http://code.google.com/p/re2/source/detail?r=d9f8806c004d00cbfed45081afd591f78ab22818">http://code.google.com/p/re2/source/detail?r=d9f8806c004d00cbfed45081afd591f78ab22818</a></span>
RE2 version included in re-engine-RE2-0.06 is older.

So, looks like to implement \G it&#39;s enough to set endpos=startpos.

-- 
                        WBR, Alex.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918502" href="/Public/Bug/Display.html?id=67154#txn-918502">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;11:56:55&nbsp;2011</span>
    <span class="description">dgl [...] dgl.cx -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67154] limited support for look-ahead and \G</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Apr 2011 16:56:41 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-re-engine-RE2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Leadbeater &lt;dgl [...] dgl.cx&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/918502/476455/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476455">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2 Apr 2011, at 21:47, Alex Efros via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Everything above is just abstract thought about ways to make this module
&gt; more useful/usable. As for me, I think &#39;strict&#39; mode is much ease to
&gt; implement and much more important to have, than &#39;magic&#39; mode with a lot of
&gt; special cases and optimizations.
</div>
Yes, definitely, I&#39;ve started maintaining a TODO list in the git repo and strict mode is now on that :&#41;

On 3 Apr 2011, at 11:21, Alex Efros via RT wrote:
[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So, looks like to implement \G it&#39;s enough to set endpos=startpos.
</div>
That gets the resuming matches part &#40;although you could previously do that by constructing a StringPiece appropriately albeit with  some caveats&#41;.

The part of \G that needs support from the regexp engine is telling you where the zero-width assertion was true. I suspect it would be possible to replace \G with an empty capturing group and filter it out from the returned match, but this goes back to how fiddly this all is &#40;and I really don&#39;t fancy implementing a regexp engine on top of re2, this should be in if anywhere&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918516" href="/Public/Bug/Display.html?id=67154#txn-918516">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;12:35:28&nbsp;2011</span>
    <span class="description">powerman [...] powerman.name -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67154] limited support for look-ahead and \G</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Apr 2011 19:35:19 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Leadbeater via RT &lt;bug-re-engine-RE2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alex Efros &lt;powerman [...] powerman.name&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/918516/476463/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476463">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 652b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

On Sun, Apr 03, 2011 at 11:56:56AM -0400, David Leadbeater via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The part of \G that needs support from the regexp engine is telling you
&gt; where the zero-width assertion was true. I suspect it would be possible
</div>
Sorry, I didn&#39;t get it. If Match&#40;&#41; &#39;endpos&#39; parameter is what I think it is 
&#40;maximum position for _beginning_ of the match, not for _end_ of the match&#41;
then &#40;if we imagine \G is natively supported by RE2&#41;:

    /\Gabc/-&gt;Match&#40;s, 0, s.size&#40;&#41;, RE2::UNANCHORED, …&#41;;

should be same as:

    /abc/-&gt;Match&#40;s, 0, 0, RE2::UNANCHORED, …&#41;;

Of course, instead of all 0&#39;s we should use value of perl&#39;s pos&#40;$s&#41;.

-- 
                        WBR, Alex.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918565" href="/Public/Bug/Display.html?id=67154#txn-918565">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;13:14:05&nbsp;2011</span>
    <span class="description">dgl [...] dgl.cx -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67154] limited support for look-ahead and \G</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Apr 2011 18:13:54 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-re-engine-RE2 [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Leadbeater &lt;dgl [...] dgl.cx&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/918565/476495/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476495">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 585b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 3 Apr 2011, at 17:35, Alex Efros via RT wrote:
[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry, I didn&#39;t get it. If Match&#40;&#41; &#39;endpos&#39; parameter is what I think it is 
&gt; &#40;maximum position for _beginning_ of the match, not for _end_ of the match&#41;
&gt; then &#40;if we imagine \G is natively supported by RE2&#41;:
</div>
Unfortunately that&#39;s not what it means.

See <span class="clickylink"><a target="new" rel="nofollow" href="http://code.google.com/p/re2/source/diff?spec=svnd9f8806c004d00cbfed45081afd591f78ab22818&#38;r=d9f8806c004d00cbfed45081afd591f78ab22818&#38;format=side&#38;path=/re2/re2.cc#sc_svnd9f8806c004d00cbfed45081afd591f78ab22818_520">http://code.google.com/p/re2/source/diff?spec=svnd9f8806c004d00cbfed45081afd591f78ab22818&#38;r=d9f8806c004d00cbfed45081afd591f78ab22818&#38;format=side&#38;path=/re2/re2.cc#sc_svnd9f8806c004d00cbfed45081afd591f78ab22818_520</a></span>

It literally means the size of the full string to match.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-918610" href="/Public/Bug/Display.html?id=67154#txn-918610">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;03&nbsp;15:17:20&nbsp;2011</span>
    <span class="description">powerman [...] powerman.name -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67154] limited support for look-ahead and \G</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 3 Apr 2011 22:17:10 +0300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Leadbeater via RT &lt;bug-re-engine-RE2 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alex Efros &lt;powerman [...] powerman.name&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/918610/476526/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/476526">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 281b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi!

On Sun, Apr 03, 2011 at 01:14:05PM -0400, David Leadbeater via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfortunately that&#39;s not what it means.
</div>
Ahh, I see, thanks. Anyway, this will do the work &#40;I&#39;ve just tested it&#41;:

    pattern.Match&#40;s, currentpos, s.size&#40;&#41;, RE2::ANCHOR_START, …&#41;

-- 
                        WBR, Alex.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1462054" href="/Public/Bug/Display.html?id=67154#txn-1462054">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;09&nbsp;17:31:35&nbsp;2015</span>
    <span class="description">WolfSage [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1462054/778060/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/778060">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 03 11:56:55 2011, DGL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2 Apr 2011, at 21:47, Alex Efros via RT wrote:
<div class="message-stanza open">&gt; &gt; Everything above is just abstract thought about ways to make this
&gt; &gt; module
&gt; &gt; more useful/usable. As for me, I think &#39;strict&#39; mode is much ease to
&gt; &gt; implement and much more important to have, than &#39;magic&#39; mode with a
&gt; &gt; lot of
&gt; &gt; special cases and optimizations.
</div>&gt; 
&gt; Yes, definitely, I&#39;ve started maintaining a TODO list in the git repo
&gt; and strict mode is now on that :&#41;
&gt; 
&gt; On 3 Apr 2011, at 11:21, Alex Efros via RT wrote:
&gt; [...]
<div class="message-stanza open">&gt; &gt; So, looks like to implement \G it&#39;s enough to set endpos=startpos.
</div>&gt; 
&gt; That gets the resuming matches part &#40;although you could previously do
&gt; that by constructing a StringPiece appropriately albeit with  some
&gt; caveats&#41;.
&gt; 
&gt; The part of \G that needs support from the regexp engine is telling
&gt; you where the zero-width assertion was true. I suspect it would be
&gt; possible to replace \G with an empty capturing group and filter it out
&gt; from the returned match, but this goes back to how fiddly this all is
&gt; &#40;and I really don&#39;t fancy implementing a regexp engine on top of re2,
&gt; this should be in if anywhere&#41;.
</div>
I&#39;m curious - is there functionality that&#39;s lacking in the Perl core to make this possible, or is this just a PITA to add?

-- Matthew Horsfall &#40;alh&#41;
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.536911</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
