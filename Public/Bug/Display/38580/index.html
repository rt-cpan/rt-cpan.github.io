<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #38580 for Archive-Tar: [PATCH] Archive::Tar-&gt;iter</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #38580 for Archive-Tar: [PATCH] Archive::Tar-&gt;iter</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Archive-Tar">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Archive-Tar">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Archive-Tar">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Archive-Tar">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Archive-Tar">Archive-Tar CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">38580</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Archive-Tar">Archive-Tar</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
GAAS [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-2526-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-2527-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




iter.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/498969/247181/iter.patch">
Tue Aug 19 06:50:14 2008 (3.8k) by GAAS [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=38580">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-498969" href="/Public/Bug/Display.html?id=38580#txn-498969">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;19&nbsp;06:50:14&nbsp;2008</span>
    <span class="description">GAAS [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [PATCH] Archive::Tar-&gt;iter</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/498969/247178/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/247178">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 244b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached patch relative to Archive-Tar-1.38 implements the &#39;iter&#39;
class method which returns an iterator function that reads the tar file
without loading it all in memory.  Please consider including it for the
next release.

Regards,
Gisle
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> iter.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/498969/247181/iter.patch">Download iter.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">commit fe230a1c0cff94078705c6b69a50835cf0ee5852
Author: Gisle Aas &lt;gisle@aas.no&gt;
Date:   Tue Aug 19 12:28:12 2008 +0200

    Add Archive::Tar-&gt;iter&#40;&#41; method.

diff --git a/lib/Archive/Tar.pm b/lib/Archive/Tar.pm
index 508bcfe..c6fbfd8 100644
--- a/lib/Archive/Tar.pm
+++ b/lib/Archive/Tar.pm
@@ -153,6 +153,11 @@ all options are case-sensitive.
 Do not read more than C&lt;limit&gt; files. This is useful if you have
 very big archives, and are only interested in the first few files.
 
+=item filter
+
+Can be set to a regular expression.  Only files with names that match
+the expression will be read.
+
 =item extract
 
 If set to true, immediately extract entries when reading them. This
@@ -237,6 +242,7 @@ sub _read_tar {
     my $opts    = shift || {};
 
     my $count   = $opts-&gt;{limit}    || 0;
+    my $filter  = $opts-&gt;{filter};
     my $extract = $opts-&gt;{extract}  || 0;
 
     ### set a cap on the amount of files to extract ###
@@ -372,6 +378,10 @@ sub _read_tar {
             undef $real_name;
         }
 
+        if &#40;$filter &#38;&#38; $entry-&gt;name !~ $filter&#41; {
+            next LOOP;
+        }
+
         $self-&gt;_extract_file&#40; $entry &#41; if $extract
                                             &#38;&#38; !$entry-&gt;is_longlink
                                             &#38;&#38; !$entry-&gt;is_unknown
@@ -1431,6 +1441,58 @@ sub create_archive {
     return $tar-&gt;write&#40; $file, $gzip &#41;;
 }
 
+=head2 Archive::Tar-&gt;iter&#40; $filename, {opt =&gt; $val} &#41;
+
+Returns an iterator function that reads the tar file without loading
+it all in memory.  Each time the function is called it will return the
+next file in the tarball.  The files are returned as
+C&lt;Archive::Tar::File&gt; objects.  The iterator function returns the
+empty list once it has exhausted the the files contained.
+
+The second argument can be a hash reference with options. Note that
+all options are case-sensitive.
+
+=over 4
+
+=item filter
+
+Can be set to a regular expression.  Only files with names that match
+the expression will be returned &#40;or extracted&#41;.
+
+=item extract
+
+If set to true, extract the files strait to disk. This lowers the
+memory requirement even further.
+
+=back
+
+Example usage:
+
+   my $next = Archive::Tar-&gt;iter&#40;&#34;example.tar.gz&#34;, {filter =&gt; qr/\.pm$/}&#41;;
+   while &#40;my $f = $next-&gt;&#40;&#41;&#41; {
+       print $f-&gt;name, &#34;\n&#34;;
+       # ...
+   }
+
+=cut
+
+sub iter {
+    my&#40;$class, $filename, $opt&#41; = @_;
+    my %opt;
+    %opt = %$opt if $opt;  # copy
+    my $handle = $class-&gt;_get_handle&#40;$filename, delete $opt{compressed}, READ_ONLY-&gt;&#40; ZLIB &#41;&#41;;
+    $opt{limit} = 1;
+    my @data;
+    return sub {
+        return shift&#40;@data&#41; if @data;
+        return unless $handle;
+        @data = @{$class-&gt;_read_tar&#40;$handle, \%opt&#41;};
+        return shift&#40;@data&#41; if @data;
+        undef&#40;$handle&#41;;
+        return;
+    };
+}
+
 =head2 Archive::Tar-&gt;list_archive &#40;$file, $compressed, [\@properties]&#41;
 
 Returns a list of the names of all the files in the archive.  The
diff --git a/t/05_iter.t b/t/05_iter.t
new file mode 100644
index 0000000..48f6971
--- /dev/null
+++ b/t/05_iter.t
@@ -0,0 +1,33 @@
+BEGIN {
+    if&#40; $ENV{PERL_CORE} &#41; {
+        chdir &#39;../lib/Archive/Tar&#39; if -d &#39;../lib/Archive/Tar&#39;;
+    }       
+    use lib &#39;../../..&#39;;
+}
+
+BEGIN { chdir &#39;t&#39; if -d &#39;t&#39; }
+
+use Test::More tests =&gt; 5;
+use strict;
+use lib &#39;../lib&#39;;
+
+use Archive::Tar;
+
+my @names;
+my $next = Archive::Tar-&gt;iter&#40;&#34;src/long/bar.tar&#34;&#41;;
+while &#40;my $f = $next-&gt;&#40;&#41;&#41; {
+      push&#40;@names, $f-&gt;name&#41;;
+}
+
+is&#40;@names, 5&#41;;
+is&#40;$names[0], &#34;c&#34;&#41;;
+is&#40;$names[4], &#34;directory/really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-really-long-directory-name/myfile&#34;&#41;;
+
+@names = &#40;&#41;;
+$next = Archive::Tar-&gt;iter&#40;&#34;src/long/bar.tar&#34;, {filter =&gt; qr/^c/}&#41;;
+while &#40;my $f = $next-&gt;&#40;&#41;&#41; {
+      push&#40;@names, $f-&gt;name&#41;;
+}
+
+is&#40;@names, 1&#41;;
+is&#40;$names[0], &#34;c&#34;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-500138" href="/Public/Bug/Display.html?id=38580#txn-500138">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;22&nbsp;10:11:09&nbsp;2008</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/500138/247832/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/247832">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 372b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Aug 19 06:50:14 2008, GAAS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The attached patch relative to Archive-Tar-1.38 implements the &#39;iter&#39;
&gt; class method which returns an iterator function that reads the tar file
&gt; without loading it all in memory.  Please consider including it for the
&gt; next release.
</div>
Thanks, applied with some modifications; I really liked the idea &#38; implementation.

-- Jos
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-500139" href="/Public/Bug/Display.html?id=38580#txn-500139">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;22&nbsp;10:11:17&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-500142" href="/Public/Bug/Display.html?id=38580#txn-500142">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;22&nbsp;10:11:27&nbsp;2008</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-500477" href="/Public/Bug/Display.html?id=38580#txn-500477">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;23&nbsp;06:18:31&nbsp;2008</span>
    <span class="description">GAAS [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-500478" href="/Public/Bug/Display.html?id=38580#txn-500478">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;23&nbsp;06:25:50&nbsp;2008</span>
    <span class="description">GAAS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/500478/248062/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/248062">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Aug 22 10:11:09 2008, KANE wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; applied with some modifications;
</div>
Thank you!  Here is some additional doc tweaks to go on top of that.  Is
the alias really a good idea?

If you really feel &#39;iter&#39; is too cryptic I suggest you just go with the
longer name.  Note that iter is quite well established as the
abbreviation for this concept; put perhaps I&#39;m just too much into Python
these days which has had an built-in iter&#40;&#41; function for the longest time.

--Gisle


--- a/lib/Archive/Tar.pm
+++ b/lib/Archive/Tar.pm
@@ -1484,13 +1484,14 @@ sub create_archive {
 }
 
 =head2 Archive::Tar-&gt;iter&#40; $filename, [ $compressed, {opt =&gt; $val} ] &#41;
+
 =head2 Archive::Tar-&gt;iterator&#40; $filename, [ $compressed, {opt =&gt; $val} ] &#41;
 
 Returns an iterator function that reads the tar file without loading
 it all in memory.  Each time the function is called it will return the
 next file in the tarball. The files are returned as
 C&lt;Archive::Tar::File&gt; objects. The iterator function returns the
-empty list once it has exhausted the the files contained.
+empty list once it has exhausted the files contained.
 
 The second argument can be a hash reference with options, which are
 identical to the arguments passed to C&lt;read&#40;&#41;&gt;.
@@ -1758,6 +1759,8 @@ choice but to read the archive into memory.
 This is ok if you want to do in-memory manipulation of the archive.
 If you just want to extract, use the C&lt;extract_archive&gt; class method
 instead. It will optimize and write to disk immediately.
+Yet another option is to use the C&lt;iter&gt; class method to iterate over
+the files in the tarball without reading them all in memory at once.
 
 =item Can&#39;t you lazy-load data instead?
 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-500837" href="/Public/Bug/Display.html?id=38580#txn-500837">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;24&nbsp;23:58:14&nbsp;2008</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/500837/248309/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/248309">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 811b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Aug 23 06:25:50 2008, GAAS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Aug 22 10:11:09 2008, KANE wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; applied with some modifications;
</div>&gt; 
&gt; Thank you!  Here is some additional doc tweaks to go on top of that.  Is
&gt; the alias really a good idea?
</div>
Perhaps it isn&#39;t :&#41; It just came intuitive, but it seems indeed that -&gt;iter is a
common enough term to not warrant an alias. Removed in 1.39_02.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you really feel &#39;iter&#39; is too cryptic I suggest you just go with the
&gt; longer name.  Note that iter is quite well established as the
&gt; abbreviation for this concept; put perhaps I&#39;m just too much into Python
&gt; these days which has had an built-in iter&#40;&#41; function for the longest time.
</div>
Thanks also for the doc patches; applied and amended in other places to
promote the use of -&gt;iter even more.

Thanks for your contribution!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-500840" href="/Public/Bug/Display.html?id=38580#txn-500840">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;24&nbsp;23:58:17&nbsp;2008</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.408973</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
