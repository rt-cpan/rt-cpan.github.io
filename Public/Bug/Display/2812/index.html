<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #2812 for WWW-Mechanize: make redirection of POST requests work the same way that browsers do</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #2812 for WWW-Mechanize: make redirection of POST requests work the same way that browsers do</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=WWW-Mechanize">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=WWW-Mechanize">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=WWW-Mechanize">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=WWW-Mechanize">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/libwww-perl/WWW-Mechanize/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Mechanize">WWW-Mechanize CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">2812</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=WWW-Mechanize">WWW-Mechanize</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
stuart [...] terminus.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-36214-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.44    </td>
  </tr>
  <tr id="CF-36215-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Mechanize.pm.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/82658/9931/Mechanize.pm.diff">
Tue Jun 24 10:20:45 2003 (947b) by 
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/82657/9926/Mechanize.pm.diff">
Tue Jun 24 09:54:06 2003 (1.2k) by 
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/82654/9788/Mechanize.pm.diff">
Tue Jun 17 06:20:42 2003 (1.1k) by 
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=2812">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-82654" href="/Public/Bug/Display.html?id=2812#txn-82654">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;17&nbsp;06:20:42&nbsp;2003</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> make redirection of POST requests work the same way that browsers do</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/82654/9787/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/9787">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 591b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">WWW-Mechanize-0.44 introduced the behaviour of following redirects after a POST. This is non-RFC compliant, but it&#39;s what most browsers do and we&#39;re attempting to mimic them so we do the same. However, when browsers do so they also change the method from POST to GET. Not doing so can cause problems with some web-server applications.

In order to fix this I have created a patch that overloads redirect_ok&#40;&#41; from LWP::UserAgent. I have tested it using perl version v5.6.1 built for sun4-solaris-thread-multi with patch &#34;ActivePerl Build 631&#34; applied, on a SUNW,Ultra-250 running Solaris 8.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/82654/9788/Mechanize.pm.diff">Download Mechanize.pm.diff</a><br />
<span class="downloadcontenttype">text/x-diff 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">914a915,942
&gt; 
&gt; =head2 redirect_ok&#40;$prospective_request&#41;
&gt; 
&gt; An overloaded version of C&lt;redirect_ok&#40;&#41;&gt; in L&lt;LWP::UserAgent&gt;.  This method is used to determine whether a redirection in the request should be followed.
&gt; 
&gt; This version behaves like the original, except that if the redirection was from a POST it changes the HTTP method to GET. This does not conform with the RFCs, but it is how many browser user agent implementations behave. As we are trying to model them, we must unfortunately mimic their erroneously reaction. See L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3&gt;">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3&gt;</a></span> for details on correct behaviour.
&gt; 
&gt; =cut
&gt; 
&gt; sub redirect_ok
&gt; {
&gt;     my&#40;$self, $request&#41; = @_;
&gt;     my $method = $request-&gt;method;
&gt;     return 0 unless grep $_ eq $method,
&gt;       @{ $self-&gt;requests_redirectable || [] };
&gt;     
&gt;     if&#40;$request-&gt;url-&gt;scheme eq &#39;file&#39;&#41; {
&gt;       LWP::Debug::trace&#40;&#34;Can&#39;t redirect to a file:// URL!&#34;&#41;;
&gt;       return 0;
&gt;     }
&gt; 
&gt;     # Mimic erroneously browser behaviour.
&gt;     $request-&gt;method&#40;&#34;GET&#34;&#41; if $request-&gt;method eq &#34;POST&#34;;
&gt; 
&gt;     # Otherwise it&#39;s apparently okay...
&gt;     return 1;
&gt; }
&gt; 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-82655" href="/Public/Bug/Display.html?id=2812#txn-82655">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;23&nbsp;15:38:44&nbsp;2003</span>
    <span class="description">andy [...] petdance.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/82655/9907/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/9907">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 94b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">So should I still do this, make a redirected POST become a GET?  What
are the pros and cons?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-82656" href="/Public/Bug/Display.html?id=2812#txn-82656">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;23&nbsp;17:26:03&nbsp;2003</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> stuart [...] terminus.co.uk</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/82656/9914/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/9914">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[PETDANCE - Mon Jun 23 15:38:44 2003]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So should I still do this, make a redirected POST become a GET?  What
&gt; are the pros and cons?
</div>
Yes please!

The only con that I am aware of is that this behavior is not compliant
with the RFCs. However, that&#39;s not really an issue - redirecting a POST
at all &#40;whether you change the method or not&#41; is not compliant with the
RFCs! All the &#34;main&#34; user agents &#40;ie: the real browsers&#41; behave as I&#39;ve
said: when they receive a redirect following a POST, they follow the
redirect, but change the HTTP method to GET. As Mechanize aims to
duplicate their behaviour, to do otherwise is IMO a bug.

Additionally, I am not aware of any significant user agents that behave
as Mechanize currently does - which is both non RFC compliant, and non
&#34;industry standard&#34; compliant. There may be some however - I&#39;ve not
investigated thoroughly.

The main pro for me personally is that the current Mechanize behaviour
causes problems. Some URIs can not accept POST requests. Such a page may
be retrieving as the result of a redirect from a page that was POSTed
to. Most static content won&#39;t care, but some web server applications do.
 Applying this fix makes Mechanize work for such pages, and won&#39;t break
pages that are currently being POSTed to &#40;unless they require POSTs, in
which case they don&#39;t work with common browsers&#41;.

I have an updated patch against Mechanize-0.48. I shall attach it to
this bug tomorrow from work.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-82657" href="/Public/Bug/Display.html?id=2812#txn-82657">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;24&nbsp;09:54:06&nbsp;2003</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> stuart [...] terminus.co.uk</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/82657/9925/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/9925">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 418b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Mon Jun 23 17:26:03 2003]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have an updated patch against Mechanize-0.48. I shall attach it to
&gt; this bug tomorrow from work.
</div>
Here it is as promised. Please note that in addition to fixing the bug
described above, this patch also tidies up the doc comments, and
implements the checking of requests_redirectable that LWP::UserAgent
does &#40;in order to remain compatible with it&#41;.

Any questions, please ask.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/82657/9926/Mechanize.pm.diff">Download Mechanize.pm.diff</a><br />
<span class="downloadcontenttype">text/x-diff 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">996c996
&lt; =head2 C&lt;&lt; redirect_ok&#40;&#41; &gt;&gt;
---
&gt; =head2 C&lt;&lt; $a-&gt;redirect_ok&#40;&#41; &gt;&gt;
998,999c998
&lt; Keep track of the last uri redirected to, and tell our parent that it&#39;s
&lt; OK to do the redirect.
---
&gt; An overloaded version of C&lt;redirect_ok&#40;&#41;&gt; in L&lt;LWP::UserAgent&gt;.  This method is used to determine whether a redirection in the request should be followed.
1000a1000,1001
&gt; Keep track of the last uri redirected to. Also if the redirection was from a POST change the HTTP method to GET. This does not conform with the RFCs, but it is how many browser user agent implementations behave. As we are trying to model them, we must unfortunately mimic their erroneously reaction. See L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3&gt;">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3&gt;</a></span> for details on correct behaviour.
&gt; 
1004c1005,1008
&lt;     $_[0]-&gt;{redirected_uri} = $_[1]-&gt;uri;
---
&gt;     my&#40;$self, $request&#41; = @_;
&gt;     my $method = $request-&gt;method;
&gt;     return 0 unless grep $_ eq $method,
&gt;       @{ $self-&gt;requests_redirectable || [] };
1005a1010,1016
&gt;     # Keep track of the last uri redirected to.
&gt;     $self-&gt;{redirected_uri} = $request-&gt;uri;
&gt; 
&gt;     # Mimic erroneously browser behaviour by changing the method.
&gt;     $request-&gt;method&#40;&#34;GET&#34;&#41; if $request-&gt;method eq &#34;POST&#34;;
&gt; 
&gt;     # OK to redirect.
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-82658" href="/Public/Bug/Display.html?id=2812#txn-82658">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;24&nbsp;10:20:45&nbsp;2003</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> stuart [...] terminus.co.uk</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/82658/9930/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/9930">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 757b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Tue Jun 24 09:54:06 2003]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [guest - Mon Jun 23 17:26:03 2003]:
&gt; 
<div class="message-stanza open">&gt; &gt; I have an updated patch against Mechanize-0.48. I shall attach it to
&gt; &gt; this bug tomorrow from work.
</div>&gt; 
&gt; Here it is as promised. Please note that in addition to fixing the bug
&gt; described above, this patch also tidies up the doc comments, and
&gt; implements the checking of requests_redirectable that LWP::UserAgent
&gt; does &#40;in order to remain compatible with it&#41;.
</div>
Sigh, and then I notice 0.49 has been released. Here&#39;s a patch against
that instead. 0.49 made redirect_ok call the UserAgent method of the
same name, so I&#39;ve removed the checking mentioned above from this patch.
Otherwise it&#39;s the same. Could this please be applied ASAP &#40;in any case
before the next release&#41;?
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/82658/9931/Mechanize.pm.diff">Download Mechanize.pm.diff</a><br />
<span class="downloadcontenttype">text/x-diff 947b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">996c996
&lt; =head2 C&lt;&lt; redirect_ok&#40;&#41; &gt;&gt;
---
&gt; =head2 C&lt;&lt; $a-&gt;redirect_ok&#40;&#41; &gt;&gt;
998,999c998
&lt; Keep track of the last uri redirected to, and tell our parent that it&#39;s
&lt; OK to do the redirect.
---
&gt; An overloaded version of C&lt;redirect_ok&#40;&#41;&gt; in L&lt;LWP::UserAgent&gt;.  This method is used to determine whether a redirection in the request should be followed.
1000a1000,1001
&gt; Keep track of the last uri redirected to. Also if the redirection was from a POST change the HTTP method to GET. This does not conform with the RFCs, but it is how many browser user agent implementations behave. As we are trying to model them, we must unfortunately mimic their erroneously reaction. See L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3&gt;">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3&gt;</a></span> for details on correct behaviour.
&gt; 
1011a1013,1015
&gt;     # Mimic erroneously browser behaviour by changing the method.
&gt;     $prospective_request-&gt;method&#40;&#34;GET&#34;&#41; if $prospective_request-&gt;method eq &#34;POST&#34;;
&gt;     
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-82659" href="/Public/Bug/Display.html?id=2812#txn-82659">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;24&nbsp;10:56:28&nbsp;2003</span>
    <span class="description">andy [...] petdance.com -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-82660" href="/Public/Bug/Display.html?id=2812#txn-82660">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;24&nbsp;10:56:28&nbsp;2003</span>
    <span class="description">andy [...] petdance.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/82660/9932/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/9932">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 66b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 0.50, which is now out on the CPAN, or making its way....
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.429422</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
