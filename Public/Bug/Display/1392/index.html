<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #1392 for Net-DNS: Unitialized variable warnings in RR.pm</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #1392 for Net-DNS: Unitialized variable warnings in RR.pm</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-DNS/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-DNS/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">1392</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-DNS/Active/">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">rt-cpan [...] triv.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
DougB [...] FreeBSD.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.25    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;05&nbsp;02:32:00&nbsp;2002</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Unitialized variable warnings in RR.pm</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This bug is new to 0.25.

perl -v
This is perl, version 5.005_03 built for i386-freebsd

FreeBSD 4.6-STABLE-0714

The attached tarball contains a patch to RR.pm that helps highlight the problem, and a test script that reproduces it. The short version is that when running with -w, the new AUTOLOAD code causes an unitialized variable warning for each new type the first time it&#39;s created. On my system, with the attached patch applied the test script produces the following output:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">Debug&gt; class: Net::DNS::RR::NS name: type
</div>Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 641.
Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 644.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">Debug&gt; class: Net::DNS::RR::NS name: nsdname
</div>Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 641.
Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 644.
name servers: dns.viptx.net viper.viptx.net
name servers: viper.viptx.net dns.viptx.net
name servers: dns.viptx.net viper.viptx.net

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">Debug&gt; class: Net::DNS::RR::A name: name
</div>Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 641.
Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 644.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">Debug&gt; class: Net::DNS::RR::A name: address
</div>Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 641.
Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 644.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">Debug&gt; class: Net::DNS::RR::SOA name: serial
</div>Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 641.
Use of uninitialized value at /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 644.
Serial: 2002050201

If I remove -w from the script, or if I change the code in lines 628-642 in RR.pm back to &#34;return $self-&gt;{$name};&#34; like it was in 0.24, everything works ok. 

I&#39;m not sure what the solution is, I&#39;m hardly an expert on AUTOLOAD...

Doug
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Â‹ Ã³N= Ã­VmoÃ›6Ã¶WÃ©WÃœÂ”vgKÂ–Ã¤Â·MFwHÂ±o	fÃ§cÂBÂ–ÃÂ–0Â™rHÂªNdÂ¿}GQÂÂeIÂ´Ã™Ã¸Ã€ÂÂÃ£swÃÂHÂ$
Ã©V,gÂ¹lÂ½Ã¼Ã€Ã·&#39;Â£QÃ‹Ã·Ã½`2Ã²OÂŸ
Ã¡h&lt;h!4!{@Ã‹Â“Ã¸Â¯Â¦Ã¨Â•Â1hÂ¥eÂµyÂ‰Ã·Â¹ÃµÃ¿&#40;ÃÂ¾Ã«WÂ‚Ã·W9Ã«Ã¯ÂÃ Ã®mÂ»BÃ²&lt;Â‘SÃ½Ã%ÃŠ&#40;ÂºÂ¸\FÃ‘EY|BNgÃ¼z#oÃ¬|Ã«ÃœÂŠÂ½Â,RW Â§eÃ¡1Â”c0Ã°Â‚Â¡Ã¦Â¬ÂÃ£Â„cO1&#39;yÃŠÂ±Â·w0gÃÃ¡gdHÂº*xSÃ‘Ã¾Ã­Â´ÂJÃš=hÃ¯sÂ–Â–Ã»mÃ¼+rÂ¯Ã¤OÃ™.Â—Ã­Â·S{Ã‡s&#38;ÃaÃ±Â–*Ã”&#34;ÃºsÂ¦Ã¶Ã§SJyÃ•$Â‡^|EÃ•Â°7Â¢ÂŒ_ÃˆÂ´ÂˆÃ“Â¼ÃÂ§|&#39;oUÂ“Â½Ã§Ã’-Â¯ÃÂÃ¤[RÂ°Â¸ÂˆÃªÃ¨:ÃÃ¦|ÂµÃÂ¿Â¶-ÂªÃ•3Ã’Ã ÃÂ¶Â”|UÂ™.ÂŒÂªYÂ¾Â–0Ã¿8Ã•kiÂ¹ÂsÃ¶Ã”.Ã¯vÃ¸ÃˆÂªÃUÃÃ®Ã¿z#[ÂŠÃ ÃR\UÂ›ÂOÂµ6Â†Â£Ã‘qNÃ´8G
Ã‡Â¤Ã¢OÂ½8J~Ã—	ÂÂ†Ã—ÂµÃ¯&#41;&#41;eÂ‚&#39;YmÃ‘Â©t~G&#34;ÃµÂ²@Â–RJ]Â¦Ã“Â§Â®ÃŒÂ©Ã™Ã¹:Â¬Â”9/Â¹:Â«lxCÂ›Ã£ÃªÃ½bqÂµhÂ¿UmÂ´Ã´K[^_ÂÂœ_ÃªÃ¯Â•GÃµIÂ„Â¹XÂ”Ã¬Â´Ã»Ãµ[Â¶,*Â«Ã¢ÃšoeÂ›ÂÂ­ÃœÂeÂ§ÃˆÃYÃŒÂ’Â²Â¢Â¤3Ã°Âµuvc&#38;Ã¶ÂºÃ•Ã–\gÂ¹ ÃºÃ­3Ã¤2CÃ˜Ã±rUÃ ÃŠDuÂ“HÃ«Â’cÂœdPÂ¿&lt;~LÂ¢Ã£Ã¨Â¸Â–R+PbpÃŠ]Â¿~ÃªÃ‚iÂ»,Â­RÃ¯ÂŒÃŸÂ Â¹Ã¬Ã§M kWÂ‰Ã¬ Â®Eu&#38;RUÂ½*Ãšz ,Ã„Ã£ tÂÂšÂ®Ã”~Â¢&gt;ÃšÃÃ–ÃÃ²ÃµÂ“Â‘ÃºÃ¶O_Ã¹ÂÂ°XxÂ»Â­Â—Ã¦Ã«ÃµÃ«Ã¥PÃ³&lt;Ã¦Ã½ÂŸÃ§Â¿?Â›Ã¹OÂ´ TÃ³0Ã¼ÃÃ³ÂŸÂ—Ã¥Â‹_@Ã¿Ã“Ã¹Ã¯Âº.Ã¨=pÂ‘i]gÂ¼Â«6 Ã¸A4
Â¢Â¡!}Â¢Ã™ÃnWÃ³Â¬eÃ…4eaÂ…Â“hhÃŠ|Ã®8Ã·Ã†ÃUÂ`&gt;Â·ÂÂ¶&lt;XÃ´ceÃ³I7}ÂkÃ‘ÂŸÃš]Â»Ã»Ã¸Â‚ÃºÃ€.Ã”&lt;ÂƒÂ¤ÂˆÂÂ³7ÃµÃ”iÂŒÃ´Â•T_FuÂ¼3Ã¸Â©ÃŠÂ‹bÃ˜Â¢ÃŒÃŠhÂ¨Â»Â¤vÃ±ÂˆÃ°Ã½Â½Â£Ã½Â£Â¨vuÃ”dÂ Â±sÃ¿Ã¯:Â€ÃŸÂ¿Ãª9Ã§Â &#40;  </div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;05&nbsp;03:10:44&nbsp;2002</span>
    <span class="description">rt-cpan [...] triv.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;05&nbsp;03:13:12&nbsp;2002</span>
    <span class="description">rt-cpan [...] triv.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;05&nbsp;03:13:12&nbsp;2002</span>
    <span class="description">rt-cpan [...] triv.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Mon Aug  5 02:32:00 2002]:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This bug is new to 0.25.
&gt; 
&gt; perl -v
&gt; This is perl, version 5.005_03 built for i386-freebsd
&gt; 
&gt; FreeBSD 4.6-STABLE-0714
&gt; 
&gt; The attached tarball contains a patch to RR.pm that helps highlight
&gt;    the problem, and a test script that reproduces it. The short
&gt;    version is that when running with -w, the new AUTOLOAD code causes
&gt;    an unitialized variable warning for each new type the first time
&gt;    it&#39;s created. On my system, with the attached patch applied the
&gt;    test script produces the following output:
&gt; 
<div class="message-stanza open">&gt; Debug&gt; class: Net::DNS::RR::NS name: type
</div>&gt; Use of uninitialized value at
&gt;    /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 641.
&gt; Use of uninitialized value at
&gt;    /usr/local/lib/perl5/site_perl/5.005/Net/DNS/RR.pm line 644.
</div>

Thanks for the report, I was able to reproduce the bug, and fix it :&#41;.  The attached 
patch is the fix, please apply it and yet me know if the problem persists.  This fix 
will be in 0.26, which will be released in the next few days.  Also, I have added a 
test to the test suite to test for this warning in t/07-misc.t.

-- 
Chris Reinhardt
ctriv@dyndns.org
Systems Architect
Dynamic DNS Network Services
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dyndns.org/">http://www.dyndns.org/</a></span>
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"> net-dns.patch                                                                      =    Â¹sÂÂ¹sÂ   mBIN                Â‚Âz  Index: RR.pm
===================================================================
RCS file: /storage/cvsroot/Net-DNS/lib/Net/DNS/RR.pm,v
retrieving revision 1.19
retrieving revision 1.20
diff -u -r1.19 -r1.20
--- RR.pm	2002/08/01 08:51:40	1.19
+++ RR.pm	2002/08/05 07:06:56	1.20
@@ -1,6 +1,6 @@
 package Net::DNS::RR;
 
-# $Id: RR.pm,v 1.19 2002/08/01 08:51:40 ctriv Exp $
+# $Id: RR.pm,v 1.20 2002/08/05 07:06:56 ctriv Exp $
 
 use strict;
 use vars qw&#40;$VERSION $AUTOLOAD&#41;;
@@ -599,7 +599,7 @@
 sub AUTOLOAD {
 	my &#40;$self&#41; = @_;  # If we do shift here, it will mess up the goto below.
 	
-	my &#40;$class, $name&#41; = $AUTOLOAD =~ m/^&#40;.*&#41;::&#40;.*&#41;$/;
+	my &#40;$name&#41; = $AUTOLOAD =~ m/^.*::&#40;.*&#41;$/;
 	
 	# XXX -- We should test that we do in fact carp on unknown methods.	
 	unless &#40;exists $self-&gt;{$name}&#41; {
@@ -628,7 +628,7 @@
 	no strict q/refs/;
 	
 	# Build a method in the class.
-	*{&#34;$class::$name&#34;} = sub {
+	*{$AUTOLOAD} = sub {
 		my &#40;$self, $new_val&#41; = @_;
 				
 		if &#40;$new_val&#41; {
@@ -639,7 +639,7 @@
 	};
 	
 	# And jump over to it.
-	goto &#38;{&#34;$class::$name&#34;};
+	goto &#38;{$AUTOLOAD};
 }
 
 
                                                                   </div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
