<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19406 for Module-Build: argument list too long &#40;Red Hat and derivatives&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19406 for Module-Build: argument list too long &#40;Red Hat and derivatives&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Module-Build/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Module-Build/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Module-Build/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Module-Build/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-Build">Module-Build CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19406</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Module-Build/Active/">Module-Build</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
paul [...] city-fan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-21558-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.28</li>
<li>
0.2801</li>
</ul>
    </td>
  </tr>
  <tr id="CF-21559-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.2806    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;22&nbsp;07:19:52&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test suite fails in various ways on old Red Hat/Fedora distributions</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Whilst trying to update various boxes at $WORKPLACE, I&#39;ve found that I
can only get the testsuite to run in my RPM packages of Module::Build in
Fedora Core 4 and 5. On older distributions, the testsuite fails in a
variety of different ways:

Fedora Core 3 &#40;perl 5.8.5&#41;:
Executing&#40;%check&#41;: /bin/sh -e /var/tmp/rpm-tmp.76939
+ umask 022
+ cd /nis-home/phowarth/BUILD/BUILD
+ cd Module-Build-0.2801
+ TEST_SIGNATURE=0
+ ./Build test
t/basic...........ok
t/compat..........ok 2/60Couldn&#39;t run Build.PL: Argument list too long
at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 3#     Failed test &#40;t/compat.t at line 180&#41;
t/compat..........NOK 4#     Failed test &#40;t/compat.t at line 181&#41;
make: *** No targets specified and no makefile found.  Stop.
t/compat..........NOK 5#     Failed test &#40;t/compat.t at line 56&#41;
make: *** No rule to make target `test&#39;.  Stop.
t/compat..........NOK 6#     Failed test &#40;t/compat.t at line 63&#41;
t/compat..........NOK 7#     Failed test &#40;t/compat.t at line 64&#41;
#                   &#39;MAKE TEST
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:DONE\.|SUCCESS&#41;&#39;
make: *** No rule to make target `realclean&#39;.  Stop.
t/compat..........NOK 8#     Failed test &#40;t/compat.t at line 66&#41;
Couldn&#39;t run Build.PL: Argument list too long at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 9#     Failed test &#40;t/compat.t at line 180&#41;
t/compat..........NOK 10#     Failed test &#40;t/compat.t at line 181&#41;
make: *** No rule to make target `realclean&#39;.  Stop.
t/compat..........ok 12/60Couldn&#39;t run Build.PL: Argument list too long
at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 13#     Failed test &#40;t/compat.t at line 180&#41;
t/compat..........NOK 14#     Failed test &#40;t/compat.t at line 181&#41;
make: *** No targets specified and no makefile found.  Stop.
t/compat..........NOK 15#     Failed test &#40;t/compat.t at line 56&#41;
make: *** No rule to make target `test&#39;.  Stop.
t/compat..........NOK 16#     Failed test &#40;t/compat.t at line 63&#41;
t/compat..........NOK 17#     Failed test &#40;t/compat.t at line 64&#41;
#                   &#39;MAKE TEST
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:DONE\.|SUCCESS&#41;&#39;
make: *** No rule to make target `realclean&#39;.  Stop.
t/compat..........NOK 18#     Failed test &#40;t/compat.t at line 66&#41;
Couldn&#39;t run Build.PL: Argument list too long at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 19#     Failed test &#40;t/compat.t at line 180&#41;
t/compat..........NOK 20#     Failed test &#40;t/compat.t at line 181&#41;
make: *** No rule to make target `realclean&#39;.  Stop.
t/compat..........NOK 38#     Failed test &#40;t/compat.t at line 101&#41;
#                   &#39;Couldn&#39;t run Build.PL: Argument list too long at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:Foo/Builder.pm&#41;&#39;
t/compat..........NOK 41#     Failed test &#40;t/compat.t at line 101&#41;
#                   &#39;Couldn&#39;t run Build.PL: Argument list too long at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:Foo/Builder.pm&#41;&#39;
t/compat..........ok 42/60Couldn&#39;t run Build.PL: Argument list too long
at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 43#     Failed test &#40;t/compat.t at line 109&#41;
t/compat..........ok 44/60Couldn&#39;t run Build.PL: Argument list too long
at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 45#     Failed test &#40;t/compat.t at line 109&#41;
Couldn&#39;t run Build.PL: Argument list too long at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 46#     Failed test &#40;t/compat.t at line 126&#41;
t/compat..........NOK 48#     Failed test &#40;t/compat.t at line 130&#41;
#          got: &#39;site&#39;
#     expected: &#39;core&#39;
t/compat..........NOK 49#     Failed test &#40;t/compat.t at line 131&#41;
#          got: undef
#     expected: &#39;1&#39;
t/compat..........NOK 50#     Failed test &#40;t/compat.t at line 132&#41;
#          got: &#39;/usr/lib/perl5/site_perl/5.8.5&#39;
#     expected:
&#39;/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/t/libdir&#39;
t/compat..........NOK 51#     Failed test &#40;t/compat.t at line 133&#41;
#          got: undef
#     expected: &#39;-DPERL_POLLUTE&#39;
make: *** No rule to make target `test&#39;.  Stop.
t/compat..........NOK 52#     Failed test &#40;t/compat.t at line 138&#41;
t/compat..........NOK 53#     Failed test &#40;t/compat.t at line 140&#41;
#                   &#39;# make test
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:&#40;?:# ok \d+\s+&#41;+&#41;&#39;
make: *** No rule to make target `test&#39;.  Stop.
t/compat..........NOK 54#     Failed test &#40;t/compat.t at line 144&#41;
t/compat..........NOK 55#     Failed test &#40;t/compat.t at line 146&#41;
#                   &#39;# make test TEST_VERBOSE=0
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:&#40;?:# .+basic\.+ok\s+&#40;?:[\d.]+\s*m?s\s*&#41;?&#41;#
All tests&#41;&#39;
t/compat..........ok 56/60make: *** No rule to make target `realclean&#39;.
 Stop.
t/compat..........ok 58/60Couldn&#39;t run Build.PL: Argument list too long
at
/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm
line 200.
t/compat..........NOK 59#     Failed test &#40;t/compat.t at line 168&#41;
t/compat..........ok 60/60make: *** No rule to make target `realclean&#39;.
 Stop.
# Looks like you failed 30 tests of 60.
t/compat..........dubious
        Test returned status 30 &#40;wstat 7680, 0x1e00&#41;
DIED. FAILED tests 3-10, 13-20, 38, 41, 43, 45-46, 48-55, 59
        Failed 30/60 tests, 50.00% okay


Red Hat Linux 9 &#40;perl 5.8.0&#41;
Executing&#40;%check&#41;: /bin/sh -e /var/tmp/rpm-tmp.92020
+ umask 022
+ cd /nis-home/phowarth/BUILD/BUILD
+ cd Module-Build-0.2801
+ TEST_SIGNATURE=0
+ ./Build test
Can&#39;t locate the perl binary used to run this script in &#40;/usr/bin
/usr/bin /usr/bin /usr/local/bin /usr/kerberos/bin /bin /usr/bin
/usr/X11R6/bin&#41;
error: Bad exit status from /var/tmp/rpm-tmp.92020 &#40;%check&#41;


RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.92020 &#40;%check&#41;


Unfortunately my perl skills aren&#39;t sufficiently honed for me to be able
to diagnose these issues myself. In all cases though, the only perl on
the system is /usr/bin/perl.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;28&nbsp;15:26:13&nbsp;2006</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This bug has reared its ugly head before.  The problem is that RH-FC installs its perl RPMs with 
hugely long @INC paths, and when we pass this path on the command line in various places in 
M::B, it&#39;s too long for the shell.

Lemme bring this issue up on the development list again and see what we can come up with.

 -Ken
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;28&nbsp;15:26:13&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;28&nbsp;16:07:01&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 28 15:26:13 2006, KWILLIAMS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This bug has reared its ugly head before.  The problem is that RH-FC
&gt; installs its perl RPMs with
&gt; hugely long @INC paths, and when we pass this path on the command line
&gt; in various places in
&gt; M::B, it&#39;s too long for the shell.
</div>
I think this was done for compatibility with perl modules built on old
perl versions. However, the same approach is there on FC4 and FC5, both
of which work OK. It does explain the FC3 problem, but what about the
RHL9 issue, which appears to me to be a different issue?

Paul.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;28&nbsp;23:10:04&nbsp;2006</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 28 16:07:01 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It does explain the FC3 problem, but what about the
&gt; RHL9 issue, which appears to me to be a different issue?
</div>
Yeah, it does look like a different issue.  I&#39;ve never seen that one before, I&#39;m not sure what&#39;s 
going on there.  One thing you *might* want to try is setting the LANG environment variable to 
&#34;C&#34; or just the empty string and trying again.  I&#39;ve seen some problems with the default locale 
on RH that that usually fixes.

 -Ken
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;29&nbsp;05:15:44&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Howarth &lt;paul [...] city-fan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 28 23:10:04 2006, KWILLIAMS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun May 28 16:07:01 2006, guest wrote:
<div class="message-stanza open">&gt; &gt; It does explain the FC3 problem, but what about the
&gt; &gt; RHL9 issue, which appears to me to be a different issue?
</div>&gt; 
&gt; Yeah, it does look like a different issue.  I&#39;ve never seen that one
&gt; before, I&#39;m not sure what&#39;s
&gt; going on there.  One thing you *might* want to try is setting the LANG
&gt; environment variable to
&gt; &#34;C&#34; or just the empty string and trying again.  I&#39;ve seen some
&gt; problems with the default locale
&gt; on RH that that usually fixes.
</div>
Thanks; that&#39;s fixed that issue &#40;might be worth mentioning that tip in a
README perhaps?&#41;.

So, current state of play is:
M::B 0.2801:
OK on RHL9, FC1, FC2, RHEL3 with LANG=C
Fails &#40;@INC too long&#41; on RHEL4, FC3
OK on FC4, FC5

Paul.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;30&nbsp;17:12:47&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> stevengs [...] web.de</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mo. 29. Mai 2006, 05:15:44, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun May 28 23:10:04 2006, KWILLIAMS wrote:
<div class="message-stanza open">&gt; &gt; On Sun May 28 16:07:01 2006, guest wrote:
<div class="message-stanza open">&gt; &gt; &gt; It does explain the FC3 problem, but what about the
&gt; &gt; &gt; RHL9 issue, which appears to me to be a different issue?
</div>&gt; &gt; 
&gt; &gt; Yeah, it does look like a different issue.  I&#39;ve never seen that one
&gt; &gt; before, I&#39;m not sure what&#39;s
&gt; &gt; going on there.  One thing you *might* want to try is setting the LANG
&gt; &gt; environment variable to
&gt; &gt; &#34;C&#34; or just the empty string and trying again.  I&#39;ve seen some
&gt; &gt; problems with the default locale
&gt; &gt; on RH that that usually fixes.
</div>&gt; 
&gt; Thanks; that&#39;s fixed that issue &#40;might be worth mentioning that tip in a
&gt; README perhaps?&#41;.
&gt; 
&gt; So, current state of play is:
&gt; M::B 0.2801:
&gt; OK on RHL9, FC1, FC2, RHEL3 with LANG=C
&gt; Fails &#40;@INC too long&#41; on RHEL4, FC3
&gt; OK on FC4, FC5
&gt; 
&gt; Paul.
&gt; 
</div>
I am experiencing the same exact behaviour.  On attempting to install
Module-Build-0.2801 on RHEL4 on a SunFire X4100 System &#40;SUN Dual
Opteron&#41; the test returns the following output:

Manifying blib/lib/Module/Build/Authoring.pod -&gt;
blib/libdoc/Module::Build::Authoring.3pm
Manifying blib/lib/Module/Build/Compat.pm -&gt;
blib/libdoc/Module::Build::Compat.3pm
[root@TDN1M27MGS0L Module-Build-0.2801]# LANG=&#34;C&#34; ./Build test
t/basic...........Warning: Removing existing directory
&#39;/tmp/test/Module-Build-0.2801/t/_tmp/Simple&#39;
t/basic...........ok
t/compat..........ok 2/60Couldn&#39;t run Build.PL: Argument list too long
at /tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.

#   Failed test in t/compat.t at line 180.
t/compat..........NOK 3
#   Failed test &#39;Makefile should exist&#39;
#   in t/compat.t at line 181.
t/compat..........NOK 4make: *** No targets specified and no makefile
found.  Stop.
t/compat..........NOK 5
#   Failed test in t/compat.t at line 56.
make: *** No rule to make target `test&#39;.  Stop.

t/compat..........NOK 6#   Failed test in t/compat.t at line 63.

#   Failed test in t/compat.t at line 64.
t/compat..........NOK 7#                   &#39;MAKE TEST
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:DONE\.|SUCCESS&#41;&#39;
make: *** No rule to make target `realclean&#39;.  Stop.

#   Failed test in t/compat.t at line 66.
t/compat..........NOK 8Couldn&#39;t run Build.PL: Argument list too long at
/tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.

#   Failed test in t/compat.t at line 180.

#   Failed test &#39;Makefile should exist&#39;
#   in t/compat.t at line 181.
t/compat..........NOK 10make: *** No rule to make target `realclean&#39;.  Stop.
t/compat..........ok 12/60Couldn&#39;t run Build.PL: Argument list too long
at /tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.

#   Failed test in t/compat.t at line 180.
t/compat..........NOK 13
#   Failed test &#39;Makefile should exist&#39;
t/compat..........NOK 14#   in t/compat.t at line 181.
make: *** No targets specified and no makefile found.  Stop.
t/compat..........NOK 15
#   Failed test in t/compat.t at line 56.
make: *** No rule to make target `test&#39;.  Stop.

#   Failed test in t/compat.t at line 63.

#   Failed test in t/compat.t at line 64.
#                   &#39;MAKE TEST
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:DONE\.|SUCCESS&#41;&#39;
t/compat..........NOK 17make: *** No rule to make target `realclean&#39;.  Stop.
t/compat..........NOK 18
#   Failed test in t/compat.t at line 66.
Couldn&#39;t run Build.PL: Argument list too long at
/tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.

#   Failed test in t/compat.t at line 180.
t/compat..........NOK 19
#   Failed test &#39;Makefile should exist&#39;
t/compat..........NOK 20#   in t/compat.t at line 181.
make: *** No rule to make target `realclean&#39;.  Stop.
t/compat..........ok 36/60
#   Failed test in t/compat.t at line 101.
#                   &#39;Couldn&#39;t run Build.PL: Argument list too long at
/tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:Foo/Builder.pm&#41;&#39;
t/compat..........ok 39/60
#   Failed test in t/compat.t at line 101.
#                   &#39;Couldn&#39;t run Build.PL: Argument list too long at
/tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:Foo/Builder.pm&#41;&#39;
t/compat..........ok 42/60Couldn&#39;t run Build.PL: Argument list too long
at /tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.
t/compat..........NOK 43
#   Failed test in t/compat.t at line 109.
t/compat..........ok 44/60Couldn&#39;t run Build.PL: Argument list too long
at /tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.

#   Failed test in t/compat.t at line 109.
t/compat..........NOK 45Couldn&#39;t run Build.PL: Argument list too long at
/tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.

#   Failed test in t/compat.t at line 126.
t/compat..........ok 47/60
t/compat..........NOK 48#   Failed test in t/compat.t at line 130.
#          got: &#39;site&#39;
#     expected: &#39;core&#39;

t/compat..........NOK 49#   Failed test in t/compat.t at line 131.
#          got: undef
#     expected: &#39;1&#39;

t/compat..........NOK 50#   Failed test in t/compat.t at line 132.
#          got: &#39;/usr/lib/perl5/site_perl/5.8.5&#39;
#     expected: &#39;/tmp/test/Module-Build-0.2801/t/libdir&#39;

t/compat..........NOK 51#   Failed test in t/compat.t at line 133.
#          got: undef
#     expected: &#39;-DPERL_POLLUTE&#39;
make: *** No rule to make target `test&#39;.  Stop.
t/compat..........NOK 52
#   Failed test in t/compat.t at line 138.
t/compat..........NOK 53
#   Failed test &#39;Should be verbose&#39;
#   in t/compat.t at line 140.
#                   &#39;# make test
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:&#40;?:# ok \d+\s+&#41;+&#41;&#39;
make: *** No rule to make target `test&#39;.  Stop.

t/compat..........NOK 54#   Failed test in t/compat.t at line 144.

t/compat..........NOK 55#   Failed test &#39;Should be non-verbose&#39;
#   in t/compat.t at line 146.
#                   &#39;# make test TEST_VERBOSE=0
# &#39;
#     doesn&#39;t match &#39;&#40;?-xism:&#40;?:# .+basic\.+ok\s+&#40;?:[\d.]+\s*m?s\s*&#41;?&#41;#
All tests&#41;&#39;
t/compat..........ok 56/60make: *** No rule to make target `realclean&#39;.
 Stop.
t/compat..........ok 58/60Couldn&#39;t run Build.PL: Argument list too long
at /tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Compat.pm line 200.

t/compat..........NOK 59#   Failed test in t/compat.t at line 168.
Use of uninitialized value in pattern match &#40;m//&#41; at t/compat.t line 169.
 at t/compat.t line 169
        eval &#39;
#line 169 t/compat.t
$test = $this =~ /$usable_regex/ ? 1 : 0
;&#39; called at /usr/lib/perl5/5.8.5/Test/Builder.pm line 751
        Test::Builder::_regex_ok&#40;&#39;Test::Builder=HASH&#40;0x6710c0&#41;&#39;,
&#39;undef&#39;, &#39;Regexp=SCALAR&#40;0xd297f0&#41;&#39;, &#39;!~&#39;, &#39;Tildes should be expanded&#39;&#41;
called at /usr/lib/perl5/5.8.5/Test/Builder.pm line 678
        Test::Builder::unlike&#40;&#39;Test::Builder=HASH&#40;0x6710c0&#41;&#39;, &#39;undef&#39;,
&#39;Regexp=SCALAR&#40;0xd297f0&#41;&#39;, &#39;Tildes should be expanded&#39;&#41; called at
/usr/lib/perl5/5.8.5/Test/More.pm line 390
        Test::More::unlike&#40;&#39;undef&#39;, &#39;Regexp=SCALAR&#40;0xd297f0&#41;&#39;, &#39;Tildes
should be expanded&#39;&#41; called at t/compat.t line 169
t/compat..........ok 60/60make: *** No rule to make target `realclean&#39;.
 Stop.
# Looks like you failed 30 tests of 60.
t/compat..........dubious
        Test returned status 30 &#40;wstat 7680, 0x1e00&#41;
DIED. FAILED tests 3-10, 13-20, 38, 41, 43, 45-46, 48-55, 59
        Failed 30/60 tests, 50.00% okay
t/destinations....ok
        8/113 skipped: various reasons
t/ext.............ok
t/extend..........ok
t/files...........ok
t/install.........ok
t/manifypods......ok
t/mbyaml..........ok
t/metadata........ok
t/metadata2.......ok
t/moduleinfo......ok
t/notes...........ok
t/parents.........ok
t/pod_parser......ok
t/ppm.............ok
t/runthrough......ok 13/32Can&#39;t exec &#34;/usr/bin/perl&#34;: Argument list too
long at /tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Base.pm line
3927.
Can&#39;t exec &#34;/usr/bin/perl&#34;: Argument list too long at
/tmp/test/Module-Build-0.2801/blib/lib/Module/Build/Base.pm line 3927.
t/runthrough......ok
        4/32 skipped: Windows only test
t/signature.......skipped
        all skipped: $ENV{TEST_SIGNATURE} is not set
t/tilde...........ok
t/versions........ok
t/xs..............ok
Failed Test Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/compat.t    30  7680    60   30  50.00%  3-10 13-20 38 41 43 45-46
48-55 59
1 test and 12 subtests skipped.
Failed 1/21 test scripts, 95.24% okay. 30/704 subtests failed, 95.74% okay.

This output is returned, regardless of whether the LANG environment
variable is set to &#34;C&#34; or the empty string.  Is there a workaround?

Best Regards
Steven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;06&nbsp;08:08:43&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This output is returned, regardless of whether the LANG environment
&gt; variable is set to &#34;C&#34; or the empty string.  Is there a workaround?
&gt; 
&gt; Best Regards
&gt; Steven
&gt; 
</div>

Steven - I&#39;m a perl newbie so just trying random things, but I got
around the problem by updating Test::Harness to latest version.

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;06&nbsp;08:29:13&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Howarth &lt;paul [...] city-fan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 06 08:08:43 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; This output is returned, regardless of whether the LANG environment
&gt; &gt; variable is set to &#34;C&#34; or the empty string.  Is there a workaround?
&gt; &gt; 
&gt; &gt; Best Regards
&gt; &gt; Steven
&gt; &gt; 
</div>&gt; 
&gt; 
&gt; Steven - I&#39;m a perl newbie so just trying random things, but I got
&gt; around the problem by updating Test::Harness to latest version.
</div>
Unfortunately this isn&#39;t a viable option for many RHEL users because
there isn&#39;t a clean, rpm-based way of doing this update - the
Test::Harness module is bundled in the Red Hat/Fedora perl rpm and so a
full update of that package would be needed.

Whilst the module could be done manually from source, it would lose the
benefits of the rpm package management database, dependency tracking etc.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;13&nbsp;00:03:26&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon May 22 07:19:52 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Whilst trying to update various boxes at $WORKPLACE, I&#39;ve found that I
&gt; can only get the testsuite to run in my RPM packages of Module::Build
&gt; in
&gt; Fedora Core 4 and 5. On older distributions, the testsuite fails in a
&gt; variety of different ways:
&gt; 
&gt; Fedora Core 3 &#40;perl 5.8.5&#41;:
&gt; Executing&#40;%check&#41;: /bin/sh -e /var/tmp/rpm-tmp.76939
&gt; + umask 022
&gt; + cd /nis-home/phowarth/BUILD/BUILD
&gt; + cd Module-Build-0.2801
&gt; + TEST_SIGNATURE=0
&gt; + ./Build test
&gt; t/basic...........ok
&gt; t/compat..........ok 2/60Couldn&#39;t run Build.PL: Argument list too long
&gt; at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 3#     Failed test &#40;t/compat.t at line 180&#41;
&gt; t/compat..........NOK 4#     Failed test &#40;t/compat.t at line 181&#41;
&gt; make: *** No targets specified and no makefile found.  Stop.
&gt; t/compat..........NOK 5#     Failed test &#40;t/compat.t at line 56&#41;
&gt; make: *** No rule to make target `test&#39;.  Stop.
&gt; t/compat..........NOK 6#     Failed test &#40;t/compat.t at line 63&#41;
&gt; t/compat..........NOK 7#     Failed test &#40;t/compat.t at line 64&#41;
&gt; #                   &#39;MAKE TEST
&gt; # &#39;
&gt; #     doesn&#39;t match &#39;&#40;?-xism:DONE\.|SUCCESS&#41;&#39;
&gt; make: *** No rule to make target `realclean&#39;.  Stop.
&gt; t/compat..........NOK 8#     Failed test &#40;t/compat.t at line 66&#41;
&gt; Couldn&#39;t run Build.PL: Argument list too long at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 9#     Failed test &#40;t/compat.t at line 180&#41;
&gt; t/compat..........NOK 10#     Failed test &#40;t/compat.t at line 181&#41;
&gt; make: *** No rule to make target `realclean&#39;.  Stop.
&gt; t/compat..........ok 12/60Couldn&#39;t run Build.PL: Argument list too
&gt; long
&gt; at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 13#     Failed test &#40;t/compat.t at line 180&#41;
&gt; t/compat..........NOK 14#     Failed test &#40;t/compat.t at line 181&#41;
&gt; make: *** No targets specified and no makefile found.  Stop.
&gt; t/compat..........NOK 15#     Failed test &#40;t/compat.t at line 56&#41;
&gt; make: *** No rule to make target `test&#39;.  Stop.
&gt; t/compat..........NOK 16#     Failed test &#40;t/compat.t at line 63&#41;
&gt; t/compat..........NOK 17#     Failed test &#40;t/compat.t at line 64&#41;
&gt; #                   &#39;MAKE TEST
&gt; # &#39;
&gt; #     doesn&#39;t match &#39;&#40;?-xism:DONE\.|SUCCESS&#41;&#39;
&gt; make: *** No rule to make target `realclean&#39;.  Stop.
&gt; t/compat..........NOK 18#     Failed test &#40;t/compat.t at line 66&#41;
&gt; Couldn&#39;t run Build.PL: Argument list too long at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 19#     Failed test &#40;t/compat.t at line 180&#41;
&gt; t/compat..........NOK 20#     Failed test &#40;t/compat.t at line 181&#41;
&gt; make: *** No rule to make target `realclean&#39;.  Stop.
&gt; t/compat..........NOK 38#     Failed test &#40;t/compat.t at line 101&#41;
&gt; #                   &#39;Couldn&#39;t run Build.PL: Argument list too long at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; # &#39;
&gt; #     doesn&#39;t match &#39;&#40;?-xism:Foo/Builder.pm&#41;&#39;
&gt; t/compat..........NOK 41#     Failed test &#40;t/compat.t at line 101&#41;
&gt; #                   &#39;Couldn&#39;t run Build.PL: Argument list too long at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; # &#39;
&gt; #     doesn&#39;t match &#39;&#40;?-xism:Foo/Builder.pm&#41;&#39;
&gt; t/compat..........ok 42/60Couldn&#39;t run Build.PL: Argument list too
&gt; long
&gt; at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 43#     Failed test &#40;t/compat.t at line 109&#41;
&gt; t/compat..........ok 44/60Couldn&#39;t run Build.PL: Argument list too
&gt; long
&gt; at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 45#     Failed test &#40;t/compat.t at line 109&#41;
&gt; Couldn&#39;t run Build.PL: Argument list too long at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 46#     Failed test &#40;t/compat.t at line 126&#41;
&gt; t/compat..........NOK 48#     Failed test &#40;t/compat.t at line 130&#41;
&gt; #          got: &#39;site&#39;
&gt; #     expected: &#39;core&#39;
&gt; t/compat..........NOK 49#     Failed test &#40;t/compat.t at line 131&#41;
&gt; #          got: undef
&gt; #     expected: &#39;1&#39;
&gt; t/compat..........NOK 50#     Failed test &#40;t/compat.t at line 132&#41;
&gt; #          got: &#39;/usr/lib/perl5/site_perl/5.8.5&#39;
&gt; #     expected:
&gt; &#39;/nis-home/phowarth/BUILD/BUILD/Module-Build-0.2801/t/libdir&#39;
&gt; t/compat..........NOK 51#     Failed test &#40;t/compat.t at line 133&#41;
&gt; #          got: undef
&gt; #     expected: &#39;-DPERL_POLLUTE&#39;
&gt; make: *** No rule to make target `test&#39;.  Stop.
&gt; t/compat..........NOK 52#     Failed test &#40;t/compat.t at line 138&#41;
&gt; t/compat..........NOK 53#     Failed test &#40;t/compat.t at line 140&#41;
&gt; #                   &#39;# make test
&gt; # &#39;
&gt; #     doesn&#39;t match &#39;&#40;?-xism:&#40;?:# ok \d+\s+&#41;+&#41;&#39;
&gt; make: *** No rule to make target `test&#39;.  Stop.
&gt; t/compat..........NOK 54#     Failed test &#40;t/compat.t at line 144&#41;
&gt; t/compat..........NOK 55#     Failed test &#40;t/compat.t at line 146&#41;
&gt; #                   &#39;# make test TEST_VERBOSE=0
&gt; # &#39;
&gt; #     doesn&#39;t match &#39;&#40;?-xism:&#40;?:#
&gt; .+basic\.+ok\s+&#40;?:[\d.]+\s*m?s\s*&#41;?&#41;#
&gt; All tests&#41;&#39;
&gt; t/compat..........ok 56/60make: *** No rule to make target
&gt; `realclean&#39;.
&gt;  Stop.
&gt; t/compat..........ok 58/60Couldn&#39;t run Build.PL: Argument list too
&gt; long
&gt; at
&gt; /nis-home/phowarth/BUILD/BUILD/Module-Build-
&gt; 0.2801/blib/lib/Module/Build/Compat.pm
&gt; line 200.
&gt; t/compat..........NOK 59#     Failed test &#40;t/compat.t at line 168&#41;
&gt; t/compat..........ok 60/60make: *** No rule to make target
&gt; `realclean&#39;.
&gt;  Stop.
&gt; # Looks like you failed 30 tests of 60.
&gt; t/compat..........dubious
&gt;         Test returned status 30 &#40;wstat 7680, 0x1e00&#41;
&gt; DIED. FAILED tests 3-10, 13-20, 38, 41, 43, 45-46, 48-55, 59
&gt;         Failed 30/60 tests, 50.00% okay
&gt; 
&gt; 
&gt; Red Hat Linux 9 &#40;perl 5.8.0&#41;
&gt; Executing&#40;%check&#41;: /bin/sh -e /var/tmp/rpm-tmp.92020
&gt; + umask 022
&gt; + cd /nis-home/phowarth/BUILD/BUILD
&gt; + cd Module-Build-0.2801
&gt; + TEST_SIGNATURE=0
&gt; + ./Build test
&gt; Can&#39;t locate the perl binary used to run this script in &#40;/usr/bin
&gt; /usr/bin /usr/bin /usr/local/bin /usr/kerberos/bin /bin /usr/bin
&gt; /usr/X11R6/bin&#41;
&gt; error: Bad exit status from /var/tmp/rpm-tmp.92020 &#40;%check&#41;
&gt; 
&gt; 
&gt; RPM build errors:
&gt;     Bad exit status from /var/tmp/rpm-tmp.92020 &#40;%check&#41;
&gt; 
&gt; 
&gt; Unfortunately my perl skills aren&#39;t sufficiently honed for me to be
&gt; able
&gt; to diagnose these issues myself. In all cases though, the only perl on
&gt; the system is /usr/bin/perl.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;20&nbsp;13:43:39&nbsp;2006</span>
    <span class="description">john-perl [...] o-rourke.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun May 28 15:26:13 2006, KWILLIAMS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This bug has reared its ugly head before.  The problem is that RH-FC
&gt; installs its perl RPMs with
&gt; hugely long @INC paths, and when we pass this path on the command line
&gt; in various places in
&gt; M::B, it&#39;s too long for the shell.
</div>
I&#39;ve notice it &#40;or something&#41; seems to be taking each element of @INC,
and adding several variations of it - almost like something does:

@INC = map { $_, &#34;$_/5.8.1&#34;, &#34;$_/5.8.2&#34;, &#34;$_/5.8.3&#34; etc }&#40; @INC &#41;;

I&#39;m not sure what&#39;s doing this but it means @INC grows exponentially.

I noticed this because I have a module called Foo which overrode the
M::B test &#39;Foo&#39; package, but failed on a &#39;use&#39;, and so listed @INC.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;21&nbsp;02:23:37&nbsp;2006</span>
    <span class="description">john-perl [...] o-rourke.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found a workaround on FC3... yum install perl-Module-Build - not the
latest version but was enough for me to install Log::Dispatch, which is
what I was trying to install!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;22&nbsp;06:25:18&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Failed Test Stat Wstat Total Fail  Failed  List of Failed
&gt;
</div>-------------------------------------------------------------------------------
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t/compat.t    30  7680    60   30  50.00%  3-10 13-20 38 41 43 45-46
&gt; 48-55 59
&gt; 1 test and 12 subtests skipped.
&gt; Failed 1/21 test scripts, 95.24% okay. 30/704 subtests failed, 95.74%
&gt; okay.
&gt; 
&gt; This output is returned, regardless of whether the LANG environment
&gt; variable is set to &#34;C&#34; or the empty string.  Is there a workaround?
&gt; 
&gt; Best Regards
&gt; Steven
&gt; 
</div>
I have exactly the same problem here, under Redhat Enterprise Linux ES
4. I tried the different tricks that have apparently worked for others,
like setting the environment variables LC_ALL or LANG to C, but it did
not help at all.

Is there a patch we can apply? This problem is specific to Redhat. I did
the same job under FreeBSD 6.1 just before, without any problem.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;03&nbsp;09:47:55&nbsp;2006</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> MATISSE [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I ran into this bug yesterday on a Redhat Enterprise AS system - the
most recent version I think - which has perl 5.8.5 with the ultra-long @INC.
I compiled my own copy of Perl 5.8.8 from source, and M::B built without
error using that Perl, which has a &#34;normal&#34; @INC.

The next issue for me is to see if a patch could be created for M::B to
work around this problem, or if I need to build my own Perl for this
machine.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;01&nbsp;11:56:34&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> MATISSE [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve been able to work on this a bit between other tasks, and have a
crude hack that goes some way to fixing the problem - although not
completely. I&#39;ll add another comment with a patch later today or tomorrow.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;01&nbsp;11:57:46&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;01&nbsp;13:09:36&nbsp;2007</span>
    <span class="description">paul [...] city-fan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #19406] Test suite fails in various ways on old Red Hat/Fedora distributions</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 01 Feb 2007 18:09:12 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Paul Howarth &lt;paul [...] city-fan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, 2007-02-01 at 11:56 -0500, via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=19406">http://rt.cpan.org/Ticket/Display.html?id=19406</a></span> &gt;
&gt; 
&gt; I&#39;ve been able to work on this a bit between other tasks, and have a
&gt; crude hack that goes some way to fixing the problem - although not
&gt; completely. I&#39;ll add another comment with a patch later today or tomorrow.
</div>
Strangely enough M::B 0.2806 is running just fine on all the
distributions I&#39;ve tried as long as the test suite is run using the &#34;C&#34;
locale; is the patch a fix for other locales?

Paul.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;01&nbsp;22:10:15&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> MATISSE [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 01 13:09:36 2007, paul@city-fan.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Strangely enough M::B 0.2806 is running just fine on all the
&gt; distributions I&#39;ve tried as long as the test suite is run using the &#34;C&#34;
&gt; locale; is the patch a fix for other locales?
&gt; 
&gt; Paul.
&gt; 
</div>
I&#39;ve tried building 0.2805 after setting LANG=C and still get the problem.
But maybe that&#39;s not what I need to do?

% export LANG=C
% locale
LANG=C
LC_CTYPE=&#34;C&#34;
LC_NUMERIC=&#34;C&#34;
LC_TIME=&#34;C&#34;
LC_COLLATE=&#34;C&#34;
LC_MONETARY=&#34;C&#34;
LC_MESSAGES=&#34;C&#34;
LC_PAPER=&#34;C&#34;
LC_NAME=&#34;C&#34;
LC_ADDRESS=&#34;C&#34;
LC_TELEPHONE=&#34;C&#34;
LC_MEASUREMENT=&#34;C&#34;
LC_IDENTIFICATION=&#34;C&#34;
LC_ALL=

The attached patch is *NOT* a proper fix, merely something that begins
to point the way towards a proper fix.

BTW: I&#39;m on RHE Linux:
Linux rdclxsrv184 2.6.9-34.ELsmp #1 SMP Fri Feb 24 16:56:28 EST 2006
x86_64 x86_64 x86_64 GNU/Linux

Perl  v5.8.5 built for x86_64-linux-thread-multi
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ruw Module-Build-0.2805/lib/Module/Build/Base.pm Module-Build-0.2805.testing/lib/Module/Build/Base.pm
--- Module-Build-0.2805/lib/Module/Build/Base.pm        2006-07-29 20:07:23.000000000 -0700
+++ Module-Build-0.2805.testing/lib/Module/Build/Base.pm        2006-12-18 16:43:19.000000000 -0800
@@ -1288,8 +1288,21 @@
   my $self = shift;

   my %seen;
-  $seen{$_}++ foreach $self-&gt;_default_INC;
-  return grep !$seen{$_}++, @INC;
+  foreach my $path &#40; $self-&gt;_default_INC &#41; {
+      $seen{$path}++;
+  }
+  my @added_to_inc;
+  foreach my $path &#40; @INC &#41; {
+      if &#40; ! exists $seen{$path} &#41; {
+          if &#40; -d $path &#41; {
+              push @added_to_inc, $path;
+          }
+          $seen{$path} = 1;
+      }
+  }
+  unshift @added_to_inc, &#39;lib&#39;, &#39;t/lib&#39;;
+
+  return @added_to_inc;
 }

 # Determine the default @INC for this Perl
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;04&nbsp;00:28:42&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">here&#39;s the patch I attached to the last reply - for some reason it was
uploaded as &#34;application/octet-stream&#34; instead of text/plain

The idea here is to remove paths from @INC that point to non-existent
directories. This isn&#39;t a good fix because some directories such as 
lib/blib  should be in @INC but will not exist until later in the build
process.

diff -ruw Module-Build-0.2805/lib/Module/Build/Base.pm
Module-Build-0.2805.testing/lib/Module/Build/Base.pm
--- Module-Build-0.2805/lib/Module/Build/Base.pm        2006-07-29
20:07:23.000000000 -0700
+++ Module-Build-0.2805.testing/lib/Module/Build/Base.pm       
2006-12-18 16:43:19.000000000 -0800
@@ -1288,8 +1288,21 @@
   my $self = shift;

   my %seen;
-  $seen{$_}++ foreach $self-&gt;_default_INC;
-  return grep !$seen{$_}++, @INC;
+  foreach my $path &#40; $self-&gt;_default_INC &#41; {
+      $seen{$path}++;
+  }
+  my @added_to_inc;
+  foreach my $path &#40; @INC &#41; {
+      if &#40; ! exists $seen{$path} &#41; {
+          if &#40; -d $path &#41; {
+              push @added_to_inc, $path;
+          }
+          $seen{$path} = 1;
+      }
+  }
+  unshift @added_to_inc, &#39;lib&#39;, &#39;t/lib&#39;;
+
+  return @added_to_inc;
 }
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;04&nbsp;00:35:54&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Doh!

I just saw the Change log for M::B 0.2806 and saw this:

 - On some systems &#40;haven&#39;t identified the actual problem yet&#41;
   $ENV{PERL5LIB} can grow to enormous enough sizes that we can&#39;t
   launch any more subprocesses because the environment table is full.
   This is the now-infamous &#34;Couldn&#39;t run Build.PL: Argument list too
   long&#34; error.  Now we detect such situations and trim the directory
   list to only include directories that actually exist, listed only
   once each.  Not the ideal solution, but it should work.

so I see that Ken took a similar approach as the patch I uploaded - i
need to retest on our system using 0.2806
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;08&nbsp;13:57:54&nbsp;2007</span>
    <span class="description">matisse [...] spamcop.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> MATISSE [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Seems fixed in 0.2806

I tested Module-Build-0.2806 with Perl 5.8.5 in Red Hat Enterprise Linux
rdclxsrv184 2.6.9-34.ELsmp #1 SMP Fri Feb 24 16:56:28 EST 2006 x86_64
x86_64 x86_64 GNU/Linux

I think this bug can be marked closed, fixed in 0.2806
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;22:01:59&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Subject changed from &#39;Test suite fails in various ways on old Red Hat/Fedora distributions&#39; to &#39;argument list too long &#40;Red Hat and derivatives&#41;&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;22:11:13&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 08 13:57:54 2007, MATISSE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tested Module-Build-0.2806 with Perl 5.8.5 in Red Hat Enterprise 
</div>Linux
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; rdclxsrv184 2.6.9-34.ELsmp #1 SMP Fri Feb 24 16:56:28 EST 2006 
</div>x86_64
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I think this bug can be marked closed, fixed in 0.2806
</div>
Thank you for reporting back.

This ticket also consolidates the following two tickets:

    <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=23834">http://rt.cpan.org/Ticket/Display.html?id=23834</a></span>
    <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=21870">http://rt.cpan.org/Ticket/Display.html?id=21870</a></span>

Also see:

  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.module.build/2006/07/msg201.html">http://www.nntp.perl.org/group/perl.module.build/2006/07/msg201.html</a></span>
  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.module.build/2006/12/msg461.html">http://www.nntp.perl.org/group/perl.module.build/2006/12/msg461.html</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;22:11:15&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;22:11:31&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Fixed in 0.2806 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
