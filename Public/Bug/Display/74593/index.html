<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #74593 for Parse-RecDescent: Recent changes break Module::ExtractUse and its dependents</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #74593 for Parse-RecDescent: Recent changes break Module::ExtractUse and its dependents</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Parse-RecDescent/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Parse-RecDescent/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Parse-RecDescent/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Parse-RecDescent/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Parse-RecDescent">Parse-RecDescent CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">74593</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Parse-RecDescent/Active/">Parse-RecDescent</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mjgardner [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
domm [...] zsi.at

<br />
PLOBBES [...] cpan.org

<br />
ribasushi [...] leporine.io

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-24792-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.966_002    </td>
  </tr>
  <tr id="CF-24793-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;01&nbsp;13:00:21&nbsp;2012</span>
    <span class="description">mjgardner [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> domm [...] zsi.at</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Recent changes break Module::ExtractUse and its dependents</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Most of Module::ExtractUse&#39;s tests fail with Parse::RecDescent
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;=1.966_002.  M::E&#39;s dependents include Module::CPANTS::Analyse, so a
</div>lot of CPAN and Kwalitee tests now fail too.

I understand if this is more an issue with Module::ExtractUse than
Parse::RecDescent, but the former hasn&#39;t been updated since 2008 so I
thought I&#39;d start here.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;01&nbsp;21:25:14&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the report.  Module::ExtractUse ships with a pre-compiled
grammar.  Unfortunately, I did change some of the internal functions of
Parse::Descent, and those are used by the pre-compiled grammar.  I&#39;ve
confirmed that Module::ExtractUse does pass its own tests if the grammar
is re-compiled.  

Long term, the right solution is probably to have pre-compiled grammars
not take any dependency on Parse::RecDescent.

Short term, users should probably either downgrade Parse::RecDescent, or
should recompile Module::ExtractUse&#39;s grammar before running make.  Not
an ideal situation, I know.

Let me think about how to best solve this and get back to you.

Jeremy

On Wed Feb 01 13:00:21 2012, MJGARDNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Most of Module::ExtractUse&#39;s tests fail with Parse::RecDescent
<div class="message-stanza open">&gt; &gt;=1.966_002.  M::E&#39;s dependents include Module::CPANTS::Analyse, so a
</div>&gt; lot of CPAN and Kwalitee tests now fail too.
&gt; 
&gt; I understand if this is more an issue with Module::ExtractUse than
&gt; Parse::RecDescent, but the former hasn&#39;t been updated since 2008 so I
&gt; thought I&#39;d start here.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;01&nbsp;21:25:15&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;05&nbsp;15:57:24&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve posted a patch for Module::ExtractUse that will Precompile the
parser during the build process, avoiding this issue:
    <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74688">https://rt.cpan.org/Ticket/Display.html?id=74688</a></span>

The issue can always reoccur if Parse::RecDescent is upgraded after
installing a precompiled parser.  I&#39;ve prepared some changes to the
Precompilation step that will remove the dependency on
Parse::RecDescent, preventing the issue from happening with Precompiled
parsers in the future.  Those changes should be present in a future release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;01&nbsp;23:16:19&nbsp;2012</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In case anyone else is interested, here is a list of more related tickets 
on how the unfortunately non-backwards compatible changes have broken 
other modules:

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74733">https://rt.cpan.org/Ticket/Display.html?id=74733</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74618">https://rt.cpan.org/Ticket/Display.html?id=74618</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74637">https://rt.cpan.org/Ticket/Display.html?id=74637</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74640">https://rt.cpan.org/Ticket/Display.html?id=74640</a></span>

Any thoughts about keeping &#40;or adding back in&#41; backwards compatibility for 
a release or two instead of just pulling the rug out of others that use 
this Parse::RecDescent?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;01&nbsp;23:17:32&nbsp;2012</span>
    <span class="description">PLOBBES [...] cpan.org -  Cc PLOBBES added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;02&nbsp;00:11:54&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, I&#39;m interested.

Let me think about it over the weekend.  I&#39;m certainly open to it,
though it will be challenging to maintain backwards compatibility for
P:RD&#39;s internals.  Adding backwards-compatibility back in will either
hurt performance, require two copies of the internals to be maintained,
or re-introduce other parsing bugs that were fixed.  None of which are
good options.

Is there a better way to reach out to the users of Parse::RecDescent to
get them to update their modules to use the standalone parsing
feature&#40;s&#41;?  Did you just search rt.cpan.org for &#34;Parse::RecDescent&#34; and
fails, or am I not on a critical mailing list where these are getting
discussed?

Jeremy

On Thu Mar 01 23:16:19 2012, PLOBBES wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In case anyone else is interested, here is a list of more related tickets 
&gt; on how the unfortunately non-backwards compatible changes have broken 
&gt; other modules:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74733">https://rt.cpan.org/Ticket/Display.html?id=74733</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74618">https://rt.cpan.org/Ticket/Display.html?id=74618</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74637">https://rt.cpan.org/Ticket/Display.html?id=74637</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74640">https://rt.cpan.org/Ticket/Display.html?id=74640</a></span>
&gt; 
&gt; Any thoughts about keeping &#40;or adding back in&#41; backwards compatibility
</div>for 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; a release or two instead of just pulling the rug out of others that use 
&gt; this Parse::RecDescent?
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;02&nbsp;16:59:35&nbsp;2012</span>
    <span class="description">phil [...] perkpartners.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #74593] Recent changes break Module::ExtractUse and its dependents</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 02 Mar 2012 16:58:25 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-RecDescent [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Phil Lobbes &lt;phil [...] perkpartners.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is there a better way to reach out to the users of Parse::RecDescent
&gt; to get them to update their modules to use the standalone parsing
&gt; feature&#40;s&#41;?
</div>
No idea.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Did you just search rt.cpan.org for &#34;Parse::RecDescent&#34; and fails, or
&gt; am I not on a critical mailing list where these are getting discussed?
</div>
I just did a quick google search and looked at similar new/open bugs.
Then did a quick search on rt.cpan.org with the search term &#34;recdescent&#34;
and you&#39;ll find these recent bugs:

74637   Fails with Parse::RecDescent &gt;= 1.966_002       Cindy
74640   Fails with Parse::RecDescent &gt;= 1.966_002       CSS
74733   Fails with Parse::RecDescent &gt;= 1.966_002       Mail-IMAPClient
74879   Failures due to Parse::RecDescent changes       Module-ExtractUse
75130   Minimum requirement for Parse::RecDescent seems to be 1.966002
75334   Fails with Parse::RecDescent &gt;= 1.967003        Lingua-Phonology

Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;02&nbsp;17:43:35&nbsp;2012</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> domm [...] zsi.at, phil [...] perkpartners.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Mar 02 16:59:35 2012, phil@perkpartners.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Is there a better way to reach out to the users of Parse::RecDescent
&gt; &gt; to get them to update their modules to use the standalone parsing
&gt; &gt; feature&#40;s&#41;?
</div>&gt; 
&gt; No idea.
&gt; 
<div class="message-stanza open">&gt; &gt; Did you just search rt.cpan.org for &#34;Parse::RecDescent&#34; and fails, or
&gt; &gt; am I not on a critical mailing list where these are getting discussed?
</div>&gt; 
&gt; I just did a quick google search and looked at similar new/open bugs.
&gt; Then did a quick search on rt.cpan.org with the search term &#34;recdescent&#34;
&gt; and you&#39;ll find these recent bugs:
&gt; 
&gt; 74637 Fails with Parse::RecDescent &gt;= 1.966_002       Cindy
&gt; 74640 Fails with Parse::RecDescent &gt;= 1.966_002       CSS
&gt; 74733 Fails with Parse::RecDescent &gt;= 1.966_002       Mail-IMAPClient
&gt; 74879 Failures due to Parse::RecDescent changes       Module-ExtractUse
&gt; 75130 Minimum requirement for Parse::RecDescent seems to be 1.966002
&gt; 75334 Fails with Parse::RecDescent &gt;= 1.967003        Lingua-Phonology
&gt; 
&gt; Phil
</div>
You might want to look at this list:

<span class="clickylink"><a target="new" rel="nofollow" href="http://deps.cpantesters.org/depended-on-by.pl?module=Parse%3A%3ARecDescent">http://deps.cpantesters.org/depended-on-by.pl?module=Parse%3A%3ARecDescent</a></span>

It includes all distributions that depend on Parse::RecDescent.  They would have to be tested 
individually to see whether they are broken by the new release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;13&nbsp;00:22:57&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I looked into this some tonight, and I can&#39;t exactly tell what&#39;s going
on yet.  Thank you for your patience.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;13&nbsp;00:38:18&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Mar 13 00:22:57 2012, jtbraun wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I looked into this some tonight, and I can&#39;t exactly tell what&#39;s going
&gt; on yet.  Thank you for your patience.
</div>
I spoke too soon.  Two things happened:

1.966_002 introduced some extra arguments to internal rules/functions
&#40;this was probably the first break&#41;.  I think that this is easily fixed
by swapping the argument ordering around.

Recent namespace cleanup improvements cause instances of precompiled
parsers to delete their own namespaces &#40;preventing future parse calls&#41;.
 This is typically guarded against by precompiled parsers setting their
$self-&gt;{_precompiled} flag.  For some reason Module::ExtractUse doesn&#39;t
have this flag set, likely M::EU pre-dates this change to P::RD.  I can
add an extra guard around that, and more of the test cases begin to work.

I&#39;ll work through the rest of the failures this week and see if I can
come up with a comprehensive strategy for fixing these errors, as well
as providing some sort of warning to users of modules dependent on
Parse::RecDescent that older precompiled modules will break in the future.

Jeremy
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;14&nbsp;01:43:24&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you so much for the bug report.  Two prior bug fixes contributed
to the problem.  I&#39;ve checked that Module::ExtractUse and
Mail::IMAPClient now pass &#39;make test&#39; against Parse::RecDescent 1.967_008.

Once this passes muster w/ CPAN Testers, I&#39;ll update a non-dev release
to CPAN.

You can find the fix here:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jtbraun/Parse-RecDescent/commit/8b4f6daab2e55f8169afe0bd64f7a6b31a58b12c">https://github.com/jtbraun/Parse-RecDescent/commit/8b4f6daab2e55f8169afe0bd64f7a6b31a58b12c</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;14&nbsp;01:43:25&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;19&nbsp;12:24:08&nbsp;2012</span>
    <span class="description">PLOBBES [...] cpan.org -  Reference by ticket #74733 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;28&nbsp;13:56:05&nbsp;2012</span>
    <span class="description">PLOBBES [...] cpan.org -  Reference by ticket #74733 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;28&nbsp;11:26:43&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 14 01:43:24 2012, jtbraun wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you so much for the bug report.  Two prior bug fixes contributed
&gt; to the problem.  I&#39;ve checked that Module::ExtractUse and
&gt; Mail::IMAPClient now pass &#39;make test&#39; against Parse::RecDescent
&gt; 1.967_008.
&gt; 
&gt; Once this passes muster w/ CPAN Testers, I&#39;ll update a non-dev release
&gt; to CPAN.
</div>
Hi!

I would like to clarify if this backwards compatibility will be retained
in the future or this is a temporary &#34;being nice&#34; kind of thing. In
particular will the following scenario work:

t1: User installs SQL::Translator with grammars precompiled at
dist-build time using the *author*&#39;s P::RD v1.967009. At the same time
user has a P::RD v1.965001 on their machine, which happens to satisfy
the SQL::Translator requirements - this scenario currently works - will
it work in the future?

t2: At a later stage a user install some module X, which pulls in a &#40;at
the time available&#41; P::RD v1.989000. Will the grammars compiled with
v1.967009 continue to work? Or will there be imexplicabale breakage?

If any of the above is in fact a problem - is there a way to tell *what*
generated a grammar, so that if the grammar version and the currently
installed P::RD version do not match, things will revert to
compile-on-demand?

The reason for this question is that SQL::Translator *almost* started
shipping precompiled grammars, but then backed out the changes given the
turbulence of Parse::RecDescent. Currently the state is as follows:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dbsrgits/sql-translator/commit/0eb3b94a5">https://github.com/dbsrgits/sql-translator/commit/0eb3b94a5</a></span> . What would
your recommendation be, if the priorities are to not break the users
code by a drive-by upgrade?

Thanks!

P.S. Sorry for reopening this ticket, it seemed the best place to
continue this discussion.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;28&nbsp;11:26:44&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;30&nbsp;12:54:15&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Cc RIBASUSHI added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;05&nbsp;01:18:36&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Peter, thank you for your patience while I got back to you.

First off, let me assure you that I have no interest in breaking current
uses of P::RD.  I have every intention of preserving the current
behavior of the module, while improving the interface and performance.

I would recommend against using the current version &#40;v1.967009&#41; of
standalone parsers with SQL::Translator.  The standalone parsers
generated with this version will end up including most of P::RD as the
package Parse::RecDescent::_Runtime.  This works to isolate your module
from future changes to P::RD, and against past implementations of P::RD.
 But if your user &#39;use&#39;s your precompiled parser with someone else&#39;s
precompiled parser, they will end up with numerous redefinitions of
functions in the &#34;Parse::RecDescent::_Runtime&#34; namespace.  Annoying.

I&#39;ve pushed some modifications to the standalone precompiled parser
generator
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jtbraun/Parse-RecDescent/commit/21f9ad82aba94ee05b806b4e99f21e6d1dc47e4b&#41;">https://github.com/jtbraun/Parse-RecDescent/commit/21f9ad82aba94ee05b806b4e99f21e6d1dc47e4b&#41;</a></span>
to github.  It allows you to do two things:
1. Declare the package name where P::RD&#39;s internals are copied to, so
that it avoids the redefinition problem above.
2. Change the name of the Parse::RecDescent dependencies to the package
from &#40;1&#41;, without including P::RD.  This will be of particular interest
to you, as you&#39;ll want to include a single copy of the P::RD run-time as
SQL::Translator::ParseRD::_Runtime &#40;or equivalent&#41;, as well as reference
that package from each of your parsers.

I&#39;d appreciate your assistance in vetting this feature, as
SQL::Translator is the only module I know of that would be shipping
multiple pre-compiled parsers.

t2: My intention is that precompiled _standalone_ parsers should be 100%
independent of the P::RD installed on the system.  Standalone parsers
should not &#39;use&#39; or &#39;require&#39; P::RD.  The only dependencies will be on:
1. The P::RD installed on the module maintainer&#39;s machine when they
compile the standalone parser.
2. The P::RD installed on the user&#39;s machine at module build/install
time, when that module&#39;s build process creates the standalone parsers.

I do not believe that there is currently a way to determine which
version of P::RD precompiled a given parser.  I&#39;ve filed RT#77001 to
track adding this.

No worries about re-opening the ticket.  I&#39;m excited to see P::RD
improve, and I&#39;m rather embarrassed that I broke so many modules by
changing the calling convention of &#38;_parserepeat.  I _REALLY_ appreciate
any testing help or suggestions you can provide to ensure that my and
your users are not adversely impacted by the changes I&#39;m making to P::RD.

Please take a look at the most recent changes to P::RD on github, and
let me know if the interface works for you.  Once we agree on an
implementation, I&#39;ll push out a release on PAUSE.

Jeremy


On Sat Apr 28 11:26:43 2012, RIBASUSHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 14 01:43:24 2012, jtbraun wrote:
<div class="message-stanza open">&gt; &gt; Thank you so much for the bug report.  Two prior bug fixes contributed
&gt; &gt; to the problem.  I&#39;ve checked that Module::ExtractUse and
&gt; &gt; Mail::IMAPClient now pass &#39;make test&#39; against Parse::RecDescent
&gt; &gt; 1.967_008.
&gt; &gt; 
&gt; &gt; Once this passes muster w/ CPAN Testers, I&#39;ll update a non-dev release
&gt; &gt; to CPAN.
</div>&gt; 
&gt; Hi!
&gt; 
&gt; I would like to clarify if this backwards compatibility will be retained
&gt; in the future or this is a temporary &#34;being nice&#34; kind of thing. In
&gt; particular will the following scenario work:
&gt; 
&gt; t1: User installs SQL::Translator with grammars precompiled at
&gt; dist-build time using the *author*&#39;s P::RD v1.967009. At the same time
&gt; user has a P::RD v1.965001 on their machine, which happens to satisfy
&gt; the SQL::Translator requirements - this scenario currently works - will
&gt; it work in the future?
&gt; 
&gt; t2: At a later stage a user install some module X, which pulls in a &#40;at
&gt; the time available&#41; P::RD v1.989000. Will the grammars compiled with
&gt; v1.967009 continue to work? Or will there be imexplicabale breakage?
&gt; 
&gt; If any of the above is in fact a problem - is there a way to tell *what*
&gt; generated a grammar, so that if the grammar version and the currently
&gt; installed P::RD version do not match, things will revert to
&gt; compile-on-demand?
&gt; 
&gt; The reason for this question is that SQL::Translator *almost* started
&gt; shipping precompiled grammars, but then backed out the changes given the
&gt; turbulence of Parse::RecDescent. Currently the state is as follows:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dbsrgits/sql-translator/commit/0eb3b94a5">https://github.com/dbsrgits/sql-translator/commit/0eb3b94a5</a></span> . What would
&gt; your recommendation be, if the priorities are to not break the users
&gt; code by a drive-by upgrade?
&gt; 
&gt; Thanks!
&gt; 
&gt; P.S. Sorry for reopening this ticket, it seemed the best place to
&gt; continue this discussion.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;09&nbsp;01:04:06&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat May 05 01:18:36 2012, jtbraun wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Peter, thank you for your patience while I got back to you.
&gt; 
&gt; First off, let me assure you that I have no interest in breaking
&gt; current
&gt; uses of P::RD.  I have every intention of preserving the current
&gt; behavior of the module, while improving the interface and performance.
</div>
That&#39;s great to hear!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would recommend against using the current version &#40;v1.967009&#41; of
&gt; standalone parsers with SQL::Translator.  The standalone parsers
&gt; generated with this version will end up including most of P::RD as the
&gt; package Parse::RecDescent::_Runtime.  This works to isolate your
&gt; module
&gt; from future changes to P::RD, and against past implementations of
&gt; P::RD.
&gt;  But if your user &#39;use&#39;s your precompiled parser with someone else&#39;s
&gt; precompiled parser, they will end up with numerous redefinitions of
&gt; functions in the &#34;Parse::RecDescent::_Runtime&#34; namespace.  Annoying.
</div>
Right.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve pushed some modifications to the standalone precompiled parser
&gt; generator
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/jtbraun/Parse-">https://github.com/jtbraun/Parse-</a></span>
&gt; RecDescent/commit/21f9ad82aba94ee05b806b4e99f21e6d1dc47e4b&#41;
&gt; to github.  It allows you to do two things:
&gt; 1. Declare the package name where P::RD&#39;s internals are copied to, so
&gt; that it avoids the redefinition problem above.
&gt; 2. Change the name of the Parse::RecDescent dependencies to the
&gt; package
&gt; from &#40;1&#41;, without including P::RD.  This will be of particular
&gt; interest
&gt; to you, as you&#39;ll want to include a single copy of the P::RD run-time
&gt; as
&gt; SQL::Translator::ParseRD::_Runtime &#40;or equivalent&#41;, as well as
&gt; reference
&gt; that package from each of your parsers.
</div>
Excellent.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d appreciate your assistance in vetting this feature, as
&gt; SQL::Translator is the only module I know of that would be shipping
&gt; multiple pre-compiled parsers.
</div>
Unfortunately I am very short of time lately, and won&#39;t be able to play
with this for at least 2 weeks. SQLT has already been long overdue, so
we will ship a release with the precompiled parsers disabled *for the
time being*. In the meantime it is extremely easy for you to test your
changes yourself: all you have to do is back-out this commit:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dbsrgits/sql-translator/commit/0eb3b94a54140cedfc37172290f3fc8c1e15ddc9">https://github.com/dbsrgits/sql-translator/commit/0eb3b94a54140cedfc37172290f3fc8c1e15ddc9</a></span>
As you can see all the code is already there, it is just commented.
Running `perl Makefile.PL` from a git checkout detects you are in
&#34;author&#34; mode, and generates the correct grammars. Then the core of SQLT
knows how to find them/use them properly as well, so a mere prove -lr
will suffice to diagnose what you messed up.
Ignore the &#34;FIXME FIXME FIXME&#34; line - you already explained how to deal
with this in <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=74088">https://rt.cpan.org/Ticket/Display.html?id=74088</a></span>, I just
didn&#39;t have time to integrate it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t2: My intention is that precompiled _standalone_ parsers should be
&gt; 100%
&gt; independent of the P::RD installed on the system.  Standalone parsers
&gt; should not &#39;use&#39; or &#39;require&#39; P::RD.  The only dependencies will be
&gt; on:
&gt; 1. The P::RD installed on the module maintainer&#39;s machine when they
&gt; compile the standalone parser.
&gt; 2. The P::RD installed on the user&#39;s machine at module build/install
&gt; time, when that module&#39;s build process creates the standalone parsers.
</div>
This is an excellent idea, though in this case 2. would not even be
necessary. We just ship the precompiled parsers directly to the user, so
they have one less dependency to install. I.e. P::RD becomes an
author-only dependency similar to
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dbsrgits/sql-translator/blob/master/Makefile.PL#L91">https://github.com/dbsrgits/sql-translator/blob/master/Makefile.PL#L91</a></span>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I do not believe that there is currently a way to determine which
&gt; version of P::RD precompiled a given parser.  I&#39;ve filed RT#77001 to
&gt; track adding this.
</div>
If you implement the above, the version that made the parser becomes
irrelevant, as it becomes truly standalone.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No worries about re-opening the ticket.  I&#39;m excited to see P::RD
&gt; improve, and I&#39;m rather embarrassed that I broke so many modules by
&gt; changing the calling convention of &#38;_parserepeat.  I _REALLY_
&gt; appreciate
&gt; any testing help or suggestions you can provide to ensure that my and
&gt; your users are not adversely impacted by the changes I&#39;m making to
&gt; P::RD.
</div>
Thanks for working on this! Much appreciated.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
