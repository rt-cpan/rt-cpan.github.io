<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #133778 for Yahoomail: Expunge bug</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #133778 for Yahoomail: Expunge bug</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Yahoomail/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Yahoomail/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Yahoomail/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Yahoomail/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Yahoomail">Yahoomail CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">133778</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Yahoomail/Active/">Yahoomail</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
sadler [...] emclient.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-223180-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-223181-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;19&nbsp;05:28:31&nbsp;2020</span>
    <span class="description">sadler [...] emclient.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Expunge bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 Nov 2020 10:26:03 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Yahoomail [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Olivia Sadler&#34; &lt;sadler [...] emclient.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

My name is Olivia and I work for an email application called eM Client. 
Recently, we found an EXPUNGE bug for IMAP in the latest distribution of 
SmaterMail and we now believe that the same issue is affecting Yahoo 
Accounts as well.

We were able to work with the developers of SmaterMail to fix the 
problem and make it so their mail server was no longer sending invalid 
EXPUNGE commands to our program and we were hoping to do the same thing 
for Yahoo.

The problem looks something like this
After the user moves an email from the Inbox to Trash folder, the server 
should report that it has disappeared from the Inbox, but the Yahoo IMAP 
mail server will report that a completely different message has 
disappeared - so we will delete it locally within our application.

You can see an illustration of the problem in this bit of IMAP log.
The message with the UID 965692 should be copied from the Inbox to the 
Trash folder, and then EXPUNGED from the Inbox folder. However, the mail 
server is sending an EXPUNGE command for the message with the ID 965691 
instead.
The 965691 message isn&#39;t actually deleted on the mail server, so when 
the account re-syncs, the message will be re downloaded. But it is 
disorienting for users for it to temporarily disappear.


09:17:04.887|016| &gt;&gt;&gt; MoveAsync&#40;folder: /Inbox [Inbox], targetFolder: 
Trash&#41;: Start 09:17:04.888|016| &gt;&gt;&gt; MoveAsync&#40;&#41;: Server supports MOVE 
09:17:04.888|057| 14: A17 UID MOVE 965692 &#34;Trash&#34; 09:17:05.179|057| 14: 
* OK [COPYUID 1319127605 965692 970584] 09:17:05.284|053| 14: * 13 
EXPUNGE 09:17:05.284|053| 14: A17 OK UID MOVE completed 
09:17:05.285|057| &gt;&gt;&gt; SynchronizeFolderFastAsync&#40;folder: /Inbox 
[Inbox]&#41;: Received EXPUNGE 09:17:05.285|06D| 14: A18 NOOP 
09:17:05.669|053| 14: * 14 EXISTS 09:17:05.669|053| 14: * 0 RECENT 
09:17:05.669|053| 14: A18 OK NOOP completed 09:17:05.669|057| &gt;&gt;&gt; 
SynchronizeFolderFastAsync&#40;folder: /Inbox [Inbox]&#41;: New item exists 
09:17:05.676|053| 14: A19 UID SEARCH UID 965692 09:17:05.975|057| 14: * 
SEARCH 09:17:05.975|057| 14: A19 OK UID SEARCH completed 
09:17:05.976|057| &gt;&gt;&gt; MoveAsync&#40;&#41;: End 09:17:05.982|057| &gt;&gt;&gt; 
MoveAsync&#40;&#41;: Deleted 1 items 09:17:05.982|016| &gt;&gt;&gt; 
SynchronizeMessagesAsync&#40;folder: /Inbox [Inbox], fast: True&#41;: executing 
09:17:05.982|016| &gt;&gt;&gt; SynchronizeMessagesAsync&#40;&#41;: Deleted 1 old 
messages: 965691

Could I perhaps talk to someone about this in more detail and possibly 
recommend the fix that SmarterMail came up with?

Thanks,
Olivia Sadler
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;22&nbsp;14:38:09&nbsp;2020</span>
    <span class="description">mcgrath.martin [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Nov 19 10:28:31 2020, sadler@emclient.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; My name is Olivia and I work for an email application called eM Client. 
&gt; Recently, we found an EXPUNGE bug for IMAP in the latest distribution of 
&gt; SmaterMail and we now believe that the same issue is affecting Yahoo 
&gt; Accounts as well.
&gt; 
&gt; We were able to work with the developers of SmaterMail to fix the 
&gt; problem and make it so their mail server was no longer sending invalid 
&gt; EXPUNGE commands to our program and we were hoping to do the same thing 
&gt; for Yahoo.
&gt; 
&gt; The problem looks something like this
&gt; After the user moves an email from the Inbox to Trash folder, the server 
&gt; should report that it has disappeared from the Inbox, but the Yahoo IMAP 
&gt; mail server will report that a completely different message has 
&gt; disappeared - so we will delete it locally within our application.
&gt; 
&gt; You can see an illustration of the problem in this bit of IMAP log.
&gt; The message with the UID 965692 should be copied from the Inbox to the 
&gt; Trash folder, and then EXPUNGED from the Inbox folder. However, the mail 
&gt; server is sending an EXPUNGE command for the message with the ID 965691 
&gt; instead.
&gt; The 965691 message isn&#39;t actually deleted on the mail server, so when 
&gt; the account re-syncs, the message will be re downloaded. But it is 
&gt; disorienting for users for it to temporarily disappear.
&gt; 
&gt; 
&gt; 09:17:04.887|016| &gt;&gt;&gt; MoveAsync&#40;folder: /Inbox [Inbox], targetFolder: 
&gt; Trash&#41;: Start 09:17:04.888|016| &gt;&gt;&gt; MoveAsync&#40;&#41;: Server supports MOVE 
&gt; 09:17:04.888|057| 14: A17 UID MOVE 965692 &#34;Trash&#34; 09:17:05.179|057| 14: 
&gt; * OK [COPYUID 1319127605 965692 970584] 09:17:05.284|053| 14: * 13 
&gt; EXPUNGE 09:17:05.284|053| 14: A17 OK UID MOVE completed 
&gt; 09:17:05.285|057| &gt;&gt;&gt; SynchronizeFolderFastAsync&#40;folder: /Inbox 
&gt; [Inbox]&#41;: Received EXPUNGE 09:17:05.285|06D| 14: A18 NOOP 
&gt; 09:17:05.669|053| 14: * 14 EXISTS 09:17:05.669|053| 14: * 0 RECENT 
&gt; 09:17:05.669|053| 14: A18 OK NOOP completed 09:17:05.669|057| &gt;&gt;&gt; 
&gt; SynchronizeFolderFastAsync&#40;folder: /Inbox [Inbox]&#41;: New item exists 
&gt; 09:17:05.676|053| 14: A19 UID SEARCH UID 965692 09:17:05.975|057| 14: * 
&gt; SEARCH 09:17:05.975|057| 14: A19 OK UID SEARCH completed 
&gt; 09:17:05.976|057| &gt;&gt;&gt; MoveAsync&#40;&#41;: End 09:17:05.982|057| &gt;&gt;&gt; 
&gt; MoveAsync&#40;&#41;: Deleted 1 items 09:17:05.982|016| &gt;&gt;&gt; 
&gt; SynchronizeMessagesAsync&#40;folder: /Inbox [Inbox], fast: True&#41;: executing 
&gt; 09:17:05.982|016| &gt;&gt;&gt; SynchronizeMessagesAsync&#40;&#41;: Deleted 1 old 
&gt; messages: 965691
&gt; 
&gt; Could I perhaps talk to someone about this in more detail and possibly 
&gt; recommend the fix that SmarterMail came up with?
&gt; 
&gt; Thanks,
&gt; Olivia Sadler
</div>
Contact Yahoo, this is a bug tracker for a defunct perl module, not general Yahoo mail services.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;22&nbsp;14:38:09&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:21:07&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:21:14&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:21:31&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:21:37&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:21:47&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:21:54&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:22:10&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;27&nbsp;17:22:30&nbsp;2020</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;deleted&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
