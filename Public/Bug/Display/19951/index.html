<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19951 for Module-Build: Double Prefix problem with --destdir and --prefix</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19951 for Module-Build: Double Prefix problem with --destdir and --prefix</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Module-Build">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Module-Build">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Module-Build">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Module-Build">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-Build">Module-Build CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19951</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Module-Build">Module-Build</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SHLOMIF [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
RGARCIA [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-21558-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.2801    </td>
  </tr>
  <tr id="CF-21559-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Config.dump.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/210168/81791/Config.dump.pl">
Sun Jun 18 06:43:50 2006 (43.6k) by SHLOMIF [...] cpan.org
</a>
</font></li>
</ul>


issue-19951.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/237298/99994/issue-19951.diff">
Sat Sep 02 15:01:30 2006 (663b) by SHLOMIF [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=19951">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-209778" href="/Public/Bug/Display.html?id=19951#txn-209778">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;17&nbsp;02:35:32&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Double Prefix problem with --destdir and --prefix</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/209778/81478/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/81478">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">See the following shell transcript &#40;running on Mandriva Linux Cooker,
but also reproducible on Fedora Core 5&#41;:

&lt;&lt;&lt;&lt;
$ pwd
/home/shlomi/Download/unpack/perl/HTML-Widgets-NavMenu-1.0000
$ perl -MModule::Build -le &#39;print $Module::Build::VERSION&#39;
0.2801
$ perl Build.PL
Checking whether your kit is complete...
Looks good

Checking prerequisites...
Looks good

Creating new &#39;Build&#39; script for &#39;HTML-Widgets-NavMenu&#39; version &#39;1.0000&#39;
$ ./Build
lib/HTML/Widgets/NavMenu/Tree/Iterator/Stack.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Tree/Iterator/Stack.pm
lib/HTML/Widgets/NavMenu/Object.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Object.pm
lib/HTML/Widgets/NavMenu.pm -&gt; blib/lib/HTML/Widgets/NavMenu.pm
lib/HTML/Widgets/NavMenu/Predicate.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Predicate.pm
lib/HTML/Widgets/NavMenu/Iterator/SiteMap.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Iterator/SiteMap.pm
lib/HTML/Widgets/NavMenu/Tree/Iterator.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Tree/Iterator.pm
lib/HTML/Widgets/NavMenu/Iterator/Html.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Iterator/Html.pm
lib/HTML/Widgets/NavMenu/EscapeHtml.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/EscapeHtml.pm
lib/HTML/Widgets/NavMenu/Iterator/NavMenu/HeaderRole.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Iterator/NavMenu/HeaderRole.pm
lib/HTML/Widgets/NavMenu/Url.pm -&gt; blib/lib/HTML/Widgets/NavMenu/Url.pm
lib/HTML/Widgets/NavMenu/Iterator/NavMenu.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Iterator/NavMenu.pm
lib/HTML/Widgets/NavMenu/Tree/Iterator/Item.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Tree/Iterator/Item.pm
lib/HTML/Widgets/NavMenu/HeaderRole.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/HeaderRole.pm
lib/HTML/Widgets/NavMenu/TagGen.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/TagGen.pm
lib/HTML/Widgets/NavMenu/Iterator/Base.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Iterator/Base.pm
lib/HTML/Widgets/NavMenu/Tree/Node.pm -&gt;
blib/lib/HTML/Widgets/NavMenu/Tree/Node.pm
Manifying blib/lib/HTML/Widgets/NavMenu/HeaderRole.pm -&gt;
blib/libdoc/HTML::Widgets::NavMenu::HeaderRole.3pm
Manifying blib/lib/HTML/Widgets/NavMenu.pm -&gt;
blib/libdoc/HTML::Widgets::NavMenu.3pm
$ ./Build --destdir=/home/shlomi/Perl/ --prefix=/usr install
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Object.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Predicate.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/EscapeHtml.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Url.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/HeaderRole.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/TagGen.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Iterator.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Node.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Iterator/Stack.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Iterator/Item.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/SiteMap.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/Html.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/NavMenu.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/Base.pm
Installing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/NavMenu/HeaderRole.pm
Installing
/home/shlomi/Perl/usr/usr/local/share/man/man3/HTML::Widgets::NavMenu::HeaderRole.3pm
Installing
/home/shlomi/Perl/usr/usr/local/share/man/man3/HTML::Widgets::NavMenu.3pm
Writing
/home/shlomi/Perl/usr/usr/lib/perl5/site_perl/5.8.8/i386-linux/auto/HTML/Widgets/NavMenu/.packlist
## Differing version of HTML/Widgets/NavMenu.pm found. You might like to
rm /usr/lib/perl5/site_perl/5.8.7/HTML/Widgets/NavMenu.pm
## Running &#39;make install UNINST=1&#39; will unlink this file for you.
$                
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt;&gt;&gt;
</div>
As one can see Module::Build installs the modules under $DESTDIR/usr/usr
instead of $DESTDIR/usr.

I&#39;ll try to fix it myself, but when I tried to a few days ago, I broke
some of the tests.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-210066" href="/Public/Bug/Display.html?id=19951#txn-210066">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;17&nbsp;22:17:42&nbsp;2006</span>
    <span class="description">kwilliams [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/210066/81728/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/81728">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I couldn&#39;t reproduce this on OS X, so it might be platform-specific &#40;most likely %Config-entry 
specific&#41;.  Here are my results below:

% perl Build.PL
Checking whether your kit is complete...
Looks good

Checking prerequisites...
Looks good

Creating new &#39;Build&#39; script for &#39;HTML-Widgets-NavMenu&#39; version &#39;1.0000&#39;
% perl Build --destdir=/Users/ken/lib/ --prefix=/usr fakeinstall
lib/HTML/Widgets/NavMenu/Tree/Iterator/Stack.pm -&gt; blib/lib/HTML/Widgets/NavMenu/
Tree/Iterator/Stack.pm
lib/HTML/Widgets/NavMenu/Object.pm -&gt; blib/lib/HTML/Widgets/NavMenu/Object.pm
lib/HTML/Widgets/NavMenu.pm -&gt; blib/lib/HTML/Widgets/NavMenu.pm
lib/HTML/Widgets/NavMenu/Predicate.pm -&gt; blib/lib/HTML/Widgets/NavMenu/
Predicate.pm
lib/HTML/Widgets/NavMenu/Iterator/SiteMap.pm -&gt; blib/lib/HTML/Widgets/NavMenu/
Iterator/SiteMap.pm
lib/HTML/Widgets/NavMenu/Tree/Iterator.pm -&gt; blib/lib/HTML/Widgets/NavMenu/Tree/
Iterator.pm
lib/HTML/Widgets/NavMenu/Iterator/Html.pm -&gt; blib/lib/HTML/Widgets/NavMenu/Iterator/
Html.pm
lib/HTML/Widgets/NavMenu/EscapeHtml.pm -&gt; blib/lib/HTML/Widgets/NavMenu/
EscapeHtml.pm
lib/HTML/Widgets/NavMenu/Iterator/NavMenu/HeaderRole.pm -&gt; blib/lib/HTML/Widgets/
NavMenu/Iterator/NavMenu/HeaderRole.pm
lib/HTML/Widgets/NavMenu/Url.pm -&gt; blib/lib/HTML/Widgets/NavMenu/Url.pm
lib/HTML/Widgets/NavMenu/Iterator/NavMenu.pm -&gt; blib/lib/HTML/Widgets/NavMenu/
Iterator/NavMenu.pm
lib/HTML/Widgets/NavMenu/Tree/Iterator/Item.pm -&gt; blib/lib/HTML/Widgets/NavMenu/
Tree/Iterator/Item.pm
lib/HTML/Widgets/NavMenu/HeaderRole.pm -&gt; blib/lib/HTML/Widgets/NavMenu/
HeaderRole.pm
lib/HTML/Widgets/NavMenu/TagGen.pm -&gt; blib/lib/HTML/Widgets/NavMenu/TagGen.pm
lib/HTML/Widgets/NavMenu/Iterator/Base.pm -&gt; blib/lib/HTML/Widgets/NavMenu/Iterator/
Base.pm
lib/HTML/Widgets/NavMenu/Tree/Node.pm -&gt; blib/lib/HTML/Widgets/NavMenu/Tree/
Node.pm
Manifying blib/lib/HTML/Widgets/NavMenu/HeaderRole.pm -&gt; blib/libdoc/
HTML::Widgets::NavMenu::HeaderRole.3pm
Manifying blib/lib/HTML/Widgets/NavMenu.pm -&gt; blib/libdoc/HTML::Widgets::NavMenu.
3pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/EscapeHtml.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/HeaderRole.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Object.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Predicate.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/TagGen.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Url.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Iterator/Base.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Iterator/Html.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Iterator/
NavMenu.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Iterator/
SiteMap.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Iterator/
NavMenu/HeaderRole.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Tree/Iterator.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Tree/Node.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Tree/Iterator/
Item.pm
Installing /Users/ken/lib/usr/lib/perl5/site_perl/HTML/Widgets/NavMenu/Tree/Iterator/
Stack.pm
Installing /Users/ken/lib/usr/man/man3/HTML::Widgets::NavMenu.3pm
Installing /Users/ken/lib/usr/man/man3/HTML::Widgets::NavMenu::HeaderRole.3pm
Writing /Users/ken/lib/usr/lib/perl5/site_perl/5.8.6/darwin-thread-multi-2level/auto/
HTML/Widgets/NavMenu/.packlist
% 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-210067" href="/Public/Bug/Display.html?id=19951#txn-210067">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;17&nbsp;22:17:43&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-210168" href="/Public/Bug/Display.html?id=19951#txn-210168">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;18&nbsp;06:43:45&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SHLOMIF [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/210168/81788/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/81788">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 831b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Mr. Williams!

Thanks for the quick response.

On Sat Jun 17 22:17:42 2006, KWILLIAMS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I couldn&#39;t reproduce this on OS X, so it might be platform-specific
&gt; &#40;most likely %Config-entry
&gt; specific&#41;.  
</div>
I tried it with a perl &#40;version 5.8.8&#41; that I compiled from source 
with default options and indeed it was OK. However, the perls that 
ships with Mandriva and Fedora Core 5 are faulty in this regard.

I&#39;m attaching here a dump of the %Config of the Mandriva perl. If you 
can please go over it and try to see if you can find anything fishy 
there. One can also find the configuration used to build perl on 
Mandriva here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/">http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/</a></span>

Either it&#39;s a problem downstream, or we&#39;ll have to work around it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here are my results below:
&gt; 
</div>[SNIPPED]

Regards,

        Shlomi Fish
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/210168/81791/Config.dump.pl">Download Config.dump.pl</a><br />
<span class="downloadcontenttype">text/x-perl 43.6k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-219978" href="/Public/Bug/Display.html?id=19951#txn-219978">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;07&nbsp;07:38:44&nbsp;2006</span>
    <span class="description">RGARCIA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/219978/89506/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/89506">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 710b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m attaching here a dump of the %Config of the Mandriva perl. If you 
&gt; can please go over it and try to see if you can find anything fishy 
&gt; there. One can also find the configuration used to build perl on 
&gt; Mandriva here:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/">http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/</a></span>
&gt; 
&gt; Either it&#39;s a problem downstream, or we&#39;ll have to work around it.
</div>
I think that the Configure lines that might have an impact on this are :

  -Dprefix=%_prefix -Dvendorprefix=%_prefix \
  -Dsiteprefix=%_prefix -Dsitebin=%_prefix/local/bin \

&#40;where %_prefix expands to /usr&#41;

Actually, on a perl built with default options, vendorprefix is empty
&#40;and usevendorprefix is undef.&#41; That might be the origin of the bug.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-219984" href="/Public/Bug/Display.html?id=19951#txn-219984">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;07&nbsp;07:45:10&nbsp;2006</span>
    <span class="description">RGARCIA [...] cpan.org -  Cc RGARCIA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-220494" href="/Public/Bug/Display.html?id=19951#txn-220494">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;08&nbsp;05:49:21&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Shlomi Fish &lt;shlomif [...] iglu.org.il&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/220494/89887/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/89887">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jul 07 07:38:44 2006, RGARCIA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I&#39;m attaching here a dump of the %Config of the Mandriva perl. If 
</div></div>you 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; can please go over it and try to see if you can find anything 
</div></div>fishy 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; there. One can also find the configuration used to build perl on 
&gt; &gt; Mandriva here:
&gt; &gt; 
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/">http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/</a></span>
&gt; &gt; 
&gt; &gt; Either it&#39;s a problem downstream, or we&#39;ll have to work around it.
</div>&gt; 
&gt; I think that the Configure lines that might have an impact on this 
</div>are :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt;   -Dprefix=%_prefix -Dvendorprefix=%_prefix \
&gt;   -Dsiteprefix=%_prefix -Dsitebin=%_prefix/local/bin \
&gt; 
&gt; &#40;where %_prefix expands to /usr&#41;
&gt; 
&gt; Actually, on a perl built with default options, vendorprefix is 
</div>empty
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;and usevendorprefix is undef.&#41; That might be the origin of the bug.
</div>
I built Perl using the following script:

&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
#!/bin/sh
rm -f config.sh Policy.sh
PREFIX=&#34;$HOME/apps/perl/double-prefix&#34;
sh Configure -de -Dprefix=&#34;$PREFIX&#34; -Dvendorprefix=&#34;$PREFIX&#34; \
    -Dsiteprefix=&#34;$PREFIX&#34; -Dsitebin=&#34;$PREFIX/local/bin&#34;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div></div>
And then tried to install HTML::Widgets::NavMenu using the procedure:
On Fri Jul 07 07:38:44 2006, RGARCIA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I&#39;m attaching here a dump of the %Config of the Mandriva perl. If 
</div></div>you 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; can please go over it and try to see if you can find anything 
</div></div>fishy 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; there. One can also find the configuration used to build perl on 
&gt; &gt; Mandriva here:
&gt; &gt; 
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/">http://cvs.mandriva.com/cgi-bin/cvsweb.cgi/SPECS/perl/</a></span>
&gt; &gt; 
&gt; &gt; Either it&#39;s a problem downstream, or we&#39;ll have to work around it.
</div>&gt; 
&gt; I think that the Configure lines that might have an impact on this 
</div>are :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt;   -Dprefix=%_prefix -Dvendorprefix=%_prefix \
&gt;   -Dsiteprefix=%_prefix -Dsitebin=%_prefix/local/bin \
&gt; 
&gt; &#40;where %_prefix expands to /usr&#41;
&gt; 
&gt; Actually, on a perl built with default options, vendorprefix is 
</div>empty
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;and usevendorprefix is undef.&#41; That might be the origin of the bug.
</div>
I built Perl using the following script:

&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
#!/bin/sh
rm -f config.sh Policy.sh
PREFIX=&#34;$HOME/apps/perl/double-prefix&#34;
sh Configure -de -Dprefix=&#34;$PREFIX&#34; -Dvendorprefix=&#34;$PREFIX&#34; \
    -Dsiteprefix=&#34;$PREFIX&#34; -Dsitebin=&#34;$PREFIX/local/bin&#34;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div>
And then tried to install HTML::Widgets::NavMenu using the procedure:

&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 
shlomi:~/Download/unpack/perl/double-prefix/HTML-Widgets-NavMenu-1.0000$ ./Build --destdir=/home/shlomi/Perl/ --prefix=/usr 
install
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Object.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Predicate.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/EscapeHtml.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Url.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/HeaderRole.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/TagGen.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Iterator.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Node.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Iterator/Stack.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Tree/Iterator/Item.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/SiteMap.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/Html.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/NavMenu.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/Base.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/lib/site_perl/5.8.8/HTML/Widgets/NavMenu/Iterator/NavMenu/HeaderRole.pm 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/man/man3/HTML::Widgets::NavMenu::HeaderRole.3 
&#40;unchanged&#41;
Skipping /home/shlomi/Perl/usr/man/man3/HTML::Widgets::NavMenu.3 
&#40;unchanged&#41;
Writing /home/shlomi/Perl/usr/lib/site_perl/5.8.8/i686-linux/auto/HTML/Widgets/NavMenu/.packlist
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
</div>
So the problem was not reproduced with this configuration.

Regards,

       Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-237298" href="/Public/Bug/Display.html?id=19951#txn-237298">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;02&nbsp;15:01:30&nbsp;2006</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> SHLOMIF [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/237298/99991/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/99991">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 375b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Attached is a diff that fixes the problem, while still passing all the 
tests. I&#39;m not sure it&#39;s correct. Here are my notes:

[[[[[[[[[[[[[[[
It happens when:

    type = bindoc
    installdirs = site
    install_sets[site][bindoc] &#40; installsiteman1dir &#41; = 
        /usr/local/share/man/man1
    original_prefix[site] &#40;siteprefixexp&#41; = /usr
    prefix = /usr
]]]]]]]]]]]]]]]
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/237298/99994/issue-19951.diff">Download issue-19951.diff</a><br />
<span class="downloadcontenttype">text/x-diff 663b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: lib/Module/Build/Base.pm
===================================================================
--- lib/Module/Build/Base.pm	&#40;revision 6832&#41;
+++ lib/Module/Build/Base.pm	&#40;working copy&#41;
@@ -3601,8 +3601,6 @@
     return $self-&gt;_prefixify_default&#40; $type, $rprefix &#41;;
   } elsif&#40; !File::Spec-&gt;file_name_is_absolute&#40;$path&#41; &#41; {
     $self-&gt;log_verbose&#40;&#34;    path is relative, not prefixifying.\n&#34;&#41;;
-  } elsif&#40; $sprefix eq $rprefix &#41; {
-    $self-&gt;log_verbose&#40;&#34;  no new prefix.\n&#34;&#41;;
   } elsif&#40; $path !~ s{^\Q$sprefix\E\b}{}s &#41; {
     $self-&gt;log_verbose&#40;&#34;    cannot prefixify, falling back to default.\n&#34;&#41;;
     return $self-&gt;_prefixify_default&#40; $type, $rprefix &#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368902" href="/Public/Bug/Display.html?id=19951#txn-368902">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;18:55:39&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/368902/167392/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/167392">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Sep 02 15:01:30 2006, SHLOMIF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Attached is a diff that fixes the problem, while still 
&gt;passing all the tests. I&#39;m not sure it&#39;s correct. Here 
&gt;are my notes:
&gt; 
&gt; [[[[[[[[[[[[[[[
&gt; It happens when:
&gt; 
&gt;     type = bindoc
&gt;     installdirs = site
&gt;     install_sets[site][bindoc] &#40; installsiteman1dir &#41; = 
&gt;         /usr/local/share/man/man1
&gt;     original_prefix[site] &#40;siteprefixexp&#41; = /usr
&gt;     prefix = /usr
&gt; ]]]]]]]]]]]]]]]
</div>
That sounds about right.  It looks like the &#39;$sprefix eq $rprefix&#39; 
conditional there is redundant &#40;and inconsistent&#41; with regard to the 
follow-up conditional of &#39;$path !~ s{^\Q$sprefix\E\b}{}s&#39;.

The flow control here is somewhat convoluted and AFAICT, the 
fall-through logic breaks what the caller is doing &#40;and the !~ s/// is 
probably in bad form as well &#40;because it does execute a substition, 
but doesn&#39;t enter the conditional.&#41;&#41;

Bugs regarding PREFIX appear, at first glance, to be non-bugs because 
prefix behavior is defined in a non-optimal and fragile way, but must 
stay that way for compatibility.  &#40;This is why we&#39;ve replaced prefix 
with --install-base.&#41;

Anyway, I&#39;ve determined that we are inconsistent with MakeMaker 
behavior and I think I&#39;ve traced this back to its origin.  See:

  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.module.build/2007/10/msg947.html">http://www.nntp.perl.org/group/perl.module.build/2007/10/msg947.html</a></span>

If I don&#39;t hear any objections in a week, I&#39;ll put this change in svn 
and close the ticket.

Thanks,
Eric
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368905" href="/Public/Bug/Display.html?id=19951#txn-368905">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;18:55:42&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other AddReminder odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-368912" href="/Public/Bug/Display.html?id=19951#txn-368912">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;07&nbsp;18:56:25&nbsp;2007</span>
    <span class="description">EWILHELM [...] cpan.org -  Reminder &#39;just apply and close it&#39; added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553141" href="/Public/Bug/Display.html?id=19951#txn-553141">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;01:30:02&nbsp;2009</span>
    <span class="description">EWILHELM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/553141/278756/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/278756">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 433b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Oct 07 18:55:39 2007, EWILHELM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If I don&#39;t hear any objections in a week, I&#39;ll put this change in svn 
&gt; and close the ticket.
</div>
Ha!  Sorry this took so long to get to.

Fixed is svn r12425.

There still are not any tests for this behavior &#40;or for whatever the 
existing code was supposed to be doing&#41;, so we might see something come 
up which requires it to be reverted until it can be better understood.

Thanks,
Eric
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553142" href="/Public/Bug/Display.html?id=19951#txn-553142">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;01:30:03&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553145" href="/Public/Bug/Display.html?id=19951#txn-553145">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;01:30:05&nbsp;2009</span>
    <span class="description">EWILHELM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.623593</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
