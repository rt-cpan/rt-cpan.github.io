<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53714 for ExtUtils-MakeMaker: BSD tarballs unreadable by GNU tar 1.19 or less</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53714 for ExtUtils-MakeMaker: BSD tarballs unreadable by GNU tar 1.19 or less</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=ExtUtils-MakeMaker">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=ExtUtils-MakeMaker">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=ExtUtils-MakeMaker">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=ExtUtils-MakeMaker">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-MakeMaker">ExtUtils-MakeMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53714</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=ExtUtils-MakeMaker">ExtUtils-MakeMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jjore [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=53714">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-720283" href="/Public/Bug/Display.html?id=53714#txn-720283">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;00:25:14&nbsp;2010</span>
    <span class="description">jjore [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> BSD tarballs unreadable by GNU tar 1.19 or less</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/720283/371891/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/371891">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 664b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,
Discovered this on Mac OS X 10.6.2. It uses BSD tar of libarchive-2.6.2
which adds in some headers that are allowed per POSIX but GNU tar 1.19
or earlier can&#39;t handle. At the moment, GNU tar 1.20+ isn&#39;t wide spread.
EU-MM should avoid using BSD tar.

Headers added:
  LIBARCHIVE.creationtime
  SCHILY.acl.access
  SCHILY.acl.default
  SCHILY.dev
  SCHILY.devmajor
  SCHILY.devminor
  SCHILY.fflags
  SCHILY.ino
  SCHILY.nlink
  SCHILY.nlinks
  SCHILY.realsize

Suggested action:

For the moment, use the executable bsdtar instead of just plain tar when
on the darwin platform. There ought to be a more thorough check of this
to handle other BSD but non-darwin.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-721653" href="/Public/Bug/Display.html?id=53714#txn-721653">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;18&nbsp;17:55:42&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/721653/372637/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/372637">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jan 15 00:25:14 2010, JJORE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Discovered this on Mac OS X 10.6.2. It uses BSD tar of libarchive-2.6.2
&gt; which adds in some headers that are allowed per POSIX but GNU tar 1.19
&gt; or earlier can&#39;t handle. At the moment, GNU tar 1.20+ isn&#39;t wide spread.
&gt; EU-MM should avoid using BSD tar.
</div>
I can&#39;t reproduce this on OS X 10.6.2 with bsdtar 2.6.2 and gnutar 1.17.
Is there something special about the files being archived?

$ mkdir test
$ cd test
$ touch foo
$ touch bar
$ touch baz
$ cd ..
$ bsdtar -czvf test.tgz test
a test
a test/bar
a test/baz
a test/foo
$ gnutar -tzvf test.tgz 
drwxrwxr-x schwern/schwern   0 2010-01-18 14:50 test/
-rw-rw-r-- schwern/schwern   0 2010-01-18 14:50 test/bar
-rw-rw-r-- schwern/schwern   0 2010-01-18 14:50 test/baz
-rw-rw-r-- schwern/schwern   0 2010-01-18 14:50 test/foo
$ gnutar -xzvf test.tgz 
test/
test/bar
test/baz
test/foo

$ gnutar --version
tar &#40;GNU tar&#41; 1.17
Copyright &#40;C&#41; 2007 Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later
&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Modified to support extended attributes.
Written by John Gilmore and Jay Fenlason.

$ bsdtar --version
bsdtar 2.6.2 - libarchive 2.6.2
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-721656" href="/Public/Bug/Display.html?id=53714#txn-721656">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;18&nbsp;17:55:45&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-721657" href="/Public/Bug/Display.html?id=53714#txn-721657">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;18&nbsp;18:01:54&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/721657/372640/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/372640">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 552b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Found some info on it.
<span class="clickylink"><a target="new" rel="nofollow" href="http://old.nabble.com/bug-in-BSD-tar--td10844273.html">http://old.nabble.com/bug-in-BSD-tar--td10844273.html</a></span>

* It would seem to only effect filenames with non 7-bit ASCII filenames,
so the scope of this bug is rather restricted.

* gnutar 1.17 can handle it, it just throws a warning

$ gnutar -xzvf test.tgz 
test/
test/bar
test/baz
test/foo
gnutar: Ignoring unknown extended header keyword `SCHILY.dev&#39;
gnutar: Ignoring unknown extended header keyword `SCHILY.ino&#39;
gnutar: Ignoring unknown extended header keyword `SCHILY.nlink&#39;
test/Føø

Have you seen this problem in the wild?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-722333" href="/Public/Bug/Display.html?id=53714#txn-722333">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;20&nbsp;03:31:03&nbsp;2010</span>
    <span class="description">jjore [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/722333/372976/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/372976">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 18 18:01:54 2010, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Found some info on it.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://old.nabble.com/bug-in-BSD-tar--td10844273.html">http://old.nabble.com/bug-in-BSD-tar--td10844273.html</a></span>
&gt; 
&gt; * It would seem to only effect filenames with non 7-bit ASCII filenames,
&gt; so the scope of this bug is rather restricted.
&gt; 
&gt; * gnutar 1.17 can handle it, it just throws a warning
</div>
No, standard GNU tar 1.19 and lower do not handle it. Andreas had to
upgrade PAUSE servers recently from GNU tar 1.16 to 1.20 to be able to
unpack uploaded tarballs. It throws the SCHILY and LIBARCHIVE warnngs
and then exits non-zero.

Perhaps your test used the Mac provided gnutar? I used the following
snippet to find that apparently just my Snow Leopard. When I create a
tarball, it&#39;s using libarchive 2.6.2 which when I check the source
definitely adds the &#34;bad&#34; headers. When I build the GNU tars, nothing
earlier than 1.20 can handle the BSD tarballs.

$ find . \&#40; -name &#39;*.tar.gz&#39; -o -name &#39;*.tgz&#39; \&#41; -type f -print0 | xargs
-0 zegrep &#39;&#40;SCHILY|LIBARCHIVE&#41;&#39; &gt; bsdtar.txt 2&gt;&#38;1

./authors/id/J/JJ/JJORE/B-Utils-0.10.tar.gz:Binary file &#40;standard input&#41;
matches
./authors/id/J/JJ/JJORE/Term-HiliteDiff-0.09.tar.gz:Binary file
&#40;standard input&#41; matches
./authors/id/J/JJ/JJORE/B-Lint-StrictOO-0.03.tar.gz:Binary file
&#40;standard input&#41; matches
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-722529" href="/Public/Bug/Display.html?id=53714#txn-722529">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;20&nbsp;12:42:54&nbsp;2010</span>
    <span class="description">jjore [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/722529/373094/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/373094">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 7.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 20 03:31:03 2010, JJORE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jan 18 18:01:54 2010, MSCHWERN wrote:
<div class="message-stanza open">&gt; &gt; Found some info on it.
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://old.nabble.com/bug-in-BSD-tar--td10844273.html">http://old.nabble.com/bug-in-BSD-tar--td10844273.html</a></span>
&gt; &gt; 
&gt; &gt; * It would seem to only effect filenames with non 7-bit ASCII filenames,
&gt; &gt; so the scope of this bug is rather restricted.
&gt; &gt; 
&gt; &gt; * gnutar 1.17 can handle it, it just throws a warning
</div>&gt; 
&gt; No, standard GNU tar 1.19 and lower do not handle it. Andreas had to
&gt; upgrade PAUSE servers recently from GNU tar 1.16 to 1.20 to be able to
&gt; unpack uploaded tarballs. It throws the SCHILY and LIBARCHIVE warnngs
&gt; and then exits non-zero.
&gt; 
&gt; Perhaps your test used the Mac provided gnutar? I used the following
&gt; snippet to find that apparently just my Snow Leopard. When I create a
&gt; tarball, it&#39;s using libarchive 2.6.2 which when I check the source
&gt; definitely adds the &#34;bad&#34; headers. When I build the GNU tars, nothing
&gt; earlier than 1.20 can handle the BSD tarballs.
&gt; 
&gt; $ find . \&#40; -name &#39;*.tar.gz&#39; -o -name &#39;*.tgz&#39; \&#41; -type f -print0 | xargs
&gt; -0 zegrep &#39;&#40;SCHILY|LIBARCHIVE&#41;&#39; &gt; bsdtar.txt 2&gt;&#38;1
&gt; 
&gt; ./authors/id/J/JJ/JJORE/B-Utils-0.10.tar.gz:Binary file &#40;standard input&#41;
&gt; matches
&gt; ./authors/id/J/JJ/JJORE/Term-HiliteDiff-0.09.tar.gz:Binary file
&gt; &#40;standard input&#41; matches
&gt; ./authors/id/J/JJ/JJORE/B-Lint-StrictOO-0.03.tar.gz:Binary file
&gt; &#40;standard input&#41; matches
</div>
Aha! The ustar format seems to have some fixed width fields
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://en.wikipedia.org/wiki/Tar_%28file_format%29#Format_details&#41;">http://en.wikipedia.org/wiki/Tar_%28file_format%29#Format_details&#41;</a></span>.
When a darwin user or group id is greater than 0777777 octal,
/usr/bin/tar starts creating the extra headers. I reproduced both
success and failure modes locally by creating a user with uid = 2**18 -
1 and uid = 2**18.

I&#39;d noticed separately while still chatting to #toolchain that using the
-o flag as recommended in
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53403">https://rt.cpan.org/Ticket/Display.html?id=53403</a></span> produced the following
warnings.

W3M211a:~ jbenjore$ tar -o -czf B-Utils-0.10.tar.gz B-Utils-0.10
tar: B-Utils-0.10/: Numeric user ID too large: Result too largeNumeric
group ID too large: Result too large
tar: B-Utils-0.10/build/: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/BUtils.h: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/BUtils_op.h: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/Changes: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/lib/: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/Makefile.PL: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/MANIFEST: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/META.yml: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/OP.xs: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/ppport.h: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/README: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/: Numeric user ID too large: Result too largeNumeric
group ID too large: Result too large
tar: B-Utils-0.10/typemap: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/Utils.xs: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/xt/: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/xt/pod.t: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/xt/signature.t: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/10use.t: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/11export.t: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/20all_starts.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/21all_roots.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/22anon_subs.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/30parent.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/31oldname.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/32kids.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/33ancestors.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/34descendants.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/35siblings.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/36previous.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/37stringify.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/40walk.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/41walkfilt.t: Numeric user ID too large:
Result too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/42all.t: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/43allfilt.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/44optrep.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/50carp.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/t/utils/51croak.t: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/lib/B/: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/lib/B/Utils/: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/lib/B/Utils.pm: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/lib/B/Utils/OP.pm: Numeric user ID too large: Result
too largeNumeric group ID too large: Result too large
tar: B-Utils-0.10/build/IFiles.pm: Numeric user ID too large: Result too
largeNumeric group ID too large: Result too large

Further, there were no files in the created tarball. It seems that any
file which provokes this kind of warning is just omitted from the tarball.

W3M211a:~ jbenjore$ tar tzf B-Utils-0.10.tar.gz 
W3M211a:~ jbenjore$ 

i
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-722885" href="/Public/Bug/Display.html?id=53714#txn-722885">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;21&nbsp;02:45:47&nbsp;2010</span>
    <span class="description">jjore [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/722885/373260/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/373260">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 18 18:01:54 2010, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Found some info on it.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://old.nabble.com/bug-in-BSD-tar--td10844273.html">http://old.nabble.com/bug-in-BSD-tar--td10844273.html</a></span>
&gt; 
&gt; * It would seem to only effect filenames with non 7-bit ASCII filenames,
&gt; so the scope of this bug is rather restricted.
&gt; 
&gt; * gnutar 1.17 can handle it, it just throws a warning
&gt; 
&gt; $ gnutar -xzvf test.tgz 
&gt; test/
&gt; test/bar
&gt; test/baz
&gt; test/foo
&gt; gnutar: Ignoring unknown extended header keyword `SCHILY.dev&#39;
&gt; gnutar: Ignoring unknown extended header keyword `SCHILY.ino&#39;
&gt; gnutar: Ignoring unknown extended header keyword `SCHILY.nlink&#39;
&gt; test/Føø
&gt; 
&gt; Have you seen this problem in the wild?
</div>
Yes. I uploaded several tarballs from the Macbook over Christmas and
deleted the prior versions. I expected the newest versions to supercede
and assumed backpan would be enough for anyone who wanted an older version.

Unfortunately, the PAUSE indexer was using GNU tar 1.16 and it blew up
when it tried to index the modules. I received no email initially about
either success or failure in indexing the module. A month later, the
#moose IRC channel summoned me to ask why B::Utils had disappeared from
CPAN. I shrugged it off and asked PAUSE to reindex it. One week later, I
noticed it still hadn&#39;t showed up. This is when I found out that the
tarball was valid on my system but not others.

I used my Macbook&#39;s local /usr/bin/gnutar to create B-Utils-0.11.tar.gz
and that worked great.

The summary is that I wandered into this tarpit entirely by accident. I
might be one of the very, very few who have user ids that are
numerically large. It&#39;s provisioned by Active Directory and I don&#39;t know
why the number is what it is. It might just be auto-generated by a
Microsoft tool.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-723679" href="/Public/Bug/Display.html?id=53714#txn-723679">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;16:12:11&nbsp;2010</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53714] BSD tarballs unreadable by GNU tar 1.19 or less</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Jan 2010 13:11:54 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/723679/373722/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/373722">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 968b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">BSD and GNU have a tiff and we&#39;re left cleaning up the mess.  Yay.  I&#39;ve read 
some of the commentary on this on the BSD lists and their response has been 
&#34;its in the standard, GNU tar is broken!&#34;  Good for the standard.

Anyhow, my concern now is putting in GNU tar detection code.  The simple patch 
would be to change MM_Darwin to use gnutar instead of tar.  That assumes OS X 
has and will always have a program called gnutar.

That only fixes OS X leaving all the BSDs still pumping out standard compliant 
but broken tarballs.  The more general problem is detecting if the user has 
GNU tar, poking through the PATH to find gnutar or gtar and hoping its usable.

In any other piece of software that would be simple.  In MakeMaker it could 
break all sorts of things.  I&#39;m hesitant.


-- 
I am somewhat preoccupied telling the laws of physics to shut up and sit down.
        -- Vaarsuvius, &#34;Order of the Stick&#34;
            <span class="clickylink"><a target="new" rel="nofollow" href="http://www.giantitp.com/comics/oots0107.html">http://www.giantitp.com/comics/oots0107.html</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-723715" href="/Public/Bug/Display.html?id=53714#txn-723715">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;17:43:57&nbsp;2010</span>
    <span class="description">twists [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> jjore [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53714] BSD tarballs unreadable by GNU tar 1.19 or  less</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Jan 2010 14:43:42 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Joshua ben Jore &lt;twists [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/723715/373742/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/373742">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Jan 22, 2010 at 1:12 PM, Michael G Schwern via RT
&lt;bug-ExtUtils-MakeMaker@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=53714">http://rt.cpan.org/Ticket/Display.html?id=53714</a></span> &gt;
&gt;
&gt; BSD and GNU have a tiff and we&#39;re left cleaning up the mess.  Yay.  I&#39;ve read
&gt; some of the commentary on this on the BSD lists and their response has been
&gt; &#34;its in the standard, GNU tar is broken!&#34;  Good for the standard.
&gt;
&gt; Anyhow, my concern now is putting in GNU tar detection code.  The simple patch
&gt; would be to change MM_Darwin to use gnutar instead of tar.  That assumes OS X
&gt; has and will always have a program called gnutar.
&gt;
&gt; That only fixes OS X leaving all the BSDs still pumping out standard compliant
&gt; but broken tarballs.  The more general problem is detecting if the user has
&gt; GNU tar, poking through the PATH to find gnutar or gtar and hoping its usable.
&gt;
&gt; In any other piece of software that would be simple.  In MakeMaker it could
&gt; break all sorts of things.  I&#39;m hesitant.
</div>
What I&#39;ve done in general is to ask each tar alternative if `$tar
--help` =~ /bsdtar/ matches. If so, I don&#39;t use that tar unless I
somehow rejected all the alternatives and then I use the first
alternative anyway. MM_Darwin tries using tar, then gnutar, then
bsdtar. MM_Any only uses tar.

I am unsure that tar on non-unixy platforms exists and responds to
--help as a command line parameter but that doesn&#39;t seem on its face
to be much of a problem since we&#39;re already assuming `tar czf&#39; is a
valid command.

I am however actually testing for bsdtar now so perhaps it might be
possible that if any test at all for a tar would have failed that we
will now begin failing. Further however, I am actually testing that
Test::More::unlike&#40; `tar --help`, qr/bsdtar/ &#41; so presumably if the
platform had no tar I&#39;d just get an undef value back and potentially a
warning about the value. I wouldn&#39;t get a failure since
Test::More::unlike&#40; undef, qr/bsdtar/ &#41; succeeds.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1447933" href="/Public/Bug/Display.html?id=53714#txn-1447933">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;01&nbsp;04:47:07&nbsp;2015</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1447933/769873/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/769873">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 44b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not something EUMM can reasonably check for.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1447936" href="/Public/Bug/Display.html?id=53714#txn-1447936">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;01&nbsp;04:47:18&nbsp;2015</span>
    <span class="description">ETJ [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.478586</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
