<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #28977 for File-Slurp: read_file and write_fail can fail due to EINTR</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #28977 for File-Slurp: read_file and write_fail can fail due to EINTR</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=File-Slurp">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=File-Slurp">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=File-Slurp">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=File-Slurp">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Slurp">File-Slurp CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">28977</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=File-Slurp">File-Slurp</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
acd [...] weirdness.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-13126-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
9999.12    </td>
  </tr>
  <tr id="CF-13127-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
9999.19    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




file-slurp-eintr.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/355488/160203/file-slurp-eintr.patch">
Fri Aug 24 11:33:08 2007 (925b) by acd [...] weirdness.net
</a>
</font></li>
</ul>


signal.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/938341/487214/signal.t">
Mon May 23 14:13:47 2011 (350b) by acd [...] weirdness.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=28977">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-355488" href="/Public/Bug/Display.html?id=28977#txn-355488">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;24&nbsp;11:33:08&nbsp;2007</span>
    <span class="description">acd [...] weirdness.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> read_file and write_fail can fail due to EINTR</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/355488/160200/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/160200">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 714b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I encountered a bug &#40;or misfeature&#41; when using File::Slurp&#39;s read_file 
within an app that receives signals.  read_file uses sysread which is 
vulnerable to being interrupted when a signal is received.  Since 
sysread is the raw OS read call, Perl doesn&#39;t automatically restart the 
read as it does for the read function.  I&#39;ve attached a patch which 
resolves the issue for me on my system.  Also, as a caveat, I noticed 
that you&#39;ve been working towards supporting earlier versions of Perl in 
File::Slurp and I&#39;ve not been able to test it on anything other than 
the 5.8 train.

The same issue likely exists with write_file as well, though I did not 
experience it.  I included a fix for it in my patch as well.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> file-slurp-eintr.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/355488/160203/file-slurp-eintr.patch">Download file-slurp-eintr.patch</a><br />
<span class="downloadcontenttype">text/x-diff 925b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ru File-Slurp-9999.12/lib/File/Slurp.pm File-Slurp-9999.12.acd/lib/File/Slurp.pm
--- File-Slurp-9999.12/lib/File/Slurp.pm	2006-02-17 01:13:51.000000000 -0500
+++ File-Slurp-9999.12.acd/lib/File/Slurp.pm	2007-08-24 11:29:15.696387979 -0400
@@ -6,6 +6,7 @@
 use POSIX qw&#40; :fcntl_h &#41; ;
 use Fcntl qw&#40; :DEFAULT &#41; ;
 use Symbol ;
+use Errno ;
 
 my $is_win32 = $^O =~ /win32/i ;
 
@@ -174,6 +175,10 @@
 			next ;
 		}
 
+# since we&#39;re using sysread Perl won&#39;t automatically restart the call when
+# interrupted by a signal.
+		next if $!{EINTR};
+
 # handle the read error
 
 		@_ = &#40; \%args, &#34;read_file &#39;$file_name&#39; - sysread: $!&#34;&#41;;
@@ -330,6 +335,10 @@
 		my $write_cnt = syswrite&#40; $write_fh, ${$buf_ref},
 				$size_left, $offset &#41; ;
 
+# since we&#39;re using sysread Perl won&#39;t automatically restart the call when
+# interrupted by a signal.
+		next if $!{EINTR};
+
 		unless &#40; defined $write_cnt &#41; {
 
 # the write failed
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-938091" href="/Public/Bug/Display.html?id=28977#txn-938091">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;23&nbsp;01:50:51&nbsp;2011</span>
    <span class="description">uri [...] sysarch.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/938091/487087/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/487087">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Aug 24 11:33:08 2007, acd wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I encountered a bug &#40;or misfeature&#41; when using File::Slurp&#39;s read_file 
&gt; within an app that receives signals.  read_file uses sysread which is 
&gt; vulnerable to being interrupted when a signal is received.  Since 
&gt; sysread is the raw OS read call, Perl doesn&#39;t automatically restart the 
&gt; read as it does for the read function.  I&#39;ve attached a patch which 
&gt; resolves the issue for me on my system.  Also, as a caveat, I noticed 
&gt; that you&#39;ve been working towards supporting earlier versions of Perl in 
&gt; File::Slurp and I&#39;ve not been able to test it on anything other than 
&gt; the 5.8 train.
&gt; 
&gt; The same issue likely exists with write_file as well, though I did not 
&gt; experience it.  I included a fix for it in my patch as well.
</div>
can you create a test for this? i can see the issue and it will only
happen if you use signals &#40;which are not a great thing in general to
use&#41;. it will be hard to prove it works without a proper test. i may
patch this coming version as it can&#39;t hurt.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-938093" href="/Public/Bug/Display.html?id=28977#txn-938093">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;23&nbsp;01:50:51&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-938291" href="/Public/Bug/Display.html?id=28977#txn-938291">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;23&nbsp;10:38:04&nbsp;2011</span>
    <span class="description">acd [...] weirdness.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28977] read_file and write_fail can fail due to EINTR</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 23 May 2011 10:37:55 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Slurp [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andrew Danforth &lt;acd [...] weirdness.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/938291/487194/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/487194">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Let me see if I can whip up a test.  I discovered this with an application
that is long lived and spawns children, so it needs SIGCHLD to know when to
reap them.  The SIGCHLDs are sometimes delivered while in the middle of a
sysread.

On Mon, May 23, 2011 at 1:50 AM, Uri Guttman via RT &lt;
bug-File-Slurp@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=28977">https://rt.cpan.org/Ticket/Display.html?id=28977</a></span> &gt;
&gt;
&gt; On Fri Aug 24 11:33:08 2007, acd wrote:
<div class="message-stanza open">&gt; &gt; I encountered a bug &#40;or misfeature&#41; when using File::Slurp&#39;s read_file
&gt; &gt; within an app that receives signals.  read_file uses sysread which is
&gt; &gt; vulnerable to being interrupted when a signal is received.  Since
&gt; &gt; sysread is the raw OS read call, Perl doesn&#39;t automatically restart the
&gt; &gt; read as it does for the read function.  I&#39;ve attached a patch which
&gt; &gt; resolves the issue for me on my system.  Also, as a caveat, I noticed
&gt; &gt; that you&#39;ve been working towards supporting earlier versions of Perl in
&gt; &gt; File::Slurp and I&#39;ve not been able to test it on anything other than
&gt; &gt; the 5.8 train.
&gt; &gt;
&gt; &gt; The same issue likely exists with write_file as well, though I did not
&gt; &gt; experience it.  I included a fix for it in my patch as well.
</div>&gt;
&gt; can you create a test for this? i can see the issue and it will only
&gt; happen if you use signals &#40;which are not a great thing in general to
&gt; use&#41;. it will be hard to prove it works without a proper test. i may
&gt; patch this coming version as it can&#39;t hurt.
&gt;
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/938291/487195/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/487195">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-938341" href="/Public/Bug/Display.html?id=28977#txn-938341">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;23&nbsp;14:13:47&nbsp;2011</span>
    <span class="description">acd [...] weirdness.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28977] read_file and write_fail can fail due to EINTR</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 23 May 2011 14:13:38 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Slurp [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andrew Danforth &lt;acd [...] weirdness.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/938341/487212/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/487212">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 36b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Test case attached.  Seems to work.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/938341/487213/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/487213">with headers</a>
<br />
<span class="downloadcontenttype">text/html 37b</span>
</div>
<div class="messagebody">
</div>
</div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/938341/487214/signal.t">Download signal.t</a><br />
<span class="downloadcontenttype">text/x-perl 350b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-938586" href="/Public/Bug/Display.html?id=28977#txn-938586">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;01:13:44&nbsp;2011</span>
    <span class="description">uri [...] sysarch.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/938586/487614/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/487614">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 356b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">couple of comments. this patch is against .12 which is fairly old now as
i have been crazy doing releases. current is .18 on cpan and this patch
will get into .19. also the indents/formatting seem to be lost which
isn&#39;t big but it makes it harder to see how to apply the patch &#40;which i
do by hand edit anyhow&#41;. i am patching this now and testing the test.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-938600" href="/Public/Bug/Display.html?id=28977#txn-938600">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;01:20:33&nbsp;2011</span>
    <span class="description">uri [...] sysarch.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/938600/487616/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/487616">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 210b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">a beta tarball with the patch and t/signal.t test is at:

        <span class="clickylink"><a target="new" rel="nofollow" href="http://sysarch.com/File-Slurp-9999.19.tar.gz">http://sysarch.com/File-Slurp-9999.19.tar.gz</a></span>

see if it fixes your interrupt issue and report back to me. if it works,
i will release it.

thanx,

uri
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-938602" href="/Public/Bug/Display.html?id=28977#txn-938602">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;01:20:35&nbsp;2011</span>
    <span class="description">uri [...] sysarch.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939012" href="/Public/Bug/Display.html?id=28977#txn-939012">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;20:36:12&nbsp;2011</span>
    <span class="description">acd [...] weirdness.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28977] read_file and write_fail can fail due to EINTR</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 24 May 2011 20:36:02 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Slurp [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andrew Danforth &lt;acd [...] weirdness.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/939012/488123/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488123">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 47b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Looks good to me.  Thanks for addressing this!
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/939012/488124/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488124">with headers</a>
<br />
<span class="downloadcontenttype">text/html 56b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939014" href="/Public/Bug/Display.html?id=28977#txn-939014">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;20:36:13&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-939015" href="/Public/Bug/Display.html?id=28977#txn-939015">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;20:40:34&nbsp;2011</span>
    <span class="description">acd [...] weirdness.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28977] read_file and write_fail can fail due to EINTR</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 24 May 2011 20:40:25 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Slurp [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Andrew Danforth &lt;acd [...] weirdness.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/939015/488127/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488127">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 236b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I wanted to quickly add one more thing.  My testcase might not work properly
on Windows; I&#39;m not sure how Perl on Windows handles signals and fork.  If
it won&#39;t work, you may want to do something similar to inode.t to exclude
the test.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/939015/488128/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/488128">with headers</a>
<br />
<span class="downloadcontenttype">text/html 246b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-942241" href="/Public/Bug/Display.html?id=28977#txn-942241">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;04&nbsp;02:54:54&nbsp;2011</span>
    <span class="description">uri [...] stemsystems.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28977] read_file and write_fail can fail due to EINTR</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 04 Jun 2011 02:54:39 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Slurp [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Uri Guttman&#34; &lt;uri [...] StemSystems.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/942241/489909/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/489909">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 430b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
i have put the beta of File::Slurp .19 at:

        <span class="clickylink"><a target="new" rel="nofollow" href="http://sysarch.com/File-Slurp-9999.19.tar.gz">http://sysarch.com/File-Slurp-9999.19.tar.gz</a></span>

let me know how it tests/works on your system. you are acked in the
Changes file too!

thanx,

uri

-- 
Uri Guttman  ------  uri@stemsystems.com  --------  <span class="clickylink"><a target="new" rel="nofollow" href="http://www.sysarch.com">http://www.sysarch.com</a></span> --
-----  Perl Code Review , Architecture, Development, Training, Support ------
---------  Gourmet Hot Cocoa Mix  ----  <span class="clickylink"><a target="new" rel="nofollow" href="http://bestfriendscocoa.com">http://bestfriendscocoa.com</a></span> ---------
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1011369" href="/Public/Bug/Display.html?id=28977#txn-1011369">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;14&nbsp;03:08:21&nbsp;2011</span>
    <span class="description">uri [...] sysarch.com -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1011370" href="/Public/Bug/Display.html?id=28977#txn-1011370">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;14&nbsp;03:08:21&nbsp;2011</span>
    <span class="description">uri [...] sysarch.com -  Fixed in 9999.19 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1814562" href="/Public/Bug/Display.html?id=28977#txn-1814562">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;10&nbsp;11:41:59&nbsp;2018</span>
    <span class="description">cwhitener [...] gmail.com -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.679995</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
