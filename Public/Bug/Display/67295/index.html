<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #67295 for CPAN-Meta: Causes Makefile.PL to die on ANDK/CPAN-Testers-ParseReport-0.1.18.tar.bz2</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #67295 for CPAN-Meta: Causes Makefile.PL to die on ANDK/CPAN-Testers-ParseReport-0.1.18.tar.bz2</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPAN-Meta">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPAN-Meta">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPAN-Meta">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPAN-Meta">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/Perl-Toolchain-Gang/CPAN-Meta/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPAN-Meta">CPAN-Meta CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">67295</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPAN-Meta">CPAN-Meta</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-232674-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.110930    </td>
  </tr>
  <tr id="CF-232675-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=67295">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-920064" href="/Public/Bug/Display.html?id=67295#txn-920064">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;02:50:20&nbsp;2011</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Causes Makefile.PL to die on ANDK/CPAN-Testers-ParseReport-0.1.18.tar.bz2</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/920064/477339/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/477339">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 307b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have introduced an eval trap yesterday to see which version is
responsible and it was 2.110930 as can be seen here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/860c8274-6011-11e0-9e3c-b33042987c1d">http://www.cpantesters.org/cpan/report/860c8274-6011-11e0-9e3c-b33042987c1d</a></span>

It&#39;s ironic that the fail report comes from my own box, I didn&#39;t know
that I could produce the fail myself :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-920158" href="/Public/Bug/Display.html?id=67295#txn-920158">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;09:32:58&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67295] Causes Makefile.PL to die on ANDK/CPAN-Testers-ParseReport-0.1.18.tar.bz2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 7 Apr 2011 09:32:27 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN-Meta [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/920158/477389/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/477389">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 598b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Apr 7, 2011 at 2:50 AM, Andreas Koenig via RT
&lt;bug-CPAN-Meta@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have introduced an eval trap yesterday to see which version is
&gt; responsible and it was 2.110930 as can be seen here:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/860c8274-6011-11e0-9e3c-b33042987c1d">http://www.cpantesters.org/cpan/report/860c8274-6011-11e0-9e3c-b33042987c1d</a></span>
&gt;
&gt; It&#39;s ironic that the fail report comes from my own box, I didn&#39;t know
&gt; that I could produce the fail myself :&#41;
&gt;
</div>
Looks like a bug in EU::MM -- it&#39;s putting a version object into the
CPAN::Meta data structure.

I should probably put some protection against that during serialization of META.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-920161" href="/Public/Bug/Display.html?id=67295#txn-920161">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;09:32:59&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-920882" href="/Public/Bug/Display.html?id=67295#txn-920882">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;09&nbsp;05:04:23&nbsp;2011</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/920882/477795/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/477795">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The issue there is not a version object in &#34;version&#34; but in &#34;provides&#34;.

I&#39;d like CPAN::Meta to handle version objects &#40;and any overloaded
object&#41; rather than having to prefilter the input.  Maybe special case
version objects or just always stringify anywhere a string-like thing is
needed.

Here&#39;s what gets fed to CPAN::Meta-&gt;create...

CPAN::Meta::create&#40;/Users/schwern/perl5/perlbrew/perls/perl-v5.12.2/lib/site_perl/5.12.2/CPAN/Meta.pm:145&#41;:
145:      my $version = __PACKAGE__-&gt;VERSION || 2;
  DB&lt;6&gt; x $struct                                                      
                            
0  HASH&#40;0x100b1ecf0&#41;
   &#39;abstract&#39; =&gt; &#39;parse reports to www.cpantesters.org from various sources&#39;
   &#39;author&#39; =&gt; ARRAY&#40;0x100eac748&#41;
        empty array
   &#39;build_requires&#39; =&gt; HASH&#40;0x100eac838&#41;
      &#39;ExtUtils::MakeMaker&#39; =&gt; 0
   &#39;configure_requires&#39; =&gt; HASH&#40;0x100eac760&#41;
      &#39;ExtUtils::MakeMaker&#39; =&gt; 0
   &#39;distribution_type&#39; =&gt; &#39;module&#39;
   &#39;dynamic_config&#39; =&gt; 1
   &#39;generated_by&#39; =&gt; &#39;ExtUtils::MakeMaker version 6.571&#39;
   &#39;license&#39; =&gt; &#39;perl&#39;
   &#39;meta-spec&#39; =&gt; HASH&#40;0x100eac850&#41;
      &#39;url&#39; =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.4.html&#39;">http://module-build.sourceforge.net/META-spec-v1.4.html&#39;</a></span>
      &#39;version&#39; =&gt; 1.4
   &#39;name&#39; =&gt; &#39;CPAN-Testers-ParseReport&#39;
   &#39;no_index&#39; =&gt; HASH&#40;0x100e79f48&#41;
      &#39;directory&#39; =&gt; ARRAY&#40;0x100eac6a0&#41;
         0  &#39;t&#39;
         1  &#39;inc&#39;
   &#39;provides&#39; =&gt; HASH&#40;0x100d605a0&#41;
      &#39;CPAN::Testers::ParseReport&#39; =&gt; HASH&#40;0x100d606a8&#41;
         &#39;file&#39; =&gt; &#39;lib/CPAN/Testers/ParseReport.pm&#39;
         &#39;version&#39; =&gt; version=HASH&#40;0x100bf01a8&#41;
            &#39;original&#39; =&gt; &#39;0.1.18&#39;
            &#39;qv&#39; =&gt; 1
            &#39;version&#39; =&gt; ARRAY&#40;0x100c41e20&#41;
               0  0
               1  1
               2  18
   &#39;repository&#39; =&gt; &#39;git://repo.or.cz/cpan-testers-parsereport.git&#39;
   &#39;requires&#39; =&gt; HASH&#40;0x100b23278&#41;
      &#39;CPAN::Meta::Converter&#39; =&gt; 2.110580
      &#39;CPAN::Meta::YAML&#39; =&gt; 0.003
      &#39;Class::ISA&#39; =&gt; 0
      &#39;Config::Perl::V&#39; =&gt; 0
      &#39;DateTime&#39; =&gt; 0
      &#39;DateTime::Format::Strptime&#39; =&gt; 0
      &#39;File::Path&#39; =&gt; 1.08
      &#39;File::Spec&#39; =&gt; 3.33
      &#39;Getopt::Long&#39; =&gt; 0
      &#39;HTML::Entities&#39; =&gt; 0
      &#39;Hash::Util&#39; =&gt; 0
      &#39;IO::Prompt&#39; =&gt; 0
      &#39;JSON::PP&#39; =&gt; 2.27105
      &#39;LWP::UserAgent&#39; =&gt; 0
      &#39;List::Util&#39; =&gt; 0
      &#39;MIME::QuotedPrint&#39; =&gt; 3.07
      &#39;Parse::CPAN::Meta&#39; =&gt; 1.4401
      &#39;Pod::Usage&#39; =&gt; 1.33
      &#39;Statistics::Regression&#39; =&gt; 0
      &#39;Test::More&#39; =&gt; 0
      &#39;Test::Pod&#39; =&gt; 0
      &#39;Time::Local&#39; =&gt; 1.11
      &#39;XML::LibXML&#39; =&gt; 0
      &#39;XML::LibXML::XPathContext&#39; =&gt; 0
      &#39;YAML::Syck&#39; =&gt; 0
      &#39;version&#39; =&gt; 0.88
   &#39;version&#39; =&gt; &#39;v0.1.18&#39;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-920885" href="/Public/Bug/Display.html?id=67295#txn-920885">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;09&nbsp;05:42:26&nbsp;2011</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/920885/477798/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/477798">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 241b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dagolden/cpan-meta/pull/4">https://github.com/dagolden/cpan-meta/pull/4</a></span>

It was because the dclone&#40;&#41; work around uses JSON::PP which does not
have a way of universally converting objects.  So I hacked in a local
UNIVERSAL::TO_JSON.  This is what JSON.pm does.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-920893" href="/Public/Bug/Display.html?id=67295#txn-920893">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;09&nbsp;08:00:03&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/920893/477801/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/477801">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 698b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Apr 09 05:42:26 2011, MSCHWERN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fixed in <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dagolden/cpan-meta/pull/4">https://github.com/dagolden/cpan-meta/pull/4</a></span>
&gt; 
&gt; It was because the dclone&#40;&#41; work around uses JSON::PP which does not
&gt; have a way of universally converting objects.  So I hacked in a local
&gt; UNIVERSAL::TO_JSON.  This is what JSON.pm does.
</div>
Thanks, I&#39;ll check it out.

But I don&#39;t want to see version objects &#40;or any objects&#41; in CPAN::Meta.

I&#39;ll add some validation to ensure all inputs are non-blessed and I&#39;ll
add a converter to stringify anything it does find.  So lazy_validation
will normalize things correctly, but the default will be strict.

EU::MM can use lazy_validation if it can&#39;t be bothered to ensure proper
inputs.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-937044" href="/Public/Bug/Display.html?id=67295#txn-937044">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;20:05:31&nbsp;2011</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/937044/486509/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/486509">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Apr 09 08:00:03 2011, DAGOLDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; EU::MM can use lazy_validation if it can&#39;t be bothered to ensure
</div>proper inputs.

MakeMaker is using lazy_validation.  This particular ticket is about a
bug in CPAN::Meta&#39;s dclone implementation which rejects objects because
it happens to use a JSON parser to do the cloning.  It&#39;s orthogonal to
validation.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But I don&#39;t want to see version objects &#40;or any objects&#41; in CPAN::Meta.
&gt; 
&gt; I&#39;ll add some validation to ensure all inputs are non-blessed and I&#39;ll
&gt; add a converter to stringify anything it does find.  So lazy_validation
&gt; will normalize things correctly, but the default will be strict.
</div>
If I&#39;m reading this correctly, the default will be to *not* honor object
stringification?  This means any use of well behaved version objects or
file objects will have to be manually stringified before handing over to
CPAN::Meta?  That&#39;s an encapsulation violation and a pain in the ass for
the user.

Since there&#39;s nothing wrong with using version or file objects for
things like version and provides, they&#39;re even built into the spec, that
would make lazy_validation effectively mandatory.  Or everybody using
strict has to write a pre-filter... which means nobody will use strict
mode.  While I understand you want to prevent someone from passing an
object in where it doesn&#39;t belong, erroring on every object makes strict
mode effectively useless.

In short, when is strict mode useful?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-937148" href="/Public/Bug/Display.html?id=67295#txn-937148">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;22:42:13&nbsp;2011</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/937148/486565/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/486565">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 285b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Strict mode, of a sort, is useful to prevent the bugs allowed by Perl&#39;s
annoying default object stringification behavior.

I&#39;d be in favor of stringifying objects that provide stringification
behavior and barfing on others -- by default.

David, what do you think about this?

-- 
rjbs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-937155" href="/Public/Bug/Display.html?id=67295#txn-937155">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;23:12:34&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67295] Causes Makefile.PL to die on ANDK/CPAN-Testers-ParseReport-0.1.18.tar.bz2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 May 2011 23:12:05 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN-Meta [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/937155/486572/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/486572">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 246b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, May 19, 2011 at 10:42 PM, Ricardo Signes via RT
&lt;bug-CPAN-Meta@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d be in favor of stringifying objects that provide stringification
&gt; behavior and barfing on others -- by default.
</div>
That&#39;s acceptable to me.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-937158" href="/Public/Bug/Display.html?id=67295#txn-937158">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;23:15:11&nbsp;2011</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/937158/486575/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/486575">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 294b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m traveling this weekend, but I&#39;ll see if I can have a swing at this,
at least for the version-specific use case.

Schwern, can you provide a failing test case?  I can devise one, but you
might already have an idea of exactly what you&#39;re expecting to work in
an easy-to-testify way?

-- 
rjbs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-937166" href="/Public/Bug/Display.html?id=67295#txn-937166">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;23:24:30&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #67295] Causes Makefile.PL to die on ANDK/CPAN-Testers-ParseReport-0.1.18.tar.bz2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 May 2011 23:24:01 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CPAN-Meta [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/937166/486578/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/486578">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 744b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, May 19, 2011 at 11:15 PM, Ricardo Signes via RT
&lt;bug-CPAN-Meta@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m traveling this weekend, but I&#39;ll see if I can have a swing at this,
&gt; at least for the version-specific use case.
</div>
Thanks.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Schwern, can you provide a failing test case?  I can devise one, but you
&gt; might already have an idea of exactly what you&#39;re expecting to work in
&gt; an easy-to-testify way?
</div>
E.g. Using a Path::Class::File object as a filename for a &#39;provides&#39; field.

Objects that provide stringification should be able to be used
transparently as strings.  Default object stringification is one of
those things that makes some things easy and other things really
annoying.

Makes me want a &#34;no object::stringification&#34; pragma.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-937533" href="/Public/Bug/Display.html?id=67295#txn-937533">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;21&nbsp;03:23:13&nbsp;2011</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/937533/486785/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/486785">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 885b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu May 19 23:15:11 2011, RJBS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Schwern, can you provide a failing test case?  I can devise one, but you
&gt; might already have an idea of exactly what you&#39;re expecting to work in
&gt; an easy-to-testify way?
</div>
There&#39;s a patch with a test languishing here which covers the version
object case:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dagolden/cpan-meta/pull/4">https://github.com/dagolden/cpan-meta/pull/4</a></span>

Other types of stringified objects are important, but I haven&#39;t run into
problems with them in the wild.  We&#39;ve hit a bunch of distributions that
use version objects.


dagolden@cpan.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Makes me want a &#34;no object::stringification&#34; pragma.
</div>
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?stringification">http://search.cpan.org/perldoc?stringification</a></span> though it currently
doesn&#39;t deny objects the author is considering it.

I tried some tricks to locally define a UNIVERSAL stringification which
would die, but it seems overloaded methods are attached to an object at
the time of their creation.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-962852" href="/Public/Bug/Display.html?id=67295#txn-962852">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;02&nbsp;16:37:44&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/962852/501043/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/501043">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 19b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Patched in the repo
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-962855" href="/Public/Bug/Display.html?id=67295#txn-962855">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;02&nbsp;16:37:45&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-963000" href="/Public/Bug/Display.html?id=67295#txn-963000">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;02&nbsp;22:26:45&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/963000/501115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/501115">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 36b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">CPAN::Meta 2.112150 released to CPAN
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-963003" href="/Public/Bug/Display.html?id=67295#txn-963003">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;02&nbsp;22:26:46&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;patched&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-963004" href="/Public/Bug/Display.html?id=67295#txn-963004">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;02&nbsp;22:26:46&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.807074</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
