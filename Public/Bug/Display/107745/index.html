<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #107745 for Map-Tube: Improvements to get_stations&#40;&#41; method</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #107745 for Map-Tube: Improvements to get_stations&#40;&#41; method</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Map-Tube/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Map-Tube/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Map-Tube/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Map-Tube/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Map-Tube">Map-Tube CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">107745</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Map-Tube/Active/">Map-Tube</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MANWAR [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
GWS [...] cpan.org

<br />
SKIM [...] cpan.org

<br />
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-235348-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.02    </td>
  </tr>
  <tr id="CF-235349-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
3.11    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




get_shortest_route.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1547612/826382/get_shortest_route.pl">
Sat Oct 24 11:32:19 2015 (447b) by SKIM [...] cpan.org
</a>
</font></li>
</ul>


get_stations.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1546995/826028/get_stations.pl">
Thu Oct 22 08:00:07 2015 (426b) by SKIM [...] cpan.org
</a>
</font></li>
</ul>


Map-Tube-3.10.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1547173/826127/Map-Tube-3.10.tar.gz">
Thu Oct 22 13:42:46 2015 (22.2k) by MANWAR [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1546998/826033/Map-Tube-3.10.tar.gz">
Thu Oct 22 08:26:53 2015 (22.2k) by MANWAR [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1546984/826018/Map-Tube-3.10.tar.gz">
Thu Oct 22 07:50:07 2015 (22.1k) by MANWAR [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1546951/825995/Map-Tube-3.10.tar.gz">
Thu Oct 22 06:13:26 2015 (21.9k) by MANWAR [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1546746/825882/Map-Tube-3.10.tar.gz">
Wed Oct 21 12:12:22 2015 (21.9k) by MANWAR [...] cpan.org
</a>
</font></li>
</ul>


Map-Tube-Delhi-0.35.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1546374/825670/Map-Tube-Delhi-0.35.tar.gz">
Tue Oct 20 06:54:38 2015 (18.4k) by MANWAR [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;13&nbsp;03:57:02&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Improvements to get_stations&#40;&#41; method</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Is it possible improve get_stations&#40;&#41; method to return list of stations in real station order?
I think, that is right way.
In actual situation this returns random list and it isn&#39;t useful.

I am thinking about it and it has two problems:
- Where is a begin on line. We can tell in XML file where is the begin.
- I think, that is possible line with tree. But... I don&#39;t see it now.

Regards,
M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;05:34:35&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;05:36:36&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Yes it is possible to get stations in ordered list as long as the map &#40;xml data&#41; has this information in a sensible format.

I will see what I can do without breaking any existing functionalities.

Best Regards,
Mohammad S Anwar
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;05:36:36&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;14&nbsp;05:40:01&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne St 14.říj.2015 05:36:36, MANWAR napsal&#40;a&#41;:
Hi,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes it is possible to get stations in ordered list as long as the map
&gt; &#40;xml data&#41; has this information in a sensible format.
&gt; 
&gt; I will see what I can do without breaking any existing
&gt; functionalities.
</div>
Ok, thanks.

M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;20&nbsp;06:43:25&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Requestor SREZIC added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;20&nbsp;06:43:28&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Requestor GWS added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;20&nbsp;06:54:38&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michael,

I have pushed proposed solution to the feature you requested.

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Manwar/Map-Tube">https://github.com/Manwar/Map-Tube</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/release/MANWAR/Map-Tube-3.09">https://metacpan.org/release/MANWAR/Map-Tube-3.09</a></span>

Please bear in mind, the change is backward compatible.

I have tested the above changes against Delhi map as it is not huge as London map. Please find attached the changed code, not yet published.

In order to get the above change incorporated, you would need to make slight change to the map xml data as shown below:

Old way:
&lt;station id=&#34;KIRTI-NAGAR&#34; name=&#34;Kirti Nagar&#34;  line=&#34;Blue,Green&#34;  link=&#34;B23,B21,G14&#34;/&gt;

New way:
&lt;station id=&#34;KIRTI-NAGAR&#34; name=&#34;Kirti Nagar&#34;  line=&#34;Blue:22,Green:15&#34;  link=&#34;B23,B21,G14&#34;/&gt;

The &#39;line&#39; attribute of the &#39;station&#39; node expect to have station index for the corresponding line. So the above line says that the station &#34;Kirti Nagar&#34; index is 22 on Blue Line but 15 on Green Line.

Here is the code to test the change:

use strict; use warnings;
use Map::Tube::Delhi;

my $map = Map::Tube::Delhi-&gt;new;
print join&#40;&#34;\n&#34;, @{$map-&gt;get_stations&#40;&#39;Red&#39;&#41;}&#41;, &#34;\n&#34;;

As always, please do share your views.

Many Thanks.

Best Regards,
Mohammad S Anwar
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Map-Tube-Delhi-0.35.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1546374/825670/Map-Tube-Delhi-0.35.tar.gz">Download Map-Tube-Delhi-0.35.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 18.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;04:28:44&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Út 20.říj.2015 06:54:38, MANWAR napsal&#40;a&#41;:
Hi Mohammad,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have pushed proposed solution to the feature you requested.
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/Manwar/Map-Tube">https://github.com/Manwar/Map-Tube</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/release/MANWAR/Map-Tube-3.09">https://metacpan.org/release/MANWAR/Map-Tube-3.09</a></span>
</div>[SNIP] 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As always, please do share your views.
</div>
I think, that&#39;s ok.

I have two things:
1&#41; When you added colon to &#39;line&#39; attribute, you must rewrite code to accept &#34;Line ID&#34; as &#39;line&#39; attribute. a&#41; that&#39;s right way b&#41; it is not clean, when you have colon in line name.

2&#41; I rewrite Bucharest metro to this way. It&#39;s ok.
I rewrite Bucharest metro to situation with explicit line changes.
There are two types:
- &#34;Station&#34; as platform or bridge change. 
- &#34;Tunnel&#34; as some tunnel change.
Then i have problem with implicit station name
- New is &#34;Piața Victoriei &#40;Linia M1, Station&#41;&#34;
- Old was &#34;Piața Victoriei &#40;Linia M1, Linia M2&#41;&#34;.
I think, that right way is name of other line, no change name. 
See <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tupinek/Map-Tube-Bucharest">https://github.com/tupinek/Map-Tube-Bucharest</a></span> and t/Map-Tube-Bucharest/10-get_stations.t test.

Many thanks.

Kind regards,
Michal
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;21&nbsp;12:12:22&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michal,

I have incorporated your first point in the attached code &#40;not yet published&#41;. Please give it a go. I need more clarification regarding your second point, please.

Here is the report that shows expected state with the proposed changes:

Gisbert W. Selke

[FAIL] Map-Tube-Beijing v0.01
[PASS] Map-Tube-Glasgow v0.07
[PASS] Map-Tube-KoelnBonn v0.09
[PASS] Map-Tube-Lyon v0.06

Slaven Rezic

[PASS] Map::Tube::Berlin v0.11

Michal Spacek

[FAIL] Map-Tube-Bucharest v0.07
[FAIL] Map-Tube-Budapest v0.04
[FAIL] Map-Tube-Dnipropetrovsk v0.05
[FAIL] Map-Tube-Kazan v0.04
[FAIL] Map-Tube-Kharkiv v0.05
[FAIL] Map-Tube-Kiev v0.05
[FAIL] Map-Tube-KualaLumpur v0.05
[FAIL] Map-Tube-Malaga v0.15
[FAIL] Map-Tube-Minsk v0.05
[FAIL] Map-Tube-Moscow v0.07
[FAIL] Map-Tube-Nanjing v0.04
[FAIL] Map-Tube-NizhnyNovgorod v0.03
[FAIL] Map-Tube-Novosibirsk v0.03
[FAIL] Map-Tube-Prague v0.13
[FAIL] Map-Tube-SaintPetersburg v0.05
[FAIL] Map-Tube-Samara v0.05
[FAIL] Map-Tube-Singapore v0.02
[FAIL] Map-Tube-Sofia v0.07
[FAIL] Map-Tube-Tbilisi v0.04
[FAIL] Map-Tube-Vienna v0.06
[FAIL] Map-Tube-Warsaw v0.06
[FAIL] Map-Tube-Yekaterinburg v0.05

Best Regards,
Mohammad S Anwar
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Map-Tube-3.10.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1546746/825882/Map-Tube-3.10.tar.gz">Download Map-Tube-3.10.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 21.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;05:02:29&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne St 21.říj.2015 12:12:22, MANWAR napsal&#40;a&#41;:
Hi Mohammad,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have incorporated your first point in the attached code &#40;not yet
&gt; published&#41;. Please give it a go. I need more clarification regarding
&gt; your second point, please.
</div>
Problems:
1&#41; No returned $line on get_line_by_id&#40;&#41; method.

2&#41; On get_line_by_name&#40;&#41; method, you use _get_line_object&#40;&#41;.
In _get_line_object&#40;&#41; is undefined $self-&gt;{_lines}-&gt;{$line_id}-&gt;name on other_links lines, because this &#34;lines&#34; haven&#39;t name.
This cause problem with Test::Map::Tube::ok_map&#40;&#41; in _validate_multi_lined_nodes&#40;&#41; method too.

Kind regards,
Michal
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;06:13:26&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michal,

I noticed that when I tested against my map.
Thanks for pointing out the issues.

I have attached updated code. Please give it a try.

Best Regards,
Mohammad S Anwar
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Map-Tube-3.10.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1546951/825995/Map-Tube-3.10.tar.gz">Download Map-Tube-3.10.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 21.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;06:24:56&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Čt 22.říj.2015 06:13:26, MANWAR napsal&#40;a&#41;:
Hi Mohammad,
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I noticed that when I tested against my map.
&gt; Thanks for pointing out the issues.
&gt; 
&gt; I have attached updated code. Please give it a try.
</div>
Change with Line IDs is ok.
Thanks.

And what about proposed change with lines in station?
&#39;Piața Victoriei &#40;Linia M1, Station&#41;&#39; vs &#39;Piața Victoriei &#40;Linia M1, Linia M2&#41;&#39;

Kind regards,
M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;07:50:07&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michal,

Please find attached updated code to resolve the second point.

Best Regards,
Mohammad S Anwar
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Map-Tube-3.10.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1546984/826018/Map-Tube-3.10.tar.gz">Download Map-Tube-3.10.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 22.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;08:00:07&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Čt 22.říj.2015 07:50:07, MANWAR napsal&#40;a&#41;:
Hi Mohammad,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please find attached updated code to resolve the second point.
</div>
On my actual Bucharest repository &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/tupinek/Map-Tube-Bucharest/&#41;">https://github.com/tupinek/Map-Tube-Bucharest/&#41;</a></span> has example script from attachment this output:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ./get_stations.pl &#39;Linia M1&#39;
</div>Dristor 2 &#40;Linia M1&#41;
Piața Muncii &#40;Linia M1&#41;
Iancului &#40;Linia M1&#41;
Obor &#40;Linia M1&#41;
Ștefan cel Mare &#40;Linia M1&#41;
Piața Victoriei &#40;Linia M1, Station&#41;
Gara de Nord &#40;Linia M1&#41;
Basarab &#40;Linia M1, Station&#41;
Crângași &#40;Linia M1&#41;
Petrache Poenaru &#40;Linia M1&#41;
Grozăvești &#40;Linia M1&#41;
Eroilor &#40;Linia M1, Station&#41;
Izvor &#40;Linia M1, Station&#41;
Piața Unirii 1 &#40;Linia M1, Station, Tunnel&#41;
Timpuri Noi &#40;Linia M1, Station&#41;
Mihai Bravu &#40;Linia M1, Station&#41;
Dristor 1 &#40;Linia M1, Station&#41;
Nicolae Grigorescu &#40;Linia M1, Station&#41;
Titan &#40;Linia M1&#41;
Costin Georgian &#40;Linia M1&#41;
Republica &#40;Linia M1&#41;
Pantelimon &#40;Linia M1&#41;

This is not, what i want :-&#41;

BTW: Isn&#39;t better add your changes to repository step by step?
I don&#39;t see changes between 1&#41; and 2&#41;.

Kind regards,
M.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> get_stations.pl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/env perl

# Pragmas.
use strict;
use warnings;

# Modules.
use Encode qw&#40;encode_utf8&#41;;
use Map::Tube::Bucharest;

# Arguments.
if &#40;@ARGV &lt; 1&#41; {
	print STDERR &#34;Usage: $0 line\n&#34;;
	exit 1;
}
my $line = $ARGV[0];

# Object.
my $metro = Map::Tube::Bucharest-&gt;new;

# Get tables.
my $stations_ar = $metro-&gt;get_stations&#40;$line&#41;;

# Print lines.
foreach my $station &#40;@{$stations_ar}&#41; {
	print encode_utf8&#40;$station&#41;.&#34;\n&#34;;
}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;08:26:53&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michal,

Please try now, attached code.

Best Regards,
Mohammad S Anwar
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Map-Tube-3.10.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1546998/826033/Map-Tube-3.10.tar.gz">Download Map-Tube-3.10.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 22.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;09:08:08&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Čt 22.říj.2015 08:26:53, MANWAR napsal&#40;a&#41;:
Hi Mohammad,
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please try now, attached code.
</div>
Station names are ok.

But get_stations&#40;&#41; returns unsorted stations.

Kind regards,
M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;13:42:46&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michal,

Please find attached the updated code.

Best Regards,
Mohammad S Anwar
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Map-Tube-3.10.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1547173/826127/Map-Tube-3.10.tar.gz">Download Map-Tube-3.10.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 22.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;13:53:29&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Čt 22.říj.2015 13:42:46, MANWAR napsal&#40;a&#41;:
Hi Mohammad,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please find attached the updated code.
</div>
So... last thing - lines in station string isn&#39;t sorted.
Actually they returns random order of its.
I think that sort is better. For test, for readability.

Kind regards,
M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:08:15&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Michal, 

Can this be close now?

Best Regards,
Mohammad S Anwar
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:11:53&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Čt 22.říj.2015 14:08:15, MANWAR napsal&#40;a&#41;:
Hi, 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can this be close now?
</div>
Yes and what about my last message, which i send?

Kind regards,
M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;14:15:21&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Do you mean, line names for a station should be alphabetically sorted?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;22&nbsp;17:38:17&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne Čt 22.říj.2015 14:15:21, MANWAR napsal&#40;a&#41;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Do you mean, line names for a station should be alphabetically sorted?
</div>
Yes.

M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;24&nbsp;11:32:19&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On my Map::Tube::Sofia is regression in tests between Map::Tube 3.10 and 3.11.
Example is in attachment.

Output with Map::Tube 3.10:
pepa:~/perl/MODULES/Map-Tube-Sofia&gt; ./get_shortest_route.pl Люлин &#39;Ломско шосе&#39;
Route: Люлин &#40;Първи метродиаметър&#41;, Сливница &#40;Първи метродиаметър&#41;, Обеля &#40;Първи метродиаметър, Втори метродиаметър&#41;, Ломско шосе &#40;Втори метродиаметър&#41;

Output with Map::Tube 3.11:
pepa:~/perl/MODULES/Map-Tube-Sofia&gt; ./get_shortest_route.pl Люлин &#39;Ломско шосе&#39;
Route: Люлин &#40;&#41;, Сливница &#40;&#41;, Обеля &#40;&#41;, Ломско шосе &#40;&#41;

Kind regards,
M.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> get_shortest_route.pl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/env perl

# Pragmas.
use strict;
use warnings;

# Modules.
use Encode qw&#40;decode_utf8 encode_utf8&#41;;
use Map::Tube::Sofia;

# Arguments.
if &#40;@ARGV &lt; 2&#41; {
	print STDERR &#34;Usage: $0 from to\n&#34;;
	exit 1;
}
my $from = decode_utf8&#40;$ARGV[0]&#41;;
my $to = decode_utf8&#40;$ARGV[1]&#41;;

# Object.
my $metro = Map::Tube::Sofia-&gt;new;

# Get route.
my $route = $metro-&gt;get_shortest_route&#40;$from, $to&#41;;

# Print route.
print &#34;Route: &#34;.encode_utf8&#40;$route&#41;.&#34;\n&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;24&nbsp;11:37:50&nbsp;2015</span>
    <span class="description">SKIM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dne So 24.říj.2015 11:32:19, SKIM napsal&#40;a&#41;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On my Map::Tube::Sofia is regression in tests between Map::Tube 3.10
&gt; and 3.11.
</div>[SNIP]

Ups.. This is regression on old XML schema with line name in station element.
This means, that changes with line name vs line id are no backward compatible.

I am rewriting all my modules to new XML version.

Kind regards,
M.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;10:57:03&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Fixed in 3.11 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;10:57:37&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Closing the ticket now.

Best Regards,
Mohammad S Anwar
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;27&nbsp;10:57:43&nbsp;2015</span>
    <span class="description">MANWAR [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
