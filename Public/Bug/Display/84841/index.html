<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #84841 for Net-Z3950-Simple2ZOOM: simple2zoom is throwing segmentation faults on Ubuntu 12</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #84841 for Net-Z3950-Simple2ZOOM: simple2zoom is throwing segmentation faults on Ubuntu 12</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-Z3950-Simple2ZOOM/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-Z3950-Simple2ZOOM/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-Z3950-Simple2ZOOM/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-Z3950-Simple2ZOOM/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Z3950-Simple2ZOOM">Net-Z3950-Simple2ZOOM CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">84841</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-Z3950-Simple2ZOOM/Active/">Net-Z3950-Simple2ZOOM</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
alan.rykhus [...] mnsu.edu

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45446-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45447-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;24&nbsp;16:28:36&nbsp;2013</span>
    <span class="description">alan.rykhus [...] mnsu.edu -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> simple2zoom is throwing segmentation faults on Ubuntu 12</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Apr 2013 15:28:20 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Z3950-Simple2ZOOM [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Alan Rykhus &lt;alan.rykhus [...] mnsu.edu&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

This is a bug I filed with the Evergreen group. It was suggested that it
be sent to here. I&#39;m not sure how to replicate the problem, I can only
tell you that our Z39.50 server gets used a lot and we were seeing a lot
of these errors.

If you have any questions, feel free to contact me -- al

The Evergreen bug report:

While simple2zoom is a stand alone product, it is used by Evergreen as
its Z39.50 server. If you are running Ubuntu 12 the simple2zoom program
is aborting throwing segmentation faults. This does not happen on Ubuntu
10.

If you run simple2zoom on an Ubuntu 10 server you can point it to the
newer Evergreen server that is running on Ubuntu 12 without any issues.
But running an older version of Ubuntu and a separate server just for
Z39.50 access is not desirable.

To see if you are having this issue you can look in the system log and
sees lines like:

Apr 24 08:04:49 ecrl kernel: [1243984.330118] simple2zoom[27566]:
segfault at 12c1 ip 00007f1c9ceb5be1 sp 00007fff3de0b198 error 4 in
libc-2.15.so[7f1c9cd53000+1b5000]

Apr 24 09:19:45 ecrl kernel: [1248471.191697] simple2zoom[31188] general
protection ip:7f1c9ceb5c05 sp:7fff3de0b198 error:0 in
libc-2.15.so[7f1c9cd53000+1b5000]

Our current production machine that is seeing the segmentation faults

Evergreen version - 2.3.1
OpenSRF version - 2.1.2
Postgres version - 9.1
Linux - Ubuntu 12 kernel 3.2.0-40-generic

Our former production machine that we are using as our simple2zoom
server because it is stable

Evergreen version - 2.0.9
OpenSRF version - 2.1.2
Postgres version - 9.0
Linux - Ubuntu 10 kernel 2.6.32-46-server

I also have some further information as to things that are required for
simple2zoom. I tried to install simle2zoom on a machine that was not
running Evergreen and these are some of the dependencies that came up. I
then looked at the 2 machines to see what version of them they were each
running. I&#39;m guessing that either one of these introduced the problem,
or libc itself.

UBUNTU 10.04.4 LTS

perl 5.10.1

libc-2.11.1.so

libgcrypt11-dev 1.4.4-5ubuntu2.1
libgnutls-dev 2.8.5-2ubuntu0.3
libgpg-error-dev 1.6-1ubuntu2
libicu-dev 4.2.1-3ubuntu0.10.04.1
libicu42 4.2.1-3ubuntu0.10.04.1
libmarc-charset-perl 1.1-1
libmarc-record-perl 2.0.0-2
libmarc-xml-perl 0.92-1
libtasn1-3-dev 2.4-1ubuntu0.1
libwrap0-dev 7.6.q-18
libxml2-dev 2.7.6.dfsg-1ubuntu1.8
libxslt1-dev 1.1.26-1ubuntu1.2
libyaz3 3.0.52-1
libyaz3-dev 3.0.52-1
tcl8.4 8.4.19-4
yaz 3.0.52-1

UBUNTU 12.04.2 LTS 

perl 5.14.2

libc-2.15.so

libgcrypt11 version 1.5
libgnutls version 2.12.14
ibgpg-error-dev version 1.10
libicu-dev Version: 4.8.1.1-3
libicu42 Version: 4.8.1.1-3
libmarc-charset-perl Version: 1.33-1
libmarc-record-perl ersion: 2.0.3-1
libmarc-xml-perl Version: 0.92-1
libtasn1-3-dev Version: 2.10-1ubuntu1.1
libwrap0-dev Version: 7.6.q-21
libxml2-dev Version: 2.7.8.dfsg-5.1ubuntu4.4
libxslt1-dev Version: 1.1.26-8ubuntu1.3
libyaz3 Version: 4.2.18-1build1
libyaz3-dev Version: 4.2.18-1build1
tcl8.4 Version: 8.4.19-4ubuntu3
yaz Version: 4.2.18-1build1



-- 
Alan Rykhus
PALS, A Program of the Minnesota State Colleges and Universities 
&#40;507&#41;389-1975
alan.rykhus@mnsu.edu
&#34;Be pleasant until ten o&#39;clock in the morning and the rest of the day
will take care of itself.&#34; ~ Elbert Hubbard
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;13&nbsp;19:33:28&nbsp;2014</span>
    <span class="description">https://coffeecode.net/ -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dan Scott</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 24 16:28:36 2013, alan.rykhus@mnsu.edu wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; This is a bug I filed with the Evergreen group. It was suggested that it
&gt; be sent to here. I&#39;m not sure how to replicate the problem, I can only
&gt; tell you that our Z39.50 server gets used a lot and we were seeing a lot
&gt; of these errors.
</div>
For what it&#39;s worth, it looks like using Index Data&#39;s own packages resolves this problem. Thanks to Robin Johnson at SITKA for figuring this out &#40;ideally, Ubuntu itself would resolve the problem with their own packages but sometimes you just need a solution&#41;.

See <span class="clickylink"><a target="new" rel="nofollow" href="http://ftp.indexdata.dk/pub/yaz/ubuntu/README">http://ftp.indexdata.dk/pub/yaz/ubuntu/README</a></span> for instructions on using Index Data&#39;s packages.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;13&nbsp;19:33:29&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
