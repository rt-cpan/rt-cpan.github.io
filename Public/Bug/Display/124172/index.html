<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #124172 for Mail-IMAPClient: Mailbox names are UTF7</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #124172 for Mail-IMAPClient: Mailbox names are UTF7</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Mail-IMAPClient">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Mail-IMAPClient">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Mail-IMAPClient">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Mail-IMAPClient">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mail-IMAPClient">Mail-IMAPClient CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">124172</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Mail-IMAPClient">Mail-IMAPClient</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MARKOV [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19960-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.39    </td>
  </tr>
  <tr id="CF-19961-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=124172">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1767105" href="/Public/Bug/Display.html?id=124172#txn-1767105">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;06:02:58&nbsp;2018</span>
    <span class="description">MARKOV [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Mailbox names are UTF7</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1767105/951059/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/951059">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Phil,

&#40;you may remember me as previous maintainer of the module&#41;  I am so glad you maintain Mail::IMAPClient so well ;-b  Nearly never I need IMAP; it is hard to fix things when you do not use it yourself.  However... at the moment I have to rewrite code which is based on &#34;our&#34; powerful module.

I have an issue.  In the code which I have to rework, I read this:

   use Encode::IMAPUTF7;
   $mailbox = encode&#40;&#39;IMAP-UTF-7&#39;, decode_entities $mailbox&#41; if $mailbox;
   $archiveMailbox = encode&#40;&#39;IMAP-UTF-7&#39;, decode_entities $archiveMailbox&#41; if $archiveMailbox;

Reading <span class="clickylink"><a target="new" rel="nofollow" href="http://www.fetchmail.info/Mailbox-Names-UTF7.html">http://www.fetchmail.info/Mailbox-Names-UTF7.html</a></span> I think this code is correct: the perl internal string must be converted explicitly to UTF7.  I do not see this in the code.

This is *not* possible.

  encode&#40;&#39;IMAP-UTF-7&#39;, encode&#40;&#39;IMAP-UTF-7&#39;, $anything&#41;&#41;

So: it is not too straight-forward to solve.  However, reading Encode::IMAPUTF7 it seems that &#34;our&#34; module will already break when a mailbox name with /\&#38;.*\-/ is used.  This is a clear indicator for being IMAP-UTF-7 encoded.  So, what about

  sub select {
    my &#40; $self, $target &#41; = @_;
    defined $target or return undef;

 +  my $mailbox  = $target =~ /\&#38;.*\-/ ? $target : encode&#40;&#39;IMAP-UTF-7&#39;, $target&#41;;
 -  my $qqtarget = $self-&gt;Quote&#40;$target&#41;;
 +  my $qqtarget = $self-&gt;Quote&#40;$mailbox&#41;;

But there are more spots, like &#34;list&#34; to do the reverse.

Another &#40;none tricky, less DWIMmy&#41; solution would be to add an option.  For instance &#34;UnicodeNames&#34;

What do you think?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1767286" href="/Public/Bug/Display.html?id=124172#txn-1767286">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;17:29:41&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Per RFC3501 Mailbox names are 7-bit</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1767286/951165/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/951165">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 947b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#40;fixing the title... per spec 5.1 they are 7-bit, but as always the devil is in the details&#41;

Not to say that we couldn&#39;t do something, but for better or for worse, I&#39;d say that historically we have left making a best guess as to &#34;correct behavior&#34; when dealing with a mailbox as an exercise for the developer - along with quite a few other details...

Currently any UTF7 handling is not handled within Mail::IMAPClient at all.  To only introduce it in one unique case &#40;like select&#41; would seem to be very backwards incompatible and horribly incomplete &#40;looking at the big picture&#41;.

While we could introduce a flag &#40;but the behavior would probably be disabled by default for backwards compatibility&#41;, I&#39;m not convinced it makes sense to do that just yet.

Have a strong argument? I wonder how many servers are strict on this vs. not. It doesn&#39;t seem like we&#39;ve had many asking for us to do this, but maybe others are watching and want to chime in.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1767287" href="/Public/Bug/Display.html?id=124172#txn-1767287">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;17:29:41&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1767333" href="/Public/Bug/Display.html?id=124172#txn-1767333">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;23&nbsp;03:34:23&nbsp;2018</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1767333/951191/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/951191">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 22 17:29:41 2018, PLOBBES wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;fixing the title... per spec 5.1 they are 7-bit, but as always the
&gt; devil is in the details&#41;
</div>
They are 7-bit &#40;physical&#41;.  In application space, that is filled-in with
MIME-UTF7 encoded strings: section 5.1.3  So we are both right.

I see that rfc5738 describes full utf8 support for IMAP4... which would be
nice to have.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Not to say that we couldn&#39;t do something, but for better or for worse,
&gt; I&#39;d say that historically we have left making a best guess as to
&gt; &#34;correct behavior&#34; when dealing with a mailbox as an exercise for the
&gt; developer - along with quite a few other details...
</div>
This module as an interesting history.  When I rewrote it, it was clear that at
least 4 other people had worked on it.  I would not have designed the interface
like that, but it does work.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Currently any UTF7 handling is not handled within Mail::IMAPClient at
&gt; all.  To only introduce it in one unique case &#40;like select&#41; would seem
&gt; to be very backwards incompatible and horribly incomplete &#40;looking at
&gt; the big picture&#41;.
</div>
Well... it is the RFC.
When I design interfaces for my own modules, I go into extend to hide charset
issues for the users.  I consider interfacing to the out-side world as my problem,
the strings at Perl-side should be &#34;perl internal&#34; &#40;cp1252 or utf8-non-strict&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While we could introduce a flag &#40;but the behavior would probably be
&gt; disabled by default for backwards compatibility&#41;, I&#39;m not convinced it
&gt; makes sense to do that just yet.
</div>
Conforming IMAP4 implementations would currently die on accidental /&#38;.*-/, which
is used by the encoding.  Therefore, we can detect whether some MIME-UTF7 has
already mutilated the name... when it is already MIME-UTF7 and not mutilated, it does not matter that we do it again.

So: I think we can do without new flag and still be backwards compatible.  But I
am not against a flag.  Support for full UTF8 would be nice as well, but not needed
when UTF7 is in place.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Have a strong argument? I wonder how many servers are strict on this
&gt; vs. not. It doesn&#39;t seem like we&#39;ve had many asking for us to do this,
&gt; but maybe others are watching and want to chime in.
</div>
I expect that there are some examples on internet which demonstrate the work-arounds
needed to encode the folder names and decode the headers correctly... the original
programmer of the application code which I have to work with was not capable to
figure this out himself.

Mail::IMAPTalk is hiding the encodings and decodings.

&#40;are we in different time-zones?  Mine is CET&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1811946" href="/Public/Bug/Display.html?id=124172#txn-1811946">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;26&nbsp;21:37:38&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1811946/974999/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/974999">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 528b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Mark,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;are we in different time-zones?  Mine is CET&#41;
</div>Yes.  I&#39;m in EDT/EST.

As far as this request goes, do you happen to have a patch or pull request that you&#39;d like to propose along with patches?  I&#39;m not opposed to changing something here, but I&#39;d love to see you propose what you feel best gets the job done for you and use that to further the discussion.  Does that sound reasonable?

If this is something you&#39;d really like to see, and we move relatively quickly, we can see about getting this in the 3.40 release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1812018" href="/Public/Bug/Display.html?id=124172#txn-1812018">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;27&nbsp;03:13:19&nbsp;2018</span>
    <span class="description">solutions [...] overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #124172] Mailbox names are UTF7</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 Sep 2018 09:12:55 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Phil Pearl &#40;Lobbes&#41; via RT&#34; &lt;bug-Mail-IMAPClient [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;solutions [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1812018/975037/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/975037">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Phil Pearl &#40;Lobbes&#41; via RT &#40;bug-Mail-IMAPClient@rt.cpan.org&#41; [180927 01:37]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Mail-IMAPClient
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124172">https://rt.cpan.org/Ticket/Display.html?id=124172</a></span> &gt;
&gt; 
&gt; As far as this request goes, do you happen to have a patch or pull
&gt; request that you&#39;d like to propose along with patches?
</div>
Nothing ready, but should not be too hard &#40;although I lack possibilities
to test it&#41;.

Reading the docs again &#40;especially <span class="clickylink"><a target="new" rel="nofollow" href="http://www.fetchmail.info/Mailbox-Names-UTF7.html&#41;">http://www.fetchmail.info/Mailbox-Names-UTF7.html&#41;</a></span>

I think what we should offer an option &#39;FilenameEncoding&#39; which can be
&#39;MIME-UTF-7&#39;, &#39;8BIT&#39;, or &#39;UTF-8&#39;.

The correct default would be &#39;MIME-UTF7&#39;, but the backwards compatible is
&#39;8BIT&#39; &#40;perl&#39;s charset for single-byte data is Windows-1252&#41;

There are only a few methods which need to be aware of this.  The methods
which need to be aware of this:
   - select
   - _imap_folder_command
     &#40;covers create, subscribe, unsubscribe, delete, myrights&#41;
   - status
   - folders
   - copy
   - subscribed

Do you see more?
I could produce a patch this week.
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1812137" href="/Public/Bug/Display.html?id=124172#txn-1812137">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;27&nbsp;22:14:16&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1812137/975086/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/975086">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 834b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 27 03:13:19 2018, solutions@overmeer.net wrote:
[snip]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think what we should offer an option &#39;FilenameEncoding&#39; which can be
&gt; &#39;MIME-UTF-7&#39;, &#39;8BIT&#39;, or &#39;UTF-8&#39;.
</div>
I think I&#39;d prefer something more like MailboxNameEncoding or MboxNameEncoding.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The correct default would be &#39;MIME-UTF7&#39;, but the backwards compatible
&gt; is &#39;8BIT&#39; &#40;perl&#39;s charset for single-byte data is Windows-1252&#41;
&gt; 
&gt; There are only a few methods which need to be aware of this.  The
&gt; methods
&gt; which need to be aware of this:
&gt;    - select
&gt;    - _imap_folder_command
&gt;      &#40;covers create, subscribe, unsubscribe, delete, myrights&#41;
&gt;    - status
&gt;    - folders
&gt;    - copy
&gt;    - subscribed
&gt; 
&gt; Do you see more?
</div>
With a quick glance, that seems right.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I could produce a patch this week.
</div>
Great.  I look forward to seeing what you come up with!
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.394267</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
