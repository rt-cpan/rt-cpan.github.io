<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #12163 for Graphics-ColorNames: Color names that don&#39;t appear in keys %tied_var</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #12163 for Graphics-ColorNames: Color names that don&#39;t appear in keys %tied_var</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Graphics-ColorNames/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Graphics-ColorNames/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Graphics-ColorNames/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Graphics-ColorNames/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Graphics-ColorNames">Graphics-ColorNames CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">12163</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Graphics-ColorNames/Active/">Graphics-ColorNames</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
perl [...] faerber.muc.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-14994-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.0_01    </td>
  </tr>
  <tr id="CF-14995-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;06&nbsp;10:05:26&nbsp;2005</span>
    <span class="description">CFAERBER [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Color names that don&#39;t appear in keys %tied_var</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It might be a good idea to have color names that are recognized but don&#39;t
appear in the list of available color names. One example is &#34;fuscia&#34;. It is not
a valid color name but it should still be recognized.

This is important when you want to use the maps to translate colors back to
their names.  Currently, there&#39;s no indication whether you should translate
#FF00FF to &#34;fuscia&#34; or &#34;fuchsia&#34;, so you can&#39;t simple use
Graphics::ColorNames::HTML in order not to have to maintain your own list.

Well, there&#39;s a patch attached, which implements the feature.
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Nur in Graphics-ColorNames.new: blib.
diff -ur Graphics-ColorNames-2.0_01/lib/Graphics/ColorNames/HTML.pm Graphics-ColorNames.new/lib/Graphics/ColorNames/HTML.pm
--- Graphics-ColorNames-2.0_01/lib/Graphics/ColorNames/HTML.pm	2004-07-22 21:52:45.000000000 +0200
+++ Graphics-ColorNames.new/lib/Graphics/ColorNames/HTML.pm	2005-04-06 15:33:39.052949274 +0200
@@ -53,8 +53,7 @@
     &#39;blue&#39;	         =&gt; 0x0000ff,
     &#39;aqua&#39;	         =&gt; 0x00ffff,
     &#39;lime&#39;	         =&gt; 0x00ff00,
-    &#39;fuchsia&#39;	         =&gt; 0xff00ff, # &#34;fuscia&#34; is incorrect but common
-    &#39;fuscia&#39;             =&gt; 0xff00ff, # mis-spelling...
+    &#39;fuchsia&#39;	         =&gt; 0xff00ff, 
     &#39;red&#39;	         =&gt; 0xff0000,
     &#39;yellow&#39;	         =&gt; 0xffff00,
     &#39;white&#39;	         =&gt; 0xffffff,
@@ -69,6 +68,14 @@
     };
 }
 
+sub NamesRgbTableExtra&#40;&#41; {
+  use integer;
+  return {
+    &#39;fuscia&#39;             =&gt; 0xff00ff,	# &#34;fuscia&#34; is incorrect but common
+					# mis-spelling...
+    };
+}
+
 1;
 
 __END__
diff -ur Graphics-ColorNames-2.0_01/lib/Graphics/ColorNames.pm Graphics-ColorNames.new/lib/Graphics/ColorNames.pm
--- Graphics-ColorNames-2.0_01/lib/Graphics/ColorNames.pm	2005-04-04 15:15:29.000000000 +0200
+++ Graphics-ColorNames.new/lib/Graphics/ColorNames.pm	2005-04-06 15:46:39.641545953 +0200
@@ -121,6 +121,12 @@
   {
     no strict &#39;refs&#39;;
     $self-&gt;load_scheme&#40;$module-&gt;NamesRgbTable&#41;;   
+
+    if&#40;my $m = UNIVERSAL::can&#40;$module, &#39;NamesRgbTableExtra&#39;&#41;&#41; 
+    { 
+      local $self-&gt;{NAMES} = &#40;$self-&gt;{NAMES_EXTRA} ||= {}&#41;;
+      $self-&gt;load_scheme&#40;$m-&gt;&#40;&#41;&#41;;
+    }
   }
 }
 
@@ -190,6 +196,9 @@
   } else {
     my $value = $self-&gt;{NAMES}-&gt;{$key};
     unless &#40;defined $value&#41; {
+      $value = $self-&gt;{NAMES_EXTRA}-&gt;{$key};
+    }
+    unless &#40;defined $value&#41; {
       my @schemes = @{ $self-&gt;{SCHEMES} };
       while &#40;&#40;!defined $value&#41; &#38;&#38; &#40;my $scheme = shift @schemes&#41;&#41; {
 	if &#40;&#40;ref $scheme&#41; eq &#39;CODE&#39;&#41; {
Nur in Graphics-ColorNames.new: Makefile.
Nur in Graphics-ColorNames.new: pm_to_blib.
diff -ur Graphics-ColorNames-2.0_01/t/03-HTML.t Graphics-ColorNames.new/t/03-HTML.t
--- Graphics-ColorNames-2.0_01/t/03-HTML.t	2005-03-30 01:44:44.000000000 +0200
+++ Graphics-ColorNames.new/t/03-HTML.t	2005-04-06 15:49:25.329616388 +0200
@@ -8,7 +8,7 @@
 tie my %colors, &#39;Graphics::ColorNames&#39;, &#39;HTML&#39;;
 ok&#40;tied %colors&#41;;
 
-ok&#40;keys %colors == 17&#41;;
+ok&#40;keys %colors == 16&#41;;
 
 my $count = 0;
 foreach my $name &#40;keys %colors&#41;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;10:32:42&nbsp;2005</span>
    <span class="description">rrwo [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve had similar suggestions before, where people have wanted the
ability to translate RGB codes into color names.  But it&#39;s beyond the
scope of this package, which is just to provide a translation of names
to colors.

If I add a lot of features that most people will consider extraneous,
then there is the risk having many people not use the module because
they only want a list of colornames.  I am trying to clean up the module
so that it is &#34;lean and mean&#34;, and only does a few related things but
does them well.

Some systems have duplicate names due to mistakes, others have
intentional duplicates because people have different names for the same
thing.  Note that one can have multiple color schemes.

Indeed, if I query keys it&#39;s because I want a list of keys. It could
break something to have a hidden key that didn&#39;t show up in &#39;each&#39; but
still returned a value in &#39;fetch&#39; and &#39;exists&#39;.  It might even break
somebody&#39;s code.

And your patch would be problematic for multiple color schemes. &#34;fuscia&#34;
may not belong in HTML but it might belong some another scheme Z. If Z
had higher-priority than X, then why should I care if &#34;fuscia&#34; doesn&#39;t
belong in HTML.  Likewise, if HTML has higher-priority than Z, should
Z&#39;s inclusion of &#34;fuscia&#34; invalidate HTML&#39;s exclusion?

I&#39;d recommend the following solutions:
* Write a Graphics::ColorNames::StrictHTML module that eliminates the
  fuscia, and/or
* Have your code which reverse-translates RGB codes return a list when
  multiple names have that value.  In scalar context you could just
  return the first one.

I do appreciate the interest and efford put into the patch, but I will
have to turn down your request.

Thanks,
Rob
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;10:32:43&nbsp;2005</span>
    <span class="description">rrwo [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;11:20:42&nbsp;2005</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;11:20:42&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[RRWO - Thu Apr  7 10:32:42 2005]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve had similar suggestions before, where people have wanted the
&gt; ability to translate RGB codes into color names.  But it&#39;s beyond the
&gt; scope of this package, which is just to provide a translation of names
&gt; to colors.
</div>
Maybe it could be another module -- e.g. Graphics::ColorNames::Reverse..
. 

Well, my main concern is to provide the information necessary to do 
reverse lookups without duplication of the data already present in 
Graphics::ColorNames&#39;s map modules.

G::CN::HTML, for example, does not tell you whether &#34;#ff0ff&#34; should be 
translated to &#34;fuscia&#34; or &#34;fuchsia&#34;. It might be good to include this 
information even if the behaviour of G::CN itsself is not changed.

Actually, if I think about what you said about &#34;intentional duplicates&#34;, 
there are not two types of color names &#40;standard and non-standard&#41; but 
three:

* standard and preferred
* standard but not preferred
* non-standard

Regarding compatibility, it might make sense not to change what 
NameRgbTable returns but to add new functions which returns the 
additional data &#40;and is used by NameRgbTable, which could even be 
inherited from G::CN::BASE so that new modules only have to implement 
one of the two functions&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;07&nbsp;21:22:07&nbsp;2005</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Thu Apr  7 11:20:42 2005]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe it could be another module -- e.g. Graphics::ColorNames::Reverse..
</div>
I&#39;m wary of putting it in the Graphics::ColorNames::* namespace, since
that&#39;s where the color schemes are &#40;and there is an all_schemes method
to query a list of schemes available in version 2.0&#41;.  If I could do it
over again, I&#39;d write a Graphics::ColorNames::Plugins::* namespace, but
there are already several modules using the existing system and several
extensions.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Actually, if I think about what you said about &#34;intentional duplicates&#34;, 
&gt; there are not two types of color names &#40;standard and non-standard&#41; but 
&gt; three:
&gt; 
&gt; * standard and preferred
&gt; * standard but not preferred
&gt; * non-standard
</div>
The point behind the module isn&#39;t about standard names or not. It&#39;s so
that programmers &#40;or users&#41; can specify a color by name rather than RGB
code.  People can use whatever naming scheme they want: they can even
use ones in other languages than English if they write them.

Duplicates are not just in HTML. They are also in X.  For instance,
various shades of grey|gray, peru|tan3, olivedrab3|yellowgreen, and others.

In the HTML case, it&#39;s a known issue. In X, which takes priority?
 
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use strict;

require Graphics::ColorNames::X;

my $x = Graphics::ColorNames::X-&gt;NamesRgbTable&#40;&#41;;
my $y = { };
foreach my $name &#40;keys %$x&#41; {
  if &#40;$name !~ /\s/&#41; {
    my $rgb = sprintf&#40;&#39;%06x&#39;, $x-&gt;{$name}&#41;;
    if &#40;exists $y-&gt;{$rgb}&#41; {
      push @{$y-&gt;{$rgb}}, $name;
    } else {
      $y-&gt;{$rgb} = [ $name ];
    }
  }
}

foreach my $rgb &#40;keys %$y&#41; {
  if &#40;@{$y-&gt;{$rgb}} &gt; 1&#41; {
    print join&#40;&#34; &#34;, $rgb, map { &#34;\&#34;$_\&#34;&#34;} @{$y-&gt;{$rgb}}&#41;, &#34;\n&#34;;
  }
}
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;17&nbsp;20:10:38&nbsp;2007</span>
    <span class="description">rrwo [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
