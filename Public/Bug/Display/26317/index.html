<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #26317 for SOAP-Lite: Suggestions on improving likely hood of tests passing</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #26317 for SOAP-Lite: Suggestions on improving likely hood of tests passing</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/SOAP-Lite/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/SOAP-Lite/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/SOAP-Lite/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/SOAP-Lite/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/SOAP-Lite">SOAP-Lite CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">26317</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/SOAP-Lite/Active/">SOAP-Lite</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dsteinbrunner [...] pobox.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-29122-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29123-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;13&nbsp;06:53:33&nbsp;2007</span>
    <span class="description">dsteinbrunner [...] pobox.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Suggestions on improving likely hood of tests passing</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When installing libwww on a fresh Mac OS X 10.4 install I had several test issues to deal with 
and I&#39;ll go over how I corrected them here so that 

The first failing test following test will fail:

t/02-payload...........ok 27/125Could not load UserAgent class LWP::UserAgent

It would be nice if HTML::Tagset where either a prereq or the test was skipped if the module 
was not installed.

The next set of failures follow:

t/03-server............NOK 2/32# Failed test 2 in t/03-server.t at line 174 
# t/03-server.t line 174 is: skip&#40;&#40;$_ =~ /XML/ || !$is_mimetools_installed&#41;,
t/03-server............NOK 3/32# Failed test 3 in t/03-server.t at line 174 fail #2
t/03-server............NOK 4/32# Failed test 4 in t/03-server.t at line 174 fail #3
t/03-server............NOK 7/32# Failed test 7 in t/03-server.t at line 182 
# t/03-server.t line 182 is: skip&#40;&#40;$_ =~ /XML/ || !$is_mimetools_installed&#41;,
t/03-server............NOK 8/32# Failed test 8 in t/03-server.t at line 182 fail #2
t/03-server............NOK 9/32# Failed test 9 in t/03-server.t at line 182 fail #3
t/03-server............FAILED tests 2-4, 7-9 
Failed 6/32 tests, 81.25% okay &#40;less 2 skipped tests: 24 okay, 75.00%&#41;
t/04-attach............Something wrong with MIME message: MIME::Parser: can&#39;t flush: at /
System/Library/Perl/Extras/5.8.6/MIME/Parser.pm line 789.

t/04-attach............dubious 
Test returned status 255 &#40;wstat 65280, 0xff00&#41;
DIED. FAILED tests 1-15
Failed 15/15 tests, 0.00% okay

I did some searching and found this post regarding test failures with SOAP::Lite:

<span class="clickylink"><a target="new" rel="nofollow" href="http://use.perl.org/~gabor/journal/22370">http://use.perl.org/~gabor/journal/22370</a></span>

This is the comment that was able to help me:

<span class="clickylink"><a target="new" rel="nofollow" href="http://use.perl.org/comments.pl?sid=24143&#38;cid=48950">http://use.perl.org/comments.pl?sid=24143&#38;cid=48950</a></span>

Before upgrading to IO::ScalarArray I was at version 1.1.1.1 and am now at 2.110

which brought the given test to pass:
t/03-server............ok 
2/32 skipped: various reasons
t/04-attach............ok

Is it a good idea to make a newer version IO::ScalarArray a prereq?  This is an issue with the 
tests?  I&#39;m not going to claim to know and move on to the last failing test:

t/06-modules...........NOK 15/19# Failed test 15 in t/06-modules.t at line 24 fail #14
# t/06-modules.t line 24 is: $@ =~ /&#40;Can\&#39;t locate&#41;|&#40;XML::Parser::Lite requires&#41;|&#40;this is only 
version&#41;|&#40;load mod_perl&#41;/ 
t/06-modules...........NOK 19/19# Failed test 19 in t/06-modules.t at line 24 fail #16
t/06-modules...........FAILED tests 15, 19 
Failed 2/19 tests, 89.47% okay &#40;less 3 skipped tests: 14 okay, 73.68%&#41;

This is the point at which Andy Lester says it is ok to let the tests not pass as he recently 
wrote in a &#34;HOWTO: Install SOAP::Lite&#34; articale for socialtext:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.socialtext.net/stoss/index.cgi?howto_install_soap_lite">http://www.socialtext.net/stoss/index.cgi?howto_install_soap_lite</a></span>

Personally I don&#39;t think test should ever fail, especially ones that are distributed with modules 
on CPAN so I dug into it a bit more.  I found that there is a list of exceptions that are allowed 
to pass and of course the one I had that was causing the tests to fail was not in the list.  Here 
are the modules that had un-handled exceptions along with the exception:

Apache::XMLRPC::Lite - Undefined subroutine &#38;Apache::Constants::OK called at ../lib/SOAP/
Transport/HTTP.pm line 565. 
 
Apache::SOAP - Undefined subroutine &#38;Apache::Constants::OK called at ../lib/SOAP/
Transport/HTTP.pm line 565.

I&#39;m pretty sure that this exception should be handled and adding it to the list of handled 
exceptions on my box allowed me to pass with passing tests.

Hopefully may account of getting tests passing will help someone to get the tests in shape so 
that they pass without having to go through all of the above.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;05:04:03&nbsp;2007</span>
    <span class="description">kutterma [...] users.sourceforge.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

thanks for your suggestions. As they cover three issues, her the 
details on each of them:

1. LWP::UserAgent is not a prereq.
This is a duplicate of another bug report complaining the same issue. I 
postponed it, because LWP::UserAgent is not a *mandatory* prereq for 
SOAP::Lite, it just happens to be in the default config &#40;but you can 
choose not to build the HTTP client stuff&#41;.
SOAP::Lite&#39;s install process is far from being optimal right now, as it 
cannot be installed in a &#34;hands off process&#34;. But fixing your issue 
would involve bigger changes, such as splitting up SOAP::Lite into 
several packages.
I have something like this on my mind, but it&#39;s not settled yet.

2. The latest version of IO::ScalarArray is needed.
This is a problem of MIME::Parser, not of SOAP::Lite. Rejected, but 
I&#39;ll drop a note in the README or an appropriate place.

3. 06_modules.t: Tests fail
This is a duplicate of another test report and has been fixed recently.

Thanks for reporting,

Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;05:06:45&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;05:10:01&nbsp;2007</span>
    <span class="description">kutterma [...] users.sourceforge.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

thanks for your suggestions. As they cover three issues, her the 
details on each of them:

1. LWP::UserAgent is not a prereq.
This is a duplicate of another bug report complaining the same issue. I 
postponed it, because LWP::UserAgent is not a *mandatory* prereq for 
SOAP::Lite, it just happens to be in the default config &#40;but you can 
choose not to build the HTTP client stuff&#41;.
SOAP::Lite&#39;s install process is far from being optimal right now, as it 
cannot be installed in a &#34;hands off process&#34;. But fixing your issue 
would involve bigger changes, such as splitting up SOAP::Lite into 
several packages.
I have something like this on my mind, but it&#39;s not settled yet.

2. The latest version of IO::ScalarArray is needed.
This is a problem of MIME::Parser, not of SOAP::Lite. Rejected, but 
I&#39;ll drop a note in the README or an appropriate place.

3. 06_modules.t: Tests fail
This is a duplicate of another test report and has been fixed recently.

Thanks for reporting,

Martin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;05:10:05&nbsp;2007</span>
    <span class="description">kutterma [...] users.sourceforge.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;16&nbsp;05:10:30&nbsp;2007</span>
    <span class="description">kutterma [...] users.sourceforge.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
