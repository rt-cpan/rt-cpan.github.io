<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #81382 for Net-ISC-DHCPd: Parse error when open/close braces are on the same line.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #81382 for Net-ISC-DHCPd: Parse error when open/close braces are on the same line.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-ISC-DHCPd/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-ISC-DHCPd/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-ISC-DHCPd/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-ISC-DHCPd/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/jhthorsen/net-isc-dhcpd/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-ISC-DHCPd">Net-ISC-DHCPd CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">81382</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-ISC-DHCPd/Active/">Net-ISC-DHCPd</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RDRAKE [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
qoole.dhcp [...] lillimoth.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-227682-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.14    </td>
  </tr>
  <tr id="CF-227683-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.16    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;23&nbsp;11:49:23&nbsp;2012</span>
    <span class="description">http://qoole.myopenid.com/ -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Parse error when open/close braces are on the same line.</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Very basic perl script that loads and then generates a config file:

#!/usr/bin/perl

use Net::ISC::DHCPd::Config;
use Data::Dumper;

my $config = Net::ISC::DHCPd::Config-&gt;new&#40;file =&gt; &#39;/root/dhcpd.conf&#39;&#41;;

printf &#34;Parsed %s lines\n\n&#34;, $config-&gt;parse;
print $config-&gt;generate&#40;&#41;;

If I load the following file:

group {
        next-server 192.168.0.2;
        host box1       {
                                option host-name &#34;box1&#34;;      hardware 
ethernet 11:22:33:44:55:66; fixed-address 192.168.0.1;
                        }

        host box2       {
                                option host-name &#34;box2&#34;;   hardware 
ethernet 66:55:44:33:22:11; fixed-address 192.168.0.2;
                        }
}

group {
        next-server 192.168.0.2;
        host box1       {option host-name &#34;box1&#34;;      hardware ethernet 
11:22:33:44:55:66; fixed-address 192.168.0.1;}
        host box2       {option host-name &#34;box2&#34;;   hardware ethernet 
66:55:44:33:22:11; fixed-address 192.168.0.2;}
}

Which contains to functionally identical groups I get the following 
output:

Parsed 16 lines, and got these objects:

group {
    next-server 192.168.0.2;
    host box1 {
        option host-name &#34;box1&#34;;      hardware ethernet 
11:22:33:44:55:66; fixed-address 192.168.0.1;
    }
    host box2 {
        option host-name &#34;box2&#34;;   hardware ethernet 66:55:44:33:22:11; 
fixed-address 192.168.0.2;
    }
}
group {
    next-server 192.168.0.2;
    host box1 {
        host box2       {option host-name &#34;box2&#34;; hardware ethernet 
66:55:44:33:22:11; fixed-address 192.168.0.2;
    }
}


As you can see, in the second group the box1 host is missing all its 
options and wants to encompass the box2 host.

This is with the latest version and Perl version v5.16.1 on a Gentoo 
machine.

Thanks,

Alex
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;25&nbsp;10:06:51&nbsp;2014</span>
    <span class="description">RDRAKE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This may be particularly hard to fix without a rewrite.  This is due to the fact that you could put as many items as you wanted on the same line.

group { host box1 { option host-name &#34;box1&#34;; } host box2 { option host-name &#34;box2&#34;; } }

The parser currently looks at elements as being on their own lines.  

I&#39;m going to write a test case for this and I&#39;ll see what I can do to get it working.

On Fri Nov 23 11:49:23 2012, <span class="clickylink"><a target="new" rel="nofollow" href="http://qoole.myopenid.com/">http://qoole.myopenid.com/</a></span> wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; Very basic perl script that loads and then generates a config file:
&gt; 
&gt; #!/usr/bin/perl
&gt; 
&gt; use Net::ISC::DHCPd::Config;
&gt; use Data::Dumper;
&gt; 
&gt; my $config = Net::ISC::DHCPd::Config-&gt;new&#40;file =&gt; &#39;/root/dhcpd.conf&#39;&#41;;
&gt; 
&gt; printf &#34;Parsed %s lines\n\n&#34;, $config-&gt;parse;
&gt; print $config-&gt;generate&#40;&#41;;
&gt; 
&gt; If I load the following file:
&gt; 
&gt; group {
&gt;         next-server 192.168.0.2;
&gt;         host box1     {
&gt;                                 option host-name &#34;box1&#34;;      hardware 
&gt; ethernet 11:22:33:44:55:66; fixed-address 192.168.0.1;
&gt;                         }
&gt; 
&gt;         host box2     {
&gt;                                 option host-name &#34;box2&#34;;   hardware 
&gt; ethernet 66:55:44:33:22:11; fixed-address 192.168.0.2;
&gt;                         }
&gt; }
&gt; 
&gt; group {
&gt;         next-server 192.168.0.2;
&gt;         host box1     {option host-name &#34;box1&#34;;      hardware ethernet 
&gt; 11:22:33:44:55:66; fixed-address 192.168.0.1;}
&gt;         host box2     {option host-name &#34;box2&#34;;   hardware ethernet 
&gt; 66:55:44:33:22:11; fixed-address 192.168.0.2;}
&gt; }
&gt; 
&gt; Which contains to functionally identical groups I get the following 
&gt; output:
&gt; 
&gt; Parsed 16 lines, and got these objects:
&gt; 
&gt; group {
&gt;     next-server 192.168.0.2;
&gt;     host box1 {
&gt;         option host-name &#34;box1&#34;;      hardware ethernet 
&gt; 11:22:33:44:55:66; fixed-address 192.168.0.1;
&gt;     }
&gt;     host box2 {
&gt;         option host-name &#34;box2&#34;;   hardware ethernet 66:55:44:33:22:11; 
&gt; fixed-address 192.168.0.2;
&gt;     }
&gt; }
&gt; group {
&gt;     next-server 192.168.0.2;
&gt;     host box1 {
&gt;         host box2       {option host-name &#34;box2&#34;; hardware ethernet 
&gt; 66:55:44:33:22:11; fixed-address 192.168.0.2;
&gt;     }
&gt; }
&gt; 
&gt; 
&gt; As you can see, in the second group the box1 host is missing all its 
&gt; options and wants to encompass the box2 host.
&gt; 
&gt; This is with the latest version and Perl version v5.16.1 on a Gentoo 
&gt; machine.
&gt; 
&gt; Thanks,
&gt; 
&gt; Alex
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;25&nbsp;10:06:51&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;25&nbsp;15:54:33&nbsp;2014</span>
    <span class="description">RDRAKE [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;16:47:19&nbsp;2014</span>
    <span class="description">RDRAKE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This has been fixed in 0.16.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;16:47:19&nbsp;2014</span>
    <span class="description">RDRAKE [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;16:47:20&nbsp;2014</span>
    <span class="description">RDRAKE [...] cpan.org -  Fixed in 0.16 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
