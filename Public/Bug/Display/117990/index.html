<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #117990 for podlators: behavior of pod2man in pipeline changed</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #117990 for podlators: behavior of pod2man in pipeline changed</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/podlators/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/podlators/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/podlators/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/podlators/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/podlators">podlators CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">117990</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/podlators/Active/">podlators</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RRA [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jgmiller [...] pt.LU

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26322-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26323-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
4.08    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;12:58:14&nbsp;2016</span>
    <span class="description">jgmiller [...] pt.LU -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> behavior of pod2man in pipeline changed</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Somewhere between the pod2man version for per v5.20.2 and for perl v5.22.1, the behavior of pod2man in a pipeline has changed.

Using a simple example, in the older version

cat XXX_some_file_XXX | pod2man

works just fine.

In the newer version, pod2man complains

IO::File=IO&#40;0x9280284&#41; around line 1: No name given for document

&#40;still generates the document though&#41; BUT exits with 255

Using the --name SOME_DOCUMENT_NAME resolves the issue.

cat XXX_some_file_XXX | pod2man --name MY_DOCUMENT

Many software packages generate documentation with pod2man being used in an often times complex &#40;usually involvind sed&#41; pipeline and with input/output redirections to generate a manual page.

So this means lots of software packages are going to have to start adding the --name SOME_DOCUMENT_NAME to their Makefile to overcome this issue.

At the very least, something should be added to manual page and changelog file for pod2mand to now state that -name must be used if input file is not specified because of use of redirection or pipeline.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;13:48:55&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #117990] behavior of pod2man in pipeline changed</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Sep 2016 10:48:32 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;jgmiller\ [...] pt.LU via RT&#34; &lt;bug-podlators [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;jgmiller@pt.LU via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Somewhere between the pod2man version for per v5.20.2 and for perl
&gt; v5.22.1, the behavior of pod2man in a pipeline has changed.
</div>
Yes, it was announced in the Changes file for the podlators distribution:

    [Pod::Man] Attempt to detect if the input came from a pipe and
    therefore has a completely unhelpful &#40;and nonreproducible&#41; source file
    name, and diagnose this as an error.  Document that the name option
    &#40;--name to pod2man&#41; is required when processing POD source from
    standard input.  &#40;Debian Bug#777405&#41;

I&#39;m sorry for how disruptive this change is.  :&#40;  I couldn&#39;t figure out a
better way of handling it other than creating a fake manual page name.
Maybe in retrospect that would have been better?  I suppose I could still
do that to ease the pain.

This is documented in the man page, although possibly not as prominantly
as it should be:

        When converting POD source from standard input, this option is
        required, since there&#39;s otherwise no way to know what to use as the
        name of the manual page.

You&#39;re not the first person to have been surprised by this.  I think, in
retrospect, I should just use something fake, like STDIN.  I think I&#39;ll go
ahead and make that change in the next release; backward compatibility is
a feature.

-- 
#!/usr/bin/perl -- Russ Allbery, Just Another Perl Hacker
$^=q;@!&gt;~|{&gt;krw&gt;yn{u&lt;$$&lt;[~||&lt;Juukn{=,&lt;S~|}&lt;Jwx}qn{&lt;Yn{u&lt;Qjltn{ &gt; 0gFzD gD,
 00Fz, 0,,&#40; 0hF 0g&#41;F/=, 0&gt; &#34;L$/GEIFewe{,$/ 0C$~&gt; &#34;@=,m,|,&#40;e 0.&#41;, 01,pnn,y{
rw} &gt;;,$0=q,$,,&#40;$_=$^&#41;=~y,$/ C-~&gt;&lt;@=\n\r,-~$:-u/ #y,d,s,&#40;\$.&#41;,$1,gee,print
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;13:48:55&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;15:26:10&nbsp;2016</span>
    <span class="description">miller [...] yoyo.ORG -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #117990] behavior of pod2man in pipeline changed</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Sep 2016 21:25:17 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> J G Miller &lt;miller [...] yoyo.ORG&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi Russ,

Thank you for your very quick response.

At 13:48h, on Tuesday, September 20, 2016,
in message &lt;rt-4.0.18-15521-1474393735-1492.117990-6-0@rt.cpan.org&gt;,
on the subject of &#34;Re: [rt.cpan.org #117990] behavior of pod2man in pipeline changed&#34;, you wrote -

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; Yes, it was announced in the Changes file for the podlators distribution:
</div>
Aha, sorry I missed that and also I failed to scroll down to read all of the
text for the --name option &#40;doh!&#41;.  What misled me &#40;my incorrect assumption&#41;
was in the synopsis of the manual page that --name is still shown as optional,

                 [--name=name]

but maybe there is no convention or style for showing in the manual page
synopsis that a command line option is sometimes mandatory.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; I&#39;m sorry for how disruptive this change is.  :&#40;
</div>
Changes can never be made without some pain, and &#34;no pain, no gain.&#34;  ;+&#41;

So long as the word is out and people who provide packages are made
aware, then the changeover can be achieved, but I think the problem
is that maybe not enough people are aware.

I came across the issue when trying to install the latest revision of stow
from Github on Linux Mint 18 and thought something had got corrupted with my
CPAN perl updates because it failed there but then I found that there was no
problem on a Debian 8.6 system. I then found from a web search the solution
provided by Robert Munteanu on Stackexchange who was trying to build a different
Perl package but had encountered the same problem.

     &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.COM/questions/38425732/pod2man-fails-with-no-name-given-for-document">http://stackoverflow.COM/questions/38425732/pod2man-fails-with-no-name-given-for-document</a></span>&gt;

Some testing then revealed that the failure with the newer version
was due to pod2man being used in a pipeline.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; I think, in retrospect, I should just use something fake, like STDIN.
</div>
That sounds appropriate and a useful fix -- better to have something which
is a compromise than causing builds &#40;where the intermediate file name
does not actually matter&#41; to break unnecessarily.

So as as this is a &#34;feature&#34; and not a bug, please feel free to close my
ticket, but perhaps with a mention that a fix with using &#34;STDIN&#34; is
being considered.

Thanks for all the work you do in maintaining Perl and Debian packages,
Greg
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;15:42:38&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Fixed in 4.08 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;15:42:38&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">podlators 4.08 now silently uses STDIN as the name of man pages generated from standard input without the name option, and does not report an error.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;15:42:48&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;15:42:49&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
