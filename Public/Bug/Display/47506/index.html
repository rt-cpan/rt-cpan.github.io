<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47506 for String-ZeroButTrue: should use looks_like_number</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47506 for String-ZeroButTrue: should use looks_like_number</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=String-ZeroButTrue">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=String-ZeroButTrue">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=String-ZeroButTrue">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=String-ZeroButTrue">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/String-ZeroButTrue">String-ZeroButTrue CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47506</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=String-ZeroButTrue">String-ZeroButTrue</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
NUFFIN [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-225494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-225495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=47506">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627172" href="/Public/Bug/Display.html?id=47506#txn-627172">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;07:02:27&nbsp;2009</span>
    <span class="description">NUFFIN [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> should use looks_like_number</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/627172/319206/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/319206">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 217b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just because it&#39;s so fun to point out the holes in your modules, &#34;0.0&#34; is another 0 but true.

I guess you should use looks_like_number from Scalar::Util and then compare using ==, but I 
doubt this actually matters.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627224" href="/Public/Bug/Display.html?id=47506#txn-627224">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;09:10:16&nbsp;2009</span>
    <span class="description">dmuey [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/627224/319232/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/319232">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jul 02 07:02:27 2009, NUFFIN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Just because it&#39;s so fun to point out the holes in your modules,
</div>
Thank you for the report, I&#39;m glad you&#39;re having fun... I enjoyed seeing 
you speak at YAPC 09 &#40;unless you weren&#39;t there and I am confusing you 
with someone else? if so I apologize&#41;. 

As for the tone of derision in your first statement may I ask a question? Did I do something to offend you and a couple other Catalyst guys? I 
mean I realize I&#39;ve done a few silly things like poorly chosen NS&#39;s and 
the old &#34;placeholder for current project&#34; but I&#39;ve &#40;tried/am trying&#41; to 
rectify such things. As far as code itself, if there are bugs, 
improvements, clarifications, etc etc that can be made, well, that is what 
version numbers are for no? Personally I am always trying to improve 
and do things &#34;The Proper Way&#34; so constructive criticism is always 
welcome. My real point however is this: when someone takes a hater 
tone it scares people away who are checking out the community when 
language shopping. Granted, this rt is by no means offensive and the 
initial statement is a fairly tame, even playful, form of hating but it is 
still negative and derogatory. I&#39;d like to understand fully where this is 
coming from because it seems silly at best destructive to perl at worst. 
We&#39;re all in this together after all so why attack each other?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;0.0&#34; is another 0 but true.
&gt; 
&gt; I guess you should use looks_like_number from Scalar::Util and then
&gt; compare using ==, but I doubt this actually matters.
</div>
Correct, however, the idea of this module is &#34;utils for consistent zero-
but-true usage&#34;. The key idea is &#34;consistent&#34; not necessarily 
&#34;comprehensive&#34; permutation of every possible ZBT value.

I&#39;ll definitely take it under advisement though, thanks for your time!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-627225" href="/Public/Bug/Display.html?id=47506#txn-627225">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;09:10:20&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-628708" href="/Public/Bug/Display.html?id=47506#txn-628708">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;06&nbsp;02:14:30&nbsp;2009</span>
    <span class="description">NUFFIN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47506] should use looks_like_number</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 6 Jul 2009 01:14:11 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-String-ZeroButTrue [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Yuval Kogman &lt;nuffin [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/628708/320060/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/320060">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, I&#39;ll bite.

I admit I was trolling &#40;I was going to wait until it was fixed and
then mention &#34; 0&#34;&#41;, but I do have a point I&#39;m actually trying to
prove.

The talk that is actually relevant to this is Matt&#39;s Catching an ::Std:

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.shadowcat.co.uk/archive/conference-video/yapc-na-2009/std/">http://www.shadowcat.co.uk/archive/conference-video/yapc-na-2009/std/</a></span>

Basically many of your modules revolve around invented standards which
are not only mostly irrelevant to actual development, they often
contain simply incorrect interpretations.

ZeroButTrue is such an example. Perl already has two builtin
standards, making this confusing enough. The norm is:

    # this is always safe:
    if &#40; defined&#40; my $number = could_return_zero&#40;&#41; &#41; &#41; {

but then &#34;0 but true&#34; is hard coded to numify as 0 to make the return
values of certain builtins be true when the result is valid but equals
zero, allowing people to say:


     if &#40; my $number = could_return_zero&#40;&#41; &#41;

Unfortunately this is not used universally, even in Perl&#39;s own
builtins &#40;for instance the index&#40;&#41; function returns -1 on failure, and
many other  builtins return undef, simply returning 0 even if that&#39;s a
valid value &#40;e.g. pos, fork, etc etc&#41;&#41;.

DBI introduced a second, related but dissimilar hack, exploiting the
fact that arbitrary floating point expressions numify to zero, but
numification is not used to make &#34;0&#34; be treated as false, that&#39;s a
hard coded behavior.

Your modules attempts to be consistent, that is become a standard,
supporting DBI&#39;s convention of &#34;0E0&#34; and perl&#39;s builtin &#34;0 but true&#34;,
but in fact there are many other standards such as &#34;0.0&#34;, &#34; 0&#34;.

The actual check for 0 but true behavior should be &#40; $value &#38;&#38; $value
== 0 &#41; but you are inventing a standard whereby only the two common
strings are supported.

&#34;0 but true&#34; in its own right is a pretty bad idea, but further
compounding it by using a flakey is_zero_but_true test that won&#39;t work
on all values found in the wild, and encouraging the adoption of that
as a consistent standard is harmful to CPAN, the community, and people
learning Perl. Your target audience for this module is people who are
already confused by 0 but true behavior, and therefore are seeking
something simple and consistent, and though your module claims to do
that it falls short.

Many of your other modules exhibit similar problems:

Data::Rand before 0.0.3 made false claims about the security, and
still has problematic random value distribution.

all.pm needlessly complicates the loading of modules.

fake.pm will only work for a very small subset of modules &#40;namely
pragmas that fiddle %^H&#41;

HTML::Obliterate reinvents HTML parsing in regexes and gets it wrong
&#40;&#34;&lt; script&#34; could still be dangerous if more scrubbing is done later,
and won&#39;t be cleaned up, the entity handling is wrong &#40;entities are
stripped instead of being converted to plain text&#41;&#41;,

DBIx::Std claims to invent a standard but doesn&#39;t even provide that

UNIVERSAL::cant injects code into UNIVERSAL, seemingly extending the
already questionable standard that is the UNIVERSAL namespace, for
something that is really uncommon and can be implemented by typing &#39;!&#39;
before the method call.

Sub::Todo promotes goto $sub and sets $! for no real reason &#40;$!
corresponds to the C level errno api, not internal errors&#41;. ENOSYS
means the POSIX api function is not implemented, and has a very
different meaning. Furthermore, hardcoding magic numbers in the Perl
source code corresponding to the various platforms&#39; arbitrary header
files just to support this incorrect usage of that error number is
even worse.

Mail::Sender::Easy attempts to reinvent Mail::Message::Builder or the
plethora of Email:: modules, all of which are ambitious projects that
*still* don&#39;t get it right a lot of the time. Some of the things this
gets wrong is e.g. encoding of non trivial content disposition
filenames. That requires a *lot* of code to get right, and the fact
that this module is smaller, doesn&#39;t make it easier to use than many
of the other more stable offerrings.

In short, my problem is that you tend to reinvent perfectly round
wheels, and then ship them to the CPAN in what appears to be an
attempt to get the Perl community to standardize on that.

I think that&#39;s harmful to the CPAN and the Perl community in general.

Personally I also find it hard to believe that you really use these
modules extensively without getting burned. Perhaps it&#39;s easier for
you because you know what to expect, many of these modules have many
flaws and wrong assumptions that seem to imply that they weren&#39;t
really thought through.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.294654</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
