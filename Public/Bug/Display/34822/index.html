<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #34822 for Math-BigInt: Which library is used?</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #34822 for Math-BigInt: Which library is used?</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Math-BigInt">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Math-BigInt">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Math-BigInt">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Math-BigInt">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Math-BigInt">Math-BigInt CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">34822</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">15 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Math-BigInt">Math-BigInt</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TELS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
MARKOV [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-20500-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.88    </td>
  </tr>
  <tr id="CF-20501-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=34822">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446194" href="/Public/Bug/Display.html?id=34822#txn-446194">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;07:36:38&nbsp;2008</span>
    <span class="description">MARKOV [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Which library is used?</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446194/218985/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/218985">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 533b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">My XML::Compile needs Math::BigInt. For performance reasons, I would
like to include &#34;try =&gt; GMP&#34; everywhere, but that is not compatible with
all current Linux distributions which include Perl-core modules.  &#34;lib
=&gt; GMP&#34; gives a warning, which is also not desired.

Thinking about this, I cannot find in the documentation what happens
when one module says &#34;lib =&gt; GMP&#34; and the other module some other library.

Could I remove my explicit request for GMP, and tell the user to add it
to the application script to get more performance?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446402" href="/Public/Bug/Display.html?id=34822#txn-446402">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;16:09:13&nbsp;2008</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Apr 2008 22:06:42 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/446402/219089/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219089">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Moin Mark,

On Thursday 10 April 2008 13:36:44 Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Apr 10 07:36:38 2008: Request 34822 was acted upon.
&gt; Transaction: Ticket created by MARKOV
&gt;        Queue: Math-BigInt
&gt;      Subject: Which library is used?
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: Normal
&gt;        Owner: Nobody
&gt;   Requestors: MARKOV@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
&gt;
&gt;
&gt; My XML::Compile needs Math::BigInt. For performance reasons, I would
&gt; like to include &#34;try =&gt; GMP&#34; everywhere, but that is not compatible
&gt; with all current Linux distributions which include Perl-core modules.
&gt;  &#34;lib =&gt; GMP&#34; gives a warning, which is also not desired.
&gt;
&gt; Thinking about this, I cannot find in the documentation what happens
&gt; when one module says &#34;lib =&gt; GMP&#34; and the other module some other
&gt; library.
&gt;
&gt; Could I remove my explicit request for GMP, and tell the user to add
&gt; it to the application script to get more performance?
</div>
The library that is loaded last, wins. Basically, any line of &#34;use 
Math::BigInt lib =&gt; &#39;foo&#39;;&#34; will try to load &#34;Math::BigInt::foo&#34; and if 
successfuly, use this library from this point on.

The other libraries remain in memory, but are not used.

Note that switching libraries _after_ constructing already Math::BigInt 
objects is a bad idea, as these objects cannot mix, e.g. if $a was 
constructed library GMP and $b with Calc, you cannot do &#34;$a + $b&#34; as 
this will blow up spectaculary :&#41;

For libraries that are used by other programs &#40;e.g. you case&#41; there are 
a few cases how to solve this:

* just do &#34;use Math::BigInt&#34; and let the user decide which library to
  use underneath. &#40;needs doc and education&#41;
* do like Math::String, use &#34;try =&gt; GMP&#34; and add a requirement for
  Math::BigInt v1.88.

Which way is best depends on your situation and liking, tho. I agree the 
issue is tricky.

Btw, _if_ your library constructs Math::BigInt &#40;et. al&#41; objects are 
startup, you can also use the same trick that Math::BigFloat does, in 
sub import do:

  # find out which one was actually loaded
  $MBI = Math::BigInt-&gt;config&#40;&#41;-&gt;{lib};

  # register us with MBI to get notified of future lib changes
  Math::BigInt::_register_callback&#40; $self, sub { $MBI = $_[0]; } &#41;;

This registers a callback so that when someone does &#34;use Math::BigInt 
lib =&gt; FOO;&#34; behind your back, then $MBI will 
contain &#34;Math::BigInt::FOO&#34; afterwards. Of course, the callback would 
also need to &#34;reconstruct&#34; any already constructed objects.

Hope that clears this up, I think it might be described somewhere in the 
documentation, but it is surely buried.

Sorry that this is so complicated.

Tels

-- 
 Signed on Thu Apr 10 21:54:46 2008 with key 0x93B84C15.
 Get one of my photo posters: <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/posters">http://bloodgate.com/posters</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;Und jetzt kommen Sie!&#34;

  -- Stenkelfeld
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446402/219090/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 481b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446403" href="/Public/Bug/Display.html?id=34822#txn-446403">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;16:09:39&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446431" href="/Public/Bug/Display.html?id=34822#txn-446431">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;17:05:17&nbsp;2008</span>
    <span class="description">solutions [...] overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Apr 2008 23:04:47 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;nospam-abuse [...] bloodgate.com via RT&#34; &lt;bug-Math-BigInt [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;solutions [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446431/219104/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219104">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
&gt; Moin Mark,
</div>
Hi Tels,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thursday 10 April 2008 13:36:44 Mark Overmeer via RT wrote:
<div class="message-stanza open">&gt; &gt; Thu Apr 10 07:36:38 2008: Request 34822 was acted upon.
&gt; &gt; Transaction: Ticket created by MARKOV
&gt; &gt;        Queue: Math-BigInt
&gt; &gt;      Subject: Which library is used?
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The library that is loaded last, wins. Basically, any line of &#34;use 
&gt; Math::BigInt lib =&gt; &#39;foo&#39;;&#34; will try to load &#34;Math::BigInt::foo&#34; and if 
&gt; successfuly, use this library from this point on.
</div>
I understand the problems designing the interface, but it gives major
problems, certainly when there is dynamic loading in play as well.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Note that switching libraries _after_ constructing already Math::BigInt 
&gt; objects is a bad idea, as these objects cannot mix, e.g. if $a was 
&gt; constructed library GMP and $b with Calc, you cannot do &#34;$a + $b&#34; as 
&gt; this will blow up spectaculary :&#41;
</div>
You may freeze the library at INIT or CHECK type.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For libraries that are used by other programs &#40;e.g. you case&#41; there are 
&gt; a few cases how to solve this:
&gt; * just do &#34;use Math::BigInt&#34; and let the user decide which library to
&gt;   use underneath. &#40;needs doc and education&#41;
</div>
But then the user needs to add &#34;use Math::BigInt&#34;, what they do not
expect.  But I can try to describe it in the &#34;performance&#34; chapter
of the docs.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; * do like Math::String, use &#34;try =&gt; GMP&#34; and add a requirement for
&gt;   Math::BigInt v1.88.
</div>
The problems people report me are 1.87 in many Linux distributions, in
combination with the problems with dual-lived modules...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hope that clears this up, I think it might be described somewhere in the 
&gt; documentation, but it is surely buried.
&gt; Sorry that this is so complicated.
</div>
That&#39;s life ;-&#41;
-- 
Thanks for the swift reply,

               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446437" href="/Public/Bug/Display.html?id=34822#txn-446437">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;17:25:36&nbsp;2008</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Apr 2008 23:24:52 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/446437/219111/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219111">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Moin mark,

On Thursday 10 April 2008 23:05:19 Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
<div class="message-stanza open">&gt; &gt; Moin Mark,
</div>&gt; Hi Tels,
<div class="message-stanza open">&gt; &gt; The library that is loaded last, wins. Basically, any line of &#34;use
&gt; &gt; Math::BigInt lib =&gt; &#39;foo&#39;;&#34; will try to load &#34;Math::BigInt::foo&#34;
&gt; &gt; and if successfuly, use this library from this point on.
</div>&gt;
&gt; I understand the problems designing the interface, but it gives major
&gt; problems, certainly when there is dynamic loading in play as well.
</div>
Well, duh! :&#41;

The library interface was designed to allow changing the library instead 
of hardcoding it in - it wasn&#39;t thought at that time that there would 
be a change of library at run-time, or that this would actually cause 
the problems with objects that were constructed between loading of two 
different libraries - for the very simple reason that back than nobody 
even thought of these scenarios.

&#40;I clearly should have thought things more through, but well, I 
didn&#39;t :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Note that switching libraries _after_ constructing already
&gt; &gt; Math::BigInt objects is a bad idea, as these objects cannot mix,
&gt; &gt; e.g. if $a was constructed library GMP and $b with Calc, you cannot
&gt; &gt; do &#34;$a + $b&#34; as this will blow up spectaculary :&#41;
</div>&gt;
&gt; You may freeze the library at INIT or CHECK type.
</div>
I may? Apart from the fact that I don&#39;t know how how to do this, I am 
also not sure that changing it now would actually work.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; For libraries that are used by other programs &#40;e.g. you case&#41; there
&gt; &gt; are a few cases how to solve this:
&gt; &gt; * just do &#34;use Math::BigInt&#34; and let the user decide which library
&gt; &gt; to use underneath. &#40;needs doc and education&#41;
</div>&gt;
&gt; But then the user needs to add &#34;use Math::BigInt&#34;, what they do not
&gt; expect.  But I can try to describe it in the &#34;performance&#34; chapter
&gt; of the docs.
</div>
Yes that is the drawback of this method.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; * do like Math::String, use &#34;try =&gt; GMP&#34; and add a requirement for
&gt; &gt;   Math::BigInt v1.88.
</div>&gt;
&gt; The problems people report me are 1.87 in many Linux distributions,
&gt; in combination with the problems with dual-lived modules...
</div>
This is squarely my fault because I didn&#39;t release v1.88 of Math::BigInt 
about half a year ago.2007-01-27 v1.78 Tels
 * implement &#34;try&#34; and &#34;only&#34; as replacements for &#34;lib&#34;

However, the &#34;try&#34; and &#34;only&#34; keywords were added in v1.78 of 
Math::BigInt, which is a bit older:

2007-01-27 v1.78 Tels
 * implement &#34;try&#34; and &#34;only&#34; as replacements for &#34;lib&#34;

But I guess with the slow-moving target of distributions, that this is 
in still quite a lot of distributions.

As far as &#34;try&#34; and &#34;only&#34; are concerned, they were added that late 
because well, nobody really had the problem &#40;except me&#41;, and I simple 
couldn&#39;t/didn&#39;t think of this before.

The interface was made up as I got along, which clearly shows.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; Hope that clears this up, I think it might be described somewhere
&gt; &gt; in the documentation, but it is surely buried.
&gt; &gt; Sorry that this is so complicated.
</div>&gt;
&gt; That&#39;s life ;-&#41;
</div>
If I can improve the doc or code, tell me how and I see if I can include 
these things into v1.89. Probably won&#39;t help you,but maybe the next 
guy :&#41;

best wishes,

Tels

PS: Using &#34;GMP&#34; over &#34;Calc&#34; is not a simple black-and-white issue, 
because for small numbers GMP is actually slower than Calc. So the 
decision on wether to use GMP or Calc or whatever should really be left 
to the application that loades the modules. Yes, that makes it more 
complicated for the app while this detail should be hidden, but this 
cannot be easily changed &#40;unless someone invents a way to speed up the 
GMP library for very small numbers - which is unlikely :&#41;

-- 
 Signed on Thu Apr 10 23:15:08 2008 with key 0x93B84C15.
 View my photo gallery: <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos">http://bloodgate.com/photos</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;We&#39;re looking at a future where only the very largest companies will
 be able to implement software, and it will technically be illegal for
 other people to do so.&#34;

  -- Bruce Perens, 2004-01-23
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446437/219112/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 481b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446440" href="/Public/Bug/Display.html?id=34822#txn-446440">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;17:38:23&nbsp;2008</span>
    <span class="description">solutions [...] overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Apr 2008 23:37:54 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;nospam-abuse [...] bloodgate.com via RT&#34; &lt;bug-Math-BigInt [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;solutions [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446440/219115/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219115">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
<div class="message-stanza open">&gt; &gt; I understand the problems designing the interface, but it gives major
&gt; &gt; problems, certainly when there is dynamic loading in play as well.
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Note that switching libraries _after_ constructing already
&gt; &gt; &gt; Math::BigInt objects is a bad idea, as these objects cannot mix,
&gt; &gt; &gt; e.g. if $a was constructed library GMP and $b with Calc, you cannot
&gt; &gt; &gt; do &#34;$a + $b&#34; as this will blow up spectaculary :&#41;
</div>&gt; &gt;
&gt; &gt; You may freeze the library at INIT or CHECK type.
</div></div>
our $fixed;
INIT { $fixed++ }
export { return if $fixed }

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 2007-01-27 v1.78 Tels
&gt;  * implement &#34;try&#34; and &#34;only&#34; as replacements for &#34;lib&#34;
</div>
Quite a lot of Linux dists froze perl at 5.8.8... Math::BigInt 1.77

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If I can improve the doc or code, tell me how and I see if I can include 
&gt; these things into v1.89. Probably won&#39;t help you,but maybe the next 
&gt; guy :&#41;
</div>
Well, you could leave the discission to the main script only, so ignore
what modules say, just what the end-user thinks is smart.
-- 
Thanks for the help,

               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446443" href="/Public/Bug/Display.html?id=34822#txn-446443">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;17:56:54&nbsp;2008</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Apr 2008 23:56:10 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/446443/219119/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219119">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thursday 10 April 2008 23:38:24 Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
&gt;
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; I understand the problems designing the interface, but it gives
&gt; &gt; &gt; major problems, certainly when there is dynamic loading in play
&gt; &gt; &gt; as well.
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; Note that switching libraries _after_ constructing already
&gt; &gt; &gt; &gt; Math::BigInt objects is a bad idea, as these objects cannot
&gt; &gt; &gt; &gt; mix, e.g. if $a was constructed library GMP and $b with Calc,
&gt; &gt; &gt; &gt; you cannot do &#34;$a + $b&#34; as this will blow up spectaculary :&#41;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; You may freeze the library at INIT or CHECK type.
</div></div>&gt;
&gt; our $fixed;
&gt; INIT { $fixed++ }
&gt; export { return if $fixed }
</div>
Sorry, I am a bit to confused as what this should accomplish &#40;and what 
problem it tries to solve&#41;. Can you explain this to me?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; 2007-01-27 v1.78 Tels
&gt; &gt;  * implement &#34;try&#34; and &#34;only&#34; as replacements for &#34;lib&#34;
</div>&gt;
&gt; Quite a lot of Linux dists froze perl at 5.8.8... Math::BigInt 1.77
</div>
Yeah, I was checking corelist and comparing releases and CHANGES entries 
for the last half hour. That seems to be the problem, namely that 5.8.9 
&#40;with an updated Math::BigInt&#41; is not yet released, and 5.10 isn&#39;t 
really widely used.

I guess the only &#34;fix&#34; is to set a requirement for a certain 
Math::BigInt &#40;probably v1.88 as people need to upgrade anyway&#41; and have 
people upgrade Math::BigInt from CPAN.

&#40;As the person who slaved away for the changes between v1.77 and v1.88, 
I&#39;d recommend upgrading anyway, alone for the bugfixes :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; If I can improve the doc or code, tell me how and I see if I can
&gt; &gt; include these things into v1.89. Probably won&#39;t help you,but maybe
&gt; &gt; the next guy :&#41;
</div>&gt;
&gt; Well, you could leave the discission to the main script only, so
&gt; ignore what modules say, just what the end-user thinks is smart.
</div>
I am not sure that would technically work. How should f.i. Math::BigInt 
decided when to ignore a request to load a library - and when not? I 
guess it would also break things like &#34;bigrat&#34;, which loads libraries, 
too, and can load a certain backend on user request, too:

        # perl -MData::Dumper -Mbigrat=l,GMP -wle &#39;print \
         Dumper&#40;Math::BigInt-&gt;config&#40;&#41;&#41;&#39;
        $VAR1 = {
          &#39;trap_inf&#39; =&gt; 0,
          &#39;div_scale&#39; =&gt; 40,
          &#39;trap_nan&#39; =&gt; 0,
          &#39;version&#39; =&gt; &#39;1.88&#39;,
          &#39;round_mode&#39; =&gt; &#39;even&#39;,
          &#39;lib_version&#39; =&gt; &#39;1.24&#39;,
          &#39;downgrade&#39; =&gt; undef,
          &#39;lib&#39; =&gt; &#39;Math::BigInt::GMP&#39;,
          &#39;class&#39; =&gt; &#39;Math::BigInt&#39;,
          &#39;upgrade&#39; =&gt; &#39;Math::BigFloat&#39;,
          &#39;precision&#39; =&gt; undef,
          &#39;accuracy&#39; =&gt; undef
        };

All the best,

Tels

-- 
 Signed on Thu Apr 10 23:49:06 2008 with key 0x93B84C15.
 Get one of my photo posters: <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/posters">http://bloodgate.com/posters</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;...no one would risk manipulating votes in an election because it&#39;s
 against the law and carries a heavy penalty...&#34;

  -- Diebold spokesman David Bear
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446443/219120/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 481b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446466" href="/Public/Bug/Display.html?id=34822#txn-446466">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;10&nbsp;18:11:31&nbsp;2008</span>
    <span class="description">solutions [...] overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Apr 2008 00:11:01 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;nospam-abuse [...] bloodgate.com via RT&#34; &lt;bug-Math-BigInt [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;solutions [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446466/219132/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219132">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; You may freeze the library at INIT or CHECK type.
</div>&gt; &gt;
&gt; &gt; our $fixed;
&gt; &gt; INIT { $fixed++ }
&gt; &gt; export { return if $fixed }
</div>&gt; 
&gt; Sorry, I am a bit to confused as what this should accomplish &#40;and what 
&gt; problem it tries to solve&#41;. Can you explain this to me?
</div>
In some way, you should freeze the choice for a library on some
moment.  For instance at INIT time.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I guess the only &#34;fix&#34; is to set a requirement for a certain 
&gt; Math::BigInt &#40;probably v1.88 as people need to upgrade anyway&#41; and have 
&gt; people upgrade Math::BigInt from CPAN.
</div>
The Unbuntu Perl maintainer was complaining today, and he was not the
first one... apparently, it has a lot of other modules which are upgraded
as well.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am not sure that would technically work. How should f.i. Math::BigInt 
&gt; decided when to ignore a request to load a library - and when not?
</div>
Only accept library gestures in main::, because currently people can
use external modules which contradict each other.

I started the message exchange with the remark that interface design
is very difficult.  Sometimes unsolvable.
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-446912" href="/Public/Bug/Display.html?id=34822#txn-446912">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;11&nbsp;10:13:35&nbsp;2008</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Apr 2008 16:06:02 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Math-BigInt [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/446912/219368/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219368">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Friday 11 April 2008 00:11:32 Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Math-BigInt
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34822">http://rt.cpan.org/Ticket/Display.html?id=34822</a></span> &gt;
&gt;
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; You may freeze the library at INIT or CHECK type.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; our $fixed;
&gt; &gt; &gt; INIT { $fixed++ }
&gt; &gt; &gt; export { return if $fixed }
</div>&gt; &gt;
&gt; &gt; Sorry, I am a bit to confused as what this should accomplish &#40;and
&gt; &gt; what problem it tries to solve&#41;. Can you explain this to me?
</div>&gt;
&gt; In some way, you should freeze the choice for a library on some
&gt; moment.  For instance at INIT time.
</div>
I am afraid this is not really possible, because while it hasn&#39;t been 
directly supported &#40;e.g. with a method to do this easily&#41;, it has 
always possible to swap out the library at run-time, either by calling 
import&#40;&#41; again, or with a quick eval. In fact, this is how 
Math::BigFloat replaces the Math::BigInt library when you ask it to 
load a different library.

The side-effect that this makes math with two objects created with 
different library impossible is just that, a side-effect, that is not 
even nec. to occur.

For instance, swapping Calc and FastCalc can be done without any 
negative side-effects.

In fact, it would currently be possible to write a library that always 
uses GMP when dealing with it&#39;s numbers internally, but leaves a 
different library for the main program. It would be a bit cumbersome to 
write, but it should be possible.

It would also be possible to fix the problem that $A and $B were created 
with different libraries, but it would come at a high cost &#40;a check for 
this condition in every math operation&#41;. This slowdown is the reason 
why I haven&#39;t added it.

&#40;Addendum: I think I got an idea how this might be implemented without a 
slowdown, but I need to test it and it is a lot of work touching lots 
of code&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I guess the only &#34;fix&#34; is to set a requirement for a certain
&gt; &gt; Math::BigInt &#40;probably v1.88 as people need to upgrade anyway&#41; and
&gt; &gt; have people upgrade Math::BigInt from CPAN.
</div>&gt;
&gt; The Unbuntu Perl maintainer was complaining today, and he was not the
&gt; first one... apparently, it has a lot of other modules which are
&gt; upgraded as well.
</div>
He didn&#39;t complain to me yet ;&#41; Can you please forward his email to me 
or ask him to resend it to me, so I can have a look what exactly his 
problem is?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I am not sure that would technically work. How should f.i.
&gt; &gt; Math::BigInt decided when to ignore a request to load a library -
&gt; &gt; and when not?
</div>&gt;
&gt; Only accept library gestures in main::, because currently people can
&gt; use external modules which contradict each other.
</div>
I don&#39;t think this would even work, as for instance bigrat doesn&#39;t load 
Math::BigInt from main::. And apart from this, this restriction is 
coming probably a few years to late.

As for the external modules, I think the message should be that these 
external modules should leave the decision which library to load to the 
main program - this is, infact the reason for why &#34;lib&#34; now warns if 
the library couldn&#39;t be loaded - formerly these situations were 
silently and thus the library choice would also silently be ignored. 
The current system makes it more explicit. Plus it allows a main 
program to load a completely different library &#40;for testing, debugging, 
or maybe because there is a faster library working in a few years&#41;.

I&#39;ll try to explain this better in the FAQ. &#40;See below&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I started the message exchange with the remark that interface design
&gt; is very difficult.  Sometimes unsolvable.
</div>
My first idea would be to write a detailed FAQ entry on how, why and 
when to load what library, possible replacing the already existing 
section in Math::BigInt.

The document will be first here:

        <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/wiki/index.php?title=POD:Math::BigInt::FAQ">http://bloodgate.com/wiki/index.php?title=POD:Math::BigInt::FAQ</a></span>

and later I will probably just include it into the distribution.

All the best,

Tels

-- 
 Signed on Fri Apr 11 16:04:49 2008 with key 0x93B84C15.
 Get one of my photo posters: <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/posters">http://bloodgate.com/posters</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;Most people, I think, don&#39;t even know what a rootkit is, so why
 should they care about it?&#34;

  -- Thomas Hesse, President of Sony BMG&#39;s global digital business 
division, 2005.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/446912/219369/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 481b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-447032" href="/Public/Bug/Display.html?id=34822#txn-447032">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;11&nbsp;16:19:21&nbsp;2008</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Apr 2008 22:17:39 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;nospam-abuse [...] bloodgate.com via RT&#34; &lt;bug-Math-BigInt [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/447032/219436/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219436">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi Tels,

It&#39;s becoming a long debate.  Time to freeze it in a FAQ, for everyone.
I have removed lib/try references in my module, and added a short note
in the &#39;performance&#39; section which explains the possibility.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My first idea would be to write a detailed FAQ entry on how, why and 
&gt; when to load what library, possible replacing the already existing 
&gt; section in Math::BigInt.
</div>
You know... people don&#39;t like to read.  And people are in for a
difficult decission, certainly when modules define conflicting
backends.  It should DWIM.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The document will be first here:
&gt;   <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/wiki/index.php?title=POD:Math::BigInt::FAQ">http://bloodgate.com/wiki/index.php?title=POD:Math::BigInt::FAQ</a></span>
</div>
Still looks quite empty.  Success, and thanks for your extensive
view in the guts of your modules.  Let me known when you need me
to proof-read.
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-447035" href="/Public/Bug/Display.html?id=34822#txn-447035">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;11&nbsp;16:21:03&nbsp;2008</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34822] Which library is used?</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Apr 2008 22:20:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;nospam-abuse [...] bloodgate.com via RT&#34; &lt;bug-Math-BigInt [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/447035/219439/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/219439">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The Unbuntu Perl maintainer was complaining today, and he was not the
&gt; &gt; first one... apparently, it has a lot of other modules which are
&gt; &gt; upgraded as well.
</div>&gt; 
&gt; He didn&#39;t complain to me yet ;&#41; Can you please forward his email to me 
&gt; or ask him to resend it to me, so I can have a look what exactly his 
&gt; problem is?
</div>

This is what he tells me.  MarkOv.
  -------------- 8&lt; ----------------------- 8&lt; ---------

Queue: XML-Compile
 Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34817">http://rt.cpan.org/Ticket/Display.html?id=34817</a></span> &gt;

On Thu Apr 10 05:30:11 2008, solutions@overmeer.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; * jesper@krogh.cc via RT &#40;bug-XML-Compile@rt.cpan.org&#41; [080410 09:05]:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; Thu Apr 10 05:04:57 2008: Request 34817 was acted upon.
&gt; &gt; Transaction: Ticket created by jesper@krogh.cc
&gt; &gt;        Queue: XML-Compile
&gt; &gt;      Subject: Reduce dependencies..
&gt; &gt;    Broken in: 0.73
&gt; &gt; 
&gt; &gt; XML::Compile has pretty harsh requirements.. on an Ubuntu Gutsy &#40;latest
&gt; &gt; Ubuntu release&#41; an installation of XML::Compile 0.73 would force an
&gt; &gt; update of the perl-installations due to the Math::BigInt requirement.
&gt; &gt; Isn&#39;t it possible to circumvent that? 
</div>&gt; 
&gt; What do you mean with &#34;the perl-installations&#34; ?  What needs to be
&gt; updated?  The newest version from Math::BigInt is available as dual
&gt; lived module from CPAN.
&gt; 
&gt; Math::BigInt is rather crucial for a correct functioning of XML::Compile
&gt; &#40;because the XML Schema spec defines that a &#34;Decimal&#34; should support at
&gt; least 18 digits&#41;
</div>
Sorry if I&#39;m too distribution specific. 
Ubuntu Gutsy provides Math::BigInt 1.77, which is delivered by the
perl-modules, build by the perl source package that also provices the
perl-interpreter. So in order to create an updated package of this with
the new Math::BigInt to push out to our servers I have to go through and
build and update a new&#39;er version of &#34;perl-modules&#34; and &#34;perl&#34;.

So my question was.. is 1.78 of Math::BigInt really a hard requirement? 

since it is giving quite lagre update challenges. 


Thanks. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-452399" href="/Public/Bug/Display.html?id=34822#txn-452399">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;21&nbsp;15:26:47&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-452401" href="/Public/Bug/Display.html?id=34822#txn-452401">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;21&nbsp;15:28:34&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">15 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/452401/222371/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/222371">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 214b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">With the amended documentation in v1.89, this issue should be resolved.
If it isn&#39;t or if you have comments, please do not hesitate to reopen
this bug report by replying to this email :&#41;

Thank you for your report!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-452404" href="/Public/Bug/Display.html?id=34822#txn-452404">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;21&nbsp;15:28:38&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-452406" href="/Public/Bug/Display.html?id=34822#txn-452406">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;21&nbsp;15:28:59&nbsp;2008</span>
    <span class="description">TELS [...] cpan.org -  Broken in 1.88 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.854418</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
