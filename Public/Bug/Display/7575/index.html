<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #7575 for PlRPC: Child died: Storable binary image v21.86 more recent than I am &#40;v2.6&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #7575 for PlRPC: Child died: Storable binary image v21.86 more recent than I am &#40;v2.6&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/PlRPC/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/PlRPC/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/PlRPC/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/PlRPC/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/PlRPC">PlRPC CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">7575</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/PlRPC/Active/">PlRPC</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
lorensen [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-25984-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.2018    </td>
  </tr>
  <tr id="CF-25985-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;08&nbsp;05:07:25&nbsp;2004</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Child died: Storable binary image v21.86 more recent than I am &#40;v2.6&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
When trying to install PlRPC-0.2018 the &#34;crypt&#34; test failes all subtests. In the messages log i get the message bellow:

Sep  8 10:59:23 richter CalcServer[21476]: Child died: Storable binary image v21.86 more recent than I am &#40;v2.6&#41; at ../../lib/Storable.pm &#40;autosplit into ../../lib/auto/Storable/thaw.al&#41; line 363, at blib/lib/RPC/PlServer/Comm.pm line 179

I&#39;m running on: SunOS richter 5.9 Generic_117171-05 sun4u sparc SUNW,Sun-Fire-V240 with perl, v5.8.5 built for sun4-solaris.

Attached is the complete output from the failing test-script
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">t/crypt....Starting server: /pack/perl-5.8.5/bin/perl -Iblib/lib -Iblib/arch t/server --mode=single --debug --timeout 60 --configfile t/crypt.cfg
Use of uninitialized value in concatenation &#40;.&#41; or string at t/lib.pl line 30.
Use of uninitialized value in concatenation &#40;.&#41; or string at t/lib.pl line 31.
Use of uninitialized value in concatenation &#40;.&#41; or string at t/lib.pl line 32.
Use of uninitialized value in concatenation &#40;.&#41; or string at t/lib.pl line 30.
Use of uninitialized value in concatenation &#40;.&#41; or string at t/lib.pl line 31.
Use of uninitialized value in concatenation &#40;.&#41; or string at t/lib.pl line 32.
1..18
not ok 1
Failed to make second connection: Unexpected EOF from server at /.cpanplus/5.8.5/build/PlRPC-0.2018/blib/lib/RPC/PlClient.pm line 79.

not ok 2
Failed to create calculator: Can&#39;t call method &#34;ClientObject&#34; on an undefined value at t/lib.pl line 28.

Calculator is .
Handle is .
Client is .
not ok 3
Expected 17, got undef, errstr Can&#39;t call method &#34;add&#34; on unblessed reference at t/lib.pl line 35.

not ok 4
not ok 5
not ok 6
not ok 7
not ok 8
not ok 9
not ok 10
Failed to make second connection: Unexpected EOF from server at /.cpanplus/5.8.5/build/PlRPC-0.2018/blib/lib/RPC/PlClient.pm line 79.

not ok 11
Failed to create calculator: Can&#39;t call method &#34;ClientObject&#34; on unblessed reference at t/lib.pl line 28.

Calculator is .
Handle is .
Client is .
not ok 12
Expected 17, got undef, errstr Can&#39;t call method &#34;add&#34; on unblessed reference at t/lib.pl line 35.

not ok 13
not ok 14
not ok 15
not ok 16
not ok 17
not ok 18
FAILED tests 1-18
	Failed 18/18 tests, 0.00% okay
Failed 1/1 test scripts, 0.00% okay. 18/18 subtests failed, 0.00% okay.
Failed Test Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/crypt.t                 18   18 100.00%  1-18
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;19&nbsp;22:06:02&nbsp;2004</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwjanes [...] primus.ca</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[guest - Wed Sep  8 05:07:25 2004]:

I had the exact same error, Linux, fedora 2, even with the v21.86
version stamp.  This is Storable complaining about a pile of data it
can&#39;t thaw because it doesn&#39;t recognize the contents.  The reason it
doesn&#39;t recognize the contents is because the contents have not been
decrypted on the server side.

Looks like the cipher moved around, that or the comm object moved.

The quick fix is to move the cipher setup in the config file in crypt.t
up one line.  

However, that fix doesn&#39;t really use different ciphers like the test is
supposed to, ie it passes the test but doesn&#39;t fix the problem.  The
user cipher is never used.

The comm object holds the effective cipher now, but the test code,
and the server code only update the server object.

Here&#39;s a patch for part of the t tests.  This is where they try to
connect with a user that has a special cipher, different from the
host cipher.  The first part of the chat takes place with the host
cipher, but after the accepting welcome message is sent, the remainder
of the dialogue is under the user cipher.  This patch is at the point
where the client side switches ciphers at the same time as the server
switches ciphers.  Again, the correct cipher object is in the comm
object, not the client/server object.

--- t/lib.pl.orig       1999-01-12 16:35:29.000000000 -0500
+++ t/lib.pl    2004-09-19 21:50:00.390036776 -0400
@@ -22,7 +22,7 @@
     # Making a new connection
     Test&#40;$client = eval { RPC::PlClient-&gt;new&#40;@_&#41; }&#41;
        or print &#34;Failed to make second connection: $@\n&#34;;
-    if &#40;$key&#41; { $client-&gt;{&#39;cipher&#39;} = $key }
+    if &#40;$key&#41; { $client-&gt;{&#39;comm&#39;}-&gt;{&#39;cipher&#39;} = $key }
  
     # Creating a calculator object
     my $calculator = eval { $client-&gt;ClientObject&#40;&#39;Calculator&#39;, &#39;new&#39;&#41; };

-----------------------snip!!!

Here&#39;s a patch for the Server.  Again, my only addition to the code
is to make sure the correct cipher is updated.

--- lib/RPC/PlServer.pm.orig    2004-07-19 03:52:23.000000000 -0400
+++ lib/RPC/PlServer.pm 2004-09-19 21:48:45.435431608 -0400
@@ -138,7 +138,7 @@
     if &#40;$client = $self-&gt;{&#39;client&#39;}&#41; {
        if &#40;my $cipher = $client-&gt;{&#39;cipher&#39;}&#41; {
            $self-&gt;Debug&#40;&#34;Host encryption: %s&#34;, $cipher&#41;;
-           $self-&gt;{&#39;cipher&#39;} = $cipher;
+           $comm-&gt;{&#39;cipher&#39;} = $self-&gt;{&#39;cipher&#39;} = $cipher;
        }
     }
  
@@ -174,7 +174,7 @@
     if &#40;my $au = $self-&gt;{&#39;authorized_user&#39;}&#41; {
        if &#40;ref&#40;$au&#41;  &#38;&#38;  &#40;my $cipher = $au-&gt;{&#39;cipher&#39;}&#41;&#41; {
            $self-&gt;Debug&#40;&#34;User encryption: %s&#34;, $cipher&#41;;
-           $self-&gt;{&#39;cipher&#39;} = $cipher;
+           $comm-&gt;{&#39;cipher&#39;} = $self-&gt;{&#39;cipher&#39;} = $cipher;
        }
     }
  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; When trying to install PlRPC-0.2018 the &#34;crypt&#34; test failes all
&gt;    subtests. In the messages log i get the message bellow:
&gt; 
&gt; Sep  8 10:59:23 richter CalcServer[21476]: Child died: Storable binary
&gt;    image v21.86 more recent than I am &#40;v2.6&#41; at ../../lib/Storable.pm
&gt;    &#40;autosplit into ../../lib/auto/Storable/thaw.al&#41; line 363, at
&gt;    blib/lib/RPC/PlServer/Comm.pm line 179
&gt; 
&gt; I&#39;m running on: SunOS richter 5.9 Generic_117171-05 sun4u sparc
&gt;    SUNW,Sun-Fire-V240 with perl, v5.8.5 built for sun4-solaris.
&gt; 
&gt; Attached is the complete output from the failing test-script
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;17&nbsp;16:24:18&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is a very old bug report  CPAN Testers report no bugs in version
0.2019.

Version 0.2020 is the same as 0.2019 except for getting rid of some .svn
directories that got caught in the 0.2019 tar.gz file.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;17&nbsp;16:24:19&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;17&nbsp;16:24:21&nbsp;2007</span>
    <span class="description">MNOONING [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
