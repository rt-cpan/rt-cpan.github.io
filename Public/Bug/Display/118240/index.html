<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #118240 for podlators: In EBCDIC context a &#39;[&#39; gets deleted</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #118240 for podlators: In EBCDIC context a &#39;[&#39; gets deleted</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/podlators/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/podlators/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/podlators/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/podlators/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/podlators">podlators CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">118240</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/podlators/Active/">podlators</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RRA [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
h.huzen [...] belastingdienst.nl

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26322-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-26323-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
4.09    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;06:53:39&nbsp;2016</span>
    <span class="description">h.huzen [...] belastingdienst.nl -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 3 Oct 2016 12:53:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> h.huzen [...] belastingdienst.nl</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Using podlators-4.08 on z/OS &#40;IBM mainframe, perl 5.22, default codepage is
EBCDIC 1047&#41; a &#39;[&#39; gets deleted:


=== sample code ===

use Pod::Text;

my $textin = qq`
=pod

 brackets: []
=cut
`;

print &#34;IN : $textin\n&#34;;


my $textin_fh;
my $textout_fh;

my $tparser= Pod::Text-&gt;new&#40;&#41;;
open&#40;$textin_fh, &#39;&lt;&#39;, \$textin&#41; || die;
open&#40;$textout_fh, &#39;&gt;&#39;, \$textout&#41; || die;

$tparser-&gt;parse_from_file&#40;$textin_fh, $textout_fh&#41;;

print &#34;OUT: $textout\n&#34;;

=== output ===

IN :
=pod

 brackets: []
=cut

OUT:      brackets: ]

============

Kind regards,

Harrie Huzen

------------------------------------------------------------------------
De Belastingdienst stelt e-mail niet open voor aanvragen, aangiften, bezwaarschriften, verzoeken, klachten, ingebrekestellingen en soortgelijke formele berichten.
Dit bericht is uitsluitend bestemd voor de geadresseerde. Het bericht kan vertrouwelijke informatie bevatten waarvoor de fiscale geheimhoudingsplicht geldt. Als u dit bericht per abuis hebt ontvangen, wordt u verzocht het te verwijderen en de afzender te informeren.

The Dutch Tax and Customs Administration does not accept filings, requests, appeals, complaints, notices of default or similar formal notices, sent by email.
This message is solely intended for the addressee. It may contain information that is confidential and legally privileged. If you are not the intended recipient please delete this message and notify the sender.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;12:44:14&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 03 Oct 2016 09:43:55 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;h.huzen\ [...] belastingdienst.nl via RT&#34; &lt;bug-podlators [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;h.huzen@belastingdienst.nl via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Using podlators-4.08 on z/OS &#40;IBM mainframe, perl 5.22, default codepage is
&gt; EBCDIC 1047&#41; a &#39;[&#39; gets deleted:
</div>
Could you try this with Pod::Simple::Text and see if you get the same
behavior?  I&#39;m trying to narrow this down to see if it&#39;s something that
Pod::Text is doing or if it&#39;s in Pod::Simple, which does the codepage
handling.

-- 
#!/usr/bin/perl -- Russ Allbery, Just Another Perl Hacker
$^=q;@!&gt;~|{&gt;krw&gt;yn{u&lt;$$&lt;[~||&lt;Juukn{=,&lt;S~|}&lt;Jwx}qn{&lt;Yn{u&lt;Qjltn{ &gt; 0gFzD gD,
 00Fz, 0,,&#40; 0hF 0g&#41;F/=, 0&gt; &#34;L$/GEIFewe{,$/ 0C$~&gt; &#34;@=,m,|,&#40;e 0.&#41;, 01,pnn,y{
rw} &gt;;,$0=q,$,,&#40;$_=$^&#41;=~y,$/ C-~&gt;&lt;@=\n\r,-~$:-u/ #y,d,s,&#40;\$.&#41;,$1,gee,print
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;12:44:15&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;04&nbsp;03:04:23&nbsp;2016</span>
    <span class="description">h.huzen [...] belastingdienst.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Betr: Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 4 Oct 2016 09:04:04 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> h.huzen [...] belastingdienst.nl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Russ,

It is very confusing.

1&#41;  Pod::Simple::Text

I tried with Pod::Simple::Text, with following result:

IN :
=pod

 brackets: []
=cut

Use of uninitialized value $Pod::Simple::nbsp in regexp compilation
at /u/a21g098/huzeh00/NB/EI/adk_root/os390/perl/lib/site_perl/5.22.0/Pod/Simple/Text.pm
 line 100, &lt;$textin_fh&gt; line 5.
Use of uninitialized value $Pod::Simple::shy in regexp compilation
at /u/a21g098/huzeh00/NB/EI/adk_root/os390/perl/lib/site_perl/5.22.0/Pod/Simple/Text.pm
 line 101, &lt;$textin_fh&gt; line 5.
OUT:      brackets: []

So apart from the uninitialized-error the brackets come out ok.


2&#41; tr command in Pod::Text

I found that in Pod::Text.pm at about line 280 there is a line

 $text =~ tr/\240\255/ /d;


I guess it is to remove characters 0xA0 and 0xFF from the $text string.
but when I put in a hexdump just before and just after I see that the 0xAD
character &#40;which is the &#39;[&#39; in codepage 1047&#41; is removed:

IN : 40 40 40 40 40 82 99 81 83 92 85 a3 a2 7a 40 ad bd 15 15
IN :      brackets: []


OUT: 40 40 40 40 40 82 99 81 83 92 85 a3 a2 7a 40 bd 15 15
OUT:      brackets: ]

I don&#39;t know the purpose of that line so I cannot say if it is correct.
But it is tricky, since there are 2 &#39;oldchars&#39; specified and 1 &#39;newchar&#39;
plus a delete command.
If I understand the comment in
<span class="clickylink"><a target="new" rel="nofollow" href="http://stackoverflow.com/questions/30710164/need-help-in-understanding-perl-tr-command-with-d">http://stackoverflow.com/questions/30710164/need-help-in-understanding-perl-tr-command-with-d</a></span>

correctly, the \240 character will be replaced with the space and the \255
will be deleted.
Furthermore this action is codepage unaware, so that is a risk in itself.

But all of this does not explain why the 0xAD character is removed.
I find that it is the \255 character that matches my 0xAD.
Which I don&#39;t get.

So &#40;apart from the obscurity of the tr-line&#41; this narrows it down to the
question why the \255 in the tr command matches my 0xAD.

3&#41; buggy tr ?

# cat tt.pl
sub dumpData
{
        my &#40;$pkg,$l,$t&#41;=@_;
        print &#34;$t: &#34;;
        my @o=unpack&#40;&#34;C*&#34;,$l&#41;;
        for my $o &#40;@o&#41;
        {       printf &#34;%02x &#34;,$o;
        }
        print &#34;\n&#34;;
        print &#34;$t: &#34;;
        printf &#34;%s&#34;, $l;
        print &#34;\n&#34;;
}

my $text=&#34;abc[]&#34;;
dumpData&#40;undef, $text, &#34;IN &#34; &#41;;
$text =~ tr/\255//d;
dumpData&#40;undef, $text, &#34;OUT&#34; &#41;;


#HUZEH00@APMVST1 /u/a21g098/huzeh00
# perl tt.pl
IN : 81 82 83 ad bd
IN : abc[]
OUT: 81 82 83 bd
OUT: abc]

The circumstance is that I am now working on a newly installed perl 5.22
distribution, so I&#39;m getting the feeling that tr might be buggy here.

I hope this information helps. What is your opinion?


Met vriendelijke groeten

Harrie Huzen
Specialist Ontwikkelen

........................................................................
Belastingdienst
Centrum voor Applicatieontwikkeling en -onderhoud
Service Delivery – FAD Ondersteuning Ontwikkel Services &#40;OOS&#41;
Competence Center Gen/GuardIEn
John F. Kennedylaan 8 | 7314 PS | Apeldoorn | G2 Flex
Postbus 9050 | 7300 GM | Apeldoorn
........................................................................
M 06 - 55 42 08 50
h.huzen@belastingdienst.nl
Competence Center Gen/GuardIEn
........................................................................
= may the source be with you =



Van:    &#34;Russ Allbery via RT&#34; &lt;bug-podlators@rt.cpan.org&gt;
Aan:    h.huzen@belastingdienst.nl
Datum:  03-10-2016 18:44
Onderwerp:      Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted



&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118240">https://rt.cpan.org/Ticket/Display.html?id=118240</a></span> &gt;

&#34;h.huzen@belastingdienst.nl via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Using podlators-4.08 on z/OS &#40;IBM mainframe, perl 5.22, default codepage
</div>is
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; EBCDIC 1047&#41; a &#39;[&#39; gets deleted:
</div>
Could you try this with Pod::Simple::Text and see if you get the same
behavior?  I&#39;m trying to narrow this down to see if it&#39;s something that
Pod::Text is doing or if it&#39;s in Pod::Simple, which does the codepage
handling.

--
#!/usr/bin/perl -- Russ Allbery, Just Another Perl Hacker
$^=q;@!&gt;~|{&gt;krw&gt;yn{u&lt;$$&lt;[~||&lt;Juukn{=,&lt;S~|}&lt;Jwx}qn{&lt;Yn{u&lt;Qjltn{ &gt; 0gFzD gD,
 00Fz, 0,,&#40; 0hF 0g&#41;F/=, 0&gt; &#34;L$/GEIFewe{,$/ 0C$~&gt; &#34;@=,m,|,&#40;e 0.&#41;, 01,pnn,y{
rw} &gt;;,$0=q,$,,&#40;$_=$^&#41;=~y,$/ C-~&gt;&lt;@=\n\r,-~$:-u/ #y,d,s,&#40;\$.&#41;,$1,gee,print



------------------------------------------------------------------------
De Belastingdienst stelt e-mail niet open voor aanvragen, aangiften, bezwaarschriften, verzoeken, klachten, ingebrekestellingen en soortgelijke formele berichten.
Dit bericht is uitsluitend bestemd voor de geadresseerde. Het bericht kan vertrouwelijke informatie bevatten waarvoor de fiscale geheimhoudingsplicht geldt. Als u dit bericht per abuis hebt ontvangen, wordt u verzocht het te verwijderen en de afzender te informeren.

The Dutch Tax and Customs Administration does not accept filings, requests, appeals, complaints, notices of default or similar formal notices, sent by email.
This message is solely intended for the addressee. It may contain information that is confidential and legally privileged. If you are not the intended recipient please delete this message and notify the sender.
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<img alt="graycol.gif" title="graycol.gif" src="/Ticket/Attachment/1674528/898631/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;04&nbsp;03:09:32&nbsp;2016</span>
    <span class="description">h.huzen [...] belastingdienst.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Betr: Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 4 Oct 2016 09:09:13 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> h.huzen [...] belastingdienst.nl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Russ,

Foolish me. My brain is much more hex than octal.

The \255 of course is NOT 0xFF  but it is exactly 0xAD.
So that explains that 0xAD is removed !



Met vriendelijke groeten

Harrie Huzen
Specialist Ontwikkelen

........................................................................
Belastingdienst
Centrum voor Applicatieontwikkeling en -onderhoud
Service Delivery – FAD Ondersteuning Ontwikkel Services &#40;OOS&#41;
Competence Center Gen/GuardIEn
John F. Kennedylaan 8 | 7314 PS | Apeldoorn | G2 Flex
Postbus 9050 | 7300 GM | Apeldoorn
........................................................................
M 06 - 55 42 08 50
h.huzen@belastingdienst.nl
Competence Center Gen/GuardIEn
........................................................................
= may the source be with you =



Van:    &#34;Russ Allbery via RT&#34; &lt;bug-podlators@rt.cpan.org&gt;
Aan:    h.huzen@belastingdienst.nl
Datum:  03-10-2016 18:44
Onderwerp:      Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted



&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118240">https://rt.cpan.org/Ticket/Display.html?id=118240</a></span> &gt;

&#34;h.huzen@belastingdienst.nl via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Using podlators-4.08 on z/OS &#40;IBM mainframe, perl 5.22, default codepage
</div>is
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; EBCDIC 1047&#41; a &#39;[&#39; gets deleted:
</div>
Could you try this with Pod::Simple::Text and see if you get the same
behavior?  I&#39;m trying to narrow this down to see if it&#39;s something that
Pod::Text is doing or if it&#39;s in Pod::Simple, which does the codepage
handling.

--
#!/usr/bin/perl -- Russ Allbery, Just Another Perl Hacker
$^=q;@!&gt;~|{&gt;krw&gt;yn{u&lt;$$&lt;[~||&lt;Juukn{=,&lt;S~|}&lt;Jwx}qn{&lt;Yn{u&lt;Qjltn{ &gt; 0gFzD gD,
 00Fz, 0,,&#40; 0hF 0g&#41;F/=, 0&gt; &#34;L$/GEIFewe{,$/ 0C$~&gt; &#34;@=,m,|,&#40;e 0.&#41;, 01,pnn,y{
rw} &gt;;,$0=q,$,,&#40;$_=$^&#41;=~y,$/ C-~&gt;&lt;@=\n\r,-~$:-u/ #y,d,s,&#40;\$.&#41;,$1,gee,print



------------------------------------------------------------------------
De Belastingdienst stelt e-mail niet open voor aanvragen, aangiften, bezwaarschriften, verzoeken, klachten, ingebrekestellingen en soortgelijke formele berichten.
Dit bericht is uitsluitend bestemd voor de geadresseerde. Het bericht kan vertrouwelijke informatie bevatten waarvoor de fiscale geheimhoudingsplicht geldt. Als u dit bericht per abuis hebt ontvangen, wordt u verzocht het te verwijderen en de afzender te informeren.

The Dutch Tax and Customs Administration does not accept filings, requests, appeals, complaints, notices of default or similar formal notices, sent by email.
This message is solely intended for the addressee. It may contain information that is confidential and legally privileged. If you are not the intended recipient please delete this message and notify the sender.
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<img alt="graycol.gif" title="graycol.gif" src="/Ticket/Attachment/1674532/898638/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;04&nbsp;11:51:25&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Betr: Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 04 Oct 2016 08:51:05 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;h.huzen\ [...] belastingdienst.nl via RT&#34; &lt;bug-podlators [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;h.huzen@belastingdienst.nl via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 2&#41; tr command in Pod::Text
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I found that in Pod::Text.pm at about line 280 there is a line
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  $text =~ tr/\240\255/ /d;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I guess it is to remove characters 0xA0 and 0xFF from the $text string.
&gt; but when I put in a hexdump just before and just after I see that the 0xAD
&gt; character &#40;which is the &#39;[&#39; in codepage 1047&#41; is removed:
</div>
Aha!  Thank you.  Bitten by that again.

I&#39;ll work out some alternate approach there.  That&#39;s always been a bit of
an ugly hack.

-- 
#!/usr/bin/perl -- Russ Allbery, Just Another Perl Hacker
$^=q;@!&gt;~|{&gt;krw&gt;yn{u&lt;$$&lt;[~||&lt;Juukn{=,&lt;S~|}&lt;Jwx}qn{&lt;Yn{u&lt;Qjltn{ &gt; 0gFzD gD,
 00Fz, 0,,&#40; 0hF 0g&#41;F/=, 0&gt; &#34;L$/GEIFewe{,$/ 0C$~&gt; &#34;@=,m,|,&#40;e 0.&#41;, 01,pnn,y{
rw} &gt;;,$0=q,$,,&#40;$_=$^&#41;=~y,$/ C-~&gt;&lt;@=\n\r,-~$:-u/ #y,d,s,&#40;\$.&#41;,$1,gee,print
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;28&nbsp;01:30:47&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Betr: Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 Oct 2016 22:30:23 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Russ Allbery via RT&#34; &lt;bug-podlators [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Russ Allbery via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;h.huzen@belastingdienst.nl via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; 2&#41; tr command in Pod::Text
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I found that in Pod::Text.pm at about line 280 there is a line
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt;  $text =~ tr/\240\255/ /d;
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I guess it is to remove characters 0xA0 and 0xFF from the $text string.
&gt;&gt; but when I put in a hexdump just before and just after I see that the 0xAD
&gt;&gt; character &#40;which is the &#39;[&#39; in codepage 1047&#41; is removed:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Aha!  Thank you.  Bitten by that again.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ll work out some alternate approach there.  That&#39;s always been a bit of
&gt; an ugly hack.
</div>
Okay, I think I&#39;ve fixed this.  Unfortunately, it&#39;s impossible to test an
EBCDIC encoding with Pod::Simple without being on an EBCDIC system &#40;so far
as I know&#41;.  Could you possibly check the current podlators at:

    <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rra/podlators">https://github.com/rra/podlators</a></span>

to see if it still has this problem?  If you grab the current development
source and run:

    perl Makefile.PL
    make

you can then run:

    perl -Iblib/lib scripts/pod2text foo.pod

to run the newly built module on some POD file named foo.pod without
having to install it.  I think this will keep the open brackets from
disappearing.

-- 
#!/usr/bin/perl -- Russ Allbery, Just Another Perl Hacker
$^=q;@!&gt;~|{&gt;krw&gt;yn{u&lt;$$&lt;[~||&lt;Juukn{=,&lt;S~|}&lt;Jwx}qn{&lt;Yn{u&lt;Qjltn{ &gt; 0gFzD gD,
 00Fz, 0,,&#40; 0hF 0g&#41;F/=, 0&gt; &#34;L$/GEIFewe{,$/ 0C$~&gt; &#34;@=,m,|,&#40;e 0.&#41;, 01,pnn,y{
rw} &gt;;,$0=q,$,,&#40;$_=$^&#41;=~y,$/ C-~&gt;&lt;@=\n\r,-~$:-u/ #y,d,s,&#40;\$.&#41;,$1,gee,print
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;28&nbsp;02:27:26&nbsp;2016</span>
    <span class="description">h.huzen [...] belastingdienst.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Betr: Re: Betr: Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Oct 2016 08:27:17 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-podlators [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> h.huzen [...] belastingdienst.nl</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Russ.

I tested the update on the IBM z/OS-USS EBCDIC environment.
The POD handling is working fine now. No problems anymore.

Thank you &#38; kind Regards.

Harrie Huzen

------------------------------------------------------------------------
De Belastingdienst stelt e-mail niet open voor aanvragen, aangiften, bezwaarschriften, verzoeken, klachten, ingebrekestellingen en soortgelijke formele berichten.
Dit bericht is uitsluitend bestemd voor de geadresseerde. Het bericht kan vertrouwelijke informatie bevatten waarvoor de fiscale geheimhoudingsplicht geldt. Als u dit bericht per abuis hebt ontvangen, wordt u verzocht het te verwijderen en de afzender te informeren.

The Dutch Tax and Customs Administration does not accept filings, requests, appeals, complaints, notices of default or similar formal notices, sent by email.
This message is solely intended for the addressee. It may contain information that is confidential and legally privileged. If you are not the intended recipient please delete this message and notify the sender.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;28&nbsp;02:31:41&nbsp;2016</span>
    <span class="description">RRA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Betr: Re: Betr: Re: [rt.cpan.org #118240] In EBCDIC context a &#39;[&#39; gets deleted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 Oct 2016 23:31:27 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;h.huzen\ [...] belastingdienst.nl via RT&#34; &lt;bug-podlators [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Russ Allbery &lt;rra [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;h.huzen@belastingdienst.nl via RT&#34; &lt;bug-podlators@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tested the update on the IBM z/OS-USS EBCDIC environment.  The POD
&gt; handling is working fine now. No problems anymore.
</div>
Awesome, thank you!  I&#39;ll get a new release out, and that will hopefully
make it into Perl proper without too much of a delay.

-- 
#!/usr/bin/perl -- Russ Allbery, Just Another Perl Hacker
$^=q;@!&gt;~|{&gt;krw&gt;yn{u&lt;$$&lt;[~||&lt;Juukn{=,&lt;S~|}&lt;Jwx}qn{&lt;Yn{u&lt;Qjltn{ &gt; 0gFzD gD,
 00Fz, 0,,&#40; 0hF 0g&#41;F/=, 0&gt; &#34;L$/GEIFewe{,$/ 0C$~&gt; &#34;@=,m,|,&#40;e 0.&#41;, 01,pnn,y{
rw} &gt;;,$0=q,$,,&#40;$_=$^&#41;=~y,$/ C-~&gt;&lt;@=\n\r,-~$:-u/ #y,d,s,&#40;\$.&#41;,$1,gee,print
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;25&nbsp;13:40:21&nbsp;2017</span>
    <span class="description">RRA [...] cpan.org -  Fixed in 4.09 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;25&nbsp;13:40:22&nbsp;2017</span>
    <span class="description">RRA [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;25&nbsp;13:40:23&nbsp;2017</span>
    <span class="description">RRA [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
