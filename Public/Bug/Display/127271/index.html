<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #127271 for Mail-IMAPClient: Better has_capability&#40;&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #127271 for Mail-IMAPClient: Better has_capability&#40;&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Mail-IMAPClient/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mail-IMAPClient">Mail-IMAPClient CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">127271</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Mail-IMAPClient/Active/">Mail-IMAPClient</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">PLOBBES [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
gilles [...] lamiral.info

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19960-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19961-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
3.41    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;02&nbsp;16:42:32&nbsp;2018</span>
    <span class="description">gilles [...] lamiral.info -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Better has_capability&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 2 Oct 2018 22:42:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-IMAPClient [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gilles LAMIRAL &lt;gilles [...] lamiral.info&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Phil,

I&#39;m currently playing with has_capability&#40;&#41; in the context of getting
the value 35651584 from a &#34;APPENDLIMIT=35651584&#34; in a response like this one:


  * CAPABILITY IMAP4rev1 ... APPENDLIMIT=35651584

Well, I fail. Reading the code, I should know the value in order to ... not get it
but to know this value is a good guess. It&#39;s not very usable, isn&#39;t it?

  $imap-&gt;has_capability&#40;&#39;APPENDLIMIT=35651584&#39;&#41; # Gives 1
  $imap-&gt;has_capability&#40;&#39;APPENDLIMIT&#39;&#41; # Gives &#34;&#34; &#40;meaning &#34;has not this capability&#34;&#41;

The way to get the value is with $imap-&gt;{APPENDLIMIT}

Well, ok. Some remarks here:

1&#41; It breaks encapsulation! Why use OO then?

2&#41; It could break more things. A server presenting a CAPABILITY

   Anything=any_value   Anything2=any_value2  ... etc.

   will put that directly into the object structure at the top level like:

   $imap-&gt;{ ANYTHING } = any_value ;

   Ok it&#39;s uppercased but not very safe in the long run.
   Safer in term of namespace is to store like:

    $imap-&gt;{ CAPABILITY }-&gt;{ ANYTHING  } = any_value ;

3&#41; Other issue. There can be multiple values like in

   AUTH=PLAIN AUTH=LOGIN AUTH=CRAM-MD5 ...

   Well, again, it finishes with just one

   $imap-&gt;{ AUTH } = &#39;PLAIN&#39; ;

4&#41; Let&#39;s think about a better behaviour.

   Why not:

   $imap-&gt;capability&#40;&#41; # no args =&gt; same as already coded
   scalar context $imap-&gt;capability&#40; &#39;FOO&#39; &#41; # first value val_1 of FOO=val_1 FOO=val_2 ...
   list   context $imap-&gt;capability&#40; &#39;FOO&#39; &#41; # list &#40;val_1, val_2, ...&#41; of FOO=val_1 FOO=val_2 ...

   I suggest to name a new method instead of this complicated behaviour of capability&#40;&#41;
   maybe &#34;capability_of&#40;&#41;&#34;. what do you think of it?


-- 
Au revoir,
Gilles Lamiral. France, Baulon &#40;35580&#41;
mob 06 19 22 03 54
tel 09 51 84 42 42
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;22:43:08&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The issues you&#39;ve noted are certainly far from desirable.

I&#39;m thinking we can still fix capability and/or has_capability to do more along the lines of what one means most likely, but I may need to spend a little time thinking about this before committing to any particular change.

In particular calling has_capability&#40;&#34;$capability=$value&#34;&#41; should probably be deprecated and instead be more like:

  my @vals = $imap-&gt;has_capability&#40;$capability&#41;
  inspect @vals via grep or whatever

If we saw a &#34;=&#34; in the $capability, we could still support the older behavior though.

Another option would be to support an argument to capability&#40;&#41; to get the value&#40;s&#41; that the server returned.

I haven&#39;t thought about this enough to have a strong opinion about what would be most desirable.

If you wanted to submit some test cases showing current usage that you have that you would expect to continue to work as-is, that would be nice to add to our testing corpus.  Especially if we&#39;re going to change this code.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;22:43:08&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;22:43:09&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;05&nbsp;01:06:23&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">How about the following change for starters?  Does this look reasonable?

diff --git a/lib/Mail/IMAPClient.pm b/lib/Mail/IMAPClient.pm
index bf78f08..b58fe81 100644
--- a/lib/Mail/IMAPClient.pm
+++ b/lib/Mail/IMAPClient.pm
@@ -2832,12 +2832,20 @@ sub capability {
     $self-&gt;_imap_command&#40;&#39;CAPABILITY&#39;&#41;
       or return undef;
 
-    my @caps = map { split } grep s/^\*\s+CAPABILITY\s+//, $self-&gt;History;
-    foreach &#40;@caps&#41; {
-        $self-&gt;{CAPABILITY}{ uc $_ }++;
-        $self-&gt;{ uc $1 } = uc $2 if /&#40;.*?&#41;\=&#40;.*&#41;/;
-    }
-
+    my @caps = map { split / /, uc $_ } grep s/^\*\s+CAPABILITY\s+//, $self-&gt;History;
+    my @addc;
+    $self-&gt;{CAPABILITY} ||= {};
+    my $cref = $self-&gt;{CAPABILITY};
+    foreach my $cap &#40;@caps&#41; {
+        $cref-&gt;{$cap} ||= [];
+        my @kv = split&#40; /=/, $cap, 2 &#41;;
+        if &#40; $#kv == 1 &#41; {
+            push&#40; @addc, $kv[0] &#41; unless exists $cref-&gt;{ $kv[0] };
+            $cref-&gt;{ $kv[0] } ||= [];
+            push &#40; @{ $cref-&gt;{ $kv[0] } }, $kv[1] &#41;;
+        }
+    }
+    push &#40; @caps, @addc &#41;;
     return wantarray ? @caps : \@caps;
 }


With this change has_capability would return an array ref which could be empty or have X values depending up on the server response &#40;still matching &#34;true&#34; if the server has the capability documentation - or &#34;&#34; otherwise.  We could change that &#34;true&#34; value be any number of different behaviours if desired. Examples:
- return a list &#40;instead of array ref&#41; if wantarray
- return 0 but true or 0E0 in scalar context if the capability is supported but there isn&#39;t a value associated with that capability in the server response
- ...

Thoughts?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;10&nbsp;23:57:29&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">How about this one?  I&#39;m planning on going with this unless you speak up with obvious issues/concerns &#40;I also have a set of tests to exercise this - need to update docs first before I&#39;m done though&#41;...

diff --git a/lib/Mail/IMAPClient.pm b/lib/Mail/IMAPClient.pm
index bf78f08..1cdfd64 100644
--- a/lib/Mail/IMAPClient.pm
+++ b/lib/Mail/IMAPClient.pm
@@ -2832,11 +2832,20 @@ sub capability {
     $self-&gt;_imap_command&#40;&#39;CAPABILITY&#39;&#41;
       or return undef;
 
-    my @caps = map { split } grep s/^\*\s+CAPABILITY\s+//, $self-&gt;History;
-    foreach &#40;@caps&#41; {
-        $self-&gt;{CAPABILITY}{ uc $_ }++;
-        $self-&gt;{ uc $1 } = uc $2 if /&#40;.*?&#41;\=&#40;.*&#41;/;
+    my @caps = map { split / /, uc $_ } grep s/^\*\s+CAPABILITY\s+//, $self-&gt;History;
+    my @addc;
+
+    $self-&gt;{CAPABILITY} ||= {};
+    foreach my $cap &#40;@caps&#41; {
+        $self-&gt;{CAPABILITY}-&gt;{$cap} ||= [];
+        my @kv = split&#40; /=/, $cap, 2 &#41;;
+        if &#40; $#kv == 1 &#41; {
+            push&#40; @addc, $kv[0] &#41; unless exists $self-&gt;{CAPABILITY}-&gt;{ $kv[0] };
+            $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } ||= [];
+            push &#40; @{ $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } }, $kv[1] &#41;;
+        }
     }
+    push &#40; @caps, @addc &#41;;
 
     return wantarray ? @caps : \@caps;
 }
@@ -2846,7 +2855,17 @@ sub capability {
 sub has_capability {
     my &#40; $self, $which &#41; = @_;
     $self-&gt;capability or return undef;
-    $which ? $self-&gt;{CAPABILITY}{ uc $which } : &#34;&#34;;
+
+    my $aref = $self-&gt;{CAPABILITY}{ uc $which };
+    if &#40;wantarray&#41; {
+        return @{ $aref || [] };
+    }
+    elsif &#40;$aref&#41; {
+        return @$aref ? $aref-&gt;[0] : $which;
+    }
+    else {
+        return &#34;&#34;;
+    }
 }
 
 sub imap4rev1 {
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;11&nbsp;02:21:31&nbsp;2018</span>
    <span class="description">solutions [...] overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127271] Better has_capability&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 11 Oct 2018 08:20:45 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Phil Pearl &#40;Lobbes&#41; via RT&#34; &lt;bug-Mail-IMAPClient [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;solutions [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Phil Pearl &#40;Lobbes&#41; via RT &#40;bug-Mail-IMAPClient@rt.cpan.org&#41; [181011 03:57]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Mail-IMAPClient
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127271">https://rt.cpan.org/Ticket/Display.html?id=127271</a></span> &gt;
&gt; 
&gt; How about this one?  I&#39;m planning on going with this unless you speak
&gt; up with obvious issues/concerns &#40;I also have a set of tests to exercise
&gt; this - need to update docs first before I&#39;m done though&#41;...
</div>
Hum, my message of 5 oct did not reach RT or you.  I&#39;ll bounce it
to you now

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -        $self-&gt;{CAPABILITY}{ uc $_ }++;
&gt; -        $self-&gt;{ uc $1 } = uc $2 if /&#40;.*?&#41;\=&#40;.*&#41;/;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; +        if &#40; $#kv == 1 &#41; {
</div>
           if&#40;@kv==2&#41;       # showing &#39;2&#39; is closer to two &#40;&#41;-pairs

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; +            $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } ||= [];
&gt; +            push &#40; @{ $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } }, $kv[1] &#41;;
</div>
Now you loose backwards compatibility with the ugly $imap-&gt;{PARAM}.
That construct is documented, hence must be kept.

You do not need the first of the pair by autovivification.

  -    $self-&gt;{CAPABILITY}-&gt;{$cap} ||= [];
  -    my @kv = split&#40; /=/, $cap, 2 &#41;;
  -    if &#40; $#kv == 1 &#41; {
  -        push&#40; @addc, $kv[0] &#41; unless exists $self-&gt;{CAPABILITY}-&gt;{ $kv[0] };
  -        $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } ||= [];
  -        push &#40; @{ $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } }, $kv[1] &#41;;
  -        }
  -    }
  -    push &#40; @caps, @addc &#41;;

  +    my $field = $self-&gt;{CAPABILITY}-&gt;{$cap} ||= [];
  +    my &#40;$name, $value&#41; = split /\=/, $cap, 2;
  +    push @{$field-&gt;{$name}}, $value 
  +        if defined $value;

But the latter still breaks compatibility.  Maybe add:

       $self-&gt;{CAPABILITY}-&gt;{$name} = $value;  # backwards compat


  -    push&#40; @addc, $kv[0] &#41; unless exists $self-&gt;{CAPABILITY}-&gt;{ $kv[0]
  -    push &#40; @caps, @addc &#41;;
  -    return wantarray ? @caps : \@caps;

  +    my @names = keys %{$self-&gt;{CAPABILITY}};
  +    wantarray ? @names : \@names;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; @@ -2846,7 +2855,17 @@ sub capability {
</div>  -    my $aref = $self-&gt;{CAPABILITY}{ uc $which };
  -    if &#40;wantarray&#41; {
  -        return @{ $aref || [] };
  -    }
  -    elsif &#40;$aref&#41; {
  -        return @$aref ? $aref-&gt;[0] : $which;
                                        ^^^^^^^ interface change
  -    }
  -    else {
  -        return &#34;&#34;;
  -    }

  +    my $aref = $self-&gt;{CAPABILITY}{ uc $which } || [];
  +    wantarray ? @$aref : &#40;$aref-&gt;[0] || &#39;&#39;&#41;;

But I strongly advice a new method to return lists, for situations
like this:

    call&#40;count =&gt; $imap-&gt;has_capability{PARAM}&#41;;

In LIST content, this may now produce an
     &#34;Odd number of elements in hash assignment&#34;

-- 
Regards,

               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
drs Mark A.C.J. Overmeer                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;11&nbsp;12:27:18&nbsp;2018</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here are the relevant docs:

=head2 capability
...
The B&lt;capability&gt; method returns an array of capabilities as returned
by the CAPABILITY IMAP Client command, or a reference to an array of
capabilities if called in scalar context.  If the CAPABILITY IMAP
Client command fails for any reason then the B&lt;capability&gt; method will
return C&lt;undef&gt;.  Supported capabilities are cached by the client,
...
=head2 has_capability
...
Returns true if the IMAP server to which the IMAPClient object is
connected has the capability specified as an argument to
B&lt;has_capability&gt;.  If the server does not have the capability then
the empty string &#34;&#34; is returned, if the underlying L&lt;/capability&gt;
calls fails then undef is returned.


On Thu Oct 11 02:21:31 2018, solutions@overmeer.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; * Phil Pearl &#40;Lobbes&#41; via RT &#40;bug-Mail-IMAPClient@rt.cpan.org&#41; [181011
&gt; 03:57]:
<div class="message-stanza open">&gt; &gt; Queue: Mail-IMAPClient
&gt; &gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=127271">https://rt.cpan.org/Ticket/Display.html?id=127271</a></span> &gt;
</div></div>[snip]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hum, my message of 5 oct did not reach RT or you.  I&#39;ll bounce it
&gt; to you now
</div>[snip]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; +        if &#40; $#kv == 1 &#41; {
</div>&gt; 
&gt; if&#40;@kv==2&#41;       # showing &#39;2&#39; is closer to two &#40;&#41;-pairs
</div>
agreed

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; +            $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } ||= [];
&gt; &gt; +            push &#40; @{ $self-&gt;{CAPABILITY}-&gt;{ $kv[0] } }, $kv[1] &#41;;
</div>&gt; 
&gt; Now you loose backwards compatibility with the ugly $imap-&gt;{PARAM}.
&gt; That construct is documented, hence must be kept.
</div>
I don&#39;t believe that is documented or supported, but maybe I missed something?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You do not need the first of the pair by autovivification.
</div>
fixed

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; +    my $field = $self-&gt;{CAPABILITY}-&gt;{$cap} ||= [];
&gt; +    my &#40;$name, $value&#41; = split /\=/, $cap, 2;
&gt; +    push @{$field-&gt;{$name}}, $value
&gt; +        if defined $value;
&gt; 
&gt; But the latter still breaks compatibility.  Maybe add:
&gt; 
&gt; $self-&gt;{CAPABILITY}-&gt;{$name} = $value;  # backwards compat
</div>
I defer to my first comment that I believe this is not documented, and not supported.
This is a place that no one should be poking around in.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; -    push&#40; @addc, $kv[0] &#41; unless exists $self-&gt;{CAPABILITY}-&gt;{ $kv[0]
&gt; -    push &#40; @caps, @addc &#41;;
&gt; -    return wantarray ? @caps : \@caps;
&gt; 
&gt; +    my @names = keys %{$self-&gt;{CAPABILITY}};
&gt; +    wantarray ? @names : \@names;
&gt; 
<div class="message-stanza open">&gt; &gt; @@ -2846,7 +2855,17 @@ sub capability {
</div>&gt; -    my $aref = $self-&gt;{CAPABILITY}{ uc $which };
&gt; -    if &#40;wantarray&#41; {
&gt; -        return @{ $aref || [] };
&gt; -    }
&gt; -    elsif &#40;$aref&#41; {
&gt; -        return @$aref ? $aref-&gt;[0] : $which;
&gt;                                       ^^^^^^^ interface change
</div>
The interface is documented to return true, and any non-zero/empty value is true in perl so I feel this keeps with the documentation and the spirit of original intention.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; But I strongly advice a new method to return lists, for situations
&gt; like this:
&gt; 
&gt; call&#40;count =&gt; $imap-&gt;has_capability{PARAM}&#41;;
&gt;
&gt; In LIST content, this may now produce an
&gt;      &#34;Odd number of elements in hash assignment&#34;
</div>
Agreed, that could be problematic, even if likely rare for today&#39;s usage.

If we really are concerned about this, then I suppose we might do this:
- capability stays as is - return undef/array/arrayref depending upon context
- has_capability stays as is - return undef/true&#40;capability name&#41;/false&#40;&#34;&#34;&#41;
- get_capability - similar to has_capability but returns undef or an array ref always?
  - gathers:
    1. an array of values &#40;val1, val2, ...&#41;
    2. single element array &#40;capability&#41; when no values are present
  - returns:
    a. undef - underlying error
    b. array ref regardless of list/scalar context

Is this preferred?  This could be a simple wrapper around has_capabililty as proposed above.

Or what if we changed this return in has_capability to always return an array reference?
+    elsif &#40;$aref&#41; {
+        return @$aref ? $aref-&gt;[0] : $which;
+    }

becomes:
+        return @$aref ? $aref : [$which];

Then document/suggest the caller use &#39;scalar&#39; before any arguments in a list to ensure proper context is used to get the desired results.

The result evaluates to true still, but now the caller needs to deal with an array ref instead of a string.  The docs would need to be updated to note that &#34;true&#34; is now perhaps more useful than before, but is a reference and not just a string which may not have provided the full information desired in the past.

Given the docs only stated returning &#34;true&#34;, we may have leeway, but do we want true to be more useful/correct or should true really be just a 1 &#40;one&#41; and give other actual info in a separate/new call?

I&#39;m not sold on a specific approach yet.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;19:19:26&nbsp;2018</span>
    <span class="description">gilles [...] lamiral.info -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127271] Better has_capability&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 18 Oct 2018 01:19:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-IMAPClient [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gilles LAMIRAL &lt;gilles [...] lamiral.info&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Phil and Mark,

First of all, I prefer keeping back compatibility over everything else,
especially the documented API, which must remains the same for the same
basic calls.

I suggest to write the new documentation API before coding it.

I have to deduce the API reading the code and it&#39;s very error-prone for me,
I&#39;m not good at Perl.

Here is a documentation suggestion.
Keep the no param call exactly the same:

my $features = $imap-&gt;capability
  or die &#34;Could not determine capability: &#34;, $imap-&gt;LastError;

Questions:

1&#41; Do we provide

 $imap-&gt;capability&#40; &#39;KEYWORD&#39; &#41;

2&#41; Do we honour this MUST:

&#34;Client implementations MUST ignore any unknown capability names.&#34;
<span class="clickylink"><a target="new" rel="nofollow" href="https://www.iana.org/assignments/imap-capabilities/imap-capabilities.xhtml">https://www.iana.org/assignments/imap-capabilities/imap-capabilities.xhtml</a></span>

I prefer not, like it is now. The client is the user of Mail::IMAPCLient,
not Mail::IMAPCLient itself, let him free to break the IANA directive.

3&#41; Let&#39;s imagine this CAPABILITY

     CAPABILITY IMAP4rev1 APPENDLIMIT=1234 AUTH=PLAIN AUTH=LOGIN AUTH=CRAM-MD5 UIDPLUS

What returns each of those calls:

  $imap-&gt;has_capability&#40; &#39;IMAP4rev1&#39; &#41;

  $imap-&gt;has_capability&#40; &#39;APPENDLIMIT&#39; &#41;
  $imap-&gt;has_capability&#40; &#39;APPENDLIMIT=&#39; &#41;
  $imap-&gt;has_capability&#40; &#39;APPENDLIMIT=1234&#39; &#41;
  $imap-&gt;has_capability&#40; &#39;APPENDLIMIT=9999&#39; &#41;


  $imap-&gt;has_capability&#40; &#39;AUTH&#39; &#41;
  $imap-&gt;has_capability&#40; &#39;AUTH=&#39; &#41;
  $imap-&gt;has_capability&#40; &#39;AUTH=LOGIN&#39; &#41;
  $imap-&gt;has_capability&#40; &#39;AUTH=NOEXISTS&#39; &#41;



-- 
Au revoir,
Gilles Lamiral. France, Baulon &#40;35580&#41;
mob 06 19 22 03 54
tel 09 51 84 42 42
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;04&nbsp;23:33:54&nbsp;2019</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please look at changes here:
  <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/plobbes/mail-imapclient/commit/742ca2edc9ec0991ebf6c4cbce817fac8ade1c7e">https://github.com/plobbes/mail-imapclient/commit/742ca2edc9ec0991ebf6c4cbce817fac8ade1c7e</a></span>

And test the latest code which is version 3.41_03.  I haven&#39;t done a beta release to CPAN as I&#39;m hoping pulling code from GitHub is easy enough.

I tried to incorporate ideas from both of you &#40;Gilles and Mark&#41;.  It may not be &#34;perfect&#34; but I believe it retains compatibility with the older versions, and builds ont that by now providing visibility into the capability data returned from the server cleaner handling of multivalued capabilities.

Your feedback is welcome.  I&#39;d like to make this an official release soon-ish if there aren&#39;t major objections or issues found.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;04&nbsp;23:33:56&nbsp;2019</span>
    <span class="description">PLOBBES [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;07&nbsp;06:17:31&nbsp;2019</span>
    <span class="description">gilles [...] lamiral.info -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #127271] Better has_capability&#40;&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 7 Jan 2019 12:17:19 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-IMAPClient [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gilles LAMIRAL &lt;gilles [...] lamiral.info&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Phil,

It sounds great!

Do the following +lines are also true:

* CAPABILITY IMAP4rev1 SORT SORT=DISPLAY I18NLEVEL=1 AUTH=PLAIN AUTH=XTEST
Results are returned as shown by comments:
  $cap = $imap-&gt;has_capability&#40;&#34;IMAP4rev1&#34;&#41;    # ret: [ &#34;IMAP4rev1&#34; ]
  @cap = $imap-&gt;has_capability&#40;&#34;IMAP4rev1&#34;&#41;    # ret: &#40; &#34;IMAP4rev1&#34; &#41;
  $cap = $imap-&gt;has_capability&#40;&#34;SORT&#34;&#41;         # ret: [ &#34;DISPLAY&#34; ]
  @cap = $imap-&gt;has_capability&#40;&#34;SORT=DISPLAY&#34;&#41; # ret: &#40; &#34;SORT=DISPLAY&#34; &#41;
  $cap = $imap-&gt;has_capability&#40;&#34;AUTH&#34;&#41;         # ret: [ &#34;PLAIN&#34;, &#34;XTEST&#34; ]
+ @cap = $imap-&gt;has_capability&#40;&#34;AUTH&#34;&#41;         # ret: &#40; &#34;PLAIN&#34;, &#34;XTEST&#34; &#41;
+ $cap = $imap-&gt;has_capability&#40;&#34;AUTH=XTEST&#34;&#41;   # ret: [ &#34;AUTH=XTEST&#34; ]
  @cap = $imap-&gt;has_capability&#40;&#34;AUTH=XTEST&#34;&#41;   # ret: &#40; &#34;AUTH=XTEST&#34; &#41;
  $cap = $imap-&gt;has_capability&#40;&#34;AUTH=NADA&#34;&#41;    # ret: &#39;&#39;
  @cap = $imap-&gt;has_capability&#40;&#34;AUTH=NADA&#34;&#41;    # ret: &#40;&#41;
+ $cap = $imap-&gt;has_capability&#40;&#34;NADA&#34;&#41;         # ret: &#39;&#39;
+ @cap = $imap-&gt;has_capability&#40;&#34;NADA&#34;&#41;         # ret: &#40;&#41;


Thanks!


-- 
Au revoir,
Gilles Lamiral. France, Baulon &#40;35580&#41;
mob 06 19 22 03 54
tel 09 51 84 42 42
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;16&nbsp;08:47:27&nbsp;2019</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Made updates similar to what was requested in this commit:

commit 6ef6ea4f1793bce7f93d4d64bce8ad0a6f508c1b
Author: Phil Pearl &#40;Lobbes&#41; &lt;plobbes@gmail.com&gt;
Date:   Sun Jan 13 00:46:07 2019 -0500

    - minor has_capability POD cleanup


On Mon Jan 07 06:17:31 2019, gilles@lamiral.info wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Phil,
&gt; 
&gt; It sounds great!
&gt; 
&gt; Do the following +lines are also true:
&gt; 
&gt; * CAPABILITY IMAP4rev1 SORT SORT=DISPLAY I18NLEVEL=1 AUTH=PLAIN AUTH=XTEST
&gt; Results are returned as shown by comments:
&gt;   $cap = $imap-&gt;has_capability&#40;&#34;IMAP4rev1&#34;&#41;    # ret: [ &#34;IMAP4rev1&#34; ]
&gt;   @cap = $imap-&gt;has_capability&#40;&#34;IMAP4rev1&#34;&#41;    # ret: &#40; &#34;IMAP4rev1&#34; &#41;
&gt;   $cap = $imap-&gt;has_capability&#40;&#34;SORT&#34;&#41;         # ret: [ &#34;DISPLAY&#34; ]
&gt;   @cap = $imap-&gt;has_capability&#40;&#34;SORT=DISPLAY&#34;&#41; # ret: &#40; &#34;SORT=DISPLAY&#34; &#41;
&gt;   $cap = $imap-&gt;has_capability&#40;&#34;AUTH&#34;&#41;         # ret: [ &#34;PLAIN&#34;, &#34;XTEST&#34; ]
&gt; + @cap = $imap-&gt;has_capability&#40;&#34;AUTH&#34;&#41;         # ret: &#40; &#34;PLAIN&#34;, &#34;XTEST&#34; &#41;
&gt; + $cap = $imap-&gt;has_capability&#40;&#34;AUTH=XTEST&#34;&#41;   # ret: [ &#34;AUTH=XTEST&#34; ]
&gt;   @cap = $imap-&gt;has_capability&#40;&#34;AUTH=XTEST&#34;&#41;   # ret: &#40; &#34;AUTH=XTEST&#34; &#41;
&gt;   $cap = $imap-&gt;has_capability&#40;&#34;AUTH=NADA&#34;&#41;    # ret: &#39;&#39;
&gt;   @cap = $imap-&gt;has_capability&#40;&#34;AUTH=NADA&#34;&#41;    # ret: &#40;&#41;
&gt; + $cap = $imap-&gt;has_capability&#40;&#34;NADA&#34;&#41;         # ret: &#39;&#39;
&gt; + @cap = $imap-&gt;has_capability&#40;&#34;NADA&#34;&#41;         # ret: &#40;&#41;
&gt; 
&gt; 
&gt; Thanks!
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;21&nbsp;07:33:49&nbsp;2019</span>
    <span class="description">PLOBBES [...] cpan.org -  Fixed in 3.41 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;21&nbsp;07:33:49&nbsp;2019</span>
    <span class="description">PLOBBES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The fix for this issue is in version 3.41 which was released several hours ago.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;21&nbsp;07:33:50&nbsp;2019</span>
    <span class="description">PLOBBES [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
