<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #20513 for Test-Simple: Test-Simple-0.64 test failure on perl 5.004_05</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #20513 for Test-Simple: Test-Simple-0.64 test failure on perl 5.004_05</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Test-Simple">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Test-Simple">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Test-Simple">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Test-Simple">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://github.com/Test-More/test-more/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-Simple">Test-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">20513</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Test-Simple">Test-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
david.romano+cpan [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-31590-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31591-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Test-Builder-Tester.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/224615/93015/Test-Builder-Tester.patch">
Mon Jul 17 09:30:20 2006 (836b) by unobe [...] cpan.org
</a>
</font></li>
</ul>


Test-Simple.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/224615/93018/Test-Simple.patch">
Mon Jul 17 09:30:20 2006 (998b) by unobe [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/224596/92999/Test-Simple.patch">
Mon Jul 17 07:57:11 2006 (2k) by unobe [...] cpan.org
</a>
</font></li>
</ul>


TS.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/260782/113369/TS.patch">
Fri Nov 10 15:26:13 2006 (1.3k) by unobe@cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=20513">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-224596" href="/Public/Bug/Display.html?id=20513#txn-224596">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;17&nbsp;07:57:11&nbsp;2006</span>
    <span class="description">unobe [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test-Simple-0.64 test failure on perl 5.004_05</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/224596/92996/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/92996">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">perl -v:
This is perl, version 5.004_05 built for ppc-darwin

Copyright 1987-1998, Larry Wall

Perl may be copied only under the terms of either the Artistic License
or the GNU General Public License, which may be found in the Perl 5.0
source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using `man perl&#39; or `perldoc perl&#39;.  If you have access to
the Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/">http://www.perl.com/</a></span>, the Perl Home
Page.

uname -a:
Darwin paperweight.unobe.com 8.7.0 Darwin Kernel Version 8.7.0: Fri May
26 15:20:53 PDT 2006; root:xnu-792.6.76.obj~1/RELEASE_PPC Power
Macintosh powerpc

problem:
During the `make test` of Test-Simple-0.64, many errors were found and
consequently the test suite did not pass. The test files that were affected:
t/skip.t
t/tbt_01basic.t
t/tbt_02fhrestore.t
t/tbt_03die.t
t/tbt_04line_num.t
t/tbt_05fail_diag.t
t/tbt_06errormess.t
t/tbt_07args.t

the failures were due to:
a&#41; the usage of qr// in a couple of the tests as well as in
Test/Builder/Tester.pm used for testing.
b&#41; wrong expected return values when testing Test::Builder::Tester,
specifically test_err&#40;&#41;.


solution:
attached patch.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test-Simple.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/224596/92999/Test-Simple.patch">Download Test-Simple.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ur Test-Simple-0.64/lib/Test/Builder/Tester.pm Test-Simple-0.64-patched/lib/Test/Builder/Tester.pm
--- Test-Simple-0.64/lib/Test/Builder/Tester.pm	2006-07-16 02:47:23.000000000 -0700
+++ Test-Simple-0.64-patched/lib/Test/Builder/Tester.pm	2006-07-17 04:21:49.000000000 -0700
@@ -507,7 +507,7 @@
     my&#40;$self, $check&#41; = @_;
 
     if&#40; $check =~ /\A&#40;.*&#41;#     &#40;Failed .*test&#41; \&#40;&#40;.*?&#41; at line &#40;\d+&#41;\&#41;\z/ &#41; {
-        $check = qr/\Q$1\E#\s+\Q$2\E.*?\n?.*?\Q$3\E at line \Q$4\E.*\n?/;
+        $check = &#34;/\Q$1\E#\\s+\Q$2\E.*?\\n?.*?\Q$3\E at line \Q$4\E.*\\n?/&#34;;
     }
 
     return $check;
@@ -527,7 +527,7 @@
     my @checks = @{$self-&gt;[2]};
     my $got = $self-&gt;[1];
     foreach my $check &#40;@checks&#41; {
-        $check = qr/^\Q$check\E/ unless ref $check;
+        $check = &#34;\Q$check\E&#34; unless &#40;$check =~ s,^/&#40;.*&#41;/$,$1, or ref $check&#41;;
         return 0 unless $got =~ s/^$check//;
     }
 
diff -ur Test-Simple-0.64/t/skip.t Test-Simple-0.64-patched/t/skip.t
--- Test-Simple-0.64/t/skip.t	2006-07-16 02:06:03.000000000 -0700
+++ Test-Simple-0.64-patched/t/skip.t	2006-07-17 04:24:45.000000000 -0700
@@ -94,5 +94,5 @@
         pass &#34;This does not run&#34;;
     }
 
-    like $warning, qr/^skip\&#40;\&#41; was passed a non-numeric number of tests/;
+    like $warning, &#34;/^skip\Q&#40;&#41;\E was passed a non-numeric number of tests/&#34;;
 }
diff -ur Test-Simple-0.64/t/tbt_01basic.t Test-Simple-0.64-patched/t/tbt_01basic.t
--- Test-Simple-0.64/t/tbt_01basic.t	2006-07-16 02:39:26.000000000 -0700
+++ Test-Simple-0.64-patched/t/tbt_01basic.t	2006-07-17 04:27:07.000000000 -0700
@@ -22,7 +22,8 @@
 test_test&#40;&#34;multiple tests&#34;&#41;;
 
 test_out&#40;&#34;not ok 1 - should fail&#34;&#41;;
-test_err&#40;&#34;#     Failed test &#40;$0 at line 28&#41;&#34;&#41;;
+test_err&#40;&#34;#   Failed test &#39;should fail&#39;&#34;&#41;;
+test_err&#40;&#34;#   in $0 at line 29.&#34;&#41;;
 test_err&#40;&#34;#          got: &#39;foo&#39;&#34;&#41;;
 test_err&#40;&#34;#     expected: &#39;bar&#39;&#34;&#41;;
 is&#40;&#34;foo&#34;,&#34;bar&#34;,&#34;should fail&#34;&#41;;
@@ -46,7 +47,7 @@
 
 
 test_out&#40;&#34;not ok 1 - name # TODO Something&#34;&#41;;
-test_err&#40;&#34;#     Failed &#40;TODO&#41; test &#40;$0 at line 52&#41;&#34;&#41;;
+test_err&#40;&#34;#     Failed &#40;TODO&#41; test &#40;$0 at line 53&#41;&#34;&#41;;
 TODO: { 
     local $TODO = &#34;Something&#34;;
     fail&#40;&#34;name&#34;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-224615" href="/Public/Bug/Display.html?id=20513#txn-224615">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;17&nbsp;09:30:20&nbsp;2006</span>
    <span class="description">unobe [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/224615/93012/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/93012">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 373b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 17 07:57:11 2006, UNOBE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; solution:
&gt; attached patch.
</div>Sorry, I had messed up on the the first patch &#40;forgot one change to
Test-Builder-Tester&#41;. These next two patches separate the
Test-Builder-Tester.pm patch from the tests for Test-Simple.pm. I&#39;m not
sure how the changes will affect Test-Builder-Tester&#39;s test suite &#40;if
there is a separate one for it&#41;.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/224615/93015/Test-Builder-Tester.patch">Download Test-Builder-Tester.patch</a><br />
<span class="downloadcontenttype">text/x-diff 836b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Test/Builder/Tester.pm.orig	2006-07-17 06:16:20.000000000 -0700
+++ lib/Test/Builder/Tester.pm	2006-07-17 06:15:35.000000000 -0700
@@ -506,8 +506,8 @@
 {
     my&#40;$self, $check&#41; = @_;
 
-    if&#40; $check =~ /\A&#40;.*&#41;#     &#40;Failed .*test&#41; \&#40;&#40;.*?&#41; at line &#40;\d+&#41;\&#41;\z/ &#41; {
-        $check = qr/\Q$1\E#\s+\Q$2\E.*?\n?.*?\Q$3\E at line \Q$4\E.*\n?/;
+    if&#40; $check =~ /\A&#40;.*&#41;#     &#40;Failed .*test&#41; \&#40;&#40;.*?&#41; at line &#40;\d+&#41;\&#41;\Z/ &#41; {
+        $check = &#34;/\Q$1\E#\\s+\Q$2\E.*?\\n?.*?\Q$3\E at line \Q$4\E.*\\n?/&#34;;
     }
 
     return $check;
@@ -527,7 +527,7 @@
     my @checks = @{$self-&gt;[2]};
     my $got = $self-&gt;[1];
     foreach my $check &#40;@checks&#41; {
-        $check = qr/^\Q$check\E/ unless ref $check;
+        $check = &#34;\Q$check\E&#34; unless &#40;$check =~ s,^/&#40;.*&#41;/$,$1, or ref $check&#41;;
         return 0 unless $got =~ s/^$check//;
     }
 
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/224615/93018/Test-Simple.patch">Download Test-Simple.patch</a><br />
<span class="downloadcontenttype">text/x-diff 998b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- t/skip.t.orig	2006-07-17 06:18:45.000000000 -0700
+++ t/skip.t	2006-07-17 05:31:27.000000000 -0700
@@ -94,5 +94,5 @@
         pass &#34;This does not run&#34;;
     }
 
-    like $warning, qr/^skip\&#40;\&#41; was passed a non-numeric number of tests/;
+    like $warning, &#34;/^skip\Q&#40;&#41;\E was passed a non-numeric number of tests/&#34;;
 }
--- t/tbt_01basic.t.orig	2006-07-17 06:19:45.000000000 -0700
+++ t/tbt_01basic.t	2006-07-17 05:31:27.000000000 -0700
@@ -22,7 +22,8 @@
 test_test&#40;&#34;multiple tests&#34;&#41;;
 
 test_out&#40;&#34;not ok 1 - should fail&#34;&#41;;
-test_err&#40;&#34;#     Failed test &#40;$0 at line 28&#41;&#34;&#41;;
+test_err&#40;&#34;#   Failed test &#39;should fail&#39;&#34;&#41;;
+test_err&#40;&#34;#   in $0 at line 29.&#34;&#41;;
 test_err&#40;&#34;#          got: &#39;foo&#39;&#34;&#41;;
 test_err&#40;&#34;#     expected: &#39;bar&#39;&#34;&#41;;
 is&#40;&#34;foo&#34;,&#34;bar&#34;,&#34;should fail&#34;&#41;;
@@ -46,7 +47,7 @@
 
 
 test_out&#40;&#34;not ok 1 - name # TODO Something&#34;&#41;;
-test_err&#40;&#34;#     Failed &#40;TODO&#41; test &#40;$0 at line 52&#41;&#34;&#41;;
+test_err&#40;&#34;#     Failed &#40;TODO&#41; test &#40;$0 at line 53&#41;&#34;&#41;;
 TODO: { 
     local $TODO = &#34;Something&#34;;
     fail&#40;&#34;name&#34;&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-224616" href="/Public/Bug/Display.html?id=20513#txn-224616">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;17&nbsp;09:30:22&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-259197" href="/Public/Bug/Display.html?id=20513#txn-259197">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;05&nbsp;12:57:16&nbsp;2006</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/259197/112446/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/112446">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 921b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 17 09:30:20 2006, UNOBE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jul 17 07:57:11 2006, UNOBE wrote:
<div class="message-stanza open">&gt;  &gt; solution:
</div><div class="message-stanza open">&gt; &gt; attached patch.
</div>&gt; Sorry, I had messed up on the the first patch &#40;forgot one change to
&gt; Test-Builder-Tester&#41;. These next two patches separate the
&gt; Test-Builder-Tester.pm patch from the tests for Test-Simple.pm. I&#39;m not
&gt; sure how the changes will affect Test-Builder-Tester&#39;s test suite &#40;if
&gt; there is a separate one for it&#41;.
</div>
Thank you for testing with 5.4.5.  I don&#39;t have one handy.

I fixed skip.t but the Test::Builder::Tester patch did not apply
cleanly.  You might want to try again against the repository version.
<span class="clickylink"><a target="new" rel="nofollow" href="http://svn.schwern.org/CPAN/Test-Simple/trunk">http://svn.schwern.org/CPAN/Test-Simple/trunk</a></span>

It also appears to change the behavior of TBT as evidenced by the need
to change the results one of its tests.

&#40;No, there are no other TBT tests than the ones which ship with
Test-Simple&#41;.

I&#39;m not really sure yet how to fix TBT to not use qr//.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-260782" href="/Public/Bug/Display.html?id=20513#txn-260782">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;10&nbsp;15:26:12&nbsp;2006</span>
    <span class="description">unobe@cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20513] Test-Simple-0.64 test failure on perl 5.004_05</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 10 Nov 2006 12:25:41 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Michael_G_Schwern via RT &lt;bug-Test-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Romano &lt;unobe [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/260782/113368/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/113368">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 932b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael_G_Schwern via RT wrote on Sun, Nov 05, 2006 at 09:57:18AM PST:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you for testing with 5.4.5.  I don&#39;t have one handy.
</div>You&#39;re welcome; thanks for the software :-&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I fixed skip.t but the Test::Builder::Tester patch did not apply
&gt; cleanly.  You might want to try again against the repository version.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://svn.schwern.org/CPAN/Test-Simple/trunk">http://svn.schwern.org/CPAN/Test-Simple/trunk</a></span>
&gt; 
&gt; It also appears to change the behavior of TBT as evidenced by the need
&gt; to change the results one of its tests.
&gt; 
&gt; I&#39;m not really sure yet how to fix TBT to not use qr//.
</div>I&#39;ve attached a patch against revision 3874 that fixes TBT to not use
qr//, without having to change any crucial test results.

I also changed t/pod-coverage.t so 5.004 doesn&#39;t fail when parsing it
&#40;using the same method you used in t/fail-like.t&#41;. I also tested my
changes w/5.8.8 and w/5.8.6.

- David

-- 
&#34;Where is human nature so weak as in the bookstore?&#34;
    -- Henry Ward Beecher
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/260782/113369/TS.patch">Download TS.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.3k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-260809" href="/Public/Bug/Display.html?id=20513#txn-260809">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;10&nbsp;15:48:44&nbsp;2006</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20513] Test-Simple-0.64 test failure on perl 5.004_05</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 10 Nov 2006 14:47:40 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/260809/113384/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/113384">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 492b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">unobe@cpan.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve attached a patch against revision 3874 that fixes TBT to not use
&gt; qr//, without having to change any crucial test results.
</div>
Thanks, this applied cleanly.  I left \z as \z.  Why did you change it to \Z?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I also changed t/pod-coverage.t so 5.004 doesn&#39;t fail when parsing it
&gt; &#40;using the same method you used in t/fail-like.t&#41;. I also tested my
&gt; changes w/5.8.8 and w/5.8.6.
</div>
Turns out Pod::Coverage takes strings.

Try the latest from the repo please.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-260856" href="/Public/Bug/Display.html?id=20513#txn-260856">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;10&nbsp;17:21:43&nbsp;2006</span>
    <span class="description">unobe@cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #20513] Test-Simple-0.64 test failure on perl 5.004_05</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 10 Nov 2006 14:21:24 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Michael G Schwern via RT &lt;bug-Test-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Romano &lt;unobe [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/260856/113418/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/113418">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote on Fri, Nov 10, 2006 at 12:48:45PM PST:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks, this applied cleanly.  I left \z as \z.  Why did you change it to \Z?
&gt; ...
&gt; Try the latest from the repo please.
</div>The latest from the repo works cleanly except for a few TBT tests:
Failed Test         Stat Wstat Total Fail  List of Failed
-------------------------------------------------------------------------------
t/tbt_01basic.t                    9    4  6-9
t/tbt_05faildiag.t                 5    2  1-2
t/tbt_06errormess.t                8    3  4 7-8
t/tbt_07args.t                    18    5  4 7-8 15-16
9 tests and 13 subtests skipped.
Failed 4/67 test scripts. 14/476 subtests failed.
Files=67, Tests=476, 30 wallclock secs &#40; 5.50 cusr +  1.70 csys =  7.20
CPU&#41;
Failed 4/67 test programs. 14/476 subtests failed.
make: *** [test_dynamic] Error 35

5.4.5 doesn&#39;t have \z, so by replacing \z with \Z, the tests pass.
Looking at the perlre man page for 5.4.5, \Z&#40;?!\n&#41; is suggested to match
the very end of a string. Replacing \z with \Z&#40;?!\n&#41; makes all the tests
pass as well.

- David

-- 
&#34;Perl isn&#39;t a toolbox, but a small machine shop where you can
special-order certain sorts of tools at low cost and in short order.&#34;
    -- Larry Wall
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-280323" href="/Public/Bug/Display.html?id=20513#txn-280323">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;22:20:05&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/280323/125530/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/125530">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 16b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">0.66 fixed this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-280326" href="/Public/Bug/Display.html?id=20513#txn-280326">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;22:20:07&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.776093</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
