<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #63312 for DBD-AnyData: Bug with Fixed format files, file creation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #63312 for DBD-AnyData: Bug with Fixed format files, file creation</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-AnyData/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-AnyData/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-AnyData/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-AnyData/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-AnyData">DBD-AnyData CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">63312</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-AnyData/Active/">DBD-AnyData</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dbialac [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10066-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10067-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;24&nbsp;16:35:36&nbsp;2010</span>
    <span class="description">dbialac [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bug with Fixed format files, file creation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Nov 2010 16:35:24 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-dbd-anydata [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Bialac &lt;dbialac [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hey

I was trying out DBD::AnyData and I found a couple of bugs with it.
Additionally, I have a feature request.

1&#41; It won&#39;t create files on an insert. If I am executing an insert statement
to a file that doesn&#39;t exist, it seems to me that rather than blowing up it
should create the file. In other query types &#40;select, update,
delete&#41; it should work as though the file is an empty table until data is
inserted.
2&#41; When outputing to a Fixed file and doing an insert on only some of the
fields, the record is not written to the file correctly. It
completely ignores any fields not provided in the insert clause.

Ex:
Format:
a =&gt; 1 - 10
b =&gt; 11 - 16
c =&gt; 17-21
d =&gt; 22-25

pattern =&gt; &#39;A11 A6 A5 A4&#39;
col_names =&gt; &#39;a,b,c,d&#39;

insert into tablename &#40;b, d&#41; values &#40;&#39;123456&#39;, &#39;1234&#39;&#41;
insert into tablename &#40;a, c&#41; values &#40;&#39;12345678901&#39;, &#39;12345&#39;&#41;

results in a file that looks like this &#40;quotes added for clarity&#41;:
&#34;1234561234&#34;
&#34;1234567890112345&#34;
but it should look like this:
&#34;           123456     1234&#34;
&#34;12345678901      12345    &#34;
Additionally, it places a newline character at the end of the record.
Newline is NOT implied when working with fixed format files.

Finally, a feature reqest:
Add the ability to provide the col_names attribute as an array reference
rather than a string

Thanks

-- 
-----
Dave Bialac
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;24&nbsp;18:15:36&nbsp;2010</span>
    <span class="description">dbialac [...] gmail.com - Ticket #63316:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> More bugs in Fixed format files</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Nov 2010 18:15:26 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-dbd-anydata &lt;bug-dbd-anydata [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Bialac &lt;dbialac [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found some more bugs in fixed format files. They don&#39;t seem to work at
all. Some examples

Ex:
Format:
a =&gt; 1 - 10
b =&gt; 11 - 16
c =&gt; 17-21
d =&gt; 22-25

pattern =&gt; &#39;A11 A6 A5 A4&#39;
col_names =&gt; &#39;a,b,c,d&#39;
select b from tablename

Gives:

DBD::AnyData::st execute failed:
Execution ERROR: No such column &#39;b&#39; called from MYLIBRARY at MYLINENUMBER.
 at
/usr/lib/perl5/site_perl/5.8.8/i386-linux-thread-multi/DBI/DBD/SqlEngine.pm
line 793

However

insert into tablename &#40;b&#41; values &#40;123456&#41;

Does not generate that error

-----
Bug 2:
I found that when doing inserts, the pattern isn&#39;t used properly. Instead of
using the field for the corresponding column name, it will instead use the
field in place n, where n is the location of the column within the insert
statement.  Using the givens from above,

 insert into tablename &#40;b&#41; values &#40;123456&#41;

gives &#40;quotes added&#41;:
&#34;123456     &#34;

This is a correction from my previous bug report

-- 
-----
Dave Bialac
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;25&nbsp;03:14:13&nbsp;2010</span>
    <span class="description">REHSACK [...] cpan.org - Ticket #63316:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 24 18:15:36 2010, dbialac@gmail.com wrote:
[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; This is a correction from my previous bug report
&gt; 
</div>Hi Dave,

thanks for the correction.

If you want to do us a favor in future, then please add the 
corrections/additions/enhancements/clarifications/etc. direct to the correct RT ticket.

/Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;25&nbsp;03:14:13&nbsp;2010</span>
    <span class="description">The RT System itself - Ticket #63316:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;25&nbsp;03:15:04&nbsp;2010</span>
    <span class="description">REHSACK [...] cpan.org - Ticket #63316:  Merged into ticket #63312</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;25&nbsp;03:15:04&nbsp;2010</span>
    <span class="description">REHSACK [...] cpan.org -  Merged into ticket #63312</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;25&nbsp;03:21:40&nbsp;2010</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 24 16:35:36 2010, dbialac@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hey
</div>
Hi Dave,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I was trying out DBD::AnyData and I found a couple of bugs with it.
</div>
For bugs, please read <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/SQL-">http://search.cpan.org/dist/SQL-</a></span>
Statement/lib/SQL/Statement.pm#SUPPORT :&#41;

I&#39;m very limited on my free time, and I can neither accept nor reject reported bugs I 
can&#39;t reproduce. So please provide code snipsets which runs on their own for 
reproducing the bug.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Additionally, I have a feature request.
&gt; 
&gt; 1&#41; It won&#39;t create files on an insert. If I am executing an insert statement
&gt; to a file that doesn&#39;t exist, it seems to me that rather than blowing up it
&gt; should create the file. In other query types &#40;select, update,
&gt; delete&#41; it should work as though the file is an empty table until data is
&gt; inserted.
&gt; 2&#41; When outputing to a Fixed file and doing an insert on only some of the
&gt; fields, the record is not written to the file correctly. It
&gt; completely ignores any fields not provided in the insert clause.
&gt; 
&gt; Ex:
&gt; Format:
&gt; a =&gt; 1 - 10
&gt; b =&gt; 11 - 16
&gt; c =&gt; 17-21
&gt; d =&gt; 22-25
&gt; 
&gt; pattern =&gt; &#39;A11 A6 A5 A4&#39;
&gt; col_names =&gt; &#39;a,b,c,d&#39;
&gt; 
&gt; insert into tablename &#40;b, d&#41; values &#40;&#39;123456&#39;, &#39;1234&#39;&#41;
&gt; insert into tablename &#40;a, c&#41; values &#40;&#39;12345678901&#39;, &#39;12345&#39;&#41;
&gt; 
&gt; results in a file that looks like this &#40;quotes added for clarity&#41;:
&gt; &#34;1234561234&#34;
&gt; &#34;1234567890112345&#34;
&gt; but it should look like this:
&gt; &#34;           123456     1234&#34;
&gt; &#34;12345678901      12345    &#34;
&gt; Additionally, it places a newline character at the end of the record.
&gt; Newline is NOT implied when working with fixed format files.
&gt; 
&gt; Finally, a feature reqest:
&gt; Add the ability to provide the col_names attribute as an array reference
&gt; rather than a string
</div>
This feature request can be rejected for now. DBD::AnyData will receive a rework one 
fine day and base then on DBD::File. At this moment, you can use all features 
provided by DBD::File. Anyway, DBD::AnyData 0.110 bases on DBI::DBD::SqlEngine 
which supports dbh attributes via new hash interface which allows you to give 
col_names as an array.

Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;25&nbsp;03:21:42&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
