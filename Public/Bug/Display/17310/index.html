<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17310 for Archive-Tar: Archive-Tar 1.26_01 not tolerant to Archives with Garbage</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17310 for Archive-Tar: Archive-Tar 1.26_01 not tolerant to Archives with Garbage</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Archive-Tar/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Archive-Tar/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Archive-Tar/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Archive-Tar/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Archive-Tar">Archive-Tar CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17310</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Archive-Tar/Active/">Archive-Tar</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
bevapost [...] pobox.sk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-2526-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.26    </td>
  </tr>
  <tr id="CF-2527-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




tartest.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/195748/71922/tartest.pl">
Mon May 15 13:46:45 2006 (276b) by Guest
</a>
</font></li>
</ul>


test1.tar<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/160425/49986/test1.tar">
Mon Jan 30 05:31:16 2006 (30k) by bevapost [...] pobox.sk
</a>
</font></li>
</ul>


x.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/195748/71919/x.gz">
Mon May 15 13:46:45 2006 (2.9k) by Guest
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;27&nbsp;10:28:20&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Archive-Tar 1.26_01 not tolerant to Archives with Garbage</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ActiveState Perl 5.8.7.815
D:\Perl5.8.7.815\bin&gt;perl -v

This is perl, v5.8.7 built for MSWin32-x86-multi-thread
&#40;with 14 registered patches, see perl -V for more detail&#41;

Copyright 1987-2005, Larry Wall

Binary build 815 [211909] provided by ActiveState 
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
ActiveState is a division of Sophos.
Built Nov  2 2005 08:44:52

Archive-Tar 1.26.01
is not tolerant to Tar Archives with Garbage

vvvvv
D:\data_to_process\Perl5.8.7.8xx_TarTest&gt;ptar -t -f 
060123datacollst7r135.tar
Couldn&#39;t read chunk at offset unknown at D:\Perl5.8.7.815\bin\ptar 
line 36
Can&#39;t call method &#34;is_label&#34; on an undefined value at 
D:/Perl5.8.7.815/site/lib/Archive/Tar.pm line 282.
^^^^^

The tar Archive contain Garbage after Last Record


Last Tolerant Configuration:
ActiveState Perl 5.6.1.638
Archive-Tar 1.08
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;02:23:00&nbsp;2006</span>
    <span class="description">bevapost [...] pobox.sk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17310] AutoReply: Archive-Tar 1.26_01 not tolerant to Archives with Garbage</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 30 Jan 2006 08:22:05 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Archive-Tar [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Bedrich Valenta&#34; &lt;bevapost [...] pobox.sk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Additional Info:

Tar.pm
$VERSION        = &#34;1.08&#34;;
232        # Apparently this should really be two blocks of 512 zeroes,
233        # but GNU tar sometimes gets it wrong. See comment in the
234        # source code &#40;tar.c&#41; to GNU cpio.
235        last if $chunk eq TAR_END; 

Tar.pm
$VERSION            = &#34;1.26_01&#34;;
260        ### Apparently this should really be two blocks of 512 zeroes,
261        ### but GNU tar sometimes gets it wrong. See comment in the
262        ### source code &#40;tar.c&#41; to GNU cpio.
263        next if $chunk eq TAR_END;

My HP-UX Box leave tar Archives rubisch after two blocks of 512 zeroes.
I guess this is the Reason why 1.08 work and 1.26.02 not

Thanks
Bedrich Valenta


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;-----Pôvodná správa-----
&gt;Od: Bugs in Archive-Tar via RT [mailto:bug-Archive-Tar@rt.cpan.org]
&gt;Odoslané: 1. januára 0001 0:00
&gt;Komu: bevapost@pobox.sk
&gt;Predmet: [rt.cpan.org #17310] AutoReply: Archive-Tar 1.26_01 not tolerant to Archives with Garbage
&gt;
&gt;
&gt;
&gt;Greetings,
&gt;
&gt;This message has been automatically generated in response to the
&gt;creation of a trouble ticket regarding:
&gt;&#34;Archive-Tar 1.26_01 not tolerant to Archives with Garbage&#34;,
&gt;a summary of which appears below.
&gt;
&gt;There is no need to reply to this message right now.  Your ticket has been
&gt;assigned an ID of [rt.cpan.org #17310].
&gt;
&gt;Please include the string:
&gt;
&gt;[rt.cpan.org #17310]
&gt;
&gt;in the subject line of all future correspondence about this issue. To do so,
&gt;you may reply to this message.
&gt;
&gt;Thank you,
&gt;bug-Archive-Tar@rt.cpan.org
&gt;
&gt;-------------------------------------------------------------------------
&gt;ActiveState Perl 5.8.7.815
&gt;D:\Perl5.8.7.815\bin&gt;perl -v
&gt;
&gt;This is perl, v5.8.7 built for MSWin32-x86-multi-thread
&gt;&#40;with 14 registered patches, see perl -V for more detail&#41;
&gt;
&gt;Copyright 1987-2005, Larry Wall
&gt;
&gt;Binary build 815 [211909] provided by ActiveState
&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
&gt;ActiveState is a division of Sophos.
&gt;Built Nov  2 2005 08:44:52
&gt;
&gt;Archive-Tar 1.26.01
&gt;is not tolerant to Tar Archives with Garbage
&gt;
&gt;vvvvv
&gt;D:\data_to_process\Perl5.8.7.8xx_TarTest&gt;ptar -t -f
&gt;060123datacollst7r135.tar
&gt;Couldn&#39;t read chunk at offset unknown at D:\Perl5.8.7.815\bin\ptar
&gt;line 36
&gt;Can&#39;t call method &#34;is_label&#34; on an undefined value at
&gt;D:/Perl5.8.7.815/site/lib/Archive/Tar.pm line 282.
&gt;^^^^^
&gt;
&gt;The tar Archive contain Garbage after Last Record
&gt;
&gt;
&gt;Last Tolerant Configuration:
&gt;ActiveState Perl 5.6.1.638
&gt;Archive-Tar 1.08
</div>


Aktivujte si neobmedzenu mailovu schranku na www.pobox.sk!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;04:26:24&nbsp;2006</span>
    <span class="description">kane [...] xs4all.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17310] AutoReply: Archive-Tar 1.26_01 not tolerant to Archives with Garbage</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 30 Jan 2006 10:25:35 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Archive-Tar [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jos I. Boumans&#34; &lt;kane [...] xs4all.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Jan 30, 2006, at 8:23 AM, bevapost@pobox.sk via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=17310">http://rt.cpan.org/Ticket/Display.html?id=17310</a></span> &gt;
&gt;
&gt; Additional Info:
&gt;
&gt; Tar.pm
&gt; $VERSION        = &#34;1.08&#34;;
&gt; 232        # Apparently this should really be two blocks of 512 zeroes,
&gt; 233        # but GNU tar sometimes gets it wrong. See comment in the
&gt; 234        # source code &#40;tar.c&#41; to GNU cpio.
&gt; 235        last if $chunk eq TAR_END;
&gt;
&gt; Tar.pm
&gt; $VERSION            = &#34;1.26_01&#34;;
&gt; 260        ### Apparently this should really be two blocks of 512 
&gt; zeroes,
&gt; 261        ### but GNU tar sometimes gets it wrong. See comment in the
&gt; 262        ### source code &#40;tar.c&#41; to GNU cpio.
&gt; 263        next if $chunk eq TAR_END;
&gt;
&gt; My HP-UX Box leave tar Archives rubisch after two blocks of 512 zeroes.
&gt; I guess this is the Reason why 1.08 work and 1.26.02 not
</div>
Could you send me a sample .tar file from your HP-UX box? That might 
help me in
fixing the issue.

Something containing:

        $ mkdir x
        $ touch x/y
        $ tar -cf x.tar x

would work just fine. And for documentation purposes:

        $ tar --version

Thanks,

--

Jos Boumans

        &#34;You know you are never more indignant in life than when you&#39;re
        shopping at a store you feel is beneath you and one of the other
        customers mistakes you for one of the employees of that store.&#34;
                - Dennis Miller

        CPANPLUS        <span class="clickylink"><a target="new" rel="nofollow" href="http://cpanplus.sf.net">http://cpanplus.sf.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;04:26:25&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;05:31:16&nbsp;2006</span>
    <span class="description">bevapost [...] pobox.sk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: Re: [rt.cpan.org #17310] AutoReply: Archive-Tar 1.26_01 not tolerant to Archives with Garbage</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 30 Jan 2006 11:30:18 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Archive-Tar [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Bedrich Valenta&#34; &lt;bevapost [...] pobox.sk&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I have Created test1.tar dummy Archive. &#40;attached&#41;
It contain Garbage at the end &#40;as expected&#41;.

HP-UX version 11.11


Thanks
Bedrich Valenta

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;-----Pôvodná správa-----
&gt;Od: Jos I. Boumans via RT [mailto:bug-Archive-Tar@rt.cpan.org]
&gt;Odoslané: 1. januára 0001 0:00
&gt;Komu: bevapost@pobox.sk
&gt;Predmet: Re: [rt.cpan.org #17310] AutoReply: Archive-Tar 1.26_01 not tolerant to Archives with Garbage
&gt;
&gt;
&gt;
&gt;On Jan 30, 2006, at 8:23 AM, bevapost@pobox.sk via RT wrote:
&gt;
<div class="message-stanza open">&gt;&gt;
&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=17310">http://rt.cpan.org/Ticket/Display.html?id=17310</a></span> &gt;
&gt;&gt;
&gt;&gt; Additional Info:
&gt;&gt;
&gt;&gt; Tar.pm
&gt;&gt; $VERSION        = &#34;1.08&#34;;
&gt;&gt; 232        # Apparently this should really be two blocks of 512 zeroes,
&gt;&gt; 233        # but GNU tar sometimes gets it wrong. See comment in the
&gt;&gt; 234        # source code &#40;tar.c&#41; to GNU cpio.
&gt;&gt; 235        last if $chunk eq TAR_END;
&gt;&gt;
&gt;&gt; Tar.pm
&gt;&gt; $VERSION            = &#34;1.26_01&#34;;
&gt;&gt; 260        ### Apparently this should really be two blocks of 512
&gt;&gt; zeroes,
&gt;&gt; 261        ### but GNU tar sometimes gets it wrong. See comment in the
&gt;&gt; 262        ### source code &#40;tar.c&#41; to GNU cpio.
&gt;&gt; 263        next if $chunk eq TAR_END;
&gt;&gt;
&gt;&gt; My HP-UX Box leave tar Archives rubisch after two blocks of 512 zeroes.
&gt;&gt; I guess this is the Reason why 1.08 work and 1.26.02 not
</div>&gt;
&gt;Could you send me a sample .tar file from your HP-UX box? That might
&gt;help me in
&gt;fixing the issue.
&gt;
&gt;Something containing:
&gt;
&gt;$ mkdir x
&gt;$ touch x/y
&gt;$ tar -cf x.tar x
&gt;
&gt;would work just fine. And for documentation purposes:
&gt;
&gt;$ tar --version
&gt;
&gt;Thanks,
&gt;
&gt;--
&gt;
&gt;Jos Boumans
&gt;
&gt;&#34;You know you are never more indignant in life than when you&#39;re
&gt;shopping at a store you feel is beneath you and one of the other
&gt;customers mistakes you for one of the employees of that store.&#34;
&gt;- Dennis Miller
&gt;
&gt;CPANPLUS       <span class="clickylink"><a target="new" rel="nofollow" href="http://cpanplus.sf.net">http://cpanplus.sf.net</a></span>
</div>


Aktivujte si neobmedzenu mailovu schranku na www.pobox.sk!
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/160425/49986/test1.tar">Download test1.tar</a><br />
<span class="downloadcontenttype">application/x-tar 30k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;03&nbsp;08:39:56&nbsp;2006</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 30 05:31:16 2006, bevapost@pobox.sk wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have Created test1.tar dummy Archive. &#40;attached&#41;
&gt; It contain Garbage at the end &#40;as expected&#41;.
</div>
Thanks for that archive.. it allowed me to track down the problem.
It turns out archive::tar&#39;s garbage protection isn&#39;t as robust as it should be,
but i&#39;ve found a way to add another check, that at least tackles &#39;trailing
garbage&#39; well enough;

==== //member/kane/archive-tar-new/lib/Archive/Tar.pm#99 - /Users/kane/sources/p4/
other/archive-tar-new/lib/Archive/Tar.pm ====
270a271,282
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         ### according to the posix spec, the last 12 bytes of the header are
&gt;         ### null bytes, to pad it to a 512 byte block. That means if these
&gt;         ### bytes are NOT null bytes, it&#39;s a corrrupt header. See:
&gt;         ### www.koders.com/c/
</div>fidCE473AD3D9F835D690259D60AD5654591D91D5BA.aspx
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         ### line 111
&gt;         {   my $nulls = join &#39;&#39;, &#34;\0&#34; x 12;
&gt;             unless&#40; $nulls eq substr&#40; $chunk, 500, 12 &#41; &#41; {
&gt;                 $self-&gt;_error&#40; qq[Invalid header block at offset $offset] &#41;;
&gt;                 next LOOP;
&gt;             }
&gt;         }
&gt; 
</div>
This seems to effectively stop any garbage being produced from the
archive you provided... a simple ptar on it now warns about the invalid
headers, but operates normally otherwise:

$ perl bin/ptar -t -f /tmp/test1.tar
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
Invalid header block at offset unknown at bin/ptar line 36
/var/adm/new._ACL
/var/adm/new._OWNER
/var/adm/new._PROD_DFLT_ACL
/var/adm/new._SOC_DFLT_ACL
/var/adm/new.secrets
/var/adm/cleanup.log

I&#39;ll be adding this fix to A::T 1.29, which will be released shortly.

Thanks for reporting,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;03&nbsp;08:40:01&nbsp;2006</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;15&nbsp;13:46:45&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> manju_putcha [...] yahoo.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am using Archive-Tar 1.29, still get the same error for the follwing
zip file.  Please help?

M

On Fri Mar 03 08:39:56 2006, KANE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jan 30 05:31:16 2006, bevapost@pobox.sk wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; I have Created test1.tar dummy Archive. &#40;attached&#41;
&gt; &gt; It contain Garbage at the end &#40;as expected&#41;.
</div>&gt; 
&gt; Thanks for that archive.. it allowed me to track down the problem.
&gt; It turns out archive::tar&#39;s garbage protection isn&#39;t as robust as it
&gt; should be,
&gt; but i&#39;ve found a way to add another check, that at least tackles
&gt; &#39;trailing
&gt; garbage&#39; well enough;
&gt; 
&gt; ==== //member/kane/archive-tar-new/lib/Archive/Tar.pm#99 -
&gt; /Users/kane/sources/p4/
&gt; other/archive-tar-new/lib/Archive/Tar.pm ====
&gt; 270a271,282
<div class="message-stanza open">&gt; &gt;         ### according to the posix spec, the last 12 bytes of the
</div>&gt; header are
<div class="message-stanza open">&gt; &gt;         ### null bytes, to pad it to a 512 byte block. That means if
</div>&gt; these
<div class="message-stanza open">&gt; &gt;         ### bytes are NOT null bytes, it&#39;s a corrrupt header. See:
&gt; &gt;         ### www.koders.com/c/
</div>&gt; fidCE473AD3D9F835D690259D60AD5654591D91D5BA.aspx
<div class="message-stanza open">&gt; &gt;         ### line 111
&gt; &gt;         {   my $nulls = join &#39;&#39;, &#34;\0&#34; x 12;
&gt; &gt;             unless&#40; $nulls eq substr&#40; $chunk, 500, 12 &#41; &#41; {
&gt; &gt;                 $self-&gt;_error&#40; qq[Invalid header block at offset
</div>&gt; $offset] &#41;;
<div class="message-stanza open">&gt; &gt;                 next LOOP;
&gt; &gt;             }
&gt; &gt;         }
&gt; &gt;
</div>&gt; 
&gt; This seems to effectively stop any garbage being produced from the
&gt; archive you provided... a simple ptar on it now warns about the
&gt; invalid
&gt; headers, but operates normally otherwise:
&gt; 
&gt; $ perl bin/ptar -t -f /tmp/test1.tar
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; Invalid header block at offset unknown at bin/ptar line 36
&gt; /var/adm/new._ACL
&gt; /var/adm/new._OWNER
&gt; /var/adm/new._PROD_DFLT_ACL
&gt; /var/adm/new._SOC_DFLT_ACL
&gt; /var/adm/new.secrets
&gt; /var/adm/cleanup.log
&gt; 
&gt; I&#39;ll be adding this fix to A::T 1.29, which will be released shortly.
&gt; 
&gt; Thanks for reporting,
</div></div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/195748/71919/x.gz">Download x.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 2.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/local/bin/perl -w

use lib qw&#40;/export/home/mputcha/Archive-Tar-1.29&#41;;
use strict;
use LogUtil;
use Archive::Tar;
 


   my $tar = Archive::Tar-&gt;new;
  if&#40; Archive::Tar-&gt;can_handle_compressed_files&#41;{
   $tar-&gt;read&#40;&#39;x.gz&#39;,1&#41;;
   }
   else{
   print &#34;CANT HANDLE\n&#34;;
   }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;15&nbsp;13:46:48&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;15&nbsp;16:59:42&nbsp;2006</span>
    <span class="description">kane [...] xs4all.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #17310] Archive-Tar 1.26_01 not tolerant to  Archives with Garbage</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 15 May 2006 22:59:00 +0200 &#40;CEST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Archive-Tar [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kane [...] xs4all.nl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Archive-Tar
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=17310">http://rt.cpan.org/Ticket/Display.html?id=17310</a></span> &gt;
&gt;
&gt; I am using Archive-Tar 1.29, still get the same error for the follwing
&gt; zip file.  Please help?
</div>
The file you attached is a gzip compressed file.. NOT a tar compressed file.
Archive::tar only handles tar files, with optional gzip compression.

You want IO::Zlib or Compress::Zlib to do this task for you.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;04&nbsp;09:00:15&nbsp;2006</span>
    <span class="description">kane [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
