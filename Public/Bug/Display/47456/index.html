<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #47456 for jmx4perl: check_jmx4perl does not run in ePN environment</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #47456 for jmx4perl: check_jmx4perl does not run in ePN environment</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/jmx4perl/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/jmx4perl/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/jmx4perl/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/jmx4perl/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/jmx4perl">jmx4perl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">47456</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/jmx4perl/Active/">jmx4perl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">roland [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
bruhacs [...] flexlyrics.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-227286-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-227287-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;06:51:35&nbsp;2009</span>
    <span class="description">bruhacs [...] flexlyrics.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> check_jmx4perl does not run in ePN environment</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 30 Jun 2009 12:48:19 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-jmx4perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lorand Bruhacs &lt;bruhacs [...] flexlyrics.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When running check_jmx4perl in ePN, it errors with

&#34;**ePN /usr/lib64/nagios/plugins/check_jmx4perl: &#34;Subroutine  
Nagios::Plugin::Functions::get_shortname redefined at &#40;eval 2&#41; line 66&#34;

Platform: Nagios 3.0.6 with ePN on Fedora 11 &#40;x86_64&#41;

The plugin runs correctly when ePN is disabled.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;07:18:10&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;07:29:42&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Indeed, this is a warning echoed when &#39;use warnings&#39; is active &#40;as it seems to be true for ePN&#41;. 
But it should be a warning only which shouldn&#39;t affect the proper working of check_jmx4perl. 
Can you verify this please ?

For the forthcoming 0.21, which is scheduled for the end of this week, this warning is disabled 
&#40;but &#39;use warnings&#39; is included for the rest&#41;

FYI, this &#39;hack&#39; is used to  fine tune the appearing of the plugin&#39;s output in order to start the line 
directly with the status OK, CRITICAL,  .... without any disturbing prefix.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;07:29:43&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;08:24:27&nbsp;2009</span>
    <span class="description">bruhacs [...] flexlyrics.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47456] check_jmx4perl does not run in ePN environment </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 30 Jun 2009 14:24:06 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-jmx4perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lorand Bruhacs &lt;bruhacs [...] flexlyrics.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Actually this issue does affect the behavior of check_jmx4perl - when  
called as a Nagios checkcommand, it returns status UNKNOWN.

Running with &#39;# nagios -epn&#39; is no big deal if you&#39;re only using it  
for a couple of services, but if you&#39;re doing heavy checking &#40;which  
eventually I will be&#41;, I imagine that epn would matter quite a bit  
performance-wise.

On Jun 30, 2009, at 13:29 PM, Roland Huss via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47456">https://rt.cpan.org/Ticket/Display.html?id=47456</a></span> &gt;
&gt;
&gt; Indeed, this is a warning echoed when &#39;use warnings&#39; is active &#40;as  
&gt; it seems to be true for ePN&#41;.
&gt; But it should be a warning only which shouldn&#39;t affect the proper  
&gt; working of check_jmx4perl.
&gt; Can you verify this please ?
&gt;
&gt; For the forthcoming 0.21, which is scheduled for the end of this  
&gt; week, this warning is disabled
&gt; &#40;but &#39;use warnings&#39; is included for the rest&#41;
&gt;
&gt; FYI, this &#39;hack&#39; is used to  fine tune the appearing of the plugin&#39;s  
&gt; output in order to start the line
&gt; directly with the status OK, CRITICAL,  .... without any disturbing  
&gt; prefix.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;08:27:54&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">ok, this seems to be more than a simple warning issue. I need to get hold on a Nagios 
Installation with Perl compiled in for making some test. Stay tuned ... ;-&#41; 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;01&nbsp;09:01:22&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I &#40;hopefully&#41; fixed all issues related with running check_jmx4perl from
within ePN. Please download Version 0.21_1 from
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/R/RO/ROLAND/jmx4perl-0.21_1.tar.gz">http://search.cpan.org/CPAN/authors/id/R/RO/ROLAND/jmx4perl-0.21_1.tar.gz</a></span> and
give it a try. If it works for you, I would like to make a 0.21 release
on friday.

Thanks a lot for you investigation ...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;01&nbsp;14:38:44&nbsp;2009</span>
    <span class="description">bruhacs [...] flexlyrics.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47456] check_jmx4perl does not run in ePN environment </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 1 Jul 2009 20:38:12 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-jmx4perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lorand Bruhacs &lt;bruhacs [...] flexlyrics.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Roland,

Thanks for the fix... I&#39;ll take it for a spin tomorrow morning and see  
whether it does the trick.

Best Wishes,

Lorand


On Jul 1, 2009, at 15:01 PM, Roland Huss via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47456">https://rt.cpan.org/Ticket/Display.html?id=47456</a></span> &gt;
&gt;
&gt; I &#40;hopefully&#41; fixed all issues related with running check_jmx4perl  
&gt; from
&gt; within ePN. Please download Version 0.21_1 from
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/R/RO/ROLAND/jmx4perl-0.21_1.tar.gz">http://search.cpan.org/CPAN/authors/id/R/RO/ROLAND/jmx4perl-0.21_1.tar.gz</a></span> 
&gt;  and
&gt; give it a try. If it works for you, I would like to make a 0.21  
&gt; release
&gt; on friday.
&gt;
&gt; Thanks a lot for you investigation ...
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;04:32:30&nbsp;2009</span>
    <span class="description">bruhacs [...] flexlyrics.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47456] check_jmx4perl does not run in ePN environment </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Jul 2009 10:32:09 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-jmx4perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lorand Bruhacs &lt;bruhacs [...] flexlyrics.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Manually running the 0.21_1 check_jmx4perl Nagios plugin from the  
command line seems to work ok:

$ ./check_jmx4perl --url <span class="clickylink"><a target="new" rel="nofollow" href="http://foobar.flexlyrics.com:8080/j4p">http://foobar.flexlyrics.com:8080/j4p</a></span> --name  
memory_used --mbean java.lang:type=Memory --attribute HeapMemoryUsage  
--path used --warning 60000 --critical 50000000
WARNING - memory_used : Threshold 60000 failed for value 43083072 |  
memory_used=43083072;60000;50000000

But having Nagios run the same check from a service definition results  
in a CRITICAL &#40;service check did not exit properly&#41;.

Turning off ePN in check_jmx4perl lets the Nagios check run properly.


On Jul 1, 2009, at 15:01 PM, Roland Huss via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/R/RO/ROLAND/jmx4perl-0.21_1.tar.gz">http://search.cpan.org/CPAN/authors/id/R/RO/ROLAND/jmx4perl-0.21_1.tar.gz</a></span>
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;04:40:21&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for trying check_jmx4perl. I will try to reproduce it on my Nagios installation, my latest 
tests seemed to work properly with critical values in ePN. What version of Nagios are you using 
in what environment ? 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;04:47:17&nbsp;2009</span>
    <span class="description">bruhacs [...] flexlyrics.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47456] check_jmx4perl does not run in ePN environment </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Jul 2009 10:46:58 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-jmx4perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lorand Bruhacs &lt;bruhacs [...] flexlyrics.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m using a stock Nagios 3.0.6 install on Fedora 11 x86_64 &#40;from yum  
pkg: nagios-3.0.6-3.fc11.x86_64 &#41;.

On Jul 2, 2009, at 10:40 PM, Roland Huss via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47456">https://rt.cpan.org/Ticket/Display.html?id=47456</a></span> &gt;
&gt;
&gt; Thanks for trying check_jmx4perl. I will try to reproduce it on my  
&gt; Nagios installation, my latest
&gt; tests seemed to work properly with critical values in ePN. What  
&gt; version of Nagios are you using
&gt; in what environment ?
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;05:27:01&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Unfortunately I can&#39;t reproduce the error &#40;Nagios 3.0.6, Debian 32bit, 2.6.26&#41; &#40;see attachted 
screenshot&#41;. I verified that that the embedded Perl interpreter is switched on and compiled in

11:24:19 atlantis [~] # ldd `which nagios3 `
        linux-gate.so.1 =&gt;  &#40;0xb7f37000&#41;
        libperl.so.5.10 =&gt; /usr/lib/libperl.so.5.10 &#40;0xb7dde000&#41;
        libdl.so.2 =&gt; /lib/i686/cmov/libdl.so.2 &#40;0xb7dda000&#41;
        libm.so.6 =&gt; /lib/i686/cmov/libm.so.6 &#40;0xb7db4000&#41;
        libpthread.so.0 =&gt; /lib/i686/cmov/libpthread.so.0 &#40;0xb7d9b000&#41;
        libc.so.6 =&gt; /lib/i686/cmov/libc.so.6 &#40;0xb7c3a000&#41;
        libcrypt.so.1 =&gt; /lib/i686/cmov/libcrypt.so.1 &#40;0xb7c07000&#41;
        /lib/ld-linux.so.2 &#40;0xb7f38000&#41;
11:24:25 atlantis [~] # grep perl /etc/nagios3/nagios.cfg 
# This value determines where the p1.pl perl script &#40;used by the
enable_embedded_perl=1
use_embedded_perl_implicitly=1

Do you have any other debugging output for me beside &#34;&#40;service check did not exit properly&#41;&#34; 
? 
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<img alt="Picture 1.png" title="Picture 1.png" src="/Ticket/Attachment/627139/319192/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;05:46:08&nbsp;2009</span>
    <span class="description">bruhacs [...] flexlyrics.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #47456] check_jmx4perl does not run in ePN environment </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Jul 2009 11:45:47 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-jmx4perl [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Lorand Bruhacs &lt;bruhacs [...] flexlyrics.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Good point about the embedded Perl interpreter.

I just went and verified that it is in fact compiled in and turned on  
in nagios.cfg.

My embedded perl looks to be a bit different than yours though:

$ ldd `which nagios`
        linux-vdso.so.1 =&gt;  &#40;0x00007fff75796000&#41;
        libperl.so =&gt; /usr/lib64/perl5/5.10.0/x86_64-linux-thread-multi/CORE/ 
libperl.so &#40;0x00007f666d2f2000&#41;
        libresolv.so.2 =&gt; /lib64/libresolv.so.2 &#40;0x0000003f4be00000&#41;
        libnsl.so.1 =&gt; /lib64/libnsl.so.1 &#40;0x0000003f50a00000&#41;
        libdl.so.2 =&gt; /lib64/libdl.so.2 &#40;0x0000003f42000000&#41;
        libm.so.6 =&gt; /lib64/libm.so.6 &#40;0x0000003f41c00000&#41;
        libcrypt.so.1 =&gt; /lib64/libcrypt.so.1 &#40;0x00007f666d0a2000&#41;
        libutil.so.1 =&gt; /lib64/libutil.so.1 &#40;0x0000003f50200000&#41;
        libpthread.so.0 =&gt; /lib64/libpthread.so.0 &#40;0x0000003f42400000&#41;
        libc.so.6 =&gt; /lib64/libc.so.6 &#40;0x0000003f41800000&#41;
        /lib64/ld-linux-x86-64.so.2 &#40;0x0000003f41400000&#41;
        libfreebl3.so =&gt; /lib64/libfreebl3.so &#40;0x00007f666ce43000&#41;

I&#39;ll have to find out how to turn up the logging verbosity- my  
nagios.log doesn&#39;t contain any useful information on the error.


On Jul 2, 2009, at 11:27 PM, Roland Huss via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=47456">https://rt.cpan.org/Ticket/Display.html?id=47456</a></span> &gt;
&gt;
&gt; Unfortunately I can&#39;t reproduce the error &#40;Nagios 3.0.6, Debian  
&gt; 32bit, 2.6.26&#41; &#40;see attachted
&gt; screenshot&#41;. I verified that that the embedded Perl interpreter is  
&gt; switched on and compiled in
&gt;
&gt; 11:24:19 atlantis [~] # ldd `which nagios3 `
&gt;        linux-gate.so.1 =&gt;  &#40;0xb7f37000&#41;
&gt;        libperl.so.5.10 =&gt; /usr/lib/libperl.so.5.10 &#40;0xb7dde000&#41;
&gt;        libdl.so.2 =&gt; /lib/i686/cmov/libdl.so.2 &#40;0xb7dda000&#41;
&gt;        libm.so.6 =&gt; /lib/i686/cmov/libm.so.6 &#40;0xb7db4000&#41;
&gt;        libpthread.so.0 =&gt; /lib/i686/cmov/libpthread.so.0 &#40;0xb7d9b000&#41;
&gt;        libc.so.6 =&gt; /lib/i686/cmov/libc.so.6 &#40;0xb7c3a000&#41;
&gt;        libcrypt.so.1 =&gt; /lib/i686/cmov/libcrypt.so.1 &#40;0xb7c07000&#41;
&gt;        /lib/ld-linux.so.2 &#40;0xb7f38000&#41;
&gt; 11:24:25 atlantis [~] # grep perl /etc/nagios3/nagios.cfg
&gt; # This value determines where the p1.pl perl script &#40;used by the
&gt; enable_embedded_perl=1
&gt; use_embedded_perl_implicitly=1
&gt;
&gt; Do you have any other debugging output for me beside &#34;&#40;service check  
&gt; did not exit properly&#41;&#34;
&gt; ?
&gt; &lt;Picture 1.png&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;02&nbsp;12:23:39&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;m afraid, tings get harder now. I love non-reproducable bugs ;-&#41; You 
could help me by trying the following: 

1. Please use as check command simply &#39;check_jmx4perl --version&#39;. Just
to be sure that we are testing the right script. The output in the
Nagios Console should be &#39;0.21_1&#39;. Just to be on the save side.

2. Next, use the original check command and edit p1.pl, which is the
startup script for the perl plugins. Usually it is located at /usr/lib/nagios/p1.pl. 
Enable the commented out line #17 to enable full debug and restart nagios. You
might want to adapt the $DEBUG_PATH as well. After running some
checks, you should find various debug files in this directory. Could
you please post these ones ? &#40;or send it to roland@cpan.org directly&#41;

Thanks a lot !
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;02:18:34&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">As it seems to work now &#40;private communications&#41;, I&#39;m going to close this ticket now. jmx4perl 
seems to work properly with ePN. The issue is fixed in 0.21
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;03&nbsp;02:18:54&nbsp;2009</span>
    <span class="description">roland [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
