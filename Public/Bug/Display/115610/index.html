<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #89536 for Moose: Some packages don&#39;t compile standalone</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #89536 for Moose: Some packages don&#39;t compile standalone</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Moose">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Moose">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Moose">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Moose">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Moose">Moose CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">89536</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Moose">Moose</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dmcbride [...] cpan.org

<br />
happy.barney [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Unimportant    </td>
  </tr>
  <tr id="CF-38786-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38787-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=89536">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1275433" href="/Public/Bug/Display.html?id=89536#txn-1275433">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;16:02:36&nbsp;2013</span>
    <span class="description">dmcbride [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Some packages don&#39;t compile standalone</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1275433/675619/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/675619">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Some packages don&#39;t compile standalone. &#40;Why do I want to do this? To ensure that a package is fully installed.&#41;

$ perl -MMoose::Meta::TypeConstraint::Union -e 1
The &#39;add_attribute&#39; method cannot be called on an immutable instance at /usr/local/lib64/perl5/5.18.1/x86_64-linux-thread-multi/Class/MOP/Class/Immutable/Trait.pm line 32.
        Class::MOP::Class::Immutable::Trait::_immutable_cannot_call&#40;&#39;add_attribute&#39;&#41; called at /usr/local/lib64/perl5/5.18.1/x86_64-linux-thread-multi/Class/MOP/Class/Immutable/Trait.pm line 47
        Class::MOP::Class:::around&#40;&#39;CODE&#40;0x1f335d0&#41;&#39;, &#39;Class::MOP::Class::Immutable::Class::MOP::Class=HASH&#40;0x22234c0&#41;&#39;, &#39;type_constraints&#39;, &#39;accessor&#39;, &#39;type_constraints&#39;, &#39;default&#39;, &#39;CODE&#40;0x1d21b40&#41;&#39;, &#39;definition_context&#39;, &#39;HASH&#40;0x2784f90&#41;&#39;, ...&#41; called at /usr/local/lib64/perl5/5.18.1/x86_64-linux-thread-multi/Class/MOP/Method/Wrapped.pm line 162
        Class::MOP::Method::Wrapped::__ANON__&#40;&#39;Class::MOP::Class::Immutable::Class::MOP::Class=HASH&#40;0x22234c0&#41;&#39;, &#39;type_constraints&#39;, &#39;accessor&#39;, &#39;type_constraints&#39;, &#39;default&#39;, &#39;CODE&#40;0x1d21b40&#41;&#39;, &#39;definition_context&#39;, &#39;HASH&#40;0x2784f90&#41;&#39;&#41; called at /usr/local/lib64/perl5/5.18.1/x86_64-linux-thread-multi/Class/MOP/Method/Wrapped.pm line 91
        Class::MOP::Class::Immutable::Class::MOP::Class::add_attribute&#40;&#39;Class::MOP::Class::Immutable::Class::MOP::Class=HASH&#40;0x22234c0&#41;&#39;, &#39;type_constraints&#39;, &#39;accessor&#39;, &#39;type_constraints&#39;, &#39;default&#39;, &#39;CODE&#40;0x1d21b40&#41;&#39;, &#39;definition_context&#39;, &#39;HASH&#40;0x2784f90&#41;&#39;&#41; called at /usr/local/lib64/perl5/5.18.1/x86_64-linux-thread-multi/Moose/Meta/TypeConstraint/Union.pm line 24
        require Moose/Meta/TypeConstraint/Union.pm called at -e line 0
        main::BEGIN&#40;&#41; called at /usr/local/lib64/perl5/5.18.1/x86_64-linux-thread-multi/Moose/Meta/TypeConstraint/Union.pm line 0
        eval {...} called at /usr/local/lib64/perl5/5.18.1/x86_64-linux-thread-multi/Moose/Meta/TypeConstraint/Union.pm line 0
Compilation failed in require.
BEGIN failed--compilation aborted.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1275436" href="/Public/Bug/Display.html?id=89536#txn-1275436">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;16:16:44&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1275436/675622/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/675622">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 394b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-10-15 13:02:36, DMCBRIDE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Some packages don&#39;t compile standalone. &#40;Why do I want to do this? To
&gt; ensure that a package is fully installed.&#41;
&gt; 
&gt; $ perl -MMoose::Meta::TypeConstraint::Union -e 1
</div>
$ perl -mMoose::Util::TypeConstraints -e1
$ echo $?
0

Loading the module works fine -- just don&#39;t assume that also calling -&gt;import
with no arguments is going to work in isolation.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1275437" href="/Public/Bug/Display.html?id=89536#txn-1275437">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;16:16:44&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1275440" href="/Public/Bug/Display.html?id=89536#txn-1275440">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;16:16:44&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1275442" href="/Public/Bug/Display.html?id=89536#txn-1275442">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;16:18:00&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1275442/675626/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/675626">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 444b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2013-10-15 13:16:44, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2013-10-15 13:02:36, DMCBRIDE wrote:
<div class="message-stanza open">&gt; &gt; Some packages don&#39;t compile standalone. &#40;Why do I want to do this? To
&gt; &gt; ensure that a package is fully installed.&#41;
&gt; &gt;
&gt; &gt; $ perl -MMoose::Meta::TypeConstraint::Union -e 1
</div>&gt; 
&gt; $ perl -mMoose::Util::TypeConstraints -e1
&gt; $ echo $?
&gt; 0
</div>
Oops, sorry, I used the wrong module here.

But still, I think this counts as &#34;so don&#39;t move your arm like that&#34; situation.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1275452" href="/Public/Bug/Display.html?id=89536#txn-1275452">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;16:23:35&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1275452/675632/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/675632">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 309b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

&#34;Why do I want to do this? To ensure that a package is fully installed.&#34; --&gt; this is what the Moose distribution&#39;s test suite is for -- these tests passing is both necessary and sufficient to make this determination.

&#40;If there are some things you feel could be added to the test suite, patches welcome.&#41; :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1275473" href="/Public/Bug/Display.html?id=89536#txn-1275473">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;15&nbsp;18:22:41&nbsp;2013</span>
    <span class="description">dmcbride [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1275473/675647/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/675647">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 15 16:23:35 2013, ETHER wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Why do I want to do this? To ensure that a package is fully
&gt; installed.&#34; --&gt; this is what the Moose distribution&#39;s test suite is
&gt; for -- these tests passing is both necessary and sufficient to make
&gt; this determination.
&gt; 
&gt; &#40;If there are some things you feel could be added to the test suite,
&gt; patches welcome.&#41; :&#41;
</div>
Not quite.  I&#39;m writing code to actually perform the install of Moose &#40;among over 100 other modules&#41;.  Another module requires M::M::TC::Union.  So, to check if it&#39;s already installed, I try loading it.  It fails, so I&#39;m assuming ::Union isn&#39;t installed.  And thus I&#39;m failing.  There are other ways to determine whether a module is installed, sure, but this works for almost every other module out there already.  It&#39;s simple, quick, and painless.  It&#39;s also fairly thorough in that it loads everything to ensure it can even compile and isn&#39;t some incomplete vestige, or that its prereqs weren&#39;t met somehow &#40;you can probably imagine that the number of modules that incompletely specify their prereqs is a non-trivial number&#41;.

Having this fail due to incomplete prereqs is generally okay - it forces me to find those prereqs and install them.  The next time the build comes along, this fails, we move on, eventually hit the prereq, install that, then come back and re-try this one and it works.  But not for ::Union - it just won&#39;t load.  Whatever it requires to be loaded first, it doesn&#39;t ensure is actually loaded first.

&#40;I can&#39;t use &#34;cpan&#34; or its variants for legal reasons: I have to guarantee to my lawyer that what we&#39;re shipping is what she agreed we are legally allowed to ship.  Accidentally getting a newer version of some module is strictly prohibited and could, in theory, land us in legal trouble if the license changed from one version to the next, or if a prereq involved a license that is incompatible with what we&#39;re shipping.  And if, in the expected case, that doesn&#39;t happen, it&#39;ll get *me* in trouble with my lawyer, which could get me fired.&#41;

If I submit a patch for further tests, it would likely just be the above: C&lt;use_ok&#40;&#34;Moose::Meta::TypeConstraint::Union&#34;&#41;&gt; and the &#34;oh, that fails&#34; bit to go along with it ;&#41;

As for &#34;no import&#34;, my general test for loading looks like this:

system&#40;qq[$TMPPERL -e &#39;use $module &#40;&#41;; exit 0&#39;]&#41;;

So importing isn&#39;t an issue :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1276779" href="/Public/Bug/Display.html?id=89536#txn-1276779">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;19&nbsp;15:43:25&nbsp;2013</span>
    <span class="description">ether [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1641882" href="/Public/Bug/Display.html?id=89536#txn-1641882">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;26&nbsp;09:32:36&nbsp;2016</span>
    <span class="description">happy.barney [...] gmail.com - Ticket #115610:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Class::MOP::Class is not standalone package</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 26 Jun 2016 15:32:25 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Moose [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Branislav Zahradník &lt;happy.barney [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1641882/880332/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/880332">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 547b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I would like to use its create_anon_class &#40;in tests&#41;.

Snippet:

use Class::MOP::Class;

my $anon = Class::MOP::Class-&gt;create_anon_class &#40;
    superclasses =&gt; [ &#39;Foo&#39; ],
&#41;;

throws error:
Can&#39;t locate object method &#34;initialize&#34; via package
&#34;Class::MOP::Class&#34; at
/usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Mixin.pm line 12.

Same applies to Moose::Meta::Class.

Although problem can be fixed by &#34;use Class::MOP&#34; only &#40;Moose resp.&#41;,
there remains used/required packages not referenced in code, vice
versa referenced packages not used/required.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1642441" href="/Public/Bug/Display.html?id=89536#txn-1642441">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;27&nbsp;16:38:53&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org - Ticket #115610:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1642441/880703/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/880703">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jun 26 09:32:36 2016, happy.barney@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would like to use its create_anon_class &#40;in tests&#41;.
&gt; 
&gt; Snippet:
&gt; 
&gt; use Class::MOP::Class;
&gt; 
&gt; my $anon = Class::MOP::Class-&gt;create_anon_class &#40;
&gt;     superclasses =&gt; [ &#39;Foo&#39; ],
&gt; &#41;;
&gt; 
&gt; throws error:
&gt; Can&#39;t locate object method &#34;initialize&#34; via package
&gt; &#34;Class::MOP::Class&#34; at
&gt; /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Mixin.pm line 12.
&gt; 
&gt; Same applies to Moose::Meta::Class.
&gt; 
&gt; Although problem can be fixed by &#34;use Class::MOP&#34; only &#40;Moose resp.&#41;,
&gt; there remains used/required packages not referenced in code, vice
&gt; versa referenced packages not used/required.
</div>
I&#39;m pretty sure this bug has been reported before and we said it wasn&#39;t going to be fixed. It&#39;s simply not feasible given the wacky bootstrapping we need to do in order to implement Class::MOP modules so that they use Class::MOP to define their own attributes, methods, etc.

If you add a &#34;use Class::MOP&#34; to your code before &#34;use Class::MOP::Class&#34; it will work.

I&#39;ll leave this open so no one else reports it &#40;hopefully&#41;, but there&#39;s very little chance of this ever being fixed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1642442" href="/Public/Bug/Display.html?id=89536#txn-1642442">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;27&nbsp;16:38:55&nbsp;2016</span>
    <span class="description">The RT System itself - Ticket #115610:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1642500" href="/Public/Bug/Display.html?id=89536#txn-1642500">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;28&nbsp;01:05:48&nbsp;2016</span>
    <span class="description">happy.barney [...] gmail.com - Ticket #115610:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #115610] Class::MOP::Class is not standalone package</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jun 2016 07:05:38 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Moose [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Branislav Zahradník &lt;happy.barney [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1642500/880743/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/880743">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Dave,


On 27 June 2016 at 22:38, Dave Rolsky via RT &lt;bug-Moose@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=115610">https://rt.cpan.org/Ticket/Display.html?id=115610</a></span> &gt;
&gt;
&gt; On Sun Jun 26 09:32:36 2016, happy.barney@gmail.com wrote:
<div class="message-stanza open">&gt;&gt; I would like to use its create_anon_class &#40;in tests&#41;.
&gt;&gt;
&gt;&gt; Snippet:
&gt;&gt;
&gt;&gt; use Class::MOP::Class;
&gt;&gt;
&gt;&gt; my $anon = Class::MOP::Class-&gt;create_anon_class &#40;
&gt;&gt;     superclasses =&gt; [ &#39;Foo&#39; ],
&gt;&gt; &#41;;
&gt;&gt;
&gt;&gt; throws error:
&gt;&gt; Can&#39;t locate object method &#34;initialize&#34; via package
&gt;&gt; &#34;Class::MOP::Class&#34; at
&gt;&gt; /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Mixin.pm line 12.
&gt;&gt;
&gt;&gt; Same applies to Moose::Meta::Class.
&gt;&gt;
&gt;&gt; Although problem can be fixed by &#34;use Class::MOP&#34; only &#40;Moose resp.&#41;,
&gt;&gt; there remains used/required packages not referenced in code, vice
&gt;&gt; versa referenced packages not used/required.
</div>&gt;
&gt; I&#39;m pretty sure this bug has been reported before and we said it wasn&#39;t going to be fixed. It&#39;s simply not feasible given the wacky bootstrapping we need to do in order to implement Class::MOP modules so that they use Class::MOP to define their own attributes, methods, etc.
&gt;
&gt; If you add a &#34;use Class::MOP&#34; to your code before &#34;use Class::MOP::Class&#34; it will work.
&gt;
&gt; I&#39;ll leave this open so no one else reports it &#40;hopefully&#41;, but there&#39;s very little chance of this ever being fixed.
</div>
May I then ask to fix it in documentation at least?
Simple note &#34;full Class::MOP bootstrap is required to use
Class::MOP::Class&#34; will be enough.
Or INIT/UNITCHECK block dying with meaningful error unless mentioned
bootstrap is done.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1643025" href="/Public/Bug/Display.html?id=89536#txn-1643025">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;29&nbsp;00:29:53&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org - Ticket #115610:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1643025/881077/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/881077">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 28 01:05:48 2016, happy.barney@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Dave,
&gt; 
&gt; 
&gt; On 27 June 2016 at 22:38, Dave Rolsky via RT &lt;bug-Moose@rt.cpan.org&gt;
&gt; wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=115610">https://rt.cpan.org/Ticket/Display.html?id=115610</a></span> &gt;
&gt; &gt;
&gt; &gt; On Sun Jun 26 09:32:36 2016, happy.barney@gmail.com wrote:
<div class="message-stanza open">&gt; &gt;&gt; I would like to use its create_anon_class &#40;in tests&#41;.
&gt; &gt;&gt;
&gt; &gt;&gt; Snippet:
&gt; &gt;&gt;
&gt; &gt;&gt; use Class::MOP::Class;
&gt; &gt;&gt;
&gt; &gt;&gt; my $anon = Class::MOP::Class-&gt;create_anon_class &#40;
&gt; &gt;&gt;     superclasses =&gt; [ &#39;Foo&#39; ],
&gt; &gt;&gt; &#41;;
&gt; &gt;&gt;
&gt; &gt;&gt; throws error:
&gt; &gt;&gt; Can&#39;t locate object method &#34;initialize&#34; via package
&gt; &gt;&gt; &#34;Class::MOP::Class&#34; at
&gt; &gt;&gt; /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Mixin.pm line 12.
&gt; &gt;&gt;
&gt; &gt;&gt; Same applies to Moose::Meta::Class.
&gt; &gt;&gt;
&gt; &gt;&gt; Although problem can be fixed by &#34;use Class::MOP&#34; only &#40;Moose
&gt; &gt;&gt; resp.&#41;,
&gt; &gt;&gt; there remains used/required packages not referenced in code, vice
&gt; &gt;&gt; versa referenced packages not used/required.
</div>&gt; &gt;
&gt; &gt; I&#39;m pretty sure this bug has been reported before and we said it
&gt; &gt; wasn&#39;t going to be fixed. It&#39;s simply not feasible given the wacky
&gt; &gt; bootstrapping we need to do in order to implement Class::MOP modules
&gt; &gt; so that they use Class::MOP to define their own attributes, methods,
&gt; &gt; etc.
&gt; &gt;
&gt; &gt; If you add a &#34;use Class::MOP&#34; to your code before &#34;use
&gt; &gt; Class::MOP::Class&#34; it will work.
&gt; &gt;
&gt; &gt; I&#39;ll leave this open so no one else reports it &#40;hopefully&#41;, but
&gt; &gt; there&#39;s very little chance of this ever being fixed.
</div>&gt; 
&gt; May I then ask to fix it in documentation at least?
&gt; Simple note &#34;full Class::MOP bootstrap is required to use
&gt; Class::MOP::Class&#34; will be enough.
&gt; Or INIT/UNITCHECK block dying with meaningful error unless mentioned
&gt; bootstrap is done.
</div>
I agree that a doc update would be good. I&#39;d note that this problem applies to _every_ Class::MOP::* class &#40;which all require Class::MOP&#41;, and the same applies to using Moose before most Moose::Meta::* classes.

So I&#39;m not sure exactly where the docs would go. Do we put it in every class to which this applies? I guess we could.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1668097" href="/Public/Bug/Display.html?id=89536#txn-1668097">#</a>      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;11&nbsp;15:11:45&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org - Ticket #115610:  Merged into ticket #89536</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1668098" href="/Public/Bug/Display.html?id=89536#txn-1668098">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;11&nbsp;15:11:45&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org -  Merged into ticket #89536</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.575675</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
