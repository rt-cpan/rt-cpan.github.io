<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #97772 for Artifactory-Client: zero length file uploads</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #97772 for Artifactory-Client: zero length file uploads</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Artifactory-Client">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Artifactory-Client">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Artifactory-Client">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Artifactory-Client">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Artifactory-Client">Artifactory-Client CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">97772</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Artifactory-Client">Artifactory-Client</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-254220-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
v0.0.11    </td>
  </tr>
  <tr id="CF-254221-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




AgentP.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1395281/740889/AgentP.pm">
Wed Aug 06 00:41:53 2014 (292b) by MRHORNER [...] cpan.org
</a>
</font></li>
</ul>


http.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1403984/745328/http.pm">
Wed Aug 27 17:11:31 2014 (14.5k) by MRHORNER [...] cpan.org
</a>
</font></li>
</ul>


https.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1403984/745329/https.pm">
Wed Aug 27 17:11:31 2014 (3.9k) by MRHORNER [...] cpan.org
</a>
</font></li>
</ul>


test.zip<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1397493/741962/test.zip">
Tue Aug 12 01:46:34 2014 (942b) by SYAGI [...] cpan.org
</a>
</font></li>
</ul>


testArtifactory-Client.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1395281/740890/testArtifactory-Client.pl">
Wed Aug 06 00:41:53 2014 (1.3k) by MRHORNER [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=97772">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1395281" href="/Public/Bug/Display.html?id=97772#txn-1395281">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;00:41:53&nbsp;2014</span>
    <span class="description">MRHORNER [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> zero length file uploads</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1395281/740888/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/740888">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 8.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">first off, thank you &#38; I appreciate the module&#39;s existance.

if you don&#39;t already have an artifactory; it is quick to download the latest open source edition of artifactory.
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.jfrog.com/home/v_artifactory_opensource_download">http://www.jfrog.com/home/v_artifactory_opensource_download</a></span>  &#40;I used 3.3.0 simply running bin/artifactory.bat&#41;
run it; login as admin and create a &#39;dave-snapshot-local&#39; repo;
install Artifactory::Client; and these 2 scripts together should upload and download itself &#40;whatever you call main package&#41; to dave-snapshot-local @ test/foo
Or, you know update the urls and repo names to match your test.

main script and AgentP.pm for user authentication against the &#34;Artifactory Realm&#34; seems to work fine, the artifact is created but 0 length.
On one machine I tested it would give me a time out response from the server.  On this Strawberry v5.18.2 multi-x64 I get a created 201 response, quick but zero length file.

I know that ultimately this is a:
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/HTTP::Request::StreamingUpload">https://metacpan.org/pod/HTTP::Request::StreamingUpload</a></span>
issue, but HTTP::Request-StreamingUpload already has a ticket which describes something that didn&#39;t resolve the issue for me.
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=68609">https://rt.cpan.org/Ticket/Display.html?id=68609</a></span>

Maybe it is related to:
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/HTTP::Request">https://metacpan.org/pod/HTTP::Request</a></span>
or something else; idk.  I haven&#39;t gotten out the wireshark and begun spelunking...yet.

I figure; we should at least have a ticket on Artifactory-Client to help bring attention to this issue.

Thanks.
-mrhorner
<span class="clickylink"><a target="new" rel="nofollow" href="http://dave.thehorners.com/tech-talk/random-tech/522-great-lodge-of-the-royal-order-of-yaks-yak-shaving">http://dave.thehorners.com/tech-talk/random-tech/522-great-lodge-of-the-royal-order-of-yaks-yak-shaving</a></span>

====code===
package AgentP;
      use base &#39;LWP::UserAgent&#39;;
      sub _agent       { &#34;Mozilla/8.0&#34; }
      sub get_basic_credentials {
          my &#40;$self, $realm, $uri&#41; = @_;
          print&#40; STDERR &#34;  - providing auth to realm \&#34;$realm\&#34;\n&#34; &#41;;
          return &#39;admin&#39;, &#39;password&#39;;
      }

1

package main;

    use Artifactory::Client;
    use autodie;
    use Data::Printer;
    use AgentP;
    my $ua=AgentP-&gt;new&#40;&#41;;
    my $args = {
        artifactory =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#39;,
        port =&gt; 8081,
        repository =&gt; &#39;dave-snapshot-local/&#39;,
        ua =&gt;$ua 
    };
p $ua;
    my $client = Artifactory::Client-&gt;new&#40; $args &#41;;
p $client;
    my $path = &#39;test/foo&#39;; # path on artifactory

    # Properties are a hashref of key-arrayref pairs.  Note that value must be an arrayref even for a single element.
    # This is to conform with Artifactory which treats property values as a list.
    my $properties = {
        one =&gt; [&#39;two&#39;],
        baz =&gt; [&#39;three&#39;],
    };

    use File::Spec;
    my $file=File::Spec-&gt;rel2abs&#40; __FILE__ &#41;;
    #my $file = &#39;D:\\working\\perl\\testArtifactory-Client.pl&#39;;
p $file;
$filesize=-s $file;
p $filesize;
    # Name of methods are taken straight from Artifactory REST API documentation.  &#39;Deploy Artifact&#39; would map to
    # deploy_artifact method, like below.  The caller gets HTTP::Response object back.
    my $resp = $client-&gt;deploy_artifact&#40; path =&gt; $path, properties =&gt; $properties, file =&gt; $file &#41;;
p $resp;

    # Custom requests can also be made via usual get / post / put / delete requests.
    my $resp = $client-&gt;get&#40; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-local/test/foo&#39;">http://localhost:8081/artifactory/dave-snapshot-local/test/foo&#39;</a></span> &#41;;
    p $resp;
    
=============OUTPUT FROM MY TEST &#40;your byte count may vary&#41;======
D:\working\perl&gt;perl testArtifactory-Client.pl
AgentP  {
    Parents       LWP::UserAgent
    public methods &#40;1&#41; : get_basic_credentials
    private methods &#40;1&#41; : _agent
    internals: {
        def_headers             HTTP::Headers,
        handlers                {
            response_header   HTTP::Config
        },
        local_address           undef,
        max_redirect            7,
        max_size                undef,
        no_proxy                [],
        protocols_allowed       undef,
        protocols_forbidden     undef,
        proxy                   {},
        requests_redirectable   [
            [0] &#34;GET&#34;,
            [1] &#34;HEAD&#34;
        ],
        show_progress           undef,
        ssl_opts                {
            verify_hostname   1
        },
        timeout                 180,
        use_eval                1
    }
}
Artifactory::Client  {
    Parents       Moose::Object
    public methods &#40;101&#41; : all_builds, archive_entry_download, archive_entry_search, artifact_latest_version_search_based_on_layout, artifact_latest_version_search_based_on_properties, artifact_search, artifact_version_search, artifactory, artifacts_created_in_date_range, artifacts_not_downloaded_since, bad_checksum_search, build_artifacts_search, build_info, build_promotion, build_rename, build_runs, builds_diff, builds_for_dependency, calculate_maven_index, calculate_maven_metadata, calculate_nuget_repository_metadata, calculate_yum_repository_metadata, checksum_search, copy_item, create_directory, create_or_replace_group, create_or_replace_permission_target, create_or_replace_repository_configuration, create_or_replace_user, delete, delete_build, delete_group, delete_item, delete_item_properties, delete_permission_target, delete_repository, delete_repository_replication_configuration, delete_user, deploy_artifact, deploy_artifact_by_checksum, deploy_artifacts_from_archive, DESTROY, effective_item_permissions, execute_build_promotion, execute_plugin_code, export_system, export_system_settings_example, file_compliance_info, file_info, file_list, file_statistics, folder_info, full_system_import, gavc_search, general_configuration, get, get_group_details, get_groups, get_permission_target_details, get_permission_targets, get_repositories, get_repository_replication_configuration, get_user_details, get_users, import_repository_content, import_system_settings_example, item_last_modified, item_properties, license_search, meta, move_item, new, pattern_search, port, post, property_search, pull_push_replication, put, repository, repository_configuration, request, retrieve_all_available_plugin_info, retrieve_artifact, retrieve_build_artifacts_archive, retrieve_build_staging_strategy, retrieve_latest_artifact, retrieve_plugin_info_of_a_certain_type, save_general_configuration, scheduled_replication_status, security_configuration, set_item_properties, set_repository_replication_configuration, system_health_ping, system_info, trace_artifact_retrieval, ua, update_group, update_repository_configuration, update_repository_replication_configuration, update_user, version_and_addons_information
    private methods &#40;18&#41; : _attach_properties, _build_ua, _get_build, _handle_item, _handle_matrix_props, _handle_non_matrix_props, _handle_plugins, _handle_prop_multivalue, _handle_repositories, _handle_repository_replication_configuration, _handle_search, _handle_search_props, _handle_security, _handle_system, _handle_system_settings, _request, _stringify_hash, _unpack_attributes
    internals: {
        artifactory   &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#34;,
        port          8081,
        repository    &#34;dave-snapshot-local/&#34;,
        ua            AgentP
    }
}
&#34;D:\working\perl\testArtifactory-Client.pl&#34;
1380
  - providing auth to realm &#34;Artifactory Realm&#34;
HTTP::Response  {
    Parents       HTTP::Message
    public methods &#40;22&#41; : as_string, base, clone, code, current_age, dump, error_as_HTML, filename, fresh_until, freshness_lifetime, is_error, is_fresh, is_info, is_redirect, is_success, message, new, parse, previous, redirects, request, status_line
    private methods &#40;0&#41;
    internals: {
        _content    &#34;{
  &#34;repo&#34; : &#34;dave-snapshot-local&#34;,
  &#34;path&#34; : &#34;/test/foo&#34;,
  &#34;created&#34; : &#34;2014-08-05T23:51:30.551-04:00&#34;,
  &#34;createdBy&#34; : &#34;admin&#34;,
  &#34;downloadUri&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-local/test/foo">http://localhost:8081/artifactory/dave-snapshot-local/test/foo</a></span>&#34;,
  &#34;mimeType&#34; : &#34;application/octet-stream&#34;,
  &#34;size&#34; : &#34;0&#34;,
  &#34;checksums&#34; : {
    &#34;sha1&#34; : &#34;da39a3ee5e6b4b0d3255bfef95601890afd80709&#34;,
    &#34;md5&#34; : &#34;d41d8cd98f00b204e9800998ecf8427e&#34;
  },
  &#34;originalChecksums&#34; : {
  },
  &#34;uri&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-local/test/foo">http://localhost:8081/artifactory/dave-snapshot-local/test/foo</a></span>&#34;
}&#34;,
        _headers    HTTP::Headers,
        _msg        &#34;Created&#34;,
        _previous   HTTP::Response,
        _protocol   &#34;HTTP/1.1&#34;,
        _rc         201,
        _request    HTTP::Request
    }
}
HTTP::Response  {
    Parents       HTTP::Message
    public methods &#40;22&#41; : as_string, base, clone, code, current_age, dump, error_as_HTML, filename, fresh_until, freshness_lifetime, is_error, is_fresh, is_info, is_redirect, is_success, message, new, parse, previous, redirects, request, status_line
    private methods &#40;0&#41;
    internals: {
        _content    &#34;&#34;,
        _headers    HTTP::Headers,
        _msg        &#34;OK&#34;,
        _protocol   &#34;HTTP/1.1&#34;,
        _rc         200,
        _request    HTTP::Request
    }
}
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> AgentP.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1395281/740889/AgentP.pm">Download AgentP.pm</a><br />
<span class="downloadcontenttype">text/x-perl 292b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">      package AgentP;
      use base &#39;LWP::UserAgent&#39;;
      sub _agent       { &#34;Mozilla/8.0&#34; }
      sub get_basic_credentials {
            my &#40;$self, $realm, $uri&#41; = @_;
  print&#40; STDERR &#34;  - providing auth to realm \&#34;$realm\&#34;\n&#34; &#41;;
          return &#39;admin&#39;, &#39;password&#39;;
      }

1</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> testArtifactory-Client.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1395281/740890/testArtifactory-Client.pl">Download testArtifactory-Client.pl</a><br />
<span class="downloadcontenttype">text/x-perl 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">    use Artifactory::Client;
    use autodie;
    use Data::Printer;
    use AgentP;
    my $ua=AgentP-&gt;new&#40;&#41;;
    my $args = {
        artifactory =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#39;,
        port =&gt; 8081,
        repository =&gt; &#39;dave-snapshot-local/&#39;,
        ua =&gt;$ua 
    };
p $ua;
    my $client = Artifactory::Client-&gt;new&#40; $args &#41;;
p $client;
    my $path = &#39;test/foo&#39;; # path on artifactory

    # Properties are a hashref of key-arrayref pairs.  Note that value must be an arrayref even for a single element.
    # This is to conform with Artifactory which treats property values as a list.
    my $properties = {
        one =&gt; [&#39;two&#39;],
        baz =&gt; [&#39;three&#39;],
    };

    use File::Spec;
    my $file=File::Spec-&gt;rel2abs&#40; __FILE__ &#41;;
    #my $file = &#39;D:\\working\\perl\\testArtifactory-Client.pl&#39;;
p $file;
$filesize=-s $file;
p $filesize;
    # Name of methods are taken straight from Artifactory REST API documentation.  &#39;Deploy Artifact&#39; would map to
    # deploy_artifact method, like below.  The caller gets HTTP::Response object back.
    my $resp = $client-&gt;deploy_artifact&#40; path =&gt; $path, properties =&gt; $properties, file =&gt; $file &#41;;
p $resp;

    # Custom requests can also be made via usual get / post / put / delete requests.
    my $resp = $client-&gt;get&#40; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-local/test/foo&#39;">http://localhost:8081/artifactory/dave-snapshot-local/test/foo&#39;</a></span> &#41;;
    p $resp;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people DelWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1395286" href="/Public/Bug/Display.html?id=97772#txn-1395286">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;06&nbsp;00:53:29&nbsp;2014</span>
    <span class="description">MRHORNER [...] cpan.org -  Requestor MRHORNER deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1397460" href="/Public/Bug/Display.html?id=97772#txn-1397460">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;11&nbsp;23:19:59&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1397460/741938/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/741938">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">mrhorner,

Thanks for bringing this issue to my attention.  I have do have a free version of Artifactory on my local Linux box to test with, so I will see if I can reproduce the issue you&#39;re observing.

On Wed Aug 06 00:41:53 2014, MRHORNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; first off, thank you &#38; I appreciate the module&#39;s existance.
&gt; 
&gt; if you don&#39;t already have an artifactory; it is quick to download the
&gt; latest open source edition of artifactory.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.jfrog.com/home/v_artifactory_opensource_download">http://www.jfrog.com/home/v_artifactory_opensource_download</a></span>  &#40;I used
&gt; 3.3.0 simply running bin/artifactory.bat&#41;
&gt; run it; login as admin and create a &#39;dave-snapshot-local&#39; repo;
&gt; install Artifactory::Client; and these 2 scripts together should
&gt; upload and download itself &#40;whatever you call main package&#41; to dave-
&gt; snapshot-local @ test/foo
&gt; Or, you know update the urls and repo names to match your test.
&gt; 
&gt; main script and AgentP.pm for user authentication against the
&gt; &#34;Artifactory Realm&#34; seems to work fine, the artifact is created but 0
&gt; length.
&gt; On one machine I tested it would give me a time out response from the
&gt; server.  On this Strawberry v5.18.2 multi-x64 I get a created 201
&gt; response, quick but zero length file.
&gt; 
&gt; I know that ultimately this is a:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/HTTP::Request::StreamingUpload">https://metacpan.org/pod/HTTP::Request::StreamingUpload</a></span>
&gt; issue, but HTTP::Request-StreamingUpload already has a ticket which
&gt; describes something that didn&#39;t resolve the issue for me.
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=68609">https://rt.cpan.org/Ticket/Display.html?id=68609</a></span>
&gt; 
&gt; Maybe it is related to:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/HTTP::Request">https://metacpan.org/pod/HTTP::Request</a></span>
&gt; or something else; idk.  I haven&#39;t gotten out the wireshark and begun
&gt; spelunking...yet.
&gt; 
&gt; I figure; we should at least have a ticket on Artifactory-Client to
&gt; help bring attention to this issue.
&gt; 
&gt; Thanks.
&gt; -mrhorner
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dave.thehorners.com/tech-talk/random-tech/522-great-lodge-of-">http://dave.thehorners.com/tech-talk/random-tech/522-great-lodge-of-</a></span>
&gt; the-royal-order-of-yaks-yak-shaving
&gt; 
&gt; ====code===
&gt; package AgentP;
&gt;       use base &#39;LWP::UserAgent&#39;;
&gt;       sub _agent       { &#34;Mozilla/8.0&#34; }
&gt;       sub get_basic_credentials {
&gt;           my &#40;$self, $realm, $uri&#41; = @_;
&gt;           print&#40; STDERR &#34;  - providing auth to realm \&#34;$realm\&#34;\n&#34; &#41;;
&gt;           return &#39;admin&#39;, &#39;password&#39;;
&gt;       }
&gt; 
&gt; 1
&gt; 
&gt; package main;
&gt; 
&gt; use Artifactory::Client;
&gt; use autodie;
&gt; use Data::Printer;
&gt; use AgentP;
&gt; my $ua=AgentP-&gt;new&#40;&#41;;
&gt; my $args = {
&gt;     artifactory =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#39;,
&gt;     port =&gt; 8081,
&gt;     repository =&gt; &#39;dave-snapshot-local/&#39;,
&gt;      ua =&gt;$ua
&gt; };
&gt; p $ua;
&gt; my $client = Artifactory::Client-&gt;new&#40; $args &#41;;
&gt; p $client;
&gt; my $path = &#39;test/foo&#39;; # path on artifactory
&gt; 
&gt; # Properties are a hashref of key-arrayref pairs.  Note that value
&gt; must be an arrayref even for a single element.
&gt; # This is to conform with Artifactory which treats property values as
&gt; a list.
&gt; my $properties = {
&gt;     one =&gt; [&#39;two&#39;],
&gt;     baz =&gt; [&#39;three&#39;],
&gt; };
&gt; 
&gt; use File::Spec;
&gt; my $file=File::Spec-&gt;rel2abs&#40; __FILE__ &#41;;
&gt; #my $file = &#39;D:\\working\\perl\\testArtifactory-Client.pl&#39;;
&gt; p $file;
&gt; $filesize=-s $file;
&gt; p $filesize;
&gt; # Name of methods are taken straight from Artifactory REST API
&gt; documentation.  &#39;Deploy Artifact&#39; would map to
&gt; # deploy_artifact method, like below.  The caller gets HTTP::Response
&gt; object back.
&gt; my $resp = $client-&gt;deploy_artifact&#40; path =&gt; $path, properties =&gt;
&gt; $properties, file =&gt; $file &#41;;
&gt; p $resp;
&gt; 
&gt; # Custom requests can also be made via usual get / post / put / delete
&gt; requests.
&gt; my $resp = $client-&gt;get&#40; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-">http://localhost:8081/artifactory/dave-</a></span>
&gt; snapshot-local/test/foo&#39; &#41;;
&gt; p $resp;
&gt; 
&gt; =============OUTPUT FROM MY TEST &#40;your byte count may vary&#41;======
&gt; D:\working\perl&gt;perl testArtifactory-Client.pl
&gt; AgentP  {
&gt;     Parents       LWP::UserAgent
&gt;     public methods &#40;1&#41; : get_basic_credentials
&gt;     private methods &#40;1&#41; : _agent
&gt;     internals: {
&gt;         def_headers             HTTP::Headers,
&gt;         handlers                {
&gt;             response_header   HTTP::Config
&gt;         },
&gt;         local_address           undef,
&gt;         max_redirect            7,
&gt;         max_size                undef,
&gt;         no_proxy                [],
&gt;         protocols_allowed       undef,
&gt;         protocols_forbidden     undef,
&gt;         proxy                   {},
&gt;         requests_redirectable   [
&gt;             [0] &#34;GET&#34;,
&gt;             [1] &#34;HEAD&#34;
&gt;         ],
&gt;         show_progress           undef,
&gt;         ssl_opts                {
&gt;             verify_hostname   1
&gt;         },
&gt;         timeout                 180,
&gt;         use_eval                1
&gt;     }
&gt; }
&gt; Artifactory::Client  {
&gt;     Parents       Moose::Object
&gt;     public methods &#40;101&#41; : all_builds, archive_entry_download,
&gt; archive_entry_search, artifact_latest_version_search_based_on_layout,
&gt; artifact_latest_version_search_based_on_properties, artifact_search,
&gt; artifact_version_search, artifactory, artifacts_created_in_date_range,
&gt; artifacts_not_downloaded_since, bad_checksum_search,
&gt; build_artifacts_search, build_info, build_promotion, build_rename,
&gt; build_runs, builds_diff, builds_for_dependency, calculate_maven_index,
&gt; calculate_maven_metadata, calculate_nuget_repository_metadata,
&gt; calculate_yum_repository_metadata, checksum_search, copy_item,
&gt; create_directory, create_or_replace_group,
&gt; create_or_replace_permission_target,
&gt; create_or_replace_repository_configuration, create_or_replace_user,
&gt; delete, delete_build, delete_group, delete_item,
&gt; delete_item_properties, delete_permission_target, delete_repository,
&gt; delete_repository_replication_configuration, delete_user,
&gt; deploy_artifact, deploy_artifact_by_checksum,
&gt; deploy_artifacts_from_archive, DESTROY, effective_item_permissions,
&gt; execute_build_promotion, execute_plugin_code, export_system,
&gt; export_system_settings_example, file_compliance_info, file_info,
&gt; file_list, file_statistics, folder_info, full_system_import,
&gt; gavc_search, general_configuration, get, get_group_details,
&gt; get_groups, get_permission_target_details, get_permission_targets,
&gt; get_repositories, get_repository_replication_configuration,
&gt; get_user_details, get_users, import_repository_content,
&gt; import_system_settings_example, item_last_modified, item_properties,
&gt; license_search, meta, move_item, new, pattern_search, port, post,
&gt; property_search, pull_push_replication, put, repository,
&gt; repository_configuration, request, retrieve_all_available_plugin_info,
&gt; retrieve_artifact, retrieve_build_artifacts_archive,
&gt; retrieve_build_staging_strategy, retrieve_latest_artifact,
&gt; retrieve_plugin_info_of_a_certain_type, save_general_configuration,
&gt; scheduled_replication_status, security_configuration,
&gt; set_item_properties, set_repository_replication_configuration,
&gt; system_health_ping, system_info, trace_artifact_retrieval, ua,
&gt; update_group, update_repository_configuration,
&gt; update_repository_replication_configuration, update_user,
&gt; version_and_addons_information
&gt;     private methods &#40;18&#41; : _attach_properties, _build_ua, _get_build,
&gt; _handle_item, _handle_matrix_props, _handle_non_matrix_props,
&gt; _handle_plugins, _handle_prop_multivalue, _handle_repositories,
&gt; _handle_repository_replication_configuration, _handle_search,
&gt; _handle_search_props, _handle_security, _handle_system,
&gt; _handle_system_settings, _request, _stringify_hash, _unpack_attributes
&gt;     internals: {
&gt;         artifactory   &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#34;,
&gt;         port          8081,
&gt;         repository    &#34;dave-snapshot-local/&#34;,
&gt;         ua            AgentP
&gt;     }
&gt; }
&gt; &#34;D:\working\perl\testArtifactory-Client.pl&#34;
&gt; 1380
&gt;   - providing auth to realm &#34;Artifactory Realm&#34;
&gt; HTTP::Response  {
&gt;     Parents       HTTP::Message
&gt;     public methods &#40;22&#41; : as_string, base, clone, code, current_age,
&gt; dump, error_as_HTML, filename, fresh_until, freshness_lifetime,
&gt; is_error, is_fresh, is_info, is_redirect, is_success, message, new,
&gt; parse, previous, redirects, request, status_line
&gt;     private methods &#40;0&#41;
&gt;     internals: {
&gt;         _content    &#34;{
&gt;   &#34;repo&#34; : &#34;dave-snapshot-local&#34;,
&gt;   &#34;path&#34; : &#34;/test/foo&#34;,
&gt;   &#34;created&#34; : &#34;2014-08-05T23:51:30.551-04:00&#34;,
&gt;   &#34;createdBy&#34; : &#34;admin&#34;,
&gt;   &#34;downloadUri&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-">http://localhost:8081/artifactory/dave-snapshot-</a></span>
&gt; local/test/foo&#34;,
&gt;   &#34;mimeType&#34; : &#34;application/octet-stream&#34;,
&gt;   &#34;size&#34; : &#34;0&#34;,
&gt;   &#34;checksums&#34; : {
&gt;     &#34;sha1&#34; : &#34;da39a3ee5e6b4b0d3255bfef95601890afd80709&#34;,
&gt;     &#34;md5&#34; : &#34;d41d8cd98f00b204e9800998ecf8427e&#34;
&gt;   },
&gt;   &#34;originalChecksums&#34; : {
&gt;   },
&gt;   &#34;uri&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-">http://localhost:8081/artifactory/dave-snapshot-</a></span>
&gt; local/test/foo&#34;
&gt; }&#34;,
&gt;         _headers    HTTP::Headers,
&gt;         _msg        &#34;Created&#34;,
&gt;         _previous   HTTP::Response,
&gt;         _protocol   &#34;HTTP/1.1&#34;,
&gt;         _rc         201,
&gt;         _request    HTTP::Request
&gt;     }
&gt; }
&gt; HTTP::Response  {
&gt;     Parents       HTTP::Message
&gt;     public methods &#40;22&#41; : as_string, base, clone, code, current_age,
&gt; dump, error_as_HTML, filename, fresh_until, freshness_lifetime,
&gt; is_error, is_fresh, is_info, is_redirect, is_success, message, new,
&gt; parse, previous, redirects, request, status_line
&gt;     private methods &#40;0&#41;
&gt;     internals: {
&gt;         _content    &#34;&#34;,
&gt;         _headers    HTTP::Headers,
&gt;         _msg        &#34;OK&#34;,
&gt;         _protocol   &#34;HTTP/1.1&#34;,
&gt;         _rc         200,
&gt;         _request    HTTP::Request
&gt;     }
&gt; }
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1397461" href="/Public/Bug/Display.html?id=97772#txn-1397461">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;11&nbsp;23:19:59&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1397493" href="/Public/Bug/Display.html?id=97772#txn-1397493">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;12&nbsp;01:46:34&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1397493/741961/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/741961">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 10.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I downloaded your scripts, made some changes then ran them; it seems to work just fine.

  &#34;repo&#34; : &#34;dave-snapshot-local&#34;,
  &#34;path&#34; : &#34;/test/foo&#34;,
  &#34;created&#34; : &#34;2014-08-11T22:32:34.355-07:00&#34;,
  &#34;createdBy&#34; : &#34;anonymous&#34;,
  &#34;downloadUri&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-local/test/foo">http://localhost:8081/artifactory/dave-snapshot-local/test/foo</a></span>&#34;,
  &#34;mimeType&#34; : &#34;application/octet-stream&#34;,
  &#34;size&#34; : &#34;874&#34;,

I&#39;m attaching the exact files I&#39;ve used for my testing.  Could you give them a spin and see how well they fare on your environment?

My environment runs Fedora 20 and I have local Artifactory running with very basic set up.  We have to figure out something if this issue requires HTTP basic authentication set up in order to reproduce the issue.

On Mon Aug 11 23:19:59 2014, SYAGI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; mrhorner,
&gt; 
&gt; Thanks for bringing this issue to my attention.  I have do have a free
&gt; version of Artifactory on my local Linux box to test with, so I will
&gt; see if I can reproduce the issue you&#39;re observing.
&gt; 
&gt; On Wed Aug 06 00:41:53 2014, MRHORNER wrote:
<div class="message-stanza open">&gt; &gt; first off, thank you &#38; I appreciate the module&#39;s existance.
&gt; &gt;
&gt; &gt; if you don&#39;t already have an artifactory; it is quick to download the
&gt; &gt; latest open source edition of artifactory.
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.jfrog.com/home/v_artifactory_opensource_download">http://www.jfrog.com/home/v_artifactory_opensource_download</a></span>  &#40;I used
&gt; &gt; 3.3.0 simply running bin/artifactory.bat&#41;
&gt; &gt; run it; login as admin and create a &#39;dave-snapshot-local&#39; repo;
&gt; &gt; install Artifactory::Client; and these 2 scripts together should
&gt; &gt; upload and download itself &#40;whatever you call main package&#41; to dave-
&gt; &gt; snapshot-local @ test/foo
&gt; &gt; Or, you know update the urls and repo names to match your test.
&gt; &gt;
&gt; &gt; main script and AgentP.pm for user authentication against the
&gt; &gt; &#34;Artifactory Realm&#34; seems to work fine, the artifact is created but 0
&gt; &gt; length.
&gt; &gt; On one machine I tested it would give me a time out response from the
&gt; &gt; server.  On this Strawberry v5.18.2 multi-x64 I get a created 201
&gt; &gt; response, quick but zero length file.
&gt; &gt;
&gt; &gt; I know that ultimately this is a:
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/HTTP::Request::StreamingUpload">https://metacpan.org/pod/HTTP::Request::StreamingUpload</a></span>
&gt; &gt; issue, but HTTP::Request-StreamingUpload already has a ticket which
&gt; &gt; describes something that didn&#39;t resolve the issue for me.
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=68609">https://rt.cpan.org/Ticket/Display.html?id=68609</a></span>
&gt; &gt;
&gt; &gt; Maybe it is related to:
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/HTTP::Request">https://metacpan.org/pod/HTTP::Request</a></span>
&gt; &gt; or something else; idk.  I haven&#39;t gotten out the wireshark and begun
&gt; &gt; spelunking...yet.
&gt; &gt;
&gt; &gt; I figure; we should at least have a ticket on Artifactory-Client to
&gt; &gt; help bring attention to this issue.
&gt; &gt;
&gt; &gt; Thanks.
&gt; &gt; -mrhorner
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dave.thehorners.com/tech-talk/random-tech/522-great-lodge-of-">http://dave.thehorners.com/tech-talk/random-tech/522-great-lodge-of-</a></span>
&gt; &gt; the-royal-order-of-yaks-yak-shaving
&gt; &gt;
&gt; &gt; ====code===
&gt; &gt; package AgentP;
&gt; &gt;       use base &#39;LWP::UserAgent&#39;;
&gt; &gt;       sub _agent       { &#34;Mozilla/8.0&#34; }
&gt; &gt;       sub get_basic_credentials {
&gt; &gt;           my &#40;$self, $realm, $uri&#41; = @_;
&gt; &gt;           print&#40; STDERR &#34;  - providing auth to realm \&#34;$realm\&#34;\n&#34; &#41;;
&gt; &gt;           return &#39;admin&#39;, &#39;password&#39;;
&gt; &gt;       }
&gt; &gt;
&gt; &gt; 1
&gt; &gt;
&gt; &gt; package main;
&gt; &gt;
&gt; &gt; use Artifactory::Client;
&gt; &gt; use autodie;
&gt; &gt; use Data::Printer;
&gt; &gt; use AgentP;
&gt; &gt; my $ua=AgentP-&gt;new&#40;&#41;;
&gt; &gt; my $args = {
&gt; &gt;     artifactory =&gt; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#39;,
&gt; &gt;     port =&gt; 8081,
&gt; &gt;     repository =&gt; &#39;dave-snapshot-local/&#39;,
&gt; &gt;      ua =&gt;$ua
&gt; &gt; };
&gt; &gt; p $ua;
&gt; &gt; my $client = Artifactory::Client-&gt;new&#40; $args &#41;;
&gt; &gt; p $client;
&gt; &gt; my $path = &#39;test/foo&#39;; # path on artifactory
&gt; &gt;
&gt; &gt; # Properties are a hashref of key-arrayref pairs.  Note that value
&gt; &gt; must be an arrayref even for a single element.
&gt; &gt; # This is to conform with Artifactory which treats property values as
&gt; &gt; a list.
&gt; &gt; my $properties = {
&gt; &gt;     one =&gt; [&#39;two&#39;],
&gt; &gt;     baz =&gt; [&#39;three&#39;],
&gt; &gt; };
&gt; &gt;
&gt; &gt; use File::Spec;
&gt; &gt; my $file=File::Spec-&gt;rel2abs&#40; __FILE__ &#41;;
&gt; &gt; #my $file = &#39;D:\\working\\perl\\testArtifactory-Client.pl&#39;;
&gt; &gt; p $file;
&gt; &gt; $filesize=-s $file;
&gt; &gt; p $filesize;
&gt; &gt; # Name of methods are taken straight from Artifactory REST API
&gt; &gt; documentation.  &#39;Deploy Artifact&#39; would map to
&gt; &gt; # deploy_artifact method, like below.  The caller gets HTTP::Response
&gt; &gt; object back.
&gt; &gt; my $resp = $client-&gt;deploy_artifact&#40; path =&gt; $path, properties =&gt;
&gt; &gt; $properties, file =&gt; $file &#41;;
&gt; &gt; p $resp;
&gt; &gt;
&gt; &gt; # Custom requests can also be made via usual get / post / put /
&gt; &gt; delete
&gt; &gt; requests.
&gt; &gt; my $resp = $client-&gt;get&#40; &#39;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-">http://localhost:8081/artifactory/dave-</a></span>
&gt; &gt; snapshot-local/test/foo&#39; &#41;;
&gt; &gt; p $resp;
&gt; &gt;
&gt; &gt; =============OUTPUT FROM MY TEST &#40;your byte count may vary&#41;======
&gt; &gt; D:\working\perl&gt;perl testArtifactory-Client.pl
&gt; &gt; AgentP  {
&gt; &gt;     Parents       LWP::UserAgent
&gt; &gt;     public methods &#40;1&#41; : get_basic_credentials
&gt; &gt;     private methods &#40;1&#41; : _agent
&gt; &gt;     internals: {
&gt; &gt;         def_headers             HTTP::Headers,
&gt; &gt;         handlers                {
&gt; &gt;             response_header   HTTP::Config
&gt; &gt;         },
&gt; &gt;         local_address           undef,
&gt; &gt;         max_redirect            7,
&gt; &gt;         max_size                undef,
&gt; &gt;         no_proxy                [],
&gt; &gt;         protocols_allowed       undef,
&gt; &gt;         protocols_forbidden     undef,
&gt; &gt;         proxy                   {},
&gt; &gt;         requests_redirectable   [
&gt; &gt;             [0] &#34;GET&#34;,
&gt; &gt;             [1] &#34;HEAD&#34;
&gt; &gt;         ],
&gt; &gt;         show_progress           undef,
&gt; &gt;         ssl_opts                {
&gt; &gt;             verify_hostname   1
&gt; &gt;         },
&gt; &gt;         timeout                 180,
&gt; &gt;         use_eval                1
&gt; &gt;     }
&gt; &gt; }
&gt; &gt; Artifactory::Client  {
&gt; &gt;     Parents       Moose::Object
&gt; &gt;     public methods &#40;101&#41; : all_builds, archive_entry_download,
&gt; &gt; archive_entry_search, artifact_latest_version_search_based_on_layout,
&gt; &gt; artifact_latest_version_search_based_on_properties, artifact_search,
&gt; &gt; artifact_version_search, artifactory,
&gt; &gt; artifacts_created_in_date_range,
&gt; &gt; artifacts_not_downloaded_since, bad_checksum_search,
&gt; &gt; build_artifacts_search, build_info, build_promotion, build_rename,
&gt; &gt; build_runs, builds_diff, builds_for_dependency,
&gt; &gt; calculate_maven_index,
&gt; &gt; calculate_maven_metadata, calculate_nuget_repository_metadata,
&gt; &gt; calculate_yum_repository_metadata, checksum_search, copy_item,
&gt; &gt; create_directory, create_or_replace_group,
&gt; &gt; create_or_replace_permission_target,
&gt; &gt; create_or_replace_repository_configuration, create_or_replace_user,
&gt; &gt; delete, delete_build, delete_group, delete_item,
&gt; &gt; delete_item_properties, delete_permission_target, delete_repository,
&gt; &gt; delete_repository_replication_configuration, delete_user,
&gt; &gt; deploy_artifact, deploy_artifact_by_checksum,
&gt; &gt; deploy_artifacts_from_archive, DESTROY, effective_item_permissions,
&gt; &gt; execute_build_promotion, execute_plugin_code, export_system,
&gt; &gt; export_system_settings_example, file_compliance_info, file_info,
&gt; &gt; file_list, file_statistics, folder_info, full_system_import,
&gt; &gt; gavc_search, general_configuration, get, get_group_details,
&gt; &gt; get_groups, get_permission_target_details, get_permission_targets,
&gt; &gt; get_repositories, get_repository_replication_configuration,
&gt; &gt; get_user_details, get_users, import_repository_content,
&gt; &gt; import_system_settings_example, item_last_modified, item_properties,
&gt; &gt; license_search, meta, move_item, new, pattern_search, port, post,
&gt; &gt; property_search, pull_push_replication, put, repository,
&gt; &gt; repository_configuration, request,
&gt; &gt; retrieve_all_available_plugin_info,
&gt; &gt; retrieve_artifact, retrieve_build_artifacts_archive,
&gt; &gt; retrieve_build_staging_strategy, retrieve_latest_artifact,
&gt; &gt; retrieve_plugin_info_of_a_certain_type, save_general_configuration,
&gt; &gt; scheduled_replication_status, security_configuration,
&gt; &gt; set_item_properties, set_repository_replication_configuration,
&gt; &gt; system_health_ping, system_info, trace_artifact_retrieval, ua,
&gt; &gt; update_group, update_repository_configuration,
&gt; &gt; update_repository_replication_configuration, update_user,
&gt; &gt; version_and_addons_information
&gt; &gt;     private methods &#40;18&#41; : _attach_properties, _build_ua, _get_build,
&gt; &gt; _handle_item, _handle_matrix_props, _handle_non_matrix_props,
&gt; &gt; _handle_plugins, _handle_prop_multivalue, _handle_repositories,
&gt; &gt; _handle_repository_replication_configuration, _handle_search,
&gt; &gt; _handle_search_props, _handle_security, _handle_system,
&gt; &gt; _handle_system_settings, _request, _stringify_hash,
&gt; &gt; _unpack_attributes
&gt; &gt;     internals: {
&gt; &gt;         artifactory   &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost">http://localhost</a></span>&#34;,
&gt; &gt;         port          8081,
&gt; &gt;         repository    &#34;dave-snapshot-local/&#34;,
&gt; &gt;         ua            AgentP
&gt; &gt;     }
&gt; &gt; }
&gt; &gt; &#34;D:\working\perl\testArtifactory-Client.pl&#34;
&gt; &gt; 1380
&gt; &gt;   - providing auth to realm &#34;Artifactory Realm&#34;
&gt; &gt; HTTP::Response  {
&gt; &gt;     Parents       HTTP::Message
&gt; &gt;     public methods &#40;22&#41; : as_string, base, clone, code, current_age,
&gt; &gt; dump, error_as_HTML, filename, fresh_until, freshness_lifetime,
&gt; &gt; is_error, is_fresh, is_info, is_redirect, is_success, message, new,
&gt; &gt; parse, previous, redirects, request, status_line
&gt; &gt;     private methods &#40;0&#41;
&gt; &gt;     internals: {
&gt; &gt;         _content    &#34;{
&gt; &gt;   &#34;repo&#34; : &#34;dave-snapshot-local&#34;,
&gt; &gt;   &#34;path&#34; : &#34;/test/foo&#34;,
&gt; &gt;   &#34;created&#34; : &#34;2014-08-05T23:51:30.551-04:00&#34;,
&gt; &gt;   &#34;createdBy&#34; : &#34;admin&#34;,
&gt; &gt;   &#34;downloadUri&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-">http://localhost:8081/artifactory/dave-snapshot-</a></span>
&gt; &gt; local/test/foo&#34;,
&gt; &gt;   &#34;mimeType&#34; : &#34;application/octet-stream&#34;,
&gt; &gt;   &#34;size&#34; : &#34;0&#34;,
&gt; &gt;   &#34;checksums&#34; : {
&gt; &gt;     &#34;sha1&#34; : &#34;da39a3ee5e6b4b0d3255bfef95601890afd80709&#34;,
&gt; &gt;     &#34;md5&#34; : &#34;d41d8cd98f00b204e9800998ecf8427e&#34;
&gt; &gt;   },
&gt; &gt;   &#34;originalChecksums&#34; : {
&gt; &gt;   },
&gt; &gt;   &#34;uri&#34; : &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost:8081/artifactory/dave-snapshot-">http://localhost:8081/artifactory/dave-snapshot-</a></span>
&gt; &gt; local/test/foo&#34;
&gt; &gt; }&#34;,
&gt; &gt;         _headers    HTTP::Headers,
&gt; &gt;         _msg        &#34;Created&#34;,
&gt; &gt;         _previous   HTTP::Response,
&gt; &gt;         _protocol   &#34;HTTP/1.1&#34;,
&gt; &gt;         _rc         201,
&gt; &gt;         _request    HTTP::Request
&gt; &gt;     }
&gt; &gt; }
&gt; &gt; HTTP::Response  {
&gt; &gt;     Parents       HTTP::Message
&gt; &gt;     public methods &#40;22&#41; : as_string, base, clone, code, current_age,
&gt; &gt; dump, error_as_HTML, filename, fresh_until, freshness_lifetime,
&gt; &gt; is_error, is_fresh, is_info, is_redirect, is_success, message, new,
&gt; &gt; parse, previous, redirects, request, status_line
&gt; &gt;     private methods &#40;0&#41;
&gt; &gt;     internals: {
&gt; &gt;         _content    &#34;&#34;,
&gt; &gt;         _headers    HTTP::Headers,
&gt; &gt;         _msg        &#34;OK&#34;,
&gt; &gt;         _protocol   &#34;HTTP/1.1&#34;,
&gt; &gt;         _rc         200,
&gt; &gt;         _request    HTTP::Request
&gt; &gt;     }
&gt; &gt; }
</div></div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test.zip</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1397493/741962/test.zip">Download test.zip</a><br />
<span class="downloadcontenttype">application/zip 942b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1399443" href="/Public/Bug/Display.html?id=97772#txn-1399443">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;15&nbsp;23:14:52&nbsp;2014</span>
    <span class="description">MRHORNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1399443/743065/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/743065">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 12.8k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1399513" href="/Public/Bug/Display.html?id=97772#txn-1399513">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;16&nbsp;02:19:47&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1399513/743078/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/743078">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have a webserver at workplace, with HTTP Basic auth and here is my code to get passed the credential business:

my $h = HTTP::Headers-&gt;new&#40;&#41;;
$h-&gt;authorization_basic&#40; &#39;user&#39;, &#39;pass&#39; &#41;;

my $ua   = LWP::UserAgent-&gt;new&#40; default_headers =&gt; $h &#41;;
my $resp = $ua-&gt;get&#40;$url&#41;;

See if that helps.  My use case is read-only, but I don&#39;t have to do Base64 conversion and all that complex stuff.

Does Artifactory Server support Basic HTTP Auth, or do you have a proxy node providing the authentication service between the client and Artifactory?

On Fri Aug 15 23:14:52 2014, MRHORNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The code provided shows a 401 Unauthorized and 0 length file again.  I
&gt; saw that you dropped the &#40;&#41; from the return of the
&gt; get_basic_credentials...  I also tried supplying the header=&gt;
&gt; HTTP::Headers-&gt;new&#40;
&gt;     &#39;Content-Type&#39;=&gt;&#39;application/binary&#39;,
&gt;     &#39;Content-Length&#39;=&gt; -s $file,
&gt;     &#39;Accept&#39;=&gt;&#39;s&#39;,
&gt;     &#39;Authorization&#39;=&gt; &#39;Basic &#39;.encode_base64&#40;$usr.&#39;:&#39;.$pwd&#41;&#41;,
&gt;   which did work locally but on a remote host it failed...
&gt; 
&gt; I&#39;ve had trouble with LWP::Simple in the past and had to use WWW:Mech
&gt; or even Mojo::UserAgent to make things work on windows, and I&#39;ve tried
&gt; some of that... but really think curl is the easiest and least error
&gt; prone way...
&gt; 
&gt; curl -v --user $usr:$pwd --data-binary @&#34;$file&#34; -X PUT &#34;$url&#34;
&gt; 
&gt; 
&gt; use MIME::Base64;
&gt; my $usr=&#39;admin&#39;;
&gt; my $pwd=&#39;password&#39;;
&gt; $ua-&gt;credentials&#40;$usr,$pwd&#41;;
&gt; 
&gt; my $resp = $client-&gt;deploy_artifact&#40; path =&gt; $path, properties =&gt;
&gt; $properties, file =&gt; $file,header=&gt; HTTP::Headers-&gt;new&#40;
&gt;     &#39;Content-Type&#39;=&gt;&#39;application/binary&#39;,
&gt;     &#39;Content-Length&#39;=&gt; -s $file,
&gt;     &#39;Accept&#39;=&gt;&#39;s&#39;,
&gt;     &#39;Authorization&#39;=&gt; &#39;Basic &#39;.encode_base64&#40;$usr.&#39;:&#39;.$pwd&#41;&#41;, &#41;;
&gt; print Dumper&#40;$resp&#41;;
&gt; 
&gt; Like I said, I found that this worked locally, but I also had trouble
&gt; with it, got frustrated and used curl... I would like to understand
&gt; why I had to both encode the base64 in the header and do a ua-
<div class="message-stanza open">&gt; &gt;credentials to make it work.  With the above code, you can remove the
</div>&gt; AgentP and corresponding get_basic_credentials and it still works.
&gt; 
&gt; I am quite surprised that your tests work and that mine do not.  Basic
&gt; authentication requires a bit more than an empty header, which is what
&gt; I saw coming out of the box with no header arg supplied to
&gt; deploy_artifact.  &#40;basic out of the box is basic auth with admin-
&gt; password as creds&#41;
&gt; 
&gt; makes me want to develop a suite of tests that should work against an
&gt; artifactory local...using curl gets the job done for pushing a file is
&gt; fine, but no UA interface so it won&#39;t work with Artifactory::Client.
&gt; 
&gt; 
&gt; Thanks for the response!
&gt; --dave
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1400794" href="/Public/Bug/Display.html?id=97772#txn-1400794">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;18&nbsp;14:51:19&nbsp;2014</span>
    <span class="description">MRHORNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1400794/743647/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/743647">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; my $h = HTTP::Headers-&gt;new&#40;&#41;;
&gt; $h-&gt;authorization_basic&#40; &#39;user&#39;, &#39;pass&#39; &#41;;
&gt; my $ua   = LWP::UserAgent-&gt;new&#40; default_headers =&gt; $h &#41;;
&gt; my $resp = $ua-&gt;get&#40;$url&#41;;
</div>Thanks, another way to provide the basic auth headers using LWP! :&#41;

This sadly does not seem to work.  I&#39;m not sure where the difference is, but remotely this code does not work.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; proxy node providing the authentication service between the client and
&gt; Artifactory?
</div>nope, on the same network as the artifactory instance.

I&#39;ve tried quite a few things like:
push @{ $ua-&gt;requests_redirectable }, &#39;POST&#39;;
push @{ $ua-&gt;requests_redirectable }, &#39;PUT&#39;;
$ua-&gt;max_redirect&#40;1000&#41;;
$ua-&gt;show_progress&#40;true&#41;;

haven&#39;t been able to make LWP::UserAgent work.  when using curl I see that I am in fact connecting to port 8081 and the ip resolves to the host I would expect.  I see Expect: 100-Continue [data not shown] and HTTP/1.1 201 Created response using curl &#40;working!&#41;.  With LWP::UserAgent, I see the PUT url and timeout with a 404 not found.

[PATCH] dealing with mutiple HTTP 100 Continue responses
<span class="clickylink"><a target="new" rel="nofollow" href="http://code.activestate.com/lists/perl-libwww/5866/">http://code.activestate.com/lists/perl-libwww/5866/</a></span>

Re: LWP::UserAgent and TCP_NODELAY - didn&#39;t know how to make MyHTTP be used by LWP::UserAgent...
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.libwww/2005/12/msg6480.html">http://www.nntp.perl.org/group/perl.libwww/2005/12/msg6480.html</a></span>

I can provide wireshark output but I&#39;m not sure that will provide anymore light.
HTTP clients are still something that require a lot of attention...
I don&#39;t know how to resolve it, aside from using a client that does handle the Continue responses.

I&#39;m not sure what is causing the difference between local and remote repo, and would be very happy if another person would duplicate such strange behavior.

Thanks for trying to help everyone,
--dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1401021" href="/Public/Bug/Display.html?id=97772#txn-1401021">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;18&nbsp;23:36:22&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1401021/743771/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/743771">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m shooting from the hip here, but I&#39;d suggest setting the Expect: 100-continue in HTTP request headers.

On Mon Aug 18 14:51:19 2014, MRHORNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; my $h = HTTP::Headers-&gt;new&#40;&#41;;
&gt; &gt; $h-&gt;authorization_basic&#40; &#39;user&#39;, &#39;pass&#39; &#41;;
&gt; &gt; my $ua   = LWP::UserAgent-&gt;new&#40; default_headers =&gt; $h &#41;;
&gt; &gt; my $resp = $ua-&gt;get&#40;$url&#41;;
</div>&gt; Thanks, another way to provide the basic auth headers using LWP! :&#41;
&gt; 
&gt; This sadly does not seem to work.  I&#39;m not sure where the difference
&gt; is, but remotely this code does not work.
&gt; 
<div class="message-stanza open">&gt; &gt; proxy node providing the authentication service between the client
&gt; &gt; and
&gt; &gt; Artifactory?
</div>&gt; nope, on the same network as the artifactory instance.
&gt; 
&gt; I&#39;ve tried quite a few things like:
&gt; push @{ $ua-&gt;requests_redirectable }, &#39;POST&#39;;
&gt; push @{ $ua-&gt;requests_redirectable }, &#39;PUT&#39;;
&gt; $ua-&gt;max_redirect&#40;1000&#41;;
&gt; $ua-&gt;show_progress&#40;true&#41;;
&gt; 
&gt; haven&#39;t been able to make LWP::UserAgent work.  when using curl I see
&gt; that I am in fact connecting to port 8081 and the ip resolves to the
&gt; host I would expect.  I see Expect: 100-Continue [data not shown] and
&gt; HTTP/1.1 201 Created response using curl &#40;working!&#41;.  With
&gt; LWP::UserAgent, I see the PUT url and timeout with a 404 not found.
&gt; 
&gt; [PATCH] dealing with mutiple HTTP 100 Continue responses
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://code.activestate.com/lists/perl-libwww/5866/">http://code.activestate.com/lists/perl-libwww/5866/</a></span>
&gt; 
&gt; Re: LWP::UserAgent and TCP_NODELAY - didn&#39;t know how to make MyHTTP be
&gt; used by LWP::UserAgent...
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.libwww/2005/12/msg6480.html">http://www.nntp.perl.org/group/perl.libwww/2005/12/msg6480.html</a></span>
&gt; 
&gt; I can provide wireshark output but I&#39;m not sure that will provide
&gt; anymore light.
&gt; HTTP clients are still something that require a lot of attention...
&gt; I don&#39;t know how to resolve it, aside from using a client that does
&gt; handle the Continue responses.
&gt; 
&gt; I&#39;m not sure what is causing the difference between local and remote
&gt; repo, and would be very happy if another person would duplicate such
&gt; strange behavior.
&gt; 
&gt; Thanks for trying to help everyone,
&gt; --dave
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1403202" href="/Public/Bug/Display.html?id=97772#txn-1403202">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;25&nbsp;13:06:40&nbsp;2014</span>
    <span class="description">MRHORNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1403202/744953/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/744953">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Many thanks, that does affect the runtime behavior.

changed your suggested code with auth to include this:
my $h = HTTP::Headers-&gt;new&#40;&#39;Expect&#39; =&gt; &#39;100-continue&#39;&#41;;
$h-&gt;authorization_basic&#40; $usr, $pwd &#41;;
and now the blocking is gone but in it&#39;s place I get a strange error.

500 Can&#39;t use an undefined value as a SCALAR reference
HTTP::Response  {
    Parents       HTTP::Message
    public methods &#40;22&#41; : as_string, base, clone, code, current_age, dump, error_as_HTML, filename, fresh_until, freshness_lifetime, is_error, is_fresh, is_info, is_redirect, is_success, message, new, parse, previous, redirects, request, status_line
    private methods &#40;0&#41;
    internals: {
        _content   &#34;Can&#39;t use an undefined value as a SCALAR reference at C:/strawberry/perl/site/lib/LWP/Protocol/http.pm line 406.
&#34;,
        _headers   HTTP::Headers,
        _msg       &#34;Can&#39;t use an undefined value as a SCALAR reference&#34;,
        _rc        500,
        _request   HTTP::Request
    }

Line 406 of http.pm is:
            if &#40;defined&#40;$wbits&#41; &#38;&#38; $wbits =~ /[^\0]/&#41; {
which is checking the defined on the left hand side...hrm

undefined value should be protected with that defined&#40;&#41; check, right?

Thanks.
--dave

On Mon Aug 18 23:36:22 2014, SYAGI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m shooting from the hip here, but I&#39;d suggest setting the Expect:
&gt; 100-continue in HTTP request headers.
&gt; 
&gt; On Mon Aug 18 14:51:19 2014, MRHORNER wrote:
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; my $h = HTTP::Headers-&gt;new&#40;&#41;;
&gt; &gt; &gt; $h-&gt;authorization_basic&#40; &#39;user&#39;, &#39;pass&#39; &#41;;
&gt; &gt; &gt; my $ua   = LWP::UserAgent-&gt;new&#40; default_headers =&gt; $h &#41;;
&gt; &gt; &gt; my $resp = $ua-&gt;get&#40;$url&#41;;
</div>&gt; &gt; Thanks, another way to provide the basic auth headers using LWP! :&#41;
&gt; &gt;
&gt; &gt; This sadly does not seem to work.  I&#39;m not sure where the difference
&gt; &gt; is, but remotely this code does not work.
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; proxy node providing the authentication service between the client
&gt; &gt; &gt; and
&gt; &gt; &gt; Artifactory?
</div>&gt; &gt; nope, on the same network as the artifactory instance.
&gt; &gt;
&gt; &gt; I&#39;ve tried quite a few things like:
&gt; &gt; push @{ $ua-&gt;requests_redirectable }, &#39;POST&#39;;
&gt; &gt; push @{ $ua-&gt;requests_redirectable }, &#39;PUT&#39;;
&gt; &gt; $ua-&gt;max_redirect&#40;1000&#41;;
&gt; &gt; $ua-&gt;show_progress&#40;true&#41;;
&gt; &gt;
&gt; &gt; haven&#39;t been able to make LWP::UserAgent work.  when using curl I see
&gt; &gt; that I am in fact connecting to port 8081 and the ip resolves to the
&gt; &gt; host I would expect.  I see Expect: 100-Continue [data not shown] and
&gt; &gt; HTTP/1.1 201 Created response using curl &#40;working!&#41;.  With
&gt; &gt; LWP::UserAgent, I see the PUT url and timeout with a 404 not found.
&gt; &gt;
&gt; &gt; [PATCH] dealing with mutiple HTTP 100 Continue responses
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://code.activestate.com/lists/perl-libwww/5866/">http://code.activestate.com/lists/perl-libwww/5866/</a></span>
&gt; &gt;
&gt; &gt; Re: LWP::UserAgent and TCP_NODELAY - didn&#39;t know how to make MyHTTP
&gt; &gt; be
&gt; &gt; used by LWP::UserAgent...
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.nntp.perl.org/group/perl.libwww/2005/12/msg6480.html">http://www.nntp.perl.org/group/perl.libwww/2005/12/msg6480.html</a></span>
&gt; &gt;
&gt; &gt; I can provide wireshark output but I&#39;m not sure that will provide
&gt; &gt; anymore light.
&gt; &gt; HTTP clients are still something that require a lot of attention...
&gt; &gt; I don&#39;t know how to resolve it, aside from using a client that does
&gt; &gt; handle the Continue responses.
&gt; &gt;
&gt; &gt; I&#39;m not sure what is causing the difference between local and remote
&gt; &gt; repo, and would be very happy if another person would duplicate such
&gt; &gt; strange behavior.
&gt; &gt;
&gt; &gt; Thanks for trying to help everyone,
&gt; &gt; --dave
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1403350" href="/Public/Bug/Display.html?id=97772#txn-1403350">#</a>      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;26&nbsp;00:37:42&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1403350/745031/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/745031">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">What exactly is http.pm?  On my system I don&#39;t have that module installed.  Can you try perldoc -l http?

Also, what&#39;s the Data::Dumper output of the response object?  I hadn&#39;t used this dumper thing you&#39;re using, and I think it misses some valuable information.

On Mon Aug 25 13:06:40 2014, MRHORNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Many thanks, that does affect the runtime behavior.
&gt; 
&gt; changed your suggested code with auth to include this:
&gt; my $h = HTTP::Headers-&gt;new&#40;&#39;Expect&#39; =&gt; &#39;100-continue&#39;&#41;;
&gt; $h-&gt;authorization_basic&#40; $usr, $pwd &#41;;
&gt; and now the blocking is gone but in it&#39;s place I get a strange error.
&gt; 
&gt; 500 Can&#39;t use an undefined value as a SCALAR reference
&gt; HTTP::Response  {
&gt;     Parents       HTTP::Message
&gt;     public methods &#40;22&#41; : as_string, base, clone, code, current_age,
&gt; dump, error_as_HTML, filename, fresh_until, freshness_lifetime,
&gt; is_error, is_fresh, is_info, is_redirect, is_success, message, new,
&gt; parse, previous, redirects, request, status_line
&gt;     private methods &#40;0&#41;
&gt;     internals: {
&gt;         _content   &#34;Can&#39;t use an undefined value as a SCALAR reference
&gt; at C:/strawberry/perl/site/lib/LWP/Protocol/http.pm line 406.
&gt; &#34;,
&gt;         _headers   HTTP::Headers,
&gt;         _msg       &#34;Can&#39;t use an undefined value as a SCALAR
&gt; reference&#34;,
&gt;         _rc        500,
&gt;         _request   HTTP::Request
&gt;     }
&gt; 
&gt; Line 406 of http.pm is:
&gt;             if &#40;defined&#40;$wbits&#41; &#38;&#38; $wbits =~ /[^\0]/&#41; {
&gt; which is checking the defined on the left hand side...hrm
&gt; 
&gt; undefined value should be protected with that defined&#40;&#41; check, right?
&gt; 
&gt; Thanks.
&gt; --dave
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1403984" href="/Public/Bug/Display.html?id=97772#txn-1403984">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;27&nbsp;17:11:31&nbsp;2014</span>
    <span class="description">MRHORNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1403984/745327/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/745327">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; What exactly is http.pm?  On my system I don&#39;t have that module
&gt; installed.  Can you try perldoc -l http?
</div>Two windows systems tried perldoc -l http, both replied &#39;No documentation found for &#34;http&#34;&#39;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also, what&#39;s the Data::Dumper output of the response object?
</div>&#40;sorry about the formatting&#41;
-----                                                                                                        
$VAR1 = bless&#40; {                                                                                             
                 &#39;_content&#39; =&gt; &#39;Can\&#39;t use an undefined value as a SCALAR reference at C:/strawberry/perl/sit
e/lib/LWP/Protocol/http.pm line 406.                                                                         
&#39;,                                                                                                           
                 &#39;_rc&#39; =&gt; 500,                                                                               
                 &#39;_headers&#39; =&gt; bless&#40; {                                                                      
                                        &#39;client-warning&#39; =&gt; &#39;Internal response&#39;,                             
                                        &#39;client-date&#39; =&gt; &#39;Wed, 27 Aug 2014 21:07:16 GMT&#39;,                    
                                        &#39;content-type&#39; =&gt; &#39;text/plain&#39;,                                      
                                        &#39;::std_case&#39; =&gt; {                                                    
                                                          &#39;set-cookie2&#39; =&gt; &#39;Set-Cookie2&#39;,                    
                                                          &#39;client-warning&#39; =&gt; &#39;Client-Warning&#39;,              
                                                          &#39;client-date&#39; =&gt; &#39;Client-Date&#39;,                    
                                                          &#39;set-cookie&#39; =&gt; &#39;Set-Cookie&#39;                       
                                                        }                                                    
                                      }, &#39;HTTP::Headers&#39; &#41;,                                                  
                 &#39;_msg&#39; =&gt; &#39;Can\&#39;t use an undefined value as a SCALAR reference&#39;,                            
                 &#39;_request&#39; =&gt; bless&#40; {                                                                      
                                        &#39;_content&#39; =&gt; sub { &#34;DUMMY&#34; },                                       
                                        &#39;_uri&#39; =&gt; bless&#40; do{\&#40;my $o = &#39;URLHERE&#39;&#41;}, &#39;URI::http&#39; &#41;,             
                                        &#39;_headers&#39; =&gt; bless&#40; {                                               
                                                               &#39;user-agent&#39; =&gt; &#39;libwww-perl/6.08&#39;,           
                                                               &#39;content-type&#39; =&gt; &#39;application/binary&#39;,   

                                        &#39;_headers&#39; =&gt; bless&#40; {                                               
                                                               &#39;user-agent&#39; =&gt; &#39;libwww-perl/6.08&#39;,           
                                                               &#39;content-type&#39; =&gt; &#39;application/binary&#39;,       
                                                               &#39;accept&#39; =&gt; &#39;s&#39;,                              
                                                               &#39;content-length&#39; =&gt; 3675,                     
                                                               &#39;expect&#39; =&gt; &#39;100-continue&#39;,                   
                                                               &#39;authorization&#39; =&gt; &#39;Basic ZZExpZmUxMA==                                                                                                 
&#39;                                                                                                            
                                                             }, &#39;HTTP::Headers&#39; &#41;,                           
                                        &#39;_method&#39; =&gt; &#39;PUT&#39;,                                                  
                                        &#39;_uri_canonical&#39; =&gt; $VAR1-&gt;{&#39;_request&#39;}{&#39;_uri&#39;}                      
                                      }, &#39;HTTP::Request&#39; &#41;                                                   
               }, &#39;HTTP::Response&#39; &#41;;                                                                        
-----                                                                                                            
The http.pm file didn&#39;t exist on another strawberry test machine, I am also surprised by it&#39;s presence.  Wondering about just deleting it but haven&#39;t gone that far yet.

Can\&#39;t use an undefined value as a SCALAR reference, seems like something easy to resolve;  Not sure why I am getting that error on a line that is testing for defined...  I&#39;ve attached both http.pm and https.pm found on my system.


Thanks,
--dave
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> http.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1403984/745328/http.pm">Download http.pm</a><br />
<span class="downloadcontenttype">text/x-perl 14.5k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> https.pm</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1403984/745329/https.pm">Download https.pm</a><br />
<span class="downloadcontenttype">text/x-perl 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">package LWP::Protocol::https;

use strict;
our $VERSION = &#34;6.04&#34;;

require LWP::Protocol::http;
our @ISA = qw&#40;LWP::Protocol::http&#41;;

sub socket_type
{
    return &#34;https&#34;;
}

sub _extra_sock_opts
{
    my $self = shift;
    my %ssl_opts = %{$self-&gt;{ua}{ssl_opts} || {}};
    if &#40;delete $ssl_opts{verify_hostname}&#41; {
	$ssl_opts{SSL_verify_mode} ||= 1;
	$ssl_opts{SSL_verifycn_scheme} = &#39;www&#39;;
    }
    else {
	$ssl_opts{SSL_verify_mode} = 0;
    }
    if &#40;$ssl_opts{SSL_verify_mode}&#41; {
	unless &#40;exists $ssl_opts{SSL_ca_file} || exists $ssl_opts{SSL_ca_path}&#41; {
	    eval {
		require Mozilla::CA;
	    };
	    if &#40;$@&#41; {
		if &#40;$@ =! /^Can&#39;t locate Mozilla\/CA\.pm/&#41; {
		    $@ = &lt;&lt;&#39;EOT&#39;;
Can&#39;t verify SSL peers without knowing which Certificate Authorities to trust

This problem can be fixed by either setting the PERL_LWP_SSL_CA_FILE
envirionment variable or by installing the Mozilla::CA module.

To disable verification of SSL peers set the PERL_LWP_SSL_VERIFY_HOSTNAME
envirionment variable to 0.  If you do this you can&#39;t be sure that you
communicate with the expected peer.
EOT
		}
		die $@;
	    }
	    $ssl_opts{SSL_ca_file} = Mozilla::CA::SSL_ca_file&#40;&#41;;
	}
    }
    $self-&gt;{ssl_opts} = \%ssl_opts;
    return &#40;%ssl_opts, $self-&gt;SUPER::_extra_sock_opts&#41;;
}

sub _check_sock
{
    my&#40;$self, $req, $sock&#41; = @_;
    my $check = $req-&gt;header&#40;&#34;If-SSL-Cert-Subject&#34;&#41;;
    if &#40;defined $check&#41; {
	my $cert = $sock-&gt;get_peer_certificate ||
	    die &#34;Missing SSL certificate&#34;;
	my $subject = $cert-&gt;subject_name;
	die &#34;Bad SSL certificate subject: &#39;$subject&#39; !~ /$check/&#34;
	    unless $subject =~ /$check/;
	$req-&gt;remove_header&#40;&#34;If-SSL-Cert-Subject&#34;&#41;;  # don&#39;t pass it on
    }
}

sub _get_sock_info
{
    my $self = shift;
    $self-&gt;SUPER::_get_sock_info&#40;@_&#41;;
    my&#40;$res, $sock&#41; = @_;
    $res-&gt;header&#40;&#34;Client-SSL-Cipher&#34; =&gt; $sock-&gt;get_cipher&#41;;
    my $cert = $sock-&gt;get_peer_certificate;
    if &#40;$cert&#41; {
	$res-&gt;header&#40;&#34;Client-SSL-Cert-Subject&#34; =&gt; $cert-&gt;subject_name&#41;;
	$res-&gt;header&#40;&#34;Client-SSL-Cert-Issuer&#34; =&gt; $cert-&gt;issuer_name&#41;;
    }
    if &#40;!$self-&gt;{ssl_opts}{SSL_verify_mode}&#41; {
	$res-&gt;push_header&#40;&#34;Client-SSL-Warning&#34; =&gt; &#34;Peer certificate not verified&#34;&#41;;
    }
    elsif &#40;!$self-&gt;{ssl_opts}{SSL_verifycn_scheme}&#41; {
	$res-&gt;push_header&#40;&#34;Client-SSL-Warning&#34; =&gt; &#34;Peer hostname match with certificate not verified&#34;&#41;;
    }
    $res-&gt;header&#40;&#34;Client-SSL-Socket-Class&#34; =&gt; $Net::HTTPS::SSL_SOCKET_CLASS&#41;;
}

#-----------------------------------------------------------
package LWP::Protocol::https::Socket;

require Net::HTTPS;
our @ISA = qw&#40;Net::HTTPS LWP::Protocol::http::SocketMethods&#41;;

1;

__END__

=head1 NAME

LWP::Protocol::https - Provide https support for LWP::UserAgent

=head1 SYNOPSIS

  use LWP::UserAgent;

  $ua = LWP::UserAgent-&gt;new&#40;ssl_opts =&gt; { verify_hostname =&gt; 1 }&#41;;
  $res = $ua-&gt;get&#40;&#34;<span class="clickylink"><a target="new" rel="nofollow" href="https://www.example.com">https://www.example.com</a></span>&#34;&#41;;

=head1 DESCRIPTION

The LWP::Protocol::https module provides support for using https schemed
URLs with LWP.  This module is a plug-in to the LWP protocol handling, so
you don&#39;t use it directly.  Once the module is installed LWP is able
to access sites using HTTP over SSL/TLS.

If hostname verification is requested by LWP::UserAgent&#39;s C&lt;ssl_opts&gt;, and
neither C&lt;SSL_ca_file&gt; nor C&lt;SSL_ca_path&gt; is set, then C&lt;SSL_ca_file&gt; is
implied to be the one provided by Mozilla::CA.  If the Mozilla::CA module
isn&#39;t available SSL requests will fail.  Either install this module, set up an
alternative C&lt;SSL_ca_file&gt; or disable hostname verification.

This module used to be bundled with the libwww-perl, but it was unbundled in
v6.02 in order to be able to declare its dependencies properly for the CPAN
tool-chain.  Applications that need https support can just declare their
dependency on LWP::Protocol::https and will no longer need to know what
underlying modules to install.

=head1 SEE ALSO

L&lt;IO::Socket::SSL&gt;, L&lt;Crypt::SSLeay&gt;, L&lt;Mozilla::CA&gt;

=head1 COPYRIGHT

Copyright 1997-2011 Gisle Aas.

This library is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1404167" href="/Public/Bug/Display.html?id=97772#txn-1404167">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;28&nbsp;00:00:38&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1404167/745425/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/745425">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ah I see, this is LWP::Protocol::http huh.

The only thing I can think of is that you might be hitting a subtle bug on LWP side, could be some kind of race condition.

You might want to try filing an issue here to see what they have to say about the error you&#39;re getting:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/libwww-perl/libwww-perl">https://github.com/libwww-perl/libwww-perl</a></span>

On Wed Aug 27 17:11:31 2014, MRHORNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; What exactly is http.pm?  On my system I don&#39;t have that module
&gt; &gt; installed.  Can you try perldoc -l http?
</div>&gt; Two windows systems tried perldoc -l http, both replied &#39;No
&gt; documentation found for &#34;http&#34;&#39;
&gt; 
<div class="message-stanza open">&gt; &gt; Also, what&#39;s the Data::Dumper output of the response object?
</div>&gt; &#40;sorry about the formatting&#41;
&gt; -----
&gt; $VAR1 = bless&#40; {
&gt; &#39;_content&#39; =&gt; &#39;Can\&#39;t use an undefined value as a SCALAR reference at
&gt; C:/strawberry/perl/sit
&gt; e/lib/LWP/Protocol/http.pm line 406.
&gt;               &#39;,
&gt;    &#39;_rc&#39; =&gt; 500,
&gt; &#39;_headers&#39; =&gt; bless&#40; {
&gt; &#39;client-warning&#39; =&gt; &#39;Internal response&#39;,
&gt; &#39;client-date&#39; =&gt; &#39;Wed, 27 Aug 2014 21:07:16 GMT&#39;,
&gt; &#39;content-type&#39; =&gt; &#39;text/plain&#39;,
&gt; &#39;::std_case&#39; =&gt; {
&gt; &#39;set-cookie2&#39; =&gt; &#39;Set-Cookie2&#39;,
&gt; &#39;client-warning&#39; =&gt; &#39;Client-Warning&#39;,
&gt; &#39;client-date&#39; =&gt; &#39;Client-Date&#39;,
&gt; &#39;set-cookie&#39; =&gt; &#39;Set-Cookie&#39;
&gt;                }
&gt; }, &#39;HTTP::Headers&#39; &#41;,
&gt; &#39;_msg&#39; =&gt; &#39;Can\&#39;t use an undefined value as a SCALAR reference&#39;,
&gt; &#39;_request&#39; =&gt; bless&#40; {
&gt; &#39;_content&#39; =&gt; sub { &#34;DUMMY&#34; },
&gt; &#39;_uri&#39; =&gt; bless&#40; do{\&#40;my $o = &#39;URLHERE&#39;&#41;}, &#39;URI::http&#39; &#41;,
&gt; &#39;_headers&#39; =&gt; bless&#40; {
&gt; &#39;user-agent&#39; =&gt; &#39;libwww-perl/6.08&#39;,
&gt; &#39;content-type&#39; =&gt; &#39;application/binary&#39;,
&gt; 
&gt; &#39;_headers&#39; =&gt; bless&#40; {
&gt; &#39;user-agent&#39; =&gt; &#39;libwww-perl/6.08&#39;,
&gt; &#39;content-type&#39; =&gt; &#39;application/binary&#39;,
&gt;       &#39;accept&#39; =&gt; &#39;s&#39;,
&gt; &#39;content-length&#39; =&gt; 3675,
&gt; &#39;expect&#39; =&gt; &#39;100-continue&#39;,
&gt;                                                                          &#39;authorization&#39;
&gt; =&gt; &#39;Basic ZZExpZmUxMA==
&gt;                      &#39;
&gt;  }, &#39;HTTP::Headers&#39; &#41;,
&gt;    &#39;_method&#39; =&gt; &#39;PUT&#39;,
&gt; &#39;_uri_canonical&#39; =&gt; $VAR1-&gt;{&#39;_request&#39;}{&#39;_uri&#39;}
&gt;   }, &#39;HTTP::Request&#39; &#41;
&gt; }, &#39;HTTP::Response&#39; &#41;;
&gt; -----
&gt; The http.pm file didn&#39;t exist on another strawberry test machine, I am
&gt; also surprised by it&#39;s presence.  Wondering about just deleting it but
&gt; haven&#39;t gone that far yet.
&gt; 
&gt; Can\&#39;t use an undefined value as a SCALAR reference, seems like
&gt; something easy to resolve;  Not sure why I am getting that error on a
&gt; line that is testing for defined...  I&#39;ve attached both http.pm and
&gt; https.pm found on my system.
&gt; 
&gt; 
&gt; Thanks,
&gt; --dave
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1404483" href="/Public/Bug/Display.html?id=97772#txn-1404483">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;28&nbsp;16:57:07&nbsp;2014</span>
    <span class="description">MRHORNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1404483/745586/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/745586">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 78b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/libwww-perl/libwww-perl/issues/63">https://github.com/libwww-perl/libwww-perl/issues/63</a></span>
Thanks for all your help!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1404637" href="/Public/Bug/Display.html?id=97772#txn-1404637">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;28&nbsp;23:14:17&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1404637/745658/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/745658">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 225b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">No problem, I hope they can help you out with this.  I&#39;ll look at the issue from time to time.

On Thu Aug 28 16:57:07 2014, MRHORNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/libwww-perl/libwww-perl/issues/63">https://github.com/libwww-perl/libwww-perl/issues/63</a></span>
&gt; Thanks for all your help!
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1404639" href="/Public/Bug/Display.html?id=97772#txn-1404639">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;28&nbsp;23:14:18&nbsp;2014</span>
    <span class="description">SYAGI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.824335</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
