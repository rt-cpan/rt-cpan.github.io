<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #65462 for DBD-mysql: Compiling DBD:mysql on Mac OS X 10.6.6 fails</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #65462 for DBD-mysql: Compiling DBD:mysql on Mac OS X 10.6.6 fails</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-mysql/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-mysql/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-mysql/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-mysql/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-mysql">DBD-mysql CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">65462</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-mysql/Active/">DBD-mysql</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">CAPTTOFU [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jwhansen [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10170-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10171-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;04&nbsp;17:20:29&nbsp;2011</span>
    <span class="description">jwhansen [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Compiling DBD:mysql on Mac OS X 10.6.6 fails</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 4 Feb 2011 17:20:17 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-mysql [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Hansen &lt;jwhansen [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Gents,

While attempting to install DBD:mysql on Mac OS X 10.6.6 it fails the &#39;make test&#39;.
Below is the data you may need.

** Perl version ***
perl -v
This is perl 5, version 12, subversion 2 &#40;v5.12.2&#41; built for darwin-thread-multi-2level
&#40;with 8 registered patches, see perl -V for more detail
Binary build 1203 [294165] provided by ActiveState <span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
Built Dec  9 2010 04:11:19

** DBD Bundle **
DBD:mysql bundle:
CAPTTOFU/DBD-mysql-4.018.tar.gz

** System OS **
Mac OS X 10.6.6 &#40;10J567&#41; on Macbook Air
Darwin macbook 10.6.0 Darwin Kernel Version 10.6.0: Wed Nov 10 18:13:17 PST 2010;
root:xnu-1504.9.26~3/RELEASE_I386 i386


** Problem **
compiling and performing &#39;make test&#39; results in error:

macbook:DBD-mysql-4.018-9F3Dsr root# make test
PERL_DL_NONLAZY=1 /usr/local/ActivePerl-5.12/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00base.t .................. 1/6 
#   Failed test &#39;use DBD::mysql;&#39;
#   at t/00base.t line 21.
Bailout called.  Further testing stopped:  Unable to load DBD::mysql
#     Tried to use &#39;DBD::mysql&#39;.
#     Error:  Can&#39;t load &#39;/private/var/root/.cpan/build/DBD-mysql-4.018-9F3Dsr/blib/arch/auto/DBD/mysql/mysql.bundle&#39; for module DBD::mysql: dlopen&#40;/private/var/root/.cpan/build/DBD-mysql-4.018-9F3Dsr/blib/arch/auto/DBD/mysql/mysql.bundle, 2&#41;: Symbol not found: _is_prefix
#   Referenced from: /private/var/root/.cpan/build/DBD-mysql-4.018-9F3Dsr/blib/arch/auto/DBD/mysql/mysql.bundle
#   Expected in: dynamic lookup
#  at &#40;eval 9&#41; line 2
# Compilation failed in require at &#40;eval 9&#41; line 2.
# BEGIN failed--compilation aborted at &#40;eval 9&#41; line 2.
FAILED--Further testing stopped: Unable to load DBD::mysql
make: *** [test_dynamic] Error 255
----------------------------

I would be happy to send any additional info to assist you.

Thank you,
John Hansen
jwhansen@gmail.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;07&nbsp;14:25:48&nbsp;2011</span>
    <span class="description">jwhansen [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #65462] AutoReply: Compiling DBD:mysql on Mac OS X 10.6.6 fails</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 7 Feb 2011 14:25:35 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-mysql [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Hansen &lt;jwhansen [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">update - 
1. I removed 5.5.8 and installed Mysql 5.1.49.
2. I did a clean install of Mysql 5.1.49
3. I removed Activestate Perl and used the default version of perl that came with the Macbook Air under OS X 10.6.6

perl -V
Summary of my perl5 &#40;revision 5 version 10 subversion 0&#41; configuration:
  Platform:
  osname=darwin, osvers=10.0, archname=darwin-thread-multi-2level
  uname=&#39;darwin scream.apple.com 10.0 darwin kernel version 10.0.0: fri jul 31 22:46:25 pdt 2009; root:xnu-1456.1.25~1release_x86_64 x86_64 &#39;

Under this environment the &#39;make test&#39; finished correctly and the &#39;make install&#39; correctly installed. Tested the access to a table and it worked.


John Hansen
jwhansen@gmail.com
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;15&nbsp;20:50:47&nbsp;2011</span>
    <span class="description">CAPTTOFU [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;15&nbsp;20:51:11&nbsp;2011</span>
    <span class="description">CAPTTOFU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Looking into this issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;15&nbsp;20:51:12&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;29&nbsp;12:18:55&nbsp;2011</span>
    <span class="description">CAPTTOFU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Can someone please set me up with a OS X 10.6.6 environment? I don&#39;t yet
have access to one.

I really want to fix this and have been slammed, but if someone can help
me out with a test env, that would be a HUGE help.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;02:00:51&nbsp;2011</span>
    <span class="description">francois1+bitcard [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> francois1+bitcard [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">There are potentially two issues:

- the &#40;infamous&#41; &#34;Xcode4 breaks CPAN&#34; problem: 
<span class="clickylink"><a target="new" rel="nofollow" href="http://deflatermouse.livejournal.com/149721.html">http://deflatermouse.livejournal.com/149721.html</a></span> for which the easiest fix until Apple fixes 
this is, for the user, to modify /System/Library/Perl/5.10.0/darwin-thread-multi-
2level/Config_heavy.pl to remove the -arch ppc from $ENV{ARCHFLAGS}.

- the bug report above is because the libraries flags are wrong during compilation, and can 
manifest itself slightly differently. Here&#39;s what I get:

iMac:DBD-mysql-4.019-FNGA1g francois$ sudo make test
PERL_DL_NONLAZY=1 /usr/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, 
&#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00base.t .................. 1/6 
#   Failed test &#39;use DBD::mysql;&#39;
#   at t/00base.t line 21.
Bailout called.  Further testing stopped:  Unable to load DBD::mysql
#     Tried to use &#39;DBD::mysql&#39;.
#     Error:  Can&#39;t load &#39;/Users/francois/.cpan/DBD-mysql-4.019-
FNGA1g/blib/arch/auto/DBD/mysql/mysql.bundle&#39; for module DBD::mysql: 
dlopen&#40;/Users/francois/.cpan/DBD-mysql-4.019-
FNGA1g/blib/arch/auto/DBD/mysql/mysql.bundle, 2&#41;: Library not loaded: 
libmysqlclient.18.dylib
#   Referenced from: /Users/francois/.cpan/DBD-mysql-4.019-
FNGA1g/blib/arch/auto/DBD/mysql/mysql.bundle
#   Reason: image not found at /System/Library/Perl/5.10.0/darwin-thread-multi-
2level/DynaLoader.pm line 207.
#  at &#40;eval 7&#41; line 2
# Compilation failed in require at &#40;eval 7&#41; line 2.
# BEGIN failed--compilation aborted at &#40;eval 7&#41; line 2.
FAILED--Further testing stopped: Unable to load DBD::mysql
make: *** [test_dynamic] Error 255

Now, look at the defaults generated by perl Makefile.pl, it finds the proper location of the 
MySQL client library &#40;which is /usr/local/mysql/lib for binaries installed from dev.mysql.com&#41;:

I will use the following settings for compiling and testing:

  cflags        &#40;mysql_config&#41; = -I/usr/local/mysql/include  -Os -g -fno-common -fno-strict-
aliasing -arch x86_64
  embedded      &#40;mysql_config&#41; = 
  libs          &#40;mysql_config&#41; = -L/usr/local/mysql/lib -lmysqlclient   -lpthread
  mysql_config  &#40;guessed     &#41; = mysql_config
  nocatchstderr &#40;default     &#41; = 0
  nofoundrows   &#40;default     &#41; = 0
  ssl           &#40;guessed     &#41; = 0
  testdb        &#40;default     &#41; = test
  testhost      &#40;default     &#41; = 
  testpassword  &#40;default     &#41; = 
  testsocket    &#40;default     &#41; = 
  testuser      &#40;guessed     &#41; = francois

BUT, if you look at the generated Makefile, you will see this instead:

LDDLFLAGS = -arch x86_64 -bundle -undefined dynamic_lookup -L/usr/local/lib
LDFLAGS = -arch x86_64 -L/usr/local/lib

In those two lines, replacing /usr/local/lib by /usr/local/mysql/lib will fix it, and tests will 
pass &#40;tested with mysql-5.5.12-osx10.6-x86_64.dmg&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;24&nbsp;02:28:59&nbsp;2011</span>
    <span class="description">francois1+bitcard [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> francois1+bitcard [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ah, actually there is one catch with my test above, make test will run on my machine only if I 
have set this environment variable:

DYLD_LIBRARY_PATH=/usr/local/mysql/lib

Which in practice isn&#39;t working outside my shell session.

So no, it&#39;s not solved yet :&#40;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;11&nbsp;13:02:30&nbsp;2011</span>
    <span class="description">aaronjjohnson [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This command will resolve the lib issue, however it would need to be executed outside of the 
build process most likely.

sudo ln -s /usr/local/mysql/lib/*.dylib .

Making that change, removing ALL references to i386 and ppc arch in the Makefile, and 
correcting the paths as outlined by other responders, allowed it to compile correctly against 
64bit version of Perl and MySQL 5.5. All tests passed.

This does appear to be a possible issue with XCode4 wanting to allow the build for all arch 
types.  Researching appropriate flags to avoid this issue.

On Tue May 24 02:28:59 2011, ubiquitic wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ah, actually there is one catch with my test above, make test will run
&gt; on my machine only if I
&gt; have set this environment variable:
&gt; 
&gt; DYLD_LIBRARY_PATH=/usr/local/mysql/lib
&gt; 
&gt; Which in practice isn&#39;t working outside my shell session.
&gt; 
&gt; So no, it&#39;s not solved yet :&#40;.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;11&nbsp;13:07:15&nbsp;2011</span>
    <span class="description">aaronjjohnson [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Might help if I post which directory to cd into before running ln

cd /usr/local/lib
sudo ln -s /usr/local/mysql/lib/*.dylib .

On Sat Jun 11 13:02:30 2011, AARONJJ wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This command will resolve the lib issue, however it would need to be
&gt; executed outside of the
&gt; build process most likely.
&gt; 
&gt; sudo ln -s /usr/local/mysql/lib/*.dylib .
&gt; 
&gt; Making that change, removing ALL references to i386 and ppc arch in
&gt; the Makefile, and
&gt; correcting the paths as outlined by other responders, allowed it to
&gt; compile correctly against
&gt; 64bit version of Perl and MySQL 5.5. All tests passed.
&gt; 
&gt; This does appear to be a possible issue with XCode4 wanting to allow
&gt; the build for all arch
&gt; types.  Researching appropriate flags to avoid this issue.
&gt; 
&gt; On Tue May 24 02:28:59 2011, ubiquitic wrote:
<div class="message-stanza open">&gt; &gt; Ah, actually there is one catch with my test above, make test will
</div>&gt; run
<div class="message-stanza open">&gt; &gt; on my machine only if I
&gt; &gt; have set this environment variable:
&gt; &gt;
&gt; &gt; DYLD_LIBRARY_PATH=/usr/local/mysql/lib
&gt; &gt;
&gt; &gt; Which in practice isn&#39;t working outside my shell session.
&gt; &gt;
&gt; &gt; So no, it&#39;s not solved yet :&#40;.
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;05&nbsp;05:01:41&nbsp;2012</span>
    <span class="description">thierryv [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> thierryv [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Got into the same issue with DBD-mysql-4.020 and MacOSX 2.6.8

The issue is in the linking of mysql.bundle with the MySQL dylib file. The path is NOT SET explicitly &#40;-
install_name&#41; by the linker. The problem is in the Makefile.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;# otool -L blib/arch/auto/DBD/mysql/mysql.bundle
</div>blib/arch/auto/DBD/mysql/mysql.bundle:
        libmysqlclient.18.dylib &#40;compatibility version 18.0.0, current version 18.0.0&#41;
        /usr/lib/libSystem.B.dylib &#40;compatibility version 1.0.0, current version 125.2.11&#41;

Even if mysql_config reports the right lib path, that path is not set at the link step.

I&#39;m not an expert in Makefiles so I can&#39;t propose a definitive fix. However, to &#34;correctly&#34; solve the problem 
while waiting for a fix in the Makefile.PL WITHOUT resorting into using DYLD_LIBRARY_PATH which can cause 
trouble elsewhere, you must manually fix the installed shared library names using the install_name_tool 
utility. It&#39;s very simple.

After doing the make, and before make test and make install, fix mysql.bundle using install_name_tool and 
the lib path provided by the mysql_config of your MySQL engine. In my case it&#39;s the Sun provided build.

Don&#39;t use DYLD_LIBRARY_PATH, nor ln -s to fix this problem. It&#39;s all within the mysql.bundle file that is not 
correctly linked.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;# mysql_config --libs
</div>-L/usr/local/mysql/lib -lmysqlclient   -lpthread

#&gt; make

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;# otool -L blib/arch/auto/DBD/mysql/mysql.bundle
</div>blib/arch/auto/DBD/mysql/mysql.bundle:
        libmysqlclient.18.dylib &#40;compatibility version 18.0.0, current version 18.0.0&#41;
        /usr/lib/libSystem.B.dylib &#40;compatibility version 1.0.0, current version 125.2.11&#41;

#&gt; install_name_tool -change libmysqlclient.18.dylib /usr/local/mysql/lib/libmysqlclient.18.dylib 
blib/arch/auto/DBD/mysql/mysql.bundle

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;# otool -L blib/arch/auto/DBD/mysql/mysql.bundle
</div>blib/arch/auto/DBD/mysql/mysql.bundle:
        /usr/local/mysql/lib/libmysqlclient.18.dylib &#40;compatibility version 18.0.0, current version 18.0.0&#41;
        /usr/lib/libSystem.B.dylib &#40;compatibility version 1.0.0, current version 125.2.11&#41;

#&gt; make test
...
Result: PASS
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;19&nbsp;03:05:10&nbsp;2017</span>
    <span class="description">MICHIELB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is no longer a problem on modern OS X &#40;or macOS&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;19&nbsp;03:05:10&nbsp;2017</span>
    <span class="description">MICHIELB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
