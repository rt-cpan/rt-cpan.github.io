<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #116902 for Dist-Zilla-Plugins-CJM: The tests are failing &#40;perl-5.24.0 built using perlbrew&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #116902 for Dist-Zilla-Plugins-CJM: The tests are failing &#40;perl-5.24.0 built using perlbrew&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugins-CJM/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugins-CJM/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugins-CJM/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Dist-Zilla-Plugins-CJM/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Dist-Zilla-Plugins-CJM">Dist-Zilla-Plugins-CJM CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">116902</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Dist-Zilla-Plugins-CJM/Active/">Dist-Zilla-Plugins-CJM</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SHLOMIF [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
gregoa [...] cpan.org

<br />
tsibley [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-232638-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-232639-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;11&nbsp;08:04:59&nbsp;2016</span>
    <span class="description">SHLOMIF [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> The tests are failing &#40;perl-5.24.0 built using perlbrew&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The tests for this collection of modules started failing. Please look into fixing them.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> cpan.log</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">script -c &#39;cpan -i Dist::Zilla::Plugin::VersionFromModule&#39; ~/cpan.log

gives me this:

I am using perl-5.24.0 from perlbrew on Mageia Linux x86-64 v6:

============================

Script started on Thu 11 Aug 2016 14:55:34 IDT
Loading internal null logger. Install Log::Log4perl for logging messages
CPAN: Storable loaded ok &#40;v2.56&#41;
Reading &#39;/home/shlomif/.cpan/Metadata&#39;
  Database was generated on Thu, 11 Aug 2016 04:17:02 GMT
Running install for module &#39;Dist::Zilla::Plugin::VersionFromModule&#39;
CPAN: Digest::SHA loaded ok &#40;v5.95&#41;
CPAN: Compress::Zlib loaded ok &#40;v2.069&#41;
Checksum for /home/shlomif/.cpan/sources/authors/id/C/CJ/CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz ok
CPAN: Archive::Tar loaded ok &#40;v2.04&#41;
Dist-Zilla-Plugins-CJM-4.27/
Dist-Zilla-Plugins-CJM-4.27/lib/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Role/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Role/ModuleInfo.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Role/HashDumper.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/Test/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/Test/PrereqsFromMeta.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/ModuleBuild/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/ModuleBuild/Custom.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/RecommendedPrereqs.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/GitVersionCheckCJM.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/VersionFromModule.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/MakeMaker/
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/MakeMaker/Custom.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/ArchiveRelease.pm
Dist-Zilla-Plugins-CJM-4.27/lib/Dist/Zilla/Plugin/Metadata.pm
Dist-Zilla-Plugins-CJM-4.27/xt/
Dist-Zilla-Plugins-CJM-4.27/xt/release/
Dist-Zilla-Plugins-CJM-4.27/xt/release/pod-coverage.t
Dist-Zilla-Plugins-CJM-4.27/xt/release/pod-syntax.t
Dist-Zilla-Plugins-CJM-4.27/Template_strict.patch
Dist-Zilla-Plugins-CJM-4.27/corpus/
Dist-Zilla-Plugins-CJM-4.27/corpus/archives/
Dist-Zilla-Plugins-CJM-4.27/corpus/archives/DZT-Sample-0.01.tar.gz
Dist-Zilla-Plugins-CJM-4.27/corpus/archives/DZT-Sample-0.03.tar.gz
Dist-Zilla-Plugins-CJM-4.27/corpus/archives/DZT-Sample-0.02.tar.gz
Dist-Zilla-Plugins-CJM-4.27/corpus/latin1/
Dist-Zilla-Plugins-CJM-4.27/corpus/latin1/lib/
Dist-Zilla-Plugins-CJM-4.27/corpus/latin1/lib/EncTest.pm
Dist-Zilla-Plugins-CJM-4.27/corpus/gitvercheck.git
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/lib/
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/lib/DZT/
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/lib/DZT/Manual.pod
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/lib/DZT/Sample.pm
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/t/
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/t/basic.t
Dist-Zilla-Plugins-CJM-4.27/corpus/DZT/README
Dist-Zilla-Plugins-CJM-4.27/corpus/README
Dist-Zilla-Plugins-CJM-4.27/Makefile.PL
Dist-Zilla-Plugins-CJM-4.27/t/
Dist-Zilla-Plugins-CJM-4.27/t/recommendedprereqs.t
Dist-Zilla-Plugins-CJM-4.27/t/00-all_prereqs.t
Dist-Zilla-Plugins-CJM-4.27/t/gitvercheck.t
Dist-Zilla-Plugins-CJM-4.27/t/00-compile.t
Dist-Zilla-Plugins-CJM-4.27/t/mb_custom.t
Dist-Zilla-Plugins-CJM-4.27/t/mm_custom.t
Dist-Zilla-Plugins-CJM-4.27/t/metadata.t
Dist-Zilla-Plugins-CJM-4.27/t/arcrel.t
Dist-Zilla-Plugins-CJM-4.27/t/vermod.t
Dist-Zilla-Plugins-CJM-4.27/META.json
Dist-Zilla-Plugins-CJM-4.27/META.yml
Dist-Zilla-Plugins-CJM-4.27/MANIFEST
Dist-Zilla-Plugins-CJM-4.27/LICENSE
Dist-Zilla-Plugins-CJM-4.27/Changes
Dist-Zilla-Plugins-CJM-4.27/README
&#39;YAML&#39; not installed, will not store persistent state
CPAN: CPAN::Meta::Requirements loaded ok &#40;v2.140&#41;
CPAN: Parse::CPAN::Meta loaded ok &#40;v1.4417&#41;
CPAN: CPAN::Meta loaded ok &#40;v2.150005&#41;
CPAN: Module::CoreList loaded ok &#40;v5.20160506&#41;
Configuring C/CJ/CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz with Makefile.PL
Checking if your kit is complete...
Looks good
Generating a Unix-style Makefile
Writing Makefile for Dist::Zilla::Plugins::CJM
Writing MYMETA.yml and MYMETA.json
  CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz
  /home/shlomif/apps/perl/brew/perls/perl-5.24.0/bin/perl Makefile.PL -- OK
Running make for C/CJ/CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz
cp lib/Dist/Zilla/Plugin/RecommendedPrereqs.pm blib/lib/Dist/Zilla/Plugin/RecommendedPrereqs.pm
cp lib/Dist/Zilla/Plugin/MakeMaker/Custom.pm blib/lib/Dist/Zilla/Plugin/MakeMaker/Custom.pm
cp lib/Dist/Zilla/Role/ModuleInfo.pm blib/lib/Dist/Zilla/Role/ModuleInfo.pm
cp lib/Dist/Zilla/Plugin/GitVersionCheckCJM.pm blib/lib/Dist/Zilla/Plugin/GitVersionCheckCJM.pm
cp lib/Dist/Zilla/Plugin/VersionFromModule.pm blib/lib/Dist/Zilla/Plugin/VersionFromModule.pm
cp lib/Dist/Zilla/Role/HashDumper.pm blib/lib/Dist/Zilla/Role/HashDumper.pm
cp lib/Dist/Zilla/Plugin/Metadata.pm blib/lib/Dist/Zilla/Plugin/Metadata.pm
cp lib/Dist/Zilla/Plugin/ArchiveRelease.pm blib/lib/Dist/Zilla/Plugin/ArchiveRelease.pm
cp lib/Dist/Zilla/Plugin/ModuleBuild/Custom.pm blib/lib/Dist/Zilla/Plugin/ModuleBuild/Custom.pm
cp lib/Dist/Zilla/Plugin/Test/PrereqsFromMeta.pm blib/lib/Dist/Zilla/Plugin/Test/PrereqsFromMeta.pm
Manifying 10 pod documents
  CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz
  /usr/bin/make -- OK
Running make test
PERL_DL_NONLAZY=1 &#34;/home/shlomif/apps/perl/brew/perls/perl-5.24.0/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00-all_prereqs.t ...... t/00-all_prereqs.t ...... 1/?                                 t/00-all_prereqs.t ...... ok
t/00-compile.t .......... # Testing Dist-Zilla-Plugins-CJM 4.27
t/00-compile.t .......... 1/10 t/00-compile.t .......... 7/10                                  t/00-compile.t .......... ok
t/arcrel.t .............. t/arcrel.t .............. 1/6 -&gt;file called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/arcrel.t line 82.
-&gt;file called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/arcrel.t line 85.
                               t/arcrel.t .............. ok
t/gitvercheck.t .........                                t/gitvercheck.t ......... skipped: Git::Wrapper required for testing GitVersionCheckCJM
t/mb_custom.t ........... t/mb_custom.t ........... 1/10                                  t/mb_custom.t ........... ok
t/metadata.t ............ t/metadata.t ............ 1/5                                t/metadata.t ............ ok
t/mm_custom.t ........... t/mm_custom.t ........... 1/10                                  t/mm_custom.t ........... ok
t/recommendedprereqs.t .. -&gt;file called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/recommendedprereqs.t line 23.
t/recommendedprereqs.t .. 1/4 
#   Failed test &#39;runtime recommends&#39;
#   at t/recommendedprereqs.t line 27.
#     Structures begin differing at:
#          $got = undef
#     $expected = HASH&#40;0x3c96558&#41;

#   Failed test &#39;test suggests&#39;
#   at t/recommendedprereqs.t line 38.
#     Structures begin differing at:
#          $got = undef
#     $expected = HASH&#40;0x3e5e380&#41;
# Looks like you failed 2 tests of 4.
                               t/recommendedprereqs.t .. Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 2/4 subtests 
t/vermod.t .............. t/vermod.t .............. 1/2 t/vermod.t .............. 2/2                                t/vermod.t .............. ok

Test Summary Report
-------------------
t/recommendedprereqs.t &#40;Wstat: 512 Tests: 4 Failed: 2&#41;
  Failed tests:  1, 4
  Non-zero exit status: 2
Files=9, Tests=108,  6 wallclock secs &#40; 0.06 usr  0.01 sys +  5.57 cusr  0.36 csys =  6.00 CPU&#41;
Result: FAIL
Failed 1/9 test programs. 2/108 subtests failed.
Makefile:940: recipe for target &#39;test_dynamic&#39; failed
make: *** [test_dynamic] Error 255
  CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz
  /usr/bin/make test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
  reports CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz

Script done on Thu 11 Aug 2016 14:55:42 IDT
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;20&nbsp;14:32:46&nbsp;2016</span>
    <span class="description">maurice [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 11 08:04:59 2016, SHLOMIF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The tests for this collection of modules started failing. Please look
&gt; into fixing them.
</div>

Hi. I hit this problem too. Looks like for some reason, with 5.24.0, the CPAN::Meta::Spec being used is old. 

I just committed a fix for the failing test, although it may be papering over the problem:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mla/dist-zilla-plugins-cjm">https://github.com/mla/dist-zilla-plugins-cjm</a></span>

With Perl 5.18.1, here&#39;s how the META.yml is based in t/recommendedprereqs.t:

abstract: &#39;Sample DZ Dist&#39;
author:
  - &#39;E. Xavier Ample &lt;example@example.org&gt;&#39;
dynamic_config: 0
generated_by: &#39;Dist::Zilla::Tester version 5.037, CPAN::Meta::Converter version 2.150005&#39;
license:
  - perl_5
meta-spec:
  url: <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/perldoc?CPAN::Meta::Spec">http://search.cpan.org/perldoc?CPAN::Meta::Spec</a></span>
  version: &#39;2&#39;
name: DZT-Sample
prereqs:
  runtime:
    recommends:
      Foo::Bar: &#39;1.00&#39;
      Foo::Baz: &#39;0&#39;
  test:
    suggests:
      Test::Other: &#39;0&#39;
release_status: stable
version: &#39;0.001&#39;


Note the meta-spec version 2 there. Here&#39;s how it&#39;s parsed with 5.24.0:

abstract: &#39;Sample DZ Dist&#39;
author:
  - &#39;E. Xavier Ample &lt;example@example.org&gt;&#39;
build_requires: {}
dynamic_config: 0
generated_by: &#39;Dist::Zilla::Tester version 6.007, CPAN::Meta::Converter version 2.150010&#39;
license: perl
meta-spec:
  url: <span class="clickylink"><a target="new" rel="nofollow" href="http://module-build.sourceforge.net/META-spec-v1.4.html">http://module-build.sourceforge.net/META-spec-v1.4.html</a></span>
  version: &#39;1.4&#39;
name: DZT-Sample
recommends:
  Foo::Bar: &#39;1.00&#39;
  Foo::Baz: &#39;0&#39;
version: &#39;0.001&#39;
x_serialization_backend: &#39;YAML::Tiny version 1.69&#39;

So for some reason the meta spec was downgraded from 2.x to 1.x between Perls. I don&#39;t know what that means. CPAN::Meta::Spec appears to be the latest version on my Perl 5.24. 

I just modified the test file to skip the prereq tests if the meta spec is &lt; 2, but there must be some more fundamental reason that the old spec is being used in these environments.

I&#39;m using plenv, BTW.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;20&nbsp;14:32:47&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;20&nbsp;16:03:23&nbsp;2016</span>
    <span class="description">maurice [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 11 08:04:59 2016, SHLOMIF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The tests for this collection of modules started failing. Please look
&gt; into fixing them.
</div>
The problem is due to a recent change in Dist::Zilla:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rjbs/Dist-Zilla/commit/09462bcdced71a6e3a877b5cc34c136eafcc1af6">https://github.com/rjbs/Dist-Zilla/commit/09462bcdced71a6e3a877b5cc34c136eafcc1af6</a></span>

That pins the CPAN::Meta::Spec version to 1.4. The tests in t/recommendedprereqs.t are assuming a 2.x format.


I applies a partial fix to the test to accommodate either 1.4 or 2 format. Not sure if it&#39;s totally correct but seems to pass for me with both versions now.

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mla/dist-zilla-plugins-cjm">https://github.com/mla/dist-zilla-plugins-cjm</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;10&nbsp;16:55:48&nbsp;2016</span>
    <span class="description">gregoa [...] cpan.org -  Cc GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;01&nbsp;12:48:39&nbsp;2016</span>
    <span class="description">tsibley [...] cpan.org -  Cc TSIBLEY added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;02&nbsp;09:53:04&nbsp;2017</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> oalders [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 11 08:04:59 2016, SHLOMIF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The tests for this collection of modules started failing. Please look
&gt; into fixing them.
</div>
I&#39;m getting these failures as well.  See attached &#39;cpanm&#39; build log built with perl 5 blead.

#####
$ bin/perl -v | head -2 | tail -1
This is perl 5, version 26, subversion 0 &#40;v5.26.0 &#40;v5.25.11-27-g1b92e69&#41;&#41; built for x86_64-linux
#####

CJM:  I stumbled across these problems while attempting to use &#39;dzil&#39; to assess the perl-5.26.0-readiness of the HTML-Tree distribution.

Dist-Zilla-Role-ModuleInfo appears to be a prerequisite for Dist-Zilla-Plugin-TemplateCJM.

#####
$ /home/jkeenan/testing/blead/bin/dzil build
Required plugin Dist::Zilla::Plugin::MatchManifest isn&#39;t installed.

Run &#39;dzil authordeps&#39; to see a list of all required plugins.
You can pipe the list to your CPAN client to install or update them:

    dzil authordeps --missing | cpanm

$ /home/jkeenan/testing/blead/bin/dzil authordeps --missing | /home/jkeenan/testing/blead/bin/cpanm
...
Fetching <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpan.org/authors/id/C/CJ/CJM/Dist-Zilla-Plugin-TemplateCJM-5.001.tar.gz">http://www.cpan.org/authors/id/C/CJ/CJM/Dist-Zilla-Plugin-TemplateCJM-5.001.tar.gz</a></span> ... OK
Configuring Dist-Zilla-Plugin-TemplateCJM-5.001 ... OK
==&gt; Found dependencies: Dist::Zilla::Role::ModuleInfo
! Installing the dependencies failed: Module &#39;Dist::Zilla::Role::ModuleInfo&#39; is not installed
! Bailing out the installation for Dist-Zilla-Plugin-TemplateCJM-5.001.
5 distributions installed
#####

Dist-Zilla-Plugin-TemplateCJM, in turn, is identified as a prerequisite for &#39;dzil build&#39; when attempting to build the HTML-Tree distribution:

#####
$ /home/jkeenan/testing/blead/bin/dzil authordeps --missing
Pod::Weaver::Plugin::EnsureUniqueSections
Pod::Weaver::Section::AllowOverride
Pod::Weaver::Section::Template
Dist::Zilla::Plugin::ArchiveRelease
Dist::Zilla::Plugin::MatchManifest
Dist::Zilla::Plugin::ModuleBuild::Custom
Dist::Zilla::Plugin::RecommendedPrereqs
Dist::Zilla::Plugin::TemplateCJM
Dist::Zilla::Plugin::Test::PrereqsFromMeta
#####

If we cannot use &#39;dzil&#39; to build and test HTML-Tree, then many other CPAN distributions for which parts of HTML-Tree are prerequisite &#40;e.g., WWW-Mechanize&#41; will be unable to install on perl-5.26.0, to be released later this month or in early May.

Hence, your prompt attention to this will be greatly appreciated.  Should you need assistance or need to share the maintenance burden by naming a COMAINT, please let us know.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Dist-Zilla-Role-ModuleInfo-cpanm-build.log.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">cpanm &#40;App::cpanminus&#41; 1.7042 on perl 5.026000 built for x86_64-linux
Work directory is /home/jkeenan/.cpanm/work/1491140041.19505
You have make /usr/bin/make
You have LWP 6.24
You have /bin/tar: tar &#40;GNU tar&#41; 1.28
Copyright &#40;C&#41; 2014 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://gnu.org/licenses/gpl.html">http://gnu.org/licenses/gpl.html</a></span>&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by John Gilmore and Jay Fenlason.
You have /usr/bin/unzip
Searching Dist::Zilla::Role::ModuleInfo &#40;&#41; on cpanmetadb ...
--&gt; Working on Dist::Zilla::Role::ModuleInfo
Fetching <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpan.org/authors/id/C/CJ/CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz">http://www.cpan.org/authors/id/C/CJ/CJM/Dist-Zilla-Plugins-CJM-4.27.tar.gz</a></span>
-&gt; OK
Unpacking Dist-Zilla-Plugins-CJM-4.27.tar.gz
Entering Dist-Zilla-Plugins-CJM-4.27
Checking configure dependencies from META.json
Checking if you have ExtUtils::MakeMaker 6.58 ... Yes &#40;7.24&#41;
Configuring Dist-Zilla-Plugins-CJM-4.27
Running Makefile.PL
Checking if your kit is complete...
Looks good
Generating a Unix-style Makefile
Writing Makefile for Dist::Zilla::Plugins::CJM
Writing MYMETA.yml and MYMETA.json
-&gt; OK
Checking dependencies from MYMETA.json ...
Checking if you have File::Temp 0.19 ... Yes &#40;0.2304&#41;
Checking if you have Parse::CPAN::Meta 0 ... Yes &#40;2.150010&#41;
Checking if you have File::Copy 0 ... Yes &#40;2.32&#41;
Checking if you have CPAN::Meta::Converter 2.101550 ... Yes &#40;2.150010&#41;
Checking if you have Moose 0 ... Yes &#40;2.2004&#41;
Checking if you have File::HomeDir 0.81 ... Yes &#40;1.00&#41;
Checking if you have List::Util 0 ... Yes &#40;1.47&#41;
Checking if you have version 0.77 ... Yes &#40;0.9917&#41;
Checking if you have Scalar::Util 0 ... Yes &#40;1.47&#41;
Checking if you have Path::Class 0 ... Yes &#40;0.37&#41;
Checking if you have Module::Metadata 0 ... Yes &#40;1.000033&#41;
Checking if you have Dist::Zilla::Plugin::InlineFiles 0 ... Yes &#40;6.009&#41;
Checking if you have Dist::Zilla::Plugin::MakeMaker 4.300009 ... Yes &#40;6.009&#41;
Checking if you have Moose::Role 0 ... Yes &#40;2.2004&#41;
Checking if you have Try::Tiny 0 ... Yes &#40;0.28&#41;
Checking if you have Test::More 0.88 ... Yes &#40;1.302078&#41;
Checking if you have namespace::autoclean 0 ... Yes &#40;0.28&#41;
Checking if you have Data::Dumper 0 ... Yes &#40;2.167&#41;
Checking if you have Dist::Zilla 4.300009 ... Yes &#40;6.009&#41;
Checking if you have Test::DZil 0 ... Yes &#40;6.009&#41;
Checking if you have CPAN::Meta::Requirements 2.121 ... Yes &#40;2.140&#41;
Checking if you have ExtUtils::MakeMaker 0 ... Yes &#40;7.24&#41;
Checking if you have File::pushd 0 ... Yes &#40;1.014&#41;
Checking if you have autodie 0 ... Yes &#40;2.29&#41;
Building and testing Dist-Zilla-Plugins-CJM-4.27
cp lib/Dist/Zilla/Plugin/Metadata.pm blib/lib/Dist/Zilla/Plugin/Metadata.pm
cp lib/Dist/Zilla/Plugin/ModuleBuild/Custom.pm blib/lib/Dist/Zilla/Plugin/ModuleBuild/Custom.pm
cp lib/Dist/Zilla/Plugin/GitVersionCheckCJM.pm blib/lib/Dist/Zilla/Plugin/GitVersionCheckCJM.pm
cp lib/Dist/Zilla/Plugin/Test/PrereqsFromMeta.pm blib/lib/Dist/Zilla/Plugin/Test/PrereqsFromMeta.pm
cp lib/Dist/Zilla/Plugin/RecommendedPrereqs.pm blib/lib/Dist/Zilla/Plugin/RecommendedPrereqs.pm
cp lib/Dist/Zilla/Plugin/MakeMaker/Custom.pm blib/lib/Dist/Zilla/Plugin/MakeMaker/Custom.pm
cp lib/Dist/Zilla/Plugin/VersionFromModule.pm blib/lib/Dist/Zilla/Plugin/VersionFromModule.pm
cp lib/Dist/Zilla/Role/HashDumper.pm blib/lib/Dist/Zilla/Role/HashDumper.pm
cp lib/Dist/Zilla/Role/ModuleInfo.pm blib/lib/Dist/Zilla/Role/ModuleInfo.pm
cp lib/Dist/Zilla/Plugin/ArchiveRelease.pm blib/lib/Dist/Zilla/Plugin/ArchiveRelease.pm
PERL_DL_NONLAZY=1 &#34;/home/jkeenan/testing/blead/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00-all_prereqs.t ...... ok
# Testing Dist-Zilla-Plugins-CJM 4.27
t/00-compile.t .......... ok
-&gt;file called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/arcrel.t line 82.
-&gt;file called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/arcrel.t line 85.
t/arcrel.t .............. ok
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
-&gt;subdir called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/gitvercheck.t line 99.
t/gitvercheck.t ......... ok
t/mb_custom.t ........... ok
t/metadata.t ............ ok
t/mm_custom.t ........... ok
-&gt;file called on a Dist::Zilla::Path object; this will cease to work in Dist::Zilla v7; downstream code should be updated to use Path::Tiny API, not Path::Class at t/recommendedprereqs.t line 23.

#   Failed test &#39;runtime recommends&#39;
#   at t/recommendedprereqs.t line 27.
#     Structures begin differing at:
#          $got = undef
#     $expected = HASH&#40;0x3db9408&#41;

#   Failed test &#39;test suggests&#39;
#   at t/recommendedprereqs.t line 38.
#     Structures begin differing at:
#          $got = undef
#     $expected = HASH&#40;0x3cbd2a0&#41;
# Looks like you failed 2 tests of 4.
t/recommendedprereqs.t .. 
Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
Failed 2/4 subtests 
t/vermod.t .............. ok

Test Summary Report
-------------------
t/recommendedprereqs.t &#40;Wstat: 512 Tests: 4 Failed: 2&#41;
  Failed tests:  1, 4
  Non-zero exit status: 2
Files=9, Tests=126,  7 wallclock secs &#40; 0.03 usr  0.00 sys +  5.34 cusr  0.32 csys =  5.69 CPU&#41;
Result: FAIL
Failed 1/9 test programs. 2/126 subtests failed.
Makefile:902: recipe for target &#39;test_dynamic&#39; failed
make: *** [test_dynamic] Error 255
-&gt; FAIL Installing Dist::Zilla::Role::ModuleInfo failed. See /home/jkeenan/.cpanm/work/1491140041.19505/build.log for details. Retry with --force to force install it.
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;15&nbsp;16:14:28&nbsp;2017</span>
    <span class="description">MSTEVENS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Aug 11 08:04:59 2016, SHLOMIF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The tests for this collection of modules started failing. Please look
&gt; into fixing them.
</div>

I&#39;m also seeing this problem on a fresh 5.26 install.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
