<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #51494 for Config-General: Variable interpolation change proposal.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #51494 for Config-General: Variable interpolation change proposal.</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Config-General">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Config-General">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Config-General">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Config-General">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Config-General">Config-General CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">51494</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Config-General">Config-General</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
folarte [...] peoplecall.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-7696-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-7697-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Interpolated.pm<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/690202/355268/Interpolated.pm">
Fri Nov 13 07:22:22 2009 (8.2k) by folarte [...] peoplecall.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=51494">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-690202" href="/Public/Bug/Display.html?id=51494#txn-690202">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;13&nbsp;07:22:22&nbsp;2009</span>
    <span class="description">folarte [...] peoplecall.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Variable interpolation change proposal.</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/690202/355265/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/355265">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The changes of variable interpolation valid chars in variable names in
2.38 broke some of my programs. After fixing them I took a look at the
code in Interpolated.pm from 2.44 and made two small changes:

1.- Changed single quote handling in interpolate, from a substitution to
a random string to a split in quotes and handling only even parts:

abcd&#39;def&#39;ghi&#39;jkl&#39;mn=&gt; split =&gt; interpolate in even &#40; abcd ghi mn &#41; join
again.

I think is a little clearer. Also, the rand&#40;&#41; solution can have
collisions &#40; unlikely, but it can &#41;.

Actually my solution will consider a misquoted tail &#40; abc&#39;def &#41; as
quoted, when the previous one will not. I don&#39;t know wether this is a
problem &#40; thinking on &lt;&lt; I don&#39;t do $X &gt;&gt; &#41;. Also, as the previous one I
unquote before parsing, so &lt;&lt; ${I_don&#39;t} ${you don&#39;t} &gt;&gt; will not expand
&#40; but this behaviour was also present in the previous solution &#41;.

2.- Change regexp from catching an optional open brace and then
conditionally catching the closing brace to matching an alternative
after $ , either an unquoted word definition or a quoted word
definition. This required a little change in the substitution code to
get either $2 or $3 as $var name. It&#39;s been done.

This change permits using diferent definitions for braced and unbraced
words. In the uploaded sample I use the pre-2.38 definition for unbrace,
which is similar to shell/perl notation, and anything not a closing
brace for braced.

This way you can do &#34;$HOME/tmp/$BASENAME.log&#34; but you are still allowed
to use &#34;${foo-bar}&#34;, &#34;${whatever you want.}&#34; and even ${} &#40; empty name
&#41;. I think this could be useful.

Notes:
a.- Not being familiar with patchs I&#39;ve uploaded the whole
Interpolated.pm file. Presently it passes all the tests in 2.44, I&#39;m
working in some more interpolation tests.
b.- The regulr expresions uses &#39;[^\}]*&#39; for braced var names, using
&#39;[a-zA-Z_0-9+.:,-]+&#39; would catch 2.38+ names.
c.- The chunk after the trailing single quote can easily be considered
unquoted. All that would be needed is to factorize the code for the s///
into another func &#40; to avoid duplication &#41; and, after the loop, doing
&#39;if &#40;scalar&#40;@values&#41;%2!=0&#41; { $values[-1]=~ substitute }.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Interpolated.pm</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/690202/355268/Interpolated.pm">Download Interpolated.pm</a><br />
<span class="downloadcontenttype">text/x-perl 8.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#
# Config::General::Interpolated - special Class based on Config::General
#
# Copyright &#40;c&#41; 2001 by Wei-Hon Chen &lt;plasmaball@pchome.com.tw&gt;.
# Copyright &#40;c&#41; 2000-2009 by Thomas Linden &lt;tlinden |AT| cpan.org&gt;.
# All Rights Reserved. Std. disclaimer applies.
# Artificial License, same as perl itself. Have fun.
#

package Config::General::Interpolated;
$Config::General::Interpolated::VERSION = &#34;2.11&#34;;

use strict;
use Carp;
use Config::General;
use Exporter &#40;&#41;;


# Import stuff from Config::General
use vars qw&#40;@ISA @EXPORT&#41;;
@ISA = qw&#40;Config::General Exporter&#41;;


sub new {
  #
  # overwrite new&#40;&#41; with our own version
  # and call the parent class new&#40;&#41;
  #

  croak &#34;Deprecated method Config::General::Interpolated::new&#40;&#41; called.\n&#34;
       .&#34;Use Config::General::new&#40;&#41; instead and set the -InterPolateVars flag.\n&#34;;
}



sub _set_regex {
  #
  # set the regex for finding vars
  #

  # the following regex is provided by Autrijus Tang
  # &lt;autrijus@autrijus.org&gt;, and I made some modifications.
  # thanx, autrijus. :&#41;
  my $regex = qr{
		 &#40;^|\G|[^\\]&#41;   # $1: can be the beginning of the line
		                #     or the beginning of next match
		                #     but can&#39;t begin with a &#39;\&#39;
		 \$		# dollar sign
                 &#40;?:            # Group alternative 
                    &#40;?: \{ &#40;[^\}]*&#41;  \} &#41; # $2, anything in braces.
                    | 
                    &#40; [a-zA-Z_]\w* &#41;      # $3: A traditional variable name
                 &#41;
	       }x;
  return $regex;
}


sub _interpolate  {
  #
  # interpolate a scalar value and keep the result
  # on the varstack.
  #
  # called directly by Config::General::_parse_value&#40;&#41;
  #
  my &#40;$this, $config, $key, $value&#41; = @_;

  # some dirty trick to circumvent single quoted vars to be interpolated
  # Quoted chunks will end up in odd positions.
  # Note, a trailing lone single quote will be treated as quoted, 
  # i.e., &#34;a&#39;b&#39;c&#39;d&#34; will treat d as quoted.
  my @values = split /&#39;/,$value, -1; ## get trailing fields also.

  for &#40;my $i = 0; $i&lt;=$#values; $i+=2&#41; {
      $values[$i] =~ s{$this-&gt;{regex}}{
    my $con = $1;
    my $var = defined&#40;$2&#41; ? $2 : $3;
    my $var_lc = $this-&gt;{LowerCaseNames} ? lc&#40;$var&#41; : $var;
    if &#40;exists $config-&gt;{__stack}-&gt;{$var_lc}&#41; {
      $con . $config-&gt;{__stack}-&gt;{$var_lc};
    }
    elsif &#40;$this-&gt;{InterPolateEnv}&#41; {
      # may lead to vulnerabilities, by default flag turned off
      if &#40;defined&#40;$ENV{$var}&#41;&#41; {
	$con . $ENV{$var};
      }
      else {
	$con;
      }
    }
    else {
      if &#40;$this-&gt;{StrictVars}&#41; {
	croak &#34;Use of uninitialized variable &#40;\$$var&#41; while loading config entry: $key = $value\n&#34;;
      }
      else {
	# be cool
	$con;
      }
    }
  }egx;
  }
 return join&#40;&#34;&#39;&#34;,@values&#41;;
};


sub _interpolate_hash {
  #
  # interpolate a complete hash and keep the results
  # on the varstack.
  #
  # called directly by Config::General::new&#40;&#41;
  #
  my &#40;$this, $config&#41; = @_;

  # bugfix rt.cpan.org#46184, moved code from _interpolate&#40;&#41; to here.
  if &#40;$this-&gt;{InterPolateEnv} &#38;&#38; defined&#40;%ENV&#41;&#41; {
    # may lead to vulnerabilities, by default flag turned off
    for my $key &#40;keys %ENV&#41;{
      $config-&gt;{__stack}-&gt;{$key}=$ENV{$key};
    }
  }

  $config = $this-&gt;_var_hash_stacker&#40;$config&#41;;

  return $config;
}

sub _var_hash_stacker {
  #
  # build a varstack of a given hash ref
  #
  my &#40;$this, $config&#41; = @_;

  foreach my $key &#40;keys %{$config}&#41; {
    next if&#40;$key eq &#34;__stack&#34;&#41;;
    if &#40;ref&#40;$config-&gt;{$key}&#41; eq &#34;ARRAY&#34; &#41; {
      $config-&gt;{$key} = $this-&gt;_var_array_stacker&#40;$config-&gt;{$key}, $key&#41;;
    }
    elsif &#40;ref&#40;$config-&gt;{$key}&#41; eq &#34;HASH&#34;&#41; {
      my $tmphash = $config-&gt;{$key};
      $tmphash-&gt;{__stack} = $config-&gt;{__stack};
      $config-&gt;{$key} = $this-&gt;_var_hash_stacker&#40;$tmphash&#41;;
    }
    else {
      # SCALAR
      $config-&gt;{__stack}-&gt;{$key} = $config-&gt;{$key};
    }
  }

  return $config;
}


sub _var_array_stacker {
  #
  # same as _var_hash_stacker but for arrayrefs
  #
  my &#40;$this, $config, $key&#41; = @_;

  my @new;

  foreach my $entry &#40;@{$config}&#41; {
    if &#40;ref&#40;$entry&#41; eq &#34;HASH&#34;&#41; {
      $entry = $this-&gt;_var_hash_stacker&#40;$entry&#41;;
    }
    elsif &#40;ref&#40;$entry&#41; eq &#34;ARRAY&#34;&#41; {
      # ignore this. Arrays of Arrays cannot be created/supported
      # with Config::General, because they are not accessible by
      # any key &#40;anonymous array-ref&#41;
      next;
    }
    else {
      #### $config-&gt;{__stack}-&gt;{$key} = $config-&gt;{$key};
      # removed. a array of scalars &#40;eg: option = [1,2,3]&#41; cannot
      # be used for interpolation &#40;which one shall we use?!&#41;, so
      # we ignore those types of lists.
      # found by fbicknel, fixes rt.cpan.org#41570
    }
    push @new, $entry;
  }

  return  \@new;
}

sub _clean_stack {
  #
  # recursively empty the variable stack
  #
  my &#40;$this, $config&#41; = @_;
  #return $config; # DEBUG
  foreach my $key &#40;keys %{$config}&#41; {
    if &#40;$key eq &#34;__stack&#34;&#41; {
      delete $config-&gt;{__stack};
      next;
    }
    if &#40;ref&#40;$config-&gt;{$key}&#41; eq &#34;ARRAY&#34; &#41; {
      $config-&gt;{$key} = $this-&gt;_clean_array_stack&#40;$config-&gt;{$key}&#41;;
    }
    elsif &#40;ref&#40;$config-&gt;{$key}&#41; eq &#34;HASH&#34;&#41; {
      $config-&gt;{$key} = $this-&gt;_clean_stack&#40;$config-&gt;{$key}&#41;;
    }
  }
  return $config;
}


sub _clean_array_stack {
  #
  # same as _var_hash_stacker but for arrayrefs
  #
  my &#40;$this, $config&#41; = @_;

  my @new;

  foreach my $entry &#40;@{$config}&#41; {
    if &#40;ref&#40;$entry&#41; eq &#34;HASH&#34;&#41; {
      $entry = $this-&gt;_clean_stack&#40;$entry&#41;;
    }
    elsif &#40;ref&#40;$entry&#41; eq &#34;ARRAY&#34;&#41; {
      # ignore this. Arrays of Arrays cannot be created/supported
      # with Config::General, because they are not accessible by
      # any key &#40;anonymous array-ref&#41;
      next;
    }
    push @new, $entry;
  }

  return  \@new;
}

1;

__END__


=head1 NAME

Config::General::Interpolated - Parse variables within Config files


=head1 SYNOPSIS

 use Config::General;
 $conf = new Config::General&#40;
    -ConfigFile      =&gt; &#39;configfile&#39;,
    -InterPolateVars =&gt; 1
 &#41;;

=head1 DESCRIPTION

This is an internal module which makes it possible to interpolate
Perl style variables in your config file &#40;i.e. C&lt;$variable&gt;
or C&lt;${variable}&gt;&#41;.

Normally you don&#39;t call it directly.


=head1 VARIABLES

Variables can be defined everywhere in the config and can be used
afterwards as the value of an option. Variables cannot be used as
keys or as part of keys.

If you define a variable inside
a block or a named block then it is only visible within this block or
within blocks which are defined inside this block. Well - let&#39;s take a
look to an example:

 # sample config which uses variables
 basedir   = /opt/ora
 user      = t_space
 sys       = unix
 &lt;table intern&gt;
     instance  = INTERN
     owner     = $user                 # &#34;t_space&#34;
     logdir    = $basedir/log          # &#34;/opt/ora/log&#34;
     sys       = macos
     &lt;procs&gt;
         misc1   = ${sys}_${instance}  # macos_INTERN
         misc2   = $user               # &#34;t_space&#34;
     &lt;/procs&gt;
 &lt;/table&gt;

This will result in the following structure:

 {
     &#39;basedir&#39; =&gt; &#39;/opt/ora&#39;,
     &#39;user&#39;    =&gt; &#39;t_space&#39;
     &#39;sys&#39;     =&gt; &#39;unix&#39;,
     &#39;table&#39;   =&gt; {
	  &#39;intern&#39; =&gt; {
	        &#39;sys&#39;      =&gt; &#39;macos&#39;,
	        &#39;logdir&#39;   =&gt; &#39;/opt/ora/log&#39;,
	        &#39;instance&#39; =&gt; &#39;INTERN&#39;,
	        &#39;owner&#39; =&gt; &#39;t_space&#39;,
	        &#39;procs&#39; =&gt; {
		     &#39;misc1&#39; =&gt; &#39;macos_INTERN&#39;,
		     &#39;misc2&#39; =&gt; &#39;t_space&#39;
            }
	 }
     }

As you can see, the variable B&lt;sys&gt; has been defined twice. Inside
the &lt;procs&gt; block a variable ${sys} has been used, which then were
interpolated into the value of B&lt;sys&gt; defined inside the &lt;table&gt;
block, not the sys variable one level above. If sys were not defined
inside the &lt;table&gt; block then the &#34;global&#34; variable B&lt;sys&gt; would have
been used instead with the value of &#34;unix&#34;.

Variables inside double quotes will be interpolated, but variables
inside single quotes will B&lt;not&gt; interpolated. This is the same
behavior as you know of Perl itself.

In addition you can surround variable names with curly braces to
avoid misinterpretation by the parser.

=head1 SEE ALSO

L&lt;Config::General&gt;

=head1 AUTHORS

 Thomas Linden &lt;tlinden |AT| cpan.org&gt;
 Autrijus Tang &lt;autrijus@autrijus.org&gt;
 Wei-Hon Chen &lt;plasmaball@pchome.com.tw&gt;

=head1 COPYRIGHT

Copyright 2001 by Wei-Hon Chen E&lt;lt&gt;plasmaball@pchome.com.twE&lt;gt&gt;.
Copyright 2002-2009 by Thomas Linden &lt;tlinden |AT| cpan.org&gt;.

This program is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.

See L&lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/perl/misc/Artistic.html">http://www.perl.com/perl/misc/Artistic.html</a></span>&gt;

=head1 VERSION

2.11

=cut

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-757675" href="/Public/Bug/Display.html?id=51494#txn-757675">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;02&nbsp;17:34:11&nbsp;2010</span>
    <span class="description">tlinden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/757675/391840/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/391840">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 14b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">fixed in 2.45.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-757677" href="/Public/Bug/Display.html?id=51494#txn-757677">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;02&nbsp;17:34:12&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-757678" href="/Public/Bug/Display.html?id=51494#txn-757678">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;02&nbsp;17:34:12&nbsp;2010</span>
    <span class="description">tlinden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.331662</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
