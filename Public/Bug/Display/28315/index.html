<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #28315 for Device-Cdio: Device-Cdio doesn&#39;t work with libcdio 0.78</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #28315 for Device-Cdio: Device-Cdio doesn&#39;t work with libcdio 0.78</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Device-Cdio">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Device-Cdio">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Device-Cdio">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Device-Cdio">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Device-Cdio">Device-Cdio CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">28315</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Device-Cdio">Device-Cdio</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Rocky Bernstein
    (no email address)

    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
martin.ferrari [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38370-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-38371-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




02_wrong_function_name.dpatch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/347372/155897/02_wrong_function_name.dpatch">
Sun Jul 22 17:10:32 2007 (922b) by martin.ferrari [...] gmail.com
</a>
</font></li>
</ul>


03_version_information_in_swig.dpatch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/347372/155898/03_version_information_in_swig.dpatch">
Sun Jul 22 17:10:32 2007 (2.4k) by martin.ferrari [...] gmail.com
</a>
</font></li>
</ul>


04_wrong_handling_of_output_parameters.dpatch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/347372/155899/04_wrong_handling_of_output_parameters.dpatch">
Sun Jul 22 17:10:32 2007 (4.4k) by martin.ferrari [...] gmail.com
</a>
</font></li>
</ul>


libcdio-fail.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/350081/157352/libcdio-fail.txt">
Tue Jul 31 23:23:09 2007 (2.5k) by Rocky Bernstein
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=28315">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-345546" href="/Public/Bug/Display.html?id=28315#txn-345546">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;17&nbsp;02:32:25&nbsp;2007</span>
    <span class="description">martin.ferrari [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Device-Cdio doesn&#39;t work with libcdio 0.78</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 17 Jul 2007 07:32:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Device-Cdio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;MartÃ­n Ferrari&#34; &lt;martin.ferrari [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/345546/154918/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/154918">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi, I&#39;ve tried building the modules with the latest libcdio and it
doesn&#39;t work correctly, because you&#39;re using incorrectly the SWIG
language.

From <span class="clickylink"><a target="new" rel="nofollow" href="http://www.swig.org/Doc1.1/HTML/SWIG.html#n8">http://www.swig.org/Doc1.1/HTML/SWIG.html#n8</a></span>:

The C preprocessor version supports any constant integral expression
as an argument to #if, but SWIG does not yet contain an expression
evaluator so this is not currently supported.

So, constructs like this doesn&#39;t work:
#if LIBCDIO_VERSION_NUM &gt; 76
#if DEBUGGING

Also, there is a mistake with this new function &#40;it seems that the
error is in libcdio, but anyway...&#41;: iso9660_find_ifs_lsn doesn&#39;t
exist, its name is iso9660_ifs_find_lsn

Below is the patch I&#39;ve used to build with 0.78, but is no good for
older versions,.

--- libdevice-cdio-perl-0.2.4.orig/device.swg
+++ libdevice-cdio-perl-0.2.4/device.swg
@@ -81,7 +81,6 @@
 */
 void cdio_destroy&#40;CdIo_t *p_cdio&#41;;

-#if LIBCDIO_VERSION_NUM &gt; 76
 /* cdio_driver_errmsg first appears in 0.77 code
 */
 %rename cdio_driver_errmsg driver_errmsg;
@@ -90,35 +89,6 @@
   @return the string information about drc
 */
 const char *cdio_driver_errmsg&#40;driver_return_code_t drc&#41;;
-#else
-const char *driver_errmsg&#40;driver_return_code_t drc&#41;;
-%inline %{
-const char *
-driver_errmsg&#40;driver_return_code_t drc&#41;
-{
-  switch&#40;drc&#41; {
-  case DRIVER_OP_SUCCESS:
-    return &#34;driver operation was successful&#34;;
-  case DRIVER_OP_ERROR:
-    return &#34;driver I/O error&#34;;
-  case DRIVER_OP_UNSUPPORTED:
-    return &#34;driver operatation not supported&#34;;
-  case DRIVER_OP_UNINIT:
-    return &#34;driver not initialized&#34;;
-  case DRIVER_OP_NOT_PERMITTED:
-    return &#34;driver operatation not permitted&#34;;
-  case DRIVER_OP_BAD_PARAMETER:
-    return &#34;bad parameter passed&#34;;
-  case DRIVER_OP_BAD_POINTER:
-    return &#34;bad pointer to memory area&#34;;
-  case DRIVER_OP_NO_DRIVER:
-    return &#34;driver not available&#34;;
-  default:
-    return &#34;unknown or bad driver return status&#34;;
-  }
-}
-%}
-#endif /* LIBCDIO_VERSION_NUM &gt; 76 */
 /*
 eject_media&#40;cdio&#41;-&gt;return_code

--- libdevice-cdio-perl-0.2.4.orig/read.swg
+++ libdevice-cdio-perl-0.2.4/read.swg
@@ -148,13 +148,13 @@
   }
   p_buf = calloc&#40;1, i_size&#41;;

-#if DEBUGGING
+#ifdef DEBUGGING
   printf&#40;&#34;p_cdio: %x, i_size: %d, lsn: %d, blocksize %d, blocks %d\n&#34;,
         p_cdio, i_size, i_lsn, i_blocksize, i_blocks&#41;;
 #endif
   *drc = cdio_read_data_sectors &#40;p_cdio, p_buf, i_lsn,
                                 i_blocksize, i_blocks&#41;;
-#if DEBUGGING
+#ifdef DEBUGGING
   printf&#40;&#34;drc: %d\n&#34;, drc&#41;;
 #endif
   if &#40;*drc &lt; 0&#41; {
--- libdevice-cdio-perl-0.2.4.orig/perliso9660.swg
+++ libdevice-cdio-perl-0.2.4/perliso9660.swg
@@ -60,11 +60,7 @@
 %constant long int RECORD               = ISO_RECORD;

 /* When version 0.77 comes out, require it and fix this fix this. */
-#if 0
 %constant long int PROTECTION           = ISO_PROTECTION;
-#else
-%constant long int PROTECTION           = 16;
-#endif

 %constant long int DRESERVED1           = ISO_DRESERVED1;
 %constant long int DRESERVED2           = ISO_DRESERVED2;
@@ -557,16 +553,14 @@
 IsoStat_t *iso9660_find_fs_lsn&#40;CdIo_t *p_cdio, lsn_t i_lsn&#41;;


-#if LIBCDIO_VERSION_NUM &gt; 76
 /*!
    Given a directory pointer, find the filesystem entry that contains
    lsn and return information about it.

    Returns stat_t of entry if we found lsn, or NULL otherwise.
  */
-%rename iso9660_find_ifs_lsn ifs_find_lsn;
-IsoStat_t *iso9660_find_ifs_lsn&#40;const iso9660_t *p_iso, lsn_t i_lsn&#41;;
-#endif
+%rename iso9660_ifs_find_lsn ifs_find_lsn;
+IsoStat_t *iso9660_ifs_find_lsn&#40;const iso9660_t *p_iso, lsn_t i_lsn&#41;;


 /*!
@@ -673,13 +667,11 @@
 %newobject iso9660_dir_to_name; // free malloc&#39;d return value
 char * iso9660_dir_to_name &#40;const iso9660_dir_t *p_iso9660_dir&#41;;

-#if LIBCDIO_VERSION_NUM &gt; 76
 /*!
   Returns a POSIX mode for a given p_iso_dirent.
 */
 %rename iso9660_get_posix_filemode get_posix_filemode;
 mode_t iso9660_get_posix_filemode&#40;const iso9660_stat_t *p_iso_dirent&#41;;
-#endif

 /*!
   Return a string containing the preparer id with trailing



-- 
MartÃ­n Ferrari
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-347372" href="/Public/Bug/Display.html?id=28315#txn-347372">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;22&nbsp;17:10:31&nbsp;2007</span>
    <span class="description">martin.ferrari [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28315] AutoReply: Device-Cdio doesn&#39;t work with libcdio 0.78</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Jul 2007 22:10:15 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Device-Cdio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;MartÃ­n Ferrari&#34; &lt;martin.ferrari [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/347372/155896/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/155896">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 332b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve been able to fix the problem reported. I misread swig
documentation &#40;I was reading an old manual&#41;, so I could make the
conditionals work properly. I&#39;ve also solved a couple of other issues
I found. I&#39;m attaching all the patches, they have a little description
at the begining. Hope you find them useful.



-- 
MartÃ­n Ferrari
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/347372/155897/02_wrong_function_name.dpatch">Download 02_wrong_function_name.dpatch</a><br />
<span class="downloadcontenttype">application/octet-stream 922b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/347372/155898/03_version_information_in_swig.dpatch">Download 03_version_information_in_swig.dpatch</a><br />
<span class="downloadcontenttype">application/octet-stream 2.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/347372/155899/04_wrong_handling_of_output_parameters.dpatch">Download 04_wrong_handling_of_output_parameters.dpatch</a><br />
<span class="downloadcontenttype">application/octet-stream 4.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-349670" href="/Public/Bug/Display.html?id=28315#txn-349670">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;31&nbsp;06:32:41&nbsp;2007</span>
    <span class="description">Rocky Bernstein -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-349694" href="/Public/Bug/Display.html?id=28315#txn-349694">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;31&nbsp;07:14:43&nbsp;2007</span>
    <span class="description">Rocky Bernstein -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/349694/157120/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157120">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 746b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 22 17:10:31 2007, martin.ferrari@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve been able to fix the problem reported. I misread swig
&gt; documentation &#40;I was reading an old manual&#41;, so I could make the
&gt; conditionals work properly. I&#39;ve also solved a couple of other issues
&gt; I found. I&#39;m attaching all the patches, they have a little description
&gt; at the begining. Hope you find them useful.
&gt; 
&gt; 
&gt; 
</div>
Sorry I didn&#39;t reply sooner. Thanks for the patches. I&#39;ve applied the
BUILD.PL patch on the theory that it didn&#39;t break things for me. As for
the other patches, what&#39;s in CVS is without a doubt very screwy if not
wrong. But I&#39;ll have to look your changes later.

As for the bugs in libcdio 0.78, the errno assignment were added to
libcdio&#39;s CVS last March.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-349695" href="/Public/Bug/Display.html?id=28315#txn-349695">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;31&nbsp;07:14:45&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-349952" href="/Public/Bug/Display.html?id=28315#txn-349952">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;31&nbsp;12:17:24&nbsp;2007</span>
    <span class="description">martin.ferrari [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28315] Device-Cdio doesn&#39;t work with libcdio 0.78</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 31 Jul 2007 17:16:57 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Device-Cdio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;MartÃ­n Ferrari&#34; &lt;martin.ferrari [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/349952/157261/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157261">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Rocky,

On 7/31/07, Rocky Bernstein via RT &lt;bug-Device-Cdio@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry I didn&#39;t reply sooner. Thanks for the patches. I&#39;ve applied the
&gt; BUILD.PL patch on the theory that it didn&#39;t break things for me. As for
</div>
Great!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the other patches, what&#39;s in CVS is without a doubt very screwy if not
&gt; wrong. But I&#39;ll have to look your changes later.
</div>
Sorry, I don&#39;t understand... what&#39;s wrong, the code in CVS or how my
patches apply? In any case, I was working with the release, not with
the CVS, so I haven&#39;t tested that.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As for the bugs in libcdio 0.78, the errno assignment were added to
&gt; libcdio&#39;s CVS last March.
</div>
Ah, same thing here.

BTW, yesterday I found an error in memory handling in the
name_translate functions in the perl package, that leads to a buffer
overflow in some cases &#40;when the translated name is as long as the
original&#41;, the patch is very simple:

--- libdevice-cdio-perl~/perliso9660.swg        2007-07-30
18:38:48.000000000 +0100
+++ libdevice-cdio-perl/perliso9660.swg 2007-07-30 18:39:18.000000000 +0100
@@ -445,7 +445,7 @@
 %inline %{
 char *
 name_translate&#40;const char *psz_oldname&#41; {
-  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;&#41;;
+  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;+1&#41;;
   iso9660_name_translate&#40;psz_oldname, psz_newname&#41;;
   return psz_newname;
 }
@@ -470,7 +470,7 @@
 %inline %{
 char *
 name_translate_ext&#40;const char *psz_oldname, uint8_t i_joliet_level&#41; {
-  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;&#41;;
+  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;+1&#41;;
   iso9660_name_translate_ext&#40;psz_oldname, psz_newname, i_joliet_level&#41;;
   return psz_newname;
 }


-- 
MartÃ­n Ferrari
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350081" href="/Public/Bug/Display.html?id=28315#txn-350081">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;31&nbsp;23:23:09&nbsp;2007</span>
    <span class="description">Rocky Bernstein -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/350081/157349/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157349">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 31 12:17:24 2007, martin.ferrari@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Rocky,
&gt; 
&gt; On 7/31/07, Rocky Bernstein via RT &lt;bug-Device-Cdio@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; Sorry I didn&#39;t reply sooner. Thanks for the patches. I&#39;ve applied the
&gt; &gt; BUILD.PL patch on the theory that it didn&#39;t break things for me. As for
</div>&gt; 
&gt; Great!
&gt; 
<div class="message-stanza open">&gt; &gt; the other patches, what&#39;s in CVS is without a doubt very screwy if not
&gt; &gt; wrong. But I&#39;ll have to look your changes later.
</div>&gt; 
&gt; Sorry, I don&#39;t understand... what&#39;s wrong, the code in CVS or how my
&gt; patches apply? In any case, I was working with the release, not with
&gt; the CVS, so I haven&#39;t tested that.
</div>
I&#39;ve tried 04_wrong_handling_of_output_parameters.dpatch on two
computers and get the same failure in running &#34;make test&#34;. I&#39;ll &#40;try to&#41;
attach part of the log. It&#39;s possible or and even likely that the error
is in fact in the regression test rather than the patch. But I&#39;ll have
to look at later when I have more time available.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; As for the bugs in libcdio 0.78, the errno assignment were added to
&gt; &gt; libcdio&#39;s CVS last March.
</div>&gt; 
&gt; Ah, same thing here.
&gt; 
&gt; BTW, yesterday I found an error in memory handling in the
&gt; name_translate functions in the perl package, that leads to a buffer
&gt; overflow in some cases &#40;when the translated name is as long as the
&gt; original&#41;, the patch is very simple:
&gt; 
&gt; --- libdevice-cdio-perl~/perliso9660.swg        2007-07-30
&gt; 18:38:48.000000000 +0100
&gt; +++ libdevice-cdio-perl/perliso9660.swg 2007-07-30 18:39:18.000000000
</div>+0100
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; @@ -445,7 +445,7 @@
&gt;  %inline %{
&gt;  char *
&gt;  name_translate&#40;const char *psz_oldname&#41; {
&gt; -  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;&#41;;
&gt; +  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;+1&#41;;
&gt;    iso9660_name_translate&#40;psz_oldname, psz_newname&#41;;
&gt;    return psz_newname;
&gt;  }
&gt; @@ -470,7 +470,7 @@
&gt;  %inline %{
&gt;  char *
&gt;  name_translate_ext&#40;const char *psz_oldname, uint8_t i_joliet_level&#41; {
&gt; -  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;&#41;;
&gt; +  char *psz_newname=calloc&#40;sizeof&#40;char&#41;, strlen&#40;psz_oldname&#41;+1&#41;;
&gt;    iso9660_name_translate_ext&#40;psz_oldname, psz_newname, i_joliet_level&#41;;
&gt;    return psz_newname;
&gt;  }
&gt; 
&gt; 
</div>
Thanks, again! I&#39;ve applied this patch and have created a THANKS file.
&#40;You also have the distinction of being the first one to post anything
here.&#41; 
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350081/157352/libcdio-fail.txt">Download libcdio-fail.txt</a><br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">$ make test
/usr/bin/perl Build --makefile_env_macros 1 test
t/00.load............ok 1/1# Testing Device::Cdio 0.2.4
t/00.load............ok
t/01.pod-coverage....skipped
        all skipped: Test::Pod::Coverage 1.04 required for testing POD coverage
t/01.pod.............skipped
        all skipped: Test::Pod 1.14 required for testing POD
t/02.default.........ok
t/05.ops.............ok
t/06.bincue..........ok
t/06.image...........ok
t/06.toc.............ok
t/07.iso.............ok
t/07.iso1............NOK 5
#   Failed test &#39;ISO 9660 file stats&#39;
#   in t/07.iso1.t at line 49.
#     Structures begin differing at:
#          $got-&gt;[0]{LSN} = &#39;/&#39;
#     $expected-&gt;[0]{LSN} = &#39;23&#39;
# Looks like you failed 1 test of 5.
t/07.iso1............dubious
	Test returned status 1 &#40;wstat 256, 0x100&#41;
DIED. FAILED test 5
	Failed 1/5 tests, 80.00% okay
t/07.iso2............NOK 2
#   Failed test &#39;CD 9660 file stats: find_lsn&#40;26&#41;&#39;
#   in t/07.iso2.t at line 39.
#     Structures begin differing at:
#          $got-&gt;{sec_size} = &#39;26&#39;
#     $expected-&gt;{sec_size} = &#39;9&#39;
t/07.iso2............NOK 3
#   Failed test &#39;CD 9660 file stats: stat&#40;&#39;COPYING&#41;&#39;&#39;
#   in t/07.iso2.t at line 43.
#     Structures begin differing at:
#          $got-&gt;{LSN} = &#39;/COPYING&#39;
#     $expected-&gt;{LSN} = &#39;26&#39;
t/07.iso2............NOK 4
#   Failed test &#39;Read directory: readdir&#40;&#39;/&#39;&#41;&#39;
#   in t/07.iso2.t at line 56.
#     Structures begin differing at:
#          $got-&gt;[0]{LSN} = &#39;/&#39;
#     $expected-&gt;[0]{LSN} = &#39;23&#39;
Argument &#34;COPYING&#34; isn&#39;t numeric in division &#40;/&#41; at t/07.iso2.t line 60.
# Looks like you failed 3 tests of 5.
t/07.iso2............dubious
	Test returned status 3 &#40;wstat 768, 0x300&#41;
DIED. FAILED tests 2-4
	Failed 3/5 tests, 40.00% okay
t/07.iso3............NOK 2
#   Failed test &#39;CD 9660 file stats&#39;
#   in t/07.iso3.t at line 39.
#     Structures begin differing at:
#          $got-&gt;{LSN} = &#39;copying&#39;
#     $expected-&gt;{LSN} = &#39;24&#39;
Argument &#34;COPYING.;1&#34; isn&#39;t numeric in division &#40;/&#41; at t/07.iso3.t line 43.
# Looks like you failed 1 test of 3.
t/07.iso3............dubious
	Test returned status 1 &#40;wstat 256, 0x100&#41;
DIED. FAILED test 2
	Failed 1/3 tests, 66.67% okay
t/10.cdda............ok
t/10.read............ok
Failed Test Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/07.iso1.t    1   256     5    1  20.00%  5
t/07.iso2.t    3   768     5    3  60.00%  2-4
t/07.iso3.t    1   256     3    1  33.33%  2
2 tests skipped.
Failed 3/14 test scripts, 78.57% okay. 5/85 subtests failed, 94.12% okay.
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350083" href="/Public/Bug/Display.html?id=28315#txn-350083">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;31&nbsp;23:58:10&nbsp;2007</span>
    <span class="description">martin.ferrari [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28315] Device-Cdio doesn&#39;t work with libcdio 0.78</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 1 Aug 2007 04:57:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Device-Cdio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;MartÃ­n Ferrari&#34; &lt;martin.ferrari [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350083/157354/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157354">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 952b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi again,

On 8/1/07, Rocky Bernstein via RT &lt;bug-Device-Cdio@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve tried 04_wrong_handling_of_output_parameters.dpatch on two
&gt; computers and get the same failure in running &#34;make test&#34;. I&#39;ll &#40;try to&#41;
&gt; attach part of the log. It&#39;s possible or and even likely that the error
&gt; is in fact in the regression test rather than the patch. But I&#39;ll have
&gt; to look at later when I have more time available.
</div>
The problems you&#39;re seeing now were what made me write that patch in
the first place: the perl glue was returning an extra value, so the
hash was wrongly built.
Are you sure that the patch was correctly applied both to the .swg and
the .pm files?

If that&#39;s correct, please describe me your configuration so I can try
to debug the problem.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks, again! I&#39;ve applied this patch and have created a THANKS file.
&gt; &#40;You also have the distinction of being the first one to post anything
&gt; here.&#41;
</div>
Great! :&#41;

-- 
MartÃ­n Ferrari
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350366" href="/Public/Bug/Display.html?id=28315#txn-350366">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;01&nbsp;22:26:42&nbsp;2007</span>
    <span class="description">Rocky Bernstein -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/350366/157499/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157499">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 31 23:58:10 2007, martin.ferrari@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi again,
&gt; 
&gt; On 8/1/07, Rocky Bernstein via RT &lt;bug-Device-Cdio@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; I&#39;ve tried 04_wrong_handling_of_output_parameters.dpatch on two
&gt; &gt; computers and get the same failure in running &#34;make test&#34;. I&#39;ll &#40;try to&#41;
&gt; &gt; attach part of the log. It&#39;s possible or and even likely that the error
&gt; &gt; is in fact in the regression test rather than the patch. But I&#39;ll have
&gt; &gt; to look at later when I have more time available.
</div>&gt; 
&gt; The problems you&#39;re seeing now were what made me write that patch in
&gt; the first place: the perl glue was returning an extra value, so the
&gt; hash was wrongly built.
&gt; Are you sure that the patch was correctly applied both to the .swg and
&gt; the .pm files?
&gt; 
&gt; If that&#39;s correct, please describe me your configuration so I can try
&gt; to debug the problem.
&gt; 
<div class="message-stanza open">&gt; &gt; Thanks, again! I&#39;ve applied this patch and have created a THANKS file.
&gt; &gt; &#40;You also have the distinction of being the first one to post anything
&gt; &gt; here.&#41;
</div>&gt; 
&gt; Great! :&#41;
&gt; 
</div>
I&#39;ve put the current CVS and patches at
<span class="clickylink"><a target="new" rel="nofollow" href="http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz">http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz</a></span>

You can check what&#39;s there if you want. The only glitch I had is that I
had to install before testing because the shared libraries built by SWIG
were not getting loaded in the tests. I&#39;m not sure why not, probably not
finding the local blib, but that&#39;s not relevant here. 

Debian uses a very old version of libcdio and I believe Nicolas Boullis
will be putting a new version out sometime soon. The &#34;stable&#34; version of
libcdio that Debian is uses I would have liked phased out 2 years ago,
but such is life. I&#39;d appreciate it if the Perl package could use
libcdio 0.78.2 &#40;with the CVS strotol patch from last March which will
presumably get into the next Debian release&#41; and not the buggy libcdio
circa 0.76. It also means less hassle in code maintanance and potential
problems for users. 

Thanks. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-350368" href="/Public/Bug/Display.html?id=28315#txn-350368">#</a>      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;01&nbsp;22:52:33&nbsp;2007</span>
    <span class="description">martin.ferrari [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28315] Device-Cdio doesn&#39;t work with libcdio 0.78</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 2 Aug 2007 03:52:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Device-Cdio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;MartÃ­n Ferrari&#34; &lt;martin.ferrari [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/350368/157501/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/157501">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi ROcky,

On 8/2/07, Rocky Bernstein via RT &lt;bug-Device-Cdio@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve put the current CVS and patches at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz">http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz</a></span>
&gt;
&gt; You can check what&#39;s there if you want. The only glitch I had is that I
&gt; had to install before testing because the shared libraries built by SWIG
&gt; were not getting loaded in the tests. I&#39;m not sure why not, probably not
&gt; finding the local blib, but that&#39;s not relevant here.
</div>
I&#39;ll give it a try.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Debian uses a very old version of libcdio and I believe Nicolas Boullis
&gt; will be putting a new version out sometime soon. The &#34;stable&#34; version of
&gt; libcdio that Debian is uses I would have liked phased out 2 years ago,
&gt; but such is life. I&#39;d appreciate it if the Perl package could use
&gt; libcdio 0.78.2 &#40;with the CVS strotol patch from last March which will
&gt; presumably get into the next Debian release&#41; and not the buggy libcdio
&gt; circa 0.76. It also means less hassle in code maintanance and potential
&gt; problems for users.
</div>
I&#39;ve been talking with Nicolas, I also want to have 0.78 in debian. I
have built a private package to test the perl module against it, and
that&#39;s why I made most of the patches. I think he&#39;ll upload it soon.

-- 
MartÃ­n Ferrari
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-352273" href="/Public/Bug/Display.html?id=28315#txn-352273">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;09&nbsp;08:51:00&nbsp;2007</span>
    <span class="description">martin.ferrari [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #28315] Device-Cdio doesn&#39;t work with libcdio 0.78</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 9 Aug 2007 13:50:36 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Device-Cdio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;MartÃ­n Ferrari&#34; &lt;martin.ferrari [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/352273/158435/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/158435">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi again,

On 8/2/07, MartÃ­n Ferrari &lt;martin.ferrari@gmail.com&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 8/2/07, Rocky Bernstein via RT &lt;bug-Device-Cdio@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt; &gt; I&#39;ve put the current CVS and patches at
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz">http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz</a></span>
&gt; &gt;
&gt; &gt; You can check what&#39;s there if you want. The only glitch I had is that I
&gt; &gt; had to install before testing because the shared libraries built by SWIG
&gt; &gt; were not getting loaded in the tests. I&#39;m not sure why not, probably not
&gt; &gt; finding the local blib, but that&#39;s not relevant here.
</div></div>
I&#39;ve just built it, adding my patches and it worked fine. All tests passed.

On a side note, I&#39;m having some problems with it &#40;using the lib for
other project&#41;. Maybe it&#39;s only a documentation problem and you can
help me.

On the perl side, &#40;this is a bug to me&#41;, the main ISO9660/I?FS.pm
don&#39;t inherit correctly &#40;there&#39;s no new method&#41; because you&#39;re not
&#34;use&#34;ing the ISA libs. On the same topic, you&#39;re @EXPORTing new in
some pms, which is a not nice namespace pollution.

A problem that I still couldn&#39;t resolve, was to understand the
difference between IFS and FS, I still don&#39;t get it...

And other problem that&#39;s hitting me, is that the find_lsn routine
returns only a relative filename, which is not useful at all, since I
cannot know in which directory it is!

-- 
MartÃ­n Ferrari
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-352832" href="/Public/Bug/Display.html?id=28315#txn-352832">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;12&nbsp;09:49:00&nbsp;2007</span>
    <span class="description">Rocky Bernstein -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/352832/158792/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/158792">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is straying pretty far from the what this system is about -- bug
tracking. In fact with respect to the bug, I doubt there&#39;s been any
progress at all. Your patches don&#39;t work for me and the changes don&#39;t
completely work for you.

For the other discussions I&#39;m not sure what the right forum is, probably
the libcdio devel mailing list. <span class="clickylink"><a target="new" rel="nofollow" href="https://savannah.gnu.org/mail/?group=libcdio">https://savannah.gnu.org/mail/?group=libcdio</a></span>

IFS and FS don&#39;t inherit because I don&#39;t think they should ;-&#41;. I&#39;ve
just updated FS.pm and IFS.pm to perhaps clarify better the difference
between them, perhaps rereading that will help. And finally as for
find_lsn not doing what you want, something should be added to the
libcdio library and I&#39;ve just done that as well. One can get this
information in Perl I think by starting with the statbuf and walking up
to root although I realize this is awkward which is why something was
just added to libcdio&#39;s CVS.

On Thu Aug 09 08:51:00 2007, martin.ferrari@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi again,
&gt; 
&gt; On 8/2/07, MartÃ­n Ferrari &lt;martin.ferrari@gmail.com&gt; wrote:
<div class="message-stanza open">&gt; &gt; On 8/2/07, Rocky Bernstein via RT &lt;bug-Device-Cdio@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; I&#39;ve put the current CVS and patches at
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz">http://bashdb.sf/net/Device-Cdio-0.2.5cvs.tar.gz</a></span>
&gt; &gt; &gt;
&gt; &gt; &gt; You can check what&#39;s there if you want. The only glitch I had is
</div></div></div>that I
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; had to install before testing because the shared libraries built
</div></div>by SWIG
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; were not getting loaded in the tests. I&#39;m not sure why not,
</div></div>probably not
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; finding the local blib, but that&#39;s not relevant here.
</div>&gt; 
&gt; I&#39;ve just built it, adding my patches and it worked fine. All tests
</div>passed.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On a side note, I&#39;m having some problems with it &#40;using the lib for
&gt; other project&#41;. Maybe it&#39;s only a documentation problem and you can
&gt; help me.
&gt; 
&gt; On the perl side, &#40;this is a bug to me&#41;, the main ISO9660/I?FS.pm
&gt; don&#39;t inherit correctly &#40;there&#39;s no new method&#41; because you&#39;re not
&gt; &#34;use&#34;ing the ISA libs. On the same topic, you&#39;re @EXPORTing new in
&gt; some pms, which is a not nice namespace pollution.
&gt; 
&gt; A problem that I still couldn&#39;t resolve, was to understand the
&gt; difference between IFS and FS, I still don&#39;t get it...
&gt; 
&gt; And other problem that&#39;s hitting me, is that the find_lsn routine
&gt; returns only a relative filename, which is not useful at all, since I
&gt; cannot know in which directory it is!
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-988517" href="/Public/Bug/Display.html?id=28315#txn-988517">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;16&nbsp;21:44:45&nbsp;2011</span>
    <span class="description">Rocky Bernstein -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/988517/514605/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/514605">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 186b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">libcdio 0.78 by now is pretty historical. Try again with 0.82 or 0.83git 
&#40;or 0.83 which will soon be out&#41; and version 0.3.0. If this is still a 
problem report the new results.

Thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-988519" href="/Public/Bug/Display.html?id=28315#txn-988519">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;16&nbsp;21:44:45&nbsp;2011</span>
    <span class="description">Rocky Bernstein -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.709166</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
