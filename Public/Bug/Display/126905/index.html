<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #126905 for Archive-Zip: t/25_traversal.t fails on FreeBSD systems &#40;1.62&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #126905 for Archive-Zip: t/25_traversal.t fails on FreeBSD systems &#40;1.62&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Archive-Zip/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Archive-Zip/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Archive-Zip/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Archive-Zip/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Archive-Zip">Archive-Zip CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">126905</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Archive-Zip/Active/">Archive-Zip</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-2540-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-2541-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;01:29:15&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> t/25_traversal.t fails on FreeBSD systems &#40;1.62&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On my FreeBSD smokers the test suite fails:

...
#   Failed test &#39;Tree extraction aborted&#39;
#   at t/25_traversal.t line 54.
#          got: &#39;0&#39;
#     expected: &#39;2&#39;

#   Failed test &#39;A file was not created in a symlinked directory&#39;
#   at t/25_traversal.t line 57.

#   Failed test &#39;link-dir removed&#39;
#   at t/25_traversal.t line 60.

#   Failed test &#39;A symlink to a directory created&#39;
#   at t/25_traversal.t line 65.

#   Failed test &#39;Member extraction without a local name aborted&#39;
#   at t/25_traversal.t line 69.
#          got: &#39;0&#39;
#     expected: &#39;2&#39;

#   Failed test &#39;A symlink to a directory removed&#39;
#   at t/25_traversal.t line 82.

#   Failed test &#39;Tree extraction aborted&#39;
#   at t/25_traversal.t line 141.
#          got: &#39;0&#39;
#     expected: &#39;2&#39;
# Looks like you failed 7 tests of 41.
t/25_traversal.t .............. 
Dubious, test returned 7 &#40;wstat 1792, 0x700&#41;
Failed 7/41 subtests 
        &#40;less 1 skipped subtest: 33 okay&#41;
...


Looking at <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Archive-Zip%201.62">http://matrix.cpantesters.org/?dist=Archive-Zip%201.62</a></span> it seems that also other BSD systems &#40;dragonfly, netbsd ...&#41; are affected.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;17:56:49&nbsp;2018</span>
    <span class="description">devans [...] macports.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 20 01:29:15 2018, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On my FreeBSD smokers the test suite fails:
&gt; 
&gt; ...
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 54.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A file was not created in a symlinked directory&#39;
&gt; #   at t/25_traversal.t line 57.
&gt; 
&gt; #   Failed test &#39;link-dir removed&#39;
&gt; #   at t/25_traversal.t line 60.
&gt; 
&gt; #   Failed test &#39;A symlink to a directory created&#39;
&gt; #   at t/25_traversal.t line 65.
&gt; 
&gt; #   Failed test &#39;Member extraction without a local name aborted&#39;
&gt; #   at t/25_traversal.t line 69.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A symlink to a directory removed&#39;
&gt; #   at t/25_traversal.t line 82.
&gt; 
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 141.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; # Looks like you failed 7 tests of 41.
&gt;  t/25_traversal.t ..............
&gt; Dubious, test returned 7 &#40;wstat 1792, 0x700&#41;
&gt;  Failed 7/41 subtests
&gt;         &#40;less 1 skipped subtest: 33 okay&#41;
&gt; ...
&gt; 
&gt; 
&gt; Looking at <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Archive-Zip%201.62">http://matrix.cpantesters.org/?dist=Archive-Zip%201.62</a></span> it
&gt; seems that also other BSD systems &#40;dragonfly, netbsd ...&#41; are
&gt; affected.
</div>
Same results observed on darwin:

macOS HighSierra
version 10.13.6 &#40;17G65&#41;
Xcode 9.4.1 Build 9F2000
Apple LLVM version 9.1.0 &#40;clang-902.0.39.2&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;20&nbsp;17:56:50&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;21&nbsp;15:28:06&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 20 01:29:15 2018, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On my FreeBSD smokers the test suite fails:
&gt; 
&gt; ...
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 54.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A file was not created in a symlinked directory&#39;
&gt; #   at t/25_traversal.t line 57.
&gt; 
&gt; #   Failed test &#39;link-dir removed&#39;
&gt; #   at t/25_traversal.t line 60.
&gt; 
&gt; #   Failed test &#39;A symlink to a directory created&#39;
&gt; #   at t/25_traversal.t line 65.
&gt; 
&gt; #   Failed test &#39;Member extraction without a local name aborted&#39;
&gt; #   at t/25_traversal.t line 69.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A symlink to a directory removed&#39;
&gt; #   at t/25_traversal.t line 82.
&gt; 
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 141.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; # Looks like you failed 7 tests of 41.
&gt;  t/25_traversal.t ..............
&gt; Dubious, test returned 7 &#40;wstat 1792, 0x700&#41;
&gt;  Failed 7/41 subtests
&gt;         &#40;less 1 skipped subtest: 33 okay&#41;
&gt; ...
&gt; 
&gt; 
&gt; Looking at <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Archive-Zip%201.62">http://matrix.cpantesters.org/?dist=Archive-Zip%201.62</a></span> it
&gt; seems that also other BSD systems &#40;dragonfly, netbsd ...&#41; are
&gt; affected.
</div>
Same results on FreeBSD-11.1:

#####
[analysis] $ ~/bin/perl/dumpjson PHRED.Archive-Zip-1.62.log.json
{
  author =&gt; &#34;PHRED&#34;,
  dist =&gt; &#34;Archive-Zip&#34;,
  distname =&gt; &#34;Archive-Zip-1.62&#34;,
  distversion =&gt; 1.62,
  grade =&gt; &#34;FAIL&#34;,
  prereqs =&gt; undef,
  test_output =&gt; [
    &#34;Building and testing Archive-Zip-1.62&#34;,
    &#34;cp lib/Archive/Zip/ZipFileMember.pm blib/lib/Archive/Zip/ZipFileMember.pm&#34;,
    &#34;cp lib/Archive/Zip/Tree.pm blib/lib/Archive/Zip/Tree.pm&#34;,
    &#34;cp lib/Archive/Zip/Member.pm blib/lib/Archive/Zip/Member.pm&#34;,
    &#34;cp lib/Archive/Zip/MockFileHandle.pm blib/lib/Archive/Zip/MockFileHandle.pm&#34;,
    &#34;cp lib/Archive/Zip/FAQ.pod blib/lib/Archive/Zip/FAQ.pod&#34;,
    &#34;cp lib/Archive/Zip/Archive.pm blib/lib/Archive/Zip/Archive.pm&#34;,
    &#34;cp lib/Archive/Zip/NewFileMember.pm blib/lib/Archive/Zip/NewFileMember.pm&#34;,
    &#34;cp lib/Archive/Zip/StringMember.pm blib/lib/Archive/Zip/StringMember.pm&#34;,
    &#34;cp lib/Archive/Zip/BufferedFileHandle.pm blib/lib/Archive/Zip/BufferedFileHandle.pm&#34;,
    &#34;cp lib/Archive/Zip/DirectoryMember.pm blib/lib/Archive/Zip/DirectoryMember.pm&#34;,
    &#34;cp lib/Archive/Zip/MemberRead.pm blib/lib/Archive/Zip/MemberRead.pm&#34;,
    &#34;cp lib/Archive/Zip.pm blib/lib/Archive/Zip.pm&#34;,
    &#34;cp lib/Archive/Zip/FileMember.pm blib/lib/Archive/Zip/FileMember.pm&#34;,
    &#34;cp script/crc32 blib/script/crc32&#34;,
    &#34;\&#34;/usr/home/jkeenan/var/tad/testing/perl-5.29.2/bin/perl\&#34; -MExtUtils::MY -e &#39;MY-&gt;fixin&#40;shift&#41;&#39; -- blib/script/crc32&#34;,
    &#34;PERL_DL_NONLAZY=1 \&#34;/usr/home/jkeenan/var/tad/testing/perl-5.29.2/bin/perl\&#34; \&#34;-MExtUtils::Command::MM\&#34; \&#34;-MTest::Harness\&#34; \&#34;-e\&#34; \&#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;\&#34; t/*.t&#34;,
    &#34;t/01_compile.t ................ ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/02_main.t ................... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;Invalid option&#40;s&#41;: untaint_pat at /home/jkeenan/var/tad/testing/perl-5.29.2/lib/5.29.2/File/Find.pm line 735.&#34;,
    &#34;t/03_ex.t ..................... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/04_readmember.t ............. ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;Invalid option&#40;s&#41;: untaint_pat at /home/jkeenan/var/tad/testing/perl-5.29.2/lib/5.29.2/File/Find.pm line 735.&#34;,
    &#34;Invalid option&#40;s&#41;: untaint_pat at /home/jkeenan/var/tad/testing/perl-5.29.2/lib/5.29.2/File/Find.pm line 735.&#34;,
    &#34;Invalid option&#40;s&#41;: untaint_pat at /home/jkeenan/var/tad/testing/perl-5.29.2/lib/5.29.2/File/Find.pm line 735.&#34;,
    &#34;t/05_tree.t ................... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/06_update.t ................. ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;Invalid option&#40;s&#41;: untaint_pat at /home/jkeenan/var/tad/testing/perl-5.29.2/lib/5.29.2/File/Find.pm line 735.&#34;,
    &#34;t/07_filenames_of_0.t ......... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/08_readmember_record_sep.t .. ok&#34;,
    &#34;t/09_output_record_sep.t ...... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/10_chmod.t .................. ok&#34;,
    &#34;t/11_explorer.t ............... ok&#34;,
    &#34;t/12_bug_47223.t .............. skipped: Only required on Win32.&#34;,
    &#34;t/13_bug_46303.t .............. ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/14_leading_separator.t ...... ok&#34;,
    &#34;t/15_decrypt.t ................ ok&#34;,
    &#34;t/16_decrypt.t ................ ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/17_101092.t ................. ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/18_bug_92205.t .............. ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/19_bug_101240.t ............. ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/20_bug_github11.t ........... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/21_zip64.t .................. ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;t/22_deflated_dir.t ........... ok&#34;,
    &#34;t/23_closed_handle.t .......... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;Invalid option&#40;s&#41;: untaint_pat at /home/jkeenan/var/tad/testing/perl-5.29.2/lib/5.29.2/File/Find.pm line 735.&#34;,
    &#34;t/24_unicode_win32.t .......... ok&#34;,
    &#34;warning: unzip -t  doesn&#39;t seem to work, may skip some tests at t/common.pm line 223.&#34;,
    &#34;&#34;,
    &#34;#   Failed test &#39;Tree extraction aborted&#39;&#34;,
    &#34;#   at t/25_traversal.t line 54.&#34;,
    &#34;#          got: &#39;0&#39;&#34;,
    &#34;#     expected: &#39;2&#39;&#34;,
    &#34;&#34;,
    &#34;#   Failed test &#39;A file was not created in a symlinked directory&#39;&#34;,
    &#34;#   at t/25_traversal.t line 57.&#34;,
    &#34;&#34;,
    &#34;#   Failed test &#39;link-dir removed&#39;&#34;,
    &#34;#   at t/25_traversal.t line 60.&#34;,
    &#34;&#34;,
    &#34;#   Failed test &#39;A symlink to a directory created&#39;&#34;,
    &#34;#   at t/25_traversal.t line 65.&#34;,
    &#34;&#34;,
    &#34;#   Failed test &#39;Member extraction without a local name aborted&#39;&#34;,
    &#34;#   at t/25_traversal.t line 69.&#34;,
    &#34;#          got: &#39;0&#39;&#34;,
    &#34;#     expected: &#39;2&#39;&#34;,
    &#34;&#34;,
    &#34;#   Failed test &#39;A symlink to a directory removed&#39;&#34;,
    &#34;#   at t/25_traversal.t line 82.&#34;,
    &#34;&#34;,
    &#34;#   Failed test &#39;Tree extraction aborted&#39;&#34;,
    &#34;#   at t/25_traversal.t line 141.&#34;,
    &#34;#          got: &#39;0&#39;&#34;,
    &#34;#     expected: &#39;2&#39;&#34;,
    &#34;# Looks like you failed 7 tests of 41.&#34;,
    &#34;t/25_traversal.t .............. &#34;,
    &#34;Dubious, test returned 7 &#40;wstat 1792, 0x700&#41;&#34;,
    &#34;Failed 7/41 subtests &#34;,
    &#34;\t&#40;less 1 skipped subtest: 33 okay&#41;&#34;,
    &#34;&#34;,
    &#34;Test Summary Report&#34;,
    &#34;-------------------&#34;,
    &#34;t/25_traversal.t            &#40;Wstat: 1792 Tests: 41 Failed: 7&#41;&#34;,
    &#34;  Failed tests:  4-8, 13, 26&#34;,
    &#34;  Non-zero exit status: 7&#34;,
    &#34;Files=25, Tests=345,  5 wallclock secs &#40; 0.07 usr  0.06 sys +  3.60 cusr  1.29 csys =  5.02 CPU&#41;&#34;,
    &#34;Result: FAIL&#34;,
  ],
  via =&gt; &#34;App::cpanminus::reporter 0.17 &#40;1.7044&#41;&#34;,
}
#####
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;21&nbsp;16:50:40&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Aug 20 01:29:15 2018, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On my FreeBSD smokers the test suite fails:
&gt; 
&gt; ...
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 54.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A file was not created in a symlinked directory&#39;
&gt; #   at t/25_traversal.t line 57.
&gt; 
&gt; #   Failed test &#39;link-dir removed&#39;
&gt; #   at t/25_traversal.t line 60.
&gt; 
&gt; #   Failed test &#39;A symlink to a directory created&#39;
&gt; #   at t/25_traversal.t line 65.
&gt; 
&gt; #   Failed test &#39;Member extraction without a local name aborted&#39;
&gt; #   at t/25_traversal.t line 69.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A symlink to a directory removed&#39;
&gt; #   at t/25_traversal.t line 82.
&gt; 
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 141.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; # Looks like you failed 7 tests of 41.
&gt;  t/25_traversal.t ..............
&gt; Dubious, test returned 7 &#40;wstat 1792, 0x700&#41;
&gt;  Failed 7/41 subtests
&gt;         &#40;less 1 skipped subtest: 33 okay&#41;
&gt; ...
&gt; 
&gt; 
&gt; Looking at <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Archive-Zip%201.62">http://matrix.cpantesters.org/?dist=Archive-Zip%201.62</a></span> it
&gt; seems that also other BSD systems &#40;dragonfly, netbsd ...&#41; are
&gt; affected.
</div>
The file experiencing failures was added relatively recently and apparently in response to a security problem:

#####
commit 5c79b9faae0f1dd67cc8288964c72c12e03884f8 &#40;HEAD&#41;
Author:     Petr P&lt;C3&gt;&lt;AD&gt;sa&lt;C5&gt;&lt;99&gt; &lt;ppisar@redhat.com&gt;
AuthorDate: Fri Jun 15 12:49:47 2018
Commit:     Petr P&lt;C3&gt;&lt;AD&gt;sa&lt;C5&gt;&lt;99&gt; &lt;ppisar@redhat.com&gt;
CommitDate: Thu Jun 28 10:40:18 2018

    Prevent from traversing symlinks and parent directories when extracting
    
    If an attacker-supplied archive contains symbolic links and files that
    referes to the symbolic links in their path components, the user can
    be tricked into overwriting any arbitrary file.
    
    The same issue is with archives whose members refer to a parent
    directory &#40;..&#41; in their path components.
    
    This patch fixes it by aborting an extraction &#40;extractTree&#40;&#41;,
    extractMember&#40;&#41;, extractMemberWithoutPaths&#40;&#41;&#41; in those cases by not
    traversing the dangerous paths and returning AZ_ERORR instead.
    
    However, if a user supplies a local file name, the security checks are
    not performed. This is based on the assumption that a user knows
    what&#39;s on his local file system.
   
    CVE-2018-10860
    <span class="clickylink"><a target="new" rel="nofollow" href="https://bugzilla.redhat.com/show_bug.cgi?id=1591449">https://bugzilla.redhat.com/show_bug.cgi?id=1591449</a></span>
#####

I get test failures on FreeBSD-11.1 at that commit point.

Since the contributor is the RedHat maintainer for Perl, I assume the file is absolutely appropriate for Linux -- but perhaps it&#39;s not quite right for non-Linux Unixes and other OSes.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;21&nbsp;17:45:06&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-08-20 01:29:15, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On my FreeBSD smokers the test suite fails:
&gt; 
&gt; ...
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 54.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A file was not created in a symlinked directory&#39;
&gt; #   at t/25_traversal.t line 57.
&gt; 
&gt; #   Failed test &#39;link-dir removed&#39;
&gt; #   at t/25_traversal.t line 60.
&gt; 
&gt; #   Failed test &#39;A symlink to a directory created&#39;
&gt; #   at t/25_traversal.t line 65.
&gt; 
&gt; #   Failed test &#39;Member extraction without a local name aborted&#39;
&gt; #   at t/25_traversal.t line 69.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; 
&gt; #   Failed test &#39;A symlink to a directory removed&#39;
&gt; #   at t/25_traversal.t line 82.
&gt; 
&gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; #   at t/25_traversal.t line 141.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;2&#39;
&gt; # Looks like you failed 7 tests of 41.
&gt;  t/25_traversal.t ..............
&gt; Dubious, test returned 7 &#40;wstat 1792, 0x700&#41;
&gt;  Failed 7/41 subtests
&gt;         &#40;less 1 skipped subtest: 33 okay&#41;
&gt; ...
&gt; 
&gt; 
&gt; Looking at <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Archive-Zip%201.62">http://matrix.cpantesters.org/?dist=Archive-Zip%201.62</a></span> it
&gt; seems that also other BSD systems &#40;dragonfly, netbsd ...&#41; are
&gt; affected.
</div>
Tests pass on freebsd if the following patch is applied --- but of course a lot of OSes are missing here. Maybe do it the other way and create a negative list, i.e. list MSWin32 and maybe cygwin?


diff --git a/lib/Archive/Zip/Member.pm b/lib/Archive/Zip/Member.pm
index 599e6f2..e9fe8c4 100644
--- a/lib/Archive/Zip/Member.pm
+++ b/lib/Archive/Zip/Member.pm
@@ -1090,7 +1090,7 @@ sub _writeData {
 
 # If symbolic link, just create one if the operating system is Linux, Unix, BSD or VMS
 # TODO: Add checks for other operating systems
-    if &#40;$self-&gt;{&#39;isSymbolicLink&#39;} == 1 &#38;&#38; $^O eq &#39;linux&#39;&#41; {
+    if &#40;$self-&gt;{&#39;isSymbolicLink&#39;} == 1 &#38;&#38; $^O =~ /^&#40;linux|freebsd&#41;$/&#41; {
         my $chunkSize = $Archive::Zip::ChunkSize;
         my &#40;$outRef, $status&#41; = $self-&gt;readChunk&#40;$chunkSize&#41;;
         symlink $$outRef, $self-&gt;{&#39;newName&#39;};
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;21&nbsp;22:20:09&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Aug 21 16:50:40 2018, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Aug 20 01:29:15 2018, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On my FreeBSD smokers the test suite fails:
&gt; &gt;
&gt; &gt; ...
&gt; &gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; &gt; #   at t/25_traversal.t line 54.
&gt; &gt; #          got: &#39;0&#39;
&gt; &gt; #     expected: &#39;2&#39;
&gt; &gt;
&gt; &gt; #   Failed test &#39;A file was not created in a symlinked directory&#39;
&gt; &gt; #   at t/25_traversal.t line 57.
&gt; &gt;
&gt; &gt; #   Failed test &#39;link-dir removed&#39;
&gt; &gt; #   at t/25_traversal.t line 60.
&gt; &gt;
&gt; &gt; #   Failed test &#39;A symlink to a directory created&#39;
&gt; &gt; #   at t/25_traversal.t line 65.
&gt; &gt;
&gt; &gt; #   Failed test &#39;Member extraction without a local name aborted&#39;
&gt; &gt; #   at t/25_traversal.t line 69.
&gt; &gt; #          got: &#39;0&#39;
&gt; &gt; #     expected: &#39;2&#39;
&gt; &gt;
&gt; &gt; #   Failed test &#39;A symlink to a directory removed&#39;
&gt; &gt; #   at t/25_traversal.t line 82.
&gt; &gt;
&gt; &gt; #   Failed test &#39;Tree extraction aborted&#39;
&gt; &gt; #   at t/25_traversal.t line 141.
&gt; &gt; #          got: &#39;0&#39;
&gt; &gt; #     expected: &#39;2&#39;
&gt; &gt; # Looks like you failed 7 tests of 41.
&gt; &gt;  t/25_traversal.t ..............
&gt; &gt; Dubious, test returned 7 &#40;wstat 1792, 0x700&#41;
&gt; &gt;  Failed 7/41 subtests
&gt; &gt;         &#40;less 1 skipped subtest: 33 okay&#41;
&gt; &gt; ...
&gt; &gt;
&gt; &gt;
&gt; &gt; Looking at <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Archive-Zip%201.62">http://matrix.cpantesters.org/?dist=Archive-Zip%201.62</a></span> it
&gt; &gt; seems that also other BSD systems &#40;dragonfly, netbsd ...&#41; are
&gt; &gt; affected.
</div>&gt; 
&gt; The file experiencing failures was added relatively recently and
&gt; apparently in response to a security problem:
&gt; 
&gt; #####
&gt; commit 5c79b9faae0f1dd67cc8288964c72c12e03884f8 &#40;HEAD&#41;
&gt; Author:     Petr P&lt;C3&gt;&lt;AD&gt;sa&lt;C5&gt;&lt;99&gt; &lt;ppisar@redhat.com&gt;
&gt; AuthorDate: Fri Jun 15 12:49:47 2018
&gt; Commit:     Petr P&lt;C3&gt;&lt;AD&gt;sa&lt;C5&gt;&lt;99&gt; &lt;ppisar@redhat.com&gt;
&gt; CommitDate: Thu Jun 28 10:40:18 2018
&gt; 
&gt; Prevent from traversing symlinks and parent directories when
&gt; extracting
&gt; 
&gt; If an attacker-supplied archive contains symbolic links and files that
&gt; referes to the symbolic links in their path components, the user can
&gt; be tricked into overwriting any arbitrary file.
&gt; 
&gt; The same issue is with archives whose members refer to a parent
&gt; directory &#40;..&#41; in their path components.
&gt; 
&gt; This patch fixes it by aborting an extraction &#40;extractTree&#40;&#41;,
&gt; extractMember&#40;&#41;, extractMemberWithoutPaths&#40;&#41;&#41; in those cases by not
&gt; traversing the dangerous paths and returning AZ_ERORR instead.
&gt; 
&gt; However, if a user supplies a local file name, the security checks are
&gt; not performed. This is based on the assumption that a user knows
&gt; what&#39;s on his local file system.
&gt; 
&gt; CVE-2018-10860
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://bugzilla.redhat.com/show_bug.cgi?id=1591449">https://bugzilla.redhat.com/show_bug.cgi?id=1591449</a></span>
&gt; #####
&gt; 
&gt; I get test failures on FreeBSD-11.1 at that commit point.
&gt; 
&gt; Since the contributor is the RedHat maintainer for Perl, I assume the
&gt; file is absolutely appropriate for Linux -- but perhaps it&#39;s not quite
&gt; right for non-Linux Unixes and other OSes.
&gt; 
&gt; Thank you very much.
&gt; Jim Keenan
</div>
I tried the pull request submitted by haarg here:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/redhotpenguin/perl-Archive-Zip/pull/38">https://github.com/redhotpenguin/perl-Archive-Zip/pull/38</a></span>

It worked in both of the FreeBSD-11 environments where I was experiencing failures in t/25_traversal.t.

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
