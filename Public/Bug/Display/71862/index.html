<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #71862 for Net-Appliance-Session: Critical Bug in Net-Appliance-Session.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #71862 for Net-Appliance-Session: Critical Bug in Net-Appliance-Session.</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-Appliance-Session">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-Appliance-Session">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-Appliance-Session">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-Appliance-Session">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Appliance-Session">Net-Appliance-Session CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">71862</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">deleted</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-Appliance-Session">Net-Appliance-Session</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">OLIVER [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
marcosgeorge2002 [...] yahoo.com

<br />
martin.rusko [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-41116-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-41117-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=71862">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-990950" href="/Public/Bug/Display.html?id=71862#txn-990950">#</a>      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;23&nbsp;00:55:21&nbsp;2011</span>
    <span class="description">marcosgeorge2002 [...] yahoo.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Critical Bug in Net-Appliance-Session.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 Oct 2011 21:55:10 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-Appliance-Session [...] rt.cpan.org&#34; &lt;bug-Net-Appliance-Session [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marcos Georgopoulos &lt;marcosgeorge2002 [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/990950/515969/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/515969">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Firstly thank you for this library and your time.

I have been trying to use your library to gather information from various network devices however the results I am receiving is inconsistent and therefore unusable.

Below is the output from the debug. I am using the latest version of your library and connecting to a Cisco ASA device. I am using  perl, v5.10.1 &#40;*&#41;. I am able to execute show commands but I don&#39;t always get all the information back. 

For example when I execute a show route command 

Sometimes the debug shows this, and I get all the routes &#40; only two in this case, a default route and connected&#41;.


show route    Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area 
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
   [2.312815] t    nope, doesn&#39;t &#40;yet&#41; match &#40;?-xism:# ?$&#41;
   [2.324716] d    SEEN:
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is 10.20.21.180 to network 0.0.0.0
   [2.324966] t    nope, doesn&#39;t &#40;yet&#41; match &#40;?-xism:# ?$&#41;
   [2.326115] d    SEEN:
Gateway of last resort is 10.20.21.180 to network 0.0.0.0
C    172.16.20.0 255.255.255.0 is directly connected, inside
S*   0.0.0.0 0.0.0.0 [1/0] via 10.20.21.180, outside
homeasa# 
   [2.326295] t    output matched &#40;?-xism:# ?$&#41;, storing and returning

However at other times the debug looks like this, And I don&#39;t get the last two lines of config returned and therefore I do not see the routes.

show route    

Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area 
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
   [3.006830] t    nope, doesn&#39;t &#40;yet&#41; match &#40;?-xism:# ?$&#41;
   [3.014546] d    SEEN:
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP2
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is 10.20.21.180 to network 0.0.0.0

   [3.014723] t    nope, doesn&#39;t &#40;yet&#41; match &#40;?-xism:# ?$&#41;
   [3.018822] d    SEEN:
C    172.16.20.0 255.255.255.0 is directly connected, inside
S*   0.0.0.0 0.0.0.0 [1/0] via 10.20.21.180, outside
   [3.019098] t    nope, doesn&#39;t &#40;yet&#41; match &#40;?-xism:# ?$&#41;
   [3.019308] d    SEEN:
homeasa# 0.0 0.0.0.0 [1/0] via 10.20.21.180, outside
   [3.019476] t    output matched &#40;?-xism:# ?$&#41;, storing and returning


I&#39;m really not sure whats going on here, but any help is very much appreciated.

Cheers!

Marcos.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/990950/515970/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/515970">with headers</a>
<br />
<span class="downloadcontenttype">text/html 6.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-999556" href="/Public/Bug/Display.html?id=71862#txn-999556">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;14&nbsp;03:17:40&nbsp;2011</span>
    <span class="description">OLIVER [...] cpan.org -  Requestor martin.rusko@gmail.com added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-999557" href="/Public/Bug/Display.html?id=71862#txn-999557">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;14&nbsp;03:25:47&nbsp;2011</span>
    <span class="description">OLIVER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/999557/520631/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/520631">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 962b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Martin and Marcos,

First, many thanks for taking the initiative and looking into this yourselves. It&#39;s very much 
appreciated and is the spirit of open source! I&#39;m sorry that I do not always have enough time to 
work on this code every week.

The first conclusion of Martin - that there is a problem with the buffering - could be correct. 
The &#34;split&#34; buffer code exists because if there is very large output from the command, then 
running the regular expression match becomes very slow, as more output is added to the buffer.

So this feature is important, but I had the idea that it could be rewritten from being line-based 
to length-based. I.e. the &#34;split&#34; buffer is only used when the output is above a given size.

Marcos also thinks there is some kind of timing issue with out of order lines. I&#39;ve seen this 
myself, but only when testing on the Windows platform. Marcos, can you tell me if you are using 
SSH on Unix or Windows?

regards,
oliver.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-999559" href="/Public/Bug/Display.html?id=71862#txn-999559">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;14&nbsp;03:25:52&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-999560" href="/Public/Bug/Display.html?id=71862#txn-999560">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;14&nbsp;03:36:18&nbsp;2011</span>
    <span class="description">marcosgeorge2002 [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71862] Critical Bug in Net-Appliance-Session. </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Nov 2011 00:36:07 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-Appliance-Session [...] rt.cpan.org&#34; &lt;bug-Net-Appliance-Session [...] rt.cpan.org&gt;, &#34;martin.rusko [...] gmail.com&#34; &lt;martin.rusko [...] gmail.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marcos Georgopoulos &lt;marcosgeorge2002 [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/999560/520634/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/520634">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Oliver,

All the thanks should go to Martin for findings on this issue, I haven&#39;t really contributed to a fix yet :&#41;.

In answer to your question I am using Ubuntu Linux and connecting via SSH.

The device I&#39;m testing on is returning very little output from my command, say 15 lines. &#40; although this would change on production devices&#41;.

Many thanks! 


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________
From: Oliver Gorwits via RT &lt;bug-Net-Appliance-Session@rt.cpan.org&gt;
To: marcosgeorge2002@yahoo.com; martin.rusko@gmail.com
Sent: Monday, 14 November 2011 7:25 PM
Subject: [rt.cpan.org #71862] Critical Bug in Net-Appliance-Session. 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71862">https://rt.cpan.org/Ticket/Display.html?id=71862</a></span> &gt;

Hello Martin and Marcos,

First, many thanks for taking the initiative and looking into this yourselves. It&#39;s very much 
appreciated and is the spirit of open source! I&#39;m sorry that I do not always have enough time to 
work on this code every week.

The first conclusion of Martin - that there is a problem with the buffering - could be correct. 
The &#34;split&#34; buffer code exists because if there is very large output from the command, then 
running the regular expression match becomes very slow, as more output is added to the buffer.

So this feature is important, but I had the idea that it could be rewritten from being line-based 
to length-based. I.e. the &#34;split&#34; buffer is only used when the output is above a given size.

Marcos also thinks there is some kind of timing issue with out of order lines. I&#39;ve seen this 
myself, but only when testing on the Windows platform. Marcos, can you tell me if you are using 
SSH on Unix or Windows?

regards,
oliver.
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/999560/520635/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/520635">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-999571" href="/Public/Bug/Display.html?id=71862#txn-999571">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;14&nbsp;03:39:36&nbsp;2011</span>
    <span class="description">mobile [...] gorwits.me.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71862] Critical Bug in Net-Appliance-Session.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Nov 2011 08:39:26 -0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Appliance-Session [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Oliver Gorwits&#34; &lt;mobile [...] gorwits.me.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/999571/520640/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/520640">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 477b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Net-Appliance-Session
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71862">https://rt.cpan.org/Ticket/Display.html?id=71862</a></span> &gt;
&gt;
&gt; In answer to your question I am using Ubuntu Linux and connecting via SSH.
&gt;
&gt; The device I&#39;m testing on is returning very little output from my command,
&gt; say 15 lines. &#40; although this would change on production devices&#41;.
</div>
Okay many thanks for the quick reply, that information is useful.

I will try to find time soon for some more investigation.

regards,
oliver.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-999868" href="/Public/Bug/Display.html?id=71862#txn-999868">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;14&nbsp;17:59:45&nbsp;2011</span>
    <span class="description">martin.rusko [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> marcosgeorge2002 [...] yahoo.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71862] Critical Bug in Net-Appliance-Session.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Nov 2011 23:59:36 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Appliance-Session [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Martin Rusko &lt;martin.rusko [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/999868/520798/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/520798">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Oliver,

OK, so quick fix for anyone who is impacted and doesn&#39;t expect to get
big outputs from devices could be this one ...

--- Net/CLI/Interact/Transport/Base.pm.orig     2011-11-13 01:31:38.138585588 +0100
+++ Net/CLI/Interact/Transport/Base.pm  2011-11-13 17:35:15.970593548 +0100
@@ -138,9 +138,9 @@
                     &#40;ref $action-&gt;value eq ref [] ? &#40;join &#39;|&#39;,
@{$action-&gt;value}&#41;
                                                 : $action-&gt;value&#41;&#41;;
                 # put back the partial output and try again
-                $maybe_stash .= $self-&gt;ors if length $maybe_stash;
-                $self-&gt;stash&#40;$self-&gt;stash . $maybe_stash&#41;;
-                $self-&gt;buffer&#40;$last_out&#41;;
+                #$maybe_stash .= $self-&gt;ors if length $maybe_stash;
+                #$self-&gt;stash&#40;$self-&gt;stash . $maybe_stash&#41;;
+                #$self-&gt;buffer&#40;$last_out&#41;;
             }
         }
     }

... right? If we want to keep buffer small for fast regexp matching,
we can maybe still keep it line based. To be sure, that no empty lines
at the end of the buffer are lost, we can add one character to the
buffer, do the split by $self-&gt;irs_re and then subtract one character
from $last_out string. However, I don&#39;t know how expensive these
operations are. Let me know if I shall try such approach.

I had also output in wrong order, but I think it applied only for the
last line of the command output. I&#39;m purely guessing here, but it may
do something with buffer flushing or?

Best Regards,
Martin

PS: Oliver, I used your Net::Appliance::Session v2 module countless
times. I&#39;m also happy user of your Catalyst::Plugin::AutoCRUD module,
which saved my ass for one project where I quickly had to insert data
into the database &#40;collection of wines for annual wine competition!&#41;.
:-&#41; I very much appreciate that you share your excellent work in these
modules and I would never dare to demand any timely fixes of any
possible bugs from you. You don&#39;t owe any apologies to anyone!

On Mon, Nov 14, 2011 at 9:39 AM, Oliver Gorwits via RT
&lt;bug-Net-Appliance-Session@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71862">https://rt.cpan.org/Ticket/Display.html?id=71862</a></span> &gt;
&gt;
<div class="message-stanza open">&gt;&gt;        Queue: Net-Appliance-Session
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71862">https://rt.cpan.org/Ticket/Display.html?id=71862</a></span> &gt;
&gt;&gt;
&gt;&gt; In answer to your question I am using Ubuntu Linux and connecting via SSH.
&gt;&gt;
&gt;&gt; The device I&#39;m testing on is returning very little output from my command,
&gt;&gt; say 15 lines. &#40; although this would change on production devices&#41;.
</div>&gt;
&gt; Okay many thanks for the quick reply, that information is useful.
&gt;
&gt; I will try to find time soon for some more investigation.
&gt;
&gt; regards,
&gt; oliver.
&gt;
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1014824" href="/Public/Bug/Display.html?id=71862#txn-1014824">#</a>      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;24&nbsp;12:33:08&nbsp;2011</span>
    <span class="description">OLIVER [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1015132" href="/Public/Bug/Display.html?id=71862#txn-1015132">#</a>      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;26&nbsp;20:24:09&nbsp;2011</span>
    <span class="description">OLIVER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1015132/529261/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/529261">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 937b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Martin and Marcos,

Many thanks for the bug report. I&#39;m pleased to say that I&#39;ve now fixed my test PC and managed to find some time to work on 
Net::Appliance::Session.

I&#39;ve rewritten the output handling within the module, and I think it&#39;s now more consistent both with the documentation and 
what the user would expect. In particular:

In scalar context the response of cmd&#40;&#41; or macro&#40;&#41; is returned as a single string. In list context the gathered response is 
returned as a list of lines. In both cases your local platform&#39;s newline character will end all lines.

The buffering is much more simple, now, and hopefully less prone to bugs. All the tests pass but of course if you have any 
new issue, let me know.

The new releases of Net::Appliance::Session &#40;3.113610&#41; and Net::CLI::Interact &#40;1.113610&#41; on MetaCPAN have the new 
behaviour. I hope this resolves your issue, and please let me know how you get on.

regards,
oliver.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1015134" href="/Public/Bug/Display.html?id=71862#txn-1015134">#</a>      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;26&nbsp;20:24:10&nbsp;2011</span>
    <span class="description">OLIVER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1015733" href="/Public/Bug/Display.html?id=71862#txn-1015733">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;28&nbsp;20:18:05&nbsp;2011</span>
    <span class="description">marcosgeorge2002 [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #71862] Critical Bug in Net-Appliance-Session. </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 28 Dec 2011 17:17:55 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-Appliance-Session [...] rt.cpan.org&#34; &lt;bug-Net-Appliance-Session [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marcos Georgopoulos &lt;marcosgeorge2002 [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1015733/529553/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/529553">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Oliver,

I&#39;ll update and test once I get back from holidays.

Many thanks! :&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________
 From: Oliver Gorwits via RT &lt;bug-Net-Appliance-Session@rt.cpan.org&gt;
To: marcosgeorge2002@yahoo.com; martin.rusko@gmail.com 
Sent: Tuesday, 27 December 2011 12:24 PM
Subject: [rt.cpan.org #71862] Critical Bug in Net-Appliance-Session. 
 
&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71862">https://rt.cpan.org/Ticket/Display.html?id=71862</a></span> &gt;

Hello Martin and Marcos,

Many thanks for the bug report. I&#39;m pleased to say that I&#39;ve now fixed my test PC and managed to find some time to work on 
Net::Appliance::Session.

I&#39;ve rewritten the output handling within the module, and I think it&#39;s now more consistent both with the documentation and 
what the user would expect. In particular:

In scalar context the response of cmd&#40;&#41; or macro&#40;&#41; is returned as a single string. In list context the gathered response is 
returned as a list of lines. In both cases your local platform&#39;s newline character will end all lines.

The buffering is much more simple, now, and hopefully less prone to bugs. All the tests pass but of course if you have any 
new issue, let me know.

The new releases of Net::Appliance::Session &#40;3.113610&#41; and Net::CLI::Interact &#40;1.113610&#41; on MetaCPAN have the new 
behaviour. I hope this resolves your issue, and please let me know how you get on.

regards,
oliver.
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1015733/529554/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/529554">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1015736" href="/Public/Bug/Display.html?id=71862#txn-1015736">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;28&nbsp;20:18:06&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1027808" href="/Public/Bug/Display.html?id=71862#txn-1027808">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;25&nbsp;17:55:08&nbsp;2012</span>
    <span class="description">OLIVER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1027808/536227/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/536227">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 225b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi there Martin and Marcos,

Any news on how Net::Appliance::Session is behaving for you with the latest update to output 
handling?

I&#39;ve had some other users report the same issue has gone, so I&#39;m hopeful!

regards,
oliver.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1027810" href="/Public/Bug/Display.html?id=71862#txn-1027810">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;25&nbsp;17:55:10&nbsp;2012</span>
    <span class="description">OLIVER [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1249631" href="/Public/Bug/Display.html?id=71862#txn-1249631">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;15&nbsp;05:06:03&nbsp;2013</span>
    <span class="description">OLIVER [...] cpan.org -  Ticket deleted</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.53793</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
