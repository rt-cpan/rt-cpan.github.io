<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #123868 for List-MoreUtils-XS: $a/$b/$_ refcounting bugs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #123868 for List-MoreUtils-XS: $a/$b/$_ refcounting bugs</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=List-MoreUtils-XS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=List-MoreUtils-XS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=List-MoreUtils-XS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=List-MoreUtils-XS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/List-MoreUtils-XS">List-MoreUtils-XS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">123868</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=List-MoreUtils-XS">List-MoreUtils-XS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
zefram [...] fysh.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-267626-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-267627-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.427_002    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=123868">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1761956" href="/Public/Bug/Display.html?id=123868#txn-1761956">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;12&nbsp;16:13:15&nbsp;2017</span>
    <span class="description">zefram [...] fysh.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> $a/$b/$_ refcounting bugs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 12 Dec 2017 21:12:39 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-List-MoreUtils-XS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1761956/948240/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948240">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">List-MoreUtils-XS has started failing its tests at core commit
16ada235c332e017667585e1a5a00ce43a31c529.  This is due to preexisting
bugs in L-MU-XS getting noticed due to a core bugfix.

The underlying bugs in L-MU-XS are in the treatment of
GvSV&#40;PL_{first,second,def}gv&#41;, that is, in the aliasing of $a, $b, and
$_ that is done by several of its functions.  The GvSV slot of a glob is
refcounted, but L-MU-XS isn&#39;t diddling reference counts.  This is actually
the same bug that the core pp_sort had that the breaking commit was
fixing.  L-MU-XS has probably cribbed the logic from the buggy pp_sort.

When assigning to GvSV, you need to increment the refcount of the
new value first, and then decrement the refcount of the old value
afterwards.  When you want to localise GvSV around a function, the
way pp_sort does, SAVESPTR&#40;&#41; is the wrong way to do it.  You need to
SAVEGENERICSV&#40;&#41; and then increment the reference count.  See core commit
16ada235c332e017667585e1a5a00ce43a31c529 for an example of this type
of bugfix.

I think the actual failure mode that&#39;s causing test failure arises from
this refcounting error, which can be seen on any perl version:

$ perl -MDevel::Peek -MList::MoreUtils::XS=reduce_0 -lwe &#39;print reduce_0 { $a + $b } 2,3,4; Dump $a&#39;
9
SV = UNKNOWN&#40;0xff&#41; &#40;0x2478928&#41; at 0x2455110
  REFCNT = 0
  FLAGS = &#40;&#41;

The issue there is that $a was locally set to the partial sum, repeatedly,
but each partial sum scalar was mortal.  When the reduction was complete,
$a was left aliased to a scalar that was now dead.  &#40;The bugfixed pp_sort,
performing refcounting on the $a that was in place when it was invoked,
then barfed on this scalar already being dead.&#41;  Properly refcounting
GvSV would fix this, but there&#39;s another issue too.  I think reduce_0&#40;&#41;
et al should not be side-effecting $a and $b.  I think reduction should
localise $a and $b, just as some of your other functions do.

This breakage is being tracked on the core side as [perl #132578].

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1761983" href="/Public/Bug/Display.html?id=123868#txn-1761983">#</a>      
    </span>
    <span class="date">Tue&nbsp;Dec&nbsp;12&nbsp;18:17:27&nbsp;2017</span>
    <span class="description">ether [...] cpan.org -  Reference to perl ticket #132578 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762023" href="/Public/Bug/Display.html?id=123868#txn-1762023">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;13&nbsp;02:51:59&nbsp;2017</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762023/948275/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948275">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Dec 12 16:13:15 2017, zefram@fysh.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; List-MoreUtils-XS has started failing its tests at core commit
&gt; 16ada235c332e017667585e1a5a00ce43a31c529.  This is due to preexisting
&gt; bugs in L-MU-XS getting noticed due to a core bugfix.
&gt; 
&gt; The underlying bugs in L-MU-XS are in the treatment of
&gt; GvSV&#40;PL_{first,second,def}gv&#41;, that is, in the aliasing of $a, $b, and
&gt; $_ that is done by several of its functions.  The GvSV slot of a glob
&gt; is
&gt; refcounted, but L-MU-XS isn&#39;t diddling reference counts.  This is
&gt; actually
&gt; the same bug that the core pp_sort had that the breaking commit was
&gt; fixing.  L-MU-XS has probably cribbed the logic from the buggy
&gt; pp_sort.
&gt; 
&gt; When assigning to GvSV, you need to increment the refcount of the
&gt; new value first, and then decrement the refcount of the old value
&gt; afterwards.  When you want to localise GvSV around a function, the
&gt; way pp_sort does, SAVESPTR&#40;&#41; is the wrong way to do it.  You need to
&gt; SAVEGENERICSV&#40;&#41; and then increment the reference count.  See core
&gt; commit
&gt; 16ada235c332e017667585e1a5a00ce43a31c529 for an example of this type
&gt; of bugfix.
&gt; 
&gt; I think the actual failure mode that&#39;s causing test failure arises
&gt; from
&gt; this refcounting error, which can be seen on any perl version:
&gt; 
&gt; $ perl -MDevel::Peek -MList::MoreUtils::XS=reduce_0 -lwe &#39;print
&gt; reduce_0 { $a + $b } 2,3,4; Dump $a&#39;
&gt; 9
&gt; SV = UNKNOWN&#40;0xff&#41; &#40;0x2478928&#41; at 0x2455110
&gt;   REFCNT = 0
&gt;   FLAGS = &#40;&#41;
&gt; 
&gt; The issue there is that $a was locally set to the partial sum,
&gt; repeatedly,
&gt; but each partial sum scalar was mortal.  When the reduction was
&gt; complete,
&gt; $a was left aliased to a scalar that was now dead.  &#40;The bugfixed
&gt; pp_sort,
&gt; performing refcounting on the $a that was in place when it was
&gt; invoked,
&gt; then barfed on this scalar already being dead.&#41;  Properly refcounting
&gt; GvSV would fix this, but there&#39;s another issue too.  I think
&gt; reduce_0&#40;&#41;
&gt; et al should not be side-effecting $a and $b.  I think reduction
&gt; should
&gt; localise $a and $b, just as some of your other functions do.
&gt; 
&gt; This breakage is being tracked on the core side as [perl #132578].
&gt; 
&gt; -zefram
</div>
Without the intension to disagree - cause I see the missing refcnt&#40;&#41;
and believe this is a long undiscovered bug, the only segfault I can
reproduce is in:

&#40;lldb&#41; target create &#34;/Users/sno/perl5/perlbrew/perls/perl-bisect/bin/perl&#34;
Current executable set to &#39;/Users/sno/perl5/perlbrew/perls/perl-bisect/bin/perl&#39; &#40;x86_64&#41;.
&#40;lldb&#41; settings set -- target.run-args  &#34;-Mblib&#34; &#34;t/xs/occurrences.t&#34;
&#40;lldb&#41; process launch
Process 64124 launched: &#39;/Users/sno/perl5/perlbrew/perls/perl-bisect/bin/perl&#39; &#40;x86_64&#41;
ok 1 - Each word is counted
ok 2 - Text to long, each word is there at least twice
ok 3 - 11 comma
ok 4 - 7 dots
ok 5 - 9 words &#39;et&#39;
ok 6 - Words are as many as requested at www.loremipsum.de
ok 7 - probes untouched
ok 8 - occurrences of integer probes
Process 64124 stopped
* thread #1, queue = &#39;com.apple.main-thread&#39;, stop reason = EXC_BAD_ACCESS &#40;code=1, address=0xff00000008&#41;
    frame #0: 0x00000001000bd176 perl`S_sv_unmagicext_flags + 102
perl`S_sv_unmagicext_flags:
-&gt;  0x1000bd176 &lt;+102&gt;: movq   0x8&#40;%rbx&#41;, %rax
    0x1000bd17a &lt;+106&gt;: movsbl 0x12&#40;%rbx&#41;, %esi
    0x1000bd17e &lt;+110&gt;: cmpq   %r12, %rax
    0x1000bd181 &lt;+113&gt;: sete   %dl
Target 0: &#40;perl&#41; stopped.
&#40;lldb&#41; bt
* thread #1, queue = &#39;com.apple.main-thread&#39;, stop reason = EXC_BAD_ACCESS &#40;code=1, address=0xff00000008&#41;
  * frame #0: 0x00000001000bd176 perl`S_sv_unmagicext_flags + 102
    frame #1: 0x00000001000be067 perl`Perl_sv_clear + 263
    frame #2: 0x00000001000bee1e perl`Perl_sv_free2 + 94
    frame #3: 0x00000001000df425 perl`Perl_leave_scope + 357
    frame #4: 0x000000010014c86d perl`Perl_pp_sort + 3181
    frame #5: 0x00000001002f8826 LeakTrace.bundle`leaktrace_runops at LeakTrace.xs:184 [opt]
    frame #6: 0x0000000100028f7c perl`perl_run + 876
    frame #7: 0x0000000100000d15 perl`main + 149
    frame #8: 0x00007fffded32235 libdyld.dylib`start + 1

Which is caused by following perl code:

{
    my @probes = &#40;&#40;1&#41; x 3, undef, &#40;2&#41; x 4, undef, &#40;3&#41; x 2, undef, &#40;4&#41; x 7, undef, &#40;5&#41; x 2, undef, &#40;6&#41; x 4&#41;;
    my $fp     = freeze&#40;\@probes&#41;;
    my @o      = map {
        ref $_
          ? [sort { &#40;defined $a &lt;=&gt; defined $b&#41; or $a &lt;=&gt; $b } @$_]
          : $_
    } occurrences @probes;
}

And - to be honest - I can&#39;t see any failing refcnt in occurrences &#40;...&#41;

Best regards,
Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762024" href="/Public/Bug/Display.html?id=123868#txn-1762024">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;13&nbsp;02:52:00&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762063" href="/Public/Bug/Display.html?id=123868#txn-1762063">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;13&nbsp;09:42:27&nbsp;2017</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762063/948300/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948300">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">As requested - I adopted the referred core fix, but I&#39;d like to get much more information and feedback to develop a proper fix.

For the records, I did not take the code from pp_sort - I take it from pairwise which taked it from ListUtil.xs ages ago. The reason for that kind of code stealing is the lack of proper documentation wrt. localizing $a/$b/$_ from XS - all I found was some poor multicall documentation which simply says: look at List::Util - that&#39;s the reference.

So I copied from code behaving like that:

$ perl -MDevel::Peek -MList::Util=reduce -lwe &#39;print reduce { $a + $b } 2,3,4; Dump $a&#39;
9
SV = NULL&#40;0x0&#41; at 0x7fae83035198
  REFCNT = 1
  FLAGS = &#40;&#41;
$ perl -MDevel::Peek -MList::Util=reduce -lwe &#39;print reduce { $a + $b } 2,3,4; Dump $b&#39;
9
SV = NULL&#40;0x0&#41; at 0x7ff98106bb58
  REFCNT = 1
  FLAGS = &#40;&#41;

With the adopted code from pp_sort.c, List::MoreUtils::XS behaves like that:

$ make &#38;&#38; perl -MDevel::Peek -MList::MoreUtils::XS=reduce_0 -lwe &#39;print reduce_0 { $a + $b } 2,3,4; Dump $a&#39;
9
SV = UNKNOWN&#40;0xff&#41; &#40;0x7fad2282f7a0&#41; at 0x7fad22803478
  REFCNT = 0
  FLAGS = &#40;&#41;
$ make &#38;&#38; perl -MDevel::Peek -MList::MoreUtils::XS=reduce_0 -lwe &#39;print reduce_0 { $a + $b } 2,3,4; Dump $b&#39;
9
SV = IV&#40;0x7f9bdf831c20&#41; at 0x7f9bdf831c30
  REFCNT = 1
  FLAGS = &#40;IOK,READONLY,PROTECT,pIOK&#41;
  IV = 4

So I think, the fix is maybe wrong. And I&#39;d like to understand why $a/$b and $_ &#40;PL_devgv&#41; behave such different.

Please have a look into <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-utils/List-MoreUtils-XS/commit/b28fd8864f51bd3d9a55319afb990fa4cdf87288">https://github.com/perl5-utils/List-MoreUtils-XS/commit/b28fd8864f51bd3d9a55319afb990fa4cdf87288</a></span> and give me some feedback.

Thanks in advance.

Best regards,
Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762081" href="/Public/Bug/Display.html?id=123868#txn-1762081">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;13&nbsp;12:17:14&nbsp;2017</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762081/948316/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948316">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 342b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Dec 13 09:42:27 2017, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So I think, the fix is maybe wrong. And I&#39;d like to understand why
&gt; $a/$b and $_ &#40;PL_devgv&#41; behave such different.
</div>
They donâ€™t behave differently. List::Util has two bugs open related to this:

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96343">https://rt.cpan.org/Ticket/Display.html?id=96343</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118334">https://rt.cpan.org/Ticket/Display.html?id=118334</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762090" href="/Public/Bug/Display.html?id=123868#txn-1762090">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;13&nbsp;12:47:12&nbsp;2017</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762090/948321/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948321">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 675b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Dec 13 12:17:14 2017, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Dec 13 09:42:27 2017, REHSACK wrote:
<div class="message-stanza open">&gt; &gt; So I think, the fix is maybe wrong. And I&#39;d like to understand why
&gt; &gt; $a/$b and $_ &#40;PL_devgv&#41; behave such different.
</div>&gt; 
&gt; They donâ€™t behave differently. List::Util has two bugs open related to this:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96343">https://rt.cpan.org/Ticket/Display.html?id=96343</a></span>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=118334">https://rt.cpan.org/Ticket/Display.html?id=118334</a></span>
</div>
In that case, I bump the review / documentation request :&#41;
I need to understand the issue a bit better and a proper documentation how to localize a var like &#34;$a&#34; and protect it against leaks on exceptions without wasting resources by encompassing everything with an G_EVAL.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762101" href="/Public/Bug/Display.html?id=123868#txn-1762101">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;13&nbsp;14:24:07&nbsp;2017</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123868] $a/$b/$_ refcounting bugs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 13 Dec 2017 19:23:49 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Jens Rehsack via RT &lt;bug-List-MoreUtils-XS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762101/948329/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948329">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 370b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jens Rehsack via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;                                             the only segfault I can
&gt;reproduce is in:
</div>
Use a debugging build of perl.  There are useful assertions that will
be hit before actual segvs.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;And - to be honest - I can&#39;t see any failing refcnt in occurrences &#40;...&#41;
</div>
The refcount fail is in reduce_0&#40;&#41;, called earlier in the test script.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762109" href="/Public/Bug/Display.html?id=123868#txn-1762109">#</a>      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;13&nbsp;15:11:59&nbsp;2017</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1762109/948335/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/948335">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Dec 13 14:24:07 2017, zefram@fysh.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Jens Rehsack via RT wrote:
<div class="message-stanza open">&gt; &gt;                                             the only segfault I can
&gt; &gt;reproduce is in:
</div>&gt; 
&gt; Use a debugging build of perl.  There are useful assertions that will
&gt; be hit before actual segvs.
</div>
$ perl -V
Summary of my perl5 &#40;revision 5 version 27 subversion 7&#41; configuration:
  Commit id: 5eabe374afae7b84aa4ba5e13e5424865bc74fc1
  Platform:
    osname=darwin
    osvers=16.7.0
    archname=darwin-2level
    uname=&#39;darwin ernie.local 16.7.0 darwin kernel version 16.7.0: mon nov 13 21:56:25 pst 2017; root:xnu-3789.72.11~1release_x86_64 x86_64 &#39;
    config_args=&#39;-de -Dcc=clang -Doptimize=-O -g -DDEBUGGING -Dusedevel -Dprefix=/Users/sno/perl5/perlbrew/perls/perl-bisect&#39;
   ...
Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options:
    DEBUGGING
    HAS_TIMES
    PERLIO_LAYERS
    PERL_COPY_ON_WRITE
    PERL_DONT_CREATE_GVSV
    PERL_MALLOC_WRAP
    PERL_OP_PARENT
    PERL_PRESERVE_IVUV
    PERL_USE_DEVEL
    PERL_USE_SAFE_PUTENV
    USE_64_BIT_ALL
    USE_64_BIT_INT
    USE_LARGE_FILES
    USE_LOCALE
    USE_LOCALE_COLLATE
    USE_LOCALE_CTYPE
    USE_LOCALE_NUMERIC
    USE_LOCALE_TIME
    USE_PERLIO
    USE_PERL_ATOF
  Built under darwin
  Compiled at Dec 13 2017 12:30:17
  %ENV:
    PERLBREW_BASHRC_VERSION=&#34;0.75&#34;
    PERLBREW_HOME=&#34;/Users/sno/.perlbrew&#34;
    PERLBREW_MANPATH=&#34;/Users/sno/perl5/perlbrew/perls/perl-bisect/man&#34;
    PERLBREW_PATH=&#34;/Users/sno/perl5/perlbrew/bin:/Users/sno/perl5/perlbrew/perls/perl-bisect/bin&#34;
    PERLBREW_PERL=&#34;perl-bisect&#34;
    PERLBREW_ROOT=&#34;/Users/sno/perl5/perlbrew&#34;
    PERLBREW_VERSION=&#34;0.75&#34;
  @INC:
    /Users/sno/perl5/perlbrew/perls/perl-bisect/lib/site_perl/5.27.7/darwin-2level
    /Users/sno/perl5/perlbrew/perls/perl-bisect/lib/site_perl/5.27.7
    /Users/sno/perl5/perlbrew/perls/perl-bisect/lib/5.27.7/darwin-2level
    /Users/sno/perl5/perlbrew/perls/perl-bisect/lib/5.27.7

I do :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;And - to be honest - I can&#39;t see any failing refcnt in occurrences &#40;...&#41;
</div>&gt; 
&gt; The refcount fail is in reduce_0&#40;&#41;, called earlier in the test script.
</div>
I expected that reduce_*.t will fail, too. Or report a leak. Or something else. They won&#39;t.
This report is found because of a side effect.

The reported refcount has been fixed. But what&#39;s with all the others waiting and sleeping?

Cheers,
Jens
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762181" href="/Public/Bug/Display.html?id=123868#txn-1762181">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;14&nbsp;09:48:18&nbsp;2017</span>
    <span class="description">REHSACK [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1762182" href="/Public/Bug/Display.html?id=123868#txn-1762182">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;14&nbsp;09:48:18&nbsp;2017</span>
    <span class="description">REHSACK [...] cpan.org -  Fixed in 0.427_002 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1763939" href="/Public/Bug/Display.html?id=123868#txn-1763939">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;10:25:45&nbsp;2018</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123868] $a/$b/$_ refcounting bugs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Jan 2018 15:25:04 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Bugs in List-MoreUtils-XS via RT &lt;bug-List-MoreUtils-XS [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1763939/949294/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/949294">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 593b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">List-MoreUtils-XS-0.428 has some changes in response to this ticket,
but hasn&#39;t fixed all the GvSV refcounting bugs.  This bug in pairwise&#40;&#41;
has been found to break Algorithm-QuineMcCluskey on core versions that
have the pp_sort bugfix:

$ perl -MDevel::Peek=Dump -MList::MoreUtils::XS=pairwise -lwe &#39;pairwise {  } @{[&#34;0&#34;]}, @{[&#34;0&#34;]}; Dump $a; Dump $b&#39;
SV = UNKNOWN&#40;0xff&#41; &#40;0xfecab0&#41; at 0xfc9128
  REFCNT = 0
  FLAGS = &#40;&#41;
SV = UNKNOWN&#40;0xff&#41; &#40;0xfecb88&#41; at 0xfecac8
  REFCNT = 0
  FLAGS = &#40;&#41;

The breakage of Algorithm-QuineMcCluskey is being tracked on the core
side as [perl #132671].

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1763955" href="/Public/Bug/Display.html?id=123868#txn-1763955">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;11:41:05&nbsp;2018</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1763955/949302/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/949302">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 869b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 01 10:25:45 2018, zefram@fysh.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; List-MoreUtils-XS-0.428 has some changes in response to this ticket,
&gt; but hasn&#39;t fixed all the GvSV refcounting bugs. 
</div>
I asked you to review the changes or document the API, respectively.
This doesn&#39;t happen - so the symptom is fixed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This bug in
&gt; pairwise&#40;&#41;
&gt; has been found to break Algorithm-QuineMcCluskey on core versions that
&gt; have the pp_sort bugfix:
&gt; 
&gt; $ perl -MDevel::Peek=Dump -MList::MoreUtils::XS=pairwise -lwe
&gt; &#39;pairwise {  } @{[&#34;0&#34;]}, @{[&#34;0&#34;]}; Dump $a; Dump $b&#39;
&gt; SV = UNKNOWN&#40;0xff&#41; &#40;0xfecab0&#41; at 0xfc9128
&gt;   REFCNT = 0
&gt;   FLAGS = &#40;&#41;
&gt; SV = UNKNOWN&#40;0xff&#41; &#40;0xfecb88&#41; at 0xfecac8
&gt;   REFCNT = 0
&gt;   FLAGS = &#40;&#41;
&gt; 
&gt; The breakage of Algorithm-QuineMcCluskey is being tracked on the core
&gt; side as [perl #132671].
</div>
New symptom, new ticket. Or you decide to provide requested API
documentation.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1763958" href="/Public/Bug/Display.html?id=123868#txn-1763958">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;11:41:06&nbsp;2018</span>
    <span class="description">REHSACK [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1789893" href="/Public/Bug/Display.html?id=123868#txn-1789893">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;08&nbsp;01:56:12&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1789893/962639/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/962639">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-01-01 11:41:05, REHSACK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jan 01 10:25:45 2018, zefram@fysh.org wrote:
<div class="message-stanza open">&gt; &gt; List-MoreUtils-XS-0.428 has some changes in response to this ticket,
&gt; &gt; but hasn&#39;t fixed all the GvSV refcounting bugs. 
</div>&gt; 
&gt; I asked you to review the changes or document the API, respectively.
&gt; This doesn&#39;t happen - so the symptom is fixed.
&gt; 
<div class="message-stanza open">&gt; &gt; This bug in
&gt; &gt; pairwise&#40;&#41;
&gt; &gt; has been found to break Algorithm-QuineMcCluskey on core versions that
&gt; &gt; have the pp_sort bugfix:
&gt; &gt; 
&gt; &gt; $ perl -MDevel::Peek=Dump -MList::MoreUtils::XS=pairwise -lwe
&gt; &gt; &#39;pairwise {  } @{[&#34;0&#34;]}, @{[&#34;0&#34;]}; Dump $a; Dump $b&#39;
&gt; &gt; SV = UNKNOWN&#40;0xff&#41; &#40;0xfecab0&#41; at 0xfc9128
&gt; &gt;   REFCNT = 0
&gt; &gt;   FLAGS = &#40;&#41;
&gt; &gt; SV = UNKNOWN&#40;0xff&#41; &#40;0xfecb88&#41; at 0xfecac8
&gt; &gt;   REFCNT = 0
&gt; &gt;   FLAGS = &#40;&#41;
&gt; &gt; 
&gt; &gt; The breakage of Algorithm-QuineMcCluskey is being tracked on the core
&gt; &gt; side as [perl #132671].
</div>&gt; 
&gt; New symptom, new ticket. Or you decide to provide requested API
&gt; documentation.
</div>
It seems that the new ticket is
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123989">https://rt.cpan.org/Ticket/Display.html?id=123989</a></span>
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.575299</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
