<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #114203 for Tk: scrolled text widget hangs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #114203 for Tk: scrolled text widget hangs</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Tk">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Tk">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Tk">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Tk">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tk">Tk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">114203</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Tk">Tk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
alohadw1 [...] yahoo.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
CAC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=114203">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1623969" href="/Public/Bug/Display.html?id=114203#txn-1623969">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;06&nbsp;02:40:25&nbsp;2016</span>
    <span class="description">alohadw1 [...] yahoo.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> scrolled text widget hangs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 6 May 2016 06:33:41 +0000 &#40;UTC&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Tk [...] rt.cpan.org&#34; &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Walsh &lt;alohadw1 [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1623969/869660/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/869660">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve noticed what appears to be a bug in the perl Tk scrolled text widget that causes it to hang when large amounts of text are selected by dragging with the mouse.  The problem seems to be due to the interaction between the mouse selection event and the horizontal scrollbar, which appears and disappears during text selection, depending on the length of the text lines being selected.  I wrote the short script below to illustrate the problem in the simplest way I could - documentation inside the script may help illustrate the issue better.  I&#39;m running ubuntu 14.04.4, perl 5.18.2, and perl-Tk-804.033.  Thanks for looking into this.  Regards, David Walsh
#!/usr/bin/perl
#
# script to illustrate dysfunctional interaction between horizontal scrollbar 
# in scrolled text widget when selecting large amounts of text by dragging with 
# mouse B1.  The problem is not entirely predictable, but seems to happen when 
# the horizontal scrollbar appears and disappears several times while large amounts 
# of text are being selected by dragging the mouse.  Occurrence depends on horizontal 
# dimension of the widget relative to line length, and does not seem to occur if the 
# widget is either &#34;too narrow&#34; or &#34;too wide&#34;.  It seems to occur most often when the 
# width of the widget is slightly less than the max line length, so that the horizontal
# scroll bar appears and disappears many times while large amounts of text are being 
# selected.  The only work-around I have come up with for this is to make the horizontal 
# scrollbar &#34;non-automatic&#34; &#40;i.e. so it&#39;s always there&#41;, or to eliminate it entirely.  
# Once the problem occurs the only solution is to re-start the widget.

use Tk;
require Tk::ROText;

$mw  = MainWindow-&gt;new&#40;-title=&gt;&#34;TEST&#34;&#41;;
$mw-&gt;geometry&#40;&#34;1100x600&#34;&#41;;
$mw-&gt;resizable&#40;0,0&#41;;

$NLINES = 2500;

$frame = $mw-&gt;Labelframe&#40;-font=&gt;[&#39;Courier&#39;,&#39;14&#39;,&#39;normal&#39;],-borderwidth=&gt;2&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;

# the following line creates &#39;automatic&#39; scrollbars at the bottom of the widget and 
# at the right, which appear automatically when text width/height exceeds widget 
# dimension
$mssg_text = $frame-&gt;Scrolled&#40;&#39;ROText&#39;,-font=&gt;[&#39;Courier&#39;,&#39;14&#39;],-background=&gt;&#34;wheat&#34;,-scrollbars=&gt;&#34;osoe&#34;,-foreground=&gt;&#34;black&#34;,-wrap=&gt;&#34;none&#34;&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;

# in the following line the horizontal scrollbar has been disabled
#$mssg_text = $frame-&gt;Scrolled&#40;&#39;ROText&#39;,-font=&gt;[&#39;Courier&#39;,&#39;14&#39;],-background=&gt;&#34;wheat&#34;,-scrollbars=&gt;&#34;oe&#34;,-foreground=&gt;&#34;black&#34;,-wrap=&gt;&#34;none&#34;&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;

&#38;FillTextWidget&#40;&#41;;

MainLoop;

#----------------------------------------

sub FillTextWidget {

# fill text widget with random-length lines

    for &#40;$knt1=1;$knt1&lt;$NLINES;$knt1++&#41; {
      $line = $knt1 . &#34; TEST&#34;;
        $randomNumber = int&#40;rand&#40;20&#41;&#41;;
        for &#40;$knt2=0;$knt2&lt;$randomNumber;$knt2++&#41; {
        $line = $line . &#34; TEST&#34;;
        }
        $line = $line . &#34;\n&#34;;
        $mssg_text-&gt;insert&#40;&#39;end&#39;,&#34;$line&#34;&#41;;
    }

}
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1623969/869661/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/869661">with headers</a>
<br />
<span class="downloadcontenttype">text/html 6.2k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1626527" href="/Public/Bug/Display.html?id=114203#txn-1626527">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;15&nbsp;08:47:28&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1626527/871275/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/871275">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-05-06 02:40:25, alohadw1@yahoo.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve noticed what appears to be a bug in the perl Tk scrolled text
&gt; widget that causes it to hang when large amounts of text are selected
&gt; by dragging with the mouse.  The problem seems to be due to the
&gt; interaction between the mouse selection event and the horizontal
&gt; scrollbar, which appears and disappears during text selection,
&gt; depending on the length of the text lines being selected.  I wrote the
&gt; short script below to illustrate the problem in the simplest way I
&gt; could - documentation inside the script may help illustrate the issue
&gt; better.  I&#39;m running ubuntu 14.04.4, perl 5.18.2, and perl-Tk-
&gt; 804.033.  Thanks for looking into this.  Regards, David Walsh
</div>
Yes, that&#39;s a known problem, for quite a long time. A similar issue exists at the github issue tracker: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/eserte/perl-tk/issues/22">https://github.com/eserte/perl-tk/issues/22</a></span>

The only known workaround is to omit one of the two &#34;o&#34; in the scrollbars specification, so &#34;ose&#34; or &#34;soe&#34; should work.

I don&#39;t have ideas for a &#34;real&#34; solution. A possible hack would be to check the time between addition and removal of scrollbars and turn off optional scrollbars if this time is too short.

Probably there should also be an entry in the Pod of Tk::Scrolled.

Regards,
    Slaven

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #!/usr/bin/perl
&gt; #
&gt;  # script to illustrate dysfunctional interaction between horizontal
&gt; scrollbar
&gt;  # in scrolled text widget when selecting large amounts of text by
&gt; dragging with
&gt;  # mouse B1.  The problem is not entirely predictable, but seems to
&gt; happen when
&gt;  # the horizontal scrollbar appears and disappears several times while
&gt; large amounts
&gt;  # of text are being selected by dragging the mouse.  Occurrence
&gt; depends on horizontal
&gt;  # dimension of the widget relative to line length, and does not seem
&gt; to occur if the
&gt;  # widget is either &#34;too narrow&#34; or &#34;too wide&#34;.  It seems to occur
&gt; most often when the
&gt; # width of the widget is slightly less than the max line length, so
&gt; that the horizontal
&gt;  # scroll bar appears and disappears many times while large amounts of
&gt; text are being
&gt;  # selected.  The only work-around I have come up with for this is to
&gt; make the horizontal
&gt;   # scrollbar &#34;non-automatic&#34; &#40;i.e. so it&#39;s always there&#41;, or to
&gt; eliminate it entirely.
&gt; # Once the problem occurs the only solution is to re-start the widget.
&gt; 
&gt; use Tk;
&gt; require Tk::ROText;
&gt; 
&gt; $mw  = MainWindow-&gt;new&#40;-title=&gt;&#34;TEST&#34;&#41;;
&gt; $mw-&gt;geometry&#40;&#34;1100x600&#34;&#41;;
&gt; $mw-&gt;resizable&#40;0,0&#41;;
&gt; 
&gt; $NLINES = 2500;
&gt; 
&gt; $frame = $mw-&gt;Labelframe&#40;-font=&gt;[&#39;Courier&#39;,&#39;14&#39;,&#39;normal&#39;],-
&gt; borderwidth=&gt;2&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;
&gt; 
&gt; # the following line creates &#39;automatic&#39; scrollbars at the bottom of
&gt; the widget and
&gt; # at the right, which appear automatically when text width/height
&gt; exceeds widget
&gt; # dimension
&gt; $mssg_text = $frame-&gt;Scrolled&#40;&#39;ROText&#39;,-font=&gt;[&#39;Courier&#39;,&#39;14&#39;],-
&gt; background=&gt;&#34;wheat&#34;,-scrollbars=&gt;&#34;osoe&#34;,-foreground=&gt;&#34;black&#34;,-
&gt; wrap=&gt;&#34;none&#34;&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;
&gt; 
&gt; # in the following line the horizontal scrollbar has been disabled
&gt; #$mssg_text = $frame-&gt;Scrolled&#40;&#39;ROText&#39;,-font=&gt;[&#39;Courier&#39;,&#39;14&#39;],-
&gt; background=&gt;&#34;wheat&#34;,-scrollbars=&gt;&#34;oe&#34;,-foreground=&gt;&#34;black&#34;,-
&gt; wrap=&gt;&#34;none&#34;&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;
&gt; 
&gt; &#38;FillTextWidget&#40;&#41;;
&gt; 
&gt; MainLoop;
&gt; 
&gt; #----------------------------------------
&gt; 
&gt; sub FillTextWidget {
&gt; 
&gt; # fill text widget with random-length lines
&gt; 
&gt;     for &#40;$knt1=1;$knt1&lt;$NLINES;$knt1++&#41; {
&gt;       $line = $knt1 . &#34; TEST&#34;;
&gt;         $randomNumber = int&#40;rand&#40;20&#41;&#41;;
&gt;         for &#40;$knt2=0;$knt2&lt;$randomNumber;$knt2++&#41; {
&gt;         $line = $line . &#34; TEST&#34;;
&gt;         }
&gt;         $line = $line . &#34;\n&#34;;
&gt;         $mssg_text-&gt;insert&#40;&#39;end&#39;,&#34;$line&#34;&#41;;
&gt;     }
&gt; 
&gt; }
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1626528" href="/Public/Bug/Display.html?id=114203#txn-1626528">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;15&nbsp;08:47:29&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1632329" href="/Public/Bug/Display.html?id=114203#txn-1632329">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;30&nbsp;17:57:13&nbsp;2016</span>
    <span class="description">alohadw1 [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114203] scrolled text widget hangs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 30 May 2016 21:56:59 +0000 &#40;UTC&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Tk [...] rt.cpan.org&#34; &lt;bug-Tk [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Walsh &lt;alohadw1 [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1632329/874748/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/874748">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Slaven,
Thanks for getting back to me.  Pending a &#34;real&#34; solution, it seems it might be best to make &#34;osoe&#34; an illegal scrollbar specification, which would cause a script to fail immediately with some sort of descriptive error message &#40;or at least issue a warning&#41;.  That could save future users like me a lot of head-scratching time spent re-discovering an old bug.  Also, as you probably know, the bug can have pretty severe consequences - it brought our RHEL servers to near-standstill.  Given that, it seems like a good idea to prevent it happening via, e.g., some simple change like that suggested above.  Thanks for your work on perl-Tk.  David 
PS, What is the status of perl-Tk in perl6 - will it be available in the foreseeable future?

    On Sunday, May 15, 2016 2:47 AM, Slaven_Rezic via RT &lt;bug-Tk@rt.cpan.org&gt; wrote:
 

 &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114203">https://rt.cpan.org/Ticket/Display.html?id=114203</a></span> &gt;

On 2016-05-06 02:40:25, alohadw1@yahoo.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve noticed what appears to be a bug in the perl Tk scrolled text
&gt; widget that causes it to hang when large amounts of text are selected
&gt; by dragging with the mouse.  The problem seems to be due to the
&gt; interaction between the mouse selection event and the horizontal
&gt; scrollbar, which appears and disappears during text selection,
&gt; depending on the length of the text lines being selected.  I wrote the
&gt; short script below to illustrate the problem in the simplest way I
&gt; could - documentation inside the script may help illustrate the issue
&gt; better.  I&#39;m running ubuntu 14.04.4, perl 5.18.2, and perl-Tk-
&gt; 804.033.  Thanks for looking into this.  Regards, David Walsh
</div>
Yes, that&#39;s a known problem, for quite a long time. A similar issue exists at the github issue tracker: <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/eserte/perl-tk/issues/22">https://github.com/eserte/perl-tk/issues/22</a></span>

The only known workaround is to omit one of the two &#34;o&#34; in the scrollbars specification, so &#34;ose&#34; or &#34;soe&#34; should work.

I don&#39;t have ideas for a &#34;real&#34; solution. A possible hack would be to check the time between addition and removal of scrollbars and turn off optional scrollbars if this time is too short.

Probably there should also be an entry in the Pod of Tk::Scrolled.

Regards,
    Slaven

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #!/usr/bin/perl
&gt; #
&gt;  # script to illustrate dysfunctional interaction between horizontal
&gt; scrollbar
&gt;  # in scrolled text widget when selecting large amounts of text by
&gt; dragging with
&gt;  # mouse B1.  The problem is not entirely predictable, but seems to
&gt; happen when
&gt;  # the horizontal scrollbar appears and disappears several times while
&gt; large amounts
&gt;  # of text are being selected by dragging the mouse.  Occurrence
&gt; depends on horizontal
&gt;  # dimension of the widget relative to line length, and does not seem
&gt; to occur if the
&gt;  # widget is either &#34;too narrow&#34; or &#34;too wide&#34;.  It seems to occur
&gt; most often when the
&gt; # width of the widget is slightly less than the max line length, so
&gt; that the horizontal
&gt;  # scroll bar appears and disappears many times while large amounts of
&gt; text are being
&gt;  # selected.  The only work-around I have come up with for this is to
&gt; make the horizontal
&gt;  # scrollbar &#34;non-automatic&#34; &#40;i.e. so it&#39;s always there&#41;, or to
&gt; eliminate it entirely.
&gt; # Once the problem occurs the only solution is to re-start the widget.
&gt; 
&gt; use Tk;
&gt; require Tk::ROText;
&gt; 
&gt; $mw  = MainWindow-&gt;new&#40;-title=&gt;&#34;TEST&#34;&#41;;
&gt; $mw-&gt;geometry&#40;&#34;1100x600&#34;&#41;;
&gt; $mw-&gt;resizable&#40;0,0&#41;;
&gt; 
&gt; $NLINES = 2500;
&gt; 
&gt; $frame = $mw-&gt;Labelframe&#40;-font=&gt;[&#39;Courier&#39;,&#39;14&#39;,&#39;normal&#39;],-
&gt; borderwidth=&gt;2&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;
&gt; 
&gt; # the following line creates &#39;automatic&#39; scrollbars at the bottom of
&gt; the widget and
&gt; # at the right, which appear automatically when text width/height
&gt; exceeds widget
&gt; # dimension
&gt; $mssg_text = $frame-&gt;Scrolled&#40;&#39;ROText&#39;,-font=&gt;[&#39;Courier&#39;,&#39;14&#39;],-
&gt; background=&gt;&#34;wheat&#34;,-scrollbars=&gt;&#34;osoe&#34;,-foreground=&gt;&#34;black&#34;,-
&gt; wrap=&gt;&#34;none&#34;&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;
&gt; 
&gt; # in the following line the horizontal scrollbar has been disabled
&gt; #$mssg_text = $frame-&gt;Scrolled&#40;&#39;ROText&#39;,-font=&gt;[&#39;Courier&#39;,&#39;14&#39;],-
&gt; background=&gt;&#34;wheat&#34;,-scrollbars=&gt;&#34;oe&#34;,-foreground=&gt;&#34;black&#34;,-
&gt; wrap=&gt;&#34;none&#34;&#41; -&gt; pack&#40;-fill=&gt;&#34;both&#34;, -side=&gt;&#34;top&#34;, -expand=&gt;&#34;true&#34;&#41;;
&gt; 
&gt; &#38;FillTextWidget&#40;&#41;;
&gt; 
&gt; MainLoop;
&gt; 
&gt; #----------------------------------------
&gt; 
&gt; sub FillTextWidget {
&gt; 
&gt; # fill text widget with random-length lines
&gt; 
&gt;     for &#40;$knt1=1;$knt1&lt;$NLINES;$knt1++&#41; {
&gt;       $line = $knt1 . &#34; TEST&#34;;
&gt;         $randomNumber = int&#40;rand&#40;20&#41;&#41;;
&gt;         for &#40;$knt2=0;$knt2&lt;$randomNumber;$knt2++&#41; {
&gt;         $line = $line . &#34; TEST&#34;;
&gt;         }
&gt;         $line = $line . &#34;\n&#34;;
&gt;         $mssg_text-&gt;insert&#40;&#39;end&#39;,&#34;$line&#34;&#41;;
&gt;     }
&gt; 
&gt; }
</div>




  
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1632329/874749/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/874749">with headers</a>
<br />
<span class="downloadcontenttype">text/html 8.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1835028" href="/Public/Bug/Display.html?id=114203#txn-1835028">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;24&nbsp;22:16:37&nbsp;2019</span>
    <span class="description">CAC [...] cpan.org -  Cc CAC added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.346726</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
