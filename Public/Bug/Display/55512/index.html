<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #55512 for Net-Daemon: Patch for 5.10 failures &#40;closes 39759, 50300, 53833&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #55512 for Net-Daemon: Patch for 5.10 failures &#40;closes 39759, 50300, 53833&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-Daemon">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-Daemon">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-Daemon">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-Daemon">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Daemon">Net-Daemon CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">55512</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">6 hours (360 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-Daemon">Net-Daemon</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TODDR [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mcmahon [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22384-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.43    </td>
  </tr>
  <tr id="CF-22385-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Net-Daemon-5.10-support.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/747104/386362/Net-Daemon-5.10-support.patch">
Fri Mar 12 18:26:14 2010 (2.6k) by mcmahon [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=55512">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-747104" href="/Public/Bug/Display.html?id=55512#txn-747104">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;12&nbsp;18:26:14&nbsp;2010</span>
    <span class="description">mcmahon [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Patch for 5.10 failures &#40;closes 39759, 50300, 53833&#41;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/747104/386361/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/386361">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 273b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached patch fixes the failing tests in 0.43 under 5.10.1.

The problem is that the code uses the old thread model; the attached
code checks for 5.10  or better, loads the appropriate thread modules,
and shares the variables that throw the errors.

Test suite passes.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net-Daemon-5.10-support.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/747104/386362/Net-Daemon-5.10-support.patch">Download Net-Daemon-5.10-support.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ruad Net-Daemon/ChangeLog Net-Daemon-fixed/ChangeLog
--- Net-Daemon/ChangeLog	2010-03-12 14:38:33.000000000 -0800
+++ Net-Daemon-fixed/ChangeLog	2010-03-12 14:45:56.000000000 -0800
@@ -1,4 +1,7 @@
-
+2009-03-12  Joe McMahon     &lt;mcmahon@blekko.com&gt; &#40;0.44&#41;
+	* Added necessary thread sharing to work with 5.10
+	  threads model: regexp-threads, 
+	* Bumped minimum required perl to 5.10.
 2007-06-17  Malcolm Nooning  &lt;m.nooning@comcast.net&gt; &#40;0.43&#41;
         * lib/Net/Daemon.pm  Needed to up the VERSION number
 2007-06-16  Malcolm Nooning  &lt;m.nooning@comcast.net&gt; &#40;0.42&#41;
diff -ruad Net-Daemon/lib/Net/Daemon.pm Net-Daemon-fixed/lib/Net/Daemon.pm
--- Net-Daemon/lib/Net/Daemon.pm	2010-03-12 14:38:33.000000000 -0800
+++ Net-Daemon-fixed/lib/Net/Daemon.pm	2010-03-12 15:13:14.000000000 -0800
@@ -20,7 +20,6 @@
 #
 ############################################################################
 
-require 5.004;
 use strict;
 
 use Getopt::Long &#40;&#41;;
@@ -30,10 +29,21 @@
 use Net::Daemon::Log &#40;&#41;;
 use POSIX &#40;&#41;;
 
-
 package Net::Daemon;
 
-$Net::Daemon::VERSION = &#39;0.43&#39;;
+# Dummy share&#40;&#41; in case we&#39;re not 5.10. If we are, require/import of 
+# threads::shared will replace it appropriately.
+my $this_is_510 = $^V ge v5.10.0;
+if &#40;$this_is_510&#41; {
+ no warnings &#39;redefine&#39;;
+ eval { require threads; };
+ eval { require threads::shared; };
+}
+else {
+  eval { require Threads; };
+}
+
+$Net::Daemon::VERSION = &#39;0.43&#39;;
 @Net::Daemon::ISA = qw&#40;Net::Daemon::Log&#41;;
 
 #
@@ -41,6 +51,7 @@
 #   regexp-threads.&#41;
 #
 $Net::Daemon::RegExpLock = 1;
+threads::shared::share&#40;\$Net::Daemon::RegExpLock&#41; if $this_is_510;
 
 use vars qw&#40;$exit&#41;;
 
diff -ruad Net-Daemon/log Net-Daemon-fixed/log
--- Net-Daemon/log	2010-03-12 14:38:33.000000000 -0800
+++ Net-Daemon-fixed/log	2010-03-12 15:13:32.000000000 -0800
@@ -1,10 +1,10 @@
-ok 3
-ok 2
 ok 1
+ok 3
 ok 6
-ok 4
+ok 2
 ok 5
-ok 7
-ok 9
 ok 10
+ok 9
+ok 4
+ok 7
 ok 8
diff -ruad Net-Daemon/regexp-threads Net-Daemon-fixed/regexp-threads
--- Net-Daemon/regexp-threads	2010-03-12 14:38:33.000000000 -0800
+++ Net-Daemon-fixed/regexp-threads	2010-03-12 15:11:30.000000000 -0800
@@ -13,9 +13,18 @@
 #
 #
 
+my $this_is_510 = $^V ge v5.10.0;
+
 use Thread &#40;&#41;;
+if &#40;$this_is_510&#41; {
+  eval {require threads::shared};
+}
 
 my $numChilds;
+if &#40;$this_is_510&#41; {
+  eval { threads::shared::share&#40;$numChilds&#41; };
+}
+
 my $regExpLock = @ARGV ? 1 : 0;
 
 # Repeat generating a random number and check if it contains the
diff -ruad Net-Daemon/t/threadm.t Net-Daemon-fixed/t/threadm.t
--- Net-Daemon/t/threadm.t	2010-03-12 14:38:33.000000000 -0800
+++ Net-Daemon-fixed/t/threadm.t	2010-03-12 14:47:19.000000000 -0800
@@ -24,7 +24,6 @@
     exit 0;
 }
 
-
 my&#40;$handle, $port&#41;;
 if &#40;@ARGV&#41; {
     $port = shift @ARGV;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762245" href="/Public/Bug/Display.html?id=55512#txn-762245">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;17:12:36&nbsp;2010</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/762245/394321/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394321">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 620b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Joe,

First of all, thank you very much for your patch!  

It appears that the patch for t/threadm.t got cut off.  It ended with
the two lines below.
 my&#40;$handle, $port&#41;;
 if &#40;@ARGV&#41; {
     $port = shift @ARGV;

For one, it introduces a &#39;{&#39; without a corresponding &#39;}&#39;, so I fear I do
not have the entire patch.

For another, the line below is missing.
 = Net::Daemon::Test-&gt;Child
    &#40;$numTests, $^X, &#39;t/server&#39;, &#39;--timeout&#39;, 20, &#39;--mode=threads&#39;&#41;;

Can you please comment on this?

Also, I have a Windows and a Linux box to test this on.  What machine&#40;s&#41;
do you have to test on?

Thanks again for doing this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762248" href="/Public/Bug/Display.html?id=55512#txn-762248">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;17:12:37&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-773615" href="/Public/Bug/Display.html?id=55512#txn-773615">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;06&nbsp;23:46:14&nbsp;2010</span>
    <span class="description">TODDR [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-773616" href="/Public/Bug/Display.html?id=55512#txn-773616">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;06&nbsp;23:47:19&nbsp;2010</span>
    <span class="description">TODDR [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/773616/400510/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/400510">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 163b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ll need to look into this item further. The patch has made perl 5.10 the minimum version. If 
that&#39;s really required, we&#39;ll need to look at other possible fixes.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-773643" href="/Public/Bug/Display.html?id=55512#txn-773643">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;07&nbsp;03:09:08&nbsp;2010</span>
    <span class="description">mcmahon [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/773643/400523/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/400523">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 181b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry, haven&#39;t been monitoring. I&#39;ll repost that tomorrow. I think it may be possible to check the 
Perl version and leave it still at 5.8. If I can, I&#39;ll try that tomorrow as well.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-805018" href="/Public/Bug/Display.html?id=55512#txn-805018">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;16&nbsp;10:07:14&nbsp;2010</span>
    <span class="description">m.nooning [...] comcast.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/805018/417342/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/417342">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 999b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">My previous reply still holds.  In addition, I have been looking into
the reason the threads tests no longer work.

The thread model used may be the one that was removed from Perl as of
version 5.10.  If so, the threads portion of the Net::Daemon module will
have to be rewritten to support the new version of threads.  &#34;If&#34;
statements would have to be put in to differentiate between the threads
model/modules used, based on the Perl version.  Unfortunately, I do not
know threads programming, and I do not have plans to learn it.

Until we get a more knowledgeable person to look into this, the
t/thread.t tests will fail for Perl &gt; 5.10.

I will be updating the Net::Daemon cpan site to warn users.  I will
continue to allow the tests to fail, as I think it is better to let
users of the new Perl versions know right away that they can no longer
rely on Net::Daemon if they need to use threads.

Eventually, this module will have to be updated or deprecated.

Anyone is welcome to add comments.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-805687" href="/Public/Bug/Display.html?id=55512#txn-805687">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;18&nbsp;02:54:46&nbsp;2010</span>
    <span class="description">dmacks [...] netspace.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55512] Patch for 5.10 failures &#40;closes 39759, 50300, 53833&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 18 Jul 2010 02:54:37 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Daemon [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Daniel Macks&#34; &lt;dmacks [...] netspace.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/805687/417706/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/417706">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 616b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The patcher and the patch assert that 5.10 is a formal requirement, but
I don&#39;t see where in the patch it&#39;s actually necessary to bump that
high. The adjustments to the module code appear protected by &#34;if &#40;$^V
ge v5.10.0&#41;&#34; with alternate adjustments &#40;or fallback to existing module
code&#41; on lower platforms. And that&#39;s the ideal behavior: add new
calling semantics or other workarounds on platforms that fail or
otherwise need them and leave the platforms where the existing module
works unchanged &#40;rather than *replacing* the works-on-old with
needed-on-new code&#41;.
Â 
dan
Â 
--
Daniel Macks
  dmacks@netspace.org
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-805695" href="/Public/Bug/Display.html?id=55512#txn-805695">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;18&nbsp;03:55:56&nbsp;2010</span>
    <span class="description">mcmahon [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/805695/417709/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/417709">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 760b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 18 02:54:46 2010, dmacks@netspace.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The patcher and the patch assert that 5.10 is a formal requirement, but
&gt; I don&#39;t see where in the patch it&#39;s actually necessary to bump that
&gt; high. The adjustments to the module code appear protected by &#34;if &#40;$^V
&gt; ge v5.10.0&#41;&#34; with alternate adjustments &#40;or fallback to existing module
&gt; code&#41; on lower platforms. And that&#39;s the ideal behavior: add new
&gt; calling semantics or other workarounds on platforms that fail or
&gt; otherwise need them and leave the platforms where the existing module
&gt; works unchanged &#40;rather than *replacing* the works-on-old with
&gt; needed-on-new code&#41;.
</div>Yep, you&#39;re right. I simply forgot to reset the required version after testing with 5.10 to make 
sure the patch worked.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-905133" href="/Public/Bug/Display.html?id=55512#txn-905133">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;01&nbsp;11:38:16&nbsp;2011</span>
    <span class="description">MNOONING [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">360 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> m.nooning [...] comcast.net, dmacks [...] netspace.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/905133/469495/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/469495">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 206b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I retried this on Windows, Fedora Linux from a few months ago, then
updated the Fedora and it still passes, so it looks like version 0.46 is
a winner.  Again, thank you very, very much for all of your help.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-905137" href="/Public/Bug/Display.html?id=55512#txn-905137">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;01&nbsp;11:38:17&nbsp;2011</span>
    <span class="description">MNOONING [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.551587</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
