<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #34976 for Mail-IMAPClient: Bugs in Mail::IMAPClient</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #34976 for Mail-IMAPClient: Bugs in Mail::IMAPClient</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Mail-IMAPClient">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Mail-IMAPClient">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Mail-IMAPClient">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Mail-IMAPClient">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mail-IMAPClient">Mail-IMAPClient CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">34976</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Mail-IMAPClient">Mail-IMAPClient</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jwdevel [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19960-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19961-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=34976">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-448136" href="/Public/Bug/Display.html?id=34976#txn-448136">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;13&nbsp;19:50:57&nbsp;2008</span>
    <span class="description">jwdevel [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bugs in Mail::IMAPClient</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 13 Apr 2008 16:50:37 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-IMAPClient [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;j w&#34; &lt;jwdevel [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/448136/220056/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/220056">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,
I&#39;m playing around with Mail::IMAPClient, and there&#39;s a couple issues that
came up:

&#40;1&#41; The expunge method seems buggy. There is one &#39;ne&#39; that I think should be
&#39;eq&#39;
Here is a patch against v3.05:

diff --git a/site/lib/Mail/IMAPClient.pm b/site/lib/Mail/IMAPClient.pm
--- a/site/lib/Mail/IMAPClient.pm
+++ b/site/lib/Mail/IMAPClient.pm
@@ -1761,7 +1761,7 @@
         or return;

     my $old = $self-&gt;Folder;
-    if&#40;defined $old &#38;&#38; $folder eq $old&#41;
+    if&#40;defined $old &#38;&#38; $folder ne $old&#41;
     {   $self-&gt;select&#40;$folder&#41;;
         my $succ = $self-&gt;_imap_command&#40;&#39;EXPUNGE&#39;&#41;;
         $self-&gt;select&#40;$old&#41;;

As it is now, passing the name of a mailbox to the function will likely
cause it to expunge the wrong mailbox.

&#40;2&#41; Calling expunge with no arguments returns undef, rather than expunging
the currently selected mailbox, as the docs indicate.
This seems like it must be by design, since there is the following code at
the beginning of expunge:

    sub expunge
    {   my &#40;$self, $folder&#41; = @_;
        defined $folder
            or return;

So if no $folder is passed in, it returns undef. It&#39;s just not what the docs
indicate.

&#40;3&#41; I can&#39;t seem to get the &#34;default method&#34; to work. I tried to use
$imap-&gt;EXPUNGE as a workaround to the above issues, but it didn&#39;t work.
I tried the example in the documentation, and it doesn&#39;t seem to work
either:

Try this script:

    use Mail::IMAPClient;
    my $imap = Mail::IMAPClient-&gt;new&#40;
                    User =&gt; &#39;joeblo&#39;,
                    Password =&gt; &#39;blabla&#39;,
                    Debug =&gt; 1,
                    &#41;;
    my @results = $imap-&gt;FOO&#40;&#34;bar&#34;,&#34;an example&#34;,&#34;of the default&#34;&#41;;


That gives me the error: Can&#39;t locate object method &#34;FOO&#34; via package
&#34;Mail::IMAPClient&#34; at ...

I would expect it to error &#40;since it&#39;s not connected&#41;, but it says it can&#39;t
even find the method to run. Or perhaps I misunderstand how the default
method functionality works?

My setup:
Perl v5.8.7 built for MSWin32-x86-multi-thread
Windows XP

Let me know if you need other info
-John
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/448136/220057/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/220057">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.9k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-448139" href="/Public/Bug/Display.html?id=34976#txn-448139">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;13&nbsp;19:58:22&nbsp;2008</span>
    <span class="description">jwdevel [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34976] AutoReply: Bugs in Mail::IMAPClient</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 13 Apr 2008 16:58:10 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-IMAPClient [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;j w&#34; &lt;jwdevel [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/448139/220061/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/220061">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I just realized a better fix for issue &#40;1&#41; is to swap the code in the
if/else, rather than switch &#39;eq&#39; to &#39;ne&#39; &#40;for handling undef better&#41;
Better patch:

diff --git a/site/lib/Mail/IMAPClient.pm b/site/lib/Mail/IMAPClient.pm
--- a/site/lib/Mail/IMAPClient.pm
+++ b/site/lib/Mail/IMAPClient.pm
@@ -1762,14 +1762,14 @@

     my $old = $self-&gt;Folder;
     if&#40;defined $old &#38;&#38; $folder eq $old&#41;
+    {   $self-&gt;_imap_command&#40;&#39;EXPUNGE&#39;&#41;
+            or return undef;
+    }
+    else
     {   $self-&gt;select&#40;$folder&#41;;
         my $succ = $self-&gt;_imap_command&#40;&#39;EXPUNGE&#39;&#41;;
         $self-&gt;select&#40;$old&#41;;
         $succ or return undef;
-    }
-    else
-    {   $self-&gt;_imap_command&#40;&#39;EXPUNGE&#39;&#41;
-            or return undef;
     }

     wantarray ? $self-&gt;History : $self-&gt;Results;


-John

On Sun, Apr 13, 2008 at 4:50 PM, Bugs in Mail-IMAPClient via RT &lt;
bug-Mail-IMAPClient@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Greetings,
&gt;
&gt; This message has been automatically generated in response to the
&gt; creation of a trouble ticket regarding:
&gt;        &#34;Bugs in Mail::IMAPClient&#34;,
&gt; a summary of which appears below.
&gt;
&gt; There is no need to reply to this message right now.  Your ticket has been
&gt; assigned an ID of [rt.cpan.org #34976].  Your ticket is accessible
&gt; on the web at:
&gt;
&gt;    <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34976">http://rt.cpan.org/Ticket/Display.html?id=34976</a></span>
&gt;
&gt; Please include the string:
&gt;
&gt;         [rt.cpan.org #34976]
&gt;
&gt; in the subject line of all future correspondence about this issue. To do
&gt; so,
&gt; you may reply to this message.
&gt;
&gt;                        Thank you,
&gt;                        bug-Mail-IMAPClient@rt.cpan.org
&gt;
&gt; -------------------------------------------------------------------------
&gt; Hello,
&gt; I&#39;m playing around with Mail::IMAPClient, and there&#39;s a couple issues that
&gt; came up:
&gt;
&gt; &#40;1&#41; The expunge method seems buggy. There is one &#39;ne&#39; that I think should
&gt; be
&gt; &#39;eq&#39;
&gt; Here is a patch against v3.05:
&gt;
&gt; diff --git a/site/lib/Mail/IMAPClient.pm b/site/lib/Mail/IMAPClient.pm
&gt; --- a/site/lib/Mail/IMAPClient.pm
&gt; +++ b/site/lib/Mail/IMAPClient.pm
&gt; @@ -1761,7 +1761,7 @@
&gt;         or return;
&gt;
&gt;     my $old = $self-&gt;Folder;
&gt; -    if&#40;defined $old &#38;&#38; $folder eq $old&#41;
&gt; +    if&#40;defined $old &#38;&#38; $folder ne $old&#41;
&gt;     {   $self-&gt;select&#40;$folder&#41;;
&gt;         my $succ = $self-&gt;_imap_command&#40;&#39;EXPUNGE&#39;&#41;;
&gt;         $self-&gt;select&#40;$old&#41;;
&gt;
&gt; As it is now, passing the name of a mailbox to the function will likely
&gt; cause it to expunge the wrong mailbox.
&gt;
&gt; &#40;2&#41; Calling expunge with no arguments returns undef, rather than expunging
&gt; the currently selected mailbox, as the docs indicate.
&gt; This seems like it must be by design, since there is the following code at
&gt; the beginning of expunge:
&gt;
&gt;    sub expunge
&gt;    {   my &#40;$self, $folder&#41; = @_;
&gt;        defined $folder
&gt;            or return;
&gt;
&gt; So if no $folder is passed in, it returns undef. It&#39;s just not what the
&gt; docs
&gt; indicate.
&gt;
&gt; &#40;3&#41; I can&#39;t seem to get the &#34;default method&#34; to work. I tried to use
&gt; $imap-&gt;EXPUNGE as a workaround to the above issues, but it didn&#39;t work.
&gt; I tried the example in the documentation, and it doesn&#39;t seem to work
&gt; either:
&gt;
&gt; Try this script:
&gt;
&gt;    use Mail::IMAPClient;
&gt;    my $imap = Mail::IMAPClient-&gt;new&#40;
&gt;                    User =&gt; &#39;joeblo&#39;,
&gt;                    Password =&gt; &#39;blabla&#39;,
&gt;                    Debug =&gt; 1,
&gt;                    &#41;;
&gt;    my @results = $imap-&gt;FOO&#40;&#34;bar&#34;,&#34;an example&#34;,&#34;of the default&#34;&#41;;
&gt;
&gt;
&gt; That gives me the error: Can&#39;t locate object method &#34;FOO&#34; via package
&gt; &#34;Mail::IMAPClient&#34; at ...
&gt;
&gt; I would expect it to error &#40;since it&#39;s not connected&#41;, but it says it
&gt; can&#39;t
&gt; even find the method to run. Or perhaps I misunderstand how the default
&gt; method functionality works?
&gt;
&gt; My setup:
&gt; Perl v5.8.7 built for MSWin32-x86-multi-thread
&gt; Windows XP
&gt;
&gt; Let me know if you need other info
&gt; -John
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/448139/220062/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/220062">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.7k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-448341" href="/Public/Bug/Display.html?id=34976#txn-448341">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;14&nbsp;03:50:46&nbsp;2008</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34976] Bugs in Mail::IMAPClient</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 14 Apr 2008 09:50:31 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> j w via RT &lt;bug-Mail-IMAPClient [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/448341/220151/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/220151">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* j w via RT &#40;bug-Mail-IMAPClient@rt.cpan.org&#41; [080413 23:50]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sun Apr 13 19:50:57 2008: Request 34976 was acted upon.
&gt; Transaction: Ticket created by jwdevel@gmail.com
&gt;        Queue: Mail-IMAPClient
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=34976">http://rt.cpan.org/Ticket/Display.html?id=34976</a></span> &gt;
&gt; 
&gt; I&#39;m playing around with Mail::IMAPClient, and there&#39;s a couple issues that
&gt; came up:
&gt; 
&gt; &#40;1&#41; The expunge method seems buggy. There is one &#39;ne&#39; that I think
&gt; should be &#39;eq&#39;
</div>
Try to understand the logic in the pre-2.99 code, and you will understand
it.  Your observations are corrent


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; -    if&#40;defined $old &#38;&#38; $folder eq $old&#41;
&gt; +    if&#40;defined $old &#38;&#38; $folder ne $old&#41;
</div>
Yes.  And your follow-up is better, indeed.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; &#40;2&#41; Calling expunge with no arguments returns undef, rather than expunging
&gt; the currently selected mailbox, as the docs indicate.
&gt; So if no $folder is passed in, it returns undef. It&#39;s just not what the docs
&gt; indicate.
</div>
True.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40;3&#41; I can&#39;t seem to get the &#34;default method&#34; to work. I tried to use
&gt; $imap-&gt;EXPUNGE as a workaround to the above issues, but it didn&#39;t work.
</div>
I had removed this in 2.99, when I took over maintenance, because 
this auto-generation of methods is dangerous &#40;typos not detected&#41; and 
stops people from contributing the extensions.

The text in the manual now has changed.
Do you like an intermediate release of this, or can you live with your
manually fixed version?
-- 
Thanks for the improvements,

               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-448342" href="/Public/Bug/Display.html?id=34976#txn-448342">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;14&nbsp;03:50:47&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-449728" href="/Public/Bug/Display.html?id=34976#txn-449728">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;16&nbsp;01:12:28&nbsp;2008</span>
    <span class="description">jwdevel [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #34976] Bugs in Mail::IMAPClient</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 15 Apr 2008 22:11:51 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-IMAPClient [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;j w&#34; &lt;jwdevel [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/449728/220911/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/220911">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 386b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Apr 14, 2008 at 12:50 AM, Mark Overmeer via RT
&lt;bug-Mail-IMAPClient@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Do you like an intermediate release of this, or can you live with your
&gt; manually fixed version?
</div>
It&#39;s just a small personal project - I can use my local changes for now.
Thanks for your prompt reply; always nice to know there&#39;s someone
listening at the other end of the line &#40;:

-John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-455115" href="/Public/Bug/Display.html?id=34976#txn-455115">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;28&nbsp;03:24:43&nbsp;2008</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/455115/223738/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/223738">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 44b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">3.07 released, which should fix this problem
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-455118" href="/Public/Bug/Display.html?id=34976#txn-455118">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;28&nbsp;03:24:46&nbsp;2008</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.567612</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
