<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #110763 for WWW-Scripter-Plugin-JavaScript: Rare segfaults of t/js.t</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #110763 for WWW-Scripter-Plugin-JavaScript: Rare segfaults of t/js.t</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/WWW-Scripter-Plugin-JavaScript/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/WWW-Scripter-Plugin-JavaScript/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/WWW-Scripter-Plugin-JavaScript/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/WWW-Scripter-Plugin-JavaScript/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Scripter-Plugin-JavaScript">WWW-Scripter-Plugin-JavaScript CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">110763</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/WWW-Scripter-Plugin-JavaScript/Active/">WWW-Scripter-Plugin-JavaScript</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-226804-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.008a    </td>
  </tr>
  <tr id="CF-226805-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;30&nbsp;04:00:59&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Rare segfaults of t/js.t</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">At CPAN Testers there&#39;s currently one report because of a segfault while running js.t: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/52a73802-6878-11e4-8639-d4c352be3a26">http://www.cpantesters.org/cpan/report/52a73802-6878-11e4-8639-d4c352be3a26</a></span>

I just created test reports with the same problem with perl 5.23.6 and 5.22.1 &#40;linux debian wheezy&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;01&nbsp;16:41:34&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Dec 30 04:00:59 2015, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; At CPAN Testers there&#39;s currently one report because of a segfault
&gt; while running js.t: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/52a73802-">http://www.cpantesters.org/cpan/report/52a73802-</a></span>
&gt; 6878-11e4-8639-d4c352be3a26
&gt; 
&gt; I just created test reports with the same problem with perl 5.23.6 and
&gt; 5.22.1 &#40;linux debian wheezy&#41;.
</div>
Could you provide a backtrace?

Thank you.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;01&nbsp;16:41:34&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;01&nbsp;16:55:56&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-01-01 16:41:34, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Dec 30 04:00:59 2015, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; At CPAN Testers there&#39;s currently one report because of a segfault
&gt; &gt; while running js.t: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/52a73802-">http://www.cpantesters.org/cpan/report/52a73802-</a></span>
&gt; &gt; 6878-11e4-8639-d4c352be3a26
&gt; &gt; 
&gt; &gt; I just created test reports with the same problem with perl 5.23.6 and
&gt; &gt; 5.22.1 &#40;linux debian wheezy&#41;.
</div>&gt; 
&gt; Could you provide a backtrace?
&gt; 
&gt; Thank you.
</div>
I have only non-debugging perls available. Here&#39;s one:

Core was generated by `perl5.23.6 -Mblib t/js.t&#39;.
Program terminated with signal 11, Segmentation fault.
#0  0x000000000044a1fb in S_gv_fetchmeth_internal &#40;&#41;
&#40;gdb&#41; bt
#0  0x000000000044a1fb in S_gv_fetchmeth_internal &#40;&#41;
#1  0x000000000044ab2b in Perl_Gv_AMupdate &#40;&#41;
#2  0x000000000044b00f in Perl_amagic_call &#40;&#41;
#3  0x000000000044c45d in Perl_amagic_deref_call &#40;&#41;
#4  0x00000000004b6f32 in Perl_pp_multideref &#40;&#41;
#5  0x00000000004ae583 in Perl_runops_standard &#40;&#41;
#6  0x0000000000445800 in perl_run &#40;&#41;
#7  0x00000000004243c5 in main &#40;&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;01&nbsp;21:04:18&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jan 01 16:55:56 2016, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2016-01-01 16:41:34, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; On Wed Dec 30 04:00:59 2015, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; At CPAN Testers there&#39;s currently one report because of a segfault
&gt; &gt; &gt; while running js.t: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/52a73802-">http://www.cpantesters.org/cpan/report/52a73802-</a></span>
&gt; &gt; &gt; 6878-11e4-8639-d4c352be3a26
&gt; &gt; &gt; 
&gt; &gt; &gt; I just created test reports with the same problem with perl 5.23.6 and
&gt; &gt; &gt; 5.22.1 &#40;linux debian wheezy&#41;.
</div>&gt; &gt; 
&gt; &gt; Could you provide a backtrace?
&gt; &gt; 
&gt; &gt; Thank you.
</div>&gt; 
&gt; I have only non-debugging perls available. Here&#39;s one:
&gt; 
&gt; Core was generated by `perl5.23.6 -Mblib t/js.t&#39;.
&gt; Program terminated with signal 11, Segmentation fault.
&gt; #0  0x000000000044a1fb in S_gv_fetchmeth_internal &#40;&#41;
&gt; &#40;gdb&#41; bt
&gt; #0  0x000000000044a1fb in S_gv_fetchmeth_internal &#40;&#41;
&gt; #1  0x000000000044ab2b in Perl_Gv_AMupdate &#40;&#41;
&gt; #2  0x000000000044b00f in Perl_amagic_call &#40;&#41;
&gt; #3  0x000000000044c45d in Perl_amagic_deref_call &#40;&#41;
&gt; #4  0x00000000004b6f32 in Perl_pp_multideref &#40;&#41;
&gt; #5  0x00000000004ae583 in Perl_runops_standard &#40;&#41;
&gt; #6  0x0000000000445800 in perl_run &#40;&#41;
&gt; #7  0x00000000004243c5 in main &#40;&#41;
</div>
Thank you. Unfortunately that’s not much to go by. Is this reproducible enough for a bisect?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;02&nbsp;06:02:32&nbsp;2016</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-01-01 21:04:18, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Jan 01 16:55:56 2016, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On 2016-01-01 16:41:34, SPROUT wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Wed Dec 30 04:00:59 2015, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; At CPAN Testers there&#39;s currently one report because of a
&gt; &gt; &gt; &gt; segfault
&gt; &gt; &gt; &gt; while running js.t:
&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/52a73802-">http://www.cpantesters.org/cpan/report/52a73802-</a></span>
&gt; &gt; &gt; &gt; 6878-11e4-8639-d4c352be3a26
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I just created test reports with the same problem with perl
&gt; &gt; &gt; &gt; 5.23.6 and
&gt; &gt; &gt; &gt; 5.22.1 &#40;linux debian wheezy&#41;.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Could you provide a backtrace?
&gt; &gt; &gt;
&gt; &gt; &gt; Thank you.
</div>&gt; &gt;
&gt; &gt; I have only non-debugging perls available. Here&#39;s one:
&gt; &gt;
&gt; &gt; Core was generated by `perl5.23.6 -Mblib t/js.t&#39;.
&gt; &gt; Program terminated with signal 11, Segmentation fault.
&gt; &gt; #0  0x000000000044a1fb in S_gv_fetchmeth_internal &#40;&#41;
&gt; &gt; &#40;gdb&#41; bt
&gt; &gt; #0  0x000000000044a1fb in S_gv_fetchmeth_internal &#40;&#41;
&gt; &gt; #1  0x000000000044ab2b in Perl_Gv_AMupdate &#40;&#41;
&gt; &gt; #2  0x000000000044b00f in Perl_amagic_call &#40;&#41;
&gt; &gt; #3  0x000000000044c45d in Perl_amagic_deref_call &#40;&#41;
&gt; &gt; #4  0x00000000004b6f32 in Perl_pp_multideref &#40;&#41;
&gt; &gt; #5  0x00000000004ae583 in Perl_runops_standard &#40;&#41;
&gt; &gt; #6  0x0000000000445800 in perl_run &#40;&#41;
&gt; &gt; #7  0x00000000004243c5 in main &#40;&#41;
</div>&gt; 
&gt; Thank you. Unfortunately that’s not much to go by. Is this
&gt; reproducible enough for a bisect?
</div>
The random nature makes it somewhat difficult. I tried

    /opt/perl-5.X.Y/bin/perl -Mblib t/js.t

repeatedly on some perl 5.21.x installations and found the following:

    * 5.21.8 -&gt; fail after 195 iterations
    * 5.21.5 -&gt; fail after 5 iterations
    * 5.21.4 -&gt; fail after 111 iterations
    * 5.21.3 -&gt; no fail after 1328 iterations

So maybe the problem appeared between 5.21.3 and 5.21.4, and a bisect process should probably try up to 1000 iterations to be sure.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;02&nbsp;08:36:59&nbsp;2016</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Got this with 5.21.4. Will try to bisect if still necessary.

&#40;gdb&#41; bt
#0  0x0000000000443397 in Perl_gv_fetchmeth_pvn &#40;stash=stash@entry=0x332f0e0, 
    name=name@entry=0x547f69 &#34;&#40;${}&#34;, len=4, level=level@entry=-1, 
    flags=flags@entry=0&#41; at gv.c:775
#1  0x0000000000443f3f in Perl_Gv_AMupdate &#40;stash=stash@entry=0x332f0e0, 
    destructing=destructing@entry=false&#41; at gv.c:2654
#2  0x00000000004444b0 in Perl_amagic_call &#40;left=left@entry=0x3606880, 
    right=0x7917e0 &lt;PL_sv_undef&gt;, method=method@entry=2, flags=flags@entry=9&#41;
    at gv.c:2971
#3  0x000000000044602b in Perl_amagic_deref_call &#40;ref=ref@entry=0x3606880, 
    method=2&#41; at gv.c:2905
#4  0x00000000004a6b01 in Perl_pp_rv2av &#40;&#41; at pp_hot.c:902
#5  0x00000000004a40f3 in Perl_runops_standard &#40;&#41; at run.c:41
#6  0x000000000043da99 in S_run_body &#40;oldscope=&lt;optimized out&gt;&#41; at perl.c:2411
#7  perl_run &#40;my_perl=&lt;optimized out&gt;&#41; at perl.c:2339
#8  0x000000000041e145 in main &#40;argc=2, argv=0x7fff0f08c118, 
    env=0x7fff0f08c130&#41; at perlmain.c:114
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;02&nbsp;13:11:04&nbsp;2016</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bisect: v5.21.3-174-g4dda930

Already known from BBC on PEVANS/Future-0.29.tar.gz

<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=122735">https://rt.perl.org/rt3/Ticket/Display.html?id=122735</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;27&nbsp;12:57:30&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jan 02 13:11:04 2016, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Bisect: v5.21.3-174-g4dda930
&gt; 
&gt; Already known from BBC on PEVANS/Future-0.29.tar.gz
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=122735">https://rt.perl.org/rt3/Ticket/Display.html?id=122735</a></span>
</div>
Thank you.  I have only now got around to debugging this.  I cannot reproduce the crash in current bleadperl &#40;v5.25.1-75-gcbef69c&#41;.  Are you able to produce it?  If not, could you do a bisect to see when it was fixed?  I want to see which perl versions will need a workaround.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other Forward Transaction even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;29&nbsp;14:11:31&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Forwarded Transaction #1631281 to ANDK@cpan.org</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;30&nbsp;16:03:44&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri May 27 12:57:30 2016, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Jan 02 13:11:04 2016, ANDK wrote:
<div class="message-stanza open">&gt; &gt; Bisect: v5.21.3-174-g4dda930
&gt; &gt;
&gt; &gt; Already known from BBC on PEVANS/Future-0.29.tar.gz
&gt; &gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.perl.org/rt3/Ticket/Display.html?id=122735">https://rt.perl.org/rt3/Ticket/Display.html?id=122735</a></span>
</div>&gt; 
&gt; Thank you.  I have only now got around to debugging this.  I cannot
&gt; reproduce the crash in current bleadperl &#40;v5.25.1-75-gcbef69c&#41;.  Are
&gt; you able to produce it?  If not, could you do a bisect to see when it
&gt; was fixed?  I want to see which perl versions will need a workaround.
</div>
I managed to do my own bisect:

958cdeac409681891afe77bf60db047296523465 is the first bad commit
commit 958cdeac409681891afe77bf60db047296523465
Author: Tony Cook &lt;tony@develop-help.com&gt;
Date:   Wed Feb 10 14:30:08 2016 +1100

    [perl #127494] don&#39;t cache AUTOLOAD as DESTROY
    
but in some of the commits leading up to it the bisect script was not installing required modules due to test failures.  I have not yet figured out how to get Nicholas’ bisect-runner.pl to skip tests.

So, I don’t trust the bisect result.  In any case, neither the first bad commit nor the first good commits really tells me anything.  It seems like a latent bug that was uncovered and then hidden again.

I tried using gdb to see what was going on, and it is a corrupt stash, whose internal fields have been written over.  But the memory gets corrupted some time before the crash, so it’s extremely hard to find the cause.

So now I’m trying to reduce the test script to something that will fail without modules.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;30&nbsp;16:06:13&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon May 30 16:03:44 2016, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have not yet
&gt; figured out how to get Nicholas’ bisect-runner.pl to skip tests.
</div>
Because I had the logic backwards. :-&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;30&nbsp;20:48:04&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon May 30 16:03:44 2016, SPROUT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I managed to do my own bisect:
&gt; 
&gt; 958cdeac409681891afe77bf60db047296523465 is the first bad commit
&gt; commit 958cdeac409681891afe77bf60db047296523465
&gt; Author: Tony Cook &lt;tony@develop-help.com&gt;
&gt; Date:   Wed Feb 10 14:30:08 2016 +1100
&gt; 
&gt; [perl #127494] don&#39;t cache AUTOLOAD as DESTROY
&gt; 
&gt; but in some of the commits leading up to it the bisect script was not
&gt; installing required modules due to test failures.  I have not yet
&gt; figured out how to get Nicholas’ bisect-runner.pl to skip tests.
</div>
With module tests skipped, I’m getting the same results.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So now I’m trying to reduce the test script to something that will
&gt; fail without modules.
</div>
Still trying to do this, but it’s so slow it could take weeks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;09:31:36&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">For my own future reference:

../perl.git/Porting/bisect.pl --no-module-tests --start=v5.21.3 --end=v5.21.4 --with-module=WWW::Scripter::Plugin::JavaScript --cpan-config-dir=/Users/sprout/ -e &#39;chdir &#34;/Users/sprout/perl/dist/WWW-Scripter-Plugin-JavaScript&#34;; for &#40;1..1000&#41; { print &#34;$_\n&#34;;system &#34;$^X t/js.t&#34; and die}&#39;

&#40;That finds when it started crashing.  --expect-fail finds when it stopped crashing.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;15:46:07&nbsp;2016</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">v5.23.7-263-ged8ff0f
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;31&nbsp;21:05:01&nbsp;2016</span>
    <span class="description">$_ = &#39;spro^^*%*^6ut# [...] &#38;$%*c&gt;#!^!#&#38;!pan.org&#39;; y/a-z.@//cd; print -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> ANDK [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 31 15:46:07 2016, ANDK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; v5.23.7-263-ged8ff0f
</div>
Thank you for taking the time to help.  Interestingly, it’s not the same commit I came up with, but maybe that’s not surprising, considering how elusive this bug is.  The commit you cite just changes some macros to inline functions, so it *shouldn’t* change anything, so all it tells me is that the bug may well be present in perl still. It’s just hiding.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
