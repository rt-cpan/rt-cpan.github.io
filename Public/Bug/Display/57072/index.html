<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #57072 for XML-DTD: XML::DTD fails to parse the official SVG DTD correctly</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #57072 for XML-DTD: XML::DTD fails to parse the official SVG DTD correctly</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-DTD/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-DTD/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-DTD/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-DTD/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-DTD">XML-DTD CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">57072</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-DTD/Active/">XML-DTD</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">wohl [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
bitcard [...] lutzgehlen.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-39682-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.08    </td>
  </tr>
  <tr id="CF-39683-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.09    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




example.dtd<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/770760/398849/example.dtd">
Sat May 01 02:12:18 2010 (1k) by LGEHLEN [...] cpan.org
</a>
</font></li>
</ul>


svg11-flat-20030114.dtd<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/770336/398617/svg11-flat-20030114.dtd">
Thu Apr 29 23:26:26 2010 (183.1k) by LGEHLEN [...] cpan.org
</a>
</font></li>
</ul>


XML-DTD-0.09b1.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/770717/398830/XML-DTD-0.09b1.tar.gz">
Fri Apr 30 23:59:18 2010 (40.2k) by osspkg [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;29&nbsp;23:26:26&nbsp;2010</span>
    <span class="description">LGEHLEN [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> XML::DTD fails to parse the official SVG DTD correctly</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I tried to parse the attached official W3C SVG DTD with XML::DTD. If I run

perl -MXML::DTD -e &#39;$dtd=new XML::DTD; open&#40;DTD, &#34;&lt;&#34;,
&#34;svg11-flat-20030114.dtd&#34;&#41;; $dtd-&gt;fread&#40;*DTD&#41;; close&#40;DTD&#41;;
$dtd-&gt;fwrite&#40;*STDOUT&#41;;&#39; &gt; foo.dtd

then svg11-flat-20030114.dtd and foo.dtd are binary equal. However, if I run

perl -MXML::DTD -e &#39;$dtd=new XML::DTD; open&#40;DTD, &#34;&lt;&#34;,
&#34;svg11-flat-20030114.dtd&#34;&#41;; $dtd-&gt;fread&#40;*DTD&#41;; close&#40;DTD&#41;; print
&#34;@{$dtd-&gt;elementlist}\n&#34;;&#39;

then I get nothing.

Anyway, thanks for developing XML::DTD. Hope, you can fix this.
Lutz
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> svg11-flat-20030114.dtd</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/770336/398617/svg11-flat-20030114.dtd">Download svg11-flat-20030114.dtd</a><br />
<span class="downloadcontenttype">application/xml-dtd 183.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;30&nbsp;23:59:18&nbsp;2010</span>
    <span class="description">osspkg [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57072] XML::DTD fails to parse the official SVG DTD  correctly</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 30 Apr 2010 21:58:43 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-DTD [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Brendt Wohlberg &lt;osspkg [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Lutz,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [...]
&gt; I tried to parse the attached official W3C SVG DTD with XML::DTD. If I run
&gt; [...]
&gt; then svg11-flat-20030114.dtd and foo.dtd are binary equal. However, if I run
&gt;
&gt; perl -MXML::DTD -e &#39;$dtd=new XML::DTD; open&#40;DTD, &#34;&lt;&#34;,
&gt; &#34;svg11-flat-20030114.dtd&#34;&#41;; $dtd-&gt;fread&#40;*DTD&#41;; close&#40;DTD&#41;; print
&gt; &#34;@{$dtd-&gt;elementlist}\n&#34;;&#39;
&gt; [...]
</div>
Thanks for the bug report. The SVG DTD is rather complex, and makes
heavy use of entities in element content models, and include sections,
both of which were not being handled properly by XML::DTD. I am
attaching version 0.09b1 which fixes the main problem you reported
&#40;empty elementlist&#41;, and some others I discovered.

Could you please check whether you can find any other problems in
handling of the SVG DTD by 0.09b1? If it seems fine, I will release
0.09 on CPAN. One request: if you do find any more problems, please
try to send a simple test DTD which illustrates the bug, as this will
enable me to fix it significantly faster.

Sincerely,
Brendt
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/770717/398830/XML-DTD-0.09b1.tar.gz">Download XML-DTD-0.09b1.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 40.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;30&nbsp;23:59:19&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;01&nbsp;00:03:19&nbsp;2010</span>
    <span class="description">wohl [...] cpan.org -  Given to WOHL</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;01&nbsp;00:03:47&nbsp;2010</span>
    <span class="description">wohl [...] cpan.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;01&nbsp;02:12:18&nbsp;2010</span>
    <span class="description">LGEHLEN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Brendt,
thanks a lot for the quick response!

On Fri Apr 30 23:59:18 2010, Brendt Wohlberg wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Could you please check whether you can find any other problems in
&gt; handling of the SVG DTD by 0.09b1? If it seems fine, I will release
&gt; 0.09 on CPAN. One request: if you do find any more problems, please
&gt; try to send a simple test DTD which illustrates the bug, as this will
&gt; enable me to fix it significantly faster.
</div>
I have tried &#40;rather superficially&#41; a few things that I am likely to use
in the future like elementlist, attlist, contentmodel and so on, and it
seems to work fine except one thing. The contentspec method of
XML::DTD::Element does not expand entities. The script at the end of
this messages prints out &#34;%SVG.svg.content;&#34;. I don&#39;t think this is
intended. I have tried to distill an example DTD &#40;attached&#41; from the SVG
DTD and hope I did not mess it up. As you said, the SVG DTD is rather
complex. However, the script on the whole DTD shows the same behaviour.
Aside from this, I haven&#39;t found any issues. I just have a few
questions/feature requests which I will send separately by email. Thanks
for your work on XML::DTD.
Best wishes
Lutz

perl script:
use strict;
use warnings;

use XML::DTD;

my $dtd=new XML::DTD;
#open&#40;DTD, &#34;&lt;&#34;, &#34;svg11-flat-20030114.dtd&#34;&#41;; 
open&#40;DTD, &#34;&lt;&#34;, &#34;example.dtd&#34;&#41;;
$dtd-&gt;fread&#40;*DTD&#41;;
close&#40;DTD&#41;;

print $dtd-&gt;element&#40;&#39;svg&#39;&#41;-&gt;contentspec, &#34;\n&#34;;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> example.dtd</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/770760/398849/example.dtd">Download example.dtd</a><br />
<span class="downloadcontenttype">application/xml-dtd 1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;15&nbsp;22:50:46&nbsp;2010</span>
    <span class="description">wohl [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;May&nbsp;15&nbsp;22:50:51&nbsp;2010</span>
    <span class="description">wohl [...] cpan.org -  Fixed in 0.09 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
