<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #49493 for Fey-Loader: Fey loader and large database</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #49493 for Fey-Loader: Fey loader and large database</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Fey-Loader">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Fey-Loader">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Fey-Loader">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Fey-Loader">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Fey-Loader">Fey-Loader CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">49493</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Fey-Loader">Fey-Loader</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
gq1 [...] sanger.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220504-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-220505-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=49493">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660525" href="/Public/Bug/Display.html?id=49493#txn-660525">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;12:06:26&nbsp;2009</span>
    <span class="description">gq1 [...] sanger.ac.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Fey loader and large database</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 07 Sep 2009 17:05:46 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-fey-loader [...] rt.cpan.org,  autarch [...] urth.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Guoying Qi &lt;gq1 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/660525/338773/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338773">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 683b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">hi, there.

I am using Fey::Loader to load my database schema into Perl, with around 
40 tables. In the test and dev database, it works perfectly.

But for the production database, it takes more than 10 minutes to load 
the schema in. &#40;more than 100GB data in the live database in total&#41;.

I am wondering whether you have options for Fey::Loader to only load a 
few tables in and don&#39;t check the data.

Thanks.

Guoying Qi


-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660530" href="/Public/Bug/Display.html?id=49493#txn-660530">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;12:16:13&nbsp;2009</span>
    <span class="description">autarch [...] urth.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #49493] Fey loader and large database </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 7 Sep 2009 11:15:55 -0500 &#40;CDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Guoying Qi via RT &lt;bug-Fey-Loader [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Rolsky &lt;autarch [...] urth.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/660530/338776/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338776">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, 7 Sep 2009, Guoying Qi via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am using Fey::Loader to load my database schema into Perl, with around
&gt; 40 tables. In the test and dev database, it works perfectly.
&gt;
&gt; But for the production database, it takes more than 10 minutes to load
&gt; the schema in. &#40;more than 100GB data in the live database in total&#41;.
&gt;
&gt; I am wondering whether you have options for Fey::Loader to only load a
&gt; few tables in and don&#39;t check the data.
</div>
Fey::Loader should _only_ look at the schema definition. It never looks at 
the data in the tables.

I have no idea why having a large database would make any difference here.

Can you do some further debugging on this? Maybe try to figure out where 
exactly it&#39;s so slow in the Fey::Loader code? This may be specific to your 
DBMS &#40;you didn&#39;t mention which one!&#41; and or your particular version of 
that DBMS.

Unfortunately, I do not have any huge databases lying around to test with 
;&#41;


-dave

/*============================================================
<span class="clickylink"><a target="new" rel="nofollow" href="http://VegGuide.org">http://VegGuide.org</a></span>               <span class="clickylink"><a target="new" rel="nofollow" href="http://blog.urth.org">http://blog.urth.org</a></span>
Your guide to all that&#39;s veg      House Absolute&#40;ly Pointless&#41;
============================================================*/
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660531" href="/Public/Bug/Display.html?id=49493#txn-660531">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;12:16:14&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660641" href="/Public/Bug/Display.html?id=49493#txn-660641">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;17:31:56&nbsp;2009</span>
    <span class="description">gq1 [...] sanger.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #49493] Fey loader and large database </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 7 Sep 2009 22:31:35 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Fey-Loader [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Guoying Qi&#34; &lt;gq1 [...] sanger.ac.uk&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/660641/338829/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338829">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 7.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Subject: Re: [rt.cpan.org #49493] Fey loader and large database 
 
&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=49493">https://rt.cpan.org/Ticket/Display.html?id=49493</a></span> &gt;

Fey::Loader should _only_ look at the schema definition. It never looks at 
the data in the tables.

I have no idea why having a large database would make any difference here.

Can you do some further debugging on this? Maybe try to figure out where 
exactly it&#39;s so slow in the Fey::Loader code? This may be specific to your 
DBMS &#40;you didn&#39;t mention which one!&#41; and or your particular version of 
that DBMS.

Unfortunately, I do not have any huge databases lying around to test with 
;&#41;

-----------------


Hi, Dave

Thank you very much for your quick response.

I am using MySQL 5.067. There are 41 tables in this database.

There is no problems for me to use Fey::Loader against our dev and test database. There is not much data in them.

I did a little bit debugging just now against our live database.

When I set DBI_TRACE level to 1, I can see the script went through each table very quickly at the beginning, doing three things for each table: primary_key_info, column_info, statistics_info.

And then keep trying to get foreign_key_info for each table. &#40;each takes around 20 seconds, some steps may be longer, in total around 7-8 minutes&#41;. This foreign key info things mainly cause problems. Is there any way I can turn it off or make it quick?

I will do more test tomorrow. 

Thanks for the help.

Regards,

Guoying Qi

    &lt;- foreign_key_info&#40;undef, &#39;npgqcp&#39;, ...&#41;= DBI::st=HASH&#40;0xa29f120&#41; at mysql.pm line 166
    &lt;- fetchrow_hashref= undef row-1 at DBI.pm line 299
    &lt;- DESTROY&#40;DBI::st=HASH&#40;a23c898&#41;&#41;= undef at DBI.pm line 323
    &lt;- foreign_key_info&#40;undef, &#39;npgqcp&#39;, ...&#41;= DBI::st=HASH&#40;0xa29f0e0&#41; at mysql.pm line 166
    &lt;- fetchrow_hashref= undef row-1 at DBI.pm line 299
    &lt;- DESTROY&#40;DBI::st=HASH&#40;a29f180&#41;&#41;= undef at DBI.pm line 323
    &lt;- foreign_key_info&#40;undef, &#39;npgqcp&#39;, ...&#41;= DBI::st=HASH&#40;0xa23c708&#41; at mysql.pm line 166
    &lt;- fetchrow_hashref= undef row-1 at DBI.pm line 299
    &lt;- DESTROY&#40;DBI::st=HASH&#40;a29f1f0&#41;&#41;= undef at DBI.pm line 323

When I set to DBI_TRACE to 2, the log message like below.

&lt;-- dbd_st_finish
    &lt;- fetchrow_hashref= undef row-1 at DBI.pm line 299
    -&gt; DESTROY for DBD::mysql::st &#40;DBI::st=HASH&#40;0x9f64458&#41;~INNER&#41;
        Freeing 2 parameters, bind 0 fbind 0
    &lt;- DESTROY= undef at DBI.pm line 323
    -&gt; foreign_key_info for DBD::mysql::db &#40;DBI::db=HASH&#40;0x9f01970&#41;~0x9f01ab0 undef &#39;npgqcp&#39; &#39;lane_qc&#39; undef undef undef&#41;
        -&gt; dbd_st_prepare MYSQL_VERSION_ID 50051, SQL statement: SELECT NULL AS PKTABLE_CAT,
       A.REFERENCED_TABLE_SCHEMA AS PKTABLE_SCHEM,
       A.REFERENCED_TABLE_NAME AS PKTABLE_NAME,
       A.REFERENCED_COLUMN_NAME AS PKCOLUMN_NAME,
       A.TABLE_CATALOG AS FKTABLE_CAT,
       A.TABLE_SCHEMA AS FKTABLE_SCHEM,
       A.TABLE_NAME AS FKTABLE_NAME,
       A.COLUMN_NAME AS FKCOLUMN_NAME,
       A.ORDINAL_POSITION AS KEY_SEQ,
       NULL AS UPDATE_RULE,
       NULL AS DELETE_RULE,
       A.CONSTRAINT_NAME AS FK_NAME,
       NULL AS PK_NAME,
       NULL AS DEFERABILITY,
       NULL AS UNIQUE_OR_PRIMARY
  FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE A,
       INFORMATION_SCHEMA.TABLE_CONSTRAINTS B
 WHERE A.TABLE_SCHEMA = B.TABLE_SCHEMA AND A.TABLE_NAME = B.TABLE_NAME
   AND A.CONSTRAINT_NAME = B.CONSTRAINT_NAME AND B.CONSTRAINT_TYPE IS NOT NULL
 AND A.REFERENCED_TABLE_SCHEMA = ? AND A.REFERENCED_TABLE_NAME = ? ORDER BY A.TABLE_SCHEMA, A.TABLE_NAME, A.ORDINAL_POSITION
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">        &gt;- dbd_st_free_result_sets
</div>        &lt;- dbd_st_free_result_sets RC -1
        &lt;- dbd_st_free_result_sets
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;count_params statement SELECT NULL AS PKTABLE_CAT,
</div>       A.REFERENCED_TABLE_SCHEMA AS PKTABLE_SCHEM,
       A.REFERENCED_TABLE_NAME AS PKTABLE_NAME,
       A.REFERENCED_COLUMN_NAME AS PKCOLUMN_NAME,
       A.TABLE_CATALOG AS FKTABLE_CAT,
       A.TABLE_SCHEMA AS FKTABLE_SCHEM,
       A.TABLE_NAME AS FKTABLE_NAME,
       A.COLUMN_NAME AS FKCOLUMN_NAME,
       A.ORDINAL_POSITION AS KEY_SEQ,
       NULL AS UPDATE_RULE,
       NULL AS DELETE_RULE,
       A.CONSTRAINT_NAME AS FK_NAME,
       NULL AS PK_NAME,
       NULL AS DEFERABILITY,
       NULL AS UNIQUE_OR_PRIMARY
  FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE A,
       INFORMATION_SCHEMA.TABLE_CONSTRAINTS B
 WHERE A.TABLE_SCHEMA = B.TABLE_SCHEMA AND A.TABLE_NAME = B.TABLE_NAME
   AND A.CONSTRAINT_NAME = B.CONSTRAINT_NAME AND B.CONSTRAINT_TYPE IS NOT NULL
 AND A.REFERENCED_TABLE_SCHEMA = ? AND A.REFERENCED_TABLE_NAME = ? ORDER BY A.TABLE_SCHEMA, A.TABLE_NAME, A.ORDINAL_POSITION
        &lt;- dbd_st_prepare
 -&gt; dbd_st_execute for 09f64498
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">        &gt;- dbd_st_free_result_sets
</div>        &lt;- dbd_st_free_result_sets RC -1
        &lt;- dbd_st_free_result_sets
mysql_st_internal_execute MYSQL_VERSION_ID 50051
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;parse_params statement SELECT NULL AS PKTABLE_CAT,
</div>       A.REFERENCED_TABLE_SCHEMA AS PKTABLE_SCHEM,
       A.REFERENCED_TABLE_NAME AS PKTABLE_NAME,
       A.REFERENCED_COLUMN_NAME AS PKCOLUMN_NAME,
       A.TABLE_CATALOG AS FKTABLE_CAT,
       A.TABLE_SCHEMA AS FKTABLE_SCHEM,
       A.TABLE_NAME AS FKTABLE_NAME,
       A.COLUMN_NAME AS FKCOLUMN_NAME,
       A.ORDINAL_POSITION AS KEY_SEQ,
       NULL AS UPDATE_RULE,
       NULL AS DELETE_RULE,
       A.CONSTRAINT_NAME AS FK_NAME,
       NULL AS PK_NAME,
       NULL AS DEFERABILITY,
       NULL AS UNIQUE_OR_PRIMARY
  FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE A,
       INFORMATION_SCHEMA.TABLE_CONSTRAINTS B
 WHERE A.TABLE_SCHEMA = B.TABLE_SCHEMA AND A.TABLE_NAME = B.TABLE_NAME
   AND A.CONSTRAINT_NAME = B.CONSTRAINT_NAME AND B.CONSTRAINT_TYPE IS NOT NULL
 AND A.REFERENCED_TABLE_SCHEMA = ? AND A.REFERENCED_TABLE_NAME = ? ORDER BY A.TABLE_SCHEMA, A.TABLE_NAME, A.ORDINAL_POSITION
Binding parameters: SELECT NULL AS PKTABLE_CAT,
       A.REFERENCED_TABLE_SCHEMA AS PKTABLE_SCHEM,
       A.REFERENCED_TABLE_NAME AS PKTABLE_NAME,
       A.REFERENCED_COLUMN_NAME AS PKCOLUMN_NAME,
       A.TABLE_CATALOG AS FKTABLE_CAT,
       A.TABLE_SCHEMA AS FKTABLE_SCHEM,
       A.TABLE_NAME AS FKTABLE_NAME,
       A.COLUMN_NAME AS FKCOLUMN_NAME,
       A.ORDINAL_POSITION AS KEY_SEQ,
       NULL AS UPDATE_RULE,
       NULL AS DELETE_RULE,
       A.CONSTRAINT_NAME AS FK_NAME,
       NULL AS PK_NAME,
       NULL AS DEFERABILITY,
       NULL AS UNIQUE_OR_PRIMARY
  FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE A,
       INFORMATION_SCHEMA.TABLE_CONSTRAINTS B
 WHERE A.TABLE_SCHEMA = B.TABLE_SCHEMA AND A.TABLE_NAME = B.TABLE_NAME
   AND A.CONSTRAINT_NAME = B.CONSTRAINT_NAME AND B.CONSTRAINT_TYPE IS NOT NULL
 AND A.REFERENCED_TABLE_SCHEMA = &#39;npgqcp&#39; AND A.REFERENCED_TABLE_NAME = &#39;lane_qc&#39; ORDER BY A.TABLE_SCHEMA, A.TABLE_NAME, A.ORDINAL_POSITION
 &lt;- dbd_st_execute returning imp_sth-&gt;row_num 0
    &lt;- foreign_key_info= DBI::st=HASH&#40;0x9f64198&#41; at mysql.pm line 166
    -&gt; fetchrow_hashref for DBD::mysql::st &#40;DBI::st=HASH&#40;0x9f64198&#41;~0x9f64288&#41;
    -&gt; dbd_st_FETCH_attrib for 09f64498, key NAME_uc
    -&gt; dbd_st_FETCH_attrib for 09f64498, key NAME
        -&gt; dbd_st_fetch
                dbd_st_fetch for 09f64498, chopblanks 0
        dbd_st_fetch result set details
        imp_sth-&gt;result=09fa7180
        mysql_num_fields=15
        mysql_num_rows=0
        mysql_affected_rows=0
        dbd_st_fetch for 09f64498, currow= 1
        dbd_st_fetch, no more rows to fetch
--&gt; dbd_st_finish
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">        &gt;- dbd_st_free_result_sets
</div>        &lt;- dbd_st_free_result_sets RC -1
        &lt;- dbd_st_free_result_sets





--
 The Wellcome Trust Sanger Institute is operated by Genome Research
 Limited, a charity registered in England with number 1021457 and a
 company registered in England with number 2742969, whose registered
 office is 215 Euston Road, London, NW1 2BE.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660653" href="/Public/Bug/Display.html?id=49493#txn-660653">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;17:43:02&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/660653/338838/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338838">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 766b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Weird. I suspect this is a problem in either MySQL itself or DBD::mysql&#39;s
implementation of foreign_key_info.

I&#39;d suggest you report this to the MySQL folks as a bug against
DBD::mysql, and they can do a better job figuring out where the problem
is &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.mysql.com/&#41;">http://bugs.mysql.com/&#41;</a></span>.

I&#39;m quite sure it&#39;s nothing specific to Fey::Loader, since all I do is
call foreign_key_info and do some processing on the results.

There&#39;s now easy way to disable this in Fey::Loader, though you could
monkey patch in a no-op in place of _fk_info_sth:

{
    package Fey::Loader::mysql;

    sub _fk_info_sth { return }
}

Of course, you won&#39;t get any foreign keys in your schema this way.

I&#39;m going to close this bug, so please don&#39;t respond directly to it, or
the it will be re-opened.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660655" href="/Public/Bug/Display.html?id=49493#txn-660655">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;17:43:08&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660657" href="/Public/Bug/Display.html?id=49493#txn-660657">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;17:45:46&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/660657/338841/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/338841">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 736b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Sep 07 17:43:02 2009, DROLSKY wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Weird. I suspect this is a problem in either MySQL itself or DBD::mysql&#39;s
&gt; implementation of foreign_key_info.
&gt; 
&gt; I&#39;d suggest you report this to the MySQL folks as a bug against
&gt; DBD::mysql, and they can do a better job figuring out where the problem
&gt; is &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.mysql.com/&#41;">http://bugs.mysql.com/&#41;</a></span>.
&gt; 
&gt; I&#39;m quite sure it&#39;s nothing specific to Fey::Loader, since all I do is
&gt; call foreign_key_info and do some processing on the results.
</div>
Although it wouldn&#39;t hurt for you to double check this.

You can write a small script which makes a plain DBI handle and calls
foreign_key_info on your big database and iterates over the results.

But really, I can&#39;t see how Fey::Loader could be the problem here.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-660658" href="/Public/Bug/Display.html?id=49493#txn-660658">#</a>      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;07&nbsp;17:45:47&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-661076" href="/Public/Bug/Display.html?id=49493#txn-661076">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;08&nbsp;09:58:24&nbsp;2009</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.418525</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
