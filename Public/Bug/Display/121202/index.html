<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #121202 for XML-Simple: XMLin&#40;&#41; mysteriously recodes UTF-8 input to Latin-1</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #121202 for XML-Simple: XMLin&#40;&#41; mysteriously recodes UTF-8 input to Latin-1</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-Simple">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-Simple">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-Simple">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-Simple">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-Simple">XML-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">121202</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-Simple">XML-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tore [...] fud.no

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37628-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-37629-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




test.xml<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1719689/924423/test.xml">
Mon Apr 17 05:20:43 2017 (67b) by tore [...] fud.no
</a>
</font></li>
</ul>


xmlintest.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1719689/924424/xmlintest.pl">
Mon Apr 17 05:20:43 2017 (254b) by tore [...] fud.no
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=121202">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1719689" href="/Public/Bug/Display.html?id=121202#txn-1719689">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;17&nbsp;05:20:43&nbsp;2017</span>
    <span class="description">tore [...] fud.no -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> XMLin&#40;&#41; mysteriously recodes UTF-8 input to Latin-1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Apr 2017 11:04:11 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tore Anderson &lt;tore [...] fud.no&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1719689/924422/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/924422">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">If I feed XMLin&#40;&#41; an XML document containing UTF-8 data, the parsed
hash will have mysteriously been recoded to Latin-1. This is of course
not the desired behaviour.

The following test script and UTF-8 XML file &#40;also attached&#41;
demonstrates the problem:

[xmlintest.pl]
#! /usr/bin/perl

use Data::Dumper;
use XML::Simple;

my $xs = XML::Simple-&gt;new&#40;&#41;;
my $ref = $xs-&gt;XMLin&#40;&#39;test.xml&#39;&#41;;

print &#34;-&gt;&#34; . $ref-&gt;{bar} . &#34;&lt;-\n&#34;;
print Dumper $ref-&gt;{bar};

open&#40;my $fh, &#39;test.xml&#39;&#41;;
my $xml = &lt;$fh&gt;;
print $xml;
print Dumper $xml;


[test.xml]
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;&lt;foo&gt;&lt;bar&gt;Ã¦Ã¸Ã¥&lt;/bar&gt;&lt;/foo&gt;


The script produces the following output when run:

-&gt;ï¿½ï¿½ï¿½&lt;-
$VAR1 = &#34;\x{e6}\x{f8}\x{e5}&#34;;
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;&lt;foo&gt;&lt;bar&gt;Ã¦Ã¸Ã¥&lt;/bar&gt;&lt;/foo&gt;
$VAR1 = &#39;&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;&lt;foo&gt;&lt;bar&gt;Ã¦Ã¸Ã¥&lt;/bar&gt;&lt;/foo&gt;
&#39;;

Piping the output through hexdump -C produces the following output:

00000000  2d 3e e6 f8 e5 3c 2d 0a  24 56 41 52 31 20 3d 20  |-&gt;...&lt;-.$VAR1 = |

&#34;e6 f8 e5&#34; is &#34;Ã¦ Ã¸ Ã¥&#34; in latin1. So it appears that the utf8 data that
was input to XMLin&#40;&#41; has inexplicably been recoded to latin1, resulting
in garbage characters my terminal cannot print.

The last couple of lines show that this does not happen when perl reads
in and prints the XML file contents directly. Hexdump of that part of
the output:

00000050  3e 3c 62 61 72 3e c3 a6  c3 b8 c3 a5 3c 2f 62 61  |&gt;&lt;bar&gt;......&lt;/ba|

&#34;c3 a6&#34; = &#34;Ã¦&#34;, &#34;c3 b8&#34; = &#34;Ã¸&#34;, &#34;c3 a5&#34; = &#34;Ã¥&#34; - so this is proper and
correct UTF-8, which my terminal display correctly too.

For what it&#39;s worth, my locale is of course all UTF-8:

$ locale
LANG=nn_NO.utf8
LC_CTYPE=&#34;nn_NO.utf8&#34;
LC_NUMERIC=&#34;nn_NO.utf8&#34;
LC_TIME=&#34;nn_NO.utf8&#34;
LC_COLLATE=&#34;nn_NO.utf8&#34;
LC_MONETARY=&#34;nn_NO.utf8&#34;
LC_MESSAGES=&#34;nn_NO.utf8&#34;
LC_PAPER=&#34;nn_NO.utf8&#34;
LC_NAME=&#34;nn_NO.utf8&#34;
LC_ADDRESS=&#34;nn_NO.utf8&#34;
LC_TELEPHONE=&#34;nn_NO.utf8&#34;
LC_MEASUREMENT=&#34;nn_NO.utf8&#34;
LC_IDENTIFICATION=&#34;nn_NO.utf8&#34;
LC_ALL=

As far as I can tell, there is no mention whatsoever of the latin1
character set anywhere in this environment. Why XML::Simple recodes the
XML data to it anyway is a mystery to me.

This is XML::Simple version 2.22-3 on Fedora 25. While this is not the
newest version, the changes in v2.23 and v2.24 doesn&#39;t seem relevant.

Tore
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1719689/924423/test.xml">Download test.xml</a><br />
<span class="downloadcontenttype">application/xml 67b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1719689/924424/xmlintest.pl">Download xmlintest.pl</a><br />
<span class="downloadcontenttype">text/x-perl 254b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1719717" href="/Public/Bug/Display.html?id=121202#txn-1719717">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;17&nbsp;06:34:37&nbsp;2017</span>
    <span class="description">grantm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1719717/924440/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/924440">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 565b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem you describe is not a problem with XML::Simple.  Your test script is missing a declaration of the output encoding.

When you read data into a script &#40;for example from an XML file&#41;, the data will be &#39;decoded&#39; from the source encoding into Perl&#39;s internal representation of characters.  When you output from a script, you need to declare an output encoding so that the data can be &#39;encoded&#39; from the internal representation into whatever encoding you require.

You probably just need to add something like this:

  binmode&#40;STDOUT, &#39;:utf8&#39;&#41;;

Regards
Grant
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1719718" href="/Public/Bug/Display.html?id=121202#txn-1719718">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;17&nbsp;06:34:38&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1719720" href="/Public/Bug/Display.html?id=121202#txn-1719720">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;17&nbsp;06:34:39&nbsp;2017</span>
    <span class="description">grantm [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1719747" href="/Public/Bug/Display.html?id=121202#txn-1719747">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;17&nbsp;07:11:40&nbsp;2017</span>
    <span class="description">tore [...] fud.no -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #121202] XMLin&#40;&#41; mysteriously recodes UTF-8 input to Latin-1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Apr 2017 13:11:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tore Anderson &lt;tore [...] fud.no&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1719747/924459/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/924459">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Grant McLean via RT

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=121202">https://rt.cpan.org/Ticket/Display.html?id=121202</a></span> &gt;
&gt; 
&gt; The problem you describe is not a problem with XML::Simple.  Your
&gt; test script is missing a declaration of the output encoding.
&gt; 
&gt; When you read data into a script &#40;for example from an XML file&#41;, the
&gt; data will be &#39;decoded&#39; from the source encoding into Perl&#39;s internal
&gt; representation of characters.  When you output from a script, you
&gt; need to declare an output encoding so that the data can be &#39;encoded&#39;
&gt; from the internal representation into whatever encoding you require.
&gt; 
&gt; You probably just need to add something like this:
&gt; 
&gt;   binmode&#40;STDOUT, &#39;:utf8&#39;&#41;;
</div>
Thank you for clarifying. Considering that my locale is already UTF-8,
it seems odd to me that this is not already the default. Oh well.

In any case, adding binmode&#40;STDOUT, &#39;:utf8&#39;&#41; fixes
XML::Simple-&#34;filtered&#34; output &#40;the Â«print &#34;-&gt;&#34; . $ref-&gt;{bar} . &#34;&lt;-\n&#34;Â»
line&#41;, but at the same time it breaks the later print statement for
data not passed through XML::Simple &#40;the Â«print $xmlÂ» line&#41;.

These now result in Â«...&lt;bar&gt;ÃƒÂ¦ÃƒÂ¸ÃƒÂ¥&lt;/bar&gt;...Â» which is typical when you
take string that is already UTF-8 and tjem feed it through a
latin1-to-utf8 conversion.

So it seems something more is needed in order for this to work
completely. In any case, thanks again!

Tore
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.33377</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
