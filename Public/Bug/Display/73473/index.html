<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #73473 for Statistics-Descriptive: handling nulls as zeroes - all stats are off</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #73473 for Statistics-Descriptive: handling nulls as zeroes - all stats are off</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Statistics-Descriptive/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Statistics-Descriptive">Statistics-Descriptive CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">73473</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Statistics-Descriptive/Active/">Statistics-Descriptive</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
RGARTON [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-29728-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.0203    </td>
  </tr>
  <tr id="CF-29729-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;24&nbsp;18:27:40&nbsp;2011</span>
    <span class="description">RGARTON [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> handling nulls as zeroes - all stats are off</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Neat to see recent edits to this module, Statistics::Descriptive,
knowing it&#39;s alive and well. 

Concerned about how it treats null values and invalid chars. Seems that,
if present in a list, they are treated the same as normal chars. This
can mean wrong stats of almost all types returned by the module. This
seems broken up to the latest version, 3.0203. 

The attached script shows how the module returns means &#40;and so other
stats&#41; in ways that mightn&#39;t be expected in cases when there are invalid
or indefinite &#34;values&#34; in the list. So a list of values that includes an
&#34;undef&#34; value, or the empty string &#39;&#39;, or anything not-a-number &#40;e.g.,
&#39;x&#39;&#41; returns the same mean as if all these &#34;values&#34; had been &#34;0&#34; - not
as if there was no value there at all. That&#39;s different to what would be
expected; or at least it&#39;s different to what happens in corporate
software, like SPSS and Excel - where, as expected, the &#34;invalid&#34; and
&#34;null&#34; values are not treated like zeroes, don&#39;t affect the count of the
elements; they&#39;re treated as if they didn&#39;t exist. The module
Statistics::Descriptive does throw up one or another kind of error
message in these cases, but it still returns a value, and so one that
might be erroneous but slips into work.

&#40;The module Statistics::ANOVA depends on Statistics::Descriptives for
some stats, but uses Scalar::Util &#34;looks_like_number&#34; to avoid the
valid-null problem; maybe Params::Check::is_number would be better.
Actually, this only first came to my notice when a bioinformatics person
wrote to me about Statistics::ANOVA module yielding different results to
R&#39;s anova - and that was because, again, this person had invalid or null
values in their data, which, because I relied on
Statistics::Descriptive, weren&#39;t being &#34;ignored&#34; as the researcher
expected.&#41;

I&#39;d like to hear thoughts on this. At least to document something about
it in the manpage?
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> desc_test.pl</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use strict;

use Statistics::Descriptive &#39;3.0203&#39;;
my $desc;
$desc = Statistics::Descriptive::Full-&gt;new&#40;&#41;;

print &#34;Data    \tMeans\n&#34;;

$desc-&gt;add_data&#40;1,2,3&#41;;
printf&#40;&#34;&#40;1,2,3&#41;  \t%s\n&#34;, $desc-&gt;mean&#40;&#41;&#41;;

$desc = Statistics::Descriptive::Full-&gt;new&#40;&#41;;
$desc-&gt;add_data&#40;1,2,3,0&#41;;
printf&#40;&#34;&#40;1,2,3,0&#41;\t%s\n&#34;, $desc-&gt;mean&#40;&#41;&#41;;

$desc = Statistics::Descriptive::Full-&gt;new&#40;&#41;;
$desc-&gt;add_data&#40;1,2,3, undef&#41;;
printf&#40;&#34;&#40;1,2,3,undef&#41;\t%s\n&#34;, $desc-&gt;mean&#40;&#41;&#41;;

$desc = Statistics::Descriptive::Full-&gt;new&#40;&#41;;
$desc-&gt;add_data&#40;1,2,3,&#39;&#39;&#41;;
printf&#40;&#34;&#40;1,2,3,&#39;&#39;&#41;\t%s\n&#34;, $desc-&gt;mean&#40;&#41;&#41;;

$desc = Statistics::Descriptive::Full-&gt;new&#40;&#41;;
$desc-&gt;add_data&#40;1,2,3, &#39;x&#39;&#41;;
printf&#40;&#34;&#40;1,2,3,&#39;x&#39;&#41;\t%s\n&#34;, $desc-&gt;mean&#40;&#41;&#41;;

1;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;09&nbsp;02:18:53&nbsp;2012</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Roderick,

On Sat Dec 24 18:27:40 2011, RGARTON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Neat to see recent edits to this module, Statistics::Descriptive,
&gt; knowing it&#39;s alive and well. 
&gt; 
</div>
You&#39;re welcome.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Concerned about how it treats null values and invalid chars. Seems that,
&gt; if present in a list, they are treated the same as normal chars. This
&gt; can mean wrong stats of almost all types returned by the module. This
&gt; seems broken up to the latest version, 3.0203. 
</div>
Well, undef&#40;&#41; values &#40;I assume that&#39;s what you mean by nulls&#41; and
non-numeric strings are treated as zeros by Perl in numeric context, so
this is expected. We are not making a check to see if every datum is
numeric.

One option would be to implement a wrapper method on top of
-&gt;add_data&#40;....&#41; that will check all data for being numeric and only
process the valid ones. This will give you a &#34;wrong&#34; count, which will
exclude the wrong data being inserted. Would this be acceptable to you?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; The attached script shows how the module returns means &#40;and so other
&gt; stats&#41; in ways that mightn&#39;t be expected in cases when there are invalid
&gt; or indefinite &#34;values&#34; in the list. So a list of values that includes an
&gt; &#34;undef&#34; value, or the empty string &#39;&#39;, or anything not-a-number &#40;e.g.,
&gt; &#39;x&#39;&#41; returns the same mean as if all these &#34;values&#34; had been &#34;0&#34; - not
&gt; as if there was no value there at all. That&#39;s different to what would be
&gt; expected; or at least it&#39;s different to what happens in corporate
&gt; software, like SPSS and Excel - where, as expected, the &#34;invalid&#34; and
&gt; &#34;null&#34; values are not treated like zeroes, don&#39;t affect the count of the
&gt; elements; they&#39;re treated as if they didn&#39;t exist. The module
&gt; Statistics::Descriptive does throw up one or another kind of error
&gt; message in these cases, but it still returns a value, and so one that
&gt; might be erroneous but slips into work.
</div>
It&#39;s not an error - it&#39;s a warning &#40;it does not terminate the process,
which makes it worse&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; &#40;The module Statistics::ANOVA depends on Statistics::Descriptives for
&gt; some stats, but uses Scalar::Util &#34;looks_like_number&#34; to avoid the
&gt; valid-null problem; maybe Params::Check::is_number would be better.
&gt; Actually, this only first came to my notice when a bioinformatics person
&gt; wrote to me about Statistics::ANOVA module yielding different results to
&gt; R&#39;s anova - and that was because, again, this person had invalid or null
&gt; values in their data, which, because I relied on
&gt; Statistics::Descriptive, weren&#39;t being &#34;ignored&#34; as the researcher
&gt; expected.&#41;
&gt;
</div>
I see.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;d like to hear thoughts on this. At least to document something about
&gt; it in the manpage?
</div>
If it&#39;s OK, I&#39;ll do that and implement the -&gt;add_numeric_data&#40;&#41; method
like I proposed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;09&nbsp;02:18:54&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;09&nbsp;11:52:40&nbsp;2012</span>
    <span class="description">Roderick.Garton [...] utas.edu.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #73473] handling nulls as zeroes - all stats are off</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 09 Jan 2012 08:52:24 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Statistics-Descriptive [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rgarton &lt;Roderick.Garton [...] utas.edu.au&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Shlomi Fish.

Thank you for your thoughts. I carry the conversation along, below.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
From: Shlomi Fish via RT &lt;bug-Statistics-Descriptive@rt.cpan.org&gt;
Date: Sunday, January 8, 2012 23:18
Subject: [rt.cpan.org #73473] handling nulls as zeroes - all stats are off
To: RGARTON@cpan.org

<div class="message-stanza open">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=73473">https://rt.cpan.org/Ticket/Display.html?id=73473</a></span> &gt;
&gt; 
&gt; Hi Roderick,
&gt; 
&gt; On Sat Dec 24 18:27:40 2011, RGARTON wrote:
<div class="message-stanza open">&gt; &gt; Neat to see recent edits to this module, Statistics::Descriptive,
&gt; &gt; knowing it&#39;s alive and well. 
&gt; &gt; 
</div>&gt; 
&gt; You&#39;re welcome.
&gt; 
<div class="message-stanza open">&gt; &gt; Concerned about how it treats null values and invalid chars. 
</div>&gt; Seems that,
<div class="message-stanza open">&gt; &gt; if present in a list, they are treated the same as normal 
</div>&gt; chars. This
<div class="message-stanza open">&gt; &gt; can mean wrong stats of almost all types returned by the 
</div>&gt; module. This
<div class="message-stanza open">&gt; &gt; seems broken up to the latest version, 3.0203. 
</div>&gt; 
&gt; Well, undef&#40;&#41; values &#40;I assume that&#39;s what you mean by nulls&#41; and
</div>
Actually, I mean NULL as in SQL, with a wider definition than &#34;undef&#34;:

&#34;NULL is a special kind of value that actually has no value. It ... signifies that no value is contained within that column for a given row. NULL values are used where the actual value is either not known or not meaningful&#34; &#40;Descartes &#38; Bunce, 2000, &#34;Programming the Perl DBI,&#34; US: O&#39;Reilly, p. 57&#41;. 

So undefined or invalid by context.

<div class="message-stanza open">&gt; non-numeric strings are treated as zeros by Perl in numeric 
&gt; context, so
&gt; this is expected. We are not making a check to see if every 
&gt; datum is
&gt; numeric.
</div>
So a Perl Statistics module can&#39;t rely on Perl&#39;s &#34;numeric context&#34; but has to go a step further. This is expected. Yes, if &#34;$x&#34; = &#39;A&#39; and $y = $x + 1, $y = 1, but a line of arithmetical data is not the same as a set of statistical data. The mean of &#40;&#39;A&#39;, 1&#41; is not 0.5, as Statistics::Descriptive &#40;weirdly&#41; asserts.
 
<div class="message-stanza open">&gt; 
&gt; One option would be to implement a wrapper method on top of
&gt; -&gt;add_data&#40;....&#41; that will check all data for being numeric and only
&gt; process the valid ones. This will give you a &#34;wrong&#34; count, 
&gt; which will
&gt; exclude the wrong data being inserted. Would this be acceptable 
&gt; to you?
</div>
When a solution yields a wrong count, no, that&#39;s not an acceptable solution. 

<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; 
&gt; &gt; The attached script shows how the module returns means &#40;and so other
&gt; &gt; stats&#41; in ways that mightn&#39;t be expected in cases when there 
</div>&gt; are invalid
<div class="message-stanza open">&gt; &gt; or indefinite &#34;values&#34; in the list. So a list of values that 
</div>&gt; includes an
<div class="message-stanza open">&gt; &gt; &#34;undef&#34; value, or the empty string &#39;&#39;, or anything not-a-
</div>&gt; number &#40;e.g.,
<div class="message-stanza open">&gt; &gt; &#39;x&#39;&#41; returns the same mean as if all these &#34;values&#34; had been 
</div>&gt; &#34;0&#34; - not
<div class="message-stanza open">&gt; &gt; as if there was no value there at all. That&#39;s different to 
</div>&gt; what would be
<div class="message-stanza open">&gt; &gt; expected; or at least it&#39;s different to what happens in corporate
&gt; &gt; software, like SPSS and Excel - where, as expected, the 
</div>&gt; &#34;invalid&#34; and
<div class="message-stanza open">&gt; &gt; &#34;null&#34; values are not treated like zeroes, don&#39;t affect the 
</div>&gt; count of the
<div class="message-stanza open">&gt; &gt; elements; they&#39;re treated as if they didn&#39;t exist. The module
&gt; &gt; Statistics::Descriptive does throw up one or another kind of error
&gt; &gt; message in these cases, but it still returns a value, and so 
</div>&gt; one that
<div class="message-stanza open">&gt; &gt; might be erroneous but slips into work.
</div>&gt; 
&gt; It&#39;s not an error - it&#39;s a warning &#40;it does not terminate the process,
&gt; which makes it worse&#41;.
</div>
Ok, a warning is not a child of error.

<div class="message-stanza open">&gt; 
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; &#40;The module Statistics::ANOVA depends on 
</div>&gt; Statistics::Descriptives for
<div class="message-stanza open">&gt; &gt; some stats, but uses Scalar::Util &#34;looks_like_number&#34; to avoid the
&gt; &gt; valid-null problem; maybe Params::Check::is_number would be better.
&gt; &gt; Actually, this only first came to my notice when a 
</div>&gt; bioinformatics person
<div class="message-stanza open">&gt; &gt; wrote to me about Statistics::ANOVA module yielding different 
</div>&gt; results to
<div class="message-stanza open">&gt; &gt; R&#39;s anova - and that was because, again, this person had 
</div>&gt; invalid or null
<div class="message-stanza open">&gt; &gt; values in their data, which, because I relied on
&gt; &gt; Statistics::Descriptive, weren&#39;t being &#34;ignored&#34; as the researcher
&gt; &gt; expected.&#41;
&gt; &gt;
</div>&gt; 
&gt; I see.
&gt;  
<div class="message-stanza open">&gt; &gt; I&#39;d like to hear thoughts on this. At least to document 
</div>&gt; something about
<div class="message-stanza open">&gt; &gt; it in the manpage?
</div>&gt; 
&gt; If it&#39;s OK, I&#39;ll do that and implement the -&gt;add_numeric_data&#40;&#41; method
&gt; like I proposed.
</div>
Everyone agrees that a statistics module of basic descriptives should  return the correct mean &#40;which is currently wrong, by  Statistics::Descriptive, if there are NULL values&#41; AND to return the  correct count &#40;which is currently right by Statistics::Descriptive, even  if there are NULL values&#41;. So, if we are to opt for conditional wrappers as solutions, a wrapper like  &#34;count_valid&#40;&#41;&#34; or even &#34;count_all&#40;&#41;&#34; &#40;including invalid&#41; might be more  appropriate, at the end of the line, than a wrapper about what type of  data are entered in the first place. So  adding any type of data is permitted, but only defined numerical data  are used in the calculations. Again, the data stored by the &#34;add_data&#40;&#41;&#34;  method are not necessarily the data that are used when, say, calling  &#34;standard_deviation&#40;&#41;&#34;. This seems reasonable, and expected. &#40;This is the  default in commercial statistics packages, but they have the &#34;luxury&#34;  of requiring you to specify whether your data are numeric or categorical  before they will even run a statistical test.&#41; An  &#34;add_anybloodything&#40;&#41;&#34; method might wrap around the proper, default one, if necessary

[Oh, another request: for an alias to the &#34;standard_deviation&#34; method of &#34;stdev&#34;, &#34;std_dev&#34; or similar.]
 
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;05&nbsp;03:16:39&nbsp;2012</span>
    <span class="description">SLAFFAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just to add my thoughts.

Ryan - The underlying cause is Perl&#39;s handling of non-numeric data when
used in numeric operations.  All the non-numeric data are treated as
zeroes, so the results are correct as far as Perl is concerned.  {&#40;&#39;A&#39;,
1&#41; == &#40;0, 1&#41;}.   See this link for a general overview. 
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perlmonks.org/?node_id=609478">http://www.perlmonks.org/?node_id=609478</a></span>  &#40;Sorry if you already knew this&#41;.


As for the implementation, I&#39;d lean towards a separate
add_numeric_data&#40;&#41; method.  This is purely because I tend to use data
that have already been cleaned, so repeated calls to looks_like_number
within add_data&#40;&#41; will slow down the code unnecessarily.  For small data
sets this is a non-issue, but I work with systems where add_data&#40;&#41; might
be called hundreds of thousands of times in an analysis, each time with
1000+ records.

Of course, an alternative is to implement the add_numeric_data&#40;&#41; method
for when one is confident about the data, such that it doesn&#39;t check for
nulls, blanks, text etc.  That&#39;s perhaps the safer approach as it
results in fewer surprises for users of add_data&#40;&#41;.

Regards,
Shawn.



On Mon Jan 09 11:52:40 2012, Roderick.Garton@utas.edu.au wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello Shlomi Fish.
&gt; 
&gt; Thank you for your thoughts. I carry the conversation along, below.
&gt; 
&gt; ----- Original Message -----
&gt; From: Shlomi Fish via RT &lt;bug-Statistics-Descriptive@rt.cpan.org&gt;
&gt; Date: Sunday, January 8, 2012 23:18
&gt; Subject: [rt.cpan.org #73473] handling nulls as zeroes - all stats are
&gt;    off
&gt; To: RGARTON@cpan.org
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=73473">https://rt.cpan.org/Ticket/Display.html?id=73473</a></span> &gt;
&gt; &gt;
&gt; &gt; Hi Roderick,
&gt; &gt;
&gt; &gt; On Sat Dec 24 18:27:40 2011, RGARTON wrote:
<div class="message-stanza open">&gt; &gt; &gt; Neat to see recent edits to this module, Statistics::Descriptive,
&gt; &gt; &gt; knowing it&#39;s alive and well.
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; You&#39;re welcome.
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; Concerned about how it treats null values and invalid chars.
</div>&gt; &gt; Seems that,
<div class="message-stanza open">&gt; &gt; &gt; if present in a list, they are treated the same as normal
</div>&gt; &gt; chars. This
<div class="message-stanza open">&gt; &gt; &gt; can mean wrong stats of almost all types returned by the
</div>&gt; &gt; module. This
<div class="message-stanza open">&gt; &gt; &gt; seems broken up to the latest version, 3.0203.
</div>&gt; &gt;
&gt; &gt; Well, undef&#40;&#41; values &#40;I assume that&#39;s what you mean by nulls&#41; and
</div>&gt; 
&gt; Actually, I mean NULL as in SQL, with a wider definition than &#34;undef&#34;:
&gt; 
&gt; &#34;NULL is a special kind of value that actually has no value. It ...
&gt;    signifies that no value is contained within that column for a given
&gt;    row. NULL values are used where the actual value is either not
&gt;    known or not meaningful&#34; &#40;Descartes &#38; Bunce, 2000, &#34;Programming the
&gt;    Perl DBI,&#34; US: O&#39;Reilly, p. 57&#41;.
&gt; 
&gt; So undefined or invalid by context.
&gt; 
<div class="message-stanza open">&gt; &gt; non-numeric strings are treated as zeros by Perl in numeric
&gt; &gt; context, so
&gt; &gt; this is expected. We are not making a check to see if every
&gt; &gt; datum is
&gt; &gt; numeric.
</div>&gt; 
&gt; So a Perl Statistics module can&#39;t rely on Perl&#39;s &#34;numeric context&#34; but
&gt;    has to go a step further. This is expected. Yes, if &#34;$x&#34; = &#39;A&#39; and
&gt;    $y = $x + 1, $y = 1, but a line of arithmetical data is not the
&gt;    same as a set of statistical data. The mean of &#40;&#39;A&#39;, 1&#41; is not 0.5,
&gt;    as Statistics::Descriptive &#40;weirdly&#41; asserts.
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; One option would be to implement a wrapper method on top of
&gt; &gt; -&gt;add_data&#40;....&#41; that will check all data for being numeric and only
&gt; &gt; process the valid ones. This will give you a &#34;wrong&#34; count,
&gt; &gt; which will
&gt; &gt; exclude the wrong data being inserted. Would this be acceptable
&gt; &gt; to you?
</div>&gt; 
&gt; When a solution yields a wrong count, no, that&#39;s not an acceptable
&gt;    solution.
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; The attached script shows how the module returns means &#40;and so
</div></div>&gt;    other
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; stats&#41; in ways that mightn&#39;t be expected in cases when there
</div>&gt; &gt; are invalid
<div class="message-stanza open">&gt; &gt; &gt; or indefinite &#34;values&#34; in the list. So a list of values that
</div>&gt; &gt; includes an
<div class="message-stanza open">&gt; &gt; &gt; &#34;undef&#34; value, or the empty string &#39;&#39;, or anything not-a-
</div>&gt; &gt; number &#40;e.g.,
<div class="message-stanza open">&gt; &gt; &gt; &#39;x&#39;&#41; returns the same mean as if all these &#34;values&#34; had been
</div>&gt; &gt; &#34;0&#34; - not
<div class="message-stanza open">&gt; &gt; &gt; as if there was no value there at all. That&#39;s different to
</div>&gt; &gt; what would be
<div class="message-stanza open">&gt; &gt; &gt; expected; or at least it&#39;s different to what happens in corporate
&gt; &gt; &gt; software, like SPSS and Excel - where, as expected, the
</div>&gt; &gt; &#34;invalid&#34; and
<div class="message-stanza open">&gt; &gt; &gt; &#34;null&#34; values are not treated like zeroes, don&#39;t affect the
</div>&gt; &gt; count of the
<div class="message-stanza open">&gt; &gt; &gt; elements; they&#39;re treated as if they didn&#39;t exist. The module
&gt; &gt; &gt; Statistics::Descriptive does throw up one or another kind of error
&gt; &gt; &gt; message in these cases, but it still returns a value, and so
</div>&gt; &gt; one that
<div class="message-stanza open">&gt; &gt; &gt; might be erroneous but slips into work.
</div>&gt; &gt;
&gt; &gt; It&#39;s not an error - it&#39;s a warning &#40;it does not terminate the
</div>&gt;    process,
<div class="message-stanza open">&gt; &gt; which makes it worse&#41;.
</div>&gt; 
&gt; Ok, a warning is not a child of error.
&gt; 
<div class="message-stanza open">&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; &#40;The module Statistics::ANOVA depends on
</div>&gt; &gt; Statistics::Descriptives for
<div class="message-stanza open">&gt; &gt; &gt; some stats, but uses Scalar::Util &#34;looks_like_number&#34; to avoid the
&gt; &gt; &gt; valid-null problem; maybe Params::Check::is_number would be
</div></div>&gt;    better.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Actually, this only first came to my notice when a
</div>&gt; &gt; bioinformatics person
<div class="message-stanza open">&gt; &gt; &gt; wrote to me about Statistics::ANOVA module yielding different
</div>&gt; &gt; results to
<div class="message-stanza open">&gt; &gt; &gt; R&#39;s anova - and that was because, again, this person had
</div>&gt; &gt; invalid or null
<div class="message-stanza open">&gt; &gt; &gt; values in their data, which, because I relied on
&gt; &gt; &gt; Statistics::Descriptive, weren&#39;t being &#34;ignored&#34; as the researcher
&gt; &gt; &gt; expected.&#41;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; I see.
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; I&#39;d like to hear thoughts on this. At least to document
</div>&gt; &gt; something about
<div class="message-stanza open">&gt; &gt; &gt; it in the manpage?
</div>&gt; &gt;
&gt; &gt; If it&#39;s OK, I&#39;ll do that and implement the -&gt;add_numeric_data&#40;&#41;
</div>&gt;    method
<div class="message-stanza open">&gt; &gt; like I proposed.
</div>&gt; 
&gt; Everyone agrees that a statistics module of basic descriptives should
&gt;    return the correct mean &#40;which is currently wrong, by
&gt;    Statistics::Descriptive, if there are NULL values&#41; AND to return
&gt;    the  correct count &#40;which is currently right by
&gt;    Statistics::Descriptive, even  if there are NULL values&#41;. So, if we
&gt;    are to opt for conditional wrappers as solutions, a wrapper like
&gt;    &#34;count_valid&#40;&#41;&#34; or even &#34;count_all&#40;&#41;&#34; &#40;including invalid&#41; might be
&gt;    more  appropriate, at the end of the line, than a wrapper about
&gt;    what type of  data are entered in the first place. So  adding any
&gt;    type of data is permitted, but only defined numerical data  are
&gt;    used in the calculations. Again, the data stored by the
&gt;    &#34;add_data&#40;&#41;&#34;  method are not necessarily the data that are used
&gt;    when, say, calling  &#34;standard_deviation&#40;&#41;&#34;. This seems reasonable,
&gt;    and expected. &#40;This is the  default in commercial statistics
&gt;    packages, but they have the &#34;luxury&#34;  of requiring you to specify
&gt;    whether your data are numeric or categorical  before they will even
&gt;    run a statistical test.&#41; An  &#34;add_anybloodything&#40;&#41;&#34; method might
&gt;    wrap around the proper, default one, if necessary
&gt; 
&gt; [Oh, another request: for an alias to the &#34;standard_deviation&#34; method
&gt;    of &#34;stdev&#34;, &#34;std_dev&#34; or similar.]
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;08&nbsp;12:58:46&nbsp;2012</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Feb 05 03:16:39 2012, SLAFFAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Just to add my thoughts.
&gt; 
&gt; Ryan - The underlying cause is Perl&#39;s handling of non-numeric data when
&gt; used in numeric operations.  All the non-numeric data are treated as
&gt; zeroes, so the results are correct as far as Perl is concerned.  {&#40;&#39;A&#39;,
&gt; 1&#41; == &#40;0, 1&#41;}.   See this link for a general overview. 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perlmonks.org/?node_id=609478">http://www.perlmonks.org/?node_id=609478</a></span>  &#40;Sorry if you already knew
</div>this&#41;.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; As for the implementation, I&#39;d lean towards a separate
&gt; add_numeric_data&#40;&#41; method.  This is purely because I tend to use data
&gt; that have already been cleaned, so repeated calls to looks_like_number
&gt; within add_data&#40;&#41; will slow down the code unnecessarily.  For small data
&gt; sets this is a non-issue, but I work with systems where add_data&#40;&#41; might
&gt; be called hundreds of thousands of times in an analysis, each time with
&gt; 1000+ records.
&gt; 
&gt; Of course, an alternative is to implement the add_numeric_data&#40;&#41; method
&gt; for when one is confident about the data, such that it doesn&#39;t check for
&gt; nulls, blanks, text etc.  That&#39;s perhaps the safer approach as it
&gt; results in fewer surprises for users of add_data&#40;&#41;.
&gt; 
</div>
Yes, I agree with Shawn here. undef&#40;&#41;s in Perl are not exactly nulls in
the languages you described, and filtering only the numeric data will
slow down the code. Can Roderick provide a spec for how all functions
should behave and the when the numeric_count&#40;&#41; and the
including_non_numeric_data_count&#40;&#41; should be used.

Regards,

-- Shlomi Fish

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Regards,
&gt; Shawn.
&gt; 
&gt; 
&gt; 
&gt; On Mon Jan 09 11:52:40 2012, Roderick.Garton@utas.edu.au wrote:
<div class="message-stanza open">&gt; &gt; Hello Shlomi Fish.
&gt; &gt; 
&gt; &gt; Thank you for your thoughts. I carry the conversation along, below.
&gt; &gt; 
&gt; &gt; ----- Original Message -----
&gt; &gt; From: Shlomi Fish via RT &lt;bug-Statistics-Descriptive@rt.cpan.org&gt;
&gt; &gt; Date: Sunday, January 8, 2012 23:18
&gt; &gt; Subject: [rt.cpan.org #73473] handling nulls as zeroes - all stats are
&gt; &gt;    off
&gt; &gt; To: RGARTON@cpan.org
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=73473">https://rt.cpan.org/Ticket/Display.html?id=73473</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Hi Roderick,
&gt; &gt; &gt;
&gt; &gt; &gt; On Sat Dec 24 18:27:40 2011, RGARTON wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; Neat to see recent edits to this module, Statistics::Descriptive,
&gt; &gt; &gt; &gt; knowing it&#39;s alive and well.
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; You&#39;re welcome.
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; Concerned about how it treats null values and invalid chars.
</div>&gt; &gt; &gt; Seems that,
<div class="message-stanza open">&gt; &gt; &gt; &gt; if present in a list, they are treated the same as normal
</div>&gt; &gt; &gt; chars. This
<div class="message-stanza open">&gt; &gt; &gt; &gt; can mean wrong stats of almost all types returned by the
</div>&gt; &gt; &gt; module. This
<div class="message-stanza open">&gt; &gt; &gt; &gt; seems broken up to the latest version, 3.0203.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Well, undef&#40;&#41; values &#40;I assume that&#39;s what you mean by nulls&#41; and
</div>&gt; &gt; 
&gt; &gt; Actually, I mean NULL as in SQL, with a wider definition than &#34;undef&#34;:
&gt; &gt; 
&gt; &gt; &#34;NULL is a special kind of value that actually has no value. It ...
&gt; &gt;    signifies that no value is contained within that column for a given
&gt; &gt;    row. NULL values are used where the actual value is either not
&gt; &gt;    known or not meaningful&#34; &#40;Descartes &#38; Bunce, 2000, &#34;Programming the
&gt; &gt;    Perl DBI,&#34; US: O&#39;Reilly, p. 57&#41;.
&gt; &gt; 
&gt; &gt; So undefined or invalid by context.
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; non-numeric strings are treated as zeros by Perl in numeric
&gt; &gt; &gt; context, so
&gt; &gt; &gt; this is expected. We are not making a check to see if every
&gt; &gt; &gt; datum is
&gt; &gt; &gt; numeric.
</div>&gt; &gt; 
&gt; &gt; So a Perl Statistics module can&#39;t rely on Perl&#39;s &#34;numeric context&#34; but
&gt; &gt;    has to go a step further. This is expected. Yes, if &#34;$x&#34; = &#39;A&#39; and
&gt; &gt;    $y = $x + 1, $y = 1, but a line of arithmetical data is not the
&gt; &gt;    same as a set of statistical data. The mean of &#40;&#39;A&#39;, 1&#41; is not 0.5,
&gt; &gt;    as Statistics::Descriptive &#40;weirdly&#41; asserts.
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; One option would be to implement a wrapper method on top of
&gt; &gt; &gt; -&gt;add_data&#40;....&#41; that will check all data for being numeric and only
&gt; &gt; &gt; process the valid ones. This will give you a &#34;wrong&#34; count,
&gt; &gt; &gt; which will
&gt; &gt; &gt; exclude the wrong data being inserted. Would this be acceptable
&gt; &gt; &gt; to you?
</div>&gt; &gt; 
&gt; &gt; When a solution yields a wrong count, no, that&#39;s not an acceptable
&gt; &gt;    solution.
&gt; &gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; The attached script shows how the module returns means &#40;and so
</div></div>&gt; &gt;    other
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; stats&#41; in ways that mightn&#39;t be expected in cases when there
</div>&gt; &gt; &gt; are invalid
<div class="message-stanza open">&gt; &gt; &gt; &gt; or indefinite &#34;values&#34; in the list. So a list of values that
</div>&gt; &gt; &gt; includes an
<div class="message-stanza open">&gt; &gt; &gt; &gt; &#34;undef&#34; value, or the empty string &#39;&#39;, or anything not-a-
</div>&gt; &gt; &gt; number &#40;e.g.,
<div class="message-stanza open">&gt; &gt; &gt; &gt; &#39;x&#39;&#41; returns the same mean as if all these &#34;values&#34; had been
</div>&gt; &gt; &gt; &#34;0&#34; - not
<div class="message-stanza open">&gt; &gt; &gt; &gt; as if there was no value there at all. That&#39;s different to
</div>&gt; &gt; &gt; what would be
<div class="message-stanza open">&gt; &gt; &gt; &gt; expected; or at least it&#39;s different to what happens in corporate
&gt; &gt; &gt; &gt; software, like SPSS and Excel - where, as expected, the
</div>&gt; &gt; &gt; &#34;invalid&#34; and
<div class="message-stanza open">&gt; &gt; &gt; &gt; &#34;null&#34; values are not treated like zeroes, don&#39;t affect the
</div>&gt; &gt; &gt; count of the
<div class="message-stanza open">&gt; &gt; &gt; &gt; elements; they&#39;re treated as if they didn&#39;t exist. The module
&gt; &gt; &gt; &gt; Statistics::Descriptive does throw up one or another kind of error
&gt; &gt; &gt; &gt; message in these cases, but it still returns a value, and so
</div>&gt; &gt; &gt; one that
<div class="message-stanza open">&gt; &gt; &gt; &gt; might be erroneous but slips into work.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; It&#39;s not an error - it&#39;s a warning &#40;it does not terminate the
</div>&gt; &gt;    process,
<div class="message-stanza open">&gt; &gt; &gt; which makes it worse&#41;.
</div>&gt; &gt; 
&gt; &gt; Ok, a warning is not a child of error.
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &#40;The module Statistics::ANOVA depends on
</div>&gt; &gt; &gt; Statistics::Descriptives for
<div class="message-stanza open">&gt; &gt; &gt; &gt; some stats, but uses Scalar::Util &#34;looks_like_number&#34; to avoid the
&gt; &gt; &gt; &gt; valid-null problem; maybe Params::Check::is_number would be
</div></div>&gt; &gt;    better.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; Actually, this only first came to my notice when a
</div>&gt; &gt; &gt; bioinformatics person
<div class="message-stanza open">&gt; &gt; &gt; &gt; wrote to me about Statistics::ANOVA module yielding different
</div>&gt; &gt; &gt; results to
<div class="message-stanza open">&gt; &gt; &gt; &gt; R&#39;s anova - and that was because, again, this person had
</div>&gt; &gt; &gt; invalid or null
<div class="message-stanza open">&gt; &gt; &gt; &gt; values in their data, which, because I relied on
&gt; &gt; &gt; &gt; Statistics::Descriptive, weren&#39;t being &#34;ignored&#34; as the researcher
&gt; &gt; &gt; &gt; expected.&#41;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; I see.
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; I&#39;d like to hear thoughts on this. At least to document
</div>&gt; &gt; &gt; something about
<div class="message-stanza open">&gt; &gt; &gt; &gt; it in the manpage?
</div>&gt; &gt; &gt;
&gt; &gt; &gt; If it&#39;s OK, I&#39;ll do that and implement the -&gt;add_numeric_data&#40;&#41;
</div>&gt; &gt;    method
<div class="message-stanza open">&gt; &gt; &gt; like I proposed.
</div>&gt; &gt; 
&gt; &gt; Everyone agrees that a statistics module of basic descriptives should
&gt; &gt;    return the correct mean &#40;which is currently wrong, by
&gt; &gt;    Statistics::Descriptive, if there are NULL values&#41; AND to return
&gt; &gt;    the  correct count &#40;which is currently right by
&gt; &gt;    Statistics::Descriptive, even  if there are NULL values&#41;. So, if we
&gt; &gt;    are to opt for conditional wrappers as solutions, a wrapper like
&gt; &gt;    &#34;count_valid&#40;&#41;&#34; or even &#34;count_all&#40;&#41;&#34; &#40;including invalid&#41; might be
&gt; &gt;    more  appropriate, at the end of the line, than a wrapper about
&gt; &gt;    what type of  data are entered in the first place. So  adding any
&gt; &gt;    type of data is permitted, but only defined numerical data  are
&gt; &gt;    used in the calculations. Again, the data stored by the
&gt; &gt;    &#34;add_data&#40;&#41;&#34;  method are not necessarily the data that are used
&gt; &gt;    when, say, calling  &#34;standard_deviation&#40;&#41;&#34;. This seems reasonable,
&gt; &gt;    and expected. &#40;This is the  default in commercial statistics
&gt; &gt;    packages, but they have the &#34;luxury&#34;  of requiring you to specify
&gt; &gt;    whether your data are numeric or categorical  before they will even
&gt; &gt;    run a statistical test.&#41; An  &#34;add_anybloodything&#40;&#41;&#34; method might
&gt; &gt;    wrap around the proper, default one, if necessary
&gt; &gt; 
&gt; &gt; [Oh, another request: for an alias to the &#34;standard_deviation&#34; method
&gt; &gt;    of &#34;stdev&#34;, &#34;std_dev&#34; or similar.]
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;03:01:08&nbsp;2012</span>
    <span class="description">RGARTON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Feb 08 12:58:46 2012, SHLOMIF wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Feb 05 03:16:39 2012, SLAFFAN wrote:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; .... Can Roderick provide a spec for how all functions
&gt; should behave and the when the numeric_count&#40;&#41; and the
&gt; including_non_numeric_data_count&#40;&#41; should be used.
&gt; 
</div>
Best specification here might be to take out the data management
routines from Statistics-Descriptive altogether and have it depend on a
Statistics-Data module for that. I will try to register that module, but
will need help, suggestions, ideas as to how to make that work. This
module should also optionally serve any other stats modules - and so
hopefully also solve the problem of no two Perl statistics modules
having the same data-handling routines - neither by name nor by
behavior. What do you all think?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;07:43:42&nbsp;2012</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Roderick,

On Fri May 25 03:01:08 2012, RGARTON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Feb 08 12:58:46 2012, SHLOMIF wrote:
<div class="message-stanza open">&gt; &gt; On Sun Feb 05 03:16:39 2012, SLAFFAN wrote:
</div>&gt; 
<div class="message-stanza open">&gt; &gt; .... Can Roderick provide a spec for how all functions
&gt; &gt; should behave and the when the numeric_count&#40;&#41; and the
&gt; &gt; including_non_numeric_data_count&#40;&#41; should be used.
&gt; &gt; 
</div>&gt; 
&gt; Best specification here might be to take out the data management
&gt; routines from Statistics-Descriptive altogether and have it depend on a
&gt; Statistics-Data module for that. I will try to register that module, but
&gt; will need help, suggestions, ideas as to how to make that work. 
</div>
You don&#39;t need to register it. Once you upload it to CPAN, you own the
namespace, and <span class="clickylink"><a target="new" rel="nofollow" href="http://metacpan.org/">http://metacpan.org/</a></span> , <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/">http://search.cpan.org/</a></span> and other
indexers will be able to find it there. Regarding suggestions of how to
make it work - it shouldn&#39;t slow down Statistics::Descriptive &#40;i.e: have
a mode where a user can pass undef&#40;&#41;s and they&#39;ll be treated as zeros&#41;,
and the data handling logic of Statistics-Descriptive is something that
works nicely for it, and you may opt to emulate it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This
&gt; module should also optionally serve any other stats modules - and so
&gt; hopefully also solve the problem of no two Perl statistics modules
&gt; having the same data-handling routines - neither by name nor by
&gt; behavior. What do you all think?
</div>
Well, don&#39;t expect modules based on GNU R, the GNU Scientific Library
&#40;GSL&#41;, and similar modules, to rely on Statistics::Data for that, so
you&#39;re not solving the entire problem. Furthermore, this sounds like
Joel Spolsky’s quarreling kids syndrome &#40; see
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.shlomifish.org/humour/fortunes/show.cgi?id=joel-ms-lost-api-war-1">http://www.shlomifish.org/humour/fortunes/show.cgi?id=joel-ms-lost-api-war-1</a></span>
&#41;, which is also echoed in this XKCD: <span class="clickylink"><a target="new" rel="nofollow" href="http://xkcd.com/927/">http://xkcd.com/927/</a></span> .

That put aside, if you have a good vision for what Statistics-Data
should do, you can write it and upload it to CPAN, and if it would be
good enough, then Statistics::Descriptive can use it &#40;or you can write
Statistics::Descriptive::UsingData - ;-&#41; &#41;.

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;25&nbsp;21:00:54&nbsp;2012</span>
    <span class="description">RGARTON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the ideas and critique. I&#39;ll carry on with the
Statistics::Data module, which I&#39;ve been writing in any case to parcel
out these type of operations from Statistics::ANOVA. Only thinking this
approach might be useful for some modules in that Statistics family.
Help in deciding on the best way to create the child/parent or other
relationship between Statistics::Data and, say, Statistics::ANOVA, would
be useful. Can you recommend another relationship of this type among any
Perl modules?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;09&nbsp;16:50:20&nbsp;2016</span>
    <span class="description">mguttman4 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #73473] ​handling nulls as zeroes - all stats are off</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 9 Jan 2016 23:49:55 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Statistics-Descriptive [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Meir Guttman &lt;mguttman4 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">​Hi all,

IMHO we need both &#34;treat undef as zero&#34; and &#34;eliminate undef from the list&#34;
varieties. Here is one field in which both are required - stock-exchange
data processing.

​Some items require the substitution of zero for an &#39;undef&#39;. For example,
when computing the average daily Dollar trading volume in a given share
over a given period. The custom is to mark it as NULL, not zero and DBI
returns an &#39;undef&#39; in such a case. No trading means zero trading for the
average volume.

OTOH, when computing Avg/StdDev of prices, say Day&#39;s High price for a share
that was not traded that day, &#39;undef&#39; items must not be taken as zero. No
quote doesn&#39;t mean a zero price. Such datum must be simply excluded from
the computation! And, here too no-trade is depicted as NULL, hence DBI
returns an &#39;undef&#39;.

That&#39;s my two bit...

regards,
Meir
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;11&nbsp;06:18:32&nbsp;2016</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Meir!

On Sat Jan 09 16:50:20 2016, mguttman4@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ​Hi all,
&gt; 
&gt; IMHO we need both &#34;treat undef as zero&#34; and &#34;eliminate undef from the list&#34;
&gt; varieties. Here is one field in which both are required - stock-exchange
&gt; data processing.
</div>
If I understand you correctly, both of these are easy to do using «map { $_ // 0 } @data» and «grep { defined&#40;$_&#41; } @data». Is there anything stopping you from doing it this way?

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;11&nbsp;16:51:41&nbsp;2016</span>
    <span class="description">mguttman4 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #73473] ​handling nulls as zeroes - all stats are off</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 11 Jan 2016 23:51:28 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Statistics-Descriptive [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Meir Guttman &lt;mguttman4 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Shlomi!
Yes indeed, that is what I decided to do. Under my control, no need to
fiddle with switches, etc.
Thanks!

Regards everybody,
Meir


-- 
  -- Me
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
