<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #42389 for CGI-Application-Dispatch: A couple of suggestions to clarify documentation</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #42389 for CGI-Application-Dispatch: A couple of suggestions to clarify documentation</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CGI-Application-Dispatch">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CGI-Application-Dispatch">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CGI-Application-Dispatch">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CGI-Application-Dispatch">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CGI-Application-Dispatch">CGI-Application-Dispatch CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">42389</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CGI-Application-Dispatch">CGI-Application-Dispatch</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MARKSTOS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
davebaker [...] benefitslink.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-5422-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.15    </td>
  </tr>
  <tr id="CF-5423-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




results of cgi-carp experiment.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/582333/294269/results%20of%20cgi-carp%20experiment.txt">
Tue Mar 24 12:04:31 2009 (6.6k) by davebaker [...] benefitslink.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=42389">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553573" href="/Public/Bug/Display.html?id=42389#txn-553573">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;17:20:50&nbsp;2009</span>
    <span class="description">davebaker [...] benefitslink.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> davebaker [...] benefitslink.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> A couple of suggestions to clarify documentation</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/553573/279005/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/279005">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 221b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I tripped over the use of &#34;module_name&#34; in the examples, and have made a
suggested replacement in AnnoCPAN at

<span class="clickylink"><a target="new" rel="nofollow" href="http://annocpan.org/~MARKSTOS/CGI-Application-Dispatch-2.15/lib/CGI/Application/Dispatch.pm#note_2215">http://annocpan.org/~MARKSTOS/CGI-Application-Dispatch-2.15/lib/CGI/Application/Dispatch.pm#note_2215</a></span>

Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553575" href="/Public/Bug/Display.html?id=42389#txn-553575">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;17:23:11&nbsp;2009</span>
    <span class="description">davebaker [...] benefitslink.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/553575/279007/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/279007">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 475b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jan 13 17:20:50 2009, davebaker@benefitslink.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tripped over the use of &#34;module_name&#34; in the examples, and have made
&gt; a
&gt; suggested replacement in AnnoCPAN at
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://annocpan.org/~MARKSTOS/CGI-Application-Dispatch-">http://annocpan.org/~MARKSTOS/CGI-Application-Dispatch-</a></span>
&gt; 2.15/lib/CGI/Application/Dispatch.pm#note_2215
</div>
Correction; the URL should be 

<span class="clickylink"><a target="new" rel="nofollow" href="http://annocpan.org/~MARKSTOS/CGI-Application-Dispatch-2.15/lib/CGI/Application/Dispatch.pm">http://annocpan.org/~MARKSTOS/CGI-Application-Dispatch-2.15/lib/CGI/Application/Dispatch.pm</a></span>

without the #note_2215 at the end; I added several notes.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-553576" href="/Public/Bug/Display.html?id=42389#txn-553576">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;17:23:11&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-581948" href="/Public/Bug/Display.html?id=42389#txn-581948">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;21:44:26&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-581952" href="/Public/Bug/Display.html?id=42389#txn-581952">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;21:45:23&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/581952/294051/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/294051">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 202b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the suggestions Dave. Several of them will appear in the next
release. 

I didn&#39;t find the &#34;Directoryfoo_ModuleBar&#34; examples clearer than what we
had, so I didn&#39;t make those relates updates. 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-581955" href="/Public/Bug/Display.html?id=42389#txn-581955">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;21:45:24&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-582333" href="/Public/Bug/Display.html?id=42389#txn-582333">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;24&nbsp;12:04:31&nbsp;2009</span>
    <span class="description">davebaker [...] benefitslink.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #42389] A couple of suggestions to clarify documentation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 24 Mar 2009 12:04:19 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Dispatch [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dave Baker &lt;davebaker [...] benefitslink.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/582333/294268/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/294268">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">MARKSTOS via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=42389">https://rt.cpan.org/Ticket/Display.html?id=42389</a></span> &gt;
&gt; 
&gt; Thanks for the suggestions Dave. Several of them will appear in the next
&gt; release. 
&gt; 
&gt; I didn&#39;t find the &#34;Directoryfoo_ModuleBar&#34; examples clearer than what we
&gt; had, so I didn&#39;t make those relates updates. 
&gt; 
</div>
Thanks, Mark!

I later regretted the grammar-nazi comments re it&#39;s

I made a good deal of progress with CGI::Application &#40;trying to get more 
serious about learning web apps; I can&#39;t keep up with the changes and 
the complexity re Catalyst&#39;s dispatcher, so I will leave that one on the 
vine for now&#41;.

I wonder what you think of the attached document I put together 
&#40;compulsively&#41; when trying to learn &#40;master; wretched excess&#41; the pros 
and cons of CGI::Carp. If it&#39;s not too pedantic I&#39;d be happy to put it 
on the mailing list.

Dave


-- 

Use EmployeeBenefitsJobs.com
to find the best jobs and candidates!

and BenefitsLink.com
for the latest news, discussions and events.

Dave Baker, Editor and Publisher
davebaker@benefitslink.com

&#40;828&#41; 587-6373 office &#40;Eastern time&#41;
&#40;828&#41; 507-3955 cell
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/582333/294269/results%20of%20cgi-carp%20experiment.txt">Download results of cgi-carp experiment.txt</a><br />
<span class="downloadcontenttype">text/plain 6.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Effect of CGI::Carp when debugging compile-time errors.
======================================================

1. If &#34;used&#34; in the instance script

&#34;use CGI::Carp qw&#40; fatalsToBrowser &#41;&#34; &#40;which I&#39;ll abbreviate
hereafter as merely &#34;CGI::Carp&#34;&#41; is helpful for debugging
when used in the instance script and the compilation error
arises in the instance script, in which case fatals do
appear in the browser.

It is not helpful if the compilation error arises in the
application module &#40;in which case the usual 500 error is
shown&#41;.

2. If &#34;used&#34; in the application module

CGI::Carp is not helpful for debugging when used only in the
application module, no matter whether the compilation error
arises in the instance script or the application module.

3. Effect on Apache error log

The Perl-generated message about the compilation error is
written to the Apache error log whether or not CGI::Carp is
used in the instance script or the application module, and
whether or not the compilation error is in the instance
script or the application module.


Effect of CGI::Carp when handling run-time errors.
==================================================

If CGI::Carp is used in the instance script, it is helpful
for debugging if a runtime error occurs in the instance
script. But such errors don&#39;t happen often due to the
CGI::Application technique of a short instance script that
calls the run&#40;&#41; method of an application module. I needed to
use a

&#34;$my_runtime_error_maker = 1/0;&#34;

statement in my instance script to find this behavior.

Using CGI::Carp only in the instance script doesn&#39;t work to
display runtime errors in the application module.

But runtime errors are displayed if CGI::Carp is used in the
application module.

By using CGI::Carp in an application module, a runtime error
encountered in the application module avoids the &#34;500
Internal Server Error&#34; screen. Further, the Perl-generated
message about the error &#40;$@&#41; is displayed, usually showing
the line in the application module at which the error
occurred and the line of the instance script at which the
run&#40;&#41; method was called. But the important exception is when
the error arises due to encountering a die&#40;&#41; or croak&#40;&#41;
statement inside a runmode. In that case the error message
helpfully names the runmode in which the error arose but
unfortunately displays an unhelpful line number in Carp.pm
rather than the line number at which the die&#40;&#41; or croak&#40;&#41;
was encountered.

That quirk seems to arise due to the way CGI::Application
optionally handles a die&#40;&#41; or croak&#40;&#41; inside runmodes.
CGI::Application makes available to the programmer a
error_mode&#40;&#41; method. Invoking error_mode&#40;&#41; with the name of
a subroutine causes that subroutine to become the runmode
when die&#40;&#41; or croak&#40;&#41; is encountered. For example, a line in
the application module&#39;s setup&#40;&#41; method might be:

&#34;$self-&gt;error_mode&#40; &#39;your_sub_here&#39; &#41;;&#34;

The programmer can write the &#39;your_sub_here&#39; subroutine to
display a generic message to the web browser, display the
contents of $@ &#40;which are sent as the only parameter to the
named subroutine&#41; or take some other action such as sending
an email to the webmaster.

For example, if this statement is encountered:

die&#40; &#34;Unexpected format for input data, stopped&#34; &#41;;

then $@ would look something like &#34;Unexpected format for
input data, stopped at /www/cgi-bin/Events/View.pm line 50.&#34;

As with CGI::Carp, use of error_mode&#40;&#41; avoids display of
&#34;500 Internal Server Error&#34; upon encountering a die&#40;&#41; or
croak&#40;&#41;.

The runmode specified by error_mode&#40;&#41; is used when die&#40;&#41; or
croak&#40;&#41; is encountered even if CGI::Carp has been used
&#40;whether in the instance script or the application module&#41;,
so in this sense using CGI::Carp doesn&#39;t hurt -- much.
Unfortunately when CGI::Carp is used, $@ as sent to the
runmode specified by error_mode&#40;&#41; and sent to the errors log
provides a useless line number of Carp.pm, not the line
number in the application module at which the die&#40;&#41; or
croak&#40;&#41; was encountered.


CONCLUSION
==========

Avoid using CGI::Carp in an instance script. Catch compile-
time errors by using &#34;perl -cT instance_script.cgi&#34; instead.
This is because the use of CGI::Carp in the instance script
will make error messages significantly less useful if you
decide to use CGI::Carp in the application module being run
by the instance script. More significantly, using CGI::Carp
in the instance script doesn&#39;t work to cause compile-time
errors encountered in the application module won&#39;t be be
displayed, so it&#39;s basically a waste.

It might be wise to use CGI::Carp in an application module
while you&#39;re developing your application, as it is with
other Perl programs that interface with webservers via CGI.
By using CGI::Carp in an application module, you&#39;ll see
runtime error messages on screen instead of a useless &#34;500
Internal Server Error&#34; screen, no matter what the reason of
the runtime error.

&#40;You could check your server&#39;s error message log each time
you see a 500 Internal Server Error screen, but why not see
the error message onscreen during development? Note: when
you&#39;re in production, remove &#34;use CGI::Carp&#34; so your program
won&#39;t display line numbers and other clues for crackers
displayed to users in the event of runtime errors.&#41;

If you use die&#40;&#41; or croak&#40;&#41; in your application module -- as
is often done for debugging or to deal with a no-way-to-
recover operational condition -- then you want to use
error_mode&#40;&#41;, whether or not you also use CGI::Carp, if:

1. You want the program to do something &#40;e.g., send an
email&#41; when it encounters a die&#40;&#41; or croak&#40;&#41; in addition to
whatever is displayed to the web browser, or

2. You will be disabling CGI::Carp when you go into
production and you want to create a customized display of
the die&#40;&#41; or croak&#40;&#41; situation rather than sending &#34;500
Internal Server Error&#34; to the web browser. &#40;But consider
whether the server-default &#34;500 Internal Server Error&#34;
screen just might be best in production because it provides
no clues to a malicious user.&#41;

And, if you use die&#40;&#41; or croak&#40;&#41; in your application module,
CGI::Carp seems to do more harm than good, because during
debugging it ruins your ability to easily see the line
number in the application module at which the die&#40;&#41; or
croak&#40;&#41; occurred. That line number isn&#39;t shown to you while
using CGI::Carp with CGI::Application, whether you&#39;re
watching your error log, watching a screen for CGI::Carp
output, or watching the screen for customized output of $@
by the error_mode runmode.

Although CGI::Carp is nice because it gives you at least
some information for all types of runtime errors, the win of
getting useful line numbers by skipping CGI::Carp is worth
the annoyance of the occasional &#34;500 Internal Server Error&#34;
during development that arises from runtime errors other
than die&#40;&#41; or croak&#40;&#41;.
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-582334" href="/Public/Bug/Display.html?id=42389#txn-582334">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;24&nbsp;12:04:32&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-583192" href="/Public/Bug/Display.html?id=42389#txn-583192">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;25&nbsp;21:06:11&nbsp;2009</span>
    <span class="description">mark [...] summersault.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #42389] A couple of suggestions to clarify documentation</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 25 Mar 2009 21:05:55 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-CGI-Application-Dispatch [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Stosberg &lt;mark [...] summersault.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/583192/294769/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/294769">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"> 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I made a good deal of progress with CGI::Application &#40;trying to get more 
&gt; serious about learning web apps; I can&#39;t keep up with the changes and 
&gt; the complexity re Catalyst&#39;s dispatcher, so I will leave that one on the 
&gt; vine for now&#41;.
&gt; 
&gt; I wonder what you think of the attached document I put together 
&gt; &#40;compulsively&#41; when trying to learn &#40;master; wretched excess&#41; the pros 
&gt; and cons of CGI::Carp. If it&#39;s not too pedantic I&#39;d be happy to put it 
&gt; on the mailing list.
</div>
Hello Dave,

Your correspondence is being sent through the bug tracker. I&#39;m not sure if you
meant for that to happen. 

Have you tried using the DebugScreen plugin? It seems like it does what you
want:

<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~nekokak/CGI-Application-Plugin-DebugScreen-0.06/">http://search.cpan.org/~nekokak/CGI-Application-Plugin-DebugScreen-0.06/</a></span>

You are welcome to share it the mailing list. It seems like it can boiled
down some, though:

- CGI::App qw&#40; fatalsToBrowser &#41;; works in an instance script, but is not
  particularly useful there because instance scripts tend to be short and simple.

- With an CGI::App module, defining your own &#39;error_mode&#40;&#41;&#39; is recommend to trap your own errors. For prepackaged solutions, you can use CGI::Application::Plugin::DebugScreen or CGI::Application::Plugin::DevPopup &#40;with the logging extension for it&#41;. 

    Mark
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-583199" href="/Public/Bug/Display.html?id=42389#txn-583199">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;25&nbsp;21:15:17&nbsp;2009</span>
    <span class="description">MARKSTOS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.521339</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
