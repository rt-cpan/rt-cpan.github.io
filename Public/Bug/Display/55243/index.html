<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #55243 for ExtUtils-CBuilder: Incorrect C++ handling in ExtUtils::CBuilder</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #55243 for ExtUtils-CBuilder: Incorrect C++ handling in ExtUtils::CBuilder</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/ExtUtils-CBuilder/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/ExtUtils-CBuilder/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/ExtUtils-CBuilder/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/ExtUtils-CBuilder/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please email the <a href="mailto:perlbug@perl.org">preferred bug tracker</a> to report your issue.</div>
</p>
<p>
<div>Please visit the <a href="http://rt.perl.org/rt3/">preferred bug tracker</a> to report your issue.</div>
</p>
</div>


<div class="error">
  <div class="titlebox error " id="">
  <div class="titlebox-title">
    <span class="left">Queue is disabled</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--error----UXVldWUgaXMgZGlzYWJsZWQ_---0">


This queue is disabled and you may not create new tickets in it.  Disabled queues are usually because the distribution was merged with another or changed names.  Sometimes they are the end result of a bad autocreate from PAUSE data before anyone noticed.
    <hr class="clear" />
  </div>
</div>




</div>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p>ExtUtils::CBuilder is now maintained by the Perl 5 core.  Please report bugs via the 'perlbug' tool included with Perl and do not add new tickets here.</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">55243</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/ExtUtils-CBuilder/Active/">ExtUtils-CBuilder</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
peter.jeremy [...] alcatel-lucent.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12462-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12463-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;04&nbsp;22:05:04&nbsp;2010</span>
    <span class="description">peter.jeremy [...] alcatel-lucent.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Incorrect C++ handling in ExtUtils::CBuilder</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 5 Mar 2010 13:56:13 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-CBuilder [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Jeremy &lt;peter.jeremy [...] alcatel-lucent.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Distribution: ExtUtils-CBuilder-0.2702
Perl: v5.8.8 built for sun4u-solaris-64
Running on SunOS insmb.au.alcatel-lucent.com 5.10 Generic_141444-09 sun4u sparc SUNW,Sun-Fire-V490

I am using Sun Studio 12 to build perl and ExtUtils::CBuilder fails
test 03-cplusplus as follows:

insmb% perl -I $PWD/blib/lib t/03-cplusplus.t                 
cc: Warning: illegal option -x
cc: No input file specified, no output generated
cc: Warning: illegal option -x
cc: No input file specified, no output generated
1..0 # SKIP no compiler available for testing

Investigating further, ExtUtils/CBuilder/Base.pm appears to compile
C++ code using the same compiler and compiler options as for C, with
the addition of &#39;-x c++&#39; hard-appended into the ccflags.  Whilst this
should sort-of work for gcc, it will fail for every other compiler I
am aware of.  And even for gcc it&#39;s not totally correct because
options when compiling C and C++ are not identical.

This appear to be the same problem reported as 53843.

I have fixed the problem for myself by removing the offending
  push @ccflags, qw/-x c++/ if $args{&#39;C++&#39;};
and adding
  $cc[0] = &#39;CC&#39; if $args{&#39;C++&#39;};
before the do_system&#40;&#41; - but this is just as unportable as the
existing code.  It&#39;s not clear what a portable fix should be
because perl&#39;s Configure script does not support C++ and therefore
there are no C++ configuration details available for perl modules.

-- 
Peter Jeremy
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;26&nbsp;08:00:36&nbsp;2010</span>
    <span class="description">LEONT [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m adding my bug to this bug report, because I think it&#39;s highly related.

E::C seems to be linking C++ programs as if they were C programs. This
should work except that it doesn&#39;t include the C++ standard libraries,
resulting in linking errors. I can add them as explicit linker flag, but
I don&#39;t think that&#39;s portable.

Regards,

Leon Timmermans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;26&nbsp;08:00:38&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;26&nbsp;08:23:59&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Good timing in adding to this ticket.

Some work has started on adding better C++ support to ExtUtils::CBuilder.

There is a branch called &#34;cplusplus&#34; in the EU::CB repository on github
-- see the branches dropdown on
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/dagolden/extutils-cbuilder/">http://github.com/dagolden/extutils-cbuilder/</a></span>

Work is loosely being coordinated on the #toolchain IRC channel on
irc.perl.org.  Ask for user &#34;Sno|Laptop&#34; if you would like to contribute
in any way.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;12&nbsp;10:27:03&nbsp;2010</span>
    <span class="description">tammer [...] tammer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> tammer [...] tammer.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,
please also have a look at: Id: 57421

make test
... cut for clarity ...
../cpan/ExtUtils-CBuilder/t/02-link.t .............. ok
cc_r: 1501-228 &#40;W&#41; input file c++ not found
cc_r: 1501-228 &#40;W&#41; input file c++ not found
../cpan/ExtUtils-CBuilder/t/03-cplusplus.t ......... skipped: no
compiler available for testing
... cut for clarity ...

On AIX c++ is normally invoked by xlC_r or xlC / g++ &#40;if present&#41;.

Bye
  Rainer
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;26&nbsp;22:53:18&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jens Rehsack has re-worked how C++ is handled.  I&#39;ve released 0.27_04
with his changes.  I don&#39;t know if they solve them, but I hope it&#39;s a
step in the right direction.

Regards,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;27&nbsp;21:03:28&nbsp;2010</span>
    <span class="description">peter.jeremy [...] alcatel-lucent.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55243] Incorrect C++ handling in ExtUtils::CBuilder</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 28 Jul 2010 10:55:33 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Golden via RT &lt;bug-ExtUtils-CBuilder [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Jeremy &lt;peter.jeremy [...] alcatel-lucent.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2010-Jul-27 10:53:19 +0800, David Golden via RT &lt;bug-ExtUtils-CBuilder@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Jens Rehsack has re-worked how C++ is handled.  I&#39;ve released 0.27_04
&gt;with his changes.  I don&#39;t know if they solve them, but I hope it&#39;s a
&gt;step in the right direction.
</div>
I&#39;ve had a look at the changes to ExtUtils::CBuilder::Base and it looks
reasonable to me.  I am aware of one other C++ compiler name:  HP Tru64
uses &#39;cxx&#39; &#40;see <span class="clickylink"><a target="new" rel="nofollow" href="http://h30097.www3.hp.com/cplus/&#41;">http://h30097.www3.hp.com/cplus/&#41;</a></span>.  This is now a fairly
dead product so I&#39;m not sure if it&#39;s worth adding &#39;cxx&#39; to $cc2cxx{cc}.

I am now getting a failure in 04-base though:
insmb% make test
PERL_DL_NONLAZY=1 /usr/local/bin/perl &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00-have-compiler.t .. ok   
t/01-basic.t .......... ok     
t/02-link.t ........... ok   
t/03-cplusplus.t ...... ok   
t/04-base.t ........... 1/58 
#   Failed test &#39;Got expected value when &#39;config&#39; argument passed to new&#40;&#41;&#39;
#   at t/04-base.t line 31.
#          got: &#39;/opt/SUNWspro/bin/cc&#39;
#     expected: &#39;foobar&#39;
t/04-base.t ........... 23/58 # Looks like you failed 1 test of 58.
t/04-base.t ........... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/58 subtests 

Test Summary Report
-------------------
t/04-base.t         &#40;Wstat: 256 Tests: 58 Failed: 1&#41;
  Failed test:  5
  Non-zero exit status: 1
Files=5, Tests=92,  4 wallclock secs &#40; 0.10 usr  0.07 sys +  1.77 cusr  0.73 csys =  2.67 CPU&#41;
Result: FAIL
Failed 1/5 test programs. 1/92 subtests failed.
*** Error code 1
make: Fatal error: Command failed for target `test_dynamic&#39;
insmb% perl -I $PWD/blib/lib t/04-base.t      
1..58
ok 1 - ExtUtils::CBuilder::Base-&gt;new&#40;&#41; returned true value
ok 2 - The object isa ExtUtils::CBuilder::Base
ok 3 - ExtUtils::CBuilder::Base-&gt;new&#40;&#41; returned true value
ok 4 - The object isa ExtUtils::CBuilder::Base
not ok 5 - Got expected value when &#39;config&#39; argument passed to new&#40;&#41;
#   Failed test &#39;Got expected value when &#39;config&#39; argument passed to new&#40;&#41;&#39;
#   at t/04-base.t line 31.
#          got: &#39;cc&#39;
#     expected: &#39;foobar&#39;
ok 6 - ExtUtils::CBuilder::Base-&gt;new&#40;&#41; returned true value
ok 7 - The object isa ExtUtils::CBuilder::Base
ok 8 - Got expected value $ENV{CC} set
...
ok 58 - Completed all tests in t/04-base.t
# Looks like you failed 1 test of 58.
insmb% 

-- 
Peter Jeremy
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;28&nbsp;05:23:56&nbsp;2010</span>
    <span class="description">REHSACK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here are two patches which may solve the both latest issues
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-adding-cxx-as-possible-c-compiler-and-a-possible-imp.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From b5d838f494dcc6a0852050e565450e68b6587dd9 Mon Sep 17 00:00:00 2001
From: Jens Rehsack &lt;rehsack@googlemail.com&gt;
Date: Wed, 28 Jul 2010 11:19:07 +0200
Subject: [PATCH 1/2] adding cxx as possible c++ compiler and a possible improvement to find_perl_interpreter

---
 lib/ExtUtils/CBuilder/Base.pm |    4 ++--
 1 files changed, 2 insertions&#40;+&#41;, 2 deletions&#40;-&#41;

diff --git a/lib/ExtUtils/CBuilder/Base.pm b/lib/ExtUtils/CBuilder/Base.pm
index f823df4..3edcff0 100644
--- a/lib/ExtUtils/CBuilder/Base.pm
+++ b/lib/ExtUtils/CBuilder/Base.pm
@@ -22,7 +22,7 @@ $VERSION = &#39;0.27_04&#39;;
 
 my %cc2cxx = &#40;
     # first line order is important to support wrappers like in pkgsrc
-    cc =&gt; [ &#39;c++&#39;, &#39;CC&#39;, &#39;aCC&#39;, ], # Sun Studio, HP ANSI C/C++ Compilers
+    cc =&gt; [ &#39;c++&#39;, &#39;CC&#39;, &#39;aCC&#39;, &#39;cxx&#39;, ], # Sun Studio, HP ANSI C/C++ Compilers
     gcc =&gt; [ &#39;g++&#39; ], # GNU Compiler Collection
     xlc =&gt; [ &#39;xlC&#39; ], # IBM C/C++ Set, xlc without thread-safety
     xlc_r =&gt; [ &#39;xlC_r&#39; ], # IBM C/C++ Set, xlc with thread-safety
@@ -77,7 +77,7 @@ sub find_perl_interpreter {
   my $perl;
   File::Spec-&gt;file_name_is_absolute&#40;$perl = $^X&#41;
     or -f &#40;$perl = $Config::Config{perlpath}&#41;
-    or &#40;$perl = $^X&#41;;
+    or &#40;$perl = $^X&#41;; # XXX how about using IPC::Cmd::can_run here?
   return $perl;
 }
 
-- 
1.7.0.5

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-skip-test-with-config-when-ENV-CC-is-set.patch</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 059147e7f73b017bd744e4daed0fd936f5371b3e Mon Sep 17 00:00:00 2001
From: Jens Rehsack &lt;rehsack@googlemail.com&gt;
Date: Wed, 28 Jul 2010 11:20:01 +0200
Subject: [PATCH 2/2] skip test with config when $ENV{CC} is set

---
 t/04-base.t |   18 +++++++++++-------
 1 files changed, 11 insertions&#40;+&#41;, 7 deletions&#40;-&#41;

diff --git a/t/04-base.t b/t/04-base.t
index bdc8d61..dba0af6 100644
--- a/t/04-base.t
+++ b/t/04-base.t
@@ -23,13 +23,17 @@ ok&#40; $base, &#34;ExtUtils::CBuilder::Base-&gt;new&#40;&#41; returned true value&#34; &#41;;
 isa_ok&#40; $base, &#39;ExtUtils::CBuilder::Base&#39; &#41;;
 
 $phony = &#39;foobar&#39;;
-$base = ExtUtils::CBuilder::Base-&gt;new&#40;
-    config  =&gt; { cc =&gt; $phony },
-&#41;;
-ok&#40; $base, &#34;ExtUtils::CBuilder::Base-&gt;new&#40;&#41; returned true value&#34; &#41;;
-isa_ok&#40; $base, &#39;ExtUtils::CBuilder::Base&#39; &#41;;
-is&#40; $base-&gt;{config}-&gt;{cc}, $phony,
-    &#34;Got expected value when &#39;config&#39; argument passed to new&#40;&#41;&#34; &#41;;
+SKIP: {
+    skip&#40; &#34;ExtUtils::CBuilder::Base-&gt;new&#40;&#41; takes $ENV{CC}&#34;, 3 &#41; if&#40; $ENV{CC} &#41;;
+
+    $base = ExtUtils::CBuilder::Base-&gt;new&#40;
+	config  =&gt; { cc =&gt; $phony },
+    &#41;;
+    ok&#40; $base, &#34;ExtUtils::CBuilder::Base-&gt;new&#40;&#41; returned true value&#34; &#41;;
+    isa_ok&#40; $base, &#39;ExtUtils::CBuilder::Base&#39; &#41;;
+    is&#40; $base-&gt;{config}-&gt;{cc}, $phony,
+	&#34;Got expected value when &#39;config&#39; argument passed to new&#40;&#41;&#34; &#41;;
+}
 
 {
     $phony = &#39;barbaz&#39;;
-- 
1.7.0.5

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;28&nbsp;15:33:21&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55243] Incorrect C++ handling in ExtUtils::CBuilder</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 28 Jul 2010 15:32:49 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-CBuilder [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Jul 28, 2010 at 5:23 AM, Jens Rehsack via RT
&lt;bug-ExtUtils-CBuilder@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: ExtUtils-CBuilder
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=55243">https://rt.cpan.org/Ticket/Display.html?id=55243</a></span> &gt;
&gt;
&gt; Here are two patches which may solve the both latest issues
</div>
Thanks. I took the first, and changed to second to localize instead.
I released 0.27_05 with additional suggestions.  Let&#39;s hope that fixes
things.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;28&nbsp;17:43:54&nbsp;2010</span>
    <span class="description">peter.jeremy [...] alcatel-lucent.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #55243] Incorrect C++ handling in ExtUtils::CBuilder</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 29 Jul 2010 07:36:07 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> David Golden via RT &lt;bug-ExtUtils-CBuilder [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Jeremy &lt;peter.jeremy [...] alcatel-lucent.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2010-Jul-29 03:33:23 +0800, David Golden via RT &lt;bug-ExtUtils-CBuilder@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Thanks. I took the first, and changed to second to localize instead.
&gt;I released 0.27_05 with additional suggestions.  Let&#39;s hope that fixes
&gt;things.
</div>
Thank you, that passes its self tests on:

Solaris 10 using Studio 12 and perl 5.8.8 in 64-bit mode
FreeBSD-8.1/amd64 and perl 5.10.1

-- 
Peter Jeremy
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;28&nbsp;17:47:34&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Glad to hear it works.  I&#39;m closing this ticket.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;28&nbsp;17:47:35&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
