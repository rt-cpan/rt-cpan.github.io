<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #62920 for GDGraph: Maximise x-axis usage when using text labels [PATCH]</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #62920 for GDGraph: Maximise x-axis usage when using text labels [PATCH]</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=GDGraph">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=GDGraph">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=GDGraph">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=GDGraph">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GDGraph">GDGraph CPAN distribution</a>.</p>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p>There are plenty of good ideas of what people can do published here on the queue. Turning a patch from the tracker into a pull request is not one of them. In order to get maintainers' attention way more quickier, PR should have at least a sample included. We know it's hard to test images generating software, but it doesn't mean we can not test numbers produced by intermediate algorithms used to generate these images, so either a test or a sample.</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">62920</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=GDGraph">GDGraph</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
patermanns [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-14346-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.44    </td>
  </tr>
  <tr id="CF-14347-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




05_x_axis_ticks.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/854034/442049/05_x_axis_ticks.diff">
Thu Nov 11 05:52:25 2010 (9.9k) by patermanns [...] gmail.com
</a>
</font></li>
</ul>


test_chart05a.png<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/854049/442073/test_chart05a.png">
Thu Nov 11 06:56:41 2010 (2k) by patermanns [...] gmail.com
</a>
</font></li>
</ul>


test_chart05b.png<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/854049/442074/test_chart05b.png">
Thu Nov 11 06:56:41 2010 (2.1k) by patermanns [...] gmail.com
</a>
</font></li>
</ul>


test_chartg05a.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/854049/442075/test_chartg05a.pl">
Thu Nov 11 06:56:41 2010 (1.2k) by patermanns [...] gmail.com
</a>
</font></li>
</ul>


test_chartg05b.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/854049/442076/test_chartg05b.pl">
Thu Nov 11 06:56:41 2010 (1.2k) by patermanns [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=62920">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-854034" href="/Public/Bug/Display.html?id=62920#txn-854034">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;11&nbsp;05:52:25&nbsp;2010</span>
    <span class="description">patermanns [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Maximise x-axis usage when using text labels [PATCH]</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/854034/442048/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/442048">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">When the x-axis tick labels are text rather than numeric, the first
tick/label currently appears at x = 1, rather than x = 0. Similarly, the
last tick/label appears at max&#40;x&#41;-1 rather than max&#40;x&#41;. This is
particularly noticeable on line graphs, especially when using two_axes.

To give the option to maximise usage of the x-axis when using text
labels, I have allowed x_tick_number to take the values 0 and -1, both
values indicating that the labels are text rather than numeric. A value
of zero is now the default and is equivalent to leaving x_tick_number
undefined in the previous version, so the graph produced should be the
same as before. If x_tick_number is set to -1, however, the ticks are
adjusted so that the first appears at x = 0 and the last at x = max&#40;x&#41;.
Note that this has been disabled for area graphs and bar charts by
forcing x_tick_number to 0 if it is negative.

A patch to area.pm, axestype.pm, bars.pm, lines.pm and points.pm is
attached. Note that, although it is independent of my previous patches
to axestype.pm, the patch assumes that those patches have been applied.
If not, the line numbers may have to be adjusted.

Tested with ActiveState Perl 5.8.9 on Windows XP and Perl 5.8.8 on Red
Hat Enterprise Linux 5.3 &#40;64-bit&#41;.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 05_x_axis_ticks.diff</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/854034/442049/05_x_axis_ticks.diff">Download 05_x_axis_ticks.diff</a><br />
<span class="downloadcontenttype">text/x-diff 9.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">*** old\area.pm	Wed Apr 25 20:16:10 2007
--- new\area.pm	Wed Nov 10 15:51:02 2010
***************
*** 19,24 ****
--- 19,31 ----
  
  @GD::Graph::area::ISA = qw&#40; GD::Graph::axestype &#41;;
  
+ sub initialise
+ {
+     my $self = shift;
+     $self-&gt;SUPER::initialise&#40;&#41;;
+     $self-&gt;{x_tick_number} = 0 if $self-&gt;{x_tick_number} &lt; 0;
+ }
+ 
  # PRIVATE
  sub draw_data_set
  {
*** old\axestype.pm	Wed Nov 10 16:09:07 2010
--- new\axestype.pm	Wed Nov 10 16:42:04 2010
***************
*** 35,41 ****
   
      # Number of ticks for the y axis
      y_tick_number       =&gt; 5,
!     x_tick_number       =&gt; undef,       # CONTRIB Scott Prahl
      x_tick_offset       =&gt; 0,           # CONTRIB Damon Brodi
   
      # Skip every nth label. if 1 will print every label on the axes,
--- 35,41 ----
   
      # Number of ticks for the y axis
      y_tick_number       =&gt; 5,
!     x_tick_number       =&gt; 0,           # CONTRIB Scott Prahl
      x_tick_offset       =&gt; 0,           # CONTRIB Damon Brodi
   
      # Skip every nth label. if 1 will print every label on the axes,
***************
*** 561,567 ****
      $self-&gt;setup_left_boundary&#40;&#41;;
      $self-&gt;setup_right_boundary&#40;&#41;;
  
!     if &#40;$self-&gt;correct_width &#38;&#38; !$self-&gt;{x_tick_number}&#41;
      {
          if &#40;! $self-&gt;{rotate_chart}&#41;
          {
--- 561,567 ----
      $self-&gt;setup_left_boundary&#40;&#41;;
      $self-&gt;setup_right_boundary&#40;&#41;;
  
!     if &#40;$self-&gt;correct_width &#38;&#38; $self-&gt;{x_tick_number} &lt;= 0&#41;
      {
          if &#40;! $self-&gt;{rotate_chart}&#41;
          {
***************
*** 603,609 ****
  
      # calculate the step size for x data
      # CONTRIB Changes by Scott Prahl
!     if &#40;defined $s-&gt;{x_tick_number}&#41;
      {
          my $delta = &#40;$s-&gt;{right} - $s-&gt;{left}&#41;/&#40;$s-&gt;{x_max} - $s-&gt;{x_min}&#41;;
          # &#39;True&#39; numerical X axis addition # From: Gary Deschaines
--- 603,609 ----
  
      # calculate the step size for x data
      # CONTRIB Changes by Scott Prahl
!     if &#40;$s-&gt;{x_tick_number} &gt; 0&#41;
      {
          my $delta = &#40;$s-&gt;{right} - $s-&gt;{left}&#41;/&#40;$s-&gt;{x_max} - $s-&gt;{x_min}&#41;;
          # &#39;True&#39; numerical X axis addition # From: Gary Deschaines
***************
*** 623,629 ****
      }
      else
      {
!         $s-&gt;{x_step} = &#40;$s-&gt;{right} - $s-&gt;{left}&#41;/&#40;$s-&gt;{_data}-&gt;num_points + 1&#41;;
          $s-&gt;{x_offset} = $s-&gt;{left};
      }
  }
--- 623,631 ----
      }
      else
      {
!         my $num_points = !$s-&gt;{x_tick_number}? $s-&gt;{_data}-&gt;num_points + 1:
!                                                $s-&gt;{_data}-&gt;num_points - 1;
!         $s-&gt;{x_step} = &#40;$s-&gt;{right} - $s-&gt;{left}&#41;/$num_points;
          $s-&gt;{x_offset} = $s-&gt;{left};
      }
  }
***************
*** 634,640 ****
  
      # calculate the step size for x data
      # CONTRIB Changes by Scott Prahl
!     if &#40;defined $s-&gt;{x_tick_number}&#41;
      {
          my $delta = &#40;$s-&gt;{bottom} - $s-&gt;{top}&#41;/&#40;$s-&gt;{x_max} - $s-&gt;{x_min}&#41;;
          # &#39;True&#39; numerical X axis addition # From: Gary Deschaines
--- 636,642 ----
  
      # calculate the step size for x data
      # CONTRIB Changes by Scott Prahl
!     if &#40;$s-&gt;{x_tick_number} &gt; 0&#41;
      {
          my $delta = &#40;$s-&gt;{bottom} - $s-&gt;{top}&#41;/&#40;$s-&gt;{x_max} - $s-&gt;{x_min}&#41;;
          # &#39;True&#39; numerical X axis addition # From: Gary Deschaines
***************
*** 654,660 ****
      }
      else
      {
!         $s-&gt;{x_step} = &#40;$s-&gt;{bottom} - $s-&gt;{top}&#41;/&#40;$s-&gt;{_data}-&gt;num_points + 1&#41;;
          $s-&gt;{x_offset} = $s-&gt;{top};
      }
  }
--- 656,664 ----
      }
      else
      {
!         my $num_points = !$s-&gt;{x_tick_number}? $s-&gt;{_data}-&gt;num_points + 1:
!                                                $s-&gt;{_data}-&gt;num_points - 1;
!         $s-&gt;{x_step} = &#40;$s-&gt;{bottom} - $s-&gt;{top}&#41;/$num_points;
          $s-&gt;{x_offset} = $s-&gt;{top};
      }
  }
***************
*** 695,705 ****
  
      # CONTRIB Scott Prahl
      # make sure that we can generate valid x tick marks
!     undef&#40;$s-&gt;{x_tick_number}&#41; if $s-&gt;{_data}-&gt;num_points &lt; 3;
!     undef&#40;$s-&gt;{x_tick_number}&#41; if
          !defined $s-&gt;{x_max} || 
          !defined $s-&gt;{x_min} || 
          $s-&gt;{x_max} == $s-&gt;{x_min};
  
      $s-&gt;{rotate_chart} ? $s-&gt;setup_x_step_size_h&#40;&#41; :
                           $s-&gt;setup_x_step_size_v&#40;&#41;;
--- 699,711 ----
  
      # CONTRIB Scott Prahl
      # make sure that we can generate valid x tick marks
!     if &#40;$s-&gt;{x_tick_number} &gt; 0&#41; {
!       $s-&gt;{x_tick_number} = 0 if $s-&gt;{_data}-&gt;num_points &lt; 3;
!       $s-&gt;{x_tick_number} = 0 if
          !defined $s-&gt;{x_max} || 
          !defined $s-&gt;{x_min} || 
          $s-&gt;{x_max} == $s-&gt;{x_min};
+     }
  
      $s-&gt;{rotate_chart} ? $s-&gt;setup_x_step_size_h&#40;&#41; :
                           $s-&gt;setup_x_step_size_v&#40;&#41;;
***************
*** 763,769 ****
  {
      my $self = shift;
  
!     my @values = $self-&gt;{x_tick_number} ? 
          @{$self-&gt;{x_values}} : 
          $self-&gt;{_data}-&gt;x_values;
  
--- 769,775 ----
  {
      my $self = shift;
  
!     my @values = &#40;$self-&gt;{x_tick_number} &gt; 0&#41;? 
          @{$self-&gt;{x_values}} : 
          $self-&gt;{_data}-&gt;x_values;
  
***************
*** 787,793 ****
      $self-&gt;{x_label_height} = 0;
      $self-&gt;{x_label_width} = 0;
  
!     if &#40;defined $self-&gt;{x_tick_number}&#41;
      {
          # We want to emulate numerical x axes
          foreach my $t &#40;0..$self-&gt;{x_tick_number}&#41;
--- 793,799 ----
      $self-&gt;{x_label_height} = 0;
      $self-&gt;{x_label_width} = 0;
  
!     if &#40;$self-&gt;{x_tick_number} &gt; 0&#41;
      {
          # We want to emulate numerical x axes
          foreach my $t &#40;0..$self-&gt;{x_tick_number}&#41;
***************
*** 1123,1129 ****
  
      for &#40;my $i = 0; $i &lt; $self-&gt;{_data}-&gt;num_points; $i++&#41; 
      {
!         my &#40;$x, $y&#41; = $self-&gt;val_to_pixel&#40;$i + 1, 0, 1&#41;;
  
          $x = $self-&gt;{left} unless $self-&gt;{zero_axis_only};
  
--- 1129,1136 ----
  
      for &#40;my $i = 0; $i &lt; $self-&gt;{_data}-&gt;num_points; $i++&#41; 
      {
!         my $p = &#40;$self-&gt;{x_tick_number} &lt; 0&#41;? $i: $i + 1;
!         my &#40;$x, $y&#41; = $self-&gt;val_to_pixel&#40;$p, 0, 1&#41;;
  
          $x = $self-&gt;{left} unless $self-&gt;{zero_axis_only};
  
***************
*** 1192,1198 ****
  
      for &#40;my $i = 0; $i &lt; $self-&gt;{_data}-&gt;num_points; $i++&#41; 
      {
!         my &#40;$x, $y&#41; = $self-&gt;val_to_pixel&#40;$i + 1, 0, 1&#41;;
  
          $y = $self-&gt;{bottom} unless $self-&gt;{zero_axis_only};
  
--- 1199,1206 ----
  
      for &#40;my $i = 0; $i &lt; $self-&gt;{_data}-&gt;num_points; $i++&#41; 
      {
!         my $p = &#40;$self-&gt;{x_tick_number} &lt; 0&#41;? $i: $i + 1;
!         my &#40;$x, $y&#41; = $self-&gt;val_to_pixel&#40;$p, 0, 1&#41;;
  
          $y = $self-&gt;{bottom} unless $self-&gt;{zero_axis_only};
  
***************
*** 1364,1370 ****
      return $self 
          unless $self-&gt;{x_plot_values};
  
!     if &#40;defined $self-&gt;{x_tick_number}&#41;
      {
          $self-&gt;draw_x_ticks_number&#40;&#41; or return;
      }
--- 1372,1378 ----
      return $self 
          unless $self-&gt;{x_plot_values};
  
!     if &#40;$self-&gt;{x_tick_number} &gt; 0&#41;
      {
          $self-&gt;draw_x_ticks_number&#40;&#41; or return;
      }
***************
*** 1579,1585 ****
              _best_ends&#40;$y_min, $y_max, @$self{&#39;y_tick_number&#39;,&#39;y_min_range&#39;}&#41;;
      }
  
!     if &#40;defined&#40;$self-&gt;{x_tick_number}&#41;&#41;
      {
          if &#40;defined&#40;$self-&gt;{x_min_value}&#41; &#38;&#38; defined&#40;$self-&gt;{x_max_value}&#41;&#41;
          {
--- 1587,1593 ----
              _best_ends&#40;$y_min, $y_max, @$self{&#39;y_tick_number&#39;,&#39;y_min_range&#39;}&#41;;
      }
  
!     if &#40;$self-&gt;{x_tick_number} &gt; 0&#41;
      {
          if &#40;defined&#40;$self-&gt;{x_min_value}&#41; &#38;&#38; defined&#40;$self-&gt;{x_max_value}&#41;&#41;
          {
***************
*** 1930,1936 ****
      }
      else
      {
!         $ret_x = &#40;$self-&gt;{x_tick_number} ? $self-&gt;{x_offset} : $origin&#41; 
              + $x * $self-&gt;{x_step};
      }
      my $ret_y = $self-&gt;{rotate_chart} ? 
--- 1938,1944 ----
      }
      else
      {
!         $ret_x = &#40;&#40;$self-&gt;{x_tick_number} &gt; 0&#41;? $self-&gt;{x_offset} : $origin&#41; 
              + $x * $self-&gt;{x_step};
      }
      my $ret_y = $self-&gt;{rotate_chart} ? 
*** old\bars.pm	Wed Apr 25 20:16:10 2007
--- new\bars.pm	Wed Nov 10 15:50:05 2010
***************
*** 28,33 ****
--- 28,34 ----
      my $self = shift;
      $self-&gt;SUPER::initialise&#40;&#41;;
      $self-&gt;set&#40;correct_width =&gt; 1&#41;;
+     $self-&gt;{x_tick_number} = 0 if $self-&gt;{x_tick_number} &lt; 0;
  }
  
  sub draw_data
*** old\lines.pm	Tue Dec 13 19:13:00 2005
--- new\lines.pm	Wed Nov 10 15:39:09 2010
***************
*** 34,40 ****
      my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41; &#41;;
      my $type = $self-&gt;pick_line_type&#40;$ds&#41;;
  
!     my &#40;$xb, $yb&#41;;
      if &#40;defined $values[0]&#41;
      {
          if &#40;defined&#40;$self-&gt;{x_min_value}&#41; &#38;&#38; defined&#40;$self-&gt;{x_max_value}&#41;&#41;
--- 34,40 ----
      my $dsci = $self-&gt;set_clr&#40;$self-&gt;pick_data_clr&#40;$ds&#41; &#41;;
      my $type = $self-&gt;pick_line_type&#40;$ds&#41;;
  
!     my &#40;$xb, $yb, $p&#41;;
      if &#40;defined $values[0]&#41;
      {
          if &#40;defined&#40;$self-&gt;{x_min_value}&#41; &#38;&#38; defined&#40;$self-&gt;{x_max_value}&#41;&#41;
***************
*** 44,50 ****
          }
          else    
          {
!             &#40;$xb, $yb&#41; = $self-&gt;val_to_pixel&#40;1, $values[0], $ds&#41;;
          }
      }
  
--- 44,51 ----
          }
          else    
          {
!             $p = &#40;$self-&gt;{x_tick_number} &lt; 0&#41;? 0: 1;
!             &#40;$xb, $yb&#41; = $self-&gt;val_to_pixel&#40;$p, $values[0], $ds&#41;;
          }
      }
  
***************
*** 65,71 ****
          }
          else
          {
!             &#40;$xe, $ye&#41; = $self-&gt;val_to_pixel&#40;$i+1, $values[$i], $ds&#41;;
          }
  
          if &#40;defined $xb&#41;
--- 66,73 ----
          }
          else
          {
!             $p = &#40;$self-&gt;{x_tick_number} &lt; 0&#41;? $i: $i + 1;
!             &#40;$xe, $ye&#41; = $self-&gt;val_to_pixel&#40;$p, $values[$i], $ds&#41;;
          }
  
          if &#40;defined $xb&#41;
*** old\points.pm	Tue Dec 13 19:13:32 2005
--- new\points.pm	Wed Nov 10 15:55:20 2010
***************
*** 45,51 ****
          }
          else    
          {
!             &#40;$xp, $yp&#41; = $self-&gt;val_to_pixel&#40;$i+1, $values[$i], $ds&#41;;
          }
          $self-&gt;marker&#40;$xp, $yp, $type, $dsci &#41;;
          $self-&gt;{_hotspots}-&gt;[$ds]-&gt;[$i] = 
--- 45,52 ----
          }
          else    
          {
!             my $p = &#40;$self-&gt;{x_tick_number} &lt; 0&#41;? $i: $i + 1;
!             &#40;$xp, $yp&#41; = $self-&gt;val_to_pixel&#40;$p, $values[$i], $ds&#41;;
          }
          $self-&gt;marker&#40;$xp, $yp, $type, $dsci &#41;;
          $self-&gt;{_hotspots}-&gt;[$ds]-&gt;[$i] = 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-854049" href="/Public/Bug/Display.html?id=62920#txn-854049">#</a>      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;11&nbsp;06:56:41&nbsp;2010</span>
    <span class="description">patermanns [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> patermanns [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/854049/442072/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/442072">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 186b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I attach a short test program that shows the issue &#40;test_chartg05a.pl&#41;
and one that shows the effect of the new setting &#40;test_chartg05b.pl&#41;. I
also attach the resulting output from both.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test_chart05a.png</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/854049/442073/test_chart05a.png">Download test_chart05a.png</a><br />
<span class="downloadcontenttype">image/png 2k</span>
</div>
<div class="messagebody">
<img alt="test_chart05a.png" title="test_chart05a.png" src="/Ticket/Attachment/854049/442073/" /></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test_chart05b.png</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/854049/442074/test_chart05b.png">Download test_chart05b.png</a><br />
<span class="downloadcontenttype">image/png 2.1k</span>
</div>
<div class="messagebody">
<img alt="test_chart05b.png" title="test_chart05b.png" src="/Ticket/Attachment/854049/442074/" /></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test_chartg05a.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/854049/442075/test_chartg05a.pl">Download test_chartg05a.pl</a><br />
<span class="downloadcontenttype">text/x-perl 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w
use strict;
use GD::Graph::lines;

my $data1 = &#39;50,30,40,150,60,70,80,120,180,90,20,210&#39;;
my $data2 = &#39;400,545,450,600,750,400,1200,800,1000,500,900,1100&#39;;
my @x_axis_data = qw&#40;00:00 01:00 02:00 03:00
                     04:00 05:00 06:00 07:00
                     08:00 09:00 10:00 11:00
                     12:00 13:00 14:00 15:00
                     16:00 17:00 18:00 19:00
                     20:00 21:00 22:00 23:00
                     23:59 &#41;;
my @y1_axis_data = split&#40;/,/, $data1&#41;;
my @y2_axis_data = split&#40;/,/, $data2&#41;;
my @data = &#40; \@x_axis_data, \@y1_axis_data, \@y2_axis_data &#41;;
   
my $graph = GD::Graph::lines-&gt;new&#40;240, 175&#41;;
$graph-&gt;set&#40;
      title =&gt; &#39;Test 2 Axes&#39;,
      transparent =&gt; 0,
      dclrs =&gt; [ qw&#40;red blue&#41; ],
      # bgclr =&gt; &#39;white&#39;,
      line_width =&gt; 2,
      two_axes =&gt; 2,
      x_label_skip =&gt; 4,
      y1_min_value =&gt; 0,
      y1_max_value =&gt; 250,
      y2_min_value =&gt; 400,
      y2_max_value =&gt; 1200,
      tick_length =&gt; -4
 &#41; or die $graph-&gt;error;
$graph-&gt;set_legend&#40;split&#40;/,/, &#39;Line1,Line2&#39;&#41;&#41;;

my $gd = $graph-&gt;plot&#40;\@data&#41; or die $graph-&gt;error;

open&#40;IMAGE,&#34;&gt;test_chart05a.png&#34;&#41; or die &#34;Cannot open output file\n&#34;;
binmode&#40;IMAGE&#41;;
print IMAGE $gd-&gt;png;
close&#40;IMAGE&#41;;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test_chartg05b.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/854049/442076/test_chartg05b.pl">Download test_chartg05b.pl</a><br />
<span class="downloadcontenttype">text/x-perl 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w
use strict;
use GD::Graph::lines;

my $data1 = &#39;50,30,40,150,60,70,80,120,180,90,20,210&#39;;
my $data2 = &#39;400,545,450,600,750,400,1200,800,1000,500,900,1100&#39;;
my @x_axis_data = qw&#40;00:00 01:00 02:00 03:00
                     04:00 05:00 06:00 07:00
                     08:00 09:00 10:00 11:00
                     12:00 13:00 14:00 15:00
                     16:00 17:00 18:00 19:00
                     20:00 21:00 22:00 23:00
                     23:59 &#41;;
my @y1_axis_data = split&#40;/,/, $data1&#41;;
my @y2_axis_data = split&#40;/,/, $data2&#41;;
my @data = &#40; \@x_axis_data, \@y1_axis_data, \@y2_axis_data &#41;;
   
my $graph = GD::Graph::lines-&gt;new&#40;240, 175&#41;;
$graph-&gt;set&#40;
      title =&gt; &#39;Test 2 Axes&#39;,
      transparent =&gt; 0,
      dclrs =&gt; [ qw&#40;red blue&#41; ],
      # bgclr =&gt; &#39;white&#39;,
      line_width =&gt; 2,
      two_axes =&gt; 2,
      x_label_skip =&gt; 4,
      x_tick_number =&gt; -1,
      y1_min_value =&gt; 0,
      y1_max_value =&gt; 250,
      y2_min_value =&gt; 400,
      y2_max_value =&gt; 1200,
      tick_length =&gt; -4
 &#41; or die $graph-&gt;error;
$graph-&gt;set_legend&#40;split&#40;/,/, &#39;Line1,Line2&#39;&#41;&#41;;

my $gd = $graph-&gt;plot&#40;\@data&#41; or die $graph-&gt;error;

open&#40;IMAGE,&#34;&gt;test_chart05b.png&#34;&#41; or die &#34;Cannot open output file\n&#34;;
binmode&#40;IMAGE&#41;;
print IMAGE $gd-&gt;png;
close&#40;IMAGE&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1226816" href="/Public/Bug/Display.html?id=62920#txn-1226816">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;21&nbsp;16:51:54&nbsp;2013</span>
    <span class="description">RUZ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> New GD::Graph co-maintainer and new release on CPAN</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1226816/648170/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/648170">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 514b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

You recieved this message as you filed a bug report or feature request against GD::Graph module on CPAN.

My name is Ruslan and I&#39;m new co-maintainer of the module. I&#39;ve updated the module to 1.45 with doc changes and released it to CPAN. See distribution status [1].

I have TODO list for several releases, so if your ticket was a patch then turning it into a nice pull request may expedite inclusion :&#41;

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS">http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS</a></span>

-- 
Best regards, Ruslan.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1226817" href="/Public/Bug/Display.html?id=62920#txn-1226817">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;21&nbsp;16:51:54&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.415244</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
