<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46388 for Mail-Box: bug using access=&gt;&#39;w&#39;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46388 for Mail-Box: bug using access=&gt;&#39;w&#39;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Mail-Box/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Mail-Box/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Mail-Box/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Mail-Box/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Mail-Box">Mail-Box CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46388</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Mail-Box/Active/">Mail-Box</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
emike [...] bigfoot.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19874-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19875-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




badout<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/613101/311156/badout">
Mon Jun 01 13:28:45 2009 (2.6k) by emike [...] bigfoot.com
</a>
</font></li>
</ul>


dbx2mbox.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/610402/309614/dbx2mbox.pl">
Tue May 26 19:45:48 2009 (925b) by emike [...] bigfoot.com
</a>
</font></li>
</ul>


test.dbx<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/610402/309613/test.dbx">
Tue May 26 19:45:48 2009 (136.1k) by emike [...] bigfoot.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;26&nbsp;19:45:48&nbsp;2009</span>
    <span class="description">emike [...] bigfoot.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> bug using access=&gt;&#39;w&#39;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 May 2009 16:45:16 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-Box [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike Ekberg &lt;emike1955 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/610402/309613/test.dbx">Download test.dbx</a><br />
<span class="downloadcontenttype">application/octet-stream 136.1k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#! /usr/bin/perl 

#dbx2mbox.pl &lt;dbxfile&gt; &lt;mboxfile&gt;
# convert &lt;dbxfile&gt; to &lt;mboxfile&gt;

$| = 1;

use strict;
use warnings;
use diagnostics;

use Mail::Transport::Dbx;
use Mail::Box::Mbox;
use Mail::Box::Dbx;

chomp &#40;my $dbxfile = shift&#41;;
chomp &#40;my $mboxfile = shift&#41;;

system &#40;&#34;/bin/rm -f $mboxfile&#34;&#41;;

-e $dbxfile || die &#34;cannot find dbxfile $dbxfile&#34;;

print &#34;opening existing dbxfile $dbxfile\n&#34;;
my $from = Mail::Box::Dbx-&gt;new&#40;folder =&gt; $dbxfile&#41;
    or die &#34;cannot read dbxfile $dbxfile using Mail::Box:Dbx-&gt;new:$!&#34;;
print &#34;dbxfile $dbxfile is open\n&#34;;

print &#34;creating mboxfile $mboxfile\n&#34;;
my $to   = Mail::Box::Mbox-&gt;new&#40;folder =&gt; $mboxfile,
    access =&gt; &#39;rw&#39;, create =&gt; 1&#41; or die &#34;cannot create new mbox file using Mail::Box::Mbox-&gt;new: $!&#34;;
print &#34;mboxfile $mboxfile is created\n&#34;;

print &#34;copying dbxfile&#40;$dbxfile&#41; -&gt; mboxfile&#40;$mboxfile&#41;\n&#34;;
$from-&gt;copyTo&#40;$to&#41; || die &#34;from-&gt;copyTo&#40;$mboxfile&#41; failed:$!&#34;;

exit;
</div></div>
</div>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi:

I am reporting a likely bug in Mail:Box::MBox.The following example code 
from Mail::Box::Dbx fails in the following way::

Code:
#! /usr/bin/perl

#dbx2mbox.pl &lt;dbxfile&gt; &lt;mboxfile&gt;
# convert &lt;dbxfile&gt; to &lt;mboxfile&gt;

$| = 1;

use strict;
use warnings;
use diagnostics;

use Mail::Transport::Dbx;
use Mail::Box::Mbox;
use Mail::Box::Dbx;

chomp &#40;my $dbxfile = shift&#41;;
chomp &#40;my $mboxfile = shift&#41;;

system &#40;&#34;/bin/rm -f $mboxfile&#34;&#41;;

-e $dbxfile || die &#34;cannot find dbxfile $dbxfile&#34;;

print &#34;opening existing dbxfile $dbxfile\n&#34;;
my $from = Mail::Box::Dbx-&gt;new&#40;folder =&gt; $dbxfile&#41;
    or die &#34;cannot read dbxfile $dbxfile using Mail::Box:Dbx-&gt;new:$!&#34;;
print &#34;dbxfile $dbxfile is open\n&#34;;

print &#34;creating mboxfile $mboxfile\n&#34;;
my $to   = Mail::Box::Mbox-&gt;new&#40;folder =&gt; $mboxfile,
    access =&gt; &#39;w&#39;, create =&gt; 1&#41; or die &#34;cannot create new mbox file 
using Mail::Box::Mbox-&gt;new: $!&#34;;
print &#34;mboxfile $mboxfile is created\n&#34;;

print &#34;copying dbxfile&#40;$dbxfile&#41; -&gt; mboxfile&#40;$mboxfile&#41;\n&#34;;
$from-&gt;copyTo&#40;$to&#41; || die &#34;from-&gt;copyTo&#40;$mboxfile&#41; failed:$!&#34;;

exit;

Run as:

# do simple dbx test using dbxtest.pl or dbx2mbox.pl
mkdir -p dbxTest
/bin/rm -f dbxExamples/test.mbox
dbx2mbox.pl dbxExamples/test.dbx dbxTest/test.mbox
opening existing dbxfile dbxExamples/test.dbx
dbxfile dbxExamples/test.dbx is open
creating mboxfile dbxTest/test.mbox
mboxfile dbxTest/test.mbox is created
copying dbxfile&#40;dbxExamples/test.dbx&#41; -&gt; mboxfile&#40;dbxTest/test.mbox&#41;
Filehandle GEN4 opened only for output at
        /usr/lib/perl5/5.10/i686-cygwin/IO/Handle.pm line 421 &#40;#1&#41;
    &#40;W io&#41; You tried to read from a filehandle opened only for writing, If
    you intended it to be a read/write filehandle, you needed to open it
    with &#34;+&lt;&#34; or &#34;+&gt;&#34; or &#34;+&gt;&gt;&#34; instead of with &#34;&lt;&#34; or nothing.  If you
    intended only to read from the file, use &#34;&lt;&#34;.  See perlfunc/open.
    Another possibility is that you attempted to open filedescriptor 0
    &#40;also known as STDIN&#41; for output &#40;maybe you closed STDIN earlier?&#41;.
   

The above passes if I make this change:

Was:

my $to   = Mail::Box::Mbox-&gt;new&#40;folder =&gt; $mboxfile,
    access =&gt; &#39;w&#39;, create =&gt; 1&#41; or die &#34;cannot create new mbox file 
using Mail::Box::Mbox-&gt;new: $!&#34;;

New:
my $to   = Mail::Box::Mbox-&gt;new&#40;folder =&gt; $mboxfile,
    access =&gt; &#39;rw&#39;, create =&gt; 1&#41; or die &#34;cannot create new mbox file 
using Mail::Box::Mbox-&gt;new: $!&#34;;

It is certainly possible this a problem w/ the example code that I 
pulled from Mail::Box::Dbx....

I&#39;m using the following versions:
Mail-Box-2.089-P2kMI9
Mail-Transport-Dbx-0.07-Sg64D2

This is all run on a fairly recent version of cygwin, perl 5/5.10.

Best Regards,

Mike Ekberg
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;31&nbsp;18:40:02&nbsp;2009</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46388] bug using access=&gt;&#39;w&#39;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Jun 2009 00:39:43 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;emike [...] bigfoot.com via RT&#34; &lt;bug-Mail-Box [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* emike@bigfoot.com via RT &#40;bug-Mail-Box@rt.cpan.org&#41; [090526 23:45]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue May 26 19:45:48 2009: Request 46388 was acted upon.
&gt; Transaction: Ticket created by emike@bigfoot.com
&gt;        Queue: Mail-Box
&gt;      Subject: bug using access=&gt;&#39;w&#39;
&gt;   Requestors: emike@bigfoot.com
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46388">http://rt.cpan.org/Ticket/Display.html?id=46388</a></span> &gt;
</div>
I cannot reproduce this error under Linux.  We may get a better
idea what is happening if you can produce a trace.  Add lines:

   use Carp;
   confess;

to IO::Handle::getline, and hope to see from where in MailBox it is
being called...
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;31&nbsp;18:40:03&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;01&nbsp;13:28:45&nbsp;2009</span>
    <span class="description">emike [...] bigfoot.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> emike [...] bigfoot.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46388] bug using access=&gt;&#39;w&#39;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 01 Jun 2009 10:28:35 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-Box [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike Ekberg &lt;emike1955 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi:

Hope you can read the attached file.

I added &#39;confess;&#39; to the function getline in Handle.pm, ran &#39;make 
install&#39;, and then ran the test case w/ the &#39;w&#39; option.
&#40;the Handle.pm already includes &#39;use Carp;&#39;&#41;

Mike Ekberg


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46388">http://rt.cpan.org/Ticket/Display.html?id=46388</a></span> &gt;
&gt;
&gt; * emike@bigfoot.com via RT &#40;bug-Mail-Box@rt.cpan.org&#41; [090526 23:45]:
&gt;   
<div class="message-stanza open">&gt;&gt; Tue May 26 19:45:48 2009: Request 46388 was acted upon.
&gt;&gt; Transaction: Ticket created by emike@bigfoot.com
&gt;&gt;        Queue: Mail-Box
&gt;&gt;      Subject: bug using access=&gt;&#39;w&#39;
&gt;&gt;   Requestors: emike@bigfoot.com
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46388">http://rt.cpan.org/Ticket/Display.html?id=46388</a></span> &gt;
&gt;&gt;     
</div>&gt;
&gt; I cannot reproduce this error under Linux.  We may get a better
&gt; idea what is happening if you can produce a trace.  Add lines:
&gt;
&gt;    use Carp;
&gt;    confess;
&gt;
&gt; to IO::Handle::getline, and hope to see from where in MailBox it is
&gt; being called...
&gt;   
</div></div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">opening existing dbxfile dbxExamples/test.dbx
dbxfile dbxExamples/test.dbx is open
creating mboxfile dbxTest/test.mbox
mboxfile dbxTest/test.mbox is created
copying dbxfile&#40;dbxExamples/test.dbx&#41; -&gt; mboxfile&#40;dbxTest/test.mbox&#41;
	&#40;in cleanup&#41;  at /usr/lib/perl5/5.10/i686-cygwin/IO/Handle.pm line 419
	IO::Handle::getline&#40;&#39;IO::File=GLOB&#40;0x23063d8&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/Parser/Perl.pm line 279
	Mail::Box::Parser::Perl::openFile&#40;&#39;Mail::Box::Parser::Perl=HASH&#40;0x23061b0&#41;&#39;, &#39;HASH&#40;0x1d84500&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/Parser.pm line 47
	Mail::Box::Parser::start&#40;&#39;Mail::Box::Parser::Perl=HASH&#40;0x23061b0&#41;&#39;, &#39;file&#39;, undef&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/Parser.pm line 37
	Mail::Box::Parser::init&#40;&#39;Mail::Box::Parser::Perl=HASH&#40;0x23061b0&#41;&#39;, &#39;HASH&#40;0x23061e0&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/Parser/Perl.pm line 22
	Mail::Box::Parser::Perl::init&#40;&#39;Mail::Box::Parser::Perl=HASH&#40;0x23061b0&#41;&#39;, &#39;HASH&#40;0x23061e0&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Reporter.pm line 28
	Mail::Reporter::new&#40;&#39;Mail::Box::Parser::Perl&#39;, &#39;filename&#39;, &#39;dbxTest/test.mbox&#39;, &#39;mode&#39;, &#39;w&#39;, &#39;trusted&#39;, &#39;&#39;, &#39;fix_header_errors&#39;, undef, ...&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/Parser.pm line 19
	Mail::Box::Parser::new&#40;&#39;Mail::Box::Parser::Perl&#39;, &#39;filename&#39;, &#39;dbxTest/test.mbox&#39;, &#39;mode&#39;, &#39;w&#39;, &#39;trusted&#39;, &#39;&#39;, &#39;fix_header_errors&#39;, undef, ...&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/Parser.pm line 19
	Mail::Box::Parser::new&#40;&#39;Mail::Box::Parser&#39;, &#39;filename&#39;, &#39;dbxTest/test.mbox&#39;, &#39;mode&#39;, &#39;w&#39;, &#39;trusted&#39;, &#39;&#39;, &#39;fix_header_errors&#39;, undef, ...&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/File.pm line 229
	Mail::Box::File::parser&#40;&#39;Mail::Box::Mbox=HASH&#40;0x1aab4b8&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/File.pm line 414
	Mail::Box::File::_write_replace&#40;&#39;Mail::Box::Mbox=HASH&#40;0x1aab4b8&#41;&#39;, &#39;HASH&#40;0x21862c0&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/File.pm line 326
	Mail::Box::File::writeMessages&#40;&#39;Mail::Box::Mbox=HASH&#40;0x1aab4b8&#41;&#39;, &#39;HASH&#40;0x21862c0&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/Mbox.pm line 92
	Mail::Box::Mbox::writeMessages&#40;&#39;Mail::Box::Mbox=HASH&#40;0x1aab4b8&#41;&#39;, &#39;HASH&#40;0x21862c0&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box.pm line 715
	Mail::Box::write&#40;&#39;Mail::Box::Mbox=HASH&#40;0x1aab4b8&#41;&#39;, &#39;force&#39;, 0, &#39;save_deleted&#39;, 0&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box.pm line 343
	Mail::Box::close&#40;&#39;Mail::Box::Mbox=HASH&#40;0x1aab4b8&#41;&#39;&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box/File.pm line 162
	Mail::Box::File::close&#40;undef&#41; called at /usr/lib/perl5/site_perl/5.10/Mail/Box.pm line 840
	Mail::Box::DESTROY&#40;&#39;Mail::Box::Mbox=HASH&#40;0x1aab4b8&#41;&#39;&#41; called at ./tmptest.pl line 36
	eval {...} called at ./tmptest.pl line 36
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;06:04:33&nbsp;2009</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46388] bug using access=&gt;&#39;w&#39;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 2 Jun 2009 12:04:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;emike [...] bigfoot.com via RT&#34; &lt;bug-Mail-Box [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* emike@bigfoot.com via RT &#40;bug-Mail-Box@rt.cpan.org&#41; [090601 17:28]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Mail-Box
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46388">http://rt.cpan.org/Ticket/Display.html?id=46388</a></span> &gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I added &#39;confess;&#39; to the function getline in Handle.pm, ran &#39;make 
&gt; install&#39;, and then ran the test case w/ the &#39;w&#39; option.
&gt; &#40;the Handle.pm already includes &#39;use Carp;&#39;&#41;
</div>
Well... that confess triggered the wrong call to that method :&#40;

But, on the possitive side: I has retried to find the actual cause
of the problem from your first trace, and this time managed to
fix the cause.  Fixed in release 2.090, which will appear on CPAN
within the hour.
--
Thanks for the report.

               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;06:20:26&nbsp;2009</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">fixed in 2.090
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;02&nbsp;06:20:28&nbsp;2009</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;04&nbsp;16:36:21&nbsp;2009</span>
    <span class="description">emike [...] bigfoot.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> emike [...] bigfoot.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46388] bug using access=&gt;&#39;w&#39;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 04 Jun 2009 13:36:12 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Mail-Box [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike Ekberg &lt;emike1955 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Mark. This version &#40;2.090&#41; seems to fix the &#39;w&#39; problem.

However, I have two other things to report. The first is there are many 
failing test cases that you wished some help on.
I will send the output from the &#39;force install Mail::Box&#39; cpan command. 
I will send this to you in a separate email.
I am willing to do some work to help you fix some of these, many of 
which appear to be &#39;off-by-one&#39; fails, if you want it.

Reminder: My computer is a Sony Viao laptop running Vista w/ a fairly 
recent install of cygwin. I run this stuff from a bash cygwin window.

I noticed several tests reported &#39;couldn&#39;t do [X] because [X] not 
supported on Windows&#39; kind of results. I&#39;m not sure these are accurate 
in a Cygwin environment, as Cygwin for example has some emulation of 
Unix file access, for instance. But maybe this is not a high volume 
audience.

The second problem may not be yours, but I will send that in a separate 
message. It has to do w/ a DBX file I have called Offline.dbx. This is 
probably empty, so may be causing problems for this reason.BTW, this 
happened before the 2.090 fix, but I considered it relatively minor problem.

mike


Mark Overmeer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46388">http://rt.cpan.org/Ticket/Display.html?id=46388</a></span> &gt;
&gt;
&gt; * emike@bigfoot.com via RT &#40;bug-Mail-Box@rt.cpan.org&#41; [090601 17:28]:
&gt;   
<div class="message-stanza open">&gt;&gt;        Queue: Mail-Box
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46388">http://rt.cpan.org/Ticket/Display.html?id=46388</a></span> &gt;
&gt;&gt;     
</div>&gt;
&gt;   
<div class="message-stanza open">&gt;&gt; I added &#39;confess;&#39; to the function getline in Handle.pm, ran &#39;make 
&gt;&gt; install&#39;, and then ran the test case w/ the &#39;w&#39; option.
&gt;&gt; &#40;the Handle.pm already includes &#39;use Carp;&#39;&#41;
&gt;&gt;     
</div>&gt;
&gt; Well... that confess triggered the wrong call to that method :&#40;
&gt;
&gt; But, on the possitive side: I has retried to find the actual cause
&gt; of the problem from your first trace, and this time managed to
&gt; fix the cause.  Fixed in release 2.090, which will appear on CPAN
&gt; within the hour.
&gt; --
&gt; Thanks for the report.
&gt;
&gt;                MarkOv
&gt;
&gt; ------------------------------------------------------------------------
&gt;        Mark Overmeer MSc                                MARKOV Solutions
&gt;        Mark@Overmeer.net                          solutions@overmeer.net
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
&gt;
&gt;
&gt;
&gt;   
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;04&nbsp;16:36:23&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;06&nbsp;18:22:42&nbsp;2009</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">problems probably solved
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;06&nbsp;18:22:43&nbsp;2009</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
