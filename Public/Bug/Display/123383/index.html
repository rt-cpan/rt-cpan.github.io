<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #123383 for JsonSQL: Tests fail &#40;with recent JSON::Validator and/or JSON::Parse?&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #123383 for JsonSQL: Tests fail &#40;with recent JSON::Validator and/or JSON::Parse?&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/JsonSQL/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/JsonSQL/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/JsonSQL/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/JsonSQL/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/JsonSQL">JsonSQL CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">123383</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/JsonSQL/Active/">JsonSQL</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-268622-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.41    </td>
  </tr>
  <tr id="CF-268623-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;25&nbsp;19:05:16&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests fail &#40;with recent JSON::Validator and/or JSON::Parse?&#41;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">My smokers started to report the following failure:

...
PERL_DL_NONLAZY=1 &#34;/opt/perl-5.22.3D/bin/perl&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
Odd number of elements in anonymous hash at t/01_validator.t line 13 &#40;#1&#41;
    &#40;W misc&#41; You specified an odd number of elements to initialize a hash,
    which is odd, because hashes come in key/value pairs.
    
Uncaught exception from user code:
        Root schema cannot have a relative &#39;id&#39;. &#40;sqlSelectSchema&#41; at /home/cpansand/.cpan/build/2017102521/JSON-Validator-1.05-TgO7wT/blib/lib/JSON/Validator.pm line 275.
                JSON::Validator::_resolve&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;, HASH&#40;0x1364c80&#41;&#41; called at /home/cpansand/.cpan/build/2017102521/JSON-Validator-1.05-TgO7wT/blib/lib/JSON/Validator.pm line 77
                JSON::Validator::schema&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;, HASH&#40;0x1364c80&#41;&#41; called at /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-ft15Oj/blib/lib/JsonSQL/Validator.pm line 33
                JsonSQL::Validator::new&#40;&#34;JsonSQL::Validator&#34;, &#34;select&#34;, ARRAY&#40;0x1364ae8&#41;&#41; called at t/01_validator.t line 14
        JSON::Validator::_resolve&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;, HASH&#40;0x1364c80&#41;&#41; called at /home/cpansand/.cpan/build/2017102521/JSON-Validator-1.05-TgO7wT/blib/lib/JSON/Validator.pm line 77
        JSON::Validator::schema&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;, HASH&#40;0x1364c80&#41;&#41; called at /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-ft15Oj/blib/lib/JsonSQL/Validator.pm line 33
        JsonSQL::Validator::new&#40;&#34;JsonSQL::Validator&#34;, &#34;select&#34;, ARRAY&#40;0x1364ae8&#41;&#41; called at t/01_validator.t line 14
# Looks like your test exited with 255 before it could output anything.
t/01_validator.t ......... 
Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
Failed 19/19 subtests 
when is experimental at
        /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-ft15Oj/blib/lib/JsonSQL/Param/Join.pm line 42 &#40;#1&#41;
    &#40;S experimental::smartmatch&#41; when depends on smartmatch, which is
    experimental.  Additionally, it has several special cases that may
    not be immediately obvious, and their behavior may change or
    even be removed in any future release of perl.  See the explanation
    under &#34;Experimental Details on given and when&#34; in perlsyn.
    
when is experimental at
        /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-ft15Oj/blib/lib/JsonSQL/Param/Join.pm line 43 &#40;#1&#41;
... &#40;etc&#41; ...


This seems to happen either with recent JSON::Validator, or JSON::Parse. Statistical analysis &#40;negative theta means &#34;bad&#34;&#41;:

****************************************************************
&#40;5&#41;
****************************************************************
Regression &#39;mod:JSON::Parse&#39;
****************************************************************
Name                   Theta          StdErr     T-stat
[0=&#39;const&#39;]           1.0000          0.0000    52980322227660680.00
[1=&#39;eq_0.49&#39;]         0.0000          0.0000      11.48
[2=&#39;eq_0.55&#39;]        -1.0000          0.0000    -46962036321764584.00

R^2= 1.000, N= 75, K= 3
****************************************************************
&#40;6&#41;
****************************************************************
Regression &#39;mod:JSON::Validator&#39;
****************************************************************
Name                   Theta          StdErr     T-stat
[0=&#39;const&#39;]           1.0000          0.0000    27798263551773340.00
[1=&#39;eq_0.94&#39;]         0.0000          0.0000       3.42
[2=&#39;eq_0.98&#39;]         0.0000          0.0000       4.27
[3=&#39;eq_1.00&#39;]         0.0000          0.0000       5.97
[4=&#39;eq_1.01&#39;]         0.0000          0.0000       7.81
[5=&#39;eq_1.02&#39;]         0.0000          0.0000       5.26
[6=&#39;eq_1.05&#39;]        -1.0000          0.0000    -24640527043053552.00

R^2= 1.000, N= 75, K= 7
****************************************************************
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;26&nbsp;02:03:32&nbsp;2017</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-10-25 19:05:16, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My smokers started to report the following failure:
&gt; 
&gt; ...
&gt; PERL_DL_NONLAZY=1 &#34;/opt/perl-5.22.3D/bin/perl&#34; &#34;-
&gt; MExtUtils::Command::MM&#34; &#34;-MTest::Harness&#34; &#34;-e&#34; &#34;undef
&gt; *Test::Harness::Switches; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; t/*.t
&gt; Odd number of elements in anonymous hash at t/01_validator.t line 13
&gt; &#40;#1&#41;
&gt;     &#40;W misc&#41; You specified an odd number of elements to initialize a
&gt; hash,
&gt;     which is odd, because hashes come in key/value pairs.
&gt; 
&gt; Uncaught exception from user code:
&gt;         Root schema cannot have a relative &#39;id&#39;. &#40;sqlSelectSchema&#41; at
&gt; /home/cpansand/.cpan/build/2017102521/JSON-Validator-1.05-
&gt; TgO7wT/blib/lib/JSON/Validator.pm line 275.
&gt;                 JSON::Validator::_resolve&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;,
&gt; HASH&#40;0x1364c80&#41;&#41; called at /home/cpansand/.cpan/build/2017102521/JSON-
&gt; Validator-1.05-TgO7wT/blib/lib/JSON/Validator.pm line 77
&gt;                 JSON::Validator::schema&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;,
&gt; HASH&#40;0x1364c80&#41;&#41; called at
&gt; /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-
&gt; ft15Oj/blib/lib/JsonSQL/Validator.pm line 33
&gt;                 JsonSQL::Validator::new&#40;&#34;JsonSQL::Validator&#34;,
&gt; &#34;select&#34;, ARRAY&#40;0x1364ae8&#41;&#41; called at t/01_validator.t line 14
&gt;         JSON::Validator::_resolve&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;,
&gt; HASH&#40;0x1364c80&#41;&#41; called at /home/cpansand/.cpan/build/2017102521/JSON-
&gt; Validator-1.05-TgO7wT/blib/lib/JSON/Validator.pm line 77
&gt;         JSON::Validator::schema&#40;JSON::Validator=HASH&#40;0x2b04a40&#41;,
&gt; HASH&#40;0x1364c80&#41;&#41; called at
&gt; /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-
&gt; ft15Oj/blib/lib/JsonSQL/Validator.pm line 33
&gt;         JsonSQL::Validator::new&#40;&#34;JsonSQL::Validator&#34;, &#34;select&#34;,
&gt; ARRAY&#40;0x1364ae8&#41;&#41; called at t/01_validator.t line 14
&gt; # Looks like your test exited with 255 before it could output
&gt; anything.
&gt;  t/01_validator.t .........
&gt; Dubious, test returned 255 &#40;wstat 65280, 0xff00&#41;
&gt;  Failed 19/19 subtests
&gt; when is experimental at
&gt;         /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-
&gt; ft15Oj/blib/lib/JsonSQL/Param/Join.pm line 42 &#40;#1&#41;
&gt;     &#40;S experimental::smartmatch&#41; when depends on smartmatch, which is
&gt;     experimental.  Additionally, it has several special cases that may
&gt;     not be immediately obvious, and their behavior may change or
&gt;     even be removed in any future release of perl.  See the
&gt; explanation
&gt;     under &#34;Experimental Details on given and when&#34; in perlsyn.
&gt; 
&gt; when is experimental at
&gt;         /home/cpansand/.cpan/build/2017102521/JsonSQL-0.41-
&gt; ft15Oj/blib/lib/JsonSQL/Param/Join.pm line 43 &#40;#1&#41;
&gt; ... &#40;etc&#41; ...
&gt; 
&gt; 
&gt; This seems to happen either with recent JSON::Validator, or
&gt; JSON::Parse. Statistical analysis &#40;negative theta means &#34;bad&#34;&#41;:
&gt; 
&gt; ****************************************************************
&gt; &#40;5&#41;
&gt; ****************************************************************
&gt; Regression &#39;mod:JSON::Parse&#39;
&gt; ****************************************************************
&gt; Name                   Theta          StdErr     T-stat
&gt; [0=&#39;const&#39;]           1.0000          0.0000    52980322227660680.00
&gt; [1=&#39;eq_0.49&#39;]         0.0000          0.0000      11.48
&gt; [2=&#39;eq_0.55&#39;]        -1.0000          0.0000    -46962036321764584.00
&gt; 
&gt; R^2= 1.000, N= 75, K= 3
&gt; ****************************************************************
&gt; &#40;6&#41;
&gt; ****************************************************************
&gt; Regression &#39;mod:JSON::Validator&#39;
&gt; ****************************************************************
&gt; Name                   Theta          StdErr     T-stat
&gt; [0=&#39;const&#39;]           1.0000          0.0000    27798263551773340.00
&gt; [1=&#39;eq_0.94&#39;]         0.0000          0.0000       3.42
&gt; [2=&#39;eq_0.98&#39;]         0.0000          0.0000       4.27
&gt; [3=&#39;eq_1.00&#39;]         0.0000          0.0000       5.97
&gt; [4=&#39;eq_1.01&#39;]         0.0000          0.0000       7.81
&gt; [5=&#39;eq_1.02&#39;]         0.0000          0.0000       5.26
&gt; [6=&#39;eq_1.05&#39;]        -1.0000          0.0000    -24640527043053552.00
&gt; 
&gt; R^2= 1.000, N= 75, K= 7
&gt; ****************************************************************
</div>
It&#39;s probably JSON::Validator 1.05. Updated statistical analysis &#40;in this one JSON::Parse looks unlikely&#41;:

****************************************************************
Regression &#39;mod:JSON::Validator&#39;
****************************************************************
Name                   Theta          StdErr     T-stat
[0=&#39;const&#39;]           1.0000          0.0000    23064565316953780.00
[1=&#39;eq_0.94&#39;]         0.0000          0.0000       5.26
[2=&#39;eq_0.98&#39;]         0.0000          0.0000       6.07
[3=&#39;eq_1.00&#39;]         0.0000          0.0000       7.43
[4=&#39;eq_1.01&#39;]         0.0000          0.0000       9.72
[5=&#39;eq_1.02&#39;]         0.0000          0.0000       4.44
[6=&#39;eq_1.05&#39;]        -1.0000          0.0000    -21054971171911460.00

R^2= 1.000, N= 80, K= 7
****************************************************************
...
****************************************************************
Regression &#39;mod:JSON::Parse&#39;
****************************************************************
Name                   Theta          StdErr     T-stat
[0=&#39;const&#39;]           1.0000          0.1120       8.93
[1=&#39;eq_0.49&#39;]        -0.0462          0.1146      -0.40
[2=&#39;eq_0.52&#39;]        -1.0000          0.1372      -7.29
[3=&#39;eq_0.55&#39;]        -1.0000          0.1372      -7.29

R^2= 0.765, N= 80, K= 4
****************************************************************
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
