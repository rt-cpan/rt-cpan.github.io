<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17847 for Net-Lite-FTP: Net::Lite FTP hangs when trying to retrieve a file which isn&#39;t there</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17847 for Net-Lite-FTP: Net::Lite FTP hangs when trying to retrieve a file which isn&#39;t there</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-Lite-FTP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-Lite-FTP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-Lite-FTP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-Lite-FTP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Lite-FTP">Net-Lite-FTP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17847</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1 hour (60 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-Lite-FTP/Active/">Net-Lite-FTP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
maria [...] iano.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-22840-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.33    </td>
  </tr>
  <tr id="CF-22841-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.41    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;24&nbsp;11:16:17&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net::Lite FTP hangs when trying to retrieve a file which isn&#39;t there</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you very much for this module! 

There is a bug I am finding when using Net-Lite-FTP-0.33 on Fedora Core
2 2.6.10-1.771_FC2 and perl, v5.8.3 built for i386-linux-thread-multi.

I have created a patch to fix the bug and also to provide more
information in the return values of the get and put subs.

I want to use Net::Lite::FTP in an automated script for transfering
files to and from a remote server. When I call the &#39;get&#39; function for a
file that does not exist on the server, instead of returning an error
message the script just hangs indefinitely. This is even though the FTPS
server does send back a response saying the file can&#39;t be retrieved.
This is an issue because sometimes an error &#40;at the FTPS server end&#41; can
occur between reading a directory and attempting to retrieve the file.
For example, sometimes the file is no longer there when the retrieve
command is sent. In those cases, I need to get an error message and for
my script to complete, rather than to just hang. I think the problem
occurs at line 321 which is part of getslurp and the return value of
&#39;$self-&gt;command&#40;&#34;RETR $remote&#34;&#41;;&#39;is not checked. 

Here is a script that encounters the error:
#!/usr/bin/perl -w
use strict;
use Net::Lite::FTP;
$&#34;=&#34;\n&#34;;
my $tlsftp=Net::Lite::FTP-&gt;new&#40;&#41;;
print &#34;Created Net::Lite:FTP object\n&#34; if $tlsftp;
my $open = $tlsftp-&gt;open&#40;&#34;172.21.0.21&#34;,&#34;21&#34;&#41;;
print &#34;Result returned from open call is $open\n&#34;;
my $login = $tlsftp-&gt;login&#40;&#34;maria&#34;,&#34;changed&#34;&#41;;
print &#34;Result returned from login call is $login\n&#34;;
my $cwd=$tlsftp-&gt;cwd&#40;&#39;outgoing&#39;&#41;;
print &#34;Result returned from cwd call is $cwd\n&#34;;
my $files=$tlsftp-&gt;list;
print &#34;Here is the directory listing:\n@$files\n&#34;;
my $result = $tlsftp-&gt;get&#40;&#39;filenotthere&#39;&#41;;
print &#34;Result returned from result call is $result\n&#34;;
my $quit = $tlsftp-&gt;quit&#40;&#41;;
print &#34;Result returned from quit call is $quit\n&#34;;

and here is what I see when I run it:
Created Net::Lite:FTP object
OPEN.Received: 220 FTP service. Unauthorized access prohibited.
Activities will be monitored.
SRV Response: 220 FTP service. Unauthorized access prohibited.
Activities will be monitored.
RECV: 220 FTP service. Unauthorized access prohibited. Activities will
be monitored.
OPEN..Received: 220 FTP service. Unauthorized access prohibited.
Activities will be monitored.
Received: 234 Proceed with negotiation.
Sending: PBSZ 0
SRV Response: 200 PBSZ set to 0.
RECV: 200 PBSZ set to 0.
Sending: PROT P
SRV Response: 200 PROT now Private.
RECV: 200 PROT now Private.
Result returned from open call is 1
Sending: USER maria
SRV Response: 331 Please specify the password.
RECV: 331 Please specify the password.
Sending: PASS changed
SRV Response: 230 Login successful.
RECV: 230 Login successful.
Result returned from login call is 230 Login successful.

Sending: CWD outgoing
SRV Response: 250 Directory successfully changed.
RECV: 250 Directory successfully changed.
Result returned from cwd call is 250 Directory successfully changed.

Sending: PASV
SRV Response: 227 Entering Passive Mode &#40;172,21,0,21,226,69&#41;
RECV: 227 Entering Passive Mode &#40;172,21,0,21,226,69&#41;
Data link connected.. to 172.21.0.21 at 57925
Sending: NLST
SRV Response: 150 Here comes the directory listing.
RECV: 150 Here comes the directory listing.
SSL for data connection enabled...
SRV Response: 226 Directory send OK.
RECV: 226 Directory send OK.
resp&#40;end LIST&#41; 226 Directory send OK.
Here is the directory listing:
bigfile.txt
percentage.rrd
testfile
Sending: TYPE I
SRV Response: 200 Switching to Binary mode.
RECV: 200 Switching to Binary mode.
Sending: PASV
SRV Response: 227 Entering Passive Mode &#40;172,21,0,21,220,236&#41;
RECV: 227 Entering Passive Mode &#40;172,21,0,21,220,236&#41;
Data link connected.. to 172.21.0.21 at 56556
Sending: PROT P
SRV Response: 550 Permission denied.
Sending: RETR filenotthere
SRV Response: 550 Failed to open file.

and at this point it just hangs indefinitely...

I also find it very useful to get a return value from get or put which
tells me whether or not it was successful. The patch I have submitted
fixes the issue where the client used to hang indefinitely on a get
error, and also provides a return value which is true for success and
undef on fail.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net_Lite_FTP_get_put_fix.diff</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- FTP.orig.pm	2006-02-23 14:06:34.327586112 -0500
+++ FTP.new.pm	2006-02-24 10:56:45.389171432 -0500
@@ -260,41 +260,49 @@
 
 sub putblat {
 	my &#40;$putorblat,$self,$remote,$local&#41;=@_;
+	$local=$remote unless defined&#40;$local&#41;;
+	unless &#40;CORE::open&#40;L,&#34;$local&#34;&#41;&#41; {
+	    print STDERR &#34;couldn&#39;t open local file $local: $!\n&#34;;
+	    return undef;
+	}
+	binmode L;
+        my $outcome;
 	my $socket;
 	my $sock=$self-&gt;{&#39;Sock&#39;};
-	$local=$remote unless defined&#40;$local&#41;;
 	$self-&gt;command&#40;&#34;TYPE I&#34;&#41;;
 	$socket=$self-&gt;datasocket&#40;&#41;;
 	die &#34;SOCKET NOT CONNECTED! $!\n&#34; unless defined&#40;$socket&#41;;
 	if &#40;$self-&gt;{&#34;EncryptData&#34;}!=0&#41; {$self-&gt;command&#40;&#34;PROT P&#34;&#41;; };
-	$self-&gt;command&#40;&#34;STOR $remote&#34;&#41;;
-
-	if &#40;$self-&gt;{&#34;EncryptData&#34;}==1&#41; {
-		{my $io=new IO::Handle;	tie&#40;*$io, &#34;Net::SSLeay::Handle&#34;, $socket&#41;;$socket = \*$io;};
-		print STDERR &#34;SSL for data connection enabled...\n&#34; if $self-&gt;{Debug};
-	};
-
-	print STDERR &#34;STORE connection opened.\n&#34; if $self-&gt;{Debug};
-	select&#40;$socket&#41;;
-#print &#34;selected.\n&#34;;
-	if &#40;$putorblat=~/put/&#41; {
-		CORE::open&#40;L,&#34;$local&#34;&#41;;binmode L;
-		my $tmp;
-		while &#40;$tmp=&lt;L&gt;&#41; {
-			print $tmp;
-			if &#40;defined &#40;$self-&gt;{&#39;PutUpdateCallback&#39;}&#41;&#41; {$self-&gt;{&#39;PutUpdateCallback&#39;}-&gt;&#40;&#41;; };#TODO send sth..
-		};#Probably syswrite/sysread would be smarter..
-		close L;
-	} else {
-		print $local;
+	if &#40;$self-&gt;command&#40;&#34;STOR $remote&#34;&#41;&#41; {
 
+	    if &#40;$self-&gt;{&#34;EncryptData&#34;}==1&#41; {
+		    {my $io=new IO::Handle;	tie&#40;*$io, &#34;Net::SSLeay::Handle&#34;, $socket&#41;;$socket = \*$io;};
+		    print STDERR &#34;SSL for data connection enabled...\n&#34; if $self-&gt;{Debug};
+	    };
+    
+	    print STDERR &#34;STORE connection opened.\n&#34; if $self-&gt;{Debug};
+	    select&#40;$socket&#41;;
+    #print &#34;selected.\n&#34;;
+	    if &#40;$putorblat=~/put/&#41; {
+		    my $tmp;
+		    while &#40;$tmp=&lt;L&gt;&#41; {
+			    print $tmp;
+			    if &#40;defined &#40;$self-&gt;{&#39;PutUpdateCallback&#39;}&#41;&#41; {$self-&gt;{&#39;PutUpdateCallback&#39;}-&gt;&#40;&#41;; };#TODO send sth..
+		    };#Probably syswrite/sysread would be smarter..
+		    close L;
+	    } else {
+		    print $local;
+    
+	    }
+    #print &#34;after write...\n&#34;;
+	    select&#40;STDOUT&#41;;
+	    close $socket;
+	    my $response=$self-&gt;response&#40;&#41;;
+	    $outcome = $response;
+	    print  STDERR &#34;resp&#40;afterSTOR&#41; &#34;,$response if $self-&gt;{Debug};
+	    if &#40;defined $self-&gt;{&#39;PutDoneCallBack&#39;}&#41; {$self-&gt;{&#39;PutDoneCallBack&#39;}-&gt;&#40;$response&#41;;};
 	}
-#print &#34;after write...\n&#34;;
-	select&#40;STDOUT&#41;;
-	close $socket;
-	my $response=$self-&gt;response&#40;&#41;;
-	print  STDERR &#34;resp&#40;afterSTOR&#41; &#34;,$response if $self-&gt;{Debug};
-	if &#40;defined $self-&gt;{&#39;PutDoneCallBack&#39;}&#41; {$self-&gt;{&#39;PutDoneCallBack&#39;}-&gt;&#40;$response&#41;;};
+	return $outcome;
 };
 sub put {
 	putblat&#40;&#39;put&#39;,@_&#41;;
@@ -311,42 +319,45 @@
 
 sub getslurp {
 	my &#40;$getorslurp,$self,$remote,$local&#41;=@_;
+	my $outcome;
 	my $socket;
 	my $sock=$self-&gt;{&#39;Sock&#39;};
 	$local=$remote unless defined&#40;$local&#41;;
 	$self-&gt;command&#40;&#34;TYPE I&#34;&#41;;
 	$socket=$self-&gt;datasocket&#40;&#41;;
 	if &#40;$self-&gt;{&#34;EncryptData&#34;}!=0&#41; {$self-&gt;command&#40;&#34;PROT P&#34;&#41;; };
-	$self-&gt;command&#40;&#34;RETR $remote&#34;&#41;;
-	if &#40;$self-&gt;{&#34;EncryptData&#34;}==1&#41; {
-		{my $io=new IO::Handle;	tie&#40;*$io, &#34;Net::SSLeay::Handle&#34;, $socket&#41;;$socket = \*$io;};
-		print  STDERR &#34;SSL for data connection&#40;RETR&#41; enabled...\n&#34; if $self-&gt;{Debug};
-	};
-	my $slurped=&#34;&#34;;
-	if &#40;$getorslurp=~/get/&#41; {
-		print STDERR &#34;getorslurp: get\n&#34; if $self-&gt;{Debug};
-		CORE::open&#40;L,&#34;&gt;$local&#34;&#41;;binmode L;
-		# TODO replace while &lt;$socket&gt; with
-		# TODO while sysread&#40;$sock,$tmp,BUFSIZE&#41;;
-		my $tmp;
-		while &#40;$tmp=&lt;$socket&gt;&#41; {
-            print L $tmp; print STDERR &#34;:;&#34; if $self-&gt;{Debug};
-            if &#40;defined &#40;$self-&gt;{&#39;GetUpdateCallback&#39;}&#41;&#41; {$self-&gt;{&#39;GetUpdateCallback&#39;}-&gt;&#40;&#41;; };#TODO send sth..
-        };
-		close L;
-	} else {
-		print STDERR &#34;getorslurp: slurp&#40;$getorslurp&#41;\n&#34; if $self-&gt;{Debug};
-		my $tmp;
-		while &#40;$tmp=&lt;$socket&gt;&#41; {
-            $slurped.=$tmp;print STDERR &#34;:.&#34; if $self-&gt;{Debug}; 
-            if &#40;defined &#40;$self-&gt;{&#39;GetUpdateCallback&#39;}&#41;&#41; {$self-&gt;{&#39;GetUpdateCallback&#39;}-&gt;&#40;&#41;; };#TODO send sth..
-        };
-	};
-	close $socket;
-	my $response=$self-&gt;response&#40;&#41;;
-	print STDERR &#34;resp&#40;afterRETR&#41; &#34;,$response if $self-&gt;{Debug};
-	if &#40;defined $self-&gt;{&#39;GetDoneCallBack&#39;}&#41; {$self-&gt;{&#39;GetDoneCallBack&#39;}-&gt;&#40;$response&#41;;};
-	return $slurped;
+	if &#40;$self-&gt;command&#40;&#34;RETR $remote&#34;&#41;&#41; {
+	    if &#40;$self-&gt;{&#34;EncryptData&#34;}==1&#41; {
+		    {my $io=new IO::Handle;	tie&#40;*$io, &#34;Net::SSLeay::Handle&#34;, $socket&#41;;$socket = \*$io;};
+		    print  STDERR &#34;SSL for data connection&#40;RETR&#41; enabled...\n&#34; if $self-&gt;{Debug};
+	    };
+	    my $slurped=&#34;&#34;;
+	    if &#40;$getorslurp=~/get/&#41; {
+		    print STDERR &#34;getorslurp: get\n&#34; if $self-&gt;{Debug};
+		    CORE::open&#40;L,&#34;&gt;$local&#34;&#41;;binmode L;
+		    # TODO replace while &lt;$socket&gt; with
+		    # TODO while sysread&#40;$sock,$tmp,BUFSIZE&#41;;
+		    my $tmp;
+		    while &#40;$tmp=&lt;$socket&gt;&#41; {
+                print L $tmp; print STDERR &#34;:;&#34; if $self-&gt;{Debug};
+                if &#40;defined &#40;$self-&gt;{&#39;GetUpdateCallback&#39;}&#41;&#41; {$self-&gt;{&#39;GetUpdateCallback&#39;}-&gt;&#40;&#41;; };#TODO send sth..
+            };
+		    close L;
+	    } else {
+		    print STDERR &#34;getorslurp: slurp&#40;$getorslurp&#41;\n&#34; if $self-&gt;{Debug};
+		    my $tmp;
+		    while &#40;$tmp=&lt;$socket&gt;&#41; {
+                $slurped.=$tmp;print STDERR &#34;:.&#34; if $self-&gt;{Debug}; 
+                if &#40;defined &#40;$self-&gt;{&#39;GetUpdateCallback&#39;}&#41;&#41; {$self-&gt;{&#39;GetUpdateCallback&#39;}-&gt;&#40;&#41;; };#TODO send sth..
+            };
+	    };
+	    close $socket;
+	    my $response=$self-&gt;response&#40;&#41;;
+	    print STDERR &#34;resp&#40;afterRETR&#41; &#34;,$response if $self-&gt;{Debug};
+	    $outcome = $response;
+	    if &#40;defined $self-&gt;{&#39;GetDoneCallBack&#39;}&#41; {$self-&gt;{&#39;GetDoneCallBack&#39;}-&gt;&#40;$response&#41;;};
+	}
+	return $outcome;
 };
 
 sub datasocket {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;26&nbsp;16:59:30&nbsp;2006</span>
    <span class="description">cpan [...] kuszelas.com -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;28&nbsp;01:45:31&nbsp;2006</span>
    <span class="description">cpan [...] kuszelas.com -  Fixed in 0.41 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
