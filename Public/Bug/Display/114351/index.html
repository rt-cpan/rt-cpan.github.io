<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #114351 for Net-DNS: Case sensitive compression breaks resolver-&gt;nameservers&#40;&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #114351 for Net-DNS: Case sensitive compression breaks resolver-&gt;nameservers&#40;&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-DNS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-DNS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-DNS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-DNS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-DNS">Net-DNS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">114351</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-DNS">Net-DNS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
bjornr [...] isnic.is

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22454-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22455-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=114351">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1625905" href="/Public/Bug/Display.html?id=114351#txn-1625905">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;12&nbsp;11:43:38&nbsp;2016</span>
    <span class="description">bjornr [...] isnic.is -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 12 May 2016 15:43:20 +0000 &#40;GMT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> mat [...] FreeBSD.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Björn Róbertsson &lt;bjornr [...] isnic.is&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1625905/870916/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/870916">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 352b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

after upgrading p5-Net-DNS the resolver-&gt;nameservers breaks on a lot of nameservers

i.e.

unresolvable name: ns02.CENTRALNETPOINT.COM

My code piece has :                        $domain_checks::resolver-&gt;nameservers&#40;$_ns&#41;;

I have downgraded p5-Net-DNS downgraded: 1.05_1,1 -&gt; 1.02,1 - in order to bypass this.

Regards,
Björn Róbertsson
ISNIC
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1626157" href="/Public/Bug/Display.html?id=114351#txn-1626157">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;13&nbsp;15:21:55&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1626157/871070/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/871070">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu May 12 11:43:38 2016, bjornr@isnic.is wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; after upgrading p5-Net-DNS the resolver-&gt;nameservers breaks on a lot
&gt; of nameservers
&gt; 
&gt; i.e.
&gt; 
&gt; unresolvable name: ns02.CENTRALNETPOINT.COM
&gt; 
&gt; My code piece has :                        $domain_checks::resolver-
<div class="message-stanza open">&gt; &gt;nameservers&#40;$_ns&#41;;
</div>&gt; 
&gt; I have downgraded p5-Net-DNS downgraded: 1.05_1,1 -&gt; 1.02,1 - in order
&gt; to bypass this.
&gt; 
&gt; Regards,
&gt; Björn Róbertsson
&gt; ISNIC
</div>
What exactly are you claiming here?

Running this code:

        use Net::DNS;
        print &#39;Net::DNS &#39;, Net::DNS-&gt;version, &#34;\n&#34;;

        my $resolver = Net::DNS::Resolver-&gt;new&#40;&#41;;

        my $name = &#39;ns02.CENTRALNETPOINT.COM&#39;;

        $resolver-&gt;nameservers&#40;$name&#41;;

        my @ip = $resolver-&gt;nameservers&#40;&#41;;

        print &#34;$name\t@ip\n&#34;;

produces:

Net::DNS 1.01
ns02.CENTRALNETPOINT.COM        217.160.113.155 83.169.55.96

Net::DNS 1.02
ns02.CENTRALNETPOINT.COM        83.169.55.96 217.160.113.155
 
Net::DNS 1.03
ns02.CENTRALNETPOINT.COM        217.160.113.155 83.169.55.96
 
Net::DNS 1.04
ns02.CENTRALNETPOINT.COM        217.160.113.155 83.169.55.96
 
Net::DNS 1.05
ns02.CENTRALNETPOINT.COM        83.169.55.96 217.160.113.155
 
Net::DNS 1.0506
ns02.CENTRALNETPOINT.COM        217.160.113.155 83.169.55.96
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1626158" href="/Public/Bug/Display.html?id=114351#txn-1626158">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;13&nbsp;15:21:56&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1627993" href="/Public/Bug/Display.html?id=114351#txn-1627993">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;11:28:50&nbsp;2016</span>
    <span class="description">bjornr [...] isnic.is -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 May 2016 15:28:25 +0000 &#40;GMT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Björn Róbertsson &lt;bjornr [...] isnic.is&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1627993/872145/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872145">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I am sorry I will try to clarify. We&#39;re running FreeBSD 10.[123] with two local resolvers. We&#39;re running a perl application which fails after upgrading p5-Net-DNS from 1.02 to 1.05

I looked in the code and the error message is only returned from this particular portion &#40;-&gt;nameservers&#41;.

Consecutive runs of the code your provided with p5-Net-DNS 1.05:

Net::DNS 1.05
unresolvable name: ns02.CENTRALNETPOINT.COM at resolve.pl line 8.
ns02.CENTRALNETPOINT.COM

Net::DNS 1.05
ns02.CENTRALNETPOINT.COM        217.160.113.155 83.169.55.96

Net::DNS 1.05
unresolvable name: ns02.CENTRALNETPOINT.COM at resolve.pl line 8.
ns02.CENTRALNETPOINT.COM

Net::DNS 1.05
unresolvable name: ns02.CENTRALNETPOINT.COM at resolve.pl line 8.
ns02.CENTRALNETPOINT.COM

Net::DNS 1.05
unresolvable name: ns02.CENTRALNETPOINT.COM at resolve.pl line 8.
ns02.CENTRALNETPOINT.COM

Net::DNS 1.05
unresolvable name: ns02.CENTRALNETPOINT.COM at resolve.pl line 8.
ns02.CENTRALNETPOINT.COM


Net::DNS 1.02
ns02.CENTRALNETPOINT.COM        83.169.55.96 217.160.113.155
Net::DNS 1.02
ns02.CENTRALNETPOINT.COM        83.169.55.96 217.160.113.155
Net::DNS 1.02
&#40;and multiple repeated successful runs... never a failure&#41;

Our local resolvers run bind910-9.10.3P4, looking at the query-log we see:

p5-Net-DNS 1.05 log lines from our local resolver:
19-May-2016 15:16:41.589 client IP#34390 &#40;ns02.CENTRALNETPOINT.COM.isnic.is&#41;: query: ns02.CENTRALNETPOINT.COM.isnic.is IN AAAA + &#40;193.4.58.93&#41;
19-May-2016 15:16:41.842 client IP#45586 &#40;ns02.CENTRALNETPOINT.COM&#41;: query: ns02.CENTRALNETPOINT.COM IN A + &#40;193.4.58.93&#41;
19-May-2016 15:16:41.845 client IP#41490 &#40;ns02.CENTRALNETPOINT.COM&#41;: query: ns02.CENTRALNETPOINT.COM IN AAAA + &#40;193.4.58.93&#41;
19-May-2016 15:16:41.848 client IP#57647 &#40;ns02.CENTRALNETPOINT.COM.isnic.is&#41;: query: ns02.CENTRALNETPOINT.COM.isnic.is IN AAAA + &#40;193.4.58.93&#41;

---- and the downgrade on the client p5-Net-DNS with 1.02 ----

p5-Net-DNS 1.02 log lines from our local resolver:
19-May-2016 15:18:33.955 client IP#47520 &#40;ns02.CENTRALNETPOINT.COM&#41;: query: ns02.CENTRALNETPOINT.COM IN A + &#40;193.4.58.93&#41;
19-May-2016 15:18:33.958 client IP#40112 &#40;ns02.CENTRALNETPOINT.COM&#41;: query: ns02.CENTRALNETPOINT.COM IN AAAA + &#40;193.4.58.93&#41;
19-May-2016 15:18:34.802 client IP#42436 &#40;ns02.CENTRALNETPOINT.COM&#41;: query: ns02.CENTRALNETPOINT.COM IN A + &#40;193.4.58.93&#41;
19-May-2016 15:18:34.805 client IP#36431 &#40;ns02.CENTRALNETPOINT.COM&#41;: query: ns02.CENTRALNETPOINT.COM IN AAAA + &#40;193.4.58.93&#41;

The only change on the client machine is the 1.05 -&gt; 1.02

It appears like the search path is appended to some queries, and then cached, if you use 1.05.

Kind regards,
Björn

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
<div class="message-stanza open">&gt; From: &#34;Dick Franks via RT&#34; &lt;bug-Net-DNS@rt.cpan.org&gt;
&gt; To: bjornr@isnic.is
&gt; Sent: Friday, 13 May, 2016 7:22:03 PM
&gt; Subject: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114351">https://rt.cpan.org/Ticket/Display.html?id=114351</a></span> &gt;
&gt; 
&gt; On Thu May 12 11:43:38 2016, bjornr@isnic.is wrote:
<div class="message-stanza open">&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; after upgrading p5-Net-DNS the resolver-&gt;nameservers breaks on a lot
&gt; &gt; of nameservers
&gt; &gt; 
&gt; &gt; i.e.
&gt; &gt; 
&gt; &gt; unresolvable name: ns02.CENTRALNETPOINT.COM
&gt; &gt; 
&gt; &gt; My code piece has :                        $domain_checks::resolver-
<div class="message-stanza open">&gt; &gt; &gt;nameservers&#40;$_ns&#41;;
</div>&gt; &gt; 
&gt; &gt; I have downgraded p5-Net-DNS downgraded: 1.05_1,1 -&gt; 1.02,1 - in order
&gt; &gt; to bypass this.
&gt; &gt; 
&gt; &gt; Regards,
&gt; &gt; Björn Róbertsson
&gt; &gt; ISNIC
</div>&gt; 
&gt; What exactly are you claiming here?
&gt; 
&gt; Running this code:
&gt; 
&gt;         use Net::DNS;
&gt;         print &#39;Net::DNS &#39;, Net::DNS-&gt;version, &#34;\n&#34;;
&gt; 
&gt;         my $resolver = Net::DNS::Resolver-&gt;new&#40;&#41;;
&gt; 
&gt;         my $name = &#39;ns02.CENTRALNETPOINT.COM&#39;;
&gt; 
&gt;         $resolver-&gt;nameservers&#40;$name&#41;;
&gt; 
&gt;         my @ip = $resolver-&gt;nameservers&#40;&#41;;
&gt; 
&gt;         print &#34;$name\t@ip\n&#34;;
&gt; 
&gt; produces:
&gt; 
&gt; Net::DNS 1.01
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt; 
&gt; Net::DNS 1.02
&gt; ns02.CENTRALNETPOINT.COM      83.169.55.96 217.160.113.155
&gt;  
&gt; Net::DNS 1.03
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt;  
&gt; Net::DNS 1.04
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt;  
&gt; Net::DNS 1.05
&gt; ns02.CENTRALNETPOINT.COM      83.169.55.96 217.160.113.155
&gt;  
&gt; Net::DNS 1.0506
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt; 
&gt; 
&gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628002" href="/Public/Bug/Display.html?id=114351#txn-1628002">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;11:43:10&nbsp;2016</span>
    <span class="description">bjornr [...] isnic.is -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 May 2016 15:42:56 +0000 &#40;GMT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Björn Róbertsson &lt;bjornr [...] isnic.is&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628002/872150/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872150">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">And for the different versions, it&#39;s from 1.03:

Net::DNS 1.03
unresolvable name: ns02.CENTRALNETPOINT.COM at resolve.pl line 8.
ns02.CENTRALNETPOINT.COM

Net::DNS 1.04
unresolvable name: ns02.CENTRALNETPOINT.COM at resolve.pl line 8.
ns02.CENTRALNETPOINT.COM

Net::DNS 1.02
ns02.CENTRALNETPOINT.COM        217.160.113.155 83.169.55.96

Kind Regards,
Björn

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message -----
<div class="message-stanza open">&gt; From: &#34;Dick Franks via RT&#34; &lt;bug-Net-DNS@rt.cpan.org&gt;
&gt; To: bjornr@isnic.is
&gt; Sent: Friday, 13 May, 2016 7:22:03 PM
&gt; Subject: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114351">https://rt.cpan.org/Ticket/Display.html?id=114351</a></span> &gt;
&gt; 
&gt; On Thu May 12 11:43:38 2016, bjornr@isnic.is wrote:
<div class="message-stanza open">&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; after upgrading p5-Net-DNS the resolver-&gt;nameservers breaks on a lot
&gt; &gt; of nameservers
&gt; &gt; 
&gt; &gt; i.e.
&gt; &gt; 
&gt; &gt; unresolvable name: ns02.CENTRALNETPOINT.COM
&gt; &gt; 
&gt; &gt; My code piece has :                        $domain_checks::resolver-
<div class="message-stanza open">&gt; &gt; &gt;nameservers&#40;$_ns&#41;;
</div>&gt; &gt; 
&gt; &gt; I have downgraded p5-Net-DNS downgraded: 1.05_1,1 -&gt; 1.02,1 - in order
&gt; &gt; to bypass this.
&gt; &gt; 
&gt; &gt; Regards,
&gt; &gt; Björn Róbertsson
&gt; &gt; ISNIC
</div>&gt; 
&gt; What exactly are you claiming here?
&gt; 
&gt; Running this code:
&gt; 
&gt;         use Net::DNS;
&gt;         print &#39;Net::DNS &#39;, Net::DNS-&gt;version, &#34;\n&#34;;
&gt; 
&gt;         my $resolver = Net::DNS::Resolver-&gt;new&#40;&#41;;
&gt; 
&gt;         my $name = &#39;ns02.CENTRALNETPOINT.COM&#39;;
&gt; 
&gt;         $resolver-&gt;nameservers&#40;$name&#41;;
&gt; 
&gt;         my @ip = $resolver-&gt;nameservers&#40;&#41;;
&gt; 
&gt;         print &#34;$name\t@ip\n&#34;;
&gt; 
&gt; produces:
&gt; 
&gt; Net::DNS 1.01
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt; 
&gt; Net::DNS 1.02
&gt; ns02.CENTRALNETPOINT.COM      83.169.55.96 217.160.113.155
&gt;  
&gt; Net::DNS 1.03
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt;  
&gt; Net::DNS 1.04
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt;  
&gt; Net::DNS 1.05
&gt; ns02.CENTRALNETPOINT.COM      83.169.55.96 217.160.113.155
&gt;  
&gt; Net::DNS 1.0506
&gt; ns02.CENTRALNETPOINT.COM      217.160.113.155 83.169.55.96
&gt; 
&gt; 
&gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628004" href="/Public/Bug/Display.html?id=114351#txn-1628004">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;19&nbsp;12:05:33&nbsp;2016</span>
    <span class="description">bjornr [...] isnic.is -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 May 2016 16:05:20 +0000 &#40;GMT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Björn Róbertsson &lt;bjornr [...] isnic.is&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628004/872152/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872152">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 980b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">And continuing, I&#39;ve downgraded the bind resolver from 9.10 to 9.9 and then I&#39;ve found this: If the cache is returning a particular match of upper/lower:



Net::DNS 1.05
unresolvable name: ns02.centralnetpoint.com at resolve.pl line 8.
ns02.centralnetpoint.com

but:

host ns02.centralnetpoint.com
ns02.CENTRALNETPOINT.com has address 83.169.55.96
ns02.CENTRALNETPOINT.com has address 217.160.113.155

and we change the test:

Net::DNS 1.05
ns02.CENTRALNETPOINT.com        217.160.113.155 83.169.55.96

voila!

Is the p5-Net-DNS changed from 1.03 to compare the strings before and after, and resolvers which return cached searches, with different case strings cause it to fail?

Anyway, named.conf option to bypass this behavious and get successful DNS requests all the time is:

no-case-compress { any; };

This discussion can be found on the bind users list with the heading: BIND started replying to queries for .com with .COM       

Kind regards,
Björn

&#40;p.s. sorry for the many mails&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628444" href="/Public/Bug/Display.html?id=114351#txn-1628444">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;20&nbsp;13:24:07&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628444/872422/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872422">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1009b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu May 19 12:05:33 2016, bjornr@isnic.is wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And continuing, I&#39;ve downgraded the bind resolver from 9.10 to 9.9 and
&gt; then I&#39;ve found this: If the cache is returning a particular match of
&gt; upper/lower:
&gt; 
&gt; 
&gt; 
&gt; Net::DNS 1.05
&gt; unresolvable name: ns02.centralnetpoint.com at resolve.pl line 8.
&gt; ns02.centralnetpoint.com
&gt; 
&gt; but:
&gt; 
&gt; host ns02.centralnetpoint.com
&gt; ns02.CENTRALNETPOINT.com has address 83.169.55.96
&gt; ns02.CENTRALNETPOINT.com has address 217.160.113.155
&gt; 
&gt; and we change the test:
&gt; 
&gt; Net::DNS 1.05
&gt; ns02.CENTRALNETPOINT.com        217.160.113.155 83.169.55.96
&gt; 
&gt; voila!
&gt; 
&gt; Is the p5-Net-DNS changed from 1.03 to compare the strings before and
&gt; after, and resolvers which return cached searches, with different case
&gt; strings cause it to fail?
</div>

Please can you boil your script down to a _small_ and convincing example using nameservers in the global internet, so that we can attempt to repeat your observations free of any influence from your local BIND configuration.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628447" href="/Public/Bug/Display.html?id=114351#txn-1628447">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;20&nbsp;14:11:19&nbsp;2016</span>
    <span class="description">bjornr [...] isnic.is -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 May 2016 18:11:01 +0000 &#40;GMT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Björn Róbertsson &lt;bjornr [...] isnic.is&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628447/872425/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872425">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

The test program:

#!/usr/local/bin/perl
use Net::DNS;
print &#39;Net::DNS &#39;, Net::DNS-&gt;version, &#34;\n&#34;;
my $resolver = Net::DNS::Resolver-&gt;new&#40;&#41;;
my $name = $ARGV[0];
$resolver-&gt;nameservers&#40;$name&#41;;
my @ip = $resolver-&gt;nameservers&#40;&#41;;
print &#34;$name\t@ip\n&#34;;

Test 1: Using the Google resolver 8.8.8.8:

[bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.com
Net::DNS 1.02
ns1.ipage.com   66.96.142.163 66.96.142.162 66.96.142.116
[bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.com
Net::DNS 1.05
ns1.ipage.com   66.96.142.163 66.96.142.116 66.96.142.162
[bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.COM
Net::DNS 1.05
ns1.ipage.COM   66.96.142.163 66.96.142.116 66.96.142.162

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">--- All nice ---

Test 2: Using Bind 9.10 resolver &#40;bind910-9.10.3P4&#41;

[bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
Net::DNS 1.05
aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91
[bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.com
Net::DNS 1.05
ns1.ipage.com   66.96.142.163 66.96.142.116 66.96.142.162
[bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.COM
Net::DNS 1.05
unresolvable name: ns1.ipage.COM at ./resolve.pl line 6.
ns1.ipage.COM
[bjornr@dev-br ~]$ ./resolve.pl aker.isnic.IS
Net::DNS 1.05
unresolvable name: aker.isnic.IS at ./resolve.pl line 6.
aker.isnic.IS
[bjornr@dev-br ~]$ ./resolve.pl aker.ISNIC.is
Net::DNS 1.05
unresolvable name: aker.ISNIC.is at ./resolve.pl line 6.
aker.ISNIC.is
[bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
Net::DNS 1.05
aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91

--- Fails when you change the case

Test 3: Using Bind 9.10 resolver, same as above but with the option no-case-compress { any; };

[bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
Net::DNS 1.05
aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91
[bjornr@dev-br ~]$ ./resolve.pl aker.isnic.IS
Net::DNS 1.05
aker.isnic.IS   193.4.58.91 2001:67c:6c:58:0:0:0:91

--- Everything works

Test 4: Using Bind 9.8 &#40;9.8.4.dfsg.P1-6+nmu2+deb7u10&#41;

[bjornr@dev-br ~]$ ./resolve.pl aker.isnic.IS
Net::DNS 1.05
aker.isnic.IS   193.4.58.91 2001:67c:6c:58:0:0:0:91
[bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
Net::DNS 1.05
aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91

--- Everything works

The discussion which matches this problem, and where I found the no-case-compress suggestion: <span class="clickylink"><a target="new" rel="nofollow" href="https://lists.isc.org/pipermail/bind-users/2016-March/096578.html">https://lists.isc.org/pipermail/bind-users/2016-March/096578.html</a></span>

My issue is not with external DNS resolvers, I only experience this issue with recent Bind 9.9 and Bind 9.10 servers as local resolvers.

Kind regards,
Björn

<div class="message-stanza open">----- Original Message -----
<div class="message-stanza open">&gt; From: &#34;Dick Franks via RT&#34; &lt;bug-Net-DNS@rt.cpan.org&gt;
&gt; To: bjornr@isnic.is
&gt; Sent: Friday, 20 May, 2016 5:24:08 PM
&gt; Subject: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114351">https://rt.cpan.org/Ticket/Display.html?id=114351</a></span> &gt;
&gt; 
</div>...
<div class="message-stanza open">&gt; 
&gt; 
&gt; Please can you boil your script down to a _small_ and convincing example
&gt; using nameservers in the global internet, so that we can attempt to repeat
&gt; your observations free of any influence from your local BIND configuration.
&gt; 
&gt;
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628564" href="/Public/Bug/Display.html?id=114351#txn-1628564">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;20&nbsp;21:10:29&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628564/872483/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872483">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri May 20 14:11:19 2016, bjornr@isnic.is wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; The test program:
&gt; 
&gt; #!/usr/local/bin/perl
&gt; use Net::DNS;
&gt; print &#39;Net::DNS &#39;, Net::DNS-&gt;version, &#34;\n&#34;;
&gt; my $resolver = Net::DNS::Resolver-&gt;new&#40;&#41;;
&gt; my $name = $ARGV[0];
&gt; $resolver-&gt;nameservers&#40;$name&#41;;
&gt; my @ip = $resolver-&gt;nameservers&#40;&#41;;
&gt; print &#34;$name\t@ip\n&#34;;
&gt; 
&gt; Test 1: Using the Google resolver 8.8.8.8:
&gt; 
&gt; [bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.com
&gt; Net::DNS 1.02
&gt; ns1.ipage.com   66.96.142.163 66.96.142.162 66.96.142.116
&gt; [bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.com
&gt; Net::DNS 1.05
&gt; ns1.ipage.com   66.96.142.163 66.96.142.116 66.96.142.162
&gt; [bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.COM
&gt; Net::DNS 1.05
&gt; ns1.ipage.COM   66.96.142.163 66.96.142.116 66.96.142.162
&gt; 
&gt; --- All nice ---
&gt; 
&gt; Test 2: Using Bind 9.10 resolver &#40;bind910-9.10.3P4&#41;
&gt; 
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
&gt; Net::DNS 1.05
&gt; aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91
&gt; [bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.com
&gt; Net::DNS 1.05
&gt; ns1.ipage.com   66.96.142.163 66.96.142.116 66.96.142.162
&gt; [bjornr@dev-br ~]$ ./resolve.pl ns1.ipage.COM
&gt; Net::DNS 1.05
&gt; unresolvable name: ns1.ipage.COM at ./resolve.pl line 6.
&gt; ns1.ipage.COM
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.isnic.IS
&gt; Net::DNS 1.05
&gt; unresolvable name: aker.isnic.IS at ./resolve.pl line 6.
&gt; aker.isnic.IS
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.ISNIC.is
&gt; Net::DNS 1.05
&gt; unresolvable name: aker.ISNIC.is at ./resolve.pl line 6.
&gt; aker.ISNIC.is
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
&gt; Net::DNS 1.05
&gt; aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91
&gt; 
&gt; --- Fails when you change the case
&gt; 
&gt; Test 3: Using Bind 9.10 resolver, same as above but with the option
&gt; no-case-compress { any; };
&gt; 
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
&gt; Net::DNS 1.05
&gt; aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.isnic.IS
&gt; Net::DNS 1.05
&gt; aker.isnic.IS   193.4.58.91 2001:67c:6c:58:0:0:0:91
&gt; 
&gt; --- Everything works
&gt; 
&gt; Test 4: Using Bind 9.8 &#40;9.8.4.dfsg.P1-6+nmu2+deb7u10&#41;
&gt; 
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.isnic.IS
&gt; Net::DNS 1.05
&gt; aker.isnic.IS   193.4.58.91 2001:67c:6c:58:0:0:0:91
&gt; [bjornr@dev-br ~]$ ./resolve.pl aker.isnic.is
&gt; Net::DNS 1.05
&gt; aker.isnic.is   193.4.58.91 2001:67c:6c:58:0:0:0:91
&gt; 
&gt; --- Everything works
&gt; 
&gt; The discussion which matches this problem, and where I found the no-
&gt; case-compress suggestion: <span class="clickylink"><a target="new" rel="nofollow" href="https://lists.isc.org/pipermail/bind-">https://lists.isc.org/pipermail/bind-</a></span>
&gt; users/2016-March/096578.html
&gt; 
&gt; My issue is not with external DNS resolvers, I only experience this
&gt; issue with recent Bind 9.9 and Bind 9.10 servers as local resolvers.
&gt; 
&gt; Kind regards,
&gt; Björn
&gt; 
&gt; ----- Original Message -----
<div class="message-stanza open">&gt; &gt; From: &#34;Dick Franks via RT&#34; &lt;bug-Net-DNS@rt.cpan.org&gt;
&gt; &gt; To: bjornr@isnic.is
&gt; &gt; Sent: Friday, 20 May, 2016 5:24:08 PM
&gt; &gt; Subject: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems
&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114351">https://rt.cpan.org/Ticket/Display.html?id=114351</a></span> &gt;
&gt; &gt;
</div>&gt; ...
<div class="message-stanza open">&gt; &gt;
&gt; &gt;
&gt; &gt; Please can you boil your script down to a _small_ and convincing
&gt; &gt; example
&gt; &gt; using nameservers in the global internet, so that we can attempt to
&gt; &gt; repeat
&gt; &gt; your observations free of any influence from your local BIND
&gt; &gt; configuration.
&gt; &gt;
&gt; &gt;
</div></div>
Your test program is incomplete because it does not specify the default nameserver which will be used for the lookup inside nameservers&#40;&#41;.  It is unreasonable to expect me to install various versions and configurations of BIND on the off-chance of repeating your result.

If you are claiming a bug in Net::DNS, it is for you to furnish the evidence.  If a particular version or configuration of BIND is an essential part of the experimental setup, then you need to make a suitable nameserver accessible from the global internet or identify one which already exists.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628624" href="/Public/Bug/Display.html?id=114351#txn-1628624">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;21&nbsp;04:34:35&nbsp;2016</span>
    <span class="description">bjornr [...] isnic.is -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 21 May 2016 08:34:24 +0000 &#40;GMT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Björn Róbertsson &lt;bjornr [...] isnic.is&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628624/872526/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872526">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 849b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I would be happy to clone some vm&#39;s with the configuration I am using, but I would prefer not to open them up to the general community. If you tell me an IP Address range I would be happy to permit recursive resolution from that.

Regards,
Björn

...
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Your test program is incomplete because it does not specify the default
&gt; nameserver which will be used for the lookup inside nameservers&#40;&#41;.  It is
&gt; unreasonable to expect me to install various versions and configurations of
&gt; BIND on the off-chance of repeating your result.
&gt; 
&gt; If you are claiming a bug in Net::DNS, it is for you to furnish the evidence.
&gt; If a particular version or configuration of BIND is an essential part of
&gt; the experimental setup, then you need to make a suitable nameserver
&gt; accessible from the global internet or identify one which already exists.
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628656" href="/Public/Bug/Display.html?id=114351#txn-1628656">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;21&nbsp;06:00:13&nbsp;2016</span>
    <span class="description">willem [...] nlnetlabs.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 21 May 2016 11:59:59 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Willem Toorop &lt;willem [...] nlnetlabs.nl&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628656/872547/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872547">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you Björn,

That is very accommodating!  I could open up some recursive resolvers at
NLnet Labs accessible over TCP only too.  I&#39;ll try to do that tonight.

-- Willem

Op 21-05-16 om 10:34 schreef Björn Róbertsson via RT:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Net-DNS
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=114351">https://rt.cpan.org/Ticket/Display.html?id=114351</a></span> &gt;
&gt; 
&gt; Hello,
&gt; 
&gt; I would be happy to clone some vm&#39;s with the configuration I am using, but I would prefer not to open them up to the general community. If you tell me an IP Address range I would be happy to permit recursive resolution from that.
&gt; 
&gt; Regards,
&gt; Björn
&gt; 
&gt; ...
<div class="message-stanza open">&gt;&gt; Your test program is incomplete because it does not specify the default
&gt;&gt; nameserver which will be used for the lookup inside nameservers&#40;&#41;.  It is
&gt;&gt; unreasonable to expect me to install various versions and configurations of
&gt;&gt; BIND on the off-chance of repeating your result.
&gt;&gt;
&gt;&gt; If you are claiming a bug in Net::DNS, it is for you to furnish the evidence.
&gt;&gt; If a particular version or configuration of BIND is an essential part of
&gt;&gt; the experimental setup, then you need to make a suitable nameserver
&gt;&gt; accessible from the global internet or identify one which already exists.
&gt;&gt;
&gt;&gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628680" href="/Public/Bug/Display.html?id=114351#txn-1628680">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;21&nbsp;07:18:52&nbsp;2016</span>
    <span class="description">bjornr [...] isnic.is -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #114351] p5-Net-DNS 1.05 problems</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 21 May 2016 11:18:26 +0000 &#40;GMT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-DNS [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Björn Róbertsson &lt;bjornr [...] isnic.is&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628680/872559/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872559">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 504b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">As discussed, I&#39;ve create 4 nameservers:

# FreeBSD 10.3 + bind 9.10
# nameserver 193.4.58.209

# FreeBSD 10.3 + bind 9.9
# nameserver 193.4.58.217

# Debian 8 + bind 9.9
# nameserver 193.4.58.222

# Debian 7 + bind 9.8
# nameserver 193.4.58.214

The last nameserver, always succeeds with the resolv.pl &#40;which is run from a FreeBSD 10.3 server, with p5-Net-DNS 1.05 from the ports tree&#41;

The allow-recursion is limited for Dick Franks provided IP address, except 222 which is open.

Kind regards,
Björn
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628742" href="/Public/Bug/Display.html?id=114351#txn-1628742">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;21&nbsp;10:45:39&nbsp;2016</span>
    <span class="description">rwfranks [...] acm.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rwfranks [...] acm.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1628742/872596/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/872596">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 144b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for your help Björn.

Case sensitive name compression exposes a problem in code intended to link a CNAME to its target address records.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1628878" href="/Public/Bug/Display.html?id=114351#txn-1628878">#</a>      
    </span>
    <span class="date">Sun&nbsp;May&nbsp;22&nbsp;03:48:53&nbsp;2016</span>
    <span class="description">NLNETLABS [...] cpan.org -  Subject changed from &#39;p5-Net-DNS 1.05 problems&#39; to &#39;Case sensitive compression breaks resolver-&gt;nameservers&#40;&#41;&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1635687" href="/Public/Bug/Display.html?id=114351#txn-1635687">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;07&nbsp;05:11:43&nbsp;2016</span>
    <span class="description">NLNETLABS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1635687/876725/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/876725">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 22b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This was fixed in 1.06
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1635690" href="/Public/Bug/Display.html?id=114351#txn-1635690">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;07&nbsp;05:11:49&nbsp;2016</span>
    <span class="description">NLNETLABS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.824982</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
