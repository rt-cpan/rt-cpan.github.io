<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #119790 for REST-Client: Allow the default host be superseded by absolute URLs</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #119790 for REST-Client: Allow the default host be superseded by absolute URLs</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=REST-Client">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=REST-Client">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=REST-Client">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=REST-Client">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/REST-Client">REST-Client CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">119790</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=REST-Client">REST-Client</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
GNUSTAVO [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-225650-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
273    </td>
  </tr>
  <tr id="CF-225651-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




rest-client.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1697674/911714/rest-client.patch">
Tue Jan 10 12:57:40 2017 (789b) by GNUSTAVO [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=119790">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1697674" href="/Public/Bug/Display.html?id=119790#txn-1697674">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;10&nbsp;12:57:40&nbsp;2017</span>
    <span class="description">GNUSTAVO [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Allow the default host be superseded by absolute URLs</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1697674/911713/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/911713">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi. I&#39;m the author of JIRA::REST and a few other modules that depend on REST::Client. Thank you for your time saver module!

My modules usually create a REST::Client object passing to it a default host to make it easier to interact with the server using relative URLs. However, sometimes the result of a REST method contains absolute URLs referencing related resources and it would be useful to be able to use them as is in subsequent requests.

As a concrete example, I&#39;m using JIRA&#39;s REST API to grok a project&#39;s roles using this method: <span class="clickylink"><a target="new" rel="nofollow" href="https://docs.atlassian.com/jira/REST/server/#api/2/project/{projectIdOrKey}/role-getProjectRoles">https://docs.atlassian.com/jira/REST/server/#api/2/project/{projectIdOrKey}/role-getProjectRoles</a></span>.

JIRA::REST&#39;s API allows the user to pass only the &#34;/rest/api/2/project/{projectIdOrKey}/role&#34; method path. However, the method&#39;s result contain absolute URLs like this:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; {
&gt;     &#34;Administrators&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/rest/api/2/project/MKY/role/10002">http://www.example.com/jira/rest/api/2/project/MKY/role/10002</a></span>&#34;,
&gt;     &#34;Users&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/rest/api/2/project/MKY/role/10001">http://www.example.com/jira/rest/api/2/project/MKY/role/10001</a></span>&#34;,
&gt;     &#34;Developers&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/rest/api/2/project/MKY/role/10000">http://www.example.com/jira/rest/api/2/project/MKY/role/10000</a></span>&#34;
&gt; }
</div>
Currently I have to remove the &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira">http://www.example.com/jira</a></span>&#34; prefix from them before passing them to REST::Client::GET because the method REST::Client::_prepareURL always prefix the URL with the default host, even if it gets an absolute URL.

It would be very convenient if it could leave absolute URLs intact, using the default host only to prefix relative URLs.

What do you think?

I&#39;m attaching a patch that can be applied to v273 to implement this.

BTW, do you have a public repository for REST::Client?

Thanks!
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rest-client.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1697674/911714/rest-client.patch">Download rest-client.patch</a><br />
<span class="downloadcontenttype">text/x-diff 789b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/lib/REST/Client.pm b/lib/REST/Client.pm
index fa35fec..6e77723 100644
--- a/lib/REST/Client.pm
+++ b/lib/REST/Client.pm
@@ -102,8 +102,8 @@ The config flags are:
 
 =item host
 
-A default host that will be prepended to all requests.  Allows you to just
-specify the path when making requests.
+A default host that will be prepended to all requests using relative URLs.
+Allows you to just specify the path when making requests.
 
 The default is undef - you must include the host in your requests.
 
@@ -476,6 +476,9 @@ sub _prepareURL {
     my $self = shift;
     my $url = shift;
 
+    # Do not prepend default host to absolute URLs.
+    return $url if $url =~ /^https?:/;
+
     my $host = $self-&gt;getHost;
     if&#40;$host&#41;{
         $url = &#39;/&#39;.$url unless $url =~ /^\//;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1697687" href="/Public/Bug/Display.html?id=119790#txn-1697687">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;10&nbsp;13:27:38&nbsp;2017</span>
    <span class="description">kevin.kane [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #119790] Allow the default host be superseded by absolute URLs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Jan 2017 13:27:26 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-REST-Client [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Kevin L. Kane&#34; &lt;kevin.kane [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1697687/911724/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/911724">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Gustavo,
    We are using <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/milescrawford/cpan-rest-client">https://github.com/milescrawford/cpan-rest-client</a></span> as the
authoritative place for REST::Client.  I like the idea of your patch, let
me know if you want me apply it/commit it or you want to fork on github and
create a pull request either way fine with me.

Thanks,
Kevin

On Tue, Jan 10, 2017 at 12:57 PM, Gustavo Leite de Mendonça Chaves via RT &lt;
bug-REST-Client@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue Jan 10 12:57:40 2017: Request 119790 was acted upon.
&gt; Transaction: Ticket created by GNUSTAVO
&gt;        Queue: REST-Client
&gt;      Subject: Allow the default host be superseded by absolute URLs
&gt;    Broken in: 273
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: GNUSTAVO@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=119790">https://rt.cpan.org/Ticket/Display.html?id=119790</a></span> &gt;
&gt;
&gt;
&gt; Hi. I&#39;m the author of JIRA::REST and a few other modules that depend on
&gt; REST::Client. Thank you for your time saver module!
&gt;
&gt; My modules usually create a REST::Client object passing to it a default
&gt; host to make it easier to interact with the server using relative URLs.
&gt; However, sometimes the result of a REST method contains absolute URLs
&gt; referencing related resources and it would be useful to be able to use them
&gt; as is in subsequent requests.
&gt;
&gt; As a concrete example, I&#39;m using JIRA&#39;s REST API to grok a project&#39;s roles
&gt; using this method: <span class="clickylink"><a target="new" rel="nofollow" href="https://docs.atlassian.com/jira/REST/server/#api/2/">https://docs.atlassian.com/jira/REST/server/#api/2/</a></span>
&gt; project/{projectIdOrKey}/role-getProjectRoles.
&gt;
&gt; JIRA::REST&#39;s API allows the user to pass only the &#34;/rest/api/2/project/{projectIdOrKey}/role&#34;
&gt; method path. However, the method&#39;s result contain absolute URLs like this:
&gt;
<div class="message-stanza open">&gt; &gt; {
&gt; &gt;     &#34;Administrators&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/">http://www.example.com/jira/</a></span>
</div>&gt; rest/api/2/project/MKY/role/10002&#34;,
<div class="message-stanza open">&gt; &gt;     &#34;Users&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/rest/api/2/project/MKY/role/">http://www.example.com/jira/rest/api/2/project/MKY/role/</a></span>
</div>&gt; 10001&#34;,
<div class="message-stanza open">&gt; &gt;     &#34;Developers&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/">http://www.example.com/jira/</a></span>
</div>&gt; rest/api/2/project/MKY/role/10000&#34;
<div class="message-stanza open">&gt; &gt; }
</div>&gt;
&gt; Currently I have to remove the &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira">http://www.example.com/jira</a></span>&#34; prefix from
&gt; them before passing them to REST::Client::GET because the method
&gt; REST::Client::_prepareURL always prefix the URL with the default host, even
&gt; if it gets an absolute URL.
&gt;
&gt; It would be very convenient if it could leave absolute URLs intact, using
&gt; the default host only to prefix relative URLs.
&gt;
&gt; What do you think?
&gt;
&gt; I&#39;m attaching a patch that can be applied to v273 to implement this.
&gt;
&gt; BTW, do you have a public repository for REST::Client?
&gt;
&gt; Thanks!
&gt;
</div>


-- 
Kevin L. Kane
kevin.kane at gmail.com
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1697687/911725/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/911725">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.9k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1697688" href="/Public/Bug/Display.html?id=119790#txn-1697688">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;10&nbsp;13:27:39&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1697699" href="/Public/Bug/Display.html?id=119790#txn-1697699">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;10&nbsp;13:48:58&nbsp;2017</span>
    <span class="description">GNUSTAVO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #119790] Allow the default host be superseded by absolute URLs</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Jan 2017 16:48:24 -0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-REST-Client [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Gustavo Leite de Mendonça Chaves &lt;gnustavo [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1697699/911735/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/911735">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Great! I&#39;ll fork it and submit a pull request in a moment. Thanks!

2017-01-10 16:27 GMT-02:00 Kevin L. Kane via RT &lt;bug-REST-Client@rt.cpan.org
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;:
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=119790">https://rt.cpan.org/Ticket/Display.html?id=119790</a></span> &gt;
&gt;
&gt; Hi Gustavo,
&gt;     We are using <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/milescrawford/cpan-rest-client">https://github.com/milescrawford/cpan-rest-client</a></span> as the
&gt; authoritative place for REST::Client.  I like the idea of your patch, let
&gt; me know if you want me apply it/commit it or you want to fork on github and
&gt; create a pull request either way fine with me.
&gt;
&gt; Thanks,
&gt; Kevin
&gt;
&gt; On Tue, Jan 10, 2017 at 12:57 PM, Gustavo Leite de Mendonça Chaves via RT &lt;
&gt; bug-REST-Client@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt; &gt; Tue Jan 10 12:57:40 2017: Request 119790 was acted upon.
&gt; &gt; Transaction: Ticket created by GNUSTAVO
&gt; &gt;        Queue: REST-Client
&gt; &gt;      Subject: Allow the default host be superseded by absolute URLs
&gt; &gt;    Broken in: 273
&gt; &gt;     Severity: &#40;no value&#41;
&gt; &gt;        Owner: Nobody
&gt; &gt;   Requestors: GNUSTAVO@cpan.org
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=119790">https://rt.cpan.org/Ticket/Display.html?id=119790</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Hi. I&#39;m the author of JIRA::REST and a few other modules that depend on
&gt; &gt; REST::Client. Thank you for your time saver module!
&gt; &gt;
&gt; &gt; My modules usually create a REST::Client object passing to it a default
&gt; &gt; host to make it easier to interact with the server using relative URLs.
&gt; &gt; However, sometimes the result of a REST method contains absolute URLs
&gt; &gt; referencing related resources and it would be useful to be able to use
</div>&gt; them
<div class="message-stanza open">&gt; &gt; as is in subsequent requests.
&gt; &gt;
&gt; &gt; As a concrete example, I&#39;m using JIRA&#39;s REST API to grok a project&#39;s
</div>&gt; roles
<div class="message-stanza open">&gt; &gt; using this method: <span class="clickylink"><a target="new" rel="nofollow" href="https://docs.atlassian.com/jira/REST/server/#api/2/">https://docs.atlassian.com/jira/REST/server/#api/2/</a></span>
&gt; &gt; project/{projectIdOrKey}/role-getProjectRoles.
&gt; &gt;
&gt; &gt; JIRA::REST&#39;s API allows the user to pass only the &#34;/rest/api/2/project/{
</div>&gt; projectIdOrKey}/role&#34;
<div class="message-stanza open">&gt; &gt; method path. However, the method&#39;s result contain absolute URLs like
</div>&gt; this:
<div class="message-stanza open">&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; {
&gt; &gt; &gt;     &#34;Administrators&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/">http://www.example.com/jira/</a></span>
</div>&gt; &gt; rest/api/2/project/MKY/role/10002&#34;,
<div class="message-stanza open">&gt; &gt; &gt;     &#34;Users&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/rest/api/2/project/MKY/role/">http://www.example.com/jira/rest/api/2/project/MKY/role/</a></span>
</div>&gt; &gt; 10001&#34;,
<div class="message-stanza open">&gt; &gt; &gt;     &#34;Developers&#34;: &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira/">http://www.example.com/jira/</a></span>
</div>&gt; &gt; rest/api/2/project/MKY/role/10000&#34;
<div class="message-stanza open">&gt; &gt; &gt; }
</div>&gt; &gt;
&gt; &gt; Currently I have to remove the &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.example.com/jira">http://www.example.com/jira</a></span>&#34; prefix from
&gt; &gt; them before passing them to REST::Client::GET because the method
&gt; &gt; REST::Client::_prepareURL always prefix the URL with the default host,
</div>&gt; even
<div class="message-stanza open">&gt; &gt; if it gets an absolute URL.
&gt; &gt;
&gt; &gt; It would be very convenient if it could leave absolute URLs intact, using
&gt; &gt; the default host only to prefix relative URLs.
&gt; &gt;
&gt; &gt; What do you think?
&gt; &gt;
&gt; &gt; I&#39;m attaching a patch that can be applied to v273 to implement this.
&gt; &gt;
&gt; &gt; BTW, do you have a public repository for REST::Client?
&gt; &gt;
&gt; &gt; Thanks!
&gt; &gt;
</div>&gt;
&gt;
&gt;
&gt; --
&gt; Kevin L. Kane
&gt; kevin.kane at gmail.com
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1697699/911736/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/911736">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.337683</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
