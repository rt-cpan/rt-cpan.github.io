<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #102640 for Net-SSLeay: HTTP POST requests over 90kb fail with OpenSSL 1.0.2 </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #102640 for Net-SSLeay: HTTP POST requests over 90kb fail with OpenSSL 1.0.2 </h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-SSLeay">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-SSLeay">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-SSLeay">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-SSLeay">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SSLeay">Net-SSLeay CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">102640</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-SSLeay">Net-SSLeay</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MIKEM [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KENTNL [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
ether [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-44414-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.68    </td>
  </tr>
  <tr id="CF-44415-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=102640">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471278" href="/Public/Bug/Display.html?id=102640#txn-1471278">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;11:45:59&nbsp;2015</span>
    <span class="description">KENTNL [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> HTTP POST requests over 90kb fail with OpenSSL 1.0.2</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471278/783329/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783329">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	I&#39;ve had a hard time nailing this issue down as to where its actually going wrong.<br>

	<br>

	All the facts I know are, that this issue was not present on 1.0.1l, and is present on 1.0.2<br>

	<br>

	Under 1.0.2 , <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/libwww-perl-6.13/lib/LWP/Protocol/http.pm#L282">https://metacpan.org/source/ETHER/libwww-perl-6.13/lib/LWP/Protocol/http.pm#L282</a></span> &lt;-- this line fails&nbsp; when the socket is an IO::Socket::SSL socket.<br>

	<br>

	Using an MITM to unwrap the SSL and provide plain HTTP to the same requests results in no error.<br>

	<br>

	Downgrading openssl to 1.0.1l also results in no error.</p>

<p>
	The error dies with $! being &quot;write failed: Bad address&quot; which is a C Level error to do with bad pointers ( usually ).</p>

<p>
	And I&#39;ve found similar issues with similar upload thresholds triggering the same Bad address error on ruby projects ( <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/excon/excon/issues/467">https://github.com/excon/excon/issues/467</a></span> )</p>

<p>
	But there&#39;s no obvious smoking gun, there&#39;s no related articles I can see at OpenSSL&#39;s official forums, so at best I might assume there&#39;s some kind of ABI missmatch 1.0.2 introduces that needs to be adjusted for.<br>

	<br>

	Unfortunately I don&#39;t know what other data might be helpful in replicating this issue, other than to say that uploading the following files to PAUSE using cpan-uploader ( LWP -&gt; IO::Socket::SSL -&gt; Net::SSLeay )&nbsp; reliably replicated the failure, and circumvention was required to get uploads working:</p>

<p>
	<span class="clickylink"><a target="new" rel="nofollow" href="https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Color-Library-Dictionary-XKCD-1.000000.tar.gz">https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Color-Library-Dictionary-XKCD-1.000000.tar.gz</a></span></p>

<p>
	<span class="clickylink"><a target="new" rel="nofollow" href="https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Author-KENTNL-2.024001.tar.gz">https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Author-KENTNL-2.024001.tar.gz</a></span><br>

	<span class="clickylink"><a target="new" rel="nofollow" href="https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Author-KENTNL-2.024000.tar.gz">https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Author-KENTNL-2.024000.tar.gz</a></span><br>

	<br>

	<br>

	<br>

	<br>

	<br>

	&nbsp;</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471344" href="/Public/Bug/Display.html?id=102640#txn-1471344">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;17:32:19&nbsp;2015</span>
    <span class="description">ether [...] cpan.org -  Cc ETHER added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471385" href="/Public/Bug/Display.html?id=102640#txn-1471385">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;01:34:18&nbsp;2015</span>
    <span class="description">mikem [...] airspayce.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102640] HTTP POST requests over 90kb fail with OpenSSL 1.0.2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 09 Mar 2015 15:34:05 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike McCauley &lt;mikem [...] airspayce.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1471385/783401/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/783401">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Kent,

I havent been able to reproduce this with cpan-upload

If you can provide some sample code or command line to demonstrate the problem 
I will do my best with it.

Cheers.

On Sunday, March 08, 2015 11:46:00 AM you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sun Mar 08 11:45:59 2015: Request 102640 was acted upon.
&gt; Transaction: Ticket created by KENTNL
&gt;        Queue: Net-SSLeay
&gt;      Subject: HTTP POST requests over 90kb fail with OpenSSL 1.0.2
&gt;    Broken in: 1.68
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: KENTNL@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102640">https://rt.cpan.org/Ticket/Display.html?id=102640</a></span> &gt;
&gt; 
&gt; 
&gt; I&#39;ve had a hard time nailing this issue down as to where its actually going
&gt; wrong.
&gt; 
&gt; All the facts I know are, that this issue was not present on 1.0.1l, and is
&gt; present on 1.0.2
&gt; 
&gt; Under 1.0.2 ,
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/ETHER/libwww-perl-6.13/lib/LWP/Protocol/http.pm">https://metacpan.org/source/ETHER/libwww-perl-6.13/lib/LWP/Protocol/http.pm</a></span>#
&gt; L282 &lt;-- this line fails when the socket is an IO::Socket::SSL socket.
&gt; 
&gt; Using an MITM to unwrap the SSL and provide plain HTTP to the same requests
&gt; results in no error.
&gt; 
&gt; Downgrading openssl to 1.0.1l also results in no error.
&gt; 
&gt; The error dies with $! being &#34;write failed: Bad address&#34; which is a C Level
&gt; error to do with bad pointers &#40; usually &#41;.
&gt; 
&gt; And I&#39;ve found similar issues with similar upload thresholds triggering the
&gt; same Bad address error on ruby projects &#40;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/excon/excon/issues/467">https://github.com/excon/excon/issues/467</a></span> &#41;
&gt; 
&gt; But there&#39;s no obvious smoking gun, there&#39;s no related articles I can see at
&gt; OpenSSL&#39;s official forums, so at best I might assume there&#39;s some kind of
&gt; ABI missmatch 1.0.2 introduces that needs to be adjusted for.
&gt; 
&gt; Unfortunately I don&#39;t know what other data might be helpful in replicating
&gt; this issue, other than to say that uploading the following files to PAUSE
&gt; using cpan-uploader &#40; LWP -&gt; IO::Socket::SSL -&gt; Net::SSLeay &#41; reliably
&gt; replicated the failure, and circumvention was required to get uploads
&gt; working:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Color-Library-Dictionary-XK">https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Color-Library-Dictionary-XK</a></span>
&gt; CD-1.000000.tar.gz
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Aut">https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Aut</a></span>
&gt; hor-KENTNL-2.024001.tar.gz
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Au">https://cpan.metacpan.org/authors/id/K/KE/KENTNL/Dist-Zilla-PluginBundle-Au</a></span>
&gt; thor-KENTNL-2.024000.tar.gz
</div>
-- 
Mike McCauley           VK4AMM                   mikem@airspayce.com
Airspayce Pty Ltd 9 Bulbul Place Currumbin Waters QLD 4223 Australia   
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.airspayce.com">http://www.airspayce.com</a></span>
Phone +61 7 5598-7474
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1471386" href="/Public/Bug/Display.html?id=102640#txn-1471386">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;01:34:20&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1472585" href="/Public/Bug/Display.html?id=102640#txn-1472585">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;11&nbsp;21:40:28&nbsp;2015</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1472585/784163/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/784163">with headers</a>
<br />
<span class="downloadcontenttype">text/html 870b</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	Earlier today RJBS was seen on #toolchain having the same issue. But it appeared semi-transient for him.</p>

<p>
	&nbsp;</p>

<p>
	I&#39;ve been trying to make a reduced case, but the code I&#39;m trying to simplify and retain the failure condition is way way beyond my mental capacity to process and I&#39;ve not been able to get anyone to assist me.</p>

<p>
	&nbsp;</p>

<p>
	I need to find a way to reduce the code to its absolute minimum retaining the PAUSE failure, and then when I&#39;m sure the code can be simplified no more, I have to make a non-pause server that assists in replicating the failure.</p>

<p>
	&nbsp;</p>

<p>
	And then I have to work out what series of OpenSSL compilation options I happen to have that built my system OpenSSL install that cause the issue.</p>

<p>
	&nbsp;</p>

<p>
	But I haven&#39;t even done 1/3 :(<br>

	<br>

	&nbsp;</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1499962" href="/Public/Bug/Display.html?id=102640#txn-1499962">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;25&nbsp;14:17:16&nbsp;2015</span>
    <span class="description">Steffen_Ullrich [...] genua.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1499962/799127/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/799127">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 869b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have the feeling that this problem might be related to CVE-2015-0290 &#34;OpenSSL Multiblock Corrupted Pointer Issue&#34;. The diff at <span class="clickylink"><a target="new" rel="nofollow" href="https://git.openssl.org/?p=openssl.git;a=commitdiff;h=77c77f0a1b9f15b869ca3342186dfbedd1119d0e;hp=8b84495380098592ef7bb2fa9209ccb87803bf1d">https://git.openssl.org/?p=openssl.git;a=commitdiff;h=77c77f0a1b9f15b869ca3342186dfbedd1119d0e;hp=8b84495380098592ef7bb2fa9209ccb87803bf1d</a></span> indicates for me that this situation might happen sometimes with a combination of a multiblock-capable cipher &#40;AES-NI&#41; and non-blocking I/O when the server does not read data fast enough so that the socket buffer will fill up and BIO_write will not be able to write the full SSL fragment to the socket. This would explain also if it is happening with larger data only, because it takes some amount of data to fill up the socket buffer.

This OpenSSL problem was fixed in 1.02a which was only released after this bug report. So it would be good to know if this problem still happens with OpenSSL 1.02a.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1499972" href="/Public/Bug/Display.html?id=102640#txn-1499972">#</a>      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;25&nbsp;14:28:47&nbsp;2015</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1499972/799135/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/799135">with headers</a>
<br />
<span class="downloadcontenttype">text/html 742b</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	&gt;<br>

	&gt; This OpenSSL problem was fixed in 1.02a which was only released after<br>

	&gt; this bug report. So it would be good to know if this problem still<br>

	&gt; happens with OpenSSL 1.02a.<br>

	<br>

	Indeed. I haven&#39;t personally seen it myself in a long time now, ( having upgraded to 1.0.2a around March 21 ) which is good because it happened repeatedly before.</p>

<p>
	&nbsp;</p>

<p>
	The ruby instance I referenced with the same error also appears to be solved in the same way.<br>

	&nbsp;</p>

<p>
	So I&#39;m relatively comfortable in putting this one to bed and just having some kind of &quot;Your OpenSSL library version is in a list of ones known to be critically broken, plz upgrade&quot; advice.</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1500180" href="/Public/Bug/Display.html?id=102640#txn-1500180">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;26&nbsp;01:51:15&nbsp;2015</span>
    <span class="description">MIKEM [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1500180/799260/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/799260">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 141b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just to reiterate:
apparently due to a bug in OPenSSL that is fixed in OpenSSL 1.0.2a.

Thanks to Steffen Ulrich for shedding light on this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1500183" href="/Public/Bug/Display.html?id=102640#txn-1500183">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;26&nbsp;01:51:24&nbsp;2015</span>
    <span class="description">MIKEM [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1500184" href="/Public/Bug/Display.html?id=102640#txn-1500184">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;26&nbsp;01:51:24&nbsp;2015</span>
    <span class="description">MIKEM [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1500189" href="/Public/Bug/Display.html?id=102640#txn-1500189">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;26&nbsp;02:17:24&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1500189/799266/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/799266">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 233b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-05-26 01:51:15, MIKEM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Just to reiterate:
&gt; apparently due to a bug in OPenSSL that is fixed in OpenSSL 1.0.2a.
</div>
Maybe this issue could be mentioned in Net::SSLeay&#39;s Pod page, in the &#34;KNOWN BUGS AND CAVEATS&#34; section?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1500192" href="/Public/Bug/Display.html?id=102640#txn-1500192">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;26&nbsp;02:22:59&nbsp;2015</span>
    <span class="description">mikem [...] airspayce.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102640] HTTP POST requests over 90kb fail with OpenSSL 1.0.2</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 26 May 2015 16:22:49 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SSLeay [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mike McCauley &lt;mikem [...] airspayce.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1500192/799269/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/799269">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 601b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Done.

Cheers.

On Tuesday, May 26, 2015 02:17:25 AM you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Net-SSLeay
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102640">https://rt.cpan.org/Ticket/Display.html?id=102640</a></span> &gt;
&gt; 
&gt; On 2015-05-26 01:51:15, MIKEM wrote:
<div class="message-stanza open">&gt; &gt; Just to reiterate:
&gt; &gt; apparently due to a bug in OPenSSL that is fixed in OpenSSL 1.0.2a.
</div>&gt; 
&gt; Maybe this issue could be mentioned in Net::SSLeay&#39;s Pod page, in the &#34;KNOWN
&gt; BUGS AND CAVEATS&#34; section?
</div>
-- 
Mike McCauley           VK4AMM                   mikem@airspayce.com
Airspayce Pty Ltd 9 Bulbul Place Currumbin Waters QLD 4223 Australia   
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.airspayce.com">http://www.airspayce.com</a></span>
Phone +61 7 5598-7474
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.518283</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
