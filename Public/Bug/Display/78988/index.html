<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #78988 for GD-Graph-ohlc: GD-Graph-ohlc</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #78988 for GD-Graph-ohlc: GD-Graph-ohlc</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/GD-Graph-ohlc/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/GD-Graph-ohlc/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/GD-Graph-ohlc/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/GD-Graph-ohlc/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GD-Graph-ohlc">GD-Graph-ohlc CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">78988</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/GD-Graph-ohlc/Active/">GD-Graph-ohlc</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">jettero [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tfischer [...] bern.swissdatacenters.ch

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-226978-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-226979-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;15&nbsp;18:00:52&nbsp;2012</span>
    <span class="description">tfischer [...] bern.swissdatacenters.ch -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> GD-Graph-ohlc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Aug 2012 23:00:37 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-GD-Graph-ohlc [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Fischer, Tom&#34; &lt;tfischer [...] bern.swissdatacenters.ch&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">*add colorings for ohlc*
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;16&nbsp;07:11:31&nbsp;2012</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Wed Aug 15 18:00:52 2012, tfischer@bern.swissdatacenters.ch wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; *add colorings for ohlc*
</div>
I&#39;m looking at the internals for GD::Graph::ohlc, which uses
GD::Graph::axestype as its base.  When a data point comes in, it&#39;s
really up to that module to select a color for the node.

It&#39;d be easy enough to override that behavior and use a different color
by copying what candlesticks does when it fills the box rather than
leaving it empty.  But it&#39;s not clear what I&#39;m supposed to do about the
legend then.  The legend automatically shows what color is for what.

It&#39;s a dreadful loose end.  Mainly GD::Graph expects each independent
variable to be exactly one color.  I&#39;m not sure there&#39;s a solution for
this, so I&#39;m just going to ignore it.

Another thing though is that it&#39;s probably desirable that each data set
should have its own color-pair.

What kind of interface are you picturing?  I&#39;ve imagined something
myself, I want to see if it lines up.



-- 
If riding in an airplane is flying, then riding in a boat is swimming.
116 jumps, 48.6 minutes of freefall, 92.9 freefall miles.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;16&nbsp;07:11:32&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;16&nbsp;07:23:03&nbsp;2012</span>
    <span class="description">jettero [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;16&nbsp;16:38:38&nbsp;2012</span>
    <span class="description">tfischer [...] bern.swissdatacenters.ch -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #78988] GD-Graph-ohlc</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 16 Aug 2012 21:38:28 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-GD-Graph-ohlc [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Fischer, Tom&#34; &lt;tfischer [...] bern.swissdatacenters.ch&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">My understanding of your comments is that to have two colours for a
single series of data represented in OHLC bars could be done, but would
mess with the legend colouring. In other words, GD::Graph is capable of
graphing multiple data series on the same chart and quite sensibly
wishes one colour per data series.

In this case, it isn&#39;t a bug its a feature. Candlesticks are a different
story. If the change of bar &#40;ie whether close &lt;&gt; open&#41; is important one
can use candlesticks, if not or for multiple series one can use bars.

Unsure of your question re interface. Interface to your modules to do
things such as select colour and other features of the graph to be
produced, or interface for the whole project?

If the former, I&#39;m happy to edit the source to choose the colours etc or
pass arguments via the command line &#40;as your example perl script is
called by other scripts etc&#41;. I am not fussy about having different
colours etc and will happily pick a default setting and stick to it.

If what interface for the entire application, the goal is not to
recreate an entire charting package, although perhaps that is what will
be ultimately required. The problem which I am trying to solve is the
limited intraday historical data provided by any off the shelf software
package.

What I have now is a series of scripts which do the following
-pull data from the exchange &#40;working automation but still a manual
process done weekly - CME has FTP access&#41;
-sort into a flat file database by exchange and instrument
-parse trade data to 1 minute OHLCV and seperate according to trade date
-build various interval chart OHLCV data from the 1 minute data
-create a GD::Graph::Candlestick for each OHLC file &#40;no display volume
data yet - that is to do&#41;

As for the interface, browsing the images in a flat file structure is
all I have so far. This is dumped in a web facing folder and one uses
the following URL

<span class="clickylink"><a target="new" rel="nofollow" href="http://host/database/EXCHANGE_INSTRUMENT_YYYYMMDD_INTERVAL.png">http://host/database/EXCHANGE_INSTRUMENT_YYYYMMDD_INTERVAL.png</a></span>


On Thu, 2012-08-16 at 07:11 -0400, Paul Miller via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=78988">https://rt.cpan.org/Ticket/Display.html?id=78988</a></span> &gt;
&gt; 
&gt; 
&gt; On Wed Aug 15 18:00:52 2012, tfischer@bern.swissdatacenters.ch wrote:
<div class="message-stanza open">&gt; &gt; *add colorings for ohlc*
</div>&gt; 
&gt; I&#39;m looking at the internals for GD::Graph::ohlc, which uses
&gt; GD::Graph::axestype as its base.  When a data point comes in, it&#39;s
&gt; really up to that module to select a color for the node.
&gt; 
&gt; It&#39;d be easy enough to override that behavior and use a different color
&gt; by copying what candlesticks does when it fills the box rather than
&gt; leaving it empty.  But it&#39;s not clear what I&#39;m supposed to do about the
&gt; legend then.  The legend automatically shows what color is for what.
&gt; 
&gt; It&#39;s a dreadful loose end.  Mainly GD::Graph expects each independent
&gt; variable to be exactly one color.  I&#39;m not sure there&#39;s a solution for
&gt; this, so I&#39;m just going to ignore it.
&gt; 
&gt; Another thing though is that it&#39;s probably desirable that each data set
&gt; should have its own color-pair.
&gt; 
&gt; What kind of interface are you picturing?  I&#39;ve imagined something
&gt; myself, I want to see if it lines up.
&gt; 
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;17&nbsp;08:33:29&nbsp;2012</span>
    <span class="description">jettero [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yeah, the interface...  I&#39;m wondering how users should interact with it.

I was thinking of something like this.  It&#39;ll screw up the legend if
you&#39;re using one, but I&#39;m not sure how bad that is if it&#39;s self inflicted.

$graph-&gt;alt_negative_color&#40;{
    lgreen =&gt; &#34;lred&#34;,
    dgreen =&gt; &#34;dred&#34;,
}&#41;;

Meaning, if the ohlc or candlestick point is close&lt;open then change
lgreen to lred.

so you&#39;d basically $graph-&gt;set&#40;dclrs =&gt; [ qw&#40;lgreen dgreen&#41; ]&#41;;
then $graph-&gt;alt_negative_color&#40;{...}&#41;; and you&#39;d get the effect you&#39;d want.

&#40;I also wrote up an alt_positive_color&#40;&#41; ... figuring they&#39;re the same
thing roughly, why not.&#41;

Later one could hack the legend drawing code to draw boxes with two
colors in them.  Later.  Much later.


-- 
If riding in an airplane is flying, then riding in a boat is swimming.
116 jumps, 48.6 minutes of freefall, 92.9 freefall miles.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
