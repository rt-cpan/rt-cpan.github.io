<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #87111 for Shell-GetEnv: Suggested patch - new feature</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #87111 for Shell-GetEnv: Suggested patch - new feature</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Shell-GetEnv/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Shell-GetEnv/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Shell-GetEnv/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Shell-GetEnv/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Shell-GetEnv">Shell-GetEnv CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">87111</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Shell-GetEnv/Active/">Shell-GetEnv</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mobrule [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.09    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;20&nbsp;14:50:55&nbsp;2013</span>
    <span class="description">mobrule [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Suggested patch - new feature</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 20 Jul 2013 11:50:41 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Shell-GetEnv [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Marty O&#39;Brien&#34; &lt;mobrule [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Dr. Jerius,

New Perl programmers are often confused about how the  system  call
interacts with the environment, and they wonder why code like this

    system&#40;&#39;export foo=bar&#39;&#41;;
    system&#40;&#39;echo $foo&#39;&#41;;

behaves differently from

    system&#40;&#39;export foo=bar; echo $foo&#39;&#41;;

I came across your Shell-GetEnv distribution and thought about how it could
be used to get those first lines of code to do what the user intends to do.
The only thing missing from the functionality of Shell-GetEnv that would
let me write a wrapper function and create a drop in replacement for
 system  is the ability to retrieve the exit status of the process. This
suggested patch adds that functionality. It includes new tests and test
scripts, though I neglected to patch the module documentation.

Suggested patch enclosed.
Marty O&#39;Brien
mob@cpan.org
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;12&nbsp;12:28:02&nbsp;2016</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Jul 20 14:50:55 2013, mobrule@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Dr. Jerius,
&gt; 
&gt; New Perl programmers are often confused about how the  system  call
&gt; interacts with the environment, and they wonder why code like this
&gt; 
&gt;     system&#40;&#39;export foo=bar&#39;&#41;;
&gt;     system&#40;&#39;echo $foo&#39;&#41;;
&gt; 
&gt; behaves differently from
&gt; 
&gt;     system&#40;&#39;export foo=bar; echo $foo&#39;&#41;;
&gt; 
&gt; I came across your Shell-GetEnv distribution and thought about how it could
&gt; be used to get those first lines of code to do what the user intends to do.
&gt; The only thing missing from the functionality of Shell-GetEnv that would
&gt; let me write a wrapper function and create a drop in replacement for
&gt;  system  is the ability to retrieve the exit status of the process. This
&gt; suggested patch adds that functionality. It includes new tests and test
&gt; scripts, though I neglected to patch the module documentation.
&gt; 
&gt; Suggested patch enclosed.
&gt; Marty O&#39;Brien
&gt; mob@cpan.org
</div>
Marty,

Thanks very much for your contribution.  I apologize for not replying
earlier; I don&#39;t know how I missed this.

If I understand correctly, you&#39;re looking for a routine which would
&#34;batch&#34; up calls to system, returning the final&#40;?&#41; exit value of the
shell.

Rather naively, is this in line with what you&#39;re looking for?


  sub batch {

    return system&#40; join&#40; &#39;;&#39;, @_ &#41; &#41;;

  }

What is the functionality in Shell::GetEnv which improves upon this?

Shell::GetEnv seems too specialized for this purpose, but if there is
a common core of functionality that can get split out, I&#39;m all for it.

You have quite correctly pointed out that Shell::GetEnv does not
return the shell&#39;s status after the commands have been run.  I&#39;ll
incorporate that &#40;based upon your code and tests&#41;.

Thanks again for your contribution, and again, my sincerest apologies
for having overlooked this.  I appreciate the effort involved.

Diab
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;12&nbsp;12:28:03&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;12&nbsp;16:06:14&nbsp;2016</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 12 12:28:02 2016, DJERIUS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat Jul 20 14:50:55 2013, mobrule@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; Hi Dr. Jerius,
&gt; &gt;
&gt; &gt; New Perl programmers are often confused about how the  system  call
&gt; &gt; interacts with the environment, and they wonder why code like this
&gt; &gt;
&gt; &gt; system&#40;&#39;export foo=bar&#39;&#41;;
&gt; &gt; system&#40;&#39;echo $foo&#39;&#41;;
&gt; &gt;
&gt; &gt; behaves differently from
&gt; &gt;
&gt; &gt; system&#40;&#39;export foo=bar; echo $foo&#39;&#41;;
&gt; &gt;
&gt; &gt; I came across your Shell-GetEnv distribution and thought about how it
&gt; &gt; could
&gt; &gt; be used to get those first lines of code to do what the user intends
&gt; &gt; to do.
&gt; &gt; The only thing missing from the functionality of Shell-GetEnv that
&gt; &gt; would
&gt; &gt; let me write a wrapper function and create a drop in replacement for
&gt; &gt;  system  is the ability to retrieve the exit status of the process.
&gt; &gt; This
&gt; &gt; suggested patch adds that functionality. It includes new tests and
&gt; &gt; test
&gt; &gt; scripts, though I neglected to patch the module documentation.
&gt; &gt;
&gt; &gt; Suggested patch enclosed.
&gt; &gt; Marty O&#39;Brien
&gt; &gt; mob@cpan.org
</div>&gt; 
&gt; Marty,
&gt; 
&gt; Thanks very much for your contribution.  I apologize for not replying
&gt; earlier; I don&#39;t know how I missed this.
&gt; 
&gt; If I understand correctly, you&#39;re looking for a routine which would
&gt; &#34;batch&#34; up calls to system, returning the final&#40;?&#41; exit value of the
&gt; shell.
&gt; 
&gt; Rather naively, is this in line with what you&#39;re looking for?
&gt; 
&gt; 
&gt; sub batch {
&gt; 
&gt; return system&#40; join&#40; &#39;;&#39;, @_ &#41; &#41;;
&gt; 
&gt; }
&gt; 
&gt; What is the functionality in Shell::GetEnv which improves upon this?
&gt; 
&gt; Shell::GetEnv seems too specialized for this purpose, but if there is
&gt; a common core of functionality that can get split out, I&#39;m all for it.
&gt; 
&gt; You have quite correctly pointed out that Shell::GetEnv does not
&gt; return the shell&#39;s status after the commands have been run.  I&#39;ll
&gt; incorporate that &#40;based upon your code and tests&#41;.
&gt; 
&gt; Thanks again for your contribution, and again, my sincerest apologies
&gt; for having overlooked this.  I appreciate the effort involved.
&gt; 
&gt; Diab
</div>

I&#39;ve incorporated the gist of your patch into version 0.08_03 which I&#39;ve just uploaded to CPAN.

Thanks again,
Diab
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;12&nbsp;22:42:15&nbsp;2016</span>
    <span class="description">MOB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not a batch function, just a function like the builtin system call, but one that wraps Shell::GetEnv so that the system call could affect your local Perl environment. That way you could run something like

    $ENV{foo}=bar;
    system&#40;&#34;export foo=baz&#34;&#41;;
    print $ENV{foo};

and the output would be &#39;baz&#39;. Or you could say

    system&#40;&#34;source my_vars.sh&#34;&#41;;
    system&#40;&#34;./my_script.sh&#34;&#41;;

and all the environment changes that you specify in &#39;my_vars.sh&#39; would be visible in the subshell that runs &#39;my_script.sh&#39;. I think these changes will make it possible to do this.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;10:27:36&nbsp;2016</span>
    <span class="description">djerius [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve incorporated your suggestions into version 0.09.  Please let me know if this doesn&#39;t do what you would like.

Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;10:27:36&nbsp;2016</span>
    <span class="description">djerius [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;26&nbsp;10:27:41&nbsp;2016</span>
    <span class="description">djerius [...] cpan.org -  Fixed in 0.09 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
