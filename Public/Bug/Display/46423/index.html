<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46423 for Net-Twitter-OAuth: Status updates fail when &#39;wide&#39; characters are used</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46423 for Net-Twitter-OAuth: Status updates fail when &#39;wide&#39; characters are used</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-Twitter-OAuth/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-Twitter-OAuth/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-Twitter-OAuth/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-Twitter-OAuth/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-Twitter-OAuth">Net-Twitter-OAuth CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46423</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-Twitter-OAuth/Active/">Net-Twitter-OAuth</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MMIMS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
chris [...] oak-wood.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-227430-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.05    </td>
  </tr>
  <tr id="CF-227431-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;27&nbsp;16:57:32&nbsp;2009</span>
    <span class="description">chris [...] oak-wood.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Status updates fail when &#39;wide&#39; characters are used</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When a status update is posted that includes &#39;wide&#39; characters,
authorisation fails. The following exception is thrown:

post on
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243456768&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#38;oauth_signature=QYLE3Zzml2ZYY77wMPgAHcBXM1w%3D&#38;oauth_nonce=2610890340&#38;oauth_token=42584122-14QBiEvv7kY0C1UYBAj3hW9sKXyAFEJGlXr3u66ib&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243456768&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#38;oauth_signature=QYLE3Zzml2ZYY77wMPgAHcBXM1w%3D&#38;oauth_nonce=2610890340&#38;oauth_token=42584122-14QBiEvv7kY0C1UYBAj3hW9sKXyAFEJGlXr3u66ib&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
failed: 401 Unauthorized at
/usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567

Twitter is returning &#34;Failed to validate oauth signature or token&#34;.

I&#39;m guessing this may be because the post is signed before it is URL
encoded.

Perl v5.8.8 built for amd64-freebsd
Net::Twitter::OAuth 0.5
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;27&nbsp;18:19:28&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 May 2009 15:19:09 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Good catch, but the module &#40;Net::OAuth::Message&#41; gets those parameters
and then encode them using URI::uri_escape_utf8 so it actually should
work against those wide characters as well.

How do you pass those characters, in UTF8 encoded bytes, or decoded strings?

On Wed, May 27, 2009 at 1:57 PM, Chris Hastie via RT
&lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed May 27 16:57:32 2009: Request 46423 was acted upon.
&gt; Transaction: Ticket created by tipichris
&gt;       Queue: Net-Twitter-OAuth
&gt;     Subject: Status updates fail when &#39;wide&#39; characters are used
&gt;   Broken in: 0.05
&gt;    Severity: Important
&gt;       Owner: Nobody
&gt;  Requestors: chris@oak-wood.co.uk
&gt;      Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46423">https://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt;
&gt;
&gt; When a status update is posted that includes &#39;wide&#39; characters,
&gt; authorisation fails. The following exception is thrown:
&gt;
&gt; post on
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243456768&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#38;oauth_signature=QYLE3Zzml2ZYY77wMPgAHcBXM1w%3D&#38;oauth_nonce=2610890340&#38;oauth_token=42584122-14QBiEvv7kY0C1UYBAj3hW9sKXyAFEJGlXr3u66ib&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243456768&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#38;oauth_signature=QYLE3Zzml2ZYY77wMPgAHcBXM1w%3D&#38;oauth_nonce=2610890340&#38;oauth_token=42584122-14QBiEvv7kY0C1UYBAj3hW9sKXyAFEJGlXr3u66ib&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
&gt; failed: 401 Unauthorized at
&gt; /usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567
&gt;
&gt; Twitter is returning &#34;Failed to validate oauth signature or token&#34;.
&gt;
&gt; I&#39;m guessing this may be because the post is signed before it is URL
&gt; encoded.
&gt;
&gt; Perl v5.8.8 built for amd64-freebsd
&gt; Net::Twitter::OAuth 0.5
&gt;
</div>


-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;27&nbsp;18:19:29&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;27&nbsp;18:24:21&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 May 2009 15:24:05 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When a status update is posted that includes &#39;wide&#39; characters,
&gt; authorisation fails. The following exception is thrown:
&gt;
&gt; post on
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243456768&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#38;oauth_signature=QYLE3Zzml2ZYY77wMPgAHcBXM1w%3D&#38;oauth_nonce=2610890340&#38;oauth_token=42584122-14QBiEvv7kY0C1UYBAj3hW9sKXyAFEJGlXr3u66ib&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243456768&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#38;oauth_signature=QYLE3Zzml2ZYY77wMPgAHcBXM1w%3D&#38;oauth_nonce=2610890340&#38;oauth_token=42584122-14QBiEvv7kY0C1UYBAj3hW9sKXyAFEJGlXr3u66ib&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
&gt; failed: 401 Unauthorized at
&gt; /usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567
</div>
Actually, your status message is encoded like this:

 Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#38;oauth_signature=

Looks at those %C3 and %C2 in the head: they&#39;re double-encoded to
UTF-8 assuming it was originally latin-1.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; print uri_unescape &#34;Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#34;
</div>Another+test+status+4+é¦é½å

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; print Encode::decode_utf8 uri_unescape &#34;Another+test+status+4+%C3%A9%C2%A6%C2%96%C3%A9%C2%83%C2%BD%C3%A5%C2%9C%C2%8F&#34;
</div>Another+test+status+4+首都圏

Can you try passing them as a decoded strings rather than UTF-8 bytes?
I&#39;m not sure if Net::Twitter itself barfs on it with un-encoded
strings though: my guess is it should just work.


-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;27&nbsp;18:33:16&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 27 May 2009 15:32:48 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, decoding strings before passing to -&gt;update just worked:
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1940376104">http://twitter.com/miyagawa/status/1940376104</a></span>

May 27, 2009 at 3:24 PM, Tatsuhiko Miyagawa &lt;miyagawa@gmail.com&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you try passing them as a decoded strings rather than UTF-8 bytes?
&gt; I&#39;m not sure if Net::Twitter itself barfs on it with un-encoded
&gt; strings though: my guess is it should just work.
</div>
-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;04:13:13&nbsp;2009</span>
    <span class="description">chris [...] oak-wood.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed May 27 18:33:16 2009, miyagawa@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, decoding strings before passing to -&gt;update just worked:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1940376104">http://twitter.com/miyagawa/status/1940376104</a></span>
&gt; 
&gt; May 27, 2009 at 3:24 PM, Tatsuhiko Miyagawa &lt;miyagawa@gmail.com&gt; wrote:
<div class="message-stanza open">&gt; &gt; Can you try passing them as a decoded strings rather than UTF-8 bytes?
&gt; &gt; I&#39;m not sure if Net::Twitter itself barfs on it with un-encoded
&gt; &gt; strings though: my guess is it should just work.
</div>&gt; 
</div>
I originally started by encoding to UTF-8 because that is the way I have
successfully used Net::Twitter

$status = &#34;A test status 6 £&#34;;
$status = encode&#40;&#39;UTF-8&#39;, $status&#41;;
$twitresult = $twit-&gt;update&#40;{status =&gt; $status}&#41;;

which gives
post on
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243497296&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C3%82%C2%A3&#38;oauth_signature=oZi6fe%2BTDK0G2L68v8neNzlJqwI%3D&#38;oauth_nonce=425647448&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243497296&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C3%82%C2%A3&#38;oauth_signature=oZi6fe%2BTDK0G2L68v8neNzlJqwI%3D&#38;oauth_nonce=425647448&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
failed: 401 Unauthorized at
/usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.

removing the &#39;encode&#39;

$status = &#34;A test status 6 £&#34;;
# $status = encode&#40;&#39;UTF-8&#39;, $status&#41;;
$twitresult = $twit-&gt;update&#40;{status =&gt; $status}&#41;;

gives

<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243497345&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C2%A3&#38;oauth_signature=yKA%2FIoIz1eI3o%2Fgo3%2BZfkyEVDWM%3D&#38;oauth_nonce=2803819267&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243497345&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C2%A3&#38;oauth_signature=yKA%2FIoIz1eI3o%2Fgo3%2BZfkyEVDWM%3D&#38;oauth_nonce=2803819267&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
failed: 401 Unauthorized at
/usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.

whilst 
$status = &#34;A test status 6 £&#34;;
$status = decode&#40;&#39;utf8&#39;, $status&#41;;
$twitresult = $twit-&gt;update&#40;{status =&gt; $status}&#41;;

gives
post on
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243498290&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=lrXbVsk3YE4VMVHtKEP2n7qlp20%3D&#38;oauth_nonce=1775320411&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243498290&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=lrXbVsk3YE4VMVHtKEP2n7qlp20%3D&#38;oauth_nonce=1775320411&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
failed: 401 Unauthorized at
/usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.

Loosing the &#39;£&#39; works fine.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;04:29:20&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 01:29:00 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Does your script have &#34;use utf8&#34; in the head? If not, do that, and try
utf8::upgrade&#40;$status&#41; since URI::Escape::uri_escape_utf8&#40;&#41; would
probably encodes it as latin-1.


On Thu, May 28, 2009 at 1:13 AM, Chris Hastie via RT
&lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Net-Twitter-OAuth
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46423">https://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt;
&gt; On Wed May 27 18:33:16 2009, miyagawa@gmail.com wrote:
<div class="message-stanza open">&gt;&gt; Yes, decoding strings before passing to -&gt;update just worked:
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1940376104">http://twitter.com/miyagawa/status/1940376104</a></span>
&gt;&gt;
&gt;&gt; May 27, 2009 at 3:24 PM, Tatsuhiko Miyagawa &lt;miyagawa@gmail.com&gt; wrote:
<div class="message-stanza open">&gt;&gt; &gt; Can you try passing them as a decoded strings rather than UTF-8 bytes?
&gt;&gt; &gt; I&#39;m not sure if Net::Twitter itself barfs on it with un-encoded
&gt;&gt; &gt; strings though: my guess is it should just work.
</div>&gt;&gt;
</div>&gt;
&gt; I originally started by encoding to UTF-8 because that is the way I have
&gt; successfully used Net::Twitter
&gt;
&gt; $status = &#34;A test status 6 £&#34;;
&gt; $status = encode&#40;&#39;UTF-8&#39;, $status&#41;;
&gt; $twitresult = $twit-&gt;update&#40;{status =&gt; $status}&#41;;
&gt;
&gt; which gives
&gt; post on
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243497296&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C3%82%C2%A3&#38;oauth_signature=oZi6fe%2BTDK0G2L68v8neNzlJqwI%3D&#38;oauth_nonce=425647448&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243497296&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C3%82%C2%A3&#38;oauth_signature=oZi6fe%2BTDK0G2L68v8neNzlJqwI%3D&#38;oauth_nonce=425647448&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
&gt; failed: 401 Unauthorized at
&gt; /usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.
&gt;
&gt; removing the &#39;encode&#39;
&gt;
&gt; $status = &#34;A test status 6 £&#34;;
&gt; # $status = encode&#40;&#39;UTF-8&#39;, $status&#41;;
&gt; $twitresult = $twit-&gt;update&#40;{status =&gt; $status}&#41;;
&gt;
&gt; gives
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243497345&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C2%A3&#38;oauth_signature=yKA%2FIoIz1eI3o%2Fgo3%2BZfkyEVDWM%3D&#38;oauth_nonce=2803819267&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243497345&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%C2%A3&#38;oauth_signature=yKA%2FIoIz1eI3o%2Fgo3%2BZfkyEVDWM%3D&#38;oauth_nonce=2803819267&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
&gt; failed: 401 Unauthorized at
&gt; /usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.
&gt;
&gt; whilst
&gt; $status = &#34;A test status 6 £&#34;;
&gt; $status = decode&#40;&#39;utf8&#39;, $status&#41;;
&gt; $twitresult = $twit-&gt;update&#40;{status =&gt; $status}&#41;;
&gt;
&gt; gives
&gt; post on
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243498290&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=lrXbVsk3YE4VMVHtKEP2n7qlp20%3D&#38;oauth_nonce=1775320411&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243498290&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=lrXbVsk3YE4VMVHtKEP2n7qlp20%3D&#38;oauth_nonce=1775320411&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
&gt; failed: 401 Unauthorized at
&gt; /usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.
&gt;
&gt; Loosing the &#39;£&#39; works fine.
&gt;
&gt;
</div>


-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;04:41:28&nbsp;2009</span>
    <span class="description">chris [...] oak-wood.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu May 28 04:29:20 2009, miyagawa@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Does your script have &#34;use utf8&#34; in the head? If not, do that, and try
&gt; utf8::upgrade&#40;$status&#41; since URI::Escape::uri_escape_utf8&#40;&#41; would
&gt; probably encodes it as latin-1.
&gt; 
</div>
No joy. Similar to the decode option earlier:

post on
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243499882&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=RDUqpxk4HZWZE31E44mCrOmPWqc%3D&#38;oauth_nonce=1983972719&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243499882&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=RDUqpxk4HZWZE31E44mCrOmPWqc%3D&#38;oauth_nonce=1983972719&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
failed: 401 Unauthorized at
/usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.

It&#39;s worth pointing out the &#39;£&#39; was only an example. The characters in
the original post certainly wouldn&#39;t have been latin-1: 首都圏
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;04:52:02&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 01:51:45 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, May 28, 2009 at 1:41 AM, Chris Hastie via RT
&lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; No joy. Similar to the decode option earlier:
&gt;
&gt; post on
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/statuses/update.json?oauth_timestamp=1243499882&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=RDUqpxk4HZWZE31E44mCrOmPWqc%3D&#38;oauth_nonce=1983972719&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1">http://twitter.com/statuses/update.json?oauth_timestamp=1243499882&#38;oauth_consumer_key=QZ2pIVQF2G6JllVkOFTPw&#38;status=A+test+status+6+%A3&#38;oauth_signature=RDUqpxk4HZWZE31E44mCrOmPWqc%3D&#38;oauth_nonce=1983972719&#38;oauth_token=36725782-Lgb3nAJIm8fo6gd2Evf6qdcmT9zNFOyjNnSWhbMOu&#38;oauth_version=1.0&#38;oauth_signature_method=HMAC-SHA1</a></span>
&gt; failed: 401 Unauthorized at
&gt; /usr/local/lib/perl5/site_perl/5.8.8/Net/OAuth/Simple.pm line 567.
&gt;
&gt; It&#39;s worth pointing out the &#39;£&#39; was only an example. The characters in
&gt; the original post certainly wouldn&#39;t have been latin-1: 首都圏
</div>
Do they also fail? I see £ is differnent from 首都圏 because £ is now
encoded in %A3 &#40;as latin-1&#41; instead of %C2%A3, its UTF-8
representation.

Anyway, try eg/tweet-hello.pl &#40;the latest from github&#41; on UTF-8 aware console:
Works for me: <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1945384384">http://twitter.com/miyagawa/status/1945384384</a></span>



<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1945384384">http://twitter.com/miyagawa/status/1945384384</a></span>



-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;16:10:19&nbsp;2009</span>
    <span class="description">chris [...] oak-wood.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 21:09:59 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Hastie &lt;chris [...] oak-wood.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 28/05/09 09:52, miyagawa@gmail.com via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; It&#39;s worth pointing out the &#39;£&#39; was only an example. The characters in
&gt;&gt; the original post certainly wouldn&#39;t have been latin-1: 首都圏
</div>&gt; 
&gt; Do they also fail? I see £ is differnent from 首都圏 because £ is now
&gt; encoded in %A3 &#40;as latin-1&#41; instead of %C2%A3, its UTF-8
&gt; representation.
</div>
Yes. I&#39;ve also tried getting characters in a way more allied to how they
are likely to turn up in the app for real:

$status = HTML::Entities::decode&#40;&#34;A test status 6
&#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyway, try eg/tweet-hello.pl &#40;the latest from github&#41; on UTF-8 aware console:
&gt; Works for me: <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1945384384">http://twitter.com/miyagawa/status/1945384384</a></span>
</div>
The place I looked at github appears to be empty. Am I missing something?
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/miyagawa/net-twitter-oauth/tree/master">http://github.com/miyagawa/net-twitter-oauth/tree/master</a></span>

BTW, the other side of me trying to fathom this out is at
<span class="clickylink"><a target="new" rel="nofollow" href="http://code.google.com/p/twitter-api/issues/detail?id=624">http://code.google.com/p/twitter-api/issues/detail?id=624</a></span>

Thanks for your help.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;16:26:19&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 13:26:01 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">For the fuck&#39;s sake Github broke repos with mixed case. I guess you
can still check it with
git://github.com/miyagawa/net-twitter-oauth.git

On Thu, May 28, 2009 at 1:10 PM, Chris Hastie via RT
&lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Net-Twitter-OAuth
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46423">http://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt;
&gt; On 28/05/09 09:52, miyagawa@gmail.com via RT wrote:
&gt;
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; It&#39;s worth pointing out the &#39;£&#39; was only an example. The characters in
&gt;&gt;&gt; the original post certainly wouldn&#39;t have been latin-1: 首都圏
</div>&gt;&gt;
&gt;&gt; Do they also fail? I see £ is differnent from 首都圏 because £ is now
&gt;&gt; encoded in %A3 &#40;as latin-1&#41; instead of %C2%A3, its UTF-8
&gt;&gt; representation.
</div>&gt;
&gt; Yes. I&#39;ve also tried getting characters in a way more allied to how they
&gt; are likely to turn up in the app for real:
&gt;
&gt; $status = HTML::Entities::decode&#40;&#34;A test status 6
&gt; &#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;
&gt;
&gt;
<div class="message-stanza open">&gt;&gt; Anyway, try eg/tweet-hello.pl &#40;the latest from github&#41; on UTF-8 aware console:
&gt;&gt; Works for me: <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1945384384">http://twitter.com/miyagawa/status/1945384384</a></span>
</div>&gt;
&gt; The place I looked at github appears to be empty. Am I missing something?
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/miyagawa/net-twitter-oauth/tree/master">http://github.com/miyagawa/net-twitter-oauth/tree/master</a></span>
&gt;
&gt; BTW, the other side of me trying to fathom this out is at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://code.google.com/p/twitter-api/issues/detail?id=624">http://code.google.com/p/twitter-api/issues/detail?id=624</a></span>
&gt;
&gt; Thanks for your help.
&gt;
&gt;
&gt;
</div>


-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;16:32:30&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 13:32:12 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">wanted to push the new version to CPAN and PAUSE is down, so here&#39;s
the full copy:

#!/usr/bin/perl
use strict;
use FindBin;
use lib &#34;$FindBin::Bin/../lib&#34;;

use Net::Twitter::OAuth;

my $client = Net::Twitter::OAuth-&gt;new&#40;
    consumer_key =&gt; $ENV{TWITTER_CONSUMER_KEY},
    consumer_secret =&gt; $ENV{TWITTER_CONSUMER_SECRET},
&#41;;

unless &#40;$client-&gt;oauth-&gt;authorized&#41; {
    # The client is not yet authorized: Do it now
    print &#34;Authorize this app at &#34;,
$client-&gt;oauth-&gt;get_authorization_url, &#34; and hit RET\n&#34;;
    system &#34;open&#34;, $client-&gt;oauth-&gt;get_authorization_url;

    &lt;STDIN&gt;; # wait for input
    $client-&gt;oauth-&gt;request_access_token;
}

binmode STDOUT, &#34;:utf8&#34;;

my $tweets = $client-&gt;friends_timeline;
for my $tweet &#40;@$tweets&#41; {
    printf &#34;%s: %s &#40;%s&#41;\n&#34;, $tweet-&gt;{user}{name}, $tweet-&gt;{text},
$tweet-&gt;{created_at};
}

print &#34;\nSomething to say: &#34;;
binmode STDIN, &#34;:encoding&#40;utf-8&#41;&#34;;
chomp&#40;my $tweet = &lt;STDIN&gt;&#41;;
my $res = $client-&gt;update&#40;{ status =&gt; $tweet }&#41;;
print &#34;Tweeted:
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/$res-">http://twitter.com/$res-</a></span>&gt;{user}{screen_name}/status/$res-&gt;{id}\n&#34;;




2009/5/28 Tatsuhiko Miyagawa &lt;miyagawa@gmail.com&gt;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For the fuck&#39;s sake Github broke repos with mixed case. I guess you
&gt; can still check it with
&gt; git://github.com/miyagawa/net-twitter-oauth.git
&gt;
&gt; On Thu, May 28, 2009 at 1:10 PM, Chris Hastie via RT
&gt; &lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;&gt;       Queue: Net-Twitter-OAuth
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46423">http://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt;&gt;
&gt;&gt; On 28/05/09 09:52, miyagawa@gmail.com via RT wrote:
&gt;&gt;
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; It&#39;s worth pointing out the &#39;£&#39; was only an example. The characters in
&gt;&gt;&gt;&gt; the original post certainly wouldn&#39;t have been latin-1: 首都圏
</div>&gt;&gt;&gt;
&gt;&gt;&gt; Do they also fail? I see £ is differnent from 首都圏 because £ is now
&gt;&gt;&gt; encoded in %A3 &#40;as latin-1&#41; instead of %C2%A3, its UTF-8
&gt;&gt;&gt; representation.
</div>&gt;&gt;
&gt;&gt; Yes. I&#39;ve also tried getting characters in a way more allied to how they
&gt;&gt; are likely to turn up in the app for real:
&gt;&gt;
&gt;&gt; $status = HTML::Entities::decode&#40;&#34;A test status 6
&gt;&gt; &#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;
&gt;&gt;
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; Anyway, try eg/tweet-hello.pl &#40;the latest from github&#41; on UTF-8 aware console:
&gt;&gt;&gt; Works for me: <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1945384384">http://twitter.com/miyagawa/status/1945384384</a></span>
</div>&gt;&gt;
&gt;&gt; The place I looked at github appears to be empty. Am I missing something?
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/miyagawa/net-twitter-oauth/tree/master">http://github.com/miyagawa/net-twitter-oauth/tree/master</a></span>
&gt;&gt;
&gt;&gt; BTW, the other side of me trying to fathom this out is at
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://code.google.com/p/twitter-api/issues/detail?id=624">http://code.google.com/p/twitter-api/issues/detail?id=624</a></span>
&gt;&gt;
&gt;&gt; Thanks for your help.
&gt;&gt;
&gt;&gt;
&gt;&gt;
</div>&gt;
&gt;
&gt;
&gt; --
&gt; Tatsuhiko Miyagawa
&gt;
</div>


-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;16:35:43&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 13:35:17 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, May 28, 2009 at 1:10 PM, Chris Hastie via RT
&lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Yes. I&#39;ve also tried getting characters in a way more allied to how they
&gt; are likely to turn up in the app for real:
&gt;
&gt; $status = HTML::Entities::decode&#40;&#34;A test status 6
&gt; &#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;
</div>
Works fine for me &#40;assuming they&#39;re Korean Hangul characters&#41;:
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1951462759">http://twitter.com/miyagawa/status/1951462759</a></span>

Here&#39;s the full code:
#!/usr/bin/perl
use strict;
use FindBin;
use lib &#34;$FindBin::Bin/../lib&#34;;
use HTML::Entities;
use Net::Twitter::OAuth;

my $client = Net::Twitter::OAuth-&gt;new&#40;
    consumer_key =&gt; $ENV{TWITTER_CONSUMER_KEY},
    consumer_secret =&gt; $ENV{TWITTER_CONSUMER_SECRET},
&#41;;

# The client is not yet authorized: Do it now
print &#34;Authorize this app at &#34;, $client-&gt;oauth-&gt;get_authorization_url,
&#34; and hit RET\n&#34;;
system &#34;open&#34;, $client-&gt;oauth-&gt;get_authorization_url;

&lt;STDIN&gt;; # wait for input
$client-&gt;oauth-&gt;request_access_token;

my $tweet = HTML::Entities::decode&#40;&#34;A test status 6&#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;
my $res = $client-&gt;update&#40;{ status =&gt; $tweet }&#41;;

print &#34;Tweeted:
<span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/$res-">http://twitter.com/$res-</a></span>&gt;{user}{screen_name}/status/$res-&gt;{id}\n&#34;;





-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;17:36:51&nbsp;2009</span>
    <span class="description">chris [...] oak-wood.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 22:36:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Hastie &lt;chris [...] oak-wood.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 28/05/09 21:35, miyagawa@gmail.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46423">https://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt; 
&gt; On Thu, May 28, 2009 at 1:10 PM, Chris Hastie via RT
&gt; &lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;&gt; Yes. I&#39;ve also tried getting characters in a way more allied to how they
&gt;&gt; are likely to turn up in the app for real:
&gt;&gt;
&gt;&gt; $status = HTML::Entities::decode&#40;&#34;A test status 6
&gt;&gt; &#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;
</div>&gt; 
&gt; Works fine for me &#40;assuming they&#39;re Korean Hangul characters&#41;:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1951462759">http://twitter.com/miyagawa/status/1951462759</a></span>
</div>
Ho hum, seems like our mileage differs, as they say.

I have managed to get things to work with this patch to Net/OAuth/Message.pm

--- Message.pm.orig     Thu May 28 20:27:21 2009
+++ Message.pm  Thu May 28 20:27:32 2009
@@ -86,7 +86,7 @@
 sub encode {
     my $str = shift;
     $str = &#34;&#34; unless defined $str;
-    return URI::Escape::uri_escape_utf8&#40;$str,&#39;^\w.~-&#39;&#41;;
+    return URI::Escape::uri_escape&#40;$str,&#39;^\w.~-&#39;&#41;;
 }

 sub decode {


With this applied, I need to do an encode&#40;&#39;UTF-8&#39;, $status&#41; to get
things to work. I&#39;ve tried various things, encoding or not, patched or
not, and watched the value of $request_url being hit in
Net::OAuth::Simple::_make_request, and the value of
$request-&gt;signature_base_string

Here&#39;s a summary - I&#39;ve only included the relevant parts

Works: patched, encoded
status=A+test+status+6+%EA%B8%B0%EB%9F%AC%EA%B8%B0
%26status%3DA%2520test%2520status%25206%2520%25EA%25B8%25B0%25EB%259F%25AC%25EA%25B8%25B0

Unpatched, unencoded
&#38;status=A+test+status+6+
%26status%3DA%2520test%2520status%25206%2520%25EA%25B8%25B0%25EB%259F%25AC%25EA%25B8%25B0

Unpatched, encoded
&#38;status=A+test+status+6+%EA%B8%B0%EB%9F%AC%EA%B8%B0
%26status%3DA%2520test%2520status%25206%2520%25C3%25AA%25C2%25B8%25C2%25B0%25C3%25AB%25C2%259F%25C2%25AC%25C3%25AA%25C2%25B8%25C2%25B0

You&#39;ll see that compared to what eventually worked, on an unpatched code
I get the right signature_base_string if I don&#39;t encode, but the
request_url has the wide characters stripped. To get the request URL
right I have to encode, but that does something odd to
signature_base_string.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;28&nbsp;18:03:06&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 May 2009 15:02:47 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, May 28, 2009 at 2:36 PM, Chris Hastie via RT
&lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; $status = HTML::Entities::decode&#40;&#34;A test status 6
&gt;&gt;&gt; &#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;
</div>&gt;&gt;
&gt;&gt; Works fine for me &#40;assuming they&#39;re Korean Hangul characters&#41;:
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1951462759">http://twitter.com/miyagawa/status/1951462759</a></span>
</div>&gt;
&gt; Ho hum, seems like our mileage differs, as they say.
&gt;
&gt; I have managed to get things to work with this patch to Net/OAuth/Message.pm
</div>
I guess we should probably make sure we use the same versions
&#40;unpatched&#41; in the tool chain.

I&#39;m using perl 5.8.8 on OSX with these modules:

strict 1.03
FindBin 1.47
Carp 1.04
Exporter 5.58
Cwd 3.3
vars 1.01
warnings::register 1.01
warnings 1.05
XSLoader 0.06
Config &#40;undefined&#41;
File::Basename 2.74
re 0.05
File::Spec 3.3
File::Spec::Unix 3.3
lib 0.5565
base 2.07
Net::Twitter 2.12
URI::Escape 3.29
JSON::Any 1.19
constant 1.05
JSON::XS 2.232
overload 1.04
attributes 0.06
LWP::UserAgent 5.826
HTTP::Request 5.818
HTTP::Message 5.826
HTTP::Headers 5.822
Storable 2.18
AutoLoader 5.68
FileHandle 2.01
IO::File 1.14
Symbol 1.06
SelectSaver 1.01
IO::Seekable 1.1
IO::Handle 1.27
IO 1.23
Fcntl 1.05
Exporter::Heavy 5.58
DynaLoader 1.05
Log::Agent &#40;undefined&#41;
URI 1.37
HTTP::Response 5.824
HTTP::Status 5.817
HTTP::Date 5.810
Time::Local 1.11
integer 1.00
LWP 5.826
LWP::Protocol 5.826
LWP::MemberMixin &#40;undefined&#41;
Net::OAuth::Simple 1.1
CGI 3.43
CGI::Util 1.5_01
Math::Random::MT &#40;undefined&#41;
Data::Dumper 2.121_08
bytes 1.02
Net::OAuth::Request 0.14
Net::OAuth::Message -1, set by base.pm
Class::Data::Inheritable 0.08
Class::Accessor 0.33
Sub::Name 0.04
UNIVERSAL::require 0.13
UNIVERSAL 1.01
Net::OAuth::RequestTokenRequest &#40;undefined&#41;
Net::OAuth::AccessTokenRequest -1, set by base.pm
Net::OAuth::ProtectedResourceRequest &#40;undefined&#41;
HTTP::Config 5.815
URI::http &#40;undefined&#41;
URI::_server &#40;undefined&#41;
URI::_generic &#40;undefined&#41;
URI::_query &#40;undefined&#41;
Net::OAuth::SignatureMethod::HMAC_SHA1 &#40;undefined&#41;
Digest::HMAC_SHA1 1.01
Digest::SHA1 2.12
Digest::base 1.00
Digest::HMAC 1.01
MIME::Base64 3.07
HTTP::Request::Common 5.824
LWP::Protocol::http &#40;undefined&#41;
Errno 1.0901
Net::HTTP 5.819
IO::Socket::INET 1.31
IO::Socket 1.30
Socket 1.78
IO::Socket::UNIX 1.23
Net::HTTP::Methods 5.824
IO::Select 1.17
Compress::Zlib 2.019
Scalar::Util 1.21
List::Util 1.21
IO::Compress::Base::Common 2.019
File::GlobMapper 1.000
File::Glob 1.05
utf8 1.06
Compress::Raw::Zlib 2.019
IO::Compress::Gzip 2.019
IO::Compress::RawDeflate 2.019
IO::Compress::Base 2.019
IO::Compress::Adapter::Deflate 2.019
IO::Compress::Gzip::Constants 2.019
IO::Compress::Zlib::Extra 2.019
IO::Uncompress::Gunzip 2.019
IO::Uncompress::RawInflate 2.019
IO::Uncompress::Base 2.019
IO::Uncompress::Adapter::Inflate 2.019
HTML::HeadParser 3.60
HTML::Entities 3.60
HTML::Parser 3.60


I got this output with this <span class="clickylink"><a target="new" rel="nofollow" href="http://gist.github.com/119608">http://gist.github.com/119608</a></span> saved as
Versions.pm and run the script with perl -MVersions


-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;15:11:02&nbsp;2009</span>
    <span class="description">chris [...] oak-wood.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 03 Jun 2009 20:10:37 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Hastie &lt;chris [...] oak-wood.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 28/05/09 23:03, miyagawa@gmail.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46423">https://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt; 
&gt; On Thu, May 28, 2009 at 2:36 PM, Chris Hastie via RT
&gt; &lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; $status = HTML::Entities::decode&#40;&#34;A test status 6
&gt;&gt;&gt;&gt; &#38;#44592;&#38;#47084;&#38;#44592;&#34;&#41;;
</div>&gt;&gt;&gt; Works fine for me &#40;assuming they&#39;re Korean Hangul characters&#41;:
&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1951462759">http://twitter.com/miyagawa/status/1951462759</a></span>
</div>&gt;&gt; Ho hum, seems like our mileage differs, as they say.
&gt;&gt;
&gt;&gt; I have managed to get things to work with this patch to Net/OAuth/Message.pm
</div>&gt; 
&gt; I guess we should probably make sure we use the same versions
&gt; &#40;unpatched&#41; in the tool chain.
</div>
OK, sorry for the delay responding.

FreeBSD 6.2-RELEASE amd64
perl, v5.8.8 built for amd64-freebsd

HTML::Entities 1.35
strict 1.03
vars 1.01
warnings::register 1.01
warnings 1.05
Carp 1.04
Exporter 5.58
HTML::Parser 3.56
XSLoader 0.06
Encode 2.26
base 2.07
Encode::Alias 2.10
bytes 1.02
Encode::Config 2.05
Encode::ConfigLocal &#40;undefined&#41;
Encode::Encoding 2.05
Net::Twitter::OAuth 0.05
Net::Twitter 2.12
URI::Escape 3.28
JSON::Any 1.19
constant 1.05
JSON::XS &#40;undefined&#41;
JSON 2.14
overload 1.04
JSON::XS &#40;undefined&#41;
JSON::PP 2.22010
B 1.09_01
JSON::PP58 1.02
Scalar::Util 1.19
List::Util 1.19
LWP::UserAgent 2.036
HTTP::Request 1.40
HTTP::Message 1.57
HTTP::Headers 1.64
URI 1.35
HTTP::Response 1.53
HTTP::Status 1.28
HTTP::Date 1.47
Time::Local 1.17
Config &#40;undefined&#41;
BSDPAN &#40;undefined&#41;
BSDPAN::Override &#40;undefined&#41;
Config &#40;undefined&#41;
Exporter::Heavy 5.58
integer 1.00
LWP 5.808
LWP::Debug &#40;undefined&#41;
LWP::Protocol 1.46
LWP::MemberMixin &#40;undefined&#41;
Net::OAuth::Simple 1.1
CGI 3.37
CGI::Util 1.5_01
Math::Random::MT &#40;undefined&#41;
Data::Dumper 2.121_08
Net::OAuth::Request 0.14
Net::OAuth::Message -1, set by base.pm
Class::Data::Inheritable 0.08
Class::Accessor 0.33
Sub::Name &#40;undefined&#41;
UNIVERSAL::require 0.13
UNIVERSAL 1.01
Net::OAuth::RequestTokenRequest &#40;undefined&#41;
Net::OAuth::AccessTokenRequest -1, set by base.pm
Net::OAuth::ProtectedResourceRequest &#40;undefined&#41;
Net::Twitter::OAuth::UserAgent &#40;undefined&#41;
URI::http &#40;undefined&#41;
URI::_server &#40;undefined&#41;
URI::_generic &#40;undefined&#41;
URI::_query &#40;undefined&#41;
Net::OAuth::SignatureMethod::HMAC_SHA1 &#40;undefined&#41;
Digest::HMAC_SHA1 1.01
Digest::SHA1 2.11
DynaLoader 1.05
AutoLoader 5.60
Digest::base 1.00
Digest::HMAC 1.01
MIME::Base64 3.07
HTTP::Request::Common 1.28
LWP::Protocol::http &#40;undefined&#41;
Net::HTTP 1.00
IO::Socket::INET 1.29
IO::Socket 1.29
IO::Handle 1.25
Symbol 1.06
SelectSaver 1.01
IO 1.22
Socket 1.78
Errno 1.0901
IO::Socket::UNIX 1.22
Net::HTTP::Methods 1.02
IO::Select 1.17
Compress::Zlib 2.012
IO::Compress::Base::Common 2.012
File::GlobMapper 1.000
File::Glob 1.05
utf8 1.06
Compress::Raw::Zlib 2.012
IO::Compress::Gzip 2.012
IO::Compress::RawDeflate 2.012
IO::Compress::Base 2.012
IO::File 1.13
IO::Seekable 1.1
Fcntl 1.05
File::Spec 3.25
File::Spec::Unix 1.5
IO::Compress::Adapter::Deflate 2.012
IO::Compress::Gzip::Constants 2.012
IO::Compress::Zlib::Extra 2.012
IO::Uncompress::Gunzip 2.012
IO::Uncompress::RawInflate 2.012
IO::Uncompress::Base 2.012
IO::Uncompress::Adapter::Inflate 2.012







-- 
Chris Hastie
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;03&nbsp;15:32:34&nbsp;2009</span>
    <span class="description">miyagawa [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #46423] Status updates fail when &#39;wide&#39; characters  are used</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 3 Jun 2009 12:26:11 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-Twitter-OAuth [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tatsuhiko Miyagawa &lt;miyagawa [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It&#39;s &#34;your&#34; turn to make sure everything&#39;s up-to-date, and while
you&#39;re away we shipped Net::Twitter 3.0 with OAuth roles bundled.

On Wed, Jun 3, 2009 at 12:11 PM, Chris Hastie via RT
&lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Net-Twitter-OAuth
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=46423">http://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt;
&gt; On 28/05/09 23:03, miyagawa@gmail.com via RT wrote:
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=46423">https://rt.cpan.org/Ticket/Display.html?id=46423</a></span> &gt;
&gt;&gt;
&gt;&gt; On Thu, May 28, 2009 at 2:36 PM, Chris Hastie via RT
&gt;&gt; &lt;bug-Net-Twitter-OAuth@rt.cpan.org&gt; wrote:
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; $status = HTML::Entities::decode&#40;&#34;A test status 6
&gt;&gt;&gt;&gt;&gt; &#38;#44592;&#38;#4708O4;&#38;#44592;&#34;&#41;;
</div>&gt;&gt;&gt;&gt; Works fine for me &#40;assuming they&#39;re Korean Hangul characters&#41;:
&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://twitter.com/miyagawa/status/1951462759">http://twitter.com/miyagawa/status/1951462759</a></span>
</div>&gt;&gt;&gt; Ho hum, seems like our mileage differs, as they say.
&gt;&gt;&gt;
&gt;&gt;&gt; I have managed to get things to work with this patch to Net/OAuth/Message.pm
</div>&gt;&gt;
&gt;&gt; I guess we should probably make sure we use the same versions
&gt;&gt; &#40;unpatched&#41; in the tool chain.
</div>&gt;
&gt; OK, sorry for the delay responding.
&gt;
&gt; FreeBSD 6.2-RELEASE amd64
&gt; perl, v5.8.8 built for amd64-freebsd
&gt;
&gt; HTML::Entities 1.35
&gt; strict 1.03
&gt; vars 1.01
&gt; warnings::register 1.01
&gt; warnings 1.05
&gt; Carp 1.04
&gt; Exporter 5.58
&gt; HTML::Parser 3.56
&gt; XSLoader 0.06
&gt; Encode 2.26
&gt; base 2.07
&gt; Encode::Alias 2.10
&gt; bytes 1.02
&gt; Encode::Config 2.05
&gt; Encode::ConfigLocal &#40;undefined&#41;
&gt; Encode::Encoding 2.05
&gt; Net::Twitter::OAuth 0.05
&gt; Net::Twitter 2.12
&gt; URI::Escape 3.28
&gt; JSON::Any 1.19
&gt; constant 1.05
&gt; JSON::XS &#40;undefined&#41;
&gt; JSON 2.14
&gt; overload 1.04
&gt; JSON::XS &#40;undefined&#41;
&gt; JSON::PP 2.22010
&gt; B 1.09_01
&gt; JSON::PP58 1.02
&gt; Scalar::Util 1.19
&gt; List::Util 1.19
&gt; LWP::UserAgent 2.036
&gt; HTTP::Request 1.40
&gt; HTTP::Message 1.57
&gt; HTTP::Headers 1.64
&gt; URI 1.35
&gt; HTTP::Response 1.53
&gt; HTTP::Status 1.28
&gt; HTTP::Date 1.47
&gt; Time::Local 1.17
&gt; Config &#40;undefined&#41;
&gt; BSDPAN &#40;undefined&#41;
&gt; BSDPAN::Override &#40;undefined&#41;
&gt; Config &#40;undefined&#41;
&gt; Exporter::Heavy 5.58
&gt; integer 1.00
&gt; LWP 5.808
&gt; LWP::Debug &#40;undefined&#41;
&gt; LWP::Protocol 1.46
&gt; LWP::MemberMixin &#40;undefined&#41;
&gt; Net::OAuth::Simple 1.1
&gt; CGI 3.37
&gt; CGI::Util 1.5_01
&gt; Math::Random::MT &#40;undefined&#41;
&gt; Data::Dumper 2.121_08
&gt; Net::OAuth::Request 0.14
&gt; Net::OAuth::Message -1, set by base.pm
&gt; Class::Data::Inheritable 0.08
&gt; Class::Accessor 0.33
&gt; Sub::Name &#40;undefined&#41;
&gt; UNIVERSAL::require 0.13
&gt; UNIVERSAL 1.01
&gt; Net::OAuth::RequestTokenRequest &#40;undefined&#41;
&gt; Net::OAuth::AccessTokenRequest -1, set by base.pm
&gt; Net::OAuth::ProtectedResourceRequest &#40;undefined&#41;
&gt; Net::Twitter::OAuth::UserAgent &#40;undefined&#41;
&gt; URI::http &#40;undefined&#41;
&gt; URI::_server &#40;undefined&#41;
&gt; URI::_generic &#40;undefined&#41;
&gt; URI::_query &#40;undefined&#41;
&gt; Net::OAuth::SignatureMethod::HMAC_SHA1 &#40;undefined&#41;
&gt; Digest::HMAC_SHA1 1.01
&gt; Digest::SHA1 2.11
&gt; DynaLoader 1.05
&gt; AutoLoader 5.60
&gt; Digest::base 1.00
&gt; Digest::HMAC 1.01
&gt; MIME::Base64 3.07
&gt; HTTP::Request::Common 1.28
&gt; LWP::Protocol::http &#40;undefined&#41;
&gt; Net::HTTP 1.00
&gt; IO::Socket::INET 1.29
&gt; IO::Socket 1.29
&gt; IO::Handle 1.25
&gt; Symbol 1.06
&gt; SelectSaver 1.01
&gt; IO 1.22
&gt; Socket 1.78
&gt; Errno 1.0901
&gt; IO::Socket::UNIX 1.22
&gt; Net::HTTP::Methods 1.02
&gt; IO::Select 1.17
&gt; Compress::Zlib 2.012
&gt; IO::Compress::Base::Common 2.012
&gt; File::GlobMapper 1.000
&gt; File::Glob 1.05
&gt; utf8 1.06
&gt; Compress::Raw::Zlib 2.012
&gt; IO::Compress::Gzip 2.012
&gt; IO::Compress::RawDeflate 2.012
&gt; IO::Compress::Base 2.012
&gt; IO::File 1.13
&gt; IO::Seekable 1.1
&gt; Fcntl 1.05
&gt; File::Spec 3.25
&gt; File::Spec::Unix 1.5
&gt; IO::Compress::Adapter::Deflate 2.012
&gt; IO::Compress::Gzip::Constants 2.012
&gt; IO::Compress::Zlib::Extra 2.012
&gt; IO::Uncompress::Gunzip 2.012
&gt; IO::Uncompress::RawInflate 2.012
&gt; IO::Uncompress::Base 2.012
&gt; IO::Uncompress::Adapter::Inflate 2.012
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; --
&gt; Chris Hastie
&gt;
&gt;
</div>


-- 
Tatsuhiko Miyagawa
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;09&nbsp;12:06:25&nbsp;2010</span>
    <span class="description">MMIMS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The conversation on this bug ended over a year ago. Net::Twitter has
received a great deal use in the field with wide characters. I think
it&#39;s safe to assume this issue is resolved.

-Marc
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;09&nbsp;12:06:29&nbsp;2010</span>
    <span class="description">MMIMS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;09&nbsp;12:06:29&nbsp;2010</span>
    <span class="description">MMIMS [...] cpan.org -  Given to MMIMS</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
