<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #41311 for XML-Compile: XML::Compile::WSDL11::Operation::compileClient fails to extract response message content, on service that works fine with several other clients</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #41311 for XML-Compile: XML::Compile::WSDL11::Operation::compileClient fails to extract response message content, on service that works fine with several other clients</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-Compile">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-Compile">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-Compile">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-Compile">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-Compile">XML-Compile CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">41311</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-Compile">XML-Compile</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
andrew.clegg.signups [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-40392-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.96    </td>
  </tr>
  <tr id="CF-40393-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




geco_registry_test.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/538636/270476/geco_registry_test.pl">
Sat Nov 29 21:31:09 2008 (3.2k) by andrew.clegg.signups [...] gmail.com
</a>
</font></li>
</ul>


jacop_test.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/538636/270473/jacop_test.pl">
Sat Nov 29 21:31:09 2008 (3.1k) by andrew.clegg.signups [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=41311">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-538636" href="/Public/Bug/Display.html?id=41311#txn-538636">#</a>      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;29&nbsp;21:31:09&nbsp;2008</span>
    <span class="description">andrew.clegg.signups [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> XML::Compile::WSDL11::Operation::compileClient fails to extract
 response message content, on service that works fine with several other
 clients</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/538636/270470/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/270470">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached script jacop_test.pl is a test script for a public-facing
web service.

The service in question returns valid results when queried with SoapUI,
or the Java toolkits Axis2 or CXF. In addition, when we build
client-side proxies for it with the wsdl2perl.pl script in SOAP::WSDL,
it works fine.

However, its output doesn&#39;t seem to be parseable by
XML::Compile::WSDL11::Operation::compileClient&#40;&#41;, as jacop_test.pl will
demonstrate if you run it.

The hash returned by executing the code ref provided by compileClient
has no element called &#39;parameters&#39;, which is the part name defined in
the WSDL and returned by the service. The data dump provided by the
script will verify this.

The service in question is described here:

WSDL: <span class="clickylink"><a target="new" rel="nofollow" href="http://myhits.isb-sib.ch/doc/FuncNet.wsdl">http://myhits.isb-sib.ch/doc/FuncNet.wsdl</a></span>
Service: JacopService
Port: JacopPort
Binding: JacopBinding
Operation: ScorePairwiseRelations

Interestingly, we have several services that use basically the same WSDL
at different sites, which XML::Compile can handle fine. For example:

<span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info:8080/BioMiner-war/services/GecoService?wsdl">http://cathdb.info:8080/BioMiner-war/services/GecoService?wsdl</a></span>
Service: GecoService
Port: GecoPort
Binding: GecoBinding
Operation: ScorePairwiseRelations

I have also attached a script called geco_registry_test.pl which hits
this latter service using the same method as in jacop_test.pl -- only
geco_registry_test.pl works as expected. We have been unable to figure
out what differences between the two services would cause XML::Compile
to fail, especially as they both work with other clients.

Perl version 5.8.6
XML::Compile 0.96
Centos 5 &#40;basically Redhat Enterprise Linux 5&#41;
Linux kernel 2.6.18
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> jacop_test.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/538636/270473/jacop_test.pl">Download jacop_test.pl</a><br />
<span class="downloadcontenttype">text/x-perl 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w

# FuncNet predictor testing tool for EMBRACE registry at <span class="clickylink"><a target="new" rel="nofollow" href="http://embraceregistry.net/">http://embraceregistry.net/</a></span>
#
# Put some query and reference proteins in the $parameters hash.
#
# For each expected prediction, add a $expectedN string containing the query
# protein ID, reference protein ID and p-value, separated by tabs, e.g.:
#
# my $expected1 = &#34;O75865\tP22676\t0.893313&#34;;
#
# Put these in alphabetical order.
#
# See also <span class="clickylink"><a target="new" rel="nofollow" href="http://funcnet.eu/">http://funcnet.eu/</a></span>

use strict;

use Data::Dumper;
use LWP::UserAgent;
use XML::Compile::WSDL11;
use XML::Compile::Transport::SOAPHTTP;
use XML::Compile::Schema;

# Download local copy of WSDL

my $ua = LWP::UserAgent-&gt;new;
my $wsdl_url = &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://myhits.isb-sib.ch/doc/FuncNet.wsdl">http://myhits.isb-sib.ch/doc/FuncNet.wsdl</a></span>&#34;;
my $response = $ua-&gt;get&#40; $wsdl_url &#41;;
unless&#40; $response-&gt;is_success &#41;
{
    warn &#34;Could not retrieve $wsdl_url: &#34;, $response-&gt;status_line, &#34;\n&#34;;
    exit 1;
}

unless&#40; open WSDL, &#34;&gt;jacop_temp.wsdl&#34; &#41;
{
    warn &#34;Could not open temporary local file: $1\n&#34;;
    exit 1;
}

unless&#40; print WSDL $response-&gt;content &#41;
{
    warn &#34;Could not write WSDL to temporary local file: $!\n&#34;;
    exit 1;
}

close WSDL;

# Parse WSDL

my $wsdl = XML::LibXML-&gt;new-&gt;parse_file&#40; &#34;jacop_temp.wsdl&#34; &#41;;

unless&#40; $wsdl &#41;
{
    warn &#34;Attempt to parse WSDL returned null\n&#34;;
    exit 1;
}

# Clean up local temp copy

unlink &#34;jacop_temp.wsdl&#34;;

# Not sure what would happen if two copies of this script ran simultaneously...

print &#34;Retrieved and parsed WSDL OK.\n&#34;;

# Build SOAP proxy object

my $proxy = XML::Compile::WSDL11-&gt;new&#40; $wsdl &#41;;

my @op_defs = $proxy-&gt;operations&#40;&#41;;

my $op   = $proxy-&gt;operation&#40; 
                operation   =&gt; &#39;ScorePairwiseRelations&#39;, 
                port        =&gt; &#34;JacopPort&#34;,
                service     =&gt; &#34;{<span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info/FuncNet_0_1/">http://cathdb.info/FuncNet_0_1/</a></span>}JacopService&#34;,
                binding     =&gt; &#34;{<span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info/FuncNet_0_1/">http://cathdb.info/FuncNet_0_1/</a></span>}JacopBinding&#34;
             &#41;;

my $op_call = $op-&gt;compileClient&#40;&#41;;

# Build request object -- proteins1 is query set, proteins2 is reference set

my $parameters = {
    proteins1 =&gt; { p =&gt; [ &#39;A8K8U9&#39;, &#39;P27797&#39;, &#39;B1B0W0&#39; ] },
    proteins2 =&gt; { p =&gt; [ &#39;O75925&#39;, &#39;P10321&#39;, &#39;P48034&#39; ] } 
};

# Send request

my &#40; $answer, $trace &#41; = $op_call-&gt;&#40; parameters =&gt; $parameters &#41;;

unless&#40; exists&#40; $answer-&gt;{ parameters } &#41; &#41;
{
    warn &#34;No parameters element found! Trace:\n&#34;, Dumper&#40; $trace &#41;, &#34;\nAnswer:\n&#34;, Dumper&#40; $answer &#41;, &#34;\n&#34;;
    exit 1;
}

print &#34;Prot 1\tProt 2\tP-value\n&#34;;

my @lines;

foreach my $result &#40; @{ $answer-&gt;{ parameters }-&gt;{ s } } &#41;
{
    my $line = $result-&gt;{ p1 } . &#34;\t&#34; . $result-&gt;{ p2 } . &#34;\t&#34; . $result-&gt;{ pv };
    print $line . &#34;\n&#34;;
    push @lines, $line;
}

if&#40; @lines != 2 &#41;
{
    warn &#34;Expected 2 results in output, got &#34; . scalar&#40; @lines &#41; . &#34;\n&#34;;
    exit 2;
}

# Predictions expected for this request -- make sure these are in alphabetical order

my $expected1 = &#34;A8K8U9\tO75925\t0.843698&#34;;
my $expected2 = &#34;P27797\tP10321\t0.721078&#34;;

my @sorted = sort @lines;

if&#40; $sorted[ 0 ] ne $expected1 &#41;
{
    warn &#34;Expected result &#39;$expected1&#39; != actual result &#39;$lines[ 0 ]&#39;\n&#34;;
    exit 2;
}

if&#40; $sorted[ 1 ] ne $expected2 &#41;
{
    warn &#34;Expected result &#39;$expected2&#39; != actual result &#39;$lines[ 1 ]&#39;\n&#34;;
    exit 2;
}

# Success if we&#39;ve reached here

print &#34;All tests passed.\n&#34;;
exit 0;

</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> geco_registry_test.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/538636/270476/geco_registry_test.pl">Download geco_registry_test.pl</a><br />
<span class="downloadcontenttype">text/x-perl 3.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/perl -w

# FuncNet predictor testing tool for EMBRACE registry at <span class="clickylink"><a target="new" rel="nofollow" href="http://embraceregistry.net/">http://embraceregistry.net/</a></span>
#
# The service to test is set in the $SVC string.
#
# Put some query and reference proteins in the $parameters hash.
#
# For each expected prediction, add a $expectedN string containing the query
# protein ID, reference protein ID and p-value, separated by tabs, e.g.:
#
# my $expected1 = &#34;O75865\tP22676\t0.893313&#34;;
#
# Put these in alphabetical order.
#
# See also <span class="clickylink"><a target="new" rel="nofollow" href="http://funcnet.eu/">http://funcnet.eu/</a></span>

use strict;

use Data::Dumper;
use LWP::UserAgent;
use XML::Compile::WSDL11;
use XML::Compile::Transport::SOAPHTTP;
use XML::Compile::Schema;

my $SVC = &#39;Geco&#39;;

# Download local copy of WSDL

my $ua = LWP::UserAgent-&gt;new;
my $wsdl_url = &#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info:8080/BioMiner-war/services/$">http://cathdb.info:8080/BioMiner-war/services/$</a></span>{SVC}Service?wsdl&#34;;
my $response = $ua-&gt;get&#40; $wsdl_url &#41;;
unless&#40; $response-&gt;is_success &#41;
{
    warn &#34;Could not retrieve $wsdl_url: &#34;, $response-&gt;status_line, &#34;\n&#34;;
    exit 1;
}

unless&#40; open WSDL, &#34;&gt;${SVC}_temp.wsdl&#34; &#41;
{
    warn &#34;Could not open temporary local file: $1\n&#34;;
    exit 1;
}

unless&#40; print WSDL $response-&gt;content &#41;
{
    warn &#34;Could not write WSDL to temporary local file: $!\n&#34;;
    exit 1;
}

close WSDL;

# Parse WSDL

my $wsdl = XML::LibXML-&gt;new-&gt;parse_file&#40; &#34;${SVC}_temp.wsdl&#34; &#41;;

unless&#40; $wsdl &#41;
{
    warn &#34;Attempt to parse WSDL returned null\n&#34;;
    exit 1;
}

# Clean up local temp copy

unlink &#34;${SVC}_temp.wsdl&#34;;

# Not sure what would happen if two copies of this script ran simultaneously...

print &#34;Retrieved and parsed WSDL OK.\n&#34;;

# Build SOAP proxy object

my $proxy = XML::Compile::WSDL11-&gt;new&#40; $wsdl &#41;;

my @op_defs = $proxy-&gt;operations&#40;&#41;;

my $op   = $proxy-&gt;operation&#40; 
                operation   =&gt; &#39;ScorePairwiseRelations&#39;, 
                port        =&gt; &#34;${SVC}Port&#34;,
                service     =&gt; &#34;{<span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info/FuncNet_0_1/">http://cathdb.info/FuncNet_0_1/</a></span>}${SVC}Service&#34;,
                binding     =&gt; &#34;{<span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info/FuncNet_0_1/">http://cathdb.info/FuncNet_0_1/</a></span>}${SVC}Binding&#34;
             &#41;;

my $op_call = $op-&gt;compileClient&#40;&#41;;

# Build request object -- proteins1 is query set, proteins2 is reference set

my $parameters = {
    proteins1 =&gt; { p =&gt; [ &#39;A3EXL0&#39;, &#39;Q8NFN7&#39;, &#39;O75865&#39; ] },
    proteins2 =&gt; { p =&gt; [ &#39;Q5SR05&#39;, &#39;Q9H8H3&#39;, &#39;P22676&#39; ] } 
};

# Send request

my &#40; $answer, $trace &#41; = $op_call-&gt;&#40; parameters =&gt; $parameters &#41;;

unless&#40; exists&#40; $answer-&gt;{ parameters } &#41; &#41;
{
    warn &#34;No parameters element found! Trace:\n&#34;, Dumper&#40; $trace &#41;, &#34;\n&#34;;
    exit 1;
}

print &#34;Prot 1\tProt 2\tP-value\n&#34;;

my @lines;

foreach my $result &#40; @{ $answer-&gt;{ parameters }-&gt;{ s } } &#41;
{
    my $line = $result-&gt;{ p1 } . &#34;\t&#34; . $result-&gt;{ p2 } . &#34;\t&#34; . $result-&gt;{ pv };
    print $line . &#34;\n&#34;;
    push @lines, $line;
}

if&#40; @lines != 2 &#41;
{
    warn &#34;Expected 2 results in output, got &#34; . scalar&#40; @lines &#41; . &#34;\n&#34;;
    exit 2;
}

# Predictions expected for this request -- make sure these are in alphabetical order

my $expected1 = &#34;O75865\tP22676\t0.893313&#34;;
my $expected2 = &#34;O75865\tQ9H8H3\t0.445814&#34;;

my @sorted = sort @lines;

if&#40; $sorted[ 0 ] ne $expected1 &#41;
{
    warn &#34;Expected result &#39;$expected1&#39; != actual result &#39;$lines[ 0 ]&#39;\n&#34;;
    exit 2;
}

if&#40; $sorted[ 1 ] ne $expected2 &#41;
{
    warn &#34;Expected result &#39;$expected2&#39; != actual result &#39;$lines[ 1 ]&#39;\n&#34;;
    exit 2;
}

# Success if we&#39;ve reached here

print &#34;All tests passed.\n&#34;;
exit 0;

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-538797" href="/Public/Bug/Display.html?id=41311#txn-538797">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;30&nbsp;14:44:52&nbsp;2008</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41311] XML::Compile::WSDL11::Operation::compileClient fails to extract response message content, on service that works fine with several other clients</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Nov 2008 20:44:29 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Andrew Clegg via RT &lt;bug-XML-Compile [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/538797/270554/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/270554">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Andrew Clegg via RT &#40;bug-XML-Compile@rt.cpan.org&#41; [081130 02:31]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sat Nov 29 21:31:09 2008: Request 41311 was acted upon.
&gt; Transaction: Ticket created by andrewclegg
&gt;        Queue: XML-Compile
&gt;      Subject: XML::Compile::WSDL11::Operation::compileClient fails to extract
&gt;  response message content, on service that works fine with several other
&gt;  clients
&gt; 
&gt; The service in question is described here:
&gt; 
&gt; WSDL: <span class="clickylink"><a target="new" rel="nofollow" href="http://myhits.isb-sib.ch/doc/FuncNet.wsdl">http://myhits.isb-sib.ch/doc/FuncNet.wsdl</a></span>
&gt; Service: JacopService
&gt; Port: JacopPort
&gt; Binding: JacopBinding
&gt; Operation: ScorePairwiseRelations
</div>
It was a long search, but I think I have found the cause:
The start of the response message is:

&lt;soap:Envelope
  soap:encodingStyle=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/encoding/">http://schemas.xmlsoap.org/soap/encoding/</a></span>&#34;
  xmlns:soap=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a></span>&#34;
  xmlns:wsdl=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/wsdl/">http://schemas.xmlsoap.org/wsdl/</a></span>&#34;
  xmlns:xsi=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a></span>&#34;
  xmlns:soapenc=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/encoding/">http://schemas.xmlsoap.org/soap/encoding/</a></span>&#34;
  xmlns:http-conf=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://cxf.apache.org/transports/http/configuration">http://cxf.apache.org/transports/http/configuration</a></span>&#34;
  xmlns:xsd=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a></span>&#34;&gt;
   &lt;soap:Body&gt;
      &lt;ScorePairwiseRelationsResponse&gt;
         &lt;s&gt;
            &lt;p1&gt;B1B0W0&lt;/p1&gt;

Now, the &#34;ScorePairwiseRelationsResponse&#34; is namespaceless.  According
to the WSDL, it should be in namespace <span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info/FuncNet_0_1/">http://cathdb.info/FuncNet_0_1/</a></span>

Mainly SOAP implementations simply ignore name-spaces &#40;which might be
smart because the spec itself makes a real mess out of it!  For instance,
the schema&#39;s of soap lack &#34;elementFormDefault=qualified&#34; but do require
it&#41;

So: the server is incorrect.  I hope you have access to it.
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
drs Mark A.C.J. Overmeer                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-538798" href="/Public/Bug/Display.html?id=41311#txn-538798">#</a>      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;30&nbsp;14:44:54&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-538931" href="/Public/Bug/Display.html?id=41311#txn-538931">#</a>      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;01&nbsp;03:56:53&nbsp;2008</span>
    <span class="description">andrew.clegg [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41311] XML::Compile::WSDL11::Operation::compileClient fails to extract response message content, on service that works fine with several other clients</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 1 Dec 2008 08:56:38 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-XML-Compile [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Andrew Clegg&#34; &lt;andrew.clegg [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/538931/270619/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/270619">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Many thanks! I haven&#39;t been using schema validation anywhere because
we&#39;re working with some really big messages, perhaps this would have
shown up if we had done.

I can pass this message on to the developers of the service and we&#39;ll
re-test and let you know if that nailed it.

Much appreciated, I&#39;ll buy you a beer if I run into you in real life :-&#41;

Andrew.

2008/11/30 Mark Overmeer via RT &lt;bug-XML-Compile@rt.cpan.org&gt;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41311">http://rt.cpan.org/Ticket/Display.html?id=41311</a></span> &gt;
&gt;
&gt; * Andrew Clegg via RT &#40;bug-XML-Compile@rt.cpan.org&#41; [081130 02:31]:
<div class="message-stanza open">&gt;&gt; Sat Nov 29 21:31:09 2008: Request 41311 was acted upon.
&gt;&gt; Transaction: Ticket created by andrewclegg
&gt;&gt;        Queue: XML-Compile
&gt;&gt;      Subject: XML::Compile::WSDL11::Operation::compileClient fails to extract
&gt;&gt;  response message content, on service that works fine with several other
&gt;&gt;  clients
&gt;&gt;
&gt;&gt; The service in question is described here:
&gt;&gt;
&gt;&gt; WSDL: <span class="clickylink"><a target="new" rel="nofollow" href="http://myhits.isb-sib.ch/doc/FuncNet.wsdl">http://myhits.isb-sib.ch/doc/FuncNet.wsdl</a></span>
&gt;&gt; Service: JacopService
&gt;&gt; Port: JacopPort
&gt;&gt; Binding: JacopBinding
&gt;&gt; Operation: ScorePairwiseRelations
</div>&gt;
&gt; It was a long search, but I think I have found the cause:
&gt; The start of the response message is:
&gt;
&gt; &lt;soap:Envelope
&gt;  soap:encodingStyle=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/encoding/">http://schemas.xmlsoap.org/soap/encoding/</a></span>&#34;
&gt;  xmlns:soap=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a></span>&#34;
&gt;  xmlns:wsdl=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/wsdl/">http://schemas.xmlsoap.org/wsdl/</a></span>&#34;
&gt;  xmlns:xsi=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a></span>&#34;
&gt;  xmlns:soapenc=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/encoding/">http://schemas.xmlsoap.org/soap/encoding/</a></span>&#34;
&gt;  xmlns:http-conf=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://cxf.apache.org/transports/http/configuration">http://cxf.apache.org/transports/http/configuration</a></span>&#34;
&gt;  xmlns:xsd=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</a></span>&#34;&gt;
&gt;   &lt;soap:Body&gt;
&gt;      &lt;ScorePairwiseRelationsResponse&gt;
&gt;         &lt;s&gt;
&gt;            &lt;p1&gt;B1B0W0&lt;/p1&gt;
&gt;
&gt; Now, the &#34;ScorePairwiseRelationsResponse&#34; is namespaceless.  According
&gt; to the WSDL, it should be in namespace <span class="clickylink"><a target="new" rel="nofollow" href="http://cathdb.info/FuncNet_0_1/">http://cathdb.info/FuncNet_0_1/</a></span>
&gt;
&gt; Mainly SOAP implementations simply ignore name-spaces &#40;which might be
&gt; smart because the spec itself makes a real mess out of it!  For instance,
&gt; the schema&#39;s of soap lack &#34;elementFormDefault=qualified&#34; but do require
&gt; it&#41;
&gt;
&gt; So: the server is incorrect.  I hope you have access to it.
&gt; --
&gt; Regards,
&gt;               MarkOv
&gt;
&gt; ------------------------------------------------------------------------
&gt;       Mark Overmeer MSc                                MARKOV Solutions
&gt; drs Mark A.C.J. Overmeer                                MARKOV Solutions
&gt;       Mark@Overmeer.net                          solutions@overmeer.net
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
&gt;
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-541263" href="/Public/Bug/Display.html?id=41311#txn-541263">#</a>      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;07&nbsp;16:44:21&nbsp;2008</span>
    <span class="description">andrew.clegg.signups [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> andrew.clegg.signups [...] gmail.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/541263/271978/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/271978">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 134b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Mark, you were absolutely right. The owners of the service have added
the namespace in and it works fine now.

Thanks again,

Andrew.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-541265" href="/Public/Bug/Display.html?id=41311#txn-541265">#</a>      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;07&nbsp;16:51:10&nbsp;2008</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41311] XML::Compile::WSDL11::Operation::compileClient fails to extract response message content, on service that works fine with several other clients</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 7 Dec 2008 22:50:55 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Andrew Clegg via RT &lt;bug-XML-Compile [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/541265/271980/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/271980">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 850b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Andrew Clegg via RT &#40;bug-XML-Compile@rt.cpan.org&#41; [081207 21:44]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: XML-Compile
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41311">http://rt.cpan.org/Ticket/Display.html?id=41311</a></span> &gt;
&gt; 
&gt; Mark, you were absolutely right. The owners of the service have added
&gt; the namespace in and it works fine now.
</div>
The real challenge is to make the error report that good that it
will warn for this kind of problems automatically without the need
to ask the module author ;-&#41;  But the existence of namespace-less
XML makes this an extra difficult problem.
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-542617" href="/Public/Bug/Display.html?id=41311#txn-542617">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;11&nbsp;06:51:18&nbsp;2008</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/542617/272737/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/272737">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 10b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">user error
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-542619" href="/Public/Bug/Display.html?id=41311#txn-542619">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;11&nbsp;06:51:20&nbsp;2008</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.559108</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
