<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #123956 for Gimp: batch-mode brings up a dialog box</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #123956 for Gimp: batch-mode brings up a dialog box</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Gimp/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Gimp/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Gimp/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Gimp/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Gimp">Gimp CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">123956</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Gimp/Active/">Gimp</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
vegard [...] vesterheim.no

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-14770-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-14771-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




screenshot6327XLi.png<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1763514/949058/screenshot6327XLi.png">
Fri Dec 29 04:27:28 2017 (11.5k) by vegard [...] vesterheim.no
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;28&nbsp;05:33:07&nbsp;2017</span>
    <span class="description">vegard [...] vesterheim.no -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> batch-mode brings up a dialog box</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 Dec 2017 11:27:44 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Gimp [...] rt.cpan.org </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Vegard Vesterheim &lt;vegard [...] vesterheim.no&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When using the latest version &#40;2.32&#41;, the command 
   gimp --no-interface --batch &#39;&#40;extension-perl-server 2 0 0&#41;&#39;
brings up a GTK dialog into which one needs to press the &#39;OK&#39; button
before the server starts listening for connections.

Using version 2.31, the same command simply starts the server
immediately, without needing any user-interaction. This is the expected
behaviour, given the command line options.

I would like to start the Gimp-Perl server as a background process,
without any UI whatsoever.

-- 
Vegard Vesterheim
Åsvangveien 41
7049 Trondheim
Norway
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;28&nbsp;23:40:02&nbsp;2017</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the report! Can you tell me which version of GIMP and of Perl you&#39;re using? Also, what does the dialog box say?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;28&nbsp;23:40:02&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;29&nbsp;04:27:28&nbsp;2017</span>
    <span class="description">vegard [...] vesterheim.no -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> vegard [...] vesterheim.no</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123956] batch-mode brings up a dialog box</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 29 Dec 2017 10:21:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Ed J via RT&#34; &lt;bug-Gimp [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Vegard Vesterheim &lt;vegard [...] vesterheim.no&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, 28 Dec 2017 23:40:03 -0500 &#34;Ed J via RT&#34; &lt;bug-Gimp@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123956">https://rt.cpan.org/Ticket/Display.html?id=123956</a></span> &gt;
&gt;
&gt; Thanks for the report! Can you tell me which version of GIMP and of
&gt; Perl you&#39;re using? Also, what does the dialog box say?
</div>
gimp version 2.8.16
perl version 5.22
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1763514/949058/screenshot6327XLi.png">Download screenshot6327XLi.png</a><br />
<span class="downloadcontenttype">image/png 11.5k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
-- 
Vegard Vesterheim
Åsvangveien 41
7049 Trondheim
Norway
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;04:26:26&nbsp;2018</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks! Could you try changing your invocation to this?

gimp --no-interface --batch &#39;&#40;extension-perl-server RUN-NONINTERACTIVE 0 0&#41;&#39;

The current first arg &#40;2&#41; looks like it&#39;s in the RUN-INTERACTIVE/RUN-NONINTERACTIVE slot, whose valid values are 0 and 1 respectively.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;14:21:05&nbsp;2018</span>
    <span class="description">vegard [...] vesterheim.no -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123956] batch-mode brings up a dialog box</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 01 Jan 2018 20:20:41 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Ed J via RT&#34; &lt;bug-Gimp [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Vegard Vesterheim &lt;vegard [...] vesterheim.no&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, 1 Jan 2018 04:26:27 -0500 &#34;Ed J via RT&#34; &lt;bug-Gimp@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123956">https://rt.cpan.org/Ticket/Display.html?id=123956</a></span> &gt;
&gt;
&gt; Thanks! Could you try changing your invocation to this?
&gt;
&gt; gimp --no-interface --batch &#39;&#40;extension-perl-server RUN-NONINTERACTIVE 0 0&#41;&#39;
&gt;
&gt; The current first arg &#40;2&#41; looks like it&#39;s in the
&gt; RUN-INTERACTIVE/RUN-NONINTERACTIVE slot, whose valid values are 0 and
&gt; 1 respectively.
</div>
When using RUN-NONINTERACTIVE, I seem to get a prompt in the terminal, like this

pb:PERL-SERVERi5:

I am trying to have the Gimp Perl-server listen on a TCP port, using
something like this:

export GIMP_HOST=&#39;secretpassword@tcp/localhost:10010&#39;
gimp --no-interface --batch &#39;&#40;extension-perl-server RUN-NONINTERACTIVE 0 0&#41;&#39; &#38;

After this I expect to be able to connect to the TCP port 10010, but it
does not seem to work.

-- 
Vegard Vesterheim
Åsvangveien 41
7049 Trondheim
Norway
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;01&nbsp;17:44:56&nbsp;2018</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">If you first of all change the invocation to this:

gimp --no-interface --batch &#39;&#40;extension-perl-server RUN-NONINTERACTIVE 0 3&#41;&#39;

the &#34;3&#34; is the value of $Gimp::verbose, and 3 is the highest level, so you will get lots of debugging output.

Next, that &#34;0&#34; is the file-descriptor you&#39;ve told the Perl server to connect to. That&#39;s standard input. The text you saw is the raw Perl-Server protocol itself, which if you&#39;re interested you can learn more about from <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/GNOME/gimp-perl/blob/master/lib/Gimp/Net.pm">https://github.com/GNOME/gimp-perl/blob/master/lib/Gimp/Net.pm</a></span>

The Perl server isn&#39;t really intended to be started the way you&#39;re doing it. It can spawn its own private copy of GIMP, using &#34;spawn&#34; in the GIMP_HOST env var.

What are you actually trying to achieve?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;02&nbsp;03:26:12&nbsp;2018</span>
    <span class="description">vegard [...] vesterheim.no -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> vegard [...] vesterheim.no</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123956] batch-mode brings up a dialog box</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 02 Jan 2018 09:25:44 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Ed J via RT&#34; &lt;bug-Gimp [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Vegard Vesterheim &lt;vegard [...] vesterheim.no&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, 1 Jan 2018 17:44:56 -0500 &#34;Ed J via RT&#34; &lt;bug-Gimp@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123956">https://rt.cpan.org/Ticket/Display.html?id=123956</a></span> &gt;
&gt;
&gt; If you first of all change the invocation to this:
&gt;
&gt; gimp --no-interface --batch &#39;&#40;extension-perl-server RUN-NONINTERACTIVE 0 3&#41;&#39;
&gt;
&gt; the &#34;3&#34; is the value of $Gimp::verbose, and 3 is the highest level, so you will get lots of debugging output.
&gt;
&gt; Next, that &#34;0&#34; is the file-descriptor you&#39;ve told the Perl server to
&gt; connect to. That&#39;s standard input. The text you saw is the raw
&gt; Perl-Server protocol itself, which if you&#39;re interested you can learn
&gt; more about from
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/GNOME/gimp-perl/blob/master/lib/Gimp/Net.pm">https://github.com/GNOME/gimp-perl/blob/master/lib/Gimp/Net.pm</a></span>
&gt;
&gt; The Perl server isn&#39;t really intended to be started the way you&#39;re
&gt; doing it. It can spawn its own private copy of GIMP, using &#34;spawn&#34; in
&gt; the GIMP_HOST env var.
&gt;
&gt; What are you actually trying to achieve?
</div>
I simply want to start gimp with the Gimp Perl-server ready to accept
connections on a socket *without any GUI whatsoever*. I want to have a
persistently running &#34;gimp daemon&#34; which I can feed perl scripts for
generating graphics.

This works fine now with the annoying exception that I need to press the
&#34;OK&#34; button in the Gtk dialog. I want a way to suppress this, and I
expected the --no-interface flag to gimp, combined with
the &#39;RUN-NONINTERACTIVE&#39; run-mode to Gimp-Perl to achieve this.

The first argument &#40;run-mode&#41; to the &#39;extension-perl-server&#39; can have
three values: INTERACTIVE&#40;0&#41;, NONINTERACTIVE&#40;1&#41; or
RUN_WITH_LAST_VALS&#40;2&#41;. I have been using the last option
&#40;RUN_WITH_LAST_VALS&#41;. I guess this does not make much sense since I am
starting a new gimp instance, so there is no previous invocation of the
plugin.

There are multiple use-cases for this. My specific use case right now is
to be able to programmatically create beer-bottle labels. I have created
a Gimp-Perl script which generates these labels. This script works fine
when invoked from within the gimp UI. It also works fine running
directly from the command line, if there is no gimp perl-server running,
a new gimp instance will be started in the background.

Imagine a web form where you can enter some parameters, and being served
graphic images on-the-fly. For this to work efficiently, one needs a
persistent gimp server ready to process the requests.

-- 
Vegard Vesterheim
Åsvangveien 41
7049 Trondheim
Norway
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;03&nbsp;01:33:40&nbsp;2018</span>
    <span class="description">ETJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">That&#39;s a good idea. If you&#39;d like to submit a patch that creates this change, go ahead! Otherwise, I&#39;ll get to it soon.

If you do create such a web facility, why not make a Mojolicious::Plugin of it?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;26&nbsp;15:57:32&nbsp;2018</span>
    <span class="description">vegard [...] vesterheim.no -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> vegard [...] vesterheim.no</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #123956] batch-mode brings up a dialog box</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Nov 2018 21:51:32 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Ed J via RT&#34; &lt;bug-Gimp [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Vegard Vesterheim &lt;vegard [...] vesterheim.no&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, 3 Jan 2018 01:33:40 -0500 &#34;Ed J via RT&#34; &lt;bug-Gimp@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=123956">https://rt.cpan.org/Ticket/Display.html?id=123956</a></span> &gt;
&gt;
&gt; That&#39;s a good idea. If you&#39;d like to submit a patch that creates this
&gt; change, go ahead! Otherwise, I&#39;ll get to it soon.
</div>
Hi again Ed.

FWIW, I did some manual git bisecting, and identified the &#34;offending&#34;
commit to be 6c1a2ba.

Before that commit, the command
  gimp-console --batch &#39;&#40;extension-perl-server 2 0 0 &#41;&#39;
works as expected, it starts listening for connections without bringing
up that pesky GUI.

-- 
Vegard Vesterheim
Åsvangveien 41
7049 Trondheim
Norway
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
