<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #94151 for HTTP-Date: HTTP::Date problems with dates after 3/12/2014</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #94151 for HTTP-Date: HTTP::Date problems with dates after 3/12/2014</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=HTTP-Date">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=HTTP-Date">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=HTTP-Date">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=HTTP-Date">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/HTTP-Date">HTTP-Date CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">94151</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=HTTP-Date">HTTP-Date</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Eric.Engberg [...] wellsfargo.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-237396-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-237397-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=94151">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1342556" href="/Public/Bug/Display.html?id=94151#txn-1342556">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;14:22:36&nbsp;2014</span>
    <span class="description">Eric.Engberg [...] wellsfargo.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> HTTP::Date problems with dates after 3/12/2014</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Mar 2014 18:22:16 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-HTTP-Date [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;Eric.Engberg [...] wellsfargo.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1342556/712391/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/712391">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This may be a duplicate, or at least related to bug 83803 - but I wanted to add some more information.

My work is on Windows/ActiveState perl, and I use HTTP::Date a lot to parse time and date strings in to seconds, and then in to other date formats.
I find it really useful, and am worried about switching modules or completely updating Perl to solve this issue.


I find that dates after 2014-03-12 return undef when I call str2time on them &#40;at least in the following format&#41;:

I can reproduce this on perl 5.8.8 and 5.12.4 &#40;below&#41;.   I was using an older Time::Local &#40;1.19&#41;, but upgrading to current &#40;1.23&#41; didn&#39;t help.

If you know of a fix, I&#39;d love to apply it, or I&#39;ll research if I can make the change in HTTP::Date locally.

----


D:\Metrics&gt;perl -MHTTP::Date -e &#34;print str2time&#40;&#39;3/12/2014 0:00&#39;&#41;&#34;
1417593600
D:\Metrics&gt;perl -MHTTP::Date -e &#34;print str2time&#40;&#39;3/13/2014 0:00&#39;&#41;&#34;


D:\Metrics&gt;perl -v

This is perl 5, version 12, subversion 4 &#40;v5.12.4&#41; built for MSWin32-x86-multi-thread
&#40;with 9 registered patches, see perl -V for more detail&#41;

Copyright 1987-2010, Larry Wall

Binary build 1205 [294981] provided by ActiveState <span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
Built Jun 20 2011 18:35:25

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.

Eric Engberg

Business Process Consultant
QA &#38; RMS
Community Bank Technology
MAC Q3604-010
Tel 505 299-6071

eric.engberg@wellsfargo.com&lt;mailto:eddie.park@wellsfargo.com&gt;

This message may contain confidential and/or privileged information.  If you are not the addressee or authorized to receive this for the addressee, you must not use, copy, disclose, or take any action based on this message or any information herein.  If you have received this message in error, please advise the sender immediately by reply e-mail and delete this message.  Thank you for your cooperation.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1342556/712392/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/712392">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1342559" href="/Public/Bug/Display.html?id=94151#txn-1342559">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;14:32:43&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1342559/712395/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/712395">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 104b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">confirmed on OSX, perl 5.19.9, HTTP::Date 6.02. Marking as critical until this can be diagnosed further.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1342560" href="/Public/Bug/Display.html?id=94151#txn-1342560">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;14:32:44&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1342563" href="/Public/Bug/Display.html?id=94151#txn-1342563">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;14:32:55&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Severity Critical added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1342581" href="/Public/Bug/Display.html?id=94151#txn-1342581">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;15:06:36&nbsp;2014</span>
    <span class="description">Eric.Engberg [...] wellsfargo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #94151] HTTP::Date problems with dates after 3/12/2014</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Mar 2014 19:06:22 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-HTTP-Date [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;Eric.Engberg [...] wellsfargo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1342581/712411/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/712411">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Thank you very much for confirming the bug.  I think I have a solution, and can diagnose that HTTP::Date is working as advertised, but doesn&#39;t deal with US style dates in this format.

One more piece of information I should have included: the source of this date format is originally excel.  It is common US-style date to use Month/Day/Year, like 3/15/2014  &#40;meaning March 15&#41;, to the consternation of Europeans who would write the same date as 15/03/2014.

From working with the parse_date function in the HTTP::Date module, I think that&#39;s the problem: the function expects the European style, and doesn&#39;t support the US style.
The European style does make more sense, like the Metric system, because the numbers are ordered &#40;least-&gt;greatest, day to year&#41;, but perhaps the region of the user would be helpful to determine which format is dominant.

Since I&#39;m in the US, my suggested fix &#40;which I&#39;ll use&#41; is to add this regex with the month/date order changed before the European style:

93a94,114
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     # Give preference to US style &#40;even though it makes less sense mathematically&#41;
&gt;     &#40;&#40;$mon,$day,$yr,$hr,$min,$sec,$tz&#41; =
&gt;         /^
&gt;        &#40;\w+&#41;                 # month
&gt;           &#40;?:\s+|[-\/]&#41;
&gt;        &#40;\d\d?&#41;               # day
&gt;           &#40;?:\s+|[-\/]&#41;
&gt;        &#40;\d+&#41;                 # year
&gt;        &#40;?:
&gt;              &#40;?:\s+|:&#41;       # separator before clock
&gt;           &#40;\d\d?&#41;:&#40;\d\d&#41;     # hour:min
&gt;           &#40;?::&#40;\d\d&#41;&#41;?       # optional seconds
&gt;        &#41;?                    # optional clock
&gt;           \s*
&gt;        &#40;[-+]?\d{2,4}|&#40;?![APap][Mm]\b&#41;[A-Za-z]+&#41;? # timezone
&gt;           \s*
&gt;        &#40;?:\&#40;\w+\&#41;|\w{3,}&#41;?   # ASCII representation of timezone.
&gt;           \s*$
&gt;       /x&#41;
&gt;
&gt;      ||
</div>



Eric Engberg

Business Process Consultant
QA &#38; RMS
Community Bank Technology
MAC Q3604-010
Tel 505 299-6071

eric.engberg@wellsfargo.com

This message may contain confidential and/or privileged information.Â  If you are not the addressee or authorized to receive this for the addressee, you must not use, copy, disclose, or take any action based on this message or any information herein.Â  If you have received this message in error, please advise the sender immediately by reply e-mail and delete this message.Â  Thank you for your cooperation.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Karen Etheridge via RT [mailto:bug-HTTP-Date@rt.cpan.org] 
Sent: Monday, March 24, 2014 11:33 AM
To: Engberg, Eric
Subject: [rt.cpan.org #94151] HTTP::Date problems with dates after 3/12/2014

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=94151">https://rt.cpan.org/Ticket/Display.html?id=94151</a></span> &gt;

confirmed on OSX, perl 5.19.9, HTTP::Date 6.02. Marking as critical until this can be diagnosed further.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1342585" href="/Public/Bug/Display.html?id=94151#txn-1342585">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;15:15:11&nbsp;2014</span>
    <span class="description">Eric.Engberg [...] wellsfargo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #94151] HTTP::Date problems with dates after 3/12/2014</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Mar 2014 19:14:47 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-HTTP-Date [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;Eric.Engberg [...] wellsfargo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1342585/712413/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/712413">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">One more thought on my &#39;fix&#39;/enhancement for US users:

It might be worth checking if the month and days look like they are switched, and giving the benefit of the doubt to the user, that if they write
3/15/2014 or 15/3/2014 that in either case they probably mean March 15.  

   # Swap month/day if month is greater than 12
    if &#40;$mon &gt; 12 &#38;&#38; $day &lt; 12&#41; {
            &#40;$mon, $day&#41; = &#40;$day, $mon&#41;;
    }

This wouldn&#39;t help disambiguate whether 4/6/2014 means June or April, unfortunately, which is why I think you have to consider the region to make a guess.


Eric Engberg

Business Process Consultant
QA &#38; RMS
Community Bank Technology
MAC Q3604-010
Tel 505 299-6071

eric.engberg@wellsfargo.com

This message may contain confidential and/or privileged information.Â  If you are not the addressee or authorized to receive this for the addressee, you must not use, copy, disclose, or take any action based on this message or any information herein.Â  If you have received this message in error, please advise the sender immediately by reply e-mail and delete this message.Â  Thank you for your cooperation.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Engberg, Eric 
Sent: Monday, March 24, 2014 12:06 PM
To: &#39;bug-HTTP-Date@rt.cpan.org&#39;
Subject: RE: [rt.cpan.org #94151] HTTP::Date problems with dates after 3/12/2014


Thank you very much for confirming the bug.  I think I have a solution, and can diagnose that HTTP::Date is working as advertised, but doesn&#39;t deal with US style dates in this format.

One more piece of information I should have included: the source of this date format is originally excel.  It is common US-style date to use Month/Day/Year, like 3/15/2014  &#40;meaning March 15&#41;, to the consternation of Europeans who would write the same date as 15/03/2014.

From working with the parse_date function in the HTTP::Date module, I think that&#39;s the problem: the function expects the European style, and doesn&#39;t support the US style.
The European style does make more sense, like the Metric system, because the numbers are ordered &#40;least-&gt;greatest, day to year&#41;, but perhaps the region of the user would be helpful to determine which format is dominant.

Since I&#39;m in the US, my suggested fix &#40;which I&#39;ll use&#41; is to add this regex with the month/date order changed before the European style:

93a94,114
<div class="message-stanza open">&gt;     # Give preference to US style &#40;even though it makes less sense mathematically&#41;
&gt;     &#40;&#40;$mon,$day,$yr,$hr,$min,$sec,$tz&#41; =
&gt;         /^
&gt;        &#40;\w+&#41;                 # month
&gt;           &#40;?:\s+|[-\/]&#41;
&gt;        &#40;\d\d?&#41;               # day
&gt;           &#40;?:\s+|[-\/]&#41;
&gt;        &#40;\d+&#41;                 # year
&gt;        &#40;?:
&gt;              &#40;?:\s+|:&#41;       # separator before clock
&gt;           &#40;\d\d?&#41;:&#40;\d\d&#41;     # hour:min
&gt;           &#40;?::&#40;\d\d&#41;&#41;?       # optional seconds
&gt;        &#41;?                    # optional clock
&gt;           \s*
&gt;        &#40;[-+]?\d{2,4}|&#40;?![APap][Mm]\b&#41;[A-Za-z]+&#41;? # timezone
&gt;           \s*
&gt;        &#40;?:\&#40;\w+\&#41;|\w{3,}&#41;?   # ASCII representation of timezone.
&gt;           \s*$
&gt;       /x&#41;
&gt;
&gt;      ||
</div>



Eric Engberg

Business Process Consultant
QA &#38; RMS
Community Bank Technology
MAC Q3604-010
Tel 505 299-6071

eric.engberg@wellsfargo.com

This message may contain confidential and/or privileged information.Â  If you are not the addressee or authorized to receive this for the addressee, you must not use, copy, disclose, or take any action based on this message or any information herein.Â  If you have received this message in error, please advise the sender immediately by reply e-mail and delete this message.Â  Thank you for your cooperation.

<div class="message-stanza open">-----Original Message-----
From: Karen Etheridge via RT [mailto:bug-HTTP-Date@rt.cpan.org] 
Sent: Monday, March 24, 2014 11:33 AM
To: Engberg, Eric
Subject: [rt.cpan.org #94151] HTTP::Date problems with dates after 3/12/2014

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=94151">https://rt.cpan.org/Ticket/Display.html?id=94151</a></span> &gt;

confirmed on OSX, perl 5.19.9, HTTP::Date 6.02. Marking as critical until this can be diagnosed further.
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1342595" href="/Public/Bug/Display.html?id=94151#txn-1342595">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;24&nbsp;16:06:21&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #94151] HTTP::Date problems with dates after 3/12/2014</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 24 Mar 2014 13:06:05 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;Eric.Engberg [...] wellsfargo.com via RT&#34; &lt;bug-HTTP-Date [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Karen Etheridge &lt;ether [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1342595/712417/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/712417">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 441b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Mar 24, 2014 at 03:15:12PM -0400, Eric.Engberg@wellsfargo.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It might be worth checking if the month and days look like they are switched, and giving the benefit of the doubt to the user, that if they write
&gt; 3/15/2014 or 15/3/2014 that in either case they probably mean March 15.  
</div>
Instead of silently switching, I&#39;d prefer to issue a warning, so the user
knwos why they got undef back and can switch their code.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1343041" href="/Public/Bug/Display.html?id=94151#txn-1343041">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;25&nbsp;12:52:57&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Severity Critical changed to Normal</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1772477" href="/Public/Bug/Display.html?id=94151#txn-1772477">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;21&nbsp;14:57:45&nbsp;2018</span>
    <span class="description">JJATRIA [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1772477/953746/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/953746">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I took a look at this issue to attempt a fix, and I don&#39;t think this can be easily done without breaking existing behaviour.

I agree that a silent guess is not a good idea. But adding a warning would change documented behaviour, and possibly break code / tests in the distributions that use this as a time validator. Specially considering the position of this module in the river of CPAN, this is a serious concern.

I suggest this to be closed. A clarification in the documentation is probably the best solution this can get. 

On Mon Mar 24 16:06:21 2014, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon, Mar 24, 2014 at 03:15:12PM -0400, Eric.Engberg@wellsfargo.com
&gt; via RT wrote:
<div class="message-stanza open">&gt; &gt; It might be worth checking if the month and days look like they are
&gt; &gt; switched, and giving the benefit of the doubt to the user, that if
&gt; &gt; they write
&gt; &gt;   3/15/2014 or 15/3/2014 that in either case they probably mean March
&gt; &gt; 15.
</div>&gt; 
&gt; Instead of silently switching, I&#39;d prefer to issue a warning, so the
&gt; user
&gt; knwos why they got undef back and can switch their code.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1869990" href="/Public/Bug/Display.html?id=94151#txn-1869990">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;04&nbsp;20:49:29&nbsp;2019</span>
    <span class="description">olaf [...] wundersolutions.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1869990/1004018/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1004018">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 79b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ticket migrated to github as <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/libwww-perl/HTTP-Date/issues/10">https://github.com/libwww-perl/HTTP-Date/issues/10</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1869993" href="/Public/Bug/Display.html?id=94151#txn-1869993">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;04&nbsp;20:49:30&nbsp;2019</span>
    <span class="description">olaf [...] wundersolutions.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.453021</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
