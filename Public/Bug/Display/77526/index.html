<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #77526 for Pod-Weaver-Plugin-EnsureUniqueSections: Quietly depends on position in weaver.ini</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #77526 for Pod-Weaver-Plugin-EnsureUniqueSections: Quietly depends on position in weaver.ini</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Pod-Weaver-Plugin-EnsureUniqueSections">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Pod-Weaver-Plugin-EnsureUniqueSections">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Pod-Weaver-Plugin-EnsureUniqueSections">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Pod-Weaver-Plugin-EnsureUniqueSections">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Pod-Weaver-Plugin-EnsureUniqueSections">Pod-Weaver-Plugin-EnsureUniqueSections CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">77526</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Pod-Weaver-Plugin-EnsureUniqueSections">Pod-Weaver-Plugin-EnsureUniqueSections</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">RTHOMPSON [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
cjm [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-236188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.111220    </td>
  </tr>
  <tr id="CF-236189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Pod-Weaver-Plugin-EnsureUniqueSections-0.121510-TRIAL.tar.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1084981/570166/Pod-Weaver-Plugin-EnsureUniqueSections-0.121510-TRIAL.tar.gz">
Tue May 29 20:16:24 2012 (18.4k) by RTHOMPSON [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=77526">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084863" href="/Public/Bug/Display.html?id=77526#txn-1084863">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;14:50:31&nbsp;2012</span>
    <span class="description">cjm [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Quietly depends on position in weaver.ini</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084863/570127/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570127">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 429b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">If you put [-EnsureUniqueSections] at the beginning of weaver.ini, it
will quietly ignore any duplicate sections you might have.  You have to
place it at the end of weaver.ini for it to work.

At the very least, the documentation needs to mention that.  It would be
better if you could make that unnecessary, or at least detect that there
are sections listed after [-EnsureUniqueSections] and warn that they
will not be checked.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084897" href="/Public/Bug/Display.html?id=77526#txn-1084897">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;16:46:32&nbsp;2012</span>
    <span class="description">rct [...] thompsonclan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients:;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #77526] Quietly depends on position in weaver.ini</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 29 May 2012 13:45:47 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-pod-weaver-plugin-ensureuniquesections [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Ryan C. Thompson&#34; &lt;rct [...] thompsonclan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084897/570143/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570143">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hmm. I&#39;m not sure why that would happen. The plugin implements the 
Pod::Weaver::Role::Finalizer role, which is supposed to do its work 
after weaving is finished. In any case, it&#39;s definitely a bug. For now, 
though, I&#39;ll add a warning to the documentation.

On Tue 29 May 2012 11:50:31 AM PDT, Christopher J. Madsen via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue May 29 14:50:31 2012: Request 77526 was acted upon.
&gt; Transaction: Ticket created by CJM
&gt;         Queue: Pod-Weaver-Plugin-EnsureUniqueSections
&gt;       Subject: Quietly depends on position in weaver.ini
&gt;     Broken in: 0.111220
&gt;      Severity: Important
&gt;         Owner: Nobody
&gt;    Requestors: cjm@cpan.org
&gt;        Status: new
&gt;   Ticket&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=77526">https://rt.cpan.org/Ticket/Display.html?id=77526</a></span>&gt;
&gt;
&gt;
&gt; If you put [-EnsureUniqueSections] at the beginning of weaver.ini, it
&gt; will quietly ignore any duplicate sections you might have.  You have to
&gt; place it at the end of weaver.ini for it to work.
&gt;
&gt; At the very least, the documentation needs to mention that.  It would be
&gt; better if you could make that unnecessary, or at least detect that there
&gt; are sections listed after [-EnsureUniqueSections] and warn that they
&gt; will not be checked.
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084900" href="/Public/Bug/Display.html?id=77526#txn-1084900">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;16:46:33&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084932" href="/Public/Bug/Display.html?id=77526#txn-1084932">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;18:00:43&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084933" href="/Public/Bug/Display.html?id=77526#txn-1084933">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;18:04:52&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084933/570156/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570156">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 432b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Taking a closer look at the code for Pod::Weaver, in particular the
Pod::Weaver::weave_document method[1], and noting that
EnsureUniqueSections does the Finalizer role, it seems like regardless
of order, it should run after all Sections and Transformers. I&#39;m not
really sure how to debug this &#40;I suppose I could start by adding a test
suite to my dist&#41;.

[1]
<span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/RJBS/Pod-Weaver-3.101636/lib/Pod/Weaver.pm">http://cpansearch.perl.org/src/RJBS/Pod-Weaver-3.101636/lib/Pod/Weaver.pm</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084935" href="/Public/Bug/Display.html?id=77526#txn-1084935">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;18:13:56&nbsp;2012</span>
    <span class="description">cjm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084935/570158/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570158">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 313b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I figured out the cause from your remarks. 
Pod::Weaver::Section::Leftovers &#40;the plugin most likely to produce
duplicate sections&#41; is also a Finalizer.  If [-EnsureUniqueSections]
appears before [Leftovers], then any duplicate sections handled by
Leftovers won&#39;t be in the document when EnsureUniqueSections runs.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084977" href="/Public/Bug/Display.html?id=77526#txn-1084977">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;19:33:25&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084977/570160/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570160">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 422b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 29 18:13:56 2012, CJM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I figured out the cause from your remarks. 
&gt; Pod::Weaver::Section::Leftovers &#40;the plugin most likely to produce
&gt; duplicate sections&#41; is also a Finalizer.  If [-EnsureUniqueSections]
&gt; appears before [Leftovers], then any duplicate sections handled by
&gt; Leftovers won&#39;t be in the document when EnsureUniqueSections runs.
</div>
Well, that&#39;s annoying. I suppose I could cheat by adding 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084979" href="/Public/Bug/Display.html?id=77526#txn-1084979">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;19:38:11&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084979/570162/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570162">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 855b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 29 19:33:25 2012, RTHOMPSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue May 29 18:13:56 2012, CJM wrote:
<div class="message-stanza open">&gt; &gt; I figured out the cause from your remarks. 
&gt; &gt; Pod::Weaver::Section::Leftovers &#40;the plugin most likely to produce
&gt; &gt; duplicate sections&#41; is also a Finalizer.  If [-EnsureUniqueSections]
&gt; &gt; appears before [Leftovers], then any duplicate sections handled by
&gt; &gt; Leftovers won&#39;t be in the document when EnsureUniqueSections runs.
</div></div>
Well, that&#39;s annoying. I suppose I could be evil and add a prepare_input
method that modifies the weaver object by putting the
EnsureUniqueSections at the end of the plugin list. That seems a bit
abusive, but at the same time I think it is ok because
EnsureUniqueSections never actually modifies the document, so in theory
there should be no ill effects &#40;other than making a typo and silently
blowing away the plugin list entirely&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084981" href="/Public/Bug/Display.html?id=77526#txn-1084981">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;20:16:24&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084981/570165/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570165">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 620b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 29 19:38:11 2012, RTHOMPSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Well, that&#39;s annoying. I suppose I could be evil and add a prepare_input
&gt; method that modifies the weaver object by putting the
&gt; EnsureUniqueSections at the end of the plugin list. That seems a bit
&gt; abusive, but at the same time I think it is ok because
&gt; EnsureUniqueSections never actually modifies the document, so in theory
&gt; there should be no ill effects &#40;other than making a typo and silently
&gt; blowing away the plugin list entirely&#41;.
</div>
Ok, I just did this. I&#39;ve attahed a tarball of a trial version with the
fix. I&#39;d appreciate it if you had the time to test it.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Pod-Weaver-Plugin-EnsureUniqueSections-0.121510-TRIAL.tar.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084981/570166/Pod-Weaver-Plugin-EnsureUniqueSections-0.121510-TRIAL.tar.gz">Download Pod-Weaver-Plugin-EnsureUniqueSections-0.121510-TRIAL.tar.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 18.4k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084983" href="/Public/Bug/Display.html?id=77526#txn-1084983">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;20:28:19&nbsp;2012</span>
    <span class="description">cjm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084983/570168/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570168">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 504b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, May 29, 2012 7:16:24 PM, RTHOMPSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ok, I just did this. I&#39;ve attahed a tarball of a trial version with the
&gt; fix. I&#39;d appreciate it if you had the time to test it.
</div>
It&#39;s always best to try running code before releasing it. :-&#41;

Can&#39;t modify non-lvalue subroutine call at
Pod/Weaver/Plugin/EnsureUniqueSections.pm line 51.

However, 

    my $plugins = $self-&gt;weaver-&gt;plugins;
    @$plugins = &#40;&#40;grep { $_ != $self } @$plugins&#41;, $self&#41;;

works just fine.  Sometimes autoboxing is overkill.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084985" href="/Public/Bug/Display.html?id=77526#txn-1084985">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;20:34:36&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084985/570170/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570170">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 740b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 29 20:28:19 2012, CJM wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue, May 29, 2012 7:16:24 PM, RTHOMPSON wrote:
<div class="message-stanza open">&gt; &gt; Ok, I just did this. I&#39;ve attahed a tarball of a trial version with the
&gt; &gt; fix. I&#39;d appreciate it if you had the time to test it.
</div>&gt; 
&gt; It&#39;s always best to try running code before releasing it. :-&#41;
&gt; 
&gt; Can&#39;t modify non-lvalue subroutine call at
&gt; Pod/Weaver/Plugin/EnsureUniqueSections.pm line 51.
&gt; 
&gt; However, 
&gt; 
&gt;     my $plugins = $self-&gt;weaver-&gt;plugins;
&gt;     @$plugins = &#40;&#40;grep { $_ != $self } @$plugins&#41;, $self&#41;;
&gt; 
&gt; works just fine.  Sometimes autoboxing is overkill.
</div>
Yes, testing is good. But I&#39;m not a a place right now where I can easily
run it. Thanks for the working code. I&#39;ll certainly test it before doing
a real release. :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1084991" href="/Public/Bug/Display.html?id=77526#txn-1084991">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;29&nbsp;23:13:20&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1084991/570175/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570175">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 938b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue May 29 20:34:36 2012, RTHOMPSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue May 29 20:28:19 2012, CJM wrote:
<div class="message-stanza open">&gt; &gt; On Tue, May 29, 2012 7:16:24 PM, RTHOMPSON wrote:
<div class="message-stanza open">&gt; &gt; &gt; Ok, I just did this. I&#39;ve attahed a tarball of a trial version
</div></div></div>with the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; fix. I&#39;d appreciate it if you had the time to test it.
</div>&gt; &gt; 
&gt; &gt; It&#39;s always best to try running code before releasing it. :-&#41;
&gt; &gt; 
&gt; &gt; Can&#39;t modify non-lvalue subroutine call at
&gt; &gt; Pod/Weaver/Plugin/EnsureUniqueSections.pm line 51.
&gt; &gt; 
&gt; &gt; However, 
&gt; &gt; 
&gt; &gt;     my $plugins = $self-&gt;weaver-&gt;plugins;
&gt; &gt;     @$plugins = &#40;&#40;grep { $_ != $self } @$plugins&#41;, $self&#41;;
&gt; &gt; 
&gt; &gt; works just fine.  Sometimes autoboxing is overkill.
</div>&gt; 
&gt; Yes, testing is good. But I&#39;m not a a place right now where I can easily
&gt; run it. Thanks for the working code. I&#39;ll certainly test it before doing
&gt; a real release. :&#41;
</div>
In any case, do you think reshuffling the plugin list is the right
solution? Or can you think of a better fix?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086184" href="/Public/Bug/Display.html?id=77526#txn-1086184">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;01&nbsp;19:17:26&nbsp;2012</span>
    <span class="description">cjm [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1086184/570891/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/570891">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 405b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, May 29, 2012 10:13:20 PM, RTHOMPSON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In any case, do you think reshuffling the plugin list is the right
&gt; solution? Or can you think of a better fix?
</div>
I&#39;m not really the right person to ask.  I just started working with
Pod::Weaver a few days ago.  It&#39;s not a very nice solution, but it
should work.

I pointed this ticket out to RJBS on IRC, but I don&#39;t know if he had
time to look at it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086525" href="/Public/Bug/Display.html?id=77526#txn-1086525">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;03&nbsp;15:28:52&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1086525/571074/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/571074">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 155b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok, I just pushed the updated version of this dist, with the fix for
this bug as well as an actual test suite that tests for it. I&#39;m marking
this resolved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1086527" href="/Public/Bug/Display.html?id=77526#txn-1086527">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;03&nbsp;15:28:53&nbsp;2012</span>
    <span class="description">RTHOMPSON [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.661347</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
