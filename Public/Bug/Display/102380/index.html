<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #102380 for Test-DatabaseRow: numeric comparisons against string database values</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #102380 for Test-DatabaseRow: numeric comparisons against string database values</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Test-DatabaseRow/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Test-DatabaseRow/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Test-DatabaseRow/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Test-DatabaseRow/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-DatabaseRow">Test-DatabaseRow CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">102380</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Test-DatabaseRow/Active/">Test-DatabaseRow</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
pickardj79 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31362-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31363-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;26&nbsp;12:43:29&nbsp;2015</span>
    <span class="description">pickardj79 [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> numeric comparisons against string database values</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 26 Feb 2015 12:43:07 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-DatabaseRow [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Pickard &lt;pickardj79 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Test-DatabaseRow-2.04

First, thanks! Thanks for reading this email, thanks for creating and
maintaining Test::DatabaseRow.

I&#39;ve run into an issue with row_ok when tests is an arrayref. The
comparison operation is evaluating to &#39;==&#39; when the expected looks like a
number but the database value is a string. I think this is only an issue
for &#39;==&#39; vs. &#39;eq&#39; &#40;not &gt; vs. &#39;gt&#39;&#41; because equality is assumed when tests
is an arrayref.

Of course this is easiest to explain with an example. For this example I
have a test database as &#39;testing&#39; and have run the following sql:

create table testing.test_databaserow &#40;
    strcol varchar&#40;20&#41; default null
&#41;;

insert into testing.test_databaserow &#40;strcol&#41; values &#40; &#39;11,22&#39; &#41;;


For the following perl code, I would expect the first two tests to fail,
the third to pass. Using Test::DatabaseRow v2.04 the first test passes:

#!/usr/bin/perl

use strict;
use warnings FATAL =&gt; &#39;all&#39;;

use Test::DatabaseRow;
use Test::More tests =&gt; 3;

my $dbh = &lt;YOUR DATABASE HANDLE&gt;;

row_ok&#40;
   sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
   results  =&gt; 1,
   tests    =&gt; [ strcol =&gt; &#39;11&#39; ],
   dbh      =&gt; $dbh,
&#41;;

row_ok&#40;
   sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
   results  =&gt; 1,
   tests    =&gt; [ strcol =&gt; &#39;11,&#39; ],
   dbh      =&gt; $dbh,
&#41;;

row_ok&#40;
   sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
   results  =&gt; 1,
   tests    =&gt; [ strcol =&gt; &#39;11,22&#39; ],
   dbh      =&gt; $dbh,
&#41;;


This issue may be what is referred to as an &#34;annoying case&#34; in the comment
on line 263 of Test::DatabaseRow::Object, however I think it is more than
annoying since it erroneously allows tests to pass. I think the problem &#40;if
you agree it&#39;s a problem&#41; stems from the override of the warning signal
handler on line 399, this is a bit severe for avoiding undef comparisons.
What if this was just a &#34;no warnings &#39;uninitialized&#39;;&#34;? I realize that that
doesn&#39;t really solve the issue &#40;just produces warnings&#41;. Ignoring that,
here are my thoughts as &#34;fixes&#34;:

1&#41; Look at attached Object1.pm. Change $oper to &#34;eq&#34; if either $expect or
$got =~ /\A $RE{num}{real} \z/x on ~line 396 &#40;really only need to do check
with $got, since we already looked at $expect when coercing tests&#41;:
    my $adj_oper = $oper eq &#39;==&#39; &#38;&#38; $got !~ /\A $RE{num}{real} \z/x
        ? &#39;eq&#39;
        : $oper;
    Then change other uses of $oper to $adj_oper, lines 401, 406, 407, and
413-415
    This feels a little bit like a hack to me but it does solve the problem.

2&#41; Look at attached Object2.pm. Use the sig warn to set the test to failed
if a warning other than uninitialized is raised. I implemented this with a
new local variable called $got_warnings which if set will set $passed to 0.
Remove line 399 and add
    my $got_warning;
    no warnings &#39;uninitialized&#39;;
    local $SIG{__WARN__} = sub { $got_warning = 1; }; # $^W not work

    Then add &#34;$passed = 0 if $got_warning;&#34; after the eval. Unfortunately,
the diagnostics for this don&#39;t work because $oper is still &#39;==&#39; so _is_diag
will print the got as a number and the got/expected look the same in the
printout:
    not ok 1 - simple db test
    #   Failed test &#39;simple db test&#39;
    #   at ../Tickets/Testing/Packages/Test_DatabaseRow.pl line 21.
    # While checking column &#39;strcol&#39; on 1st row
    #          got: 11
    #     expected: 11

    I do not have a solution to this diag problem :&#40;. Maybe pass a way to
force printing as strings to_is_diag &#40;ugh... not in Object2.pm&#41;?


Best,
John
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;27&nbsp;15:22:59&nbsp;2015</span>
    <span class="description">jep5m [...] virginia.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102380] AutoReply: numeric comparisons against string database values</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 27 Feb 2015 15:22:46 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-DatabaseRow [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Pickard &lt;jep5m [...] virginia.edu&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry, I now see in the documentation where it quite clearly states that
&#34;Any expected value that looks like a number will be compared numerically&#34;.
However, the documentation also states that &#34;The function will try and Do
The Right Thing&#34; and I&#39;d argue that using a string comparison when the
&#34;got&#34; value is a string is closer to the right thing :&#41;.

Thanks again!
John


On Thu, Feb 26, 2015 at 12:43 PM, Bugs in Test-DatabaseRow via RT &lt;
bug-Test-DatabaseRow@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Greetings,
&gt;
&gt; This message has been automatically generated in response to the
&gt; creation of a trouble ticket regarding:
&gt;         &#34;numeric comparisons against string database values&#34;,
&gt; a summary of which appears below.
&gt;
&gt; There is no need to reply to this message right now.  Your ticket has been
&gt; assigned an ID of [rt.cpan.org #102380].  Your ticket is accessible
&gt; on the web at:
&gt;
&gt;     <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102380">https://rt.cpan.org/Ticket/Display.html?id=102380</a></span>
&gt;
&gt; Please include the string:
&gt;
&gt;          [rt.cpan.org #102380]
&gt;
&gt; in the subject line of all future correspondence about this issue. To do
&gt; so,
&gt; you may reply to this message.
&gt;
&gt;                         Thank you,
&gt;                         bug-Test-DatabaseRow@rt.cpan.org
&gt;
&gt; -------------------------------------------------------------------------
&gt; Test-DatabaseRow-2.04
&gt;
&gt; First, thanks! Thanks for reading this email, thanks for creating and
&gt; maintaining Test::DatabaseRow.
&gt;
&gt; I&#39;ve run into an issue with row_ok when tests is an arrayref. The
&gt; comparison operation is evaluating to &#39;==&#39; when the expected looks like a
&gt; number but the database value is a string. I think this is only an issue
&gt; for &#39;==&#39; vs. &#39;eq&#39; &#40;not &gt; vs. &#39;gt&#39;&#41; because equality is assumed when tests
&gt; is an arrayref.
&gt;
&gt; Of course this is easiest to explain with an example. For this example I
&gt; have a test database as &#39;testing&#39; and have run the following sql:
&gt;
&gt; create table testing.test_databaserow &#40;
&gt;     strcol varchar&#40;20&#41; default null
&gt; &#41;;
&gt;
&gt; insert into testing.test_databaserow &#40;strcol&#41; values &#40; &#39;11,22&#39; &#41;;
&gt;
&gt;
&gt; For the following perl code, I would expect the first two tests to fail,
&gt; the third to pass. Using Test::DatabaseRow v2.04 the first test passes:
&gt;
&gt; #!/usr/bin/perl
&gt;
&gt; use strict;
&gt; use warnings FATAL =&gt; &#39;all&#39;;
&gt;
&gt; use Test::DatabaseRow;
&gt; use Test::More tests =&gt; 3;
&gt;
&gt; my $dbh = &lt;YOUR DATABASE HANDLE&gt;;
&gt;
&gt; row_ok&#40;
&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt;    results  =&gt; 1,
&gt;    tests    =&gt; [ strcol =&gt; &#39;11&#39; ],
&gt;    dbh      =&gt; $dbh,
&gt; &#41;;
&gt;
&gt; row_ok&#40;
&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt;    results  =&gt; 1,
&gt;    tests    =&gt; [ strcol =&gt; &#39;11,&#39; ],
&gt;    dbh      =&gt; $dbh,
&gt; &#41;;
&gt;
&gt; row_ok&#40;
&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt;    results  =&gt; 1,
&gt;    tests    =&gt; [ strcol =&gt; &#39;11,22&#39; ],
&gt;    dbh      =&gt; $dbh,
&gt; &#41;;
&gt;
&gt;
&gt; This issue may be what is referred to as an &#34;annoying case&#34; in the comment
&gt; on line 263 of Test::DatabaseRow::Object, however I think it is more than
&gt; annoying since it erroneously allows tests to pass. I think the problem &#40;if
&gt; you agree it&#39;s a problem&#41; stems from the override of the warning signal
&gt; handler on line 399, this is a bit severe for avoiding undef comparisons.
&gt; What if this was just a &#34;no warnings &#39;uninitialized&#39;;&#34;? I realize that that
&gt; doesn&#39;t really solve the issue &#40;just produces warnings&#41;. Ignoring that,
&gt; here are my thoughts as &#34;fixes&#34;:
&gt;
&gt; 1&#41; Look at attached Object1.pm. Change $oper to &#34;eq&#34; if either $expect or
&gt; $got =~ /\A $RE{num}{real} \z/x on ~line 396 &#40;really only need to do check
&gt; with $got, since we already looked at $expect when coercing tests&#41;:
&gt;     my $adj_oper = $oper eq &#39;==&#39; &#38;&#38; $got !~ /\A $RE{num}{real} \z/x
&gt;         ? &#39;eq&#39;
&gt;         : $oper;
&gt;     Then change other uses of $oper to $adj_oper, lines 401, 406, 407, and
&gt; 413-415
&gt;     This feels a little bit like a hack to me but it does solve the
&gt; problem.
&gt;
&gt; 2&#41; Look at attached Object2.pm. Use the sig warn to set the test to failed
&gt; if a warning other than uninitialized is raised. I implemented this with a
&gt; new local variable called $got_warnings which if set will set $passed to 0.
&gt; Remove line 399 and add
&gt;     my $got_warning;
&gt;     no warnings &#39;uninitialized&#39;;
&gt;     local $SIG{__WARN__} = sub { $got_warning = 1; }; # $^W not work
&gt;
&gt;     Then add &#34;$passed = 0 if $got_warning;&#34; after the eval. Unfortunately,
&gt; the diagnostics for this don&#39;t work because $oper is still &#39;==&#39; so _is_diag
&gt; will print the got as a number and the got/expected look the same in the
&gt; printout:
&gt;     not ok 1 - simple db test
&gt;     #   Failed test &#39;simple db test&#39;
&gt;     #   at ../Tickets/Testing/Packages/Test_DatabaseRow.pl line 21.
&gt;     # While checking column &#39;strcol&#39; on 1st row
&gt;     #          got: 11
&gt;     #     expected: 11
&gt;
&gt;     I do not have a solution to this diag problem :&#40;. Maybe pass a way to
&gt; force printing as strings to_is_diag &#40;ugh... not in Object2.pm&#41;?
&gt;
&gt;
&gt; Best,
&gt; John
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;27&nbsp;15:23:00&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;01&nbsp;09:25:09&nbsp;2015</span>
    <span class="description">mark [...] twoshortplanks.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102380] AutoReply: numeric comparisons against string database values</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 1 Mar 2015 09:24:34 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-DatabaseRow [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Fowler &lt;mark [...] twoshortplanks.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi John,

So I&#39;ve been thinking about this a lot over the last few days.

Here&#39;s the thing: I don&#39;t want the behaviour to change based on what
the database returned.  I expect the &#34;mode&#34; we&#39;re in to be
deterministic just from the Perl side.  Having the mode change based
on what the return data is seems to lead us down the
smart-match-is-too-clever problem.

OTOH, I see your point.  While 11 and 11.0 should probably match, 11
and 11,12 should probably not.  What we could do is add smarts to
_also_ check that the database return value looks like a number when
in numeric mode.

This leads us onto another problem.  We&#39;d need to work out an API that
allowed explicitly turning on this mode as well.  Which in turn leads
us onto the problem of reworking the API so we could have arbitrary
comparisons.  This is a long standing issue that I wanted to look into
because Test::DatabaseRow currently assumes each column value is a
plain old scalar, but with databases like postgres they can be entire
arrayrefs or more complex data structures and that obviously lend
itself to more complex comparisons in turn.

I&#39;m going to think about this some more.

Mark.


On Fri, Feb 27, 2015 at 3:23 PM, John Pickard via RT
&lt;bug-Test-DatabaseRow@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Test-DatabaseRow
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102380">https://rt.cpan.org/Ticket/Display.html?id=102380</a></span> &gt;
&gt;
&gt; Sorry, I now see in the documentation where it quite clearly states that
&gt; &#34;Any expected value that looks like a number will be compared numerically&#34;.
&gt; However, the documentation also states that &#34;The function will try and Do
&gt; The Right Thing&#34; and I&#39;d argue that using a string comparison when the
&gt; &#34;got&#34; value is a string is closer to the right thing :&#41;.
&gt;
&gt; Thanks again!
&gt; John
&gt;
&gt;
&gt; On Thu, Feb 26, 2015 at 12:43 PM, Bugs in Test-DatabaseRow via RT &lt;
&gt; bug-Test-DatabaseRow@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt;&gt;
&gt;&gt; Greetings,
&gt;&gt;
&gt;&gt; This message has been automatically generated in response to the
&gt;&gt; creation of a trouble ticket regarding:
&gt;&gt;         &#34;numeric comparisons against string database values&#34;,
&gt;&gt; a summary of which appears below.
&gt;&gt;
&gt;&gt; There is no need to reply to this message right now.  Your ticket has been
&gt;&gt; assigned an ID of [rt.cpan.org #102380].  Your ticket is accessible
&gt;&gt; on the web at:
&gt;&gt;
&gt;&gt;     <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102380">https://rt.cpan.org/Ticket/Display.html?id=102380</a></span>
&gt;&gt;
&gt;&gt; Please include the string:
&gt;&gt;
&gt;&gt;          [rt.cpan.org #102380]
&gt;&gt;
&gt;&gt; in the subject line of all future correspondence about this issue. To do
&gt;&gt; so,
&gt;&gt; you may reply to this message.
&gt;&gt;
&gt;&gt;                         Thank you,
&gt;&gt;                         bug-Test-DatabaseRow@rt.cpan.org
&gt;&gt;
&gt;&gt; -------------------------------------------------------------------------
&gt;&gt; Test-DatabaseRow-2.04
&gt;&gt;
&gt;&gt; First, thanks! Thanks for reading this email, thanks for creating and
&gt;&gt; maintaining Test::DatabaseRow.
&gt;&gt;
&gt;&gt; I&#39;ve run into an issue with row_ok when tests is an arrayref. The
&gt;&gt; comparison operation is evaluating to &#39;==&#39; when the expected looks like a
&gt;&gt; number but the database value is a string. I think this is only an issue
&gt;&gt; for &#39;==&#39; vs. &#39;eq&#39; &#40;not &gt; vs. &#39;gt&#39;&#41; because equality is assumed when tests
&gt;&gt; is an arrayref.
&gt;&gt;
&gt;&gt; Of course this is easiest to explain with an example. For this example I
&gt;&gt; have a test database as &#39;testing&#39; and have run the following sql:
&gt;&gt;
&gt;&gt; create table testing.test_databaserow &#40;
&gt;&gt;     strcol varchar&#40;20&#41; default null
&gt;&gt; &#41;;
&gt;&gt;
&gt;&gt; insert into testing.test_databaserow &#40;strcol&#41; values &#40; &#39;11,22&#39; &#41;;
&gt;&gt;
&gt;&gt;
&gt;&gt; For the following perl code, I would expect the first two tests to fail,
&gt;&gt; the third to pass. Using Test::DatabaseRow v2.04 the first test passes:
&gt;&gt;
&gt;&gt; #!/usr/bin/perl
&gt;&gt;
&gt;&gt; use strict;
&gt;&gt; use warnings FATAL =&gt; &#39;all&#39;;
&gt;&gt;
&gt;&gt; use Test::DatabaseRow;
&gt;&gt; use Test::More tests =&gt; 3;
&gt;&gt;
&gt;&gt; my $dbh = &lt;YOUR DATABASE HANDLE&gt;;
&gt;&gt;
&gt;&gt; row_ok&#40;
&gt;&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt;&gt;    results  =&gt; 1,
&gt;&gt;    tests    =&gt; [ strcol =&gt; &#39;11&#39; ],
&gt;&gt;    dbh      =&gt; $dbh,
&gt;&gt; &#41;;
&gt;&gt;
&gt;&gt; row_ok&#40;
&gt;&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt;&gt;    results  =&gt; 1,
&gt;&gt;    tests    =&gt; [ strcol =&gt; &#39;11,&#39; ],
&gt;&gt;    dbh      =&gt; $dbh,
&gt;&gt; &#41;;
&gt;&gt;
&gt;&gt; row_ok&#40;
&gt;&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt;&gt;    results  =&gt; 1,
&gt;&gt;    tests    =&gt; [ strcol =&gt; &#39;11,22&#39; ],
&gt;&gt;    dbh      =&gt; $dbh,
&gt;&gt; &#41;;
&gt;&gt;
&gt;&gt;
&gt;&gt; This issue may be what is referred to as an &#34;annoying case&#34; in the comment
&gt;&gt; on line 263 of Test::DatabaseRow::Object, however I think it is more than
&gt;&gt; annoying since it erroneously allows tests to pass. I think the problem &#40;if
&gt;&gt; you agree it&#39;s a problem&#41; stems from the override of the warning signal
&gt;&gt; handler on line 399, this is a bit severe for avoiding undef comparisons.
&gt;&gt; What if this was just a &#34;no warnings &#39;uninitialized&#39;;&#34;? I realize that that
&gt;&gt; doesn&#39;t really solve the issue &#40;just produces warnings&#41;. Ignoring that,
&gt;&gt; here are my thoughts as &#34;fixes&#34;:
&gt;&gt;
&gt;&gt; 1&#41; Look at attached Object1.pm. Change $oper to &#34;eq&#34; if either $expect or
&gt;&gt; $got =~ /\A $RE{num}{real} \z/x on ~line 396 &#40;really only need to do check
&gt;&gt; with $got, since we already looked at $expect when coercing tests&#41;:
&gt;&gt;     my $adj_oper = $oper eq &#39;==&#39; &#38;&#38; $got !~ /\A $RE{num}{real} \z/x
&gt;&gt;         ? &#39;eq&#39;
&gt;&gt;         : $oper;
&gt;&gt;     Then change other uses of $oper to $adj_oper, lines 401, 406, 407, and
&gt;&gt; 413-415
&gt;&gt;     This feels a little bit like a hack to me but it does solve the
&gt;&gt; problem.
&gt;&gt;
&gt;&gt; 2&#41; Look at attached Object2.pm. Use the sig warn to set the test to failed
&gt;&gt; if a warning other than uninitialized is raised. I implemented this with a
&gt;&gt; new local variable called $got_warnings which if set will set $passed to 0.
&gt;&gt; Remove line 399 and add
&gt;&gt;     my $got_warning;
&gt;&gt;     no warnings &#39;uninitialized&#39;;
&gt;&gt;     local $SIG{__WARN__} = sub { $got_warning = 1; }; # $^W not work
&gt;&gt;
&gt;&gt;     Then add &#34;$passed = 0 if $got_warning;&#34; after the eval. Unfortunately,
&gt;&gt; the diagnostics for this don&#39;t work because $oper is still &#39;==&#39; so _is_diag
&gt;&gt; will print the got as a number and the got/expected look the same in the
&gt;&gt; printout:
&gt;&gt;     not ok 1 - simple db test
&gt;&gt;     #   Failed test &#39;simple db test&#39;
&gt;&gt;     #   at ../Tickets/Testing/Packages/Test_DatabaseRow.pl line 21.
&gt;&gt;     # While checking column &#39;strcol&#39; on 1st row
&gt;&gt;     #          got: 11
&gt;&gt;     #     expected: 11
&gt;&gt;
&gt;&gt;     I do not have a solution to this diag problem :&#40;. Maybe pass a way to
&gt;&gt; force printing as strings to_is_diag &#40;ugh... not in Object2.pm&#41;?
&gt;&gt;
&gt;&gt;
&gt;&gt; Best,
&gt;&gt; John
&gt;&gt;
</div>&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;03&nbsp;09:47:43&nbsp;2015</span>
    <span class="description">jep5m [...] virginia.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102380] AutoReply: numeric comparisons against string database values</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 3 Mar 2015 09:47:26 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-DatabaseRow [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Pickard &lt;jep5m [...] virginia.edu&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Mark,

I also don&#39;t like changing the mode and I think your &#34;_also_&#34; check is
great solution.

Why must the interface change to explicitly turn on the
numbers-compare-as-numbers-and-don&#39;t-equate-to-strings mode? Seems like
this would be the expected behavior. Previously passing tests would fail,
but they would fail correctly, right? Of course, this is from my naive and
narrow-minded view point, I have no experience designing/maintaining
modules used by thousands of people!

- John




On Sun, Mar 1, 2015 at 9:25 AM, mark@twoshortplanks.com via RT &lt;
bug-Test-DatabaseRow@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102380">https://rt.cpan.org/Ticket/Display.html?id=102380</a></span> &gt;
&gt;
&gt; Hi John,
&gt;
&gt; So I&#39;ve been thinking about this a lot over the last few days.
&gt;
&gt; Here&#39;s the thing: I don&#39;t want the behaviour to change based on what
&gt; the database returned.  I expect the &#34;mode&#34; we&#39;re in to be
&gt; deterministic just from the Perl side.  Having the mode change based
&gt; on what the return data is seems to lead us down the
&gt; smart-match-is-too-clever problem.
&gt;
&gt; OTOH, I see your point.  While 11 and 11.0 should probably match, 11
&gt; and 11,12 should probably not.  What we could do is add smarts to
&gt; _also_ check that the database return value looks like a number when
&gt; in numeric mode.
&gt;
&gt; This leads us onto another problem.  We&#39;d need to work out an API that
&gt; allowed explicitly turning on this mode as well.  Which in turn leads
&gt; us onto the problem of reworking the API so we could have arbitrary
&gt; comparisons.  This is a long standing issue that I wanted to look into
&gt; because Test::DatabaseRow currently assumes each column value is a
&gt; plain old scalar, but with databases like postgres they can be entire
&gt; arrayrefs or more complex data structures and that obviously lend
&gt; itself to more complex comparisons in turn.
&gt;
&gt; I&#39;m going to think about this some more.
&gt;
&gt; Mark.
&gt;
&gt;
&gt; On Fri, Feb 27, 2015 at 3:23 PM, John Pickard via RT
&gt; &lt;bug-Test-DatabaseRow@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt;        Queue: Test-DatabaseRow
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102380">https://rt.cpan.org/Ticket/Display.html?id=102380</a></span> &gt;
&gt; &gt;
&gt; &gt; Sorry, I now see in the documentation where it quite clearly states that
&gt; &gt; &#34;Any expected value that looks like a number will be compared
</div>&gt; numerically&#34;.
<div class="message-stanza open">&gt; &gt; However, the documentation also states that &#34;The function will try and Do
&gt; &gt; The Right Thing&#34; and I&#39;d argue that using a string comparison when the
&gt; &gt; &#34;got&#34; value is a string is closer to the right thing :&#41;.
&gt; &gt;
&gt; &gt; Thanks again!
&gt; &gt; John
&gt; &gt;
&gt; &gt;
&gt; &gt; On Thu, Feb 26, 2015 at 12:43 PM, Bugs in Test-DatabaseRow via RT &lt;
&gt; &gt; bug-Test-DatabaseRow@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt;
&gt; &gt;&gt; Greetings,
&gt; &gt;&gt;
&gt; &gt;&gt; This message has been automatically generated in response to the
&gt; &gt;&gt; creation of a trouble ticket regarding:
&gt; &gt;&gt;         &#34;numeric comparisons against string database values&#34;,
&gt; &gt;&gt; a summary of which appears below.
&gt; &gt;&gt;
&gt; &gt;&gt; There is no need to reply to this message right now.  Your ticket has
</div></div>&gt; been
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; assigned an ID of [rt.cpan.org #102380].  Your ticket is accessible
&gt; &gt;&gt; on the web at:
&gt; &gt;&gt;
&gt; &gt;&gt;     <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102380">https://rt.cpan.org/Ticket/Display.html?id=102380</a></span>
&gt; &gt;&gt;
&gt; &gt;&gt; Please include the string:
&gt; &gt;&gt;
&gt; &gt;&gt;          [rt.cpan.org #102380]
&gt; &gt;&gt;
&gt; &gt;&gt; in the subject line of all future correspondence about this issue. To do
&gt; &gt;&gt; so,
&gt; &gt;&gt; you may reply to this message.
&gt; &gt;&gt;
&gt; &gt;&gt;                         Thank you,
&gt; &gt;&gt;                         bug-Test-DatabaseRow@rt.cpan.org
&gt; &gt;&gt;
&gt; &gt;&gt;
</div></div>&gt; -------------------------------------------------------------------------
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; Test-DatabaseRow-2.04
&gt; &gt;&gt;
&gt; &gt;&gt; First, thanks! Thanks for reading this email, thanks for creating and
&gt; &gt;&gt; maintaining Test::DatabaseRow.
&gt; &gt;&gt;
&gt; &gt;&gt; I&#39;ve run into an issue with row_ok when tests is an arrayref. The
&gt; &gt;&gt; comparison operation is evaluating to &#39;==&#39; when the expected looks like
</div></div>&gt; a
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; number but the database value is a string. I think this is only an issue
&gt; &gt;&gt; for &#39;==&#39; vs. &#39;eq&#39; &#40;not &gt; vs. &#39;gt&#39;&#41; because equality is assumed when
</div></div>&gt; tests
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; is an arrayref.
&gt; &gt;&gt;
&gt; &gt;&gt; Of course this is easiest to explain with an example. For this example I
&gt; &gt;&gt; have a test database as &#39;testing&#39; and have run the following sql:
&gt; &gt;&gt;
&gt; &gt;&gt; create table testing.test_databaserow &#40;
&gt; &gt;&gt;     strcol varchar&#40;20&#41; default null
&gt; &gt;&gt; &#41;;
&gt; &gt;&gt;
&gt; &gt;&gt; insert into testing.test_databaserow &#40;strcol&#41; values &#40; &#39;11,22&#39; &#41;;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; For the following perl code, I would expect the first two tests to fail,
&gt; &gt;&gt; the third to pass. Using Test::DatabaseRow v2.04 the first test passes:
&gt; &gt;&gt;
&gt; &gt;&gt; #!/usr/bin/perl
&gt; &gt;&gt;
&gt; &gt;&gt; use strict;
&gt; &gt;&gt; use warnings FATAL =&gt; &#39;all&#39;;
&gt; &gt;&gt;
&gt; &gt;&gt; use Test::DatabaseRow;
&gt; &gt;&gt; use Test::More tests =&gt; 3;
&gt; &gt;&gt;
&gt; &gt;&gt; my $dbh = &lt;YOUR DATABASE HANDLE&gt;;
&gt; &gt;&gt;
&gt; &gt;&gt; row_ok&#40;
&gt; &gt;&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt; &gt;&gt;    results  =&gt; 1,
&gt; &gt;&gt;    tests    =&gt; [ strcol =&gt; &#39;11&#39; ],
&gt; &gt;&gt;    dbh      =&gt; $dbh,
&gt; &gt;&gt; &#41;;
&gt; &gt;&gt;
&gt; &gt;&gt; row_ok&#40;
&gt; &gt;&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt; &gt;&gt;    results  =&gt; 1,
&gt; &gt;&gt;    tests    =&gt; [ strcol =&gt; &#39;11,&#39; ],
&gt; &gt;&gt;    dbh      =&gt; $dbh,
&gt; &gt;&gt; &#41;;
&gt; &gt;&gt;
&gt; &gt;&gt; row_ok&#40;
&gt; &gt;&gt;    sql      =&gt; &#34;select strcol from testing.test_databaserow&#34;,
&gt; &gt;&gt;    results  =&gt; 1,
&gt; &gt;&gt;    tests    =&gt; [ strcol =&gt; &#39;11,22&#39; ],
&gt; &gt;&gt;    dbh      =&gt; $dbh,
&gt; &gt;&gt; &#41;;
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; This issue may be what is referred to as an &#34;annoying case&#34; in the
</div></div>&gt; comment
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; on line 263 of Test::DatabaseRow::Object, however I think it is more
</div></div>&gt; than
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; annoying since it erroneously allows tests to pass. I think the problem
</div></div>&gt; &#40;if
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; you agree it&#39;s a problem&#41; stems from the override of the warning signal
&gt; &gt;&gt; handler on line 399, this is a bit severe for avoiding undef
</div></div>&gt; comparisons.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; What if this was just a &#34;no warnings &#39;uninitialized&#39;;&#34;? I realize that
</div></div>&gt; that
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; doesn&#39;t really solve the issue &#40;just produces warnings&#41;. Ignoring that,
&gt; &gt;&gt; here are my thoughts as &#34;fixes&#34;:
&gt; &gt;&gt;
&gt; &gt;&gt; 1&#41; Look at attached Object1.pm. Change $oper to &#34;eq&#34; if either $expect
</div></div>&gt; or
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; $got =~ /\A $RE{num}{real} \z/x on ~line 396 &#40;really only need to do
</div></div>&gt; check
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; with $got, since we already looked at $expect when coercing tests&#41;:
&gt; &gt;&gt;     my $adj_oper = $oper eq &#39;==&#39; &#38;&#38; $got !~ /\A $RE{num}{real} \z/x
&gt; &gt;&gt;         ? &#39;eq&#39;
&gt; &gt;&gt;         : $oper;
&gt; &gt;&gt;     Then change other uses of $oper to $adj_oper, lines 401, 406, 407,
</div></div>&gt; and
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; 413-415
&gt; &gt;&gt;     This feels a little bit like a hack to me but it does solve the
&gt; &gt;&gt; problem.
&gt; &gt;&gt;
&gt; &gt;&gt; 2&#41; Look at attached Object2.pm. Use the sig warn to set the test to
</div></div>&gt; failed
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; if a warning other than uninitialized is raised. I implemented this
</div></div>&gt; with a
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; new local variable called $got_warnings which if set will set $passed
</div></div>&gt; to 0.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; Remove line 399 and add
&gt; &gt;&gt;     my $got_warning;
&gt; &gt;&gt;     no warnings &#39;uninitialized&#39;;
&gt; &gt;&gt;     local $SIG{__WARN__} = sub { $got_warning = 1; }; # $^W not work
&gt; &gt;&gt;
&gt; &gt;&gt;     Then add &#34;$passed = 0 if $got_warning;&#34; after the eval.
</div></div>&gt; Unfortunately,
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; the diagnostics for this don&#39;t work because $oper is still &#39;==&#39; so
</div></div>&gt; _is_diag
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; will print the got as a number and the got/expected look the same in the
&gt; &gt;&gt; printout:
&gt; &gt;&gt;     not ok 1 - simple db test
&gt; &gt;&gt;     #   Failed test &#39;simple db test&#39;
&gt; &gt;&gt;     #   at ../Tickets/Testing/Packages/Test_DatabaseRow.pl line 21.
&gt; &gt;&gt;     # While checking column &#39;strcol&#39; on 1st row
&gt; &gt;&gt;     #          got: 11
&gt; &gt;&gt;     #     expected: 11
&gt; &gt;&gt;
&gt; &gt;&gt;     I do not have a solution to this diag problem :&#40;. Maybe pass a way
</div></div>&gt; to
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; force printing as strings to_is_diag &#40;ugh... not in Object2.pm&#41;?
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Best,
&gt; &gt;&gt; John
&gt; &gt;&gt;
</div>&gt; &gt;
</div>&gt;
&gt;
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
