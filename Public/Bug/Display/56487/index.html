<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #56487 for Image-ExifTool: Does not preserve file permissions when altering file</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #56487 for Image-ExifTool: Does not preserve file permissions when altering file</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Image-ExifTool">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Image-ExifTool">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Image-ExifTool">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Image-ExifTool">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Image-ExifTool">Image-ExifTool CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">56487</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1 hour (60 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Image-ExifTool">Image-ExifTool</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">EXIFTOOL [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
rrt [...] sc3d.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-16626-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
8.15    </td>
  </tr>
  <tr id="CF-16627-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
8.40    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=56487">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-761601" href="/Public/Bug/Display.html?id=56487#txn-761601">#</a>      
    </span>
    <span class="date">Sun&nbsp;Apr&nbsp;11&nbsp;14:33:53&nbsp;2010</span>
    <span class="description">rrt [...] sc3d.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Does not preserve file permissions when altering file</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/761601/393959/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/393959">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 132b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">WriteInfo seems to mask the current permissions with my umask, rather
than preserving the file permissions, when updating EXIF tags.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762031" href="/Public/Bug/Display.html?id=56487#txn-762031">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;08:55:56&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/762031/394197/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394197">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 908b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Apr 11 14:33:53 2010, rrt wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; WriteInfo seems to mask the current permissions with my umask, rather
&gt; than preserving the file permissions, when updating EXIF tags.
</div>
I&#39;m not sure whether I should consider this a bug or not.

ExifTool creates a new file when any tag is written.  &#40;Although if you are using the application 
-overwrite_original option or passing a single file as an argument to WriteInfo&#40;&#41; then the new 
file is renamed to replace the original.&#41;

The application has a -P option to preserve the file modify date, but I have made no 
provision for preserving any other file attributes.  &#40;Other than the -
overwrite_original_in_place option which has a big performance impact so I don&#39;t consider 
this a real solution.&#41;

If you are using the API, it is up to you to preserve any attributes you want.

I don&#39;t think this is unreasonable, although I am open to other opinions.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762033" href="/Public/Bug/Display.html?id=56487#txn-762033">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;08:55:57&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762047" href="/Public/Bug/Display.html?id=56487#txn-762047">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;10:05:39&nbsp;2010</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rrt [...] sc3d.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/762047/394204/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394204">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 12 08:55:56 2010, EXIFTOOL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Apr 11 14:33:53 2010, rrt wrote:
<div class="message-stanza open">&gt; &gt; WriteInfo seems to mask the current permissions with my umask,
</div>&gt; rather
<div class="message-stanza open">&gt; &gt; than preserving the file permissions, when updating EXIF tags.
</div>&gt; 
&gt; I&#39;m not sure whether I should consider this a bug or not.
</div>
I&#39;m going to try to convince you you should.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ExifTool creates a new file when any tag is written.  &#40;Although if you
&gt; are using the application
&gt; -overwrite_original option or passing a single file as an argument to
&gt; WriteInfo&#40;&#41; then the new
&gt; file is renamed to replace the original.&#41;
</div>
Image::ExifTool is for extracting and modifying metadata. I think
there&#39;s a reasonable expectation that when you see something like:

$exifTool-&gt;WriteInfo&#40;$file&#41;;

one expects the semantics to be that the file is updated, not recreated.
&#40;Of course, creating a new file and then copying it over the old one is
an established and respectable way of implementing this.&#41;

This is similar to when one edits a file in an editor. One expects the
timestamp to be updated, but not the owner or permissions.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The application has a -P option to preserve the file modify date,
</div>
This I find odd, actually: the date of taking the picture should be in
the EXIF tags, and when one updates the tags, the file is modified, so
why would one want to preserve the mtime?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you are using the API, it is up to you to preserve any attributes
&gt; you want.
&gt; 
&gt; I don&#39;t think this is unreasonable, although I am open to other
&gt; opinions.
</div>
Are there any good reasons NOT to preserve file metadata? We haven&#39;t
even talked about extended attributes, which are increasingly used on
images &#40;e.g. by search daemons&#41;, which annoyingly many programs happily
ignore.

I agree that it&#39;s a bit of a pain that applications currently have to
reinvent the wheel when all they want is something quite simple, but
having said that it&#39;s not much of a wheel to reinvent.

I am in two minds about this myself. I can happily code what I want in
my script, but it&#39;s a bit of a pain if I have to do this every time I
use Image::ExifTool. Fixing it in Image::ExifTool would have the good
effect of automatically making a lot of scripts written using it DTRT.

On the other hand, were I the module author, I&#39;d prefer to have standard
calls to do this &#40;by &#34;this&#34; I mean &#34;create a temporary file, then later
use it to replace an existing file&#34;&#41;, rather than risk doing it wrong.

I see there are some notes here:

<span class="clickylink"><a target="new" rel="nofollow" href="http://sial.org/howto/perl/tmp-files/">http://sial.org/howto/perl/tmp-files/</a></span>

In particular:

&#34;Use modules such as File::MMap or IO::String to keep the data in
memory. This may not be an option in all cases, but should be faster
than touching the filesystem, and will avoid any filesystem related
security problems. In recent versions of Perl, the open function now has
options to open files in memory or to anonymous files on the filesystem.
For more information, see perlopentut and perlfunc.&#34;

Could any of this apply to you? In particular, are you avoiding all
those security holes? The source code is sufficiently involved that I
can&#39;t easily tell...

For now I guess I&#39;ll do my own attribute copying.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762080" href="/Public/Bug/Display.html?id=56487#txn-762080">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;10:41:17&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/762080/394227/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394227">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 12 10:05:39 2010, rrt wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the file is modified, so
&gt; why would one want to preserve the mtime?
</div>
I know I use mtime myself for sorting images, and they sort wrong if this is changed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Are there any good reasons NOT to preserve file metadata?
</div>
I would call this filesystem metadata, as opposed to metadata contained within the file itself.  
The only reason not to preserve this is that I don&#39;t know how to do this in a system 
independent way without a big performance impact.  Remember, this must work on Windows 
and Mac systems too.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; We haven&#39;t even talked about extended attributes,
&gt; which are increasingly used on images &#40;e.g. by search
&gt; daemons&#41;, which annoyingly many programs happily
&gt; ignore.
</div>
I looked into how I could preserve the permissions, and this is quite easy using the standard 
Perl functions fstat and chmod.  But then there are other things like the user/group 
ownership that I haven&#39;t looked into yet, and I don&#39;t know anything about these extended 
attributes that you mentioned.  Also on Mac systems there are things like file creation date 
&#40;ouch! -- no standard Perl functions to handle this one!&#41;, file comments, icon position, etc, 
etc.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Use modules such as File::MMap or IO::String to keep the
&gt; data in memory. This may not be an option in all cases, but 
&gt; should be faster than touching the filesystem, and will avoid
&gt; any filesystem related security problems. In recent versions
&gt; of Perl, the open function now has options to open files in
&gt; memory or to anonymous files on the filesystem.
&gt; For more information, see perlopentut and perlfunc.&#34;
&gt; 
&gt; Could any of this apply to you? In particular, are you avoiding
&gt; all those security holes? The source code is sufficiently 
&gt; involved that I can&#39;t easily tell...
</div>
I don&#39;t know what security problems they are talking about.  I would recommend specifying 
an output file for WriteInfo&#40;&#41; and handling this yourself.  It is for convenience that I added the 
ability for WriteInfo&#40;&#41; to overwrite the original file, but I don&#39;t really recommend this use.  FYI, 
my algorithm is the following if no output file is specified:

1&#41; Create new file with name &#34;INFILE_exiftool_tmp&#34;.

2&#41; Rewrite the input file to the temporary file, changing any specified information in the 
process.

3&#41; If the temporary file was written with no errors, then use Perl&#39;s rename function to replace 
the original file with the temporary file.  ie&#41; rename&#40;&#34;${infile}_exiftool_tmp&#34;, $infile&#41;;

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762099" href="/Public/Bug/Display.html?id=56487#txn-762099">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;11:16:20&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/762099/394246/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394246">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 735b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 12 10:41:17 2010, EXIFTOOL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; FYI, my algorithm is the following if no output
&gt; file is specified:
</div>
Actually, I just checked the documentation and hopefully this was fairly clear:

&#34;The destination file name may be undefined to edit the source file in place &#40;make sure you 
have backups!&#41;.  In this case, if a source file name is provided, a temporary file is created and 
renamed to replace the source file if no errors occurred while writing.&#34;

You&#39;re right that the semantics of WriteInfo&#40;&#41; may suggest otherwise, but if I can make the 
documentation more clear, please let me know.  &#40;Also, please let me know if there is a 
platform independent technique which allows the file attributes to be preserved!&#41;

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762101" href="/Public/Bug/Display.html?id=56487#txn-762101">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;11:27:08&nbsp;2010</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #56487] Does not preserve file permissions when  altering file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 12 Apr 2010 16:26:50 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Image-ExifTool &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Reuben Thomas &lt;rrt [...] sc3d.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/762101/394248/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394248">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 12 April 2010 15:41:18 UTC+1, Phil Harvey via RT
&lt;bug-Image-ExifTool@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56487">https://rt.cpan.org/Ticket/Display.html?id=56487</a></span> &gt;
&gt;
&gt; On Mon Apr 12 10:05:39 2010, rrt wrote:
<div class="message-stanza open">&gt;&gt; the file is modified, so
&gt;&gt; why would one want to preserve the mtime?
</div>&gt;
&gt; I know I use mtime myself for sorting images, and they sort wrong if this is changed.
</div>
Fair enough.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Are there any good reasons NOT to preserve file metadata?
</div>&gt;
&gt; I would call this filesystem metadata,
</div>
Sorry, my sloppiness.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The only reason not to preserve this is that I don&#39;t know how to do this in a system
&gt; independent way without a big performance impact.  Remember, this must work on Windows
&gt; and Mac systems too.
</div>
OK, but supporting some of them, as you say below:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I looked into how I could preserve the permissions, and this is quite easy using the standard
&gt; Perl functions fstat and chmod.  But then there are other things like the user/group
&gt; ownership that I haven&#39;t looked into yet,
</div>
This is easy with standard perl stat/chown.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; and I don&#39;t know anything about these extended
&gt; attributes that you mentioned.
</div>
File::ExtAttr handles these. One could easily support them only on
systems that have them.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  Also on Mac systems there are things like file creation date
&gt; &#40;ouch! -- no standard Perl functions to handle this one!&#41;, file comments, icon position, etc,
&gt; etc.
</div>
So, this needs extra, system-dependent support. But it&#39;s no disaster
if at least at first things like this aren&#39;t supported.

I came up with a simple extensible API for handling this:

# Get attributes of a file
# N.B. Treat return values as a list, don&#39;t rely on the actual values here
# i.e. call attrs_set&#40;$file1, attrs_get&#40;$file2&#41;&#41;, that way the
# attributes saved can be extended without breaking the API.
# FIXME: Support extended attributes.
sub attrs_get {
  my &#40;$file&#41; = @_;
  my &#40;$mode, $uid, $gid&#41; = &#40;stat&#40;$file&#41;&#41;[2, 4, 5];
  $mode = $mode &#38; 07777;
  return $mode, $uid, $gid;
}

# Set attributes of a file previously saved with attrs_save
#  file: file to set attributes of
#  ...: attributes list returned by attrs_get
sub attrs_set {
  my &#40;$file, $mode, $uid, $gid&#41; = @_;
  chmod $mode, $file;
  chown $uid, $gid, $file;
}

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t know what security problems they are talking about.
</div>
Is there something unclear on that page? For starters:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 1&#41; Create new file with name &#34;INFILE_exiftool_tmp&#34;.
</div>
Oops. This is attackable. Use File::Temp or similar for secure
temporary file creation.

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://rrt.sc3d.org">http://rrt.sc3d.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762130" href="/Public/Bug/Display.html?id=56487#txn-762130">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;12:11:31&nbsp;2010</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #56487] Does not preserve file permissions when  altering file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 12 Apr 2010 17:11:14 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Image-ExifTool &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Reuben Thomas &lt;rrt [...] sc3d.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/762130/394267/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394267">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 12 April 2010 16:16, Phil Harvey via RT
&lt;bug-Image-ExifTool@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56487">https://rt.cpan.org/Ticket/Display.html?id=56487</a></span> &gt;
&gt;
&gt; On Mon Apr 12 10:41:17 2010, EXIFTOOL wrote:
<div class="message-stanza open">&gt;&gt; FYI, my algorithm is the following if no output
&gt;&gt; file is specified:
</div>&gt;
&gt; Actually, I just checked the documentation and hopefully this was fairly clear:
&gt;
&gt; &#34;The destination file name may be undefined to edit the source file in place &#40;make sure you
&gt; have backups!&#41;.  In this case, if a source file name is provided, a temporary file is created and
&gt; renamed to replace the source file if no errors occurred while writing.&#34;
</div>
You&#39;re right about that. I think you could improve things by changing
the comment:

# edit file in place &#40;you do have backups, right?&#41;

to

# overwrites file &#40;you do have backups, right?&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  &#40;Also, please let me know if there is a
&gt; platform independent technique which allows the file attributes to be preserved!&#41;
</div>
I think what I sent earlier is a good starting point: at least the
code I sent uses only standard Perl functions.

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://rrt.sc3d.org">http://rrt.sc3d.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762132" href="/Public/Bug/Display.html?id=56487#txn-762132">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;12:21:28&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/762132/394269/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394269">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 12 11:27:08 2010, rrt wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I came up with a simple extensible API for handling this:
</div>
Thanks, your example is very useful.  I will consider adding this to the code.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I don&#39;t know what security problems they are talking about.
</div>&gt; 
&gt; Is there something unclear on that page? For starters:
&gt; 
<div class="message-stanza open">&gt; &gt; 1&#41; Create new file with name &#34;INFILE_exiftool_tmp&#34;.
</div>&gt; 
&gt; Oops. This is attackable. Use File::Temp or similar for secure
&gt; temporary file creation.
</div>
Sorry I didn&#39;t read your reference before, but I have browsed through it now and I don&#39;t see 
that what I am doing is a problem.  I don&#39;t want to use File::Temp because I want to create 
the file in the same directory as the original &#40;otherwise the subsequent rename may fail on 
some systems&#41;.  This in itself avoids the security problems of using a common /tmp 
directory.  Also, arbitrary file overwrite isn&#39;t a problem because I always check to see if the 
file  &#40;temporary or otherwise&#41; exists before attempting to create it, and fail if the file already 
exists.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762134" href="/Public/Bug/Display.html?id=56487#txn-762134">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;12:23:14&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/762134/394271/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394271">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 261b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Apr 12 12:11:31 2010, rrt wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You&#39;re right about that. I think you could improve things by changing
&gt; the comment:
&gt; 
&gt; # edit file in place &#40;you do have backups, right?&#41;
&gt; 
&gt; to
&gt; 
&gt; # overwrites file &#40;you do have backups, right?&#41;
</div>
Will do. Thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762155" href="/Public/Bug/Display.html?id=56487#txn-762155">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;12:46:43&nbsp;2010</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #56487] Does not preserve file permissions when  altering file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 12 Apr 2010 17:46:17 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Image-ExifTool &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Reuben Thomas &lt;rrt [...] sc3d.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/762155/394273/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394273">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 457b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 12 April 2010 17:21, Phil Harvey via RT
&lt;bug-Image-ExifTool@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry I didn&#39;t read your reference before, but I have browsed through it now and I don&#39;t see
&gt; that what I am doing is a problem.  I don&#39;t want to use File::Temp because I want to create
&gt; the file in the same directory as the original &#40;otherwise the subsequent rename may fail on
&gt; some systems&#41;.
</div>
I failed to notice this aspect of your scheme.

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://rrt.sc3d.org">http://rrt.sc3d.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762187" href="/Public/Bug/Display.html?id=56487#txn-762187">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;13:29:09&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/762187/394289/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394289">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 413b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am testing a version of the code that preserves the permissions and ownership when 
WriteInfo&#40;&#41; is called without a destination file.  So far it looks good.  If all goes well this will be 
included in ExifTool 8.18.

I think it is appropriate to keep the original behaviour when a new destination file is created &#40;ie. 
the new file gets the default ownership/permissions&#41;.  Let me know if you disagree.

- PHil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-762189" href="/Public/Bug/Display.html?id=56487#txn-762189">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;12&nbsp;13:35:13&nbsp;2010</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #56487] Does not preserve file permissions when  altering file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 12 Apr 2010 18:34:51 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Image-ExifTool &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Reuben Thomas &lt;rrt [...] sc3d.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/762189/394291/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/394291">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 671b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 12 April 2010 18:29, Phil Harvey via RT
&lt;bug-Image-ExifTool@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56487">https://rt.cpan.org/Ticket/Display.html?id=56487</a></span> &gt;
&gt;
&gt; I am testing a version of the code that preserves the permissions and ownership when
&gt; WriteInfo&#40;&#41; is called without a destination file.  So far it looks good.  If all goes well this will be
&gt; included in ExifTool 8.18.
&gt;
&gt; I think it is appropriate to keep the original behaviour when a new destination file is created &#40;ie.
&gt; the new file gets the default ownership/permissions&#41;.  Let me know if you disagree.
</div>
I agree absolutely: the semantics is &#40;and should be&#41; like a simple &#34;cp
file1 file2&#34;.

-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://rrt.sc3d.org">http://rrt.sc3d.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764295" href="/Public/Bug/Display.html?id=56487#txn-764295">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;16&nbsp;11:48:23&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">60 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/764295/395456/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395456">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 202b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">ExifTool 8.18 is now available from the exiftool home page, and should now preserve file 
permissions and ownership as discussed.

Please let me know if you have any problems with this version.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764297" href="/Public/Bug/Display.html?id=56487#txn-764297">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;16&nbsp;11:48:25&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Given to EXIFTOOL</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764401" href="/Public/Bug/Display.html?id=56487#txn-764401">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;16&nbsp;15:57:17&nbsp;2010</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #56487] Does not preserve file permissions when  altering file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 16 Apr 2010 20:57:00 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Image-ExifTool &lt;bug-Image-ExifTool [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Reuben Thomas &lt;rrt [...] sc3d.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/764401/395513/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395513">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 460b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 16 April 2010 16:48, Phil Harvey via RT
&lt;bug-Image-ExifTool@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=56487">https://rt.cpan.org/Ticket/Display.html?id=56487</a></span> &gt;
&gt;
&gt; ExifTool 8.18 is now available from the exiftool home page, and should now preserve file
&gt; permissions and ownership as discussed.
&gt;
&gt; Please let me know if you have any problems with this version.
</div>
I will. Thanks very much for this version, and I look forward to its
landing in distros!


-- 
<span class="clickylink"><a target="new" rel="nofollow" href="http://rrt.sc3d.org">http://rrt.sc3d.org</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-803790" href="/Public/Bug/Display.html?id=56487#txn-803790">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;14&nbsp;08:04:44&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/803790/416686/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/416686">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 260b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Production version 8.25 was just released with this feature,
however the chown&#40;&#41; call causes a failure on systems which
don&#39;t implement this function &#40;ie. OS/2&#41;, so this function
call must be placed inside an eval.  I will fix this in the next
release.

- Phil
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-858594" href="/Public/Bug/Display.html?id=56487#txn-858594">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;22&nbsp;08:48:18&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-858596" href="/Public/Bug/Display.html?id=56487#txn-858596">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;22&nbsp;08:48:19&nbsp;2010</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Fixed in 8.40 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1094763" href="/Public/Bug/Display.html?id=56487#txn-1094763">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;29&nbsp;19:38:21&nbsp;2012</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rrt [...] sc3d.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1094763/575496/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/575496">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 307b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m using Image::ExifTool 8.60, and it still updates the timestamp of 
files when I change the info using foo-&gt;WriteInfo&#40;$file&#41;, i.e. a single 
argument. Looking at the code, I can see some code to call 
SetFileModifyDate, but that&#39;s modifying tags in the file, not the file 
metadata. Did I miss something?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1094765" href="/Public/Bug/Display.html?id=56487#txn-1094765">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;29&nbsp;19:38:22&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1094766" href="/Public/Bug/Display.html?id=56487#txn-1094766">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;29&nbsp;19:54:49&nbsp;2012</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rrt [...] sc3d.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1094766/575498/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/575498">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 601b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jun 29 19:38:21 2012, rrt wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m using Image::ExifTool 8.60, and it still updates the timestamp of 
&gt; files when I change the info using foo-&gt;WriteInfo&#40;$file&#41;, i.e. a single 
&gt; argument. Looking at the code, I can see some code to call 
&gt; SetFileModifyDate, but that&#39;s modifying tags in the file, not the file 
&gt; metadata. Did I miss something?
</div>
OK, it seems I missed that SetFileModifyDate is indeed supposed to modify 
the file. But when I simply update a tag &#40;e.g. the thumbnail&#41;, the 
timestamp of the file is also updated, and I can&#39;t work out how to pass 
an option to preserve it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1094768" href="/Public/Bug/Display.html?id=56487#txn-1094768">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;29&nbsp;19:57:09&nbsp;2012</span>
    <span class="description">rrt [...] sc3d.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> rrt [...] sc3d.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1094768/575500/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/575500">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 160b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m so sorry, I completely misunderstood this bug. Rereading the entire 
thread makes it all clear again. Please ignore my recent comments and 
reclose the bug!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1094997" href="/Public/Bug/Display.html?id=56487#txn-1094997">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;01&nbsp;15:14:16&nbsp;2012</span>
    <span class="description">EXIFTOOL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.811314</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
