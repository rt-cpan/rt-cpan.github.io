<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17530 for WWW-Mechanize: There is no Form Number on that page.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17530 for WWW-Mechanize: There is no Form Number on that page.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/WWW-Mechanize/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/WWW-Mechanize/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/libwww-perl/WWW-Mechanize/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/WWW-Mechanize">WWW-Mechanize CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17530</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/WWW-Mechanize/Active/">WWW-Mechanize</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dlombard [...] broadspire.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-36214-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-36215-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;08&nbsp;07:42:26&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> There is no Form Number on that page.</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Linux idx32.idx.net 2.4.17 #4 SMP Fri Feb 18 15:31:35 PST 2005 i686 unknown

This is perl, v5.6.1 built for i686-linux

I am using WWW::Mechanize 1.18.

I am getting this error message:

There is no form numbered 1 at ./regdomain.pl line 120
Can&#39;t call method &#34;find_input&#34; on an undefined value at
/usr/local/lib/perl5/site_perl/5.6.1/WWW/Mechanize.pm line 1269, &lt;STDIN&gt;
line 1.

I have attached my script &#40;regdomain.pl as regdomain_pl.txt&#41; and an
example of the text file it&#39;s supposed to parse &#40;example.txt&#41;.

The way it&#39;s supposed to work is like this:

unix@host&gt;./regdomain.txt example.txt

If you review the file, you will see the URL that it attempts to get the
HTML form from.  Viewing its source should reveal the form fields my
script is attempting to populate.

Any help you can provide with this would be substantially appreciated.

Thank you.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> example.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">-----Original Message-----
From: nobody@nowhere.com
Sent: Tuesday, February 07, 2006 5:07 PM
To: Shared Account setup
Subject: Shared Web Hosting Order


Century 21 Web Hosting Order

Name:			Someone Somebody-Hypehnated
Company:		Ultra Business, Inc.
Address:		1234 Anywhere Blvd.
City:			Somewhere
State:			CA
Zip:			90010
Country:		United States
Phone:			2135551212
Fax:			323-55-1212
Email:			email@address.tld
Card type:		Visa
Card No.:		1234567812345678
CCID:			000
Exp.:			02/2010
Order Total:		60.00


CP Username:		0123456
CP Password:		owiekazowee
FTP Passwd:		ayeyiyi


Hosting Term:		12 month&#40;s&#41;
Requested Domains:	thedomain.com &#40;main domain - register me please, 1 year&#40;s&#41;&#41;</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> regdomain_pl.txt</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/local/bin/perl
#
# regdomain.pl v1.00b
#
# usage:
# ./regdomain.pl filename.txt
# filename.txt contains the e-mail from sales@broadspire.com
# For now, this only handles registering one domain name at a time.
# For multiple domain names, or non-American registrations, you&#39;l have to
# go to the site yourself.
# Fortunately, those domains are pretty rare.

# Populate hash array called ordermail with text file...

while &#40; $_ = &lt;&gt; &#41; {
        &#40;$field, $input&#41; = split /:\s*/, $_, 2;
        @fields = split &#39; &#39;, $input;
        $ordermail{$field} = [ @fields ];
}

# Parse the hash into variables for HTML form injection...
$firstname = &#34;$ordermail{Name}[0]&#34;;
$lastname = &#34;$ordermail{Name}[1] $ordermail{Name}[2] $ordermail{Name}[3]&#34;;
$company =  &#34;$ordermail{Company}[0] $ordermail{Company}[1] $ordermail{Company}[2] $ordermail{Company}[3] $ordermail{Company}[4]&#34;;
$address = &#34;$ordermail{Address}[0] $ordermail{Address}[1] $ordermail{Address}[2] $ordermail{Address}[3] $ordermail{Address}[4] $ordermail{Address}[5]&#34;;
$city = &#34;$ordermail{City}[0] $ordermail{Address}[1] $ordermail{Address}[2]&#34;;
$state = &#34;$ordermail{State}[0]&#34;;
$postalcode = &#34;$ordermail{Zip}[0]&#34;;
$country = &#34;$ordermail{Country}[0] $ordermail{Country}[1]&#34;;
$phno = &#34;$ordermail{Phone}[0] $ordermail{Phone}[1] $ordermail{Phone}[2]&#34;;
# Take out non-numbers
$phno =~ s/[^\d]//g;
# Add +1. to the number because it&#39;s required.
$phone = &#34;\+1.$phno&#34;;
# A fax number is mandatory; if this is blank, we have to use all zeros.
$faxno = &#34;$ordermail{Fax}[0] $ordermail{Fax}[1] $ordermail{Fax}[2]&#34;;
$faxno =~ s/[^\d]//g;
$fax = &#34;\+1.$faxno&#34;;
	if &#40;$fax =~ /\+1\.$/&#41; {
                $fax = &#34;\+1.0000000000&#34;;
        }
$email = &#34;$ordermail{Email}[0]&#34;;
$cardtype = &#34;Visa&#34;;
$cardno = &#34;4111111111111111&#34;;
# We have to split the expiry because it&#39;s two separate HTML form fields.
$exp = &#34;$ordermail{&#39;Exp.&#39;}[0]&#34;;
@expdate = split &#39;/&#39;, $exp;
$expmo = @expdate[0];
# Because sometimes the e-mail has a four digit year as opposed to two.
$expy = @expdate[1];
if &#40;$expy =~ /^0/&#41; {
        $expyr = &#34;20$expy&#34;;
        } else {
        $expyr = $expy;
        }
$login = &#34;$ordermail{&#39;CP Username&#39;}[0]&#34;;
$pwd = &#34;$ordermail{&#39;CP Password&#39;}[0]&#34;;
$domain = &#34;$ordermail{&#39;Requested Domains&#39;}[0]&#34;;
$regyears = &#34;$ordermail{&#39;Requested Domains&#39;}[7]&#34;;
$pdns = &#34;ns1.idx.net&#34;;
$sdns = &#34;ns2.idx.net&#34;;


# Tell the operator what&#39;s going on:

print &#34;Registering: $domain\n&#34;;
print &#34;\n&#34;;
print &#34;Domain Management Username: $login\n&#34;;
print &#34;Domain Management Password: $pwd\n&#34;;
print &#34;\n&#34;;
print &#34;Registration Period: $regyears year&#40;s&#41;\n&#34;;
print &#34;\n&#34;;
print &#34;First Name: $firstname\n&#34;;
print &#34;Last Name: $lastname\n&#34;;
print &#34;Organization Name: $company\n&#34;;
print &#34;Street Address: $address\n&#34;;
print &#34;City: $city\n&#34;;
print &#34;State\/Province: $state\n&#34;;
print &#34;Postal Code: $postalcode\n&#34;;
print &#34;Country: $country\n&#34;;
print &#34;Telephone Number: $phone\n&#34;;
print &#34;Fax Number: $fax\n&#34;;
print &#34;E-Mail Address: $email\n&#34;;
print &#34;\n&#34;;
print &#34;Primary Name Server Hostname: $pdns\n&#34;;
print &#34;Secondary Name Server Hostname: $sdns\n&#34;;
print &#34;\n&#34;;
print &#34;Using Method Type: $cardtype\n&#34;;
print &#34;Using Card Number: $cardno\n&#34;;
print &#34;Using Expiration Date: $expmo/$expyr\n&#34;;
print &#34;\n&#34;;
print &#34;OK to proceed? &#40;Y/n&#41;: &#34;;
chomp&#40;my $input = &lt;STDIN&gt;&#41;;
if &#40;$input =~ /^[Y]?$/i&#41; {
	print &#34;OK!  &#34;;
	}
	elsif &#40;$input =~ /^[N]$/i&#41; {
		print &#34;Aborting as requested.\n&#34;;
		exit;
}


# HTML Form Injection:
print &#34;Registering...\n&#34;;

# Use WWW::Mechanize, initialize our robot and fetch the good form...
use WWW::Mechanize;
my $robot = WWW::Mechanize-&gt;new&#40;&#41;;
my $url = &#34;<span class="clickylink"><a target="new" rel="nofollow" href="https://register.broadspire.com/reg/reg_system.cgi?action=bulk_order">https://register.broadspire.com/reg/reg_system.cgi?action=bulk_order</a></span>&#34;;
$robot-&gt;get&#40;$url&#41;;
die unless &#40;$robot-&gt;success&#41;;

# Specify the Domain Management username and password...
$robot-&gt;set_visible&#40; 0, $login, $pwd, $pwd &#41;;
$robot-&gt;click&#40;&#41;;
die unless &#40;$robot-&gt;success&#41;;
print &#34;Set Domain Management Username and Password.\n&#34;;

# Now fill out and submit the main domain name registration form...
$robot-&gt;form_number&#40;1&#41;;
$robot-&gt;tick&#40;flag_admin_use_contact_info&#41;;
$robot-&gt;tick&#40;flag_billing_use_contact_info&#41;;
$robot-&gt;set_fields&#40; 
	domains =&gt; $domain,
	period =&gt; $regyears,
	confirm_password =&gt; $pwd,
	period =&gt; $regyears,
	owner_first_name =&gt; $firstname,
	owner_last_name =&gt; $lastname,
	owner_org_name =&gt; $company,
	owner_address1 =&gt; $address,
	owner_city =&gt; $city,
	owner_state =&gt; $state,
	owner_postal_code =&gt; $postalcode,
	owner_phone =&gt; $phone,
	owner_fax =&gt; $fax,
	owner_email =&gt; $email,
	fqdn1 =&gt; $pdns,
	fqdn2 =&gt; $sdns,
	p_cc_type =&gt; $cardtype,
	p_cc_num =&gt; $cardno,
	p_cc_exp_mon =&gt; $expmo,
	p_cc_exp_yr =&gt; $expyr,
&#41;;
$robot-&gt;click&#40;&#41;;
die unless &#40;$robot-&gt;success&#41;;

# Order Now!
$robot-&gt;click&#40;&#41;;

# Show the domain name order number...
$msg = $robot-&gt;content;
print $msg\n;</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;09&nbsp;22:19:32&nbsp;2007</span>
    <span class="description">PETDANCE [...] cpan.org -  Status changed from &#39;new&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
