<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #128594 for C-Mlock: SEGV possible in test suite</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #128594 for C-Mlock: SEGV possible in test suite</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=C-Mlock">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=C-Mlock">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=C-Mlock">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=C-Mlock">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/C-Mlock">C-Mlock CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">128594</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=C-Mlock">C-Mlock</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">cpan [...] sorbs.net
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
SREZIC [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-272650-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.11    </td>
  </tr>
  <tr id="CF-272651-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=128594">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1834684" href="/Public/Bug/Display.html?id=128594#txn-1834684">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;23&nbsp;04:25:33&nbsp;2019</span>
    <span class="description">SREZIC [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SEGV possible in test suite</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1834684/986441/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/986441">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sometimes t/04-resize.t terminates with a SEGV:

...
t/04-resize.t ..... 
All 7 subtests passed 
...
Test Summary Report
-------------------
t/04-resize.t   &#40;Wstat: 11 Tests: 7 Failed: 0&#41;
  Non-zero wait status: 11
...

I looked with valgrind into this test script:

...
ok 3 - Set size to smaller
==5225== Invalid write of size 1
==5225==    at 0x7D88ADE: set_size &#40;store.c:80&#41;
==5225==    by 0x7D889F8: set_pages &#40;store.c:54&#41;
==5225==    by 0x7D877CE: XS_C__Mlock_set_pages &#40;in /home/cpansand/.cpan/build/2019022309/C-Mlock-1.11-0/blib/arch/auto/C/Mlock/Mlock.so&#41;
==5225==    by 0x1CFDF7: Perl_pp_entersub &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1C8702: Perl_runops_standard &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x152515: Perl_call_sv &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x154749: Perl_call_list &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1380AE: S_process_special_blocks.isra.10 &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x14BA3E: Perl_newATTRSUB_x &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x180C6E: Perl_yyparse &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x158499: perl_parse &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1363C5: main &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==  Address 0x7af6e20 is 16 bytes before a block of size 120 free&#39;d
==5225==    at 0x4C2CDDB: free &#40;vg_replace_malloc.c:530&#41;
==5225==    by 0x1632F1: Perl_parser_free &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1FE1D7: Perl_leave_scope &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x20C7E4: Perl_pp_leaveeval &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1C8702: Perl_runops_standard &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x152515: Perl_call_sv &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x154749: Perl_call_list &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1380AE: S_process_special_blocks.isra.10 &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x14BA3E: Perl_newATTRSUB_x &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x180C6E: Perl_yyparse &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x158499: perl_parse &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1363C5: main &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==  Block was alloc&#39;d at
==5225==    at 0x4C2BBAF: malloc &#40;vg_replace_malloc.c:299&#41;
==5225==    by 0x1AD074: Perl_safesysmalloc &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x16302F: Perl_lex_start &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x20BF72: Perl_pp_entereval &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1C8702: Perl_runops_standard &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x152515: Perl_call_sv &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x154749: Perl_call_list &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1380AE: S_process_special_blocks.isra.10 &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x14BA3E: Perl_newATTRSUB_x &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x180C6E: Perl_yyparse &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x158499: perl_parse &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225==    by 0x1363C5: main &#40;in /opt/perl-5.24.3/bin/perl&#41;
==5225== 
ok 4 - Set size to larger
...

Line 80 is:

            *&#40;pAddressRegion-&gt;pBytes+bytes&#41; = &#39;\0&#39;; /* terminate if we truncate */ 

but I don&#39;t see a condition to check if we&#39;re really truncating here?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1834718" href="/Public/Bug/Display.html?id=128594#txn-1834718">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;23&nbsp;08:07:05&nbsp;2019</span>
    <span class="description">michelle [...] sorbs.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #128594] SEGV possible in test suite</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 23 Feb 2019 23:06:41 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-C-Mlock [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michelle Sullivan &lt;michelle [...] sorbs.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1834718/986457/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/986457">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It’s putting in the safety.. it doesn’t need to condtest because if it’s an expand we calloc so it’s always zero terminated anyhow... going smaller if the data is truncated we need to make sure it’s zero terminated because otherwise Perl will read past the end of the allocation.  ... think I might know the problem.. need to run some tests... problem is it only happens on certain platforms .... may just calloc and copy minus a byte rather than terminate what should be the last byte and see if that fixes it on the platforms that fail.

Thanks for the report and diagnostics.

Michelle Sullivan
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.mhix.org/">http://www.mhix.org/</a></span>
Sent from my iPad

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 23 Feb 2019, at 20:25, Slaven_Rezic via RT &lt;bug-C-Mlock@rt.cpan.org&gt; wrote:
&gt; 
&gt; Sat Feb 23 04:25:33 2019: Request 128594 was acted upon.
&gt; Transaction: Ticket created by SREZIC
&gt;       Queue: C-Mlock
&gt;     Subject: SEGV possible in test suite
&gt;   Broken in: 1.11
&gt;    Severity: &#40;no value&#41;
&gt;       Owner: Nobody
&gt;  Requestors: SREZIC@cpan.org
&gt;      Status: new
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=128594">https://rt.cpan.org/Ticket/Display.html?id=128594</a></span> &gt;
&gt; 
&gt; 
&gt; Sometimes t/04-resize.t terminates with a SEGV:
&gt; 
&gt; ...
&gt; t/04-resize.t ..... 
&gt; All 7 subtests passed 
&gt; ...
&gt; Test Summary Report
&gt; -------------------
&gt; t/04-resize.t   &#40;Wstat: 11 Tests: 7 Failed: 0&#41;
&gt;  Non-zero wait status: 11
&gt; ...
&gt; 
&gt; I looked with valgrind into this test script:
&gt; 
&gt; ...
&gt; ok 3 - Set size to smaller
&gt; ==5225== Invalid write of size 1
&gt; ==5225==    at 0x7D88ADE: set_size &#40;store.c:80&#41;
&gt; ==5225==    by 0x7D889F8: set_pages &#40;store.c:54&#41;
&gt; ==5225==    by 0x7D877CE: XS_C__Mlock_set_pages &#40;in /home/cpansand/.cpan/build/2019022309/C-Mlock-1.11-0/blib/arch/auto/C/Mlock/Mlock.so&#41;
&gt; ==5225==    by 0x1CFDF7: Perl_pp_entersub &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1C8702: Perl_runops_standard &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x152515: Perl_call_sv &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x154749: Perl_call_list &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1380AE: S_process_special_blocks.isra.10 &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x14BA3E: Perl_newATTRSUB_x &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x180C6E: Perl_yyparse &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x158499: perl_parse &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1363C5: main &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==  Address 0x7af6e20 is 16 bytes before a block of size 120 free&#39;d
&gt; ==5225==    at 0x4C2CDDB: free &#40;vg_replace_malloc.c:530&#41;
&gt; ==5225==    by 0x1632F1: Perl_parser_free &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1FE1D7: Perl_leave_scope &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x20C7E4: Perl_pp_leaveeval &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1C8702: Perl_runops_standard &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x152515: Perl_call_sv &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x154749: Perl_call_list &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1380AE: S_process_special_blocks.isra.10 &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x14BA3E: Perl_newATTRSUB_x &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x180C6E: Perl_yyparse &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x158499: perl_parse &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1363C5: main &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==  Block was alloc&#39;d at
&gt; ==5225==    at 0x4C2BBAF: malloc &#40;vg_replace_malloc.c:299&#41;
&gt; ==5225==    by 0x1AD074: Perl_safesysmalloc &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x16302F: Perl_lex_start &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x20BF72: Perl_pp_entereval &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1C8702: Perl_runops_standard &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x152515: Perl_call_sv &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x154749: Perl_call_list &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1380AE: S_process_special_blocks.isra.10 &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x14BA3E: Perl_newATTRSUB_x &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x180C6E: Perl_yyparse &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x158499: perl_parse &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225==    by 0x1363C5: main &#40;in /opt/perl-5.24.3/bin/perl&#41;
&gt; ==5225== 
&gt; ok 4 - Set size to larger
&gt; ...
&gt; 
&gt; Line 80 is:
&gt; 
&gt;            *&#40;pAddressRegion-&gt;pBytes+bytes&#41; = &#39;\0&#39;; /* terminate if we truncate */ 
&gt; 
&gt; but I don&#39;t see a condition to check if we&#39;re really truncating here?
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1834719" href="/Public/Bug/Display.html?id=128594#txn-1834719">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;23&nbsp;08:07:05&nbsp;2019</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1834722" href="/Public/Bug/Display.html?id=128594#txn-1834722">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;23&nbsp;08:40:04&nbsp;2019</span>
    <span class="description">cpan [...] sorbs.net -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1834723" href="/Public/Bug/Display.html?id=128594#txn-1834723">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;23&nbsp;08:41:45&nbsp;2019</span>
    <span class="description">cpan [...] sorbs.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1834723/986460/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/986460">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 208b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This should be resolved in 1.12 - please let me know if not.

Reworked the logic &#40;to what it should have been in the first place...&#41;

added a couple more tests to ensure the resizing works properly.

Michelle
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1834725" href="/Public/Bug/Display.html?id=128594#txn-1834725">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;23&nbsp;08:41:45&nbsp;2019</span>
    <span class="description">cpan [...] sorbs.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.377755</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
