<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #44891 for DBD-SQLite: Strings looking like numbers corrupted</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #44891 for DBD-SQLite: Strings looking like numbers corrupted</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-SQLite/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-SQLite">DBD-SQLite CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">44891</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-SQLite/Active/">DBD-SQLite</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
GUIDO [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10248-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
1.20</li>
<li>
1.21</li>
</ul>
    </td>
  </tr>
  <tr id="CF-10249-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;09&nbsp;06:26:53&nbsp;2009</span>
    <span class="description">GUIDO [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Strings looking like numbers corrupted</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached script creates a file numbers.sqlite that showcases the
bug. The output here &#40;32 bit Linux on i686, Perl 5.8.8&#41; is:

    $ perl sqlitebug.pl 
    2100000517|wanted: 0000002100000517
    -2094966779|wanted: 0000002200000517
    Inf|wanted: 0000001e00000517
    Happened with DBD::SQLite 1.21.

The bug is a real show-stopper.

In 1.19_09 you started guessing the type of values, when the Perl
function looks_like_number returns true.  But obviously sqlite3 and Perl
5.8.8 have different notions of what a number is.

I think the correct fix is to completely revert that change, because
essentially the data gets corrupted by it.  You can only do this
guessing if you can somehow guarantee that strings looking like numbers
are numerically equal after the cast.  For that, you either have to read
them back, or somehow check which numerical value the database engine
/would/ write.

The least thing you should do is roll your own looks_like_number&#40;&#41;
function, and that function must be a lot stricter than the Perl
internal.  The reason for that is, that Perl already called the function
on the value, and it has already done the appropriate conversion.  Consider:

    $sth = $dbh-&gt;prepare&#40;&#34;INSERT INTO foo &#40;bar&#41; VALUES &#40;?&#41;&#34;&#41;;
    
    $sth-&gt;execute&#40;00002.000&#41;;
    # Your code sees a plain 2.

    $sth-&gt;execute&#40;&#34;00002.000&#34;&#41;;
    # Your code sees 00002.000, but why do you convert it into
    # a double?  This is obviously not what the user wants.

    my $string = &#34;00002.0000&#34;;
    my $number = 00002.0000;

    $sth-&gt;execute&#40;$string&#41;;
    # Again, why convert this?

    $sth-&gt;execute&#40;$number&#41;;

I think this guessing is dangerous and gives you more headaches than it
cures.  But the least needed is a check like $number == 1 * $number;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> sqlitebug.pl</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">#! /usr/local/bin/perl -w

use strict;

use DBI;

my $dbh = DBI-&gt;connect&#40;&#39;dbi:SQLite:dbname=numbers.sqlite&#39;, &#39;&#39;, &#39;&#39;,
                       {
		           AutoCommit =&gt; 1,
                           RaiseError =&gt; 1,
			   PrintError =&gt; 1,
		       }&#41;;

my @strings = qw &#40;
    0000002100000517
    0000002200000517
    0000001e00000517
&#41;;

$dbh-&gt;do&#40;&lt;&lt;EOF&#41;;
CREATE TABLE IF NOT EXISTS numbers&#40;node_id TEXT, wanted TEXT&#41;
EOF

$dbh-&gt;do&#40;&#34;DELETE FROM numbers&#34;&#41;;

my $sth = $dbh-&gt;prepare&#40;&#34;INSERT INTO numbers &#40;node_id, wanted&#41; VALUES &#40;?, ?&#41;&#34;&#41;;
foreach my $string &#40;@strings&#41; {
    $sth-&gt;execute&#40;$string, &#34;wanted: $string&#34;&#41;;
}
$sth-&gt;finish;

$sth = $dbh-&gt;prepare&#40;&#34;SELECT node_id, wanted FROM numbers&#34;&#41;;
$sth-&gt;execute;
while &#40;my @row = $sth-&gt;fetchrow_array&#41; {
    my &#40;$node_id, $wanted&#41; = @row;
    print &#34;$node_id|$wanted\n&#34;;
}
$dbh-&gt;disconnect;

print &#34;Happened with DBD::SQLite $DBD::SQLite::VERSION.\n&#34;;

my $string = &#34;0000002200000517&#34;;
my $number = 1 * $string;
print &#34;$number\n&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;09&nbsp;08:27:22&nbsp;2009</span>
    <span class="description">adamkennedybackup [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #44891] Strings looking like numbers corrupted</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 9 Apr 2009 22:27:03 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-SQLite [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adamkennedybackup [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem is we&#39;re using the Perl-based guess.

If we can find a function from SQLite itself to do the guess, then we
should be fine.

Adam K

2009/4/9 GUIDO via RT &lt;bug-DBD-SQLite@rt.cpan.org&gt;:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Apr 09 06:26:53 2009: Request 44891 was acted upon.
&gt; Transaction: Ticket created by GUIDO
&gt;       Queue: DBD-SQLite
&gt;     Subject: Strings looking like numbers corrupted
&gt;   Broken in: 1.20, 1.21
&gt;    Severity: &#40;no value&#41;
&gt;       Owner: Nobody
&gt;  Requestors: GUIDO@cpan.org
&gt;      Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=44891">https://rt.cpan.org/Ticket/Display.html?id=44891</a></span> &gt;
&gt;
&gt;
&gt; The attached script creates a file numbers.sqlite that showcases the
&gt; bug. The output here &#40;32 bit Linux on i686, Perl 5.8.8&#41; is:
&gt;
&gt;    $ perl sqlitebug.pl
&gt;    2100000517|wanted: 0000002100000517
&gt;    -2094966779|wanted: 0000002200000517
&gt;    Inf|wanted: 0000001e00000517
&gt;    Happened with DBD::SQLite 1.21.
&gt;
&gt; The bug is a real show-stopper.
&gt;
&gt; In 1.19_09 you started guessing the type of values, when the Perl
&gt; function looks_like_number returns true.  But obviously sqlite3 and Perl
&gt; 5.8.8 have different notions of what a number is.
&gt;
&gt; I think the correct fix is to completely revert that change, because
&gt; essentially the data gets corrupted by it.  You can only do this
&gt; guessing if you can somehow guarantee that strings looking like numbers
&gt; are numerically equal after the cast.  For that, you either have to read
&gt; them back, or somehow check which numerical value the database engine
&gt; /would/ write.
&gt;
&gt; The least thing you should do is roll your own looks_like_number&#40;&#41;
&gt; function, and that function must be a lot stricter than the Perl
&gt; internal.  The reason for that is, that Perl already called the function
&gt; on the value, and it has already done the appropriate conversion.  Consider:
&gt;
&gt;    $sth = $dbh-&gt;prepare&#40;&#34;INSERT INTO foo &#40;bar&#41; VALUES &#40;?&#41;&#34;&#41;;
&gt;
&gt;    $sth-&gt;execute&#40;00002.000&#41;;
&gt;    # Your code sees a plain 2.
&gt;
&gt;    $sth-&gt;execute&#40;&#34;00002.000&#34;&#41;;
&gt;    # Your code sees 00002.000, but why do you convert it into
&gt;    # a double?  This is obviously not what the user wants.
&gt;
&gt;    my $string = &#34;00002.0000&#34;;
&gt;    my $number = 00002.0000;
&gt;
&gt;    $sth-&gt;execute&#40;$string&#41;;
&gt;    # Again, why convert this?
&gt;
&gt;    $sth-&gt;execute&#40;$number&#41;;
&gt;
&gt; I think this guessing is dangerous and gives you more headaches than it
&gt; cures.  But the least needed is a check like $number == 1 * $number;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;09&nbsp;08:27:23&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;09&nbsp;08:52:01&nbsp;2009</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Apr 09 08:27:22 2009, adamkennedybackup@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The problem is we&#39;re using the Perl-based guess.
&gt; 
&gt; If we can find a function from SQLite itself to do the guess, then we
&gt; should be fine.
</div>
That&#39;s what I meant, and an additional check should be done that the
resulting number is numerically identical to the cast.

BTW, my test case only shows the behavior for 32 bit Perl.  If you
compile it with 64 bit integers, you have to use higher &#34;numbers&#34;.

If you really want to stick with the guessing &#40;honestly, I don&#39;t
understand why, when SQLite is a typeless database and Perl a typeless
language&#41;, the following cases signify that string context should be used:

- String starts with a 0 and the next character is a digit.  That means,
that the argument was a quoted string.  Otherwise Perl would have
eliminated the leading 0.

- If it is an integer and greater than the maximum signed integer or
smaller than the maximum unsigned integer that Perl can understand.

- Likewise for doubles.

- Both checks likewise for the limits of the database engine.

Cheers,
Guido
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;11&nbsp;00:52:57&nbsp;2009</span>
    <span class="description">ishigaki [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The reason why I implemented a wild guessing is to resolve tickets like 
#29058 and #29629 where we want to compare a number with a result of a 
function that returns a number &#40;this hadn&#39;t worked well as the binded 
number was quoted&#41;, but I understand you and the previous 
implementation was not good enough. So we reverted the change in 
1.22_04, maybe tentatively, or maybe permanently as there&#39;re at least 
two known workarounds for the issue. 

On Thu, Apr 09 08:52:01 2009, GUIDO wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Apr 09 08:27:22 2009, adamkennedybackup@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; The problem is we&#39;re using the Perl-based guess.
&gt; &gt; 
&gt; &gt; If we can find a function from SQLite itself to do the guess, then 
</div></div>we
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; should be fine.
</div>&gt; 
&gt; That&#39;s what I meant, and an additional check should be done that the
&gt; resulting number is numerically identical to the cast.
&gt; 
&gt; BTW, my test case only shows the behavior for 32 bit Perl.  If you
&gt; compile it with 64 bit integers, you have to use higher &#34;numbers&#34;.
&gt; 
&gt; If you really want to stick with the guessing &#40;honestly, I don&#39;t
&gt; understand why, when SQLite is a typeless database and Perl a typeless
&gt; language&#41;, the following cases signify that string context should be 
</div>used:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; - String starts with a 0 and the next character is a digit.  That 
</div>means,
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; that the argument was a quoted string.  Otherwise Perl would have
&gt; eliminated the leading 0.
&gt; 
&gt; - If it is an integer and greater than the maximum signed integer or
&gt; smaller than the maximum unsigned integer that Perl can understand.
&gt; 
&gt; - Likewise for doubles.
&gt; 
&gt; - Both checks likewise for the limits of the database engine.
&gt; 
&gt; Cheers,
&gt; Guido
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;11&nbsp;00:52:58&nbsp;2009</span>
    <span class="description">ishigaki [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;11&nbsp;05:00:54&nbsp;2009</span>
    <span class="description">GUIDO [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Apr 11 00:52:57 2009, ISHIGAKI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The reason why I implemented a wild guessing is to resolve tickets like 
&gt; #29058 and #29629 where we want to compare a number with a result of a 
&gt; function that returns a number &#40;this hadn&#39;t worked well as the binded 
&gt; number was quoted&#41;, but I understand you and the previous 
&gt; implementation was not good enough. So we reverted the change in 
&gt; 1.22_04, maybe tentatively, or maybe permanently as there&#39;re at least 
&gt; two known workarounds for the issue. 
</div>
I think, no matter how smart your guessing will be, there will always be
real-world data that outsmarts your guessing.

A clean way to solve the other issues would be to extend the interface
of prepare&#40;&#41;.  Currently, it takes only one argument.  Plenty of room
for specifying the type of place-holders, if it matters.

Another way would be to extend the placeholder syntax:

    SELECT bar FROM foo HAVING COUNT&#40;*&#41; &gt; ?[INT]

Disadvantage: Not compatible with the other DBD drivers.

My own problem is solved, I have a workaround.  I simply prepend a
character to my strings when writing, and discard it when reading.  A
little bit ugly but it works.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;11&nbsp;05:00:55&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;15&nbsp;20:51:16&nbsp;2009</span>
    <span class="description">adamk [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Resolved by removing the original implementation
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;15&nbsp;20:51:17&nbsp;2009</span>
    <span class="description">adamk [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
