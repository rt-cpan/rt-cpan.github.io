<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #26109 for FLV-Info: &#39;Unexpected end of file&#39; occured when parsing a flv file</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #26109 for FLV-Info: &#39;Unexpected end of file&#39; occured when parsing a flv file</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=FLV-Info">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=FLV-Info">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=FLV-Info">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=FLV-Info">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/FLV-Info">FLV-Info CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">26109</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=FLV-Info">FLV-Info</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jzhang533 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-13686-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.17    </td>
  </tr>
  <tr id="CF-13687-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=26109">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306485" href="/Public/Bug/Display.html?id=26109#txn-306485">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;04&nbsp;23:32:18&nbsp;2007</span>
    <span class="description">jzhang533 [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> &#39;Unexpected end of file&#39; occured when parsing a flv file</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306485/139228/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139228">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 199b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi, I&#39;ve used this great module, and failed processing a flv file.
It failed at line 390 of FLV/File.pm

   387    if &#40;$bytes != $n&#41;
   389    {
   390      die &#39;Unexpected end of file&#39;;
   392    }
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306488" href="/Public/Bug/Display.html?id=26109#txn-306488">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;04&nbsp;23:44:09&nbsp;2007</span>
    <span class="description">chris [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26109] &#39;Unexpected end of file&#39; occured when parsing a flv file </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 Apr 2007 22:43:46 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-FLV-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Dolan &lt;chris [...] chrisdolan.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306488/139231/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139231">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 896b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Apr 4, 2007, at 10:32 PM, å¼ å†› via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Apr 04 23:32:18 2007: Request 26109 was acted upon.
&gt; Transaction: Ticket created by JZHANG
&gt;        Queue: FLV-Info
&gt;      Subject: &#39;Unexpected end of file&#39; occured when parsing a flv file
&gt;    Broken in: 0.17
&gt;     Severity: Important
&gt;        Owner: Nobody
&gt;   Requestors: jzhang533@gmail.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=26109">http://rt.cpan.org/Ticket/Display.html?id=26109</a></span> &gt;
&gt;
&gt;
&gt; Hi, I&#39;ve used this great module, and failed processing a flv file.
&gt; It failed at line 390 of FLV/File.pm
&gt;
&gt;    387    if &#40;$bytes != $n&#41;
&gt;    389    {
&gt;    390      die &#39;Unexpected end of file&#39;;
&gt;    392    }
&gt;
</div>
Could you please share more information about the video you are using  
and any command line option?  Perhaps you could upload the failing  
sample?

All I can tell from the above is that FLV-Info thinks your file is  
too short.

Chris
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306489" href="/Public/Bug/Display.html?id=26109#txn-306489">#</a>      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;04&nbsp;23:44:12&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306492" href="/Public/Bug/Display.html?id=26109#txn-306492">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;00:03:05&nbsp;2007</span>
    <span class="description">jzhang533 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26109] &#39;Unexpected end of file&#39; occured when parsing a flv file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Apr 2007 12:02:20 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-FLV-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jzhang &lt;jzhang533 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306492/139234/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139234">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 4/5/07, Chris Dolan via RT &lt;bug-FLV-Info@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=26109">http://rt.cpan.org/Ticket/Display.html?id=26109</a></span> &gt;
&gt;
&gt; On Apr 4, 2007, at 10:32 PM, å¼ å†› via RT wrote:
&gt;
<div class="message-stanza open">&gt; &gt; Wed Apr 04 23:32:18 2007: Request 26109 was acted upon.
&gt; &gt; Transaction: Ticket created by JZHANG
&gt; &gt;        Queue: FLV-Info
&gt; &gt;      Subject: &#39;Unexpected end of file&#39; occured when parsing a flv file
&gt; &gt;    Broken in: 0.17
&gt; &gt;     Severity: Important
&gt; &gt;        Owner: Nobody
&gt; &gt;   Requestors: jzhang533@gmail.com
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=26109">http://rt.cpan.org/Ticket/Display.html?id=26109</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; Hi, I&#39;ve used this great module, and failed processing a flv file.
&gt; &gt; It failed at line 390 of FLV/File.pm
&gt; &gt;
&gt; &gt;    387    if &#40;$bytes != $n&#41;
&gt; &gt;    389    {
&gt; &gt;    390      die &#39;Unexpected end of file&#39;;
&gt; &gt;    392    }
&gt; &gt;
</div>&gt;
&gt; Could you please share more information about the video you are using
&gt; and any command line option?  Perhaps you could upload the failing
&gt; sample?
</div>Thanks for your quick response.
The flv file I used can be downloaded from
<span class="clickylink"><a target="new" rel="nofollow" href="http://storage.cnboo.com/storage1/shows/2006-06/11514068624061915867586.wmv.flv">http://storage.cnboo.com/storage1/shows/2006-06/11514068624061915867586.wmv.flv</a></span>
I am using the following command line,

$ flvinfo 11514068624061915867586.wmv.flv
Failed to read FLV file: Unexpected end of file at
/usr/lib/perl5/site_perl/5.8.5/FLV/File.pm line 390.

I am using Linux,
osname=linux, osvers=2.6.9-34.0.2.el, archname=x86_64-linux-thread-multi

Thanks a lot for your help.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; All I can tell from the above is that FLV-Info thinks your file is
&gt; too short.
&gt;
&gt; Chris
&gt;
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306496" href="/Public/Bug/Display.html?id=26109#txn-306496">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;00:44:21&nbsp;2007</span>
    <span class="description">chris [...] equilibrious.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26109] &#39;Unexpected end of file&#39; occured when parsing a flv file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 Apr 2007 23:43:23 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-FLV-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Dolan &lt;chris [...] equilibrious.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306496/139236/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139236">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Apr 4, 2007, at 11:03 PM, å¼ å†› via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for your quick response.
&gt; The flv file I used can be downloaded from
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://storage.cnboo.com/storage1/shows/">http://storage.cnboo.com/storage1/shows/</a></span> 
&gt; 2006-06/11514068624061915867586.wmv.flv
&gt; I am using the following command line,
&gt;
&gt; $ flvinfo 11514068624061915867586.wmv.flv
&gt; Failed to read FLV file: Unexpected end of file at
&gt; /usr/lib/perl5/site_perl/5.8.5/FLV/File.pm line 390.
&gt;
&gt; I am using Linux,
&gt; osname=linux, osvers=2.6.9-34.0.2.el, archname=x86_64-linux-thread- 
&gt; multi
&gt;
&gt; Thanks a lot for your help.
</div>
I believe the file is simply truncated, as if the converter died or a  
download aborted.  I can parse the first 1847 media tags, but the  
1848th one expects to be 16727 bytes long when there is only 15711  
bytes left in the file.  The size of the file you mentioned is an  
even multiple of 4096 bytes, which sounds suspiciously like a  
converter crash.

Furthermore, The FLV header is incorrect -- it states that there is  
neither audio nor video in the file, which is clearly wrong &#40;that is,  
the 5th byte of the file is zero, but should be 4 + 1 = 5&#41;.

Can you tell me how you created or acquired this FLV?  There is no  
metadata tag, so I believe that you have not used any of the typical  
converters &#40;Macromedia, Sorenson, On2, ffmpeg&#41;

Chris

--
Chris Dolan, Equilibrious LLC, <span class="clickylink"><a target="new" rel="nofollow" href="http://equilibrious.net/">http://equilibrious.net/</a></span>
Public key: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/public.key">http://chrisdolan.net/public.key</a></span>
vCard: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/ChrisDolan.vcf">http://chrisdolan.net/ChrisDolan.vcf</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306503" href="/Public/Bug/Display.html?id=26109#txn-306503">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;01:16:01&nbsp;2007</span>
    <span class="description">jzhang533 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26109] &#39;Unexpected end of file&#39; occured when parsing a flv file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Apr 2007 13:15:22 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-FLV-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jzhang &lt;jzhang533 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306503/139242/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139242">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 4/5/07, Chris Dolan via RT &lt;bug-FLV-Info@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=26109">http://rt.cpan.org/Ticket/Display.html?id=26109</a></span> &gt;
&gt;
&gt; On Apr 4, 2007, at 11:03 PM, å¼ å†› via RT wrote:
&gt;
<div class="message-stanza open">&gt; &gt; Thanks for your quick response.
&gt; &gt; The flv file I used can be downloaded from
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://storage.cnboo.com/storage1/shows/">http://storage.cnboo.com/storage1/shows/</a></span>
&gt; &gt; 2006-06/11514068624061915867586.wmv.flv
&gt; &gt; I am using the following command line,
&gt; &gt;
&gt; &gt; $ flvinfo 11514068624061915867586.wmv.flv
&gt; &gt; Failed to read FLV file: Unexpected end of file at
&gt; &gt; /usr/lib/perl5/site_perl/5.8.5/FLV/File.pm line 390.
&gt; &gt;
&gt; &gt; I am using Linux,
&gt; &gt; osname=linux, osvers=2.6.9-34.0.2.el, archname=x86_64-linux-thread-
&gt; &gt; multi
&gt; &gt;
&gt; &gt; Thanks a lot for your help.
</div>&gt;
&gt; I believe the file is simply truncated, as if the converter died or a
&gt; download aborted.  I can parse the first 1847 media tags, but the
&gt; 1848th one expects to be 16727 bytes long when there is only 15711
&gt; bytes left in the file.  The size of the file you mentioned is an
&gt; even multiple of 4096 bytes, which sounds suspiciously like a
&gt; converter crash.
&gt;
&gt; Furthermore, The FLV header is incorrect -- it states that there is
&gt; neither audio nor video in the file, which is clearly wrong &#40;that is,
&gt; the 5th byte of the file is zero, but should be 4 + 1 = 5&#41;.
&gt;
&gt; Can you tell me how you created or acquired this FLV?  There is no
&gt; metadata tag, so I believe that you have not used any of the typical
&gt; converters &#40;Macromedia, Sorenson, On2, ffmpeg&#41;
&gt;
&gt; Chris
&gt;
&gt; --
&gt; Chris Dolan, Equilibrious LLC, <span class="clickylink"><a target="new" rel="nofollow" href="http://equilibrious.net/">http://equilibrious.net/</a></span>
&gt; Public key: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/public.key">http://chrisdolan.net/public.key</a></span>
&gt; vCard: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/ChrisDolan.vcf">http://chrisdolan.net/ChrisDolan.vcf</a></span>
&gt; l
</div>
Thanks a lot for identifying the problems for me.
This file is converted by using FLVTool2 &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://inlet-media.de/flvtool2&#41;">http://inlet-media.de/flvtool2&#41;</a></span>.

FLV::Info works for this file after I deleted line 390 of FLV/File.pm.
But I am not sure whether the information given by flvinfo at this
time make sense.

File name  11514068624061915867586.wmv.flv
File size  5586944 bytes
Duration   about 36.75 seconds
Video      442 frames
  codec    Sorenson H.263
  height   240
  type     keyframe
  width    320
Audio      1407 packets
  format   MP3
  rate     22050 Hz
  size     16 bit
  type     stereo

Thanks  a lot

Jun
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306507" href="/Public/Bug/Display.html?id=26109#txn-306507">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;01:23:25&nbsp;2007</span>
    <span class="description">chris [...] chrisdolan.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26109] &#39;Unexpected end of file&#39; occured when parsing a flv file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Apr 2007 00:22:53 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-FLV-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Chris Dolan &lt;chris [...] chrisdolan.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306507/139245/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139245">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Apr 5, 2007, at 12:16 AM, å¼ å†› via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks a lot for identifying the problems for me.
&gt; This file is converted by using FLVTool2 &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://inlet-media.de/">http://inlet-media.de/</a></span> 
&gt; flvtool2&#41;.
&gt;
&gt; FLV::Info works for this file after I deleted line 390 of FLV/File.pm.
&gt; But I am not sure whether the information given by flvinfo at this
&gt; time make sense.
&gt;
&gt; File name  11514068624061915867586.wmv.flv
&gt; File size  5586944 bytes
&gt; Duration   about 36.75 seconds
&gt; Video      442 frames
&gt;   codec    Sorenson H.263
&gt;   height   240
&gt;   type     keyframe
&gt;   width    320
&gt; Audio      1407 packets
&gt;   format   MP3
&gt;   rate     22050 Hz
&gt;   size     16 bit
&gt;   type     stereo
&gt;
&gt; Thanks  a lot
&gt;
&gt; Jun
</div>
Hi Jun,

Deleting line 390 is like removing the battery from a beeping  
alarm.  :-&#41;

I&#39;ve used flvtool2 before and it&#39;s good code &#40;and was the inspiration  
for FLV-Info, in fact&#41;.  However, it is not a converter.  My best  
guess is that some program before flvtool2 corrupted your FLV.  Or,  
perhaps flvtool2 output a partial FLV upon discovering some other  
corruption.

At this point, you&#39;d probably be best served by going back to the  
original WMV and converting to FLV again.

Chris

--
Chris Dolan, Equilibrious LLC, <span class="clickylink"><a target="new" rel="nofollow" href="http://equilibrious.net/">http://equilibrious.net/</a></span>
Public key: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/public.key">http://chrisdolan.net/public.key</a></span>
vCard: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/ChrisDolan.vcf">http://chrisdolan.net/ChrisDolan.vcf</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306510" href="/Public/Bug/Display.html?id=26109#txn-306510">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;01:32:57&nbsp;2007</span>
    <span class="description">jzhang533 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #26109] &#39;Unexpected end of file&#39; occured when parsing a flv file</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Apr 2007 13:32:33 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-FLV-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> jzhang &lt;jzhang533 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/306510/139248/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/139248">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 4/5/07, Chris Dolan via RT &lt;bug-FLV-Info@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=26109">http://rt.cpan.org/Ticket/Display.html?id=26109</a></span> &gt;
&gt;
&gt; On Apr 5, 2007, at 12:16 AM, å¼ å†› via RT wrote:
&gt;
<div class="message-stanza open">&gt; &gt; Thanks a lot for identifying the problems for me.
&gt; &gt; This file is converted by using FLVTool2 &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://inlet-media.de/">http://inlet-media.de/</a></span>
&gt; &gt; flvtool2&#41;.
&gt; &gt;
&gt; &gt; FLV::Info works for this file after I deleted line 390 of FLV/File.pm.
&gt; &gt; But I am not sure whether the information given by flvinfo at this
&gt; &gt; time make sense.
&gt; &gt;
&gt; &gt; File name  11514068624061915867586.wmv.flv
&gt; &gt; File size  5586944 bytes
&gt; &gt; Duration   about 36.75 seconds
&gt; &gt; Video      442 frames
&gt; &gt;   codec    Sorenson H.263
&gt; &gt;   height   240
&gt; &gt;   type     keyframe
&gt; &gt;   width    320
&gt; &gt; Audio      1407 packets
&gt; &gt;   format   MP3
&gt; &gt;   rate     22050 Hz
&gt; &gt;   size     16 bit
&gt; &gt;   type     stereo
&gt; &gt;
&gt; &gt; Thanks  a lot
&gt; &gt;
&gt; &gt; Jun
</div>&gt;
&gt; Hi Jun,
&gt;
&gt; Deleting line 390 is like removing the battery from a beeping
&gt; alarm.  :-&#41;
&gt;
&gt; I&#39;ve used flvtool2 before and it&#39;s good code &#40;and was the inspiration
&gt; for FLV-Info, in fact&#41;.  However, it is not a converter.  My best
&gt; guess is that some program before flvtool2 corrupted your FLV.  Or,
&gt; perhaps flvtool2 output a partial FLV upon discovering some other
&gt; corruption.
&gt;
&gt; At this point, you&#39;d probably be best served by going back to the
&gt; original WMV and converting to FLV again.
&gt;
&gt; Chris
&gt;
&gt; --
&gt; Chris Dolan, Equilibrious LLC, <span class="clickylink"><a target="new" rel="nofollow" href="http://equilibrious.net/">http://equilibrious.net/</a></span>
&gt; Public key: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/public.key">http://chrisdolan.net/public.key</a></span>
&gt; vCard: <span class="clickylink"><a target="new" rel="nofollow" href="http://chrisdolan.net/ChrisDolan.vcf">http://chrisdolan.net/ChrisDolan.vcf</a></span>
&gt;
</div>
:&#41;
Thanks for your kind help, and sorry for my poor English.
If you have chance to come to Beijing China in the future, I will be
very happy to be your guide.

Jun
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-306516" href="/Public/Bug/Display.html?id=26109#txn-306516">#</a>      
    </span>
    <span class="date">Thu&nbsp;Apr&nbsp;05&nbsp;01:51:23&nbsp;2007</span>
    <span class="description">cpan [...] clotho.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.452817</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
