<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #62104 for Finance-Quote: TIAA-CREF quotes not working</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #62104 for Finance-Quote: TIAA-CREF quotes not working</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Finance-Quote/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Finance-Quote/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Finance-Quote/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Finance-Quote/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Finance-Quote">Finance-Quote CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">62104</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">20 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Finance-Quote/Active/">Finance-Quote</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">eco [...] ecocode.net
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
daveother [...] mac.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-13576-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-13577-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




Tiaacref.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/843175/436590/Tiaacref.diff">
Thu Oct 14 20:21:38 2010 (1.4k) by vincent.lucarelli [...] gmail.com
</a>
</font></li>
</ul>


tiaacref.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/845158/437570/tiaacref.diff">
Tue Oct 19 21:46:28 2010 (710b) by dbreiser [...] gmail.com
</a>
</font></li>
</ul>


Tiaacref.pm.zip<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1121440/589997/Tiaacref.pm.zip">
Wed Sep 19 02:16:18 2012 (10.3k) by mta [...] umich.edu
</a>
</font></li>
</ul>


Tiaacref3.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/868347/449714/Tiaacref3.diff">
Mon Dec 13 20:33:01 2010 (24.9k) by mta [...] umich.edu
</a>
</font></li>
</ul>


Tiaacref4.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/876129/453750/Tiaacref4.diff">
Sun Jan 02 19:03:30 2011 (352b) by mta [...] umich.edu
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;13&nbsp;08:36:10&nbsp;2010</span>
    <span class="description">daveother [...] mac.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 13 Oct 2010 08:35:48 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sometime in the last week or so, the TIAA-CREF quotes appear to have stopped working. I am using Finance Quote from within the gnucash accounting program. 

Thanks,
Dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;14&nbsp;20:21:38&nbsp;2010</span>
    <span class="description">vincent.lucarelli [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> vincent.lucarelli [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The download URL has changed.  I attached a diff that seems to work
for at least the TIAA-CREF annuities.

Apply patch by finding Tiaacref.pm, changing to that directory, and
running:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; patch -Np1 Tiaacref.pm Tiaacref.diff
</div>
Vince
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tiaacref.diff</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">47c47,48
&lt; $CREF_URL = &#40;&#34;<span class="clickylink"><a target="new" rel="nofollow" href="https://www3.tiaa-cref.org/ddata/DownloadData">https://www3.tiaa-cref.org/ddata/DownloadData</a></span>?&#34;&#41;;
---
&gt; $CREF_URL = &#40;&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.tiaa-cref.org/public/performance/retirement/data/results">http://www.tiaa-cref.org/public/performance/retirement/data/results</a></span>?&#34;&#41;;
&gt; #<span class="clickylink"><a target="new" rel="nofollow" href="https://www3.tiaa-cref.org/ddata/DownloadData">https://www3.tiaa-cref.org/ddata/DownloadData</a></span>?&#34;&#41;;
258a260,273
&gt;     my $cbResult = &#39;cbResults=&#39;;
&gt; 
&gt;     my &#40;$Fsec,$Fmin,$Fhour,$Fmday,$Fmon,$Fyear,$Fwday,$Fyday,$Fisdst&#41; = localtime&#40;time&#40;&#41; - 24 * 60 * 60&#41;;
&gt;     my &#40;$Tsec,$Tmin,$Thour,$Tmday,$Tmon,$Tyear,$Twday,$Tyday,$Tisdst&#41; = localtime&#40;time&#40;&#41;&#41;;
&gt; 
&gt;     $urlc  = $CREF_URL;
&gt;     $urlc .= &#34;page=input&#34;;
&gt;     $urlc .= &#34;&#38;frommonth=&#34; . &#40;$Fmon + 1&#41;;
&gt;     $urlc .= &#34;&#38;fromday=&#34; . &#40;$Fmday&#41;;
&gt;     $urlc .= &#34;&#38;fromyear=&#34; . &#40;$Fyear + 1900&#41;;
&gt;     $urlc .= &#34;&#38;tomonth=&#34; . &#40;$Tmon + 1&#41;;
&gt;     $urlc .= &#34;&#38;today=&#34; . &#40;$Tmday&#41;;
&gt;     $urlc .= &#34;&#38;toyear=&#34; . &#40;$Tyear + 1900&#41;;
&gt;     $urlc .= &#34;&#38;sqlorder=desc&#38;dldformat=1&#38;submit.x=29&#38;submit.y=7&#34;;
260,261d274
&lt; #    $url = $TIAACREF_URL;
&lt;     $urlc = $CREF_URL;
272c285,286
&lt; 			$urlc .=  &#34;f&#34; . $cntc . &#34;=&#34; . $tiaacref_vals{$fund} . &#34;&#38;&#34;;
---
&gt; 			$urlc .= &#34;&#38;fundid&#34; . $tiaacref_vals{$fund} . &#34;=&#34; . $tiaacref_vals{$fund};
&gt; 			$cbResult .= &#40;$cntc &gt; 1&#41; ? &#40; &#34;%2C&#34; . $tiaacref_vals{$fund}&#41; : &#40;$tiaacref_vals{$fund}&#41;
283,284c297
&lt;     $urlc .=  &#34;days=1&#34;;
&lt;     $urlc .=  &#34;&#38;dldformat=1&#34;;
---
&gt;     $urlc .=  &#34;&#38;$cbResult&#34;;
300a314
&gt; 
302c316,319
&lt;        foreach &#40;split&#40;&#39;\012&#39;,$qdata&#41; &#41;{
---
&gt;        foreach &#40;split&#40;/&lt;br .&gt;/,$qdata&#41; &#41;{
&gt; 	   next unless m/.+,.+/;
&gt; 	   s/^ +//g;
&gt; 	   s/ +$//g;
303a321
&gt; 	       
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;14&nbsp;20:21:38&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;14&nbsp;21:47:32&nbsp;2010</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Oct 2010 21:47:22 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Reed &lt;daveother [...] mac.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Oct 14, 2010, at 8:21 PM, Vincent Lucarelli via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62104">https://rt.cpan.org/Ticket/Display.html?id=62104</a></span> &gt;
&gt; 
&gt; The download URL has changed.  I attached a diff that seems to work
&gt; for at least the TIAA-CREF annuities.
&gt; 
&gt; Apply patch by finding Tiaacref.pm, changing to that directory, and
&gt; running:
&gt; 
<div class="message-stanza open">&gt;&gt; patch -Np1 Tiaacref.pm Tiaacref.diff
</div>&gt; 
&gt; Vince
&gt; &lt;Tiaacref.diff&gt;
</div>

Yes, that fixes it for me. Thanks!

Dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;16&nbsp;03:50:49&nbsp;2010</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken">5 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Vincent,

Patch applied

-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;16&nbsp;03:50:49&nbsp;2010</span>
    <span class="description">eco [...] ecocode.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;16&nbsp;03:50:50&nbsp;2010</span>
    <span class="description">eco [...] ecocode.net -  Given to ecocode</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;19&nbsp;21:46:28&nbsp;2010</span>
    <span class="description">dbreiser [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> dbreiser [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 16 03:50:49 2010, ecocode wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks Vincent,
&gt; 
&gt; Patch applied
</div>
This new version fails on Mondays before that day&#39;s value is posted
&#40;sometime after 8pm US Eastern time&#41;. It probably also fails on Sundays,
but I didn&#39;t run the new version until Monday.

The new version also returns yesterday&#39;s quote instead of today&#39;s quote
every day except Monday nights.

If numdays=n is passed, then the website ignores the date range, and we
can avoid all the date calculations. We have to use numdays=2 because
numdays=1 returns nothing on weekdays before the new quote is posted.

By setting sqlorder=asc instead of =desc, the routine will still return
the most recent quote even when the database returns 2 quotes per symbol
&#40;tues-fri, 8pm ET until midnight localtime&#41;.

The attached patch needs to be applied after the prior patch in this thread.

Dave
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tiaacref.diff</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff recent/Tiaacref.pm new/Tiaacref.pm
262,264d261
&lt;     my &#40;$Fsec,$Fmin,$Fhour,$Fmday,$Fmon,$Fyear,$Fwday,$Fyday,$Fisdst&#41; = localtime&#40;time&#40;&#41; - 24 * 60 * 60&#41;;
&lt;     my &#40;$Tsec,$Tmin,$Thour,$Tmday,$Tmon,$Tyear,$Twday,$Tyday,$Tisdst&#41; = localtime&#40;time&#40;&#41;&#41;;
&lt; 
266,273c263
&lt;     $urlc .= &#34;page=input&#34;;
&lt;     $urlc .= &#34;&#38;frommonth=&#34; . &#40;$Fmon + 1&#41;;
&lt;     $urlc .= &#34;&#38;fromday=&#34; . &#40;$Fmday&#41;;
&lt;     $urlc .= &#34;&#38;fromyear=&#34; . &#40;$Fyear + 1900&#41;;
&lt;     $urlc .= &#34;&#38;tomonth=&#34; . &#40;$Tmon + 1&#41;;
&lt;     $urlc .= &#34;&#38;today=&#34; . &#40;$Tmday&#41;;
&lt;     $urlc .= &#34;&#38;toyear=&#34; . &#40;$Tyear + 1900&#41;;
&lt;     $urlc .= &#34;&#38;sqlorder=desc&#38;dldformat=1&#38;submit.x=29&#38;submit.y=7&#34;;
---
&gt;     $urlc .= &#34;page=input&#38;numdays=2&#38;sqlorder=asc&#38;dldformat=1&#38;submit.x=29&#38;submit.y=7&#34;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;19&nbsp;21:46:29&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;13&nbsp;20:33:01&nbsp;2010</span>
    <span class="description">mta [...] umich.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> mta [...] umich.edu</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached patch allows the TIAA-CREF module to retrieve quotes for
over 70 additional funds.  It must be applied after the previous two
patches.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tiaacref3.diff</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;02&nbsp;19:03:30&nbsp;2011</span>
    <span class="description">mta [...] umich.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> mta [...] umich.edu</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found a problem with my previous patch and have attached a further
small patch to fix it.  If you attempt to retrieve quotes for both
personal and institutional funds in the same call, it would fail for one
of the institutional funds.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tiaacref4.diff</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Finance/Quote/Tiaacref.pm	2010-12-11 00:24:50.000000000 -0500
+++ lib/Finance/Quote/Tiaacref.pm	2010-12-29 01:26:58.000000000 -0500
@@ -627,6 +627,7 @@
     if &#40;length&#40;$qdata&#41;&#41; {
        foreach &#40;split&#40;/&lt;br .&gt;/,$qdata&#41; &#41;{
 	   next unless m/.+,.+/;
+	   s/[\r\n]+//g;
 	   s/^ +//g;
 	   s/ +$//g;
            @line = $quoter-&gt;parse_csv&#40;$_&#41;;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;19&nbsp;02:16:18&nbsp;2012</span>
    <span class="description">mta [...] umich.edu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> mta [...] umich.edu</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">TIAA/CREF changed their web site again and broke this module.  Carl LaCombe came up with a 
new version which seems to work fine.  He did a lot of work digging out the new account codes 
for 195 different funds.  He sent his new version to me and agreed that I should post it here.

Since the changes were extensive and the patch would be considerably larger than the source 
I&#39;ve attached the new version of the Tiaacref.pm file to this response
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tiaacref.pm.zip</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1121440/589997/Tiaacref.pm.zip">Download Tiaacref.pm.zip</a><br />
<span class="downloadcontenttype">application/zip 10.3k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;29&nbsp;10:16:38&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I downloaded your new file and rapidly tested it against tiaacref.t
Much tests are now succeeding but 6 of them still fail...
Any idea ?

t/tiaacref.t .. 
1..23
ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
not ok 11
not ok 12
not ok 13
not ok 14
not ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
not ok 21
ok 22
ok 23
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;05:35:10&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken">15 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Failing tests where due to unsupported symbols. Modified test file to reflect new/other symbols.
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;05:35:21&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;07:56:35&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] Resolved: TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 07:56:22 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Sep 30, 2012, at 5:35 AM, Erik Colson via RT &lt;bug-Finance-Quote@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62104">https://rt.cpan.org/Ticket/Display.html?id=62104</a></span> &gt;
&gt; 
&gt; According to our records, your request has been resolved. If you have any
&gt; further questions or concerns, please respond to this message.
</div>
The recent &#40;early Sep 2012 I think&#41; changes TIAA-CREF made to their website broke it for me. I downloaded the updated Tiaacref.pm file and put it in the right place on my Mac system, but gnucash cannot get those quotes &#40;it was before September and other quotes still work&#41;.

Here&#39;s the error I get when running the command from the shell no matter which capitalization I use for the symbol.

$ /Applications/Gnucash.app/Contents/Resources/bin/gnc-fq-dump tiaacref crefBOND
Finance::Quote fields Gnucash uses:
   symbol: crefBOND &#40;deduced&#41;   &lt;=== required
     date: ** missing **        &lt;=== required
 currency: ** missing **        &lt;=== required
     last:                      &lt;=\       
      nav:                      &lt;=== one of these
    price:                      &lt;=/        
 timezone:                      &lt;=== optional

** This stock quote cannot be used by gnucash!!


$ /Applications/Gnucash.app/Contents/Resources/bin/gnc-fq-dump tiaacref CREFbond
Finance::Quote fields Gnucash uses:
   symbol: CREFbond &#40;deduced&#41;   &lt;=== required
     date: ** missing **        &lt;=== required
 currency: ** missing **        &lt;=== required
     last:                      &lt;=\       
      nav:                      &lt;=== one of these
    price:                      &lt;=/        
 timezone:                      &lt;=== optional

** This stock quote cannot be used by gnucash!!

Dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;07:56:38&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:17:19&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 30 07:56:35 2012, daveother@mac.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ /Applications/Gnucash.app/Contents/Resources/bin/gnc-fq-dump
&gt;    tiaacref CREFbond
&gt; Finance::Quote fields Gnucash uses:
&gt;    symbol: CREFbond &#40;deduced&#41;   &lt;=== required
&gt;      date: ** missing **        &lt;=== required
&gt;  currency: ** missing **        &lt;=== required
&gt;      last:                      &lt;=\
&gt;       nav:                      &lt;=== one of these
&gt;     price:                      &lt;=/
&gt;  timezone:                      &lt;=== optional
&gt; 
&gt; ** This stock quote cannot be used by gnucash!!
</div>
Hi,

I just added tests to tiaacref.t for this particular case CREFbond. All tests pass on the master 
branch. Please check you used the latest version from the master branch on github.

best

-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:17:20&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:26:51&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 08:26:39 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Sep 30, 2012, at 8:17 AM, Erik Colson via RT &lt;bug-Finance-Quote@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62104">https://rt.cpan.org/Ticket/Display.html?id=62104</a></span> &gt;
&gt; 
&gt; On Sun Sep 30 07:56:35 2012, daveother@mac.com wrote:
<div class="message-stanza open">&gt;&gt; $ /Applications/Gnucash.app/Contents/Resources/bin/gnc-fq-dump
&gt;&gt;   tiaacref CREFbond
&gt;&gt; Finance::Quote fields Gnucash uses:
&gt;&gt;   symbol: CREFbond &#40;deduced&#41;   &lt;=== required
&gt;&gt;     date: ** missing **        &lt;=== required
&gt;&gt; currency: ** missing **        &lt;=== required
&gt;&gt;     last:                      &lt;=\
&gt;&gt;      nav:                      &lt;=== one of these
&gt;&gt;    price:                      &lt;=/
&gt;&gt; timezone:                      &lt;=== optional
&gt;&gt; 
&gt;&gt; ** This stock quote cannot be used by gnucash!!
</div>&gt; 
&gt; Hi,
&gt; 
&gt; I just added tests to tiaacref.t for this particular case CREFbond. All tests pass on the master 
&gt; branch. Please check you used the latest version from the master branch on github.
&gt; 
&gt; best
&gt; 
&gt; -- 
&gt; Erik
</div>

I just did a git clone of

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/pfenwick/finance-quote">https://github.com/pfenwick/finance-quote</a></span>

and copied lib/Finance/Quote/Tiaacref.pm to the directory where it was on my Mac 10.8.1 system:

/Library/Perl/5.12/Finance/Quote/

and I still get the same error from the command line as above and the error from gnucash.

It obviously could be something with my system, but everything was working &#40;it looks like Aug 24 is the last time gnucash downloaded Tiaacref quotes&#41; and all the other symbols from other sources &#40;yahoo&#41; do work.

Thanks,
Dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:26:53&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:35:15&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please check you run the correct Tiaacref.pm
This should give you the exact location of Tiaacref.pm

   perldoc -lm Finance::Quote::Tiaacref

Is this where you&#39;ve put the one from the master branch ?

If yes, get tiaacref.t from the t/ directory and launch the next command:

   prove -v tiaacref.t

This should run the tiaacref test suite on your system. &#40;Send me the output of the command&#41;
If that fails &#40;it doesn&#39;t on my system&#41;, you should probably reinstall Finance::Quote.

best
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:49:29&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 08:49:16 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Sep 30, 2012, at 8:35 AM, Erik Colson via RT &lt;bug-Finance-Quote@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62104">https://rt.cpan.org/Ticket/Display.html?id=62104</a></span> &gt;
&gt; 
&gt; Please check you run the correct Tiaacref.pm
&gt; This should give you the exact location of Tiaacref.pm
&gt; 
&gt;   perldoc -lm Finance::Quote::Tiaacref
&gt; 
&gt; Is this where you&#39;ve put the one from the master branch ?
&gt; 
&gt; If yes, get tiaacref.t from the t/ directory and launch the next command:
&gt; 
&gt;   prove -v tiaacref.t
&gt; 
&gt; This should run the tiaacref test suite on your system. &#40;Send me the output of the command&#41;
&gt; If that fails &#40;it doesn&#39;t on my system&#41;, you should probably reinstall Finance::Quote.
&gt; 
&gt; best
&gt; -- 
&gt; Erik
</div>
Thanks for all your help.

 $ perldoc -lm Finance::Quote::Tiaacref
/Library/Perl/5.12/Finance/Quote/Tiaacref.pm

which is where I just put the file:

$ ls -l `perldoc -lm Finance::Quote::Tiaacref`
-r--r--r--@ 1 root  wheel  47848 Sep 30 08:22 /Library/Perl/5.12/Finance/Quote/Tiaacref.pm

prove -v yahoo.t does work, but the tiaacref.t fails. See output below. I can try re-installing F:Q if you think that will work. gnucash did the original installation, but I&#39;m a former Linux user who converted to Mac so hopefully I can figure out how to get the files there. I&#39;ll have to see if the INSTALL instructions:

$ perl Makefile.PL
$ make
# make install          &#40;as root&#41;

but them where they should be and allow gnucash to find them.


$ prove -v tiaacref.t
tiaacref.t .. 
1..0 # SKIP Set $ENV{ONLINE_TEST} to run this test
skipped: Set $ENV{ONLINE_TEST} to run this test
Files=1, Tests=0,  0 wallclock secs &#40; 0.02 usr  0.00 sys +  0.08 cusr  0.01 csys =  0.11 CPU&#41;
Result: NOTESTS

so I did:
export ONLINE_TEST=1

$ prove -v tiaacref.t
tiaacref.t .. 
1..27
ok 1
not ok 2
not ok 3
not ok 4
not ok 5
not ok 6
Use of uninitialized value within %quotes in numeric gt &#40;&gt;&#41; at tiaacref.t line 21.

#   Failed test at tiaacref.t line 21.
Use of uninitialized value within %quotes in string eq at tiaacref.t line 22.

#   Failed test at tiaacref.t line 22.

#   Failed test at tiaacref.t line 23.
Use of uninitialized value in substr at tiaacref.t line 24.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 24.
Use of uninitialized value in substr at tiaacref.t line 24.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 24.

#   Failed test at tiaacref.t line 24.
Use of uninitialized value in substr at tiaacref.t line 26.
substr outside of string at tiaacref.t line 26.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 26.
Use of uninitialized value in substr at tiaacref.t line 26.
substr outside of string at tiaacref.t line 26.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 26.

#   Failed test at tiaacref.t line 26.
Use of uninitialized value within %quotes in numeric gt &#40;&gt;&#41; at tiaacref.t line 29.
not ok 7

#   Failed test at tiaacref.t line 29.
not ok 8

#   Failed test at tiaacref.t line 30.
Use of uninitialized value in substr at tiaacref.t line 31.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 31.
Use of uninitialized value in substr at tiaacref.t line 31.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 31.
not ok 9

#   Failed test at tiaacref.t line 31.
Use of uninitialized value in substr at tiaacref.t line 33.
substr outside of string at tiaacref.t line 33.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 33.
Use of uninitialized value in substr at tiaacref.t line 33.
substr outside of string at tiaacref.t line 33.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 33.
not ok 10

#   Failed test at tiaacref.t line 33.
not ok 11

#   Failed test at tiaacref.t line 36.
Use of uninitialized value within %quotes in numeric gt &#40;&gt;&#41; at tiaacref.t line 37.
not ok 12

#   Failed test at tiaacref.t line 37.
not ok 13

#   Failed test at tiaacref.t line 38.
Use of uninitialized value in substr at tiaacref.t line 39.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 39.
Use of uninitialized value in substr at tiaacref.t line 39.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 39.
not ok 14

#   Failed test at tiaacref.t line 39.
Use of uninitialized value in substr at tiaacref.t line 41.
substr outside of string at tiaacref.t line 41.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 41.
Use of uninitialized value in substr at tiaacref.t line 41.
substr outside of string at tiaacref.t line 41.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 41.
not ok 15

#   Failed test at tiaacref.t line 41.
not ok 16

#   Failed test at tiaacref.t line 44.
Use of uninitialized value within %quotes in numeric gt &#40;&gt;&#41; at tiaacref.t line 45.
not ok 17

#   Failed test at tiaacref.t line 45.
not ok 18

#   Failed test at tiaacref.t line 46.
Use of uninitialized value in substr at tiaacref.t line 47.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 47.
Use of uninitialized value in substr at tiaacref.t line 47.
Argument &#34;&#34; isn&#39;t numeric in numeric eq &#40;==&#41; at tiaacref.t line 47.
not ok 19

#   Failed test at tiaacref.t line 47.
Use of uninitialized value in substr at tiaacref.t line 49.
substr outside of string at tiaacref.t line 49.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 49.
Use of uninitialized value in substr at tiaacref.t line 49.
substr outside of string at tiaacref.t line 49.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 49.
not ok 20

#   Failed test at tiaacref.t line 49.
not ok 21

#   Failed test at tiaacref.t line 52.
ok 22
not ok 23
not ok 24
not ok 25

#   Failed test at tiaacref.t line 55.

#   Failed test at tiaacref.t line 57.
Use of uninitialized value within %quotes in numeric gt &#40;&gt;&#41; at tiaacref.t line 58.

#   Failed test at tiaacref.t line 58.
Use of uninitialized value within %quotes in string eq at tiaacref.t line 59.
not ok 26

#   Failed test at tiaacref.t line 59.
Use of uninitialized value in substr at tiaacref.t line 60.
substr outside of string at tiaacref.t line 60.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 60.
Use of uninitialized value in substr at tiaacref.t line 60.
substr outside of string at tiaacref.t line 60.
Use of uninitialized value in numeric eq &#40;==&#41; at tiaacref.t line 60.
not ok 27

#   Failed test at tiaacref.t line 60.
# Looks like you failed 25 tests of 27.
Dubious, test returned 25 &#40;wstat 6400, 0x1900&#41;
Failed 25/27 subtests 

Test Summary Report
-------------------
tiaacref.t &#40;Wstat: 6400 Tests: 27 Failed: 25&#41;
  Failed tests:  2-21, 23-27
  Non-zero exit status: 25
Files=1, Tests=27,  1 wallclock secs &#40; 0.03 usr  0.01 sys +  0.19 cusr  0.02 csys =  0.25 CPU&#41;
Result: FAIL
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;08:59:19&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; so I did:
&gt; export ONLINE_TEST=1
</div>
yep, that&#39;s needed ;&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; $ prove -v tiaacref.t
&gt; tiaacref.t ..
&gt; 1..27
&gt; ok 1
&gt; not ok 2
</div>...
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ok 22
&gt; not ok 23
</div>...

Since only test 1 and 22 succeed and even 23 failed, I guess your Finance::Quote installation is 
somehow corrupted. You can try by replacing the Quote.pm from the master branch, which 
could succeed. But in your place I&#39;d go for a total replacement of all the Finance::Quote .pm files. 
&#40;or a reinstallation&#41;

best
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;09:00:09&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 08:59:56 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Sep 30, 2012, at 8:35 AM, Erik Colson via RT &lt;bug-Finance-Quote@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62104">https://rt.cpan.org/Ticket/Display.html?id=62104</a></span> &gt;
&gt; 
&gt; Please check you run the correct Tiaacref.pm
&gt; This should give you the exact location of Tiaacref.pm
&gt; 
&gt;   perldoc -lm Finance::Quote::Tiaacref
&gt; 
&gt; Is this where you&#39;ve put the one from the master branch ?
&gt; 
&gt; If yes, get tiaacref.t from the t/ directory and launch the next command:
&gt; 
&gt;   prove -v tiaacref.t
&gt; 
&gt; This should run the tiaacref test suite on your system. &#40;Send me the output of the command&#41;
&gt; If that fails &#40;it doesn&#39;t on my system&#41;, you should probably reinstall Finance::Quote.
&gt; 
&gt; best
&gt; -- 
&gt; Erik
</div>

The one line should have been:

puts them where they should be and allows gnucash to find them.

I tried following the INSTALL instructions but it doesn&#39;t seem to update all the files.

$ perl Makefile.PL 
Checking if your kit is complete...
Warning: the following files are missing in your kit:
        META.yml
Please inform the author.
Writing Makefile for Finance::Quote

$ make

$ sudo make install
Password:
Installing /Library/Perl/5.12/Finance/Quote.pm
Installing /Library/Perl/5.12/Finance/Quote/Bourso.pm
Installing /Library/Perl/5.12/Finance/Quote/BSERO.pm
Installing /Library/Perl/5.12/Finance/Quote/Currencies.pm
Installing /Library/Perl/5.12/Finance/Quote/IndiaMutual.pm
Installing /Library/Perl/5.12/Finance/Quote/SIXfunds.pm
Installing /Library/Perl/5.12/Finance/Quote/SIXshares.pm
Installing /Library/Perl/5.12/Finance/Quote/Tdefunds.pm
Installing /Library/Perl/5.12/Finance/Quote/TSP.pm
Installing /Library/Perl/5.12/Finance/Quote/VWD.pm
Installing /Library/Perl/5.12/Finance/Quote/Yahoo/Base.pm
Installing /Library/Perl/5.12/Finance/Quote/Yahoo/Europe.pm
Installing /usr/local/share/man/man3/Finance::Quote.3pm
Installing /usr/local/share/man/man3/Finance::Quote::AEX.3pm
Installing /usr/local/share/man/man3/Finance::Quote::AIAHK.3pm
Installing /usr/local/share/man/man3/Finance::Quote::ASEGR.3pm
Installing /usr/local/share/man/man3/Finance::Quote::ASX.3pm
Installing /usr/local/share/man/man3/Finance::Quote::BMONesbittBurns.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Bourso.3pm
Installing /usr/local/share/man/man3/Finance::Quote::BSERO.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Cdnfundlibrary.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Cominvest.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Currencies.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Deka.3pm
Installing /usr/local/share/man/man3/Finance::Quote::DWS.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Fidelity.3pm
Installing /usr/local/share/man/man3/Finance::Quote::FinanceCanada.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Finanzpartner.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Fool.3pm
Installing /usr/local/share/man/man3/Finance::Quote::FTPortfolios.3pm
Installing /usr/local/share/man/man3/Finance::Quote::GoldMoney.3pm
Installing /usr/local/share/man/man3/Finance::Quote::HEX.3pm
Installing /usr/local/share/man/man3/Finance::Quote::HU.3pm
Installing /usr/local/share/man/man3/Finance::Quote::IndiaMutual.3pm
Installing /usr/local/share/man/man3/Finance::Quote::LeRevenu.3pm
Installing /usr/local/share/man/man3/Finance::Quote::ManInvestments.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Morningstar.3pm
Installing /usr/local/share/man/man3/Finance::Quote::NZX.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Platinum.3pm
Installing /usr/local/share/man/man3/Finance::Quote::SEB.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Tdefunds.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Tdwaterhouse.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Troweprice.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Trustnet.3pm
Installing /usr/local/share/man/man3/Finance::Quote::TSP.3pm
Installing /usr/local/share/man/man3/Finance::Quote::TSX.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Union.3pm
Installing /usr/local/share/man/man3/Finance::Quote::USFedBonds.3pm
Installing /usr/local/share/man/man3/Finance::Quote::VWD.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Yahoo::Asia.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Yahoo::Australia.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Yahoo::Base.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Yahoo::Brasil.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Yahoo::Europe.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Yahoo::NZ.3pm
Installing /usr/local/share/man/man3/Finance::Quote::Yahoo::USA.3pm
Installing /usr/local/share/man/man3/Finance::Quote::ZA.3pm
Appending installation info to /Library/Perl/Updates/5.12.4/darwin-thread-multi-2level/perllocal.pod


$ ls -l `perldoc -lm Finance::Quote::Tiaacref`
-r--r--r--  1 dreed  dreed  47848 Sep 30 08:22 /Users/dreed/Downloads/finance-quote/blib/lib/Finance/Quote/Tiaacref.pm

still has the time from earlier today.

Any more suggestions?

Thanks,
Dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;09:23:29&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 30 09:00:09 2012, daveother@mac.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Installing /Library/Perl/5.12/Finance/Quote.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/Bourso.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/BSERO.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/Currencies.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/IndiaMutual.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/SIXfunds.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/SIXshares.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/Tdefunds.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/TSP.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/VWD.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/Yahoo/Base.pm
&gt; Installing /Library/Perl/5.12/Finance/Quote/Yahoo/Europe.pm
</div>
This clearly is only a partial install. The only reason I can see for this is that your download is 
incomplete.
I&#39;m freeing some time now to bundle and upload a new release. I hope that will solve your 
issues...

best

-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;09:29:08&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 09:28:57 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Sep 30, 2012, at 9:23 AM, Erik Colson via RT &lt;bug-Finance-Quote@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62104">https://rt.cpan.org/Ticket/Display.html?id=62104</a></span> &gt;
&gt; 
&gt; On Sun Sep 30 09:00:09 2012, daveother@mac.com wrote:
<div class="message-stanza open">&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/Bourso.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/BSERO.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/Currencies.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/IndiaMutual.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/SIXfunds.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/SIXshares.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/Tdefunds.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/TSP.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/VWD.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/Yahoo/Base.pm
&gt;&gt; Installing /Library/Perl/5.12/Finance/Quote/Yahoo/Europe.pm
</div>&gt; 
&gt; This clearly is only a partial install. The only reason I can see for this is that your download is 
&gt; incomplete.
&gt; I&#39;m freeing some time now to bundle and upload a new release. I hope that will solve your 
&gt; issues...
&gt; 
&gt; best
&gt; 
&gt; -- 
&gt; Erik
</div>
I did a git clone of <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/pfenwick/finance-quote">https://github.com/pfenwick/finance-quote</a></span> so I would think that should be everything.

Thanks,
Dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;10:06:46&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 30 09:29:08 2012, daveother@mac.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I did a git clone of <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/pfenwick/finance-quote">https://github.com/pfenwick/finance-quote</a></span> so I
&gt; would think that should be everything.
</div>
Well, that should, indeed. I did the same locally and got a full install ;&#41;
Meanwhile, F::Q 1.18 has been uploaded to cpan. Keep me informed !

best

-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;10:24:24&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 10:24:07 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;10:40:16&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 30 10:24:24 2012, daveother@mac.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I installe it &#40;forgot to set the environment variable for testing in
&gt;    that shell&#41;, but afterwards, downloading the quotes still fail
&gt;    although it did update the Tiaacref.pm file this time. Both
&gt;    installation and prove command shown below. I&#39;m willing to try
&gt;    anything else you want me to do, but I don&#39;t want to keep taking up
&gt;    your time if you want to give up. Perhaps it&#39;s something unique to
&gt;    the Mac causing it to fail.
</div>
no problem to figure this out ;&#41;
but it certainly ain&#39;t a Mac problem as I&#39;m running on Mac too.

well, let&#39;s try it from with the cpan command:

in the cpan shell use :

   look Finance::Quote

then launch 

   export ONLINE_TEST=1
   prove -lv t/tiaacref.t

This way you should have exactly the same environment as which installed Finance::Quote.

If that still fails... could you check if you have access to the tiaacref website ?
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;10:43:58&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 10:43:48 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Something must be screwed up on my Mac desktop &#40;the OS and files have been upgraded for years so there must be some cruft in it&#41;. At one point I was running the X11 gnucash using macports on it.


I also have a Mac laptop and I installed F::Q from github &#40;as cpan still found the 1.17 version&#41;. That worked and the prove -v tiaacref.t command indicates all tests passed.

BUT, gnucash still fails to work. The gnucash gui says it couldn&#39;t download the files and its command line version still fails

/Applications/Gnucash.app/Contents/Resources/bin/gnc-fq-dump tiaacref CREFbond
Finance::Quote fields Gnucash uses:
    symbol: CREFbond &#40;deduced&#41;   &lt;=== required
      date: ** missing **        &lt;=== required
  currency: ** missing **        &lt;=== required
      last:                      &lt;=\       
       nav:                      &lt;=== one of these
     price:                      &lt;=/        
  timezone:                      &lt;=== optional

** This stock quote cannot be used by gnucash!!

while yahoo quotes work:

/Applications/Gnucash.app/Contents/Resources/bin/gnc-fq-dump yahoo aapl       

No results found for stock aapl, but results were returned for
the stock&#40;s&#41; AAPL.  Printing data for the first stock returned.

Finance::Quote fields Gnucash uses:
    symbol: AAPL                 &lt;=== required
      date: 09/28/2012           &lt;=== required
  currency: USD                  &lt;=== required
      last: 667.105              &lt;=\       
       nav:                      &lt;=== one of these
     price: 667.105              &lt;=/        
  timezone:                      &lt;=== optional

I see your other message came though, but I think this one supersedes the questions you asked on it.

Dave
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;10:52:33&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Sep 30 10:43:58 2012, daveother@mac.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I see your other message came though, but I think this one supersedes
&gt; the questions you asked on it.
</div>
Indeed! Great news ;&#41;
So I guess your computer needs a major cleanup...

I&#39;m closing this bug now. Reopen it if you need help, but I cannot help you with gnucash since 
I&#39;m not using that software at all...

best
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;10:52:34&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;11:03:28&nbsp;2012</span>
    <span class="description">daveother [...] mac.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #62104] TIAA-CREF quotes not working</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Sep 2012 11:03:18 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-Quote [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> daveother [...] mac.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Yes, closing it is fine. I&#39;ll let the gnucash people know that there seems to be something wrong with their usage of the F::Q module for Tiaacref.

Dave

On Sep 30, 2012, at 10:52 AM, Erik Colson via RT &lt;bug-Finance-Quote@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=62104">https://rt.cpan.org/Ticket/Display.html?id=62104</a></span> &gt;
&gt; 
&gt; On Sun Sep 30 10:43:58 2012, daveother@mac.com wrote:
<div class="message-stanza open">&gt;&gt; I see your other message came though, but I think this one supersedes
&gt;&gt; the questions you asked on it.
</div>&gt; 
&gt; Indeed! Great news ;&#41;
&gt; So I guess your computer needs a major cleanup...
&gt; 
&gt; I&#39;m closing this bug now. Reopen it if you need help, but I cannot help you with gnucash since 
&gt; I&#39;m not using that software at all...
&gt; 
&gt; best
&gt; -- 
&gt; Erik
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;11:03:29&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;11:05:23&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bug report closed
-- 
Erik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;30&nbsp;11:05:23&nbsp;2012</span>
    <span class="description">eco [...] ecocode.net -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
