<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #124910 for Tk: Test failure on FreeBSD-11.0 with perl-5.27.10: &#34;don&#39;t know how to make test_dynamic&#34;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #124910 for Tk: Test failure on FreeBSD-11.0 with perl-5.27.10: &#34;don&#39;t know how to make test_dynamic&#34;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Tk">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Tk">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Tk">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Tk">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tk">Tk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">124910</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Tk">Tk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jkeenan [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
804.034    </td>
  </tr>
  <tr id="CF-33611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
804.034_501    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




freebsd-libpng16-10.3-versus-11.0.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1779309/957363/freebsd-libpng16-10.3-versus-11.0.diff">
Wed Mar 28 14:31:26 2018 (31.7k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>


jkeenan.perl_V.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1778588/956989/jkeenan.perl_V.txt">
Sun Mar 25 11:00:26 2018 (3.1k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>


ldd-libpng16-freebsd-11.0.output.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1779241/957333/ldd-libpng16-freebsd-11.0.output.txt">
Wed Mar 28 08:34:07 2018 (313b) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>


Tk-804.034.cpanm.build.log.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1778588/956988/Tk-804.034.cpanm.build.log.gz">
Sun Mar 25 11:00:26 2018 (24.7k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>


tk-XXX-branch-make-test-output.txt.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1778655/957040/tk-XXX-branch-make-test-output.txt.gz">
Sun Mar 25 19:37:51 2018 (20.2k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>


Tk.gmake.test.output.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1778627/957018/Tk.gmake.test.output.txt">
Sun Mar 25 16:05:33 2018 (3.6k) by jkeenan [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=124910">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778588" href="/Public/Bug/Display.html?id=124910#txn-1778588">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;11:00:26&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failure on FreeBSD-11.0 with perl-5.27.10: &#34;don&#39;t know how
 to make test_dynamic&#34;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778588/956987/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/956987">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1007b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">As part of my &#39;CPAN river&#39; testing, I tested Tk-804.034 first against perl-5.27.10 and then against blead.  Notwithstanding some build-time warnings, &#39;make&#39; completed successfully -- but then &#39;make all-am&#39; failed.  &#40;As a consequence, Tk-Pod failed as well.&#41;  Full .cpanm build.log attached &#40;gzipped&#41;; here&#39;s the relevant excerpt.

#####
make  all-am
make[2]: don&#39;t know how to make test_dynamic. Stop

make[2]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-804.034/PNG/libpng
*** Error code 2

Stop.
make[1]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-804.034/PNG
*** Error code 1

Stop.
make: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-804.034
-&gt; FAIL Installing Tk failed. See /home/jkeenan/.cpanm/work/1521988924.39230/build.log for details. Retry with --force to force install it.
#####

As Tk has many other CPAN distributions depending on it, it would be good to get this cleared up before the release of perl-5.28.0.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tk-804.034.cpanm.build.log.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778588/956988/Tk-804.034.cpanm.build.log.gz">Download Tk-804.034.cpanm.build.log.gz</a><br />
<span class="downloadcontenttype">application/gzip 24.7k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> jkeenan.perl_V.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778588/956989/jkeenan.perl_V.txt">Download jkeenan.perl_V.txt</a><br />
<span class="downloadcontenttype">text/plain 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Summary of my perl5 &#40;revision 5 version 27 subversion 11&#41; configuration:
  Commit id: 811612a11efb1ebc131370e8238d3512779354f8
  Platform:
    osname=freebsd
    osvers=11.0-release-p1
    archname=amd64-freebsd-thread-multi
    uname=&#39;freebsd kid51-freebsd-11-install-3 11.0-release-p1 freebsd 11.0-release-p1 #0 r306420: thu sep 29 01:43:23 utc 2016 root@releng2.nyi.freebsd.org:usrobjusrsrcsysgeneric amd64 &#39;
    config_args=&#39;-des -Dusedevel -Uversiononly -Dprefix=/home/jkeenan/testing/blead -Dman1dir=none -Dman3dir=none -Duseithreads -Doptimize=-O2 -pipe -fstack-protector -fno-strict-aliasing&#39;
    hint=recommended
    useposix=true
    d_sigaction=define
    useithreads=define
    usemultiplicity=define
    use64bitint=define
    use64bitall=define
    uselongdouble=undef
    usemymalloc=n
    default_inc_excludes_dot=define
    bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;
    ccflags =&#39;-DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2&#39;
    optimize=&#39;-O2 -pipe -fstack-protector -fno-strict-aliasing&#39;
    cppflags=&#39;-DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include&#39;
    ccversion=&#39;&#39;
    gccversion=&#39;4.2.1 Compatible FreeBSD Clang 3.8.0 &#40;tags/RELEASE_380/final 262564&#41;&#39;
    gccosandvers=&#39;&#39;
    intsize=4
    longsize=8
    ptrsize=8
    doublesize=8
    byteorder=12345678
    doublekind=3
    d_longlong=define
    longlongsize=8
    d_longdbl=define
    longdblsize=16
    longdblkind=3
    ivtype=&#39;long&#39;
    ivsize=8
    nvtype=&#39;double&#39;
    nvsize=8
    Off_t=&#39;off_t&#39;
    lseeksize=8
    alignbytes=8
    prototype=define
  Linker and Libraries:
    ld=&#39;cc&#39;
    ldflags =&#39;-pthread -Wl,-E  -fstack-protector-strong -L/usr/local/lib&#39;
    libpth=/usr/lib /usr/local/lib /usr/bin/../lib/clang/3.8.0/lib /usr/lib
    libs=-lpthread -lgdbm -lm -lcrypt -lutil
    perllibs=-lpthread -lm -lcrypt -lutil
    libc=
    so=so
    useshrplib=false
    libperl=libperl.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs
    dlext=so
    d_dlsymun=undef
    ccdlflags=&#39; &#39;
    cccdlflags=&#39;-DPIC -fPIC&#39;
    lddlflags=&#39;-shared  -L/usr/local/lib -fstack-protector-strong&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options:
    HAS_TIMES
    MULTIPLICITY
    PERLIO_LAYERS
    PERL_COPY_ON_WRITE
    PERL_DONT_CREATE_GVSV
    PERL_IMPLICIT_CONTEXT
    PERL_MALLOC_WRAP
    PERL_OP_PARENT
    PERL_PRESERVE_IVUV
    PERL_USE_DEVEL
    USE_64_BIT_ALL
    USE_64_BIT_INT
    USE_ITHREADS
    USE_LARGE_FILES
    USE_LOCALE
    USE_LOCALE_COLLATE
    USE_LOCALE_CTYPE
    USE_LOCALE_NUMERIC
    USE_LOCALE_TIME
    USE_PERLIO
    USE_PERL_ATOF
    USE_REENTRANT_API
  Built under freebsd
  Compiled at Mar 25 2018 10:29:41
  %ENV:
    PERL2DIR=&#34;/home/jkeenan/gitwork/perl2&#34;
    PERL_WORKDIR=&#34;/home/jkeenan/gitwork/perl&#34;
  @INC:
    lib
    /home/jkeenan/testing/blead/lib/perl5/site_perl/5.27.11/amd64-freebsd-thread-multi
    /home/jkeenan/testing/blead/lib/perl5/site_perl/5.27.11
    /home/jkeenan/testing/blead/lib/perl5/5.27.11/amd64-freebsd-thread-multi
    /home/jkeenan/testing/blead/lib/perl5/5.27.11
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778595" href="/Public/Bug/Display.html?id=124910#txn-1778595">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;11:26:13&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778595/956995/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/956995">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 25 11:00:26 2018, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As part of my &#39;CPAN river&#39; testing, I tested Tk-804.034 first against
&gt; perl-5.27.10 and then against blead.  Notwithstanding some build-time
&gt; warnings, &#39;make&#39; completed successfully -- but then &#39;make all-am&#39;
&gt; failed.  &#40;As a consequence, Tk-Pod failed as well.&#41;  Full .cpanm
&gt; build.log attached &#40;gzipped&#41;; here&#39;s the relevant excerpt.
&gt; 
&gt; #####
&gt; make  all-am
&gt; make[2]: don&#39;t know how to make test_dynamic. Stop
&gt; 
&gt; make[2]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034/PNG/libpng
&gt; *** Error code 2
&gt; 
&gt; Stop.
&gt; make[1]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034/PNG
&gt; *** Error code 1
&gt; 
&gt; Stop.
&gt; make: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034
&gt; -&gt; FAIL Installing Tk failed. See
&gt; /home/jkeenan/.cpanm/work/1521988924.39230/build.log for details.
&gt; Retry with --force to force install it.
&gt; #####
&gt; 
&gt; As Tk has many other CPAN distributions depending on it, it would be
&gt; good to get this cleared up before the release of perl-5.28.0.
&gt; 
&gt; Thank you very much.
&gt; Jim Keenan
</div>
Perhaps related to <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=117800">https://rt.cpan.org/Ticket/Display.html?id=117800</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778597" href="/Public/Bug/Display.html?id=124910#txn-1778597">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;12:20:30&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778597/956997/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/956997">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-03-25 11:00:26, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As part of my &#39;CPAN river&#39; testing, I tested Tk-804.034 first against
&gt; perl-5.27.10 and then against blead.  Notwithstanding some build-time
&gt; warnings, &#39;make&#39; completed successfully -- but then &#39;make all-am&#39;
&gt; failed.  &#40;As a consequence, Tk-Pod failed as well.&#41;  Full .cpanm
&gt; build.log attached &#40;gzipped&#41;; here&#39;s the relevant excerpt.
&gt; 
&gt; #####
&gt; make  all-am
&gt; make[2]: don&#39;t know how to make test_dynamic. Stop
&gt; 
&gt; make[2]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034/PNG/libpng
&gt; *** Error code 2
&gt; 
&gt; Stop.
&gt; make[1]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034/PNG
&gt; *** Error code 1
&gt; 
&gt; Stop.
&gt; make: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034
&gt; -&gt; FAIL Installing Tk failed. See
&gt; /home/jkeenan/.cpanm/work/1521988924.39230/build.log for details.
&gt; Retry with --force to force install it.
&gt; #####
&gt; 
&gt; As Tk has many other CPAN distributions depending on it, it would be
&gt; good to get this cleared up before the release of perl-5.28.0.
</div>
Strange. I regularly build Tk on various FreeBSD systems &#40;10, 11, 12, sometimes 9&#41;, and never saw this problem: <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Tk%20804.034;os=freebsd;reports=1#sl=4,1">http://matrix.cpantesters.org/?dist=Tk%20804.034;os=freebsd;reports=1#sl=4,1</a></span>

Just an idea: is the libpng already installed? I.e. is there a /usr/local/include/png.h?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778598" href="/Public/Bug/Display.html?id=124910#txn-1778598">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;12:20:31&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778601" href="/Public/Bug/Display.html?id=124910#txn-1778601">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;12:44:10&nbsp;2018</span>
    <span class="description">jkeenan [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #124910] Test failure on FreeBSD-11.0 with perl-5.27.10: &#34;don&#39;t know how to make test_dynamic&#34;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 25 Mar 2018 12:43:44 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org, jkeenan [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> James E Keenan &lt;jkeenan [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778601/957000/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957000">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 03/25/2018 12:20 PM, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; 
&gt; On 2018-03-25 11:00:26, JKEENAN wrote:
<div class="message-stanza open">&gt;&gt; As part of my &#39;CPAN river&#39; testing, I tested Tk-804.034 first against
&gt;&gt; perl-5.27.10 and then against blead.  Notwithstanding some build-time
&gt;&gt; warnings, &#39;make&#39; completed successfully -- but then &#39;make all-am&#39;
&gt;&gt; failed.  &#40;As a consequence, Tk-Pod failed as well.&#41;  Full .cpanm
&gt;&gt; build.log attached &#40;gzipped&#41;; here&#39;s the relevant excerpt.
&gt;&gt;
&gt;&gt; #####
&gt;&gt; make  all-am
&gt;&gt; make[2]: don&#39;t know how to make test_dynamic. Stop
&gt;&gt;
&gt;&gt; make[2]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt;&gt; 804.034/PNG/libpng
&gt;&gt; *** Error code 2
&gt;&gt;
&gt;&gt; Stop.
&gt;&gt; make[1]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt;&gt; 804.034/PNG
&gt;&gt; *** Error code 1
&gt;&gt;
&gt;&gt; Stop.
&gt;&gt; make: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt;&gt; 804.034
&gt;&gt; -&gt; FAIL Installing Tk failed. See
&gt;&gt; /home/jkeenan/.cpanm/work/1521988924.39230/build.log for details.
&gt;&gt; Retry with --force to force install it.
&gt;&gt; #####
&gt;&gt;
&gt;&gt; As Tk has many other CPAN distributions depending on it, it would be
&gt;&gt; good to get this cleared up before the release of perl-5.28.0.
</div>&gt; 
&gt; Strange. I regularly build Tk on various FreeBSD systems &#40;10, 11, 12, sometimes 9&#41;, and never saw this problem: <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=Tk%20804.034;os=freebsd;reports=1#sl=4,1">http://matrix.cpantesters.org/?dist=Tk%20804.034;os=freebsd;reports=1#sl=4,1</a></span>
&gt; 
&gt; Just an idea: is the libpng already installed? I.e. is there a /usr/local/include/png.h?
&gt; 
</div>

Yes, it&#39;s a symlink to /usr/local/include/libpng16/png.h
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778627" href="/Public/Bug/Display.html?id=124910#txn-1778627">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;16:05:33&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778627/957017/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957017">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 432b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Additional data.

In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then said &#39;alias make=gmake&#39; and attempted to build Tk in the same directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make test&#39; died quickly in the same way.

See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with &#39;cd PNG&#39; in it.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tk.gmake.test.output.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778627/957018/Tk.gmake.test.output.txt">Download Tk.gmake.test.output.txt</a><br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Tk.bs blib/arch/auto/Tk/Tk.bs 644
cd pTk &#38;&#38; make DEFINE=&#34;&#34; LIBPERL_A=&#34;libperl.a&#34; LINKTYPE=&#34;dynamic&#34; OPTIMIZE=&#34;-O2 -pipe -fstack-protector -fno-strict-aliasing&#34; PREFIX=&#34;/usr/local&#34; PASTHRU_DEFINE=&#39; &#39; PASTHRU_INC=&#39;-I/usr/local/include -I/usr/local/include/freetype2 &#39;
Manifying 103 pod documents
Manifying 1 pod document
Manifying 2 pod documents
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- X.bs ../../blib/arch/auto/Tk/X/X.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Xlib.bs ../blib/arch/auto/Tk/Xlib/Xlib.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- WinPhoto.bs ../blib/arch/auto/Tk/WinPhoto/WinPhoto.bs 644
Manifying 1 pod document
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Pixmap.bs ../blib/arch/auto/Tk/Pixmap/Pixmap.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- TixGrid.bs ../blib/arch/auto/Tk/TixGrid/TixGrid.bs 644
Manifying 1 pod document
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Text.bs ../blib/arch/auto/Tk/Text/Text.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- TList.bs ../blib/arch/auto/Tk/TList/TList.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Scrollbar.bs ../blib/arch/auto/Tk/Scrollbar/Scrollbar.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Scale.bs ../blib/arch/auto/Tk/Scale/Scale.bs 644
cd zlib &#38;&#38; make libz.a &#34;CC=cc -DPIC -fPIC&#34; RANLIB=&#34;:&#34;
`libz.a&#39; is up to date.
make  all-am
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- PNG.bs ../blib/arch/auto/Tk/PNG/PNG.bs 644
Manifying 1 pod document
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- NBFrame.bs ../blib/arch/auto/Tk/NBFrame/NBFrame.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Mwm.bs ../blib/arch/auto/Tk/Mwm/Mwm.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Menubutton.bs ../blib/arch/auto/Tk/Menubutton/Menubutton.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Listbox.bs ../blib/arch/auto/Tk/Listbox/Listbox.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- JPEG.bs ../blib/arch/auto/Tk/JPEG/JPEG.bs 644
Manifying 1 pod document
Manifying 1 pod document
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- InputO.bs ../blib/arch/auto/Tk/InputO/InputO.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- IO.bs ../blib/arch/auto/Tk/IO/IO.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- HList.bs ../blib/arch/auto/Tk/HList/HList.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Event.bs ../blib/arch/auto/Tk/Event/Event.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Entry.bs ../blib/arch/auto/Tk/Entry/Entry.bs 644
Manifying 3 pod documents
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Compound.bs ../blib/arch/auto/Tk/Compound/Compound.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- Canvas.bs ../blib/arch/auto/Tk/Canvas/Canvas.bs 644
&#34;/usr/local/bin/perl&#34; -MExtUtils::Command::MM -e &#39;cp_nonempty&#39; -- PNG.bs ../blib/arch/auto/Tk/PNG/PNG.bs 644
cd zlib &#38;&#38; make libz.a &#34;CC=cc -DPIC -fPIC&#34; RANLIB=&#34;:&#34;
`libz.a&#39; is up to date.
make  all-am
make[2]: don&#39;t know how to make test_dynamic. Stop

make[2]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-804.034/PNG/libpng
*** Error code 2

Stop.
make[1]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-804.034/PNG
gmake: *** [Makefile:1462: subdirs-test_dynamic] Error 1
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778629" href="/Public/Bug/Display.html?id=124910#txn-1778629">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;16:54:00&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778629/957020/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957020">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 616b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-03-25 16:05:33, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Additional data.
&gt; 
&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then
&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make
&gt; test&#39; died quickly in the same way.
&gt; 
&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with &#39;cd
&gt; PNG&#39; in it.
&gt; 
</div>
Another question: is the existence of zlib correctly detected? Does the following print something?

    pkg-config --exists zlib || echo zlib not installed
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778633" href="/Public/Bug/Display.html?id=124910#txn-1778633">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;17:17:51&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> jkeenan [...] pobox.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778633/957023/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957023">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-03-25 16:54:00, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; Additional data.
&gt; &gt;
&gt; &gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then
&gt; &gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt; directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make
&gt; &gt; test&#39; died quickly in the same way.
&gt; &gt;
&gt; &gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; &gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with &#39;cd
&gt; &gt; PNG&#39; in it.
&gt; &gt;
</div>&gt; 
&gt; Another question: is the existence of zlib correctly detected? Does
&gt; the following print something?
&gt; 
&gt; pkg-config --exists zlib || echo zlib not installed
</div>
I pushed an experimental branch to Tk&#39;s git repo. Can you git-clone the repository from github, switch to the branch XXX-rt-perl-124910 and retry the build?

I suspect you don&#39;t have the pkgconf package installed, so detection of the available system libraries failed and the compilation of the bundled png+zlib libraries happened. If this is the case then installing pkgconf could make the Tk-804.034 compilation successful, without patching.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778640" href="/Public/Bug/Display.html?id=124910#txn-1778640">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;17:19:34&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Reference by ticket #117800 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778649" href="/Public/Bug/Display.html?id=124910#txn-1778649">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;19:21:08&nbsp;2018</span>
    <span class="description">jkeenan [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #124910] Test failure on FreeBSD-11.0 with perl-5.27.10: &#34;don&#39;t know how to make test_dynamic&#34;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 25 Mar 2018 19:20:54 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> James E Keenan &lt;jkeenan [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778649/957032/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957032">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 03/25/2018 04:54 PM, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; 
&gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt;&gt; Additional data.
&gt;&gt;
&gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then
&gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make
&gt;&gt; test&#39; died quickly in the same way.
&gt;&gt;
&gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with &#39;cd
&gt;&gt; PNG&#39; in it.
&gt;&gt;
</div>&gt; 
&gt; Another question: is the existence of zlib correctly detected? Does the following print something?
&gt; 
&gt;      pkg-config --exists zlib || echo zlib not installed
&gt; 
</div>
It prints nothing at all -- but I&#39;m not sure that&#39;s the correct command.

When I type:
$&gt; man pkg-config
... what comes up is a man page whose first line is &#34;pkg config - 
retrieve the value of a given configuration option&#34;.  But I don&#39;t think 
we&#39;re looking for a configuration option here.

On the other hand, when I type:
$&gt; man zlib
... I get ZLIB&#40;3&#41;, whose first line reads: &#34;zlib - 
compression/decompression library&#34;

So I believe I have zlib.  &#40;Replies to your other posts coming soon.&#41;

Thank you very much.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778652" href="/Public/Bug/Display.html?id=124910#txn-1778652">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;19:24:16&nbsp;2018</span>
    <span class="description">jkeenan [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #124910] Test failure on FreeBSD-11.0 with perl-5.27.10: &#34;don&#39;t know how to make test_dynamic&#34;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 25 Mar 2018 19:24:03 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> James E Keenan &lt;jkeenan [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778652/957035/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957035">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 03/25/2018 05:17 PM, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; 
&gt; On 2018-03-25 16:54:00, SREZIC wrote:
<div class="message-stanza open">&gt;&gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt;&gt;&gt; Additional data.
&gt;&gt;&gt;
&gt;&gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then
&gt;&gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt;&gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make
&gt;&gt;&gt; test&#39; died quickly in the same way.
&gt;&gt;&gt;
&gt;&gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt;&gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with &#39;cd
&gt;&gt;&gt; PNG&#39; in it.
&gt;&gt;&gt;
</div>&gt;&gt;
&gt;&gt; Another question: is the existence of zlib correctly detected? Does
&gt;&gt; the following print something?
&gt;&gt;
&gt;&gt; pkg-config --exists zlib || echo zlib not installed
</div></div>
Rearranging your comments a bit ...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I suspect you don&#39;t have the pkgconf package installed, 
</div>
To the contrary, I installed pkgconf two days ago as part of my effort 
to get a different CPAN-3000 library to test properly on FreeBSD.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ...so detection of the available system libraries failed and the compilation of the bundled png+zlib libraries happened. If this is the case then installing pkgconf could make the Tk-804.034 compilation successful, without patching.
&gt; 
&gt; I pushed an experimental branch to Tk&#39;s git repo. Can you git-clone the repository from github, switch to the branch XXX-rt-perl-124910 and retry the build?
&gt; 
</div>
Will try this later tonight or tomorrow.  Thanks.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778655" href="/Public/Bug/Display.html?id=124910#txn-1778655">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;19:37:51&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778655/957039/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957039">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 25 19:24:16 2018, jkeenan@pobox.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 03/25/2018 05:17 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt;
&gt; &gt; On 2018-03-25 16:54:00, SREZIC wrote:
<div class="message-stanza open">&gt; &gt;&gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt;&gt;&gt; Additional data.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then
&gt; &gt;&gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt;&gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make
&gt; &gt;&gt;&gt; test&#39; died quickly in the same way.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; &gt;&gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with
&gt; &gt;&gt;&gt; &#39;cd
&gt; &gt;&gt;&gt; PNG&#39; in it.
&gt; &gt;&gt;&gt;
</div>&gt; &gt;&gt;
&gt; &gt;&gt; Another question: is the existence of zlib correctly detected? Does
&gt; &gt;&gt; the following print something?
&gt; &gt;&gt;
&gt; &gt;&gt; pkg-config --exists zlib || echo zlib not installed
</div></div>&gt; 
&gt; Rearranging your comments a bit ...
&gt; 
<div class="message-stanza open">&gt; &gt; I suspect you don&#39;t have the pkgconf package installed,
</div>&gt; 
&gt; To the contrary, I installed pkgconf two days ago as part of my effort
&gt; to get a different CPAN-3000 library to test properly on FreeBSD.
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; ...so detection of the available system libraries failed and the
&gt; &gt; compilation of the bundled png+zlib libraries happened. If this is
&gt; &gt; the case then installing pkgconf could make the Tk-804.034
&gt; &gt; compilation successful, without patching.
&gt; &gt;
&gt; &gt; I pushed an experimental branch to Tk&#39;s git repo. Can you git-clone
&gt; &gt; the repository from github, switch to the branch XXX-rt-perl-124910
&gt; &gt; and retry the build?
&gt; &gt;
</div>&gt; 
&gt; Will try this later tonight or tomorrow.  Thanks.
</div>
I got a different result; see attached.  &#39;make test&#39; did not collapse ... but on the other hand, from the point of automated testing a &#39;NOTESTS&#39; result is not all that useful.  For reference, this FreeBSD-11.0 is a VM running inside VMWare sitting on a Linux laptop.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tk-XXX-branch-make-test-output.txt.gz</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778655/957040/tk-XXX-branch-make-test-output.txt.gz">Download tk-XXX-branch-make-test-output.txt.gz</a><br />
<span class="downloadcontenttype">application/gzip 20.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778659" href="/Public/Bug/Display.html?id=124910#txn-1778659">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;25&nbsp;19:50:22&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778659/957042/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957042">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 25 19:37:51 2018, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Mar 25 19:24:16 2018, jkeenan@pobox.com wrote:
<div class="message-stanza open">&gt; &gt; On 03/25/2018 05:17 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On 2018-03-25 16:54:00, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt;&gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt;&gt;&gt; Additional data.
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I
&gt; &gt; &gt;&gt;&gt; then
&gt; &gt; &gt;&gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt; &gt;&gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily,
&gt; &gt; &gt;&gt;&gt; &#39;make
&gt; &gt; &gt;&gt;&gt; test&#39; died quickly in the same way.
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; &gt; &gt;&gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with
&gt; &gt; &gt;&gt;&gt; &#39;cd
&gt; &gt; &gt;&gt;&gt; PNG&#39; in it.
&gt; &gt; &gt;&gt;&gt;
</div>&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; Another question: is the existence of zlib correctly detected?
&gt; &gt; &gt;&gt; Does
&gt; &gt; &gt;&gt; the following print something?
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; pkg-config --exists zlib || echo zlib not installed
</div></div>&gt; &gt;
&gt; &gt; Rearranging your comments a bit ...
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; I suspect you don&#39;t have the pkgconf package installed,
</div>&gt; &gt;
&gt; &gt; To the contrary, I installed pkgconf two days ago as part of my
&gt; &gt; effort
&gt; &gt; to get a different CPAN-3000 library to test properly on FreeBSD.
&gt; &gt;
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; ...so detection of the available system libraries failed and the
&gt; &gt; &gt; compilation of the bundled png+zlib libraries happened. If this is
&gt; &gt; &gt; the case then installing pkgconf could make the Tk-804.034
&gt; &gt; &gt; compilation successful, without patching.
&gt; &gt; &gt;
&gt; &gt; &gt; I pushed an experimental branch to Tk&#39;s git repo. Can you git-clone
&gt; &gt; &gt; the repository from github, switch to the branch XXX-rt-perl-124910
&gt; &gt; &gt; and retry the build?
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; Will try this later tonight or tomorrow.  Thanks.
</div>&gt; 
&gt; I got a different result; see attached.  &#39;make test&#39; did not collapse
&gt; ... but on the other hand, from the point of automated testing a
&gt; &#39;NOTESTS&#39; result is not all that useful.  For reference, this FreeBSD-
&gt; 11.0 is a VM running inside VMWare sitting on a Linux laptop.
&gt; 
</div>
Just now I tried building Tk via &#39;cpan&#39; on my Linode and observed that while it installed successfully, all tests were effectively bypassed with language similar to what I reported in the FreeBSD-11.0 VM.  Excerpt:

#####
./xt/skip_all_mw.t .. skipped: Cannot create MainWindow &#40;maybe no X11 server is running or DISPLAY is not set?&#41;
Files=1, Tests=0,  0 wallclock secs &#40; 0.02 usr +  0.01 sys =  0.03 CPU&#41;
Result: NOTESTS
  SREZIC/Tk-804.034.tar.gz
  /usr/bin/make test -- OK
Running make install
#####

So, apart from the fact that the latest tarball does not build on FreeBSD-11.0 but the XXX branch from github does, I guess I have to ask the following:

Given that the purpose of this project is to have a version of Tk on CPAN that builds, tests and installs cleanly on FreeBSD at the time of release of perl-5.29.0, what I need to do to that FreeBSD environment so that Tk&#39;s test suite is exercised enough to detect and P5P-induced breakage during the next development cycle?

Thank you very much.
Jim Keenan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1778704" href="/Public/Bug/Display.html?id=124910#txn-1778704">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;26&nbsp;02:35:36&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1778704/957069/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957069">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-03-25 19:50:22, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sun Mar 25 19:37:51 2018, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Sun Mar 25 19:24:16 2018, jkeenan@pobox.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; On 03/25/2018 05:17 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On 2018-03-25 16:54:00, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt;&gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt;&gt;&gt; Additional data.
&gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt;&gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I
&gt; &gt; &gt; &gt;&gt;&gt; then
&gt; &gt; &gt; &gt;&gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt; &gt; &gt;&gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily,
&gt; &gt; &gt; &gt;&gt;&gt; &#39;make
&gt; &gt; &gt; &gt;&gt;&gt; test&#39; died quickly in the same way.
&gt; &gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt; &gt;&gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is
&gt; &gt; &gt; &gt;&gt;&gt; the
&gt; &gt; &gt; &gt;&gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one
&gt; &gt; &gt; &gt;&gt;&gt; with
&gt; &gt; &gt; &gt;&gt;&gt; &#39;cd
&gt; &gt; &gt; &gt;&gt;&gt; PNG&#39; in it.
&gt; &gt; &gt; &gt;&gt;&gt;
</div>&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt; Another question: is the existence of zlib correctly detected?
&gt; &gt; &gt; &gt;&gt; Does
&gt; &gt; &gt; &gt;&gt; the following print something?
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt; pkg-config --exists zlib || echo zlib not installed
</div></div>&gt; &gt; &gt;
&gt; &gt; &gt; Rearranging your comments a bit ...
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; I suspect you don&#39;t have the pkgconf package installed,
</div>&gt; &gt; &gt;
&gt; &gt; &gt; To the contrary, I installed pkgconf two days ago as part of my
&gt; &gt; &gt; effort
&gt; &gt; &gt; to get a different CPAN-3000 library to test properly on FreeBSD.
&gt; &gt; &gt;
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; ...so detection of the available system libraries failed and the
&gt; &gt; &gt; &gt; compilation of the bundled png+zlib libraries happened. If this
&gt; &gt; &gt; &gt; is
&gt; &gt; &gt; &gt; the case then installing pkgconf could make the Tk-804.034
&gt; &gt; &gt; &gt; compilation successful, without patching.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I pushed an experimental branch to Tk&#39;s git repo. Can you git-
&gt; &gt; &gt; &gt; clone
&gt; &gt; &gt; &gt; the repository from github, switch to the branch XXX-rt-perl-
&gt; &gt; &gt; &gt; 124910
&gt; &gt; &gt; &gt; and retry the build?
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Will try this later tonight or tomorrow.  Thanks.
</div>&gt; &gt;
&gt; &gt; I got a different result; see attached.  &#39;make test&#39; did not collapse
&gt; &gt; ... but on the other hand, from the point of automated testing a
&gt; &gt; &#39;NOTESTS&#39; result is not all that useful.  For reference, this
&gt; &gt; FreeBSD-
&gt; &gt; 11.0 is a VM running inside VMWare sitting on a Linux laptop.
&gt; &gt;
</div>&gt; 
&gt; Just now I tried building Tk via &#39;cpan&#39; on my Linode and observed that
&gt; while it installed successfully, all tests were effectively bypassed
&gt; with language similar to what I reported in the FreeBSD-11.0 VM.
&gt; Excerpt:
&gt; 
&gt; #####
&gt; ./xt/skip_all_mw.t .. skipped: Cannot create MainWindow &#40;maybe no X11
&gt; server is running or DISPLAY is not set?&#41;
&gt; Files=1, Tests=0,  0 wallclock secs &#40; 0.02 usr +  0.01 sys =  0.03
&gt; CPU&#41;
&gt; Result: NOTESTS
&gt;   SREZIC/Tk-804.034.tar.gz
&gt;   /usr/bin/make test -- OK
&gt; Running make install
&gt; #####
&gt; 
&gt; So, apart from the fact that the latest tarball does not build on
&gt; FreeBSD-11.0 but the XXX branch from github does, I guess I have to
&gt; ask the following:
&gt; 
&gt; Given that the purpose of this project is to have a version of Tk on
&gt; CPAN that builds, tests and installs cleanly on FreeBSD at the time of
&gt; release of perl-5.29.0, what I need to do to that FreeBSD environment
&gt; so that Tk&#39;s test suite is exercised enough to detect and P5P-induced
&gt; breakage during the next development cycle?
</div>
This is adressed in <span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.cpantesters.org/wiki/TipsAndTricks">http://wiki.cpantesters.org/wiki/TipsAndTricks</a></span> &#34;Running tests that require an X server&#34;. Unfortunately the link to Florian&#39;s blog post seems to be dead. What needs to be done is to setup a headless X server --- either Xvfb or a vnc server &#40;my choice&#41; would do. On linux systems the convenience script xvfb-run is often available. I don&#39;t see a freebsd port containing xvfb-run, but given it&#39;s just a sh script it could possible also run on freebsd.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1779216" href="/Public/Bug/Display.html?id=124910#txn-1779216">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;28&nbsp;04:46:21&nbsp;2018</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1779216/957321/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957321">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-03-25 19:21:08, jkeenan@pobox.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 03/25/2018 04:54 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt;
&gt; &gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt;&gt; Additional data.
&gt; &gt;&gt;
&gt; &gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then
&gt; &gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make
&gt; &gt;&gt; test&#39; died quickly in the same way.
&gt; &gt;&gt;
&gt; &gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; &gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with &#39;cd
&gt; &gt;&gt; PNG&#39; in it.
&gt; &gt;&gt;
</div>&gt; &gt;
&gt; &gt; Another question: is the existence of zlib correctly detected? Does
&gt; &gt; the following print something?
&gt; &gt;
&gt; &gt; pkg-config --exists zlib || echo zlib not installed
&gt; &gt;
</div>&gt; 
&gt; It prints nothing at all -- but I&#39;m not sure that&#39;s the correct
&gt; command.
&gt; 
&gt; When I type:
&gt; $&gt; man pkg-config
&gt;  ... what comes up is a man page whose first line is &#34;pkg config -
&gt;  retrieve the value of a given configuration option&#34;.  But I don&#39;t
&gt; think
&gt; we&#39;re looking for a configuration option here.
&gt; 
&gt; On the other hand, when I type:
&gt; $&gt; man zlib
&gt;  ... I get ZLIB&#40;3&#41;, whose first line reads: &#34;zlib -
&gt; compression/decompression library&#34;
&gt; 
&gt; So I believe I have zlib.  &#40;Replies to your other posts coming soon.&#41;
&gt; 
</div>
Hmmm. Looking at Tk-804.034.cpanm.build.log.gz it indeed looks like the prerequisite libpng is found &#40;and if libpng is available, then zlib also should be available&#41;. But compilation of the test .c program failed.

May you try the following: in a Tk checkout in PNG/Makefile.PL add the line

    $Tk::MMtry::VERBOSE = 1;

after the &#34;use&#34; block. And then cd to the PNG subdirectory and run

    /path/to/perl -I.. Makefile.PL

and send me the output &#40;actually what&#39;s interesting is the part between

    Test Compile/Run config/has_png.c

and

    Building libpng.a
&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1779241" href="/Public/Bug/Display.html?id=124910#txn-1779241">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;28&nbsp;08:34:07&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1779241/957332/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957332">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 28 04:46:21 2018, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2018-03-25 19:21:08, jkeenan@pobox.com wrote:
<div class="message-stanza open">&gt; &gt; On 03/25/2018 04:54 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt;&gt; Additional data.
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I then
&gt; &gt; &gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt; &gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily, &#39;make
&gt; &gt; &gt;&gt; test&#39; died quickly in the same way.
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; &gt; &gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with
&gt; &gt; &gt;&gt; &#39;cd
&gt; &gt; &gt;&gt; PNG&#39; in it.
&gt; &gt; &gt;&gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Another question: is the existence of zlib correctly detected? Does
&gt; &gt; &gt; the following print something?
&gt; &gt; &gt;
&gt; &gt; &gt; pkg-config --exists zlib || echo zlib not installed
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; It prints nothing at all -- but I&#39;m not sure that&#39;s the correct
&gt; &gt; command.
&gt; &gt;
&gt; &gt; When I type:
&gt; &gt; $&gt; man pkg-config
&gt; &gt;  ... what comes up is a man page whose first line is &#34;pkg config -
&gt; &gt;  retrieve the value of a given configuration option&#34;.  But I don&#39;t
&gt; &gt; think
&gt; &gt; we&#39;re looking for a configuration option here.
&gt; &gt;
&gt; &gt; On the other hand, when I type:
&gt; &gt; $&gt; man zlib
&gt; &gt;  ... I get ZLIB&#40;3&#41;, whose first line reads: &#34;zlib -
&gt; &gt; compression/decompression library&#34;
&gt; &gt;
&gt; &gt; So I believe I have zlib.  &#40;Replies to your other posts coming soon.&#41;
&gt; &gt;
</div>&gt; 
&gt; Hmmm. Looking at Tk-804.034.cpanm.build.log.gz it indeed looks like
&gt; the prerequisite libpng is found &#40;and if libpng is available, then
&gt; zlib also should be available&#41;. But compilation of the test .c program
&gt; failed.
&gt; 
&gt; May you try the following: in a Tk checkout in PNG/Makefile.PL add the
&gt; line
&gt; 
&gt; $Tk::MMtry::VERBOSE = 1;
&gt; 
&gt; after the &#34;use&#34; block. And then cd to the PNG subdirectory and run
&gt; 
&gt; /path/to/perl -I.. Makefile.PL
&gt; 
&gt; and send me the output &#40;actually what&#39;s interesting is the part
&gt; between
&gt; 
&gt; Test Compile/Run config/has_png.c
&gt; 
&gt; and
&gt; 
&gt; Building libpng.a
&gt; &#41;
</div>
That was a fruitful diagnostic.

I followed the instructions above, but when I attempted to run Makefile.PL *from the PNG subdirectory* I got a &#34;missing from @INC&#34; error.  So I simply moved up to the top-level of the git checkout and ran Makefile.PL as I normally would.  The full output is attached, gzipped.  Here&#39;s the relevant excerpt:

#####
Test Compile/Run config/has_png.c
/usr/local/lib/libpng16.so: undefined reference to `inflateValidate@ZLIB_1.2.9&#39;
cc: error: linker command failed with exit code 1 &#40;use -v to see invocation&#41;
Building libpng.a
#####

&#40;Based on DDG searches, I&#39;m also attaching the output of &#39;ldd -av /usr/local/lib/libpng16.so&#39;.&#41;

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ldd-libpng16-freebsd-11.0.output.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1779241/957333/ldd-libpng16-freebsd-11.0.output.txt">Download ldd-libpng16-freebsd-11.0.output.txt</a><br />
<span class="downloadcontenttype">text/plain 313b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">$&gt; ldd -av /usr/local/lib/libpng16.so
/usr/local/lib/libpng16.so:
	libz.so.6 =&gt; /lib/libz.so.6 &#40;0x80123b000&#41;
	libm.so.5 =&gt; /lib/libm.so.5 &#40;0x801452000&#41;
	libc.so.7 =&gt; /lib/libc.so.7 &#40;0x800823000&#41;
/lib/libz.so.6:
	libc.so.7 =&gt; /lib/libc.so.7 &#40;0x800823000&#41;
/lib/libm.so.5:
	libc.so.7 =&gt; /lib/libc.so.7 &#40;0x800823000&#41;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1779243" href="/Public/Bug/Display.html?id=124910#txn-1779243">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;28&nbsp;09:11:24&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1779243/957335/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957335">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 28 08:34:07 2018, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 28 04:46:21 2018, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On 2018-03-25 19:21:08, jkeenan@pobox.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; On 03/25/2018 04:54 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt;&gt; Additional data.
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I
&gt; &gt; &gt; &gt;&gt; then
&gt; &gt; &gt; &gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt; &gt; &gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily,
&gt; &gt; &gt; &gt;&gt; &#39;make
&gt; &gt; &gt; &gt;&gt; test&#39; died quickly in the same way.
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; &gt; &gt; &gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with
&gt; &gt; &gt; &gt;&gt; &#39;cd
&gt; &gt; &gt; &gt;&gt; PNG&#39; in it.
&gt; &gt; &gt; &gt;&gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Another question: is the existence of zlib correctly detected?
&gt; &gt; &gt; &gt; Does
&gt; &gt; &gt; &gt; the following print something?
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; pkg-config --exists zlib || echo zlib not installed
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; It prints nothing at all -- but I&#39;m not sure that&#39;s the correct
&gt; &gt; &gt; command.
&gt; &gt; &gt;
&gt; &gt; &gt; When I type:
&gt; &gt; &gt; $&gt; man pkg-config
&gt; &gt; &gt;  ... what comes up is a man page whose first line is &#34;pkg config -
&gt; &gt; &gt;  retrieve the value of a given configuration option&#34;.  But I don&#39;t
&gt; &gt; &gt; think
&gt; &gt; &gt; we&#39;re looking for a configuration option here.
&gt; &gt; &gt;
&gt; &gt; &gt; On the other hand, when I type:
&gt; &gt; &gt; $&gt; man zlib
&gt; &gt; &gt;  ... I get ZLIB&#40;3&#41;, whose first line reads: &#34;zlib -
&gt; &gt; &gt; compression/decompression library&#34;
&gt; &gt; &gt;
&gt; &gt; &gt; So I believe I have zlib.  &#40;Replies to your other posts coming
&gt; &gt; &gt; soon.&#41;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; Hmmm. Looking at Tk-804.034.cpanm.build.log.gz it indeed looks like
&gt; &gt; the prerequisite libpng is found &#40;and if libpng is available, then
&gt; &gt; zlib also should be available&#41;. But compilation of the test .c
&gt; &gt; program
&gt; &gt; failed.
&gt; &gt;
&gt; &gt; May you try the following: in a Tk checkout in PNG/Makefile.PL add
&gt; &gt; the
&gt; &gt; line
&gt; &gt;
&gt; &gt; $Tk::MMtry::VERBOSE = 1;
&gt; &gt;
&gt; &gt; after the &#34;use&#34; block. And then cd to the PNG subdirectory and run
&gt; &gt;
&gt; &gt; /path/to/perl -I.. Makefile.PL
&gt; &gt;
&gt; &gt; and send me the output &#40;actually what&#39;s interesting is the part
&gt; &gt; between
&gt; &gt;
&gt; &gt; Test Compile/Run config/has_png.c
&gt; &gt;
&gt; &gt; and
&gt; &gt;
&gt; &gt; Building libpng.a
&gt; &gt; &#41;
</div>&gt; 
&gt; That was a fruitful diagnostic.
&gt; 
&gt; I followed the instructions above, but when I attempted to run
&gt; Makefile.PL *from the PNG subdirectory* I got a &#34;missing from @INC&#34;
&gt; error.  So I simply moved up to the top-level of the git checkout and
&gt; ran Makefile.PL as I normally would.  The full output is attached,
&gt; gzipped.  Here&#39;s the relevant excerpt:
&gt; 
&gt; #####
&gt; Test Compile/Run config/has_png.c
&gt; /usr/local/lib/libpng16.so: undefined reference to
&gt; `inflateValidate@ZLIB_1.2.9&#39;
&gt; cc: error: linker command failed with exit code 1 &#40;use -v to see
&gt; invocation&#41;
&gt; Building libpng.a
&gt; #####
&gt; 
&gt; &#40;Based on DDG searches, I&#39;m also attaching the output of &#39;ldd -av
&gt; /usr/local/lib/libpng16.so&#39;.&#41;
&gt; 
</div>
And also:

#####
$&gt; nm --dynamic /usr/local/lib/libpng16.so | grep -i inflateValidate
                 U inflateValidate
#####
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1779285" href="/Public/Bug/Display.html?id=124910#txn-1779285">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;28&nbsp;11:31:25&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1779285/957356/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957356">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 28 09:11:24 2018, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 28 08:34:07 2018, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Wed Mar 28 04:46:21 2018, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; On 2018-03-25 19:21:08, jkeenan@pobox.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On 03/25/2018 04:54 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;&gt; Additional data.
&gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.  I
&gt; &gt; &gt; &gt; &gt;&gt; then
&gt; &gt; &gt; &gt; &gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the same
&gt; &gt; &gt; &gt; &gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily,
&gt; &gt; &gt; &gt; &gt;&gt; &#39;make
&gt; &gt; &gt; &gt; &gt;&gt; test&#39; died quickly in the same way.
&gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is the
&gt; &gt; &gt; &gt; &gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one with
&gt; &gt; &gt; &gt; &gt;&gt; &#39;cd
&gt; &gt; &gt; &gt; &gt;&gt; PNG&#39; in it.
&gt; &gt; &gt; &gt; &gt;&gt;
</div>&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Another question: is the existence of zlib correctly detected?
&gt; &gt; &gt; &gt; &gt; Does
&gt; &gt; &gt; &gt; &gt; the following print something?
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; pkg-config --exists zlib || echo zlib not installed
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; It prints nothing at all -- but I&#39;m not sure that&#39;s the correct
&gt; &gt; &gt; &gt; command.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; When I type:
&gt; &gt; &gt; &gt; $&gt; man pkg-config
&gt; &gt; &gt; &gt;  ... what comes up is a man page whose first line is &#34;pkg config -
&gt; &gt; &gt; &gt;  retrieve the value of a given configuration option&#34;.  But I don&#39;t
&gt; &gt; &gt; &gt; think
&gt; &gt; &gt; &gt; we&#39;re looking for a configuration option here.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On the other hand, when I type:
&gt; &gt; &gt; &gt; $&gt; man zlib
&gt; &gt; &gt; &gt;  ... I get ZLIB&#40;3&#41;, whose first line reads: &#34;zlib -
&gt; &gt; &gt; &gt; compression/decompression library&#34;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; So I believe I have zlib.  &#40;Replies to your other posts coming
&gt; &gt; &gt; &gt; soon.&#41;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Hmmm. Looking at Tk-804.034.cpanm.build.log.gz it indeed looks like
&gt; &gt; &gt; the prerequisite libpng is found &#40;and if libpng is available, then
&gt; &gt; &gt; zlib also should be available&#41;. But compilation of the test .c
&gt; &gt; &gt; program
&gt; &gt; &gt; failed.
&gt; &gt; &gt;
&gt; &gt; &gt; May you try the following: in a Tk checkout in PNG/Makefile.PL add
&gt; &gt; &gt; the
&gt; &gt; &gt; line
&gt; &gt; &gt;
&gt; &gt; &gt; $Tk::MMtry::VERBOSE = 1;
&gt; &gt; &gt;
&gt; &gt; &gt; after the &#34;use&#34; block. And then cd to the PNG subdirectory and run
&gt; &gt; &gt;
&gt; &gt; &gt; /path/to/perl -I.. Makefile.PL
&gt; &gt; &gt;
&gt; &gt; &gt; and send me the output &#40;actually what&#39;s interesting is the part
&gt; &gt; &gt; between
&gt; &gt; &gt;
&gt; &gt; &gt; Test Compile/Run config/has_png.c
&gt; &gt; &gt;
&gt; &gt; &gt; and
&gt; &gt; &gt;
&gt; &gt; &gt; Building libpng.a
&gt; &gt; &gt; &#41;
</div>&gt; &gt; 
&gt; &gt; That was a fruitful diagnostic.
&gt; &gt; 
&gt; &gt; I followed the instructions above, but when I attempted to run
&gt; &gt; Makefile.PL *from the PNG subdirectory* I got a &#34;missing from @INC&#34;
&gt; &gt; error.  So I simply moved up to the top-level of the git checkout and
&gt; &gt; ran Makefile.PL as I normally would.  The full output is attached,
&gt; &gt; gzipped.  Here&#39;s the relevant excerpt:
&gt; &gt; 
&gt; &gt; #####
&gt; &gt; Test Compile/Run config/has_png.c
&gt; &gt; /usr/local/lib/libpng16.so: undefined reference to
&gt; &gt; `inflateValidate@ZLIB_1.2.9&#39;
&gt; &gt; cc: error: linker command failed with exit code 1 &#40;use -v to see
&gt; &gt; invocation&#41;
&gt; &gt; Building libpng.a
&gt; &gt; #####
&gt; &gt; 
&gt; &gt; &#40;Based on DDG searches, I&#39;m also attaching the output of &#39;ldd -av
&gt; &gt; /usr/local/lib/libpng16.so&#39;.&#41;
&gt; &gt; 
</div>&gt; 
&gt; And also:
&gt; 
&gt; #####
&gt; $&gt; nm --dynamic /usr/local/lib/libpng16.so | grep -i inflateValidate
&gt;                  U inflateValidate
&gt; #####
&gt; 
</div>
And as if things aren&#39;t already complicated enough ...

I am able to build, test and install Tk successfully on FreeBSD-10.3 against perl-5.27.10.

#####
$ ./bin/perl -Ilib -v | head -2 | tail -1
This is perl 5, version 27, subversion 10 &#40;v5.27.10&#41; built for amd64-freebsd-thread-multi
[v5.27.10] $ ./bin/perl -Ilib -MTk -E &#39;say $Tk::VERSION;say q|hello world|;&#39;
804.034
hello world
#####

The information I have on libpng is slightly different on 10.3 from 11.0.

#####
$ ll /usr/local/lib/libpng*
lrwxr-xr-x  1 root  wheel  -     10 Jul 27  2016 /usr/local/lib/libpng.a@ -&gt; libpng16.a
lrwxr-xr-x  1 root  wheel  -     11 Jul 27  2016 /usr/local/lib/libpng.so@ -&gt; libpng16.so
-rw-r--r--  1 root  wheel  - 347226 Jul 27  2016 /usr/local/lib/libpng16.a
lrwxr-xr-x  1 root  wheel  -     19 Jul 27  2016 /usr/local/lib/libpng16.so@ -&gt; libpng16.so.16.21.0
lrwxr-xr-x  1 root  wheel  -     19 Jul 27  2016 /usr/local/lib/libpng16.so.16@ -&gt; libpng16.so.16.21.0
-rwxr-xr-x  1 root  wheel  - 218120 Jul 27  2016 /usr/local/lib/libpng16.so.16.21.0
#####

On FreeBSD-11.0, where you have &#39;16.21.0&#39; in 10.3, you have &#39;16.34.0&#39;.  I don&#39;t know enough about .so files to know whether this is significant or not.

Here&#39;s another difference found on 10.3:

#####
$&gt; nm --dynamic /usr/local/lib/libpng16.so | grep -i inflateValidate
$ [no output]
#####
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1779309" href="/Public/Bug/Display.html?id=124910#txn-1779309">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;28&nbsp;14:31:26&nbsp;2018</span>
    <span class="description">jkeenan [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1779309/957362/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/957362">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 28 11:31:25 2018, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 28 09:11:24 2018, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; On Wed Mar 28 08:34:07 2018, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; On Wed Mar 28 04:46:21 2018, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; On 2018-03-25 19:21:08, jkeenan@pobox.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; On 03/25/2018 04:54 PM, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124910">https://rt.cpan.org/Ticket/Display.html?id=124910</a></span> &gt;
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; On 2018-03-25 16:05:33, JKEENAN wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &gt;&gt; Additional data.
&gt; &gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt; &gt;&gt; In this FreeBSD-11.0 VM I installed GNU &#39;gmake&#39; via &#39;pkg&#39;.
&gt; &gt; &gt; &gt; &gt; &gt;&gt; I
&gt; &gt; &gt; &gt; &gt; &gt;&gt; then
&gt; &gt; &gt; &gt; &gt; &gt;&gt; said &#39;alias make=gmake&#39; and attempted to build Tk in the
&gt; &gt; &gt; &gt; &gt; &gt;&gt; same
&gt; &gt; &gt; &gt; &gt; &gt;&gt; directory as before.  While &#39;make&#39; completed satisfactorily,
&gt; &gt; &gt; &gt; &gt; &gt;&gt; &#39;make
&gt; &gt; &gt; &gt; &gt; &gt;&gt; test&#39; died quickly in the same way.
&gt; &gt; &gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt; &gt; &gt;&gt; See attachment.  The Makefile &#39;line 1462&#39; mentioned there is
&gt; &gt; &gt; &gt; &gt; &gt;&gt; the
&gt; &gt; &gt; &gt; &gt; &gt;&gt; second line in target &#39;subdirs-test_dynamic&#39;, i.e., the one
&gt; &gt; &gt; &gt; &gt; &gt;&gt; with
&gt; &gt; &gt; &gt; &gt; &gt;&gt; &#39;cd
&gt; &gt; &gt; &gt; &gt; &gt;&gt; PNG&#39; in it.
&gt; &gt; &gt; &gt; &gt; &gt;&gt;
</div>&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; Another question: is the existence of zlib correctly
&gt; &gt; &gt; &gt; &gt; &gt; detected?
&gt; &gt; &gt; &gt; &gt; &gt; Does
&gt; &gt; &gt; &gt; &gt; &gt; the following print something?
&gt; &gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; &gt; pkg-config --exists zlib || echo zlib not installed
&gt; &gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; It prints nothing at all -- but I&#39;m not sure that&#39;s the correct
&gt; &gt; &gt; &gt; &gt; command.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; When I type:
&gt; &gt; &gt; &gt; &gt; $&gt; man pkg-config
&gt; &gt; &gt; &gt; &gt;  ... what comes up is a man page whose first line is &#34;pkg
&gt; &gt; &gt; &gt; &gt; config -
&gt; &gt; &gt; &gt; &gt;  retrieve the value of a given configuration option&#34;.  But I
&gt; &gt; &gt; &gt; &gt; don&#39;t
&gt; &gt; &gt; &gt; &gt; think
&gt; &gt; &gt; &gt; &gt; we&#39;re looking for a configuration option here.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; On the other hand, when I type:
&gt; &gt; &gt; &gt; &gt; $&gt; man zlib
&gt; &gt; &gt; &gt; &gt;  ... I get ZLIB&#40;3&#41;, whose first line reads: &#34;zlib -
&gt; &gt; &gt; &gt; &gt; compression/decompression library&#34;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; So I believe I have zlib.  &#40;Replies to your other posts coming
&gt; &gt; &gt; &gt; &gt; soon.&#41;
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Hmmm. Looking at Tk-804.034.cpanm.build.log.gz it indeed looks
&gt; &gt; &gt; &gt; like
&gt; &gt; &gt; &gt; the prerequisite libpng is found &#40;and if libpng is available,
&gt; &gt; &gt; &gt; then
&gt; &gt; &gt; &gt; zlib also should be available&#41;. But compilation of the test .c
&gt; &gt; &gt; &gt; program
&gt; &gt; &gt; &gt; failed.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; May you try the following: in a Tk checkout in PNG/Makefile.PL
&gt; &gt; &gt; &gt; add
&gt; &gt; &gt; &gt; the
&gt; &gt; &gt; &gt; line
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; $Tk::MMtry::VERBOSE = 1;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; after the &#34;use&#34; block. And then cd to the PNG subdirectory and
&gt; &gt; &gt; &gt; run
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; /path/to/perl -I.. Makefile.PL
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; and send me the output &#40;actually what&#39;s interesting is the part
&gt; &gt; &gt; &gt; between
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Test Compile/Run config/has_png.c
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; and
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Building libpng.a
&gt; &gt; &gt; &gt; &#41;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; That was a fruitful diagnostic.
&gt; &gt; &gt;
&gt; &gt; &gt; I followed the instructions above, but when I attempted to run
&gt; &gt; &gt; Makefile.PL *from the PNG subdirectory* I got a &#34;missing from @INC&#34;
&gt; &gt; &gt; error.  So I simply moved up to the top-level of the git checkout
&gt; &gt; &gt; and
&gt; &gt; &gt; ran Makefile.PL as I normally would.  The full output is attached,
&gt; &gt; &gt; gzipped.  Here&#39;s the relevant excerpt:
&gt; &gt; &gt;
&gt; &gt; &gt; #####
&gt; &gt; &gt; Test Compile/Run config/has_png.c
&gt; &gt; &gt; /usr/local/lib/libpng16.so: undefined reference to
&gt; &gt; &gt; `inflateValidate@ZLIB_1.2.9&#39;
&gt; &gt; &gt; cc: error: linker command failed with exit code 1 &#40;use -v to see
&gt; &gt; &gt; invocation&#41;
&gt; &gt; &gt; Building libpng.a
&gt; &gt; &gt; #####
&gt; &gt; &gt;
&gt; &gt; &gt; &#40;Based on DDG searches, I&#39;m also attaching the output of &#39;ldd -av
&gt; &gt; &gt; /usr/local/lib/libpng16.so&#39;.&#41;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; And also:
&gt; &gt;
&gt; &gt; #####
&gt; &gt; $&gt; nm --dynamic /usr/local/lib/libpng16.so | grep -i inflateValidate
&gt; &gt;                  U inflateValidate
&gt; &gt; #####
&gt; &gt;
</div>&gt; 
&gt; And as if things aren&#39;t already complicated enough ...
&gt; 
&gt; I am able to build, test and install Tk successfully on FreeBSD-10.3
&gt; against perl-5.27.10.
&gt; 
&gt; #####
&gt; $ ./bin/perl -Ilib -v | head -2 | tail -1
&gt; This is perl 5, version 27, subversion 10 &#40;v5.27.10&#41; built for amd64-
&gt; freebsd-thread-multi
&gt; [v5.27.10] $ ./bin/perl -Ilib -MTk -E &#39;say $Tk::VERSION;say q|hello
&gt; world|;&#39;
&gt; 804.034
&gt; hello world
&gt; #####
&gt; 
&gt; The information I have on libpng is slightly different on 10.3 from
&gt; 11.0.
&gt; 
&gt; #####
&gt; $ ll /usr/local/lib/libpng*
&gt; lrwxr-xr-x  1 root  wheel  -     10 Jul 27  2016
&gt; /usr/local/lib/libpng.a@ -&gt; libpng16.a
&gt; lrwxr-xr-x  1 root  wheel  -     11 Jul 27  2016
&gt; /usr/local/lib/libpng.so@ -&gt; libpng16.so
&gt; -rw-r--r--  1 root  wheel  - 347226 Jul 27  2016
&gt; /usr/local/lib/libpng16.a
&gt; lrwxr-xr-x  1 root  wheel  -     19 Jul 27  2016
&gt; /usr/local/lib/libpng16.so@ -&gt; libpng16.so.16.21.0
&gt; lrwxr-xr-x  1 root  wheel  -     19 Jul 27  2016
&gt; /usr/local/lib/libpng16.so.16@ -&gt; libpng16.so.16.21.0
&gt; -rwxr-xr-x  1 root  wheel  - 218120 Jul 27  2016
&gt; /usr/local/lib/libpng16.so.16.21.0
&gt; #####
&gt; 
&gt; On FreeBSD-11.0, where you have &#39;16.21.0&#39; in 10.3, you have &#39;16.34.0&#39;.
&gt; I don&#39;t know enough about .so files to know whether this is
&gt; significant or not.
&gt; 
&gt; Here&#39;s another difference found on 10.3:
&gt; 
&gt; #####
&gt; $&gt; nm --dynamic /usr/local/lib/libpng16.so | grep -i inflateValidate
&gt; $ [no output]
&gt; #####
</div>
And, for good measure, attaching a diff of the headers in /usr/local/include/libpng16 between FreeBSD-10.3 and -11.0.

Thank you very much.
Jim Keenan
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> freebsd-libpng16-10.3-versus-11.0.diff</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1779309/957363/freebsd-libpng16-10.3-versus-11.0.diff">Download freebsd-libpng16-10.3-versus-11.0.diff</a><br />
<span class="downloadcontenttype">text/x-diff 31.7k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1891714" href="/Public/Bug/Display.html?id=124910#txn-1891714">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;28&nbsp;15:49:30&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1891714/1014543/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1014543">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2018-03-25 11:00:26, JKEENAN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As part of my &#39;CPAN river&#39; testing, I tested Tk-804.034 first against
&gt; perl-5.27.10 and then against blead.  Notwithstanding some build-time
&gt; warnings, &#39;make&#39; completed successfully -- but then &#39;make all-am&#39;
&gt; failed.  &#40;As a consequence, Tk-Pod failed as well.&#41;  Full .cpanm
&gt; build.log attached &#40;gzipped&#41;; here&#39;s the relevant excerpt.
&gt; 
&gt; #####
&gt; make  all-am
&gt; make[2]: don&#39;t know how to make test_dynamic. Stop
&gt; 
&gt; make[2]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034/PNG/libpng
&gt; *** Error code 2
&gt; 
&gt; Stop.
&gt; make[1]: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034/PNG
&gt; *** Error code 1
&gt; 
&gt; Stop.
&gt; make: stopped in /usr/home/jkeenan/.cpanm/work/1521988924.39230/Tk-
&gt; 804.034
&gt; -&gt; FAIL Installing Tk failed. See
&gt; /home/jkeenan/.cpanm/work/1521988924.39230/build.log for details.
&gt; Retry with --force to force install it.
&gt; #####
&gt; 
&gt; As Tk has many other CPAN distributions depending on it, it would be
&gt; good to get this cleared up before the release of perl-5.28.0.
</div>
This kind of failure should not happen anymore. This was fixed between Tk 804.034_500 and 804.034_501, see
* <span class="clickylink"><a target="new" rel="nofollow" href="http://fast-matrix.cpantesters.org/?dist=Tk%20804.034_500">http://fast-matrix.cpantesters.org/?dist=Tk%20804.034_500</a></span>
* <span class="clickylink"><a target="new" rel="nofollow" href="http://fast-matrix.cpantesters.org/?dist=Tk%20804.034_501">http://fast-matrix.cpantesters.org/?dist=Tk%20804.034_501</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1891717" href="/Public/Bug/Display.html?id=124910#txn-1891717">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;28&nbsp;15:49:31&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1891719" href="/Public/Bug/Display.html?id=124910#txn-1891719">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;28&nbsp;15:49:31&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Fixed in 804.034_501 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.75859</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
