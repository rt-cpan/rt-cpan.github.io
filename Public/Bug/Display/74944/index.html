<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #74944 for Net-SNMP: Problem with 6 byte Counter32</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #74944 for Net-SNMP: Problem with 6 byte Counter32</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-SNMP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-SNMP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SNMP">Net-SNMP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">74944</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">12 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-SNMP/Active/">Net-SNMP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">dtown [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
henrik.berg [...] barret.se

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23238-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23239-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;13&nbsp;11:10:22&nbsp;2012</span>
    <span class="description">henrik.berg [...] barret.se -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Problem with 6 byte Counter32</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 13 Feb 2012 16:10:05 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-SNMP [...] rt.cpan.org&#34; &lt;bug-Net-SNMP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Henrik Berg &lt;henrik.berg [...] barret.se&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I hope I&#39;m not completely off here.
When polling a small number of machines I get &#34;The Counter length is too long &#40;6 bytes&#41;&#34;.
I have found that it is Counter32 values that look like this example:
oid: 1.3.6.1.2.1.2.2.1.10.2
bytes: 0 161 168 76 7 181
from what I can tell the first 0 means it&#39;s a positive number but the next byte I have no idea.
I have sniffed an snmpwalk and it gets the same bytes but produces a correct value.
It&#39;s always 161 and if I splice it away it produces the correct value.
Is it some kind of flag?
I quickly looked through a page on ASN.1 encoding but could not find anything similar.

I&#39;m not sure where the problem lies so if it&#39;s in the other end then I&#39;m sorry but since it works in snmpwalk and an older module I&#39;ve used I gave this a shot.
I&#39;m afraid I can&#39;t give out an IP to test against since it&#39;s customer equipment.

Version: Net-SNMP-v6.0.1
Perl version: v5.8.8
OS: Redhat EL5
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;04:05:14&nbsp;2012</span>
    <span class="description">henrik.berg [...] barret.se -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SV: [rt.cpan.org #74944] AutoReply: Problem with 6 byte Counter32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2012 09:04:56 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-SNMP [...] rt.cpan.org&#34; &lt;bug-Net-SNMP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Henrik Berg &lt;henrik.berg [...] barret.se&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I might have spoken too soon. The erroneous byte has now increased to 162.
Is this simply a Counter64 identifying itself as a Counter32?  &#40;type 0x41&#41;
So that the snmpwalk command in fact isn&#39;t showing the correct number, but instead a truncated one.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;06:07:45&nbsp;2012</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">1 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Feb 15 04:05:14 2012, henrik.berg@barret.se wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I might have spoken too soon. The erroneous byte has now increased to
&gt; 162.
&gt; Is this simply a Counter64 identifying itself as a Counter32?
&gt; &#40;type 0x41&#41;
&gt; So that the snmpwalk command in fact isn&#39;t showing the
&gt; correct number, but instead a truncated one.
</div>

Can you enable debugging by adding &#34;-debug =&gt; 0xff&#34; to the session
constructor and include the output in the ticket?  A properly encoded
Counter32 will never be longer than 5 bytes.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;06:07:46&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;06:07:46&nbsp;2012</span>
    <span class="description">dtown [...] cpan.org -  Given to DTOWN</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;07:53:13&nbsp;2012</span>
    <span class="description">henrik.berg [...] barret.se -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SV: [rt.cpan.org #74944] Problem with 6 byte Counter32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Feb 2012 12:52:59 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-SNMP [...] rt.cpan.org&#34; &lt;bug-Net-SNMP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Henrik Berg &lt;henrik.berg [...] barret.se&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sure thing.
Here is a bulkwalk of  1.3.6.1.2.1.2.2.1.10 where .1 works but .2 fails.
I&#39;ve just replaced the community and ip with X&#39;s.
A get of 1.3.6.1.2.1.2.2.1.10.2 specifically breaks in the same way.

A quick question as well, isn&#39;t Counter32 supposed to be unsigned? 
Why then handle it like an Integer32?

Thanks.

debug: [440] Net::SNMP::Dispatcher::_event_insert&#40;&#41;: created new head and tail [ARRAY&#40;0xae2aea0&#41;]
debug: [687] Net::SNMP::Message::send&#40;&#41;: transport address X.X.X.X:161
debug: [2060] Net::SNMP::Message::_buffer_dump&#40;&#41;: 45 bytes
[0000]  30 2B 02 01  01 04 07 XX  XX XX XX XX  XX XX A5 1D   0+.....XXXXXXX..
[0016]  02 04 24 AC  60 A3 02 01  00 02 01 19  30 0F 30 0D   ..$.`.......0.0.
[0032]  06 09 2B 06  01 02 01 02  02 01 0A 05  00            ..+..........
debug: [200] Net::SNMP::Dispatcher::register&#40;&#41;: added handler for descriptor [3]
debug: [462] Net::SNMP::Dispatcher::_event_insert&#40;&#41;: modified tail [ARRAY&#40;0xae2b370&#41;]
debug: [535] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted [ARRAY&#40;0xae2aea0&#41;], defined new head [ARRAY&#40;0xae2b370&#41;]
debug: [596] Net::SNMP::Dispatcher::_event_handle&#40;&#41;: event [ARRAY&#40;0xae2b370&#41;], timeout = 9.9998
debug: [621] Net::SNMP::Dispatcher::_event_handle&#40;&#41;: descriptor [3] ready for read
debug: [711] Net::SNMP::Message::recv&#40;&#41;: transport address X.X.X.194:161
debug: [2060] Net::SNMP::Message::_buffer_dump&#40;&#41;: 491 bytes
[0000]  30 82 01 E7  02 01 01 04  07 XX XX XX  XX XX XX XX   0........XXXXXXX
[0016]  A2 82 01 D7  02 04 24 AC  60 A3 02 01  00 02 01 00   ......$.`.......
[0032]  30 82 01 C7  30 13 06 0A  2B 06 01 02  01 02 02 01   0...0...+.......
[0048]  0A 01 41 05  00 CC 99 CA  6D 30 14 06  0A 2B 06 01   ..A.....m0...+..
[0064]  02 01 02 02  01 0A 02 41  06 00 A2 0C  46 34 9D 30   .......A....F4.0
[0080]  0F 06 0A 2B  06 01 02 01  02 02 01 0A  03 41 01 00   ...+.........A..
[0096]  30 12 06 0A  2B 06 01 02  01 02 02 01  0B 01 41 04   0...+.........A.
[0112]  01 31 42 C7  30 13 06 0A  2B 06 01 02  01 02 02 01   .1B.0...+.......
[0128]  0B 02 41 05  00 F4 04 25  8A 30 0F 06  0A 2B 06 01   ..A....%.0...+..
[0144]  02 01 02 02  01 0B 03 41  01 00 30 0F  06 0A 2B 06   .......A..0...+.
[0160]  01 02 01 02  02 01 0D 01  41 01 00 30  0F 06 0A 2B   ........A..0...+
[0176]  06 01 02 01  02 02 01 0D  02 41 01 00  30 0F 06 0A   .........A..0...
[0192]  2B 06 01 02  01 02 02 01  0D 03 41 01  00 30 0F 06   +.........A..0..
[0208]  0A 2B 06 01  02 01 02 02  01 0E 01 41  01 00 30 0F   .+.........A..0.
[0224]  06 0A 2B 06  01 02 01 02  02 01 0E 02  41 01 00 30   ..+.........A..0
[0240]  0F 06 0A 2B  06 01 02 01  02 02 01 0E  03 41 01 00   ...+.........A..
[0256]  30 13 06 0A  2B 06 01 02  01 02 02 01  10 01 41 05   0...+.........A.
[0272]  00 CC 99 CA  6D 30 13 06  0A 2B 06 01  02 01 02 02   ....m0...+......
[0288]  01 10 02 41  05 29 FF EF  EF 0C 30 0F  06 0A 2B 06   ...A.&#41;....0...+.
[0304]  01 02 01 02  02 01 10 03  41 01 00 30  12 06 0A 2B   ........A..0...+
[0320]  06 01 02 01  02 02 01 11  01 41 04 01  31 42 C7 30   .........A..1B.0
[0336]  12 06 0A 2B  06 01 02 01  02 02 01 11  02 41 04 74   ...+.........A.t
[0352]  76 9E 10 30  0F 06 0A 2B  06 01 02 01  02 02 01 11   v..0...+........
[0368]  03 41 01 00  30 0F 06 0A  2B 06 01 02  01 02 02 01   .A..0...+.......
[0384]  13 01 41 01  00 30 0F 06  0A 2B 06 01  02 01 02 02   ..A..0...+......
[0400]  01 13 02 41  01 00 30 0F  06 0A 2B 06  01 02 01 02   ...A..0...+.....
[0416]  02 01 13 03  41 01 00 30  0F 06 0A 2B  06 01 02 01   ....A..0...+....
[0432]  02 02 01 14  01 41 01 00  30 0F 06 0A  2B 06 01 02   .....A..0...+...
[0448]  01 02 02 01  14 02 41 01  00 30 0F 06  0A 2B 06 01   ......A..0...+..
[0464]  02 01 02 02  01 14 03 41  01 00 30 0F  06 0A 2B 06   .......A..0...+.
[0480]  01 02 01 02  02 01 15 01  42 01 00                   ........B..
debug: [965] Net::SNMP::PDU::_process_var_bind_list&#40;&#41;: { 1.3.6.1.2.1.2.2.1.10.1 =&gt; Counter: 3432630893 }
error: [1438] Net::SNMP::Message::_process_integer32&#40;&#41;: The Counter length is too long &#40;6 bytes&#41;
error: [299] Net::SNMP::MessageProcessing::prepare_data_elements&#40;&#41;: The Counter length is too long &#40;6 bytes&#41;
error: [398] Net::SNMP::Dispatcher::_transport_response_received&#40;&#41;: The Counter length is too long &#40;6 bytes&#41;
debug: [517] Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted [ARRAY&#40;0xae2b370&#41;], list is now empty
debug: [239] Net::SNMP::Dispatcher::deregister&#40;&#41;: removed handler for descriptor [3]
error: [2363] Net::SNMP::__ANON__&#40;&#41;: The Counter length is too long &#40;6 bytes&#41;

</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;15&nbsp;22:20:16&nbsp;2012</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The response you are receiving is incorrectly encoded.  The data at
position 71 is &#34;41  06 00 A2 0C  46 34 9D&#34;.  The second byte represents
the invalid length of 6.  You cannot create a valid 32 bits value from 6
bytes without overflow.

Signed and unsigned value are encoded the same way according to the
Basic Encoding Rules &#40;BER&#41; of ANS.1.  The first bit in the encoding is a
sign bit.  If it is one, then the value is negative.  To properly encode
a large 32 bit unsigned value &#40;which has the first bit set&#41; you have to
prepend a byte with a value of 0 to the encoding.  The length in this
case would be 5, with the first byte required to have a value of 0. The
_process_integer32&#40;&#41; method handles this case.

You said &#34;snmpwalk&#34; works.  Is it using SNMPv1 or SNMPv2?  Can you try
using SNMPv1 with Net::SNMP?  I have seen agents with broken v2
implementation while v1 works fine.  Either way this is a problem with
the agent, not Net::SNMP. 


On Wed Feb 15 07:53:13 2012, henrik.berg@barret.se wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sure thing.
&gt; Here is a bulkwalk of  1.3.6.1.2.1.2.2.1.10 where .1
&gt; works but .2 fails.
&gt; I&#39;ve just replaced the community and ip with X&#39;s.
&gt; A get of 1.3.6.1.2.1.2.2.1.10.2 specifically breaks in the same way.
&gt; A quick question as well, isn&#39;t Counter32 supposed to be unsigned?
&gt; Why then handle it like an Integer32?
&gt; 
&gt; Thanks.
&gt; 
&gt; debug: [440]
&gt; Net::SNMP::Dispatcher::_event_insert&#40;&#41;: created new head and tail
&gt; [ARRAY&#40;0xae2aea0&#41;]
&gt; debug: [687] Net::SNMP::Message::send&#40;&#41;: transport
&gt; address X.X.X.X:161
&gt; debug: [2060] Net::SNMP::Message::_buffer_dump&#40;&#41;:
&gt; 45 bytes
&gt; [0000]  30 2B 02 01  01 04 07 XX  XX XX XX XX  XX XX A5 1D
&gt; 0+.....XXXXXXX..
&gt; [0016]  02 04 24 AC  60 A3 02 01  00 02 01 19  30 0F
&gt; 30 0D   ..$.`.......0.0.
&gt; [0032]  06 09 2B 06  01 02 01 02  02 01 0A
&gt; 05  00            ..+..........
&gt; debug: [200]
&gt; Net::SNMP::Dispatcher::register&#40;&#41;: added handler for descriptor [3]
&gt; debug: [462] Net::SNMP::Dispatcher::_event_insert&#40;&#41;: modified tail
&gt; [ARRAY&#40;0xae2b370&#41;]
&gt; debug: [535]
&gt; Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted [ARRAY&#40;0xae2aea0&#41;],
&gt; defined new head [ARRAY&#40;0xae2b370&#41;]
&gt; debug: [596]
&gt; Net::SNMP::Dispatcher::_event_handle&#40;&#41;: event [ARRAY&#40;0xae2b370&#41;],
&gt; timeout = 9.9998
&gt; debug: [621] Net::SNMP::Dispatcher::_event_handle&#40;&#41;:
&gt; descriptor [3] ready for read
&gt; debug: [711]
&gt; Net::SNMP::Message::recv&#40;&#41;: transport address X.X.X.194:161
&gt; debug:
&gt; [2060] Net::SNMP::Message::_buffer_dump&#40;&#41;: 491 bytes
&gt; [0000]  30 82 01
&gt; E7  02 01 01 04  07 XX XX XX  XX XX XX XX   0........XXXXXXX
&gt; [0016]
&gt; A2 82 01 D7  02 04 24 AC  60 A3 02 01  00 02 01 00   ......$.`.......
&gt; [0032]  30 82 01 C7  30 13 06 0A  2B 06 01 02  01 02 02 01
&gt; 0...0...+.......
&gt; [0048]  0A 01 41 05  00 CC 99 CA  6D 30 14 06  0A 2B
&gt; 06 01   ..A.....m0...+..
&gt; [0064]  02 01 02 02  01 0A 02 41  06 00 A2
&gt; 0C  46 34 9D 30   .......A....F4.0
&gt; [0080]  0F 06 0A 2B  06 01 02 01
&gt; 02 02 01 0A  03 41 01 00   ...+.........A..
&gt; [0096]  30 12 06 0A  2B
&gt; 06 01 02  01 02 02 01  0B 01 41 04   0...+.........A.
&gt; [0112]  01 31
&gt; 42 C7  30 13 06 0A  2B 06 01 02  01 02 02 01   .1B.0...+.......
&gt; [0128]  0B 02 41 05  00 F4 04 25  8A 30 0F 06  0A 2B 06 01
&gt; ..A....%.0...+..
&gt; [0144]  02 01 02 02  01 0B 03 41  01 00 30 0F  06 0A
&gt; 2B 06   .......A..0...+.
&gt; [0160]  01 02 01 02  02 01 0D 01  41 01 00
&gt; 30  0F 06 0A 2B   ........A..0...+
&gt; [0176]  06 01 02 01  02 02 01 0D
&gt; 02 41 01 00  30 0F 06 0A   .........A..0...
&gt; [0192]  2B 06 01 02  01
&gt; 02 02 01  0D 03 41 01  00 30 0F 06   +.........A..0..
&gt; [0208]  0A 2B
&gt; 06 01  02 01 02 02  01 0E 01 41  01 00 30 0F   .+.........A..0.
&gt; [0224]  06 0A 2B 06  01 02 01 02  02 01 0E 02  41 01 00 30
&gt; ..+.........A..0
&gt; [0240]  0F 06 0A 2B  06 01 02 01  02 02 01 0E  03 41
&gt; 01 00   ...+.........A..
&gt; [0256]  30 13 06 0A  2B 06 01 02  01 02 02
&gt; 01  10 01 41 05   0...+.........A.
&gt; [0272]  00 CC 99 CA  6D 30 13 06
&gt; 0A 2B 06 01  02 01 02 02   ....m0...+......
&gt; [0288]  01 10 02 41  05
&gt; 29 FF EF  EF 0C 30 0F  06 0A 2B 06   ...A.&#41;....0...+.
&gt; [0304]  01 02
&gt; 01 02  02 01 10 03  41 01 00 30  12 06 0A 2B   ........A..0...+
&gt; [0320]  06 01 02 01  02 02 01 11  01 41 04 01  31 42 C7 30
&gt; .........A..1B.0
&gt; [0336]  12 06 0A 2B  06 01 02 01  02 02 01 11  02 41
&gt; 04 74   ...+.........A.t
&gt; [0352]  76 9E 10 30  0F 06 0A 2B  06 01 02
&gt; 01  02 02 01 11   v..0...+........
&gt; [0368]  03 41 01 00  30 0F 06 0A
&gt; 2B 06 01 02  01 02 02 01   .A..0...+.......
&gt; [0384]  13 01 41 01  00
&gt; 30 0F 06  0A 2B 06 01  02 01 02 02   ..A..0...+......
&gt; [0400]  01 13
&gt; 02 41  01 00 30 0F  06 0A 2B 06  01 02 01 02   ...A..0...+.....
&gt; [0416]  02 01 13 03  41 01 00 30  0F 06 0A 2B  06 01 02 01
&gt; ....A..0...+....
&gt; [0432]  02 02 01 14  01 41 01 00  30 0F 06 0A  2B 06
&gt; 01 02   .....A..0...+...
&gt; [0448]  01 02 02 01  14 02 41 01  00 30 0F
&gt; 06  0A 2B 06 01   ......A..0...+..
&gt; [0464]  02 01 02 02  01 14 03 41
&gt; 01 00 30 0F  06 0A 2B 06   .......A..0...+.
&gt; [0480]  01 02 01 02  02
&gt; 01 15 01  42 01 00                   ........B..
&gt; debug: [965]
&gt; Net::SNMP::PDU::_process_var_bind_list&#40;&#41;: { 1.3.6.1.2.1.2.2.1.10.1 =&gt;
&gt; Counter: 3432630893 }
&gt; error: [1438]
&gt; Net::SNMP::Message::_process_integer32&#40;&#41;: The Counter length is too
&gt; long &#40;6 bytes&#41;
&gt; error: [299]
&gt; Net::SNMP::MessageProcessing::prepare_data_elements&#40;&#41;: The Counter
&gt; length is too long &#40;6 bytes&#41;
&gt; error: [398]
&gt; Net::SNMP::Dispatcher::_transport_response_received&#40;&#41;: The Counter
&gt; length is too long &#40;6 bytes&#41;
&gt; debug: [517]
&gt; Net::SNMP::Dispatcher::_event_delete&#40;&#41;: deleted [ARRAY&#40;0xae2b370&#41;],
&gt; list is now empty
&gt; debug: [239] Net::SNMP::Dispatcher::deregister&#40;&#41;:
&gt; removed handler for descriptor [3]
&gt; error: [2363]
&gt; Net::SNMP::__ANON__&#40;&#41;: The Counter length is too long &#40;6 bytes&#41;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;16&nbsp;03:59:34&nbsp;2012</span>
    <span class="description">henrik.berg [...] barret.se -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SV: [rt.cpan.org #74944] Problem with 6 byte Counter32 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 16 Feb 2012 08:59:18 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Net-SNMP [...] rt.cpan.org&#34; &lt;bug-Net-SNMP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Henrik Berg &lt;henrik.berg [...] barret.se&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have been using snmpwalk with -v2c and changing to SNMPv1 sadly didn&#39;t help. snmpwalk must just use the 4 least significant bytes when these problems occur.
Since it&#39;s a counter I guess that works, but I won&#39;t ask you to write logic for invalid cases like these.
I&#39;ll just contact the customer and ask them to fix it.
Thanks for your time and for this fine module.

-henrik
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;14:19:15&nbsp;2012</span>
    <span class="description">dtown [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">1 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not a Net::SNMP issue.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;15&nbsp;14:19:15&nbsp;2012</span>
    <span class="description">dtown [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
