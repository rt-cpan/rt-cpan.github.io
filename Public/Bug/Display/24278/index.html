<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #24278 for SQL-Translator: patch - add sqlt-graph/GraphViz global and item-specific display options</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #24278 for SQL-Translator: patch - add sqlt-graph/GraphViz global and item-specific display options</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=SQL-Translator">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=SQL-Translator">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=SQL-Translator">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=SQL-Translator">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/SQL-Translator">SQL-Translator CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">24278</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">new</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=SQL-Translator">SQL-Translator</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
T.J.Adye [...] rl.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-29610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.08_04    </td>
  </tr>
  <tr id="CF-29611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




SQL-Translator-0.08-2.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/282013/126529/SQL-Translator-0.08-2.patch">
Mon Jan 08 14:34:41 2007 (10.3k) by T.J.Adye [...] rl.ac.uk
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=24278">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-282013" href="/Public/Bug/Display.html?id=24278#txn-282013">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;08&nbsp;14:34:41&nbsp;2007</span>
    <span class="description">T.J.Adye [...] rl.ac.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch - add sqlt-graph/GraphViz global and item-specific display
 options</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/282013/126526/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/126526">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 672b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Add GraphViz options to the sqlt-graph command &#40;-g&#41; and the
SQL::Translator::Producer::GraphViz module &#40;graphviz_options&#41;. This
accepts all GraphViz display options, not just those that the producer
knows about. These can be applied globally, or to individual tables,
joins, or constraints &#40;selected by name or regular expression&#41;.

See the SQL::Translator::Producer::GraphViz POD for details.

Change sqlt-graph --width and --height defaults to 8.5x11, to agree with
help text &#40;defaults were 0&#41;.

Also, for completeness, allow &#39;circo&#39; and &#39;fdp&#39; layouts and &#39;debug&#39;
output type. Small fixes to the sqlt-graph help.

&#40;Linux 2.4.21-47.EL, perl 5.8.0, SQL-Translator-0.08_04&#41;
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SQL-Translator-0.08-2.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/282013/126529/SQL-Translator-0.08-2.patch">Download SQL-Translator-0.08-2.patch</a><br />
<span class="downloadcontenttype">text/x-diff 10.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -ur SQL-Translator-0.08-orig/bin/sqlt-graph SQL-Translator-0.08/bin/sqlt-graph
--- SQL-Translator-0.08-orig/bin/sqlt-graph	2006-12-07 14:05:17.000000000 +0000
+++ SQL-Translator-0.08/bin/sqlt-graph	2007-01-08 19:13:31.000000000 +0000
@@ -31,16 +31,18 @@
   Options:
 
     -l|--layout        Layout schema for GraphViz
-                       &#40;&#34;dot,&#34; &#34;neato,&#34; &#34;twopi&#34;; default &#34;dot&#34;&#41;
-    -n|--node-shape    Shape of the nodes &#40;&#34;record,&#34; &#34;plaintext,&#34; 
-                       &#34;ellipse,&#34; &#34;circle,&#34; &#34;egg,&#34; &#34;triangle,&#34; &#34;box,&#34; 
-                       &#34;diamond,&#34; &#34;trapezium,&#34; &#34;parallelogram,&#34; &#34;house,&#34; 
-                       &#34;hexagon,&#34; &#34;octagon,&#34; default &#34;record&#34;&#41;
+                       &#40;&#34;dot,&#34; &#34;neato,&#34; &#34;twopi&#34;, &#34;circo&#34;, &#34;fdp&#34;;
+                       default &#34;dot&#34;&#41;
+    -n|--node-shape    Shape of the nodes &#40;&#34;record&#34;, &#34;plaintext&#34;, 
+                       &#34;ellipse&#34;, &#34;circle&#34;, &#34;egg&#34;, &#34;triangle&#34;, &#34;box&#34;, 
+                       &#34;diamond&#34;, &#34;trapezium&#34;, &#34;parallelogram&#34;, &#34;house&#34;, 
+                       &#34;hexagon&#34;, &#34;octagon&#34;, default &#34;record&#34;&#41;
     -o|--output        Output file name &#40;default STDOUT&#41;
-    -t|--output-type   Output file type &#40;&#34;canon&#34;, &#34;text,&#34; &#34;ps,&#34; &#34;hpgl,&#34;
-                       &#34;pcl,&#34; &#34;mif,&#34; &#34;pic,&#34; &#34;gd,&#34; &#34;gd2,&#34; &#34;gif,&#34; &#34;jpeg,&#34;
-                       &#34;png,&#34; &#34;wbmp,&#34; &#34;cmap,&#34; &#34;ismap,&#34; &#34;imap,&#34; &#34;vrml,&#34;
-                       &#34;vtx,&#34; &#34;mp,&#34; &#34;fig,&#34; &#34;svg,&#34; &#34;plain,&#34; default &#34;png&#34;&#41;
+    -t|--output-type   Output file type &#40;&#34;canon&#34;, &#34;text&#34;, &#34;ps&#34;, &#34;hpgl&#34;,
+                       &#34;pcl&#34;, &#34;mif&#34;, &#34;pic&#34;, &#34;gd&#34;, &#34;gd2&#34;, &#34;gif&#34;, &#34;jpeg&#34;,
+                       &#34;png&#34;, &#34;wbmp&#34;, &#34;cmap&#34;, &#34;ismap&#34;, &#34;imap&#34;, &#34;vrml&#34;,
+                       &#34;vtx&#34;, &#34;mp&#34;, &#34;fig&#34;, &#34;svg&#34;, &#34;plain&#34;, &#34;debug&#34;,
+                       default &#34;png&#34;&#41;
     -c|--color         Add colors
     --no-fields        Don&#39;t show field names
     --height           Image height &#40;in inches, default &#34;11&#34;,
@@ -53,6 +55,10 @@
     --show-sizes       Show column sizes for VARCHAR and CHAR fields
     --show-constraints Show list of constraints for each field
     -s|--skip          Fields to skip in natural joins
+    -g|--graphviz-options Detailed GraphViz options, separated with commas
+                       or separate -g options. eg.
+                         -g directed=0,edge=color=blue
+                       
     --debug            Print debugging information
 
 =head1 DESCRIPTION
@@ -100,7 +106,7 @@
     $layout, $node_shape, $out_file, $output_type, $db_driver, $add_color, 
     $natural_join, $join_pk_only, $skip_fields, $show_datatypes,
     $show_sizes, $show_constraints, $debug, $help, $height, $width,
-    $no_fields
+    $no_fields, @graphviz_options
 &#41;;
 
 GetOptions&#40;
@@ -119,6 +125,7 @@
     &#39;show-datatypes&#39;   =&gt; \$show_datatypes,
     &#39;show-sizes&#39;       =&gt; \$show_sizes,
     &#39;show-constraints&#39; =&gt; \$show_constraints,
+    &#39;g|graphviz-options:s&#39;=&gt; \@graphviz_options,
     &#39;debug&#39;            =&gt; \$debug,
     &#39;h|help&#39;           =&gt; \$help,
 &#41; or die pod2usage;
@@ -144,9 +151,10 @@
         show_datatypes   =&gt; $show_datatypes,
         show_sizes       =&gt; $show_sizes,
         show_constraints =&gt; $show_constraints,
-        height           =&gt; $height || 0,
-        width            =&gt; $width  || 0,
+        height           =&gt; $height,
+        width            =&gt; $width,
         show_fields      =&gt; $no_fields ? 0 : 1,
+        graphviz_options =&gt; [map split&#40;/,/&#41;, @graphviz_options],
     },
 &#41; or die SQL::Translator-&gt;error;
 
diff -ur SQL-Translator-0.08-orig/lib/SQL/Translator/Producer/GraphViz.pm SQL-Translator-0.08/lib/SQL/Translator/Producer/GraphViz.pm
--- SQL-Translator-0.08-orig/lib/SQL/Translator/Producer/GraphViz.pm	2006-12-07 14:05:17.000000000 +0000
+++ SQL-Translator-0.08/lib/SQL/Translator/Producer/GraphViz.pm	2007-01-08 19:10:17.000000000 +0000
@@ -62,8 +62,10 @@
 
 determines which layout algorithm GraphViz will use; possible
 values are &#39;dot&#39; &#40;the default GraphViz layout for directed graph
-layouts&#41;, &#39;neato&#39; &#40;for undirected graph layouts - spring model&#41;
-or &#39;twopi&#39; &#40;for undirected graph layouts - circular&#41;
+layouts&#41;, &#39;neato&#39; &#40;for undirected graph layouts - spring model&#41;,
+&#39;twopi&#39; &#40;for undirected graph layouts - circular&#41;,
+&#39;circo&#39; &#40;for undirected graph layouts - circular&#41;, or &#39;fdp&#39;
+&#40;for undirected graph layouts - force directed spring model&#41;
 
 =item * node_shape &#40;DEFAULT: &#39;record&#39;&#41;
 
@@ -77,7 +79,7 @@
 sets the file type of the output graphic; possible values are
 &#39;ps&#39;, &#39;hpgl&#39;, &#39;pcl&#39;, &#39;mif&#39;, &#39;pic&#39;, &#39;gd&#39;, &#39;gd2&#39;, &#39;gif&#39;, &#39;jpeg&#39;,
 &#39;png&#39;, &#39;wbmp&#39;, &#39;cmap&#39;, &#39;ismap&#39;, &#39;imap&#39;, &#39;vrml&#39;, &#39;vtx&#39;, &#39;mp&#39;,
-&#39;fig&#39;, &#39;svg&#39;, &#39;canon&#39;, &#39;plain&#39; or &#39;text&#39; &#40;see GraphViz for
+&#39;fig&#39;, &#39;svg&#39;, &#39;canon&#39;, &#39;plain&#39;, &#39;text&#39;, or &#39;debug&#39; &#40;see GraphViz for
 details on each of these&#41;
 
 =item * width &#40;DEFAULT: 8.5&#41;
@@ -146,6 +148,54 @@
 natural_join above&#41; of SQL::Translator::Schema, if either
 the natural_join or join_pk_only options has a true value
 
+=item * graphviz_options
+
+additional GraphViz formatting options array reference.
+Each option can be of the form:-
+
+=over 4
+
+=item OPTION=VALUE
+
+set option globally
+
+=item node=OPTION=VALUE
+
+=item edge=OPTION=VALUE
+
+=item graph=OPTION=VALUE
+
+set node, edge, or graph option
+
+=item table=TABLE=OPTION=VALUE
+
+=item join=TABLE1-TABLE2=OPTION=VALUE
+
+=item constraint=CONSTRAINT=OPTION=VALUE
+
+set option for a particular table, join, or constraint.
+TABLE specifies the table name, TABLE1-TABLE2 specifies a join
+&#40;can be in either order&#41;, and CONSTRAINT specifies a constraint name
+&#40;all ignoring case&#41;.
+Can also be given as &#40;anchored&#41; regular expressions to select
+multiple items.
+
+=back
+
+In all cases, =VALUE can be ommitted to set the option to 1.
+See the GraphViz module documentation for a full list of options.
+
+example:
+
+      producer_args =&gt; {
+        ...
+        graphviz_options =&gt; [qw&#40;
+                                directed=0
+                                edge=color=blue
+                                table=priority_table=style=bold
+                                join=priority_table-.*=color=red
+                               &#41;]}
+
 =back
 
 =cut
@@ -164,6 +214,8 @@
     dot   =&gt; 1, 
     neato =&gt; 1, 
     twopi =&gt; 1,
+    circo =&gt; 1,
+    fdp   =&gt; 1,
 };
 
 use constant VALID_NODE_SHAPE =&gt; {
@@ -183,6 +235,7 @@
 };
 
 use constant VALID_OUTPUT =&gt; {
+    debug =&gt; 1,
     canon =&gt; 1, 
     text  =&gt; 1, 
     ps    =&gt; 1, 
@@ -235,6 +288,26 @@
                            split &#40; /,/, $skip_fields &#41;;
     $natural_join      ||= $join_pk_only;
 
+    my %graphviz_options;
+    my %element_options= &#40;node  =&gt; {}, edge =&gt; {}, graph      =&gt; {}&#41;;
+    my %schema_options=  &#40;table =&gt; [], join =&gt; [], constraint =&gt; []&#41;;
+    foreach &#40;@{$args-&gt;{&#39;graphviz_options&#39;}}&#41; {
+      my &#40;$key, $val&#41;;
+      &#40;$key, $val&#41;= /^&#40;[^=]*&#41;=&#40;.*&#41;$/ or &#40;$key, $val&#41;= &#40;$_, 1&#41;;
+      if      &#40;$schema_options{$key} &#38;&#38; &#40;my &#40;$sel, $rest&#41;= &#40;$val =~ /^&#40;[^=]*&#41;=&#40;.*&#41;$/&#41;&#41;&#41; {
+        $sel= qr/^$sel$/i;
+        my &#40;$xkey, $xval&#41;;
+        &#40;$xkey, $xval&#41;= &#40;$rest =~ /^&#40;[^=]*&#41;=&#40;.*&#41;$/&#41; or &#40;$xkey, $xval&#41;= &#40;$rest, 1&#41;;
+        push &#40;@{$schema_options{$key}}, {sel =&gt; $sel, key =&gt; $xkey, val =&gt; $xval}&#41;;
+      } elsif &#40;$element_options{$key}&#41; {
+        my &#40;$xkey, $xval&#41;;
+        &#40;$xkey, $xval&#41;= &#40;$val =~ /^&#40;[^=]*&#41;=&#40;.*&#41;$/&#41; or &#40;$xkey, $xval&#41;= &#40;$val, 1&#41;;
+        $element_options{$key}{$xkey}= $xval;
+      } else {
+        $graphviz_options{$key}= $val;
+      }
+    }
+
     $schema-&gt;make_natural_joins&#40;
         join_pk_only =&gt; $join_pk_only,
         skip_fields  =&gt; $args-&gt;{&#39;skip_fields&#39;},
@@ -262,9 +335,13 @@
         node          =&gt; { 
             shape     =&gt; $node_shape, 
             style     =&gt; &#39;filled&#39;, 
-            fillcolor =&gt; &#39;white&#39; 
-        }
+            fillcolor =&gt; &#39;white&#39;,
+            %{$element_options{&#39;node&#39;}}
+        },
+        %graphviz_options,
     &#41;;
+    $args{&#39;edge&#39;}   = $element_options{&#39;edge&#39;}  if %{$element_options{&#39;edge&#39;}};
+    $args{&#39;graph&#39;}  = $element_options{&#39;graph&#39;} if %{$element_options{&#39;graph&#39;}};
     $args{&#39;width&#39;}  = $width  if $width;
     $args{&#39;height&#39;} = $height if $height;
 
@@ -301,7 +378,14 @@
             } @fields
         &#41; . &#39;\l&#39;;
         my $label = $show_fields ? &#34;{$table_name|$field_str}&#34; : $table_name;
-        $gv-&gt;add_node&#40; $table_name, label =&gt; $label &#41;;
+
+        my %opt;
+        if &#40;$schema_options{&#39;table&#39;}&#41; {
+          for my $table &#40;@{$schema_options{&#39;table&#39;}}&#41; {
+            $table_name =~ /$table-&gt;{&#39;sel&#39;}/ and $opt{$table-&gt;{&#39;key&#39;}}= $table-&gt;{&#39;val&#39;};
+          }
+        }
+        $gv-&gt;add_node&#40; $table_name, label =&gt; $label, %opt &#41;;
 
         debug&#40;&#34;Processing table &#39;$table_name&#39;&#34;&#41;;
 
@@ -330,11 +414,17 @@
             for my $c &#40; $table-&gt;get_constraints &#41; {
                 next unless $c-&gt;type eq FOREIGN_KEY;
                 my $fk_table = $c-&gt;reference_table or next;
+                my %opt;
+                if &#40;$schema_options{&#39;constraint&#39;}&#41; {
+                  for my $constraint &#40;@{$schema_options{&#39;constraint&#39;}}&#41; {
+                    $c-&gt;name =~ /$constraint-&gt;{&#39;sel&#39;}/ and $opt{$constraint-&gt;{&#39;key&#39;}}= $constraint-&gt;{&#39;val&#39;};
+                  }
+                }
 
                 for my $field_name &#40; $c-&gt;fields &#41; {
                     for my $fk_field &#40; $c-&gt;reference_fields &#41; {
                         next unless defined $schema-&gt;get_table&#40; $fk_table &#41;;
-                        push @fk_registry, [ $table_name, $fk_table ];
+                        push @fk_registry, [ $table_name, $fk_table, &#40;%opt ? &#40;\%opt&#41; : &#40;&#41;&#41;];
                     }
                 }
             }
@@ -358,7 +448,9 @@
 
     my %done;
     for my $bunch &#40; @table_bunches &#41; {
-        my @tables = @$bunch;
+        my @tables = @{$bunch};
+        my $opt;
+        $opt= pop @tables if ref $tables[-1];
 
         for my $i &#40; 0 .. $#tables &#41; {
             my $table1 = $tables[ $i ];
@@ -366,7 +458,16 @@
                 my $table2 = $tables[ $j ];
                 next if $table1 eq $table2;
                 next if $done{ $table1 }{ $table2 };
-                $gv-&gt;add_edge&#40; $table2, $table1 &#41;;
+                my %jopt;
+                %jopt= %$opt if $opt;
+                if &#40;$schema_options{&#39;join&#39;}&#41; {
+                  for my $join &#40;@{$schema_options{&#39;join&#39;}}&#41; {
+                    if &#40;&#40;&#34;$table1-$table2&#34; =~ /$join-&gt;{&#39;sel&#39;}/&#41; || &#40;&#34;$table2-$table1&#34; =~ /$join-&gt;{&#39;sel&#39;}/&#41;&#41; {
+                      $jopt{$join-&gt;{&#39;key&#39;}}= $join-&gt;{&#39;val&#39;};
+                    }
+                  }
+                }
+                $gv-&gt;add_edge&#40; $table2, $table1, %jopt &#41;;
                 $done{ $table1 }{ $table2 } = 1;
                 $done{ $table2 }{ $table1 } = 1;
             }
</div></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.278514</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
