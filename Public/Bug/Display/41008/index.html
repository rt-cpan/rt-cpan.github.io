<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #41008 for NetAddr-IP: split not working for v6 addresses</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #41008 for NetAddr-IP: split not working for v6 addresses</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/NetAddr-IP/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/NetAddr-IP/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/NetAddr-IP/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/NetAddr-IP/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/NetAddr-IP">NetAddr-IP CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">41008</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">36.2 hours (2175 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/NetAddr-IP/Active/">NetAddr-IP</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">michael [...] bizsystems.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kashmish [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23470-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23471-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;17&nbsp;20:12:43&nbsp;2008</span>
    <span class="description">kashmish [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> split not working for v6 addresses </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 17 Nov 2008 20:12:14 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NetAddr-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kashmish &lt;kashmish [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
tested 4.007, 4.012 and 4.015 &#40;used to work in the past with some older 
version&#41;
on FreeBSD 6.3-RELEASE #0
with:
perl, v5.8.8 built for amd64-freebsd-thread-multi

still works fine for v4 addresses...

thx
-k
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;16:16:38&nbsp;2008</span>
    <span class="description">michael [...] bizsystems.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Nov 17 20:12:43 2008, kashmish@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; tested 4.007, 4.012 and 4.015 &#40;used to work in the past with some older 
&gt; version&#41;
&gt; on FreeBSD 6.3-RELEASE #0
&gt; with:
&gt; perl, v5.8.8 built for amd64-freebsd-thread-multi
&gt; 
&gt; still works fine for v4 addresses...
&gt; 
&gt; thx
&gt; -k
&gt; 
</div>

Can you provide an example. I don&#39;t believe any of that code has been
updated recently. Should work as before.

Michael
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;16:16:43&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;19:56:10&nbsp;2008</span>
    <span class="description">kashmish [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41008] split not working for v6 addresses</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 Nov 2008 19:55:57 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NetAddr-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kashmish &lt;kashmish [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">thx for the quick response!

script example  &#40;~/script.pl&#41;:
===================================
#!/usr/bin/perl -w
use strict;
use NetAddr::IP;
my $ip = new NetAddr::IP $ARGV[0];
my $mask = $ip-&gt;masklen&#40;&#41;;
my $newmask = $mask + 1;
my @CURRENTHALFS = $ip-&gt;split&#40;$newmask&#41;;
print &#34;first half: $CURRENTHALFS[0]\n&#34;;
print &#34;second half: $CURRENTHALFS[1]\n&#34;;
===================================

v4 usage looks as:
$ ~/splitter.pl 10.10.10.0/24
first half: 10.10.10.0/25
second half: 10.10.10.128/25

but with a v6 cidr we get:
$ ~/splitter.pl dead::beef/48
Use of uninitialized value in array dereference at 
blib/lib/NetAddr/IP.pm &#40;autosplit into 
blib/lib/auto/NetAddr/IP/split.al&#41; line 717.
Use of uninitialized value in concatenation &#40;.&#41; or string at 
/home/kince/splitter.pl line 8.
first half:
Use of uninitialized value in concatenation &#40;.&#41; or string at 
/home/kince/splitter.pl line 9.
second half:

not sure what version we were using in the past, it&#39;s been a few years 
;-&#41;...
cheers and thx again!
-k
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;19:58:50&nbsp;2008</span>
    <span class="description">kashmish [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41008] split not working for v6 addresses - corrected, ignore previous..</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 Nov 2008 19:58:38 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NetAddr-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kashmish &lt;kashmish [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
thx for the quick response!

script example  &#40;~/splitter.pl&#41;:
===================================
#!/usr/bin/perl -w
use strict;
use NetAddr::IP;
my $ip = new NetAddr::IP $ARGV[0];
my $mask = $ip-&gt;masklen&#40;&#41;;
my $newmask = $mask + 1;
my @CURRENTHALFS = $ip-&gt;split&#40;$newmask&#41;;
print &#34;first half: $CURRENTHALFS[0]\n&#34;;
print &#34;second half: $CURRENTHALFS[1]\n&#34;;
===================================

v4 usage looks as:
$ ~/splitter.pl 10.10.10.0/24
first half: 10.10.10.0/25
second half: 10.10.10.128/25

but with a v6 cidr we get:
$ ~/splitter.pl dead::beef/48
Use of uninitialized value in array dereference at 
blib/lib/NetAddr/IP.pm &#40;autosplit into 
blib/lib/auto/NetAddr/IP/split.al&#41; line 717.
Use of uninitialized value in concatenation &#40;.&#41; or string at 
/home/kince/splitter.pl line 8.
first half:
Use of uninitialized value in concatenation &#40;.&#41; or string at 
/home/kince/splitter.pl line 9.
second half:

not sure what version we were using in the past, it&#39;s been a few years 
;-&#41;...
cheers and thx again!
-k
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;21:45:37&nbsp;2008</span>
    <span class="description">michael [...] insulin-pumpers.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41008] split not working for v6 addresses - corrected, ignore previous..</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 Nov 2008 18:45:25 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NetAddr-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> michael [...] insulin-pumpers.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: NetAddr-IP
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt; 
&gt; 
&gt; thx for the quick response!
</div>
This behavior is a feature. If a hugh number of nets are allowed, the 
array would consume all of memory.

From the docs, by design. Note the last line.

       &#34;&#34;-&gt;split&#40;$bits&#41;&#34;&#34;
           Returns a list of objects, representing subnets of
           &#34;$bits&#34; mask produced by splitting the original
           object, which is left unchanged. Note that &#34;$bits&#34;
           must be longer than the original mask in order for it
           to be splittable.

           Note that &#34;$bits&#34; can be given as an integer &#40;the
           length of the mask&#41; or as a dotted-quad. If omitted, a
           host mask is assumed.

       &#34;&#34;-&gt;splitref&#40;$bits&#41;&#34;&#34;
           A &#40;faster&#41; version of &#34;-&gt;split&#40;&#41;&#34; that returns a ref-
           erence to a list of objects instead of a real list.
           This is useful when large numbers of objects are
           expected.

           Return undef if the number of subnets &gt; 2 ** 32


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; script example  &#40;~/splitter.pl&#41;:
&gt; ===================================
&gt; #!/usr/bin/perl -w
&gt; use strict;
&gt; use NetAddr::IP;
&gt; my $ip = new NetAddr::IP $ARGV[0];
&gt; my $mask = $ip-&gt;masklen&#40;&#41;;
&gt; my $newmask = $mask + 1;
&gt; my @CURRENTHALFS = $ip-&gt;split&#40;$newmask&#41;;
&gt; print &#34;first half: $CURRENTHALFS[0]\n&#34;;
&gt; print &#34;second half: $CURRENTHALFS[1]\n&#34;;
&gt; ===================================
&gt; 
&gt; v4 usage looks as:
&gt; $ ~/splitter.pl 10.10.10.0/24
&gt; first half: 10.10.10.0/25
&gt; second half: 10.10.10.128/25
&gt; 
&gt; but with a v6 cidr we get:
&gt; $ ~/splitter.pl dead::beef/48
&gt; Use of uninitialized value in array dereference at 
&gt; blib/lib/NetAddr/IP.pm &#40;autosplit into 
&gt; blib/lib/auto/NetAddr/IP/split.al&#41; line 717.
&gt; Use of uninitialized value in concatenation &#40;.&#41; or string at 
&gt; /home/kince/splitter.pl line 8.
&gt; first half:
&gt; Use of uninitialized value in concatenation &#40;.&#41; or string at 
&gt; /home/kince/splitter.pl line 9.
&gt; second half:
&gt; 
&gt; not sure what version we were using in the past, it&#39;s been a few years
&gt; ;-&#41;... cheers and thx again! -k
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;22:37:16&nbsp;2008</span>
    <span class="description">michael [...] bizsystems.com -  Correspondence added</span>
    <span class="time-taken">15 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Behavior is consistent with the docs. splits beyond 2**32 are not
allowed due to real world constraints on the processor, etc...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;22:37:18&nbsp;2008</span>
    <span class="description">michael [...] bizsystems.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;23:42:29&nbsp;2008</span>
    <span class="description">kashmish [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41008] split not working for v6 addresses</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 Nov 2008 23:42:19 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NetAddr-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kashmish &lt;kashmish [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">not sure if i understand,
you are saying no masks longer then /32 are allowed?


Michael Robinton via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt;
&gt; Behavior is consistent with the docs. splits beyond 2**32 are not
&gt; allowed due to real world constraints on the processor, etc...
&gt;
&gt;   
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;18&nbsp;23:42:30&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;19&nbsp;00:58:36&nbsp;2008</span>
    <span class="description">michael [...] insulin-pumpers.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41008] split not working for v6 addresses</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 Nov 2008 21:58:20 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NetAddr-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> michael [...] insulin-pumpers.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: NetAddr-IP
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt; 
&gt; not sure if i understand,
&gt; you are saying no masks longer then /32 are allowed?
&gt; 
</div>
No, nets containing IP&#39;s of more than 2 **32 are not allowed because 
it would be too large an array to process and return.

I see the dilemma here. I will take a look at the implementation and 
see if it warrants a change. Perhaps what we need to do is restrict 
the return size of the array instead of the number of nets.

Michael

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Michael Robinton via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt; &gt;
&gt; &gt; Behavior is consistent with the docs. splits beyond 2**32 are not
&gt; &gt; allowed due to real world constraints on the processor, etc...
&gt; &gt;
&gt; &gt;   
</div>&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;20&nbsp;22:42:13&nbsp;2008</span>
    <span class="description">kashmish [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41008] split not working for v6 addresses</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Nov 2008 22:41:56 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NetAddr-IP [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kashmish &lt;kashmish [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">michael,
that sounds good! thx for looking into it.

one further thought fudder:

rather then splitting a cidr into same sized subnets,
i personally prefer them as an aggregated list.
e.g.:
x/48 id given, but i need a /50 out of.
instead of splitting the /48 into 8 x /50,
i usually need that highest possible aggregates as:
2 x /50 +
1 x /49
so, the returning number of items is only 3 lines instead of 8,
similar if youd split a /32 into /128&#39;s,
instead of manymanymany 128&#39;s, &#40;memory probs etc.&#41;
i would rather need get &#39;only&#39; 96 &#40;or 97?&#41; lines back...
much easier to handle!

so, i wrote a little tool like:
--------------
use NetAddr::IP;
my $ip = new NetAddr::IP $ARGV[0];
my $ipver = $ip-&gt;version&#40;&#41;;
my $supermask=$ip-&gt;masklen&#40;&#41;;
my $mask=$ARGV[1];
my $oursuper=$ip;
for &#40;$i = $supermask + 1; $i &lt;= $mask; $i++&#41; {
 my $calcip = new NetAddr::IP $oursuper;
 my @CURRENTHALFS;
 if &#40;$ipver == 4&#41; {
  @CURRENTHALFS = $calcip-&gt;split&#40;$i&#41;;
  print &#34;$CURRENTHALFS[1]\n&#34;;
  $oursuper=$CURRENTHALFS[0];
 } else {
  my $v6halfstr = `ipv6gen $calcip $i`;
  @CURRENTHALFS = split&#40;&#34;\n&#34;, &#34;$v6halfstr&#34;&#41;;
  print &#34;$CURRENTHALFS[1]\n&#34;;
  $oursuper=$CURRENTHALFS[0];
 }
}
print &#34;$oursuper\n&#34;;
--------------------------------------
maybe an easy to implement feature to integrate?
eg as:
splitaggr&#40;l&#41;
or
splitaggr&#40;b&#41;

with l=little endian and b=bigendian,
so the destination split might be at the beginning or the end of the 
superblock?

makes sense?
you care?

cheers anyways
;-&#41;
-k



michael@insulin-pumpers.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt;
&gt;   
<div class="message-stanza open">&gt;&gt;        Queue: NetAddr-IP
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt;&gt;
&gt;&gt; not sure if i understand,
&gt;&gt; you are saying no masks longer then /32 are allowed?
&gt;&gt;
&gt;&gt;     
</div>&gt;
&gt; No, nets containing IP&#39;s of more than 2 **32 are not allowed because 
&gt; it would be too large an array to process and return.
&gt;
&gt; I see the dilemma here. I will take a look at the implementation and 
&gt; see if it warrants a change. Perhaps what we need to do is restrict 
&gt; the return size of the array instead of the number of nets.
&gt;
&gt; Michael
&gt;
&gt;   
<div class="message-stanza open">&gt;&gt; Michael Robinton via RT wrote:
&gt;&gt;     
<div class="message-stanza open">&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Behavior is consistent with the docs. splits beyond 2**32 are not
&gt;&gt;&gt; allowed due to real world constraints on the processor, etc...
&gt;&gt;&gt;
&gt;&gt;&gt;   
&gt;&gt;&gt;       
</div></div>&gt;
&gt;
&gt;
&gt;
&gt;   
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;21&nbsp;01:04:40&nbsp;2008</span>
    <span class="description">michael [...] insulin-pumpers.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #41008] split not working for v6 addresses</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 Nov 2008 22:04:19 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> kashmish via RT &lt;bug-NetAddr-IP [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael Robinton &lt;michael [...] insulin-pumpers.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On Thu, 20 Nov 2008, kashmish via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: NetAddr-IP
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt;
&gt; michael,
&gt; that sounds good! thx for looking into it.
&gt;
&gt; one further thought fudder:
&gt;
&gt; rather then splitting a cidr into same sized subnets,
&gt; i personally prefer them as an aggregated list.
&gt; e.g.:
&gt; x/48 id given, but i need a /50 out of.
&gt; instead of splitting the /48 into 8 x /50,
&gt; i usually need that highest possible aggregates as:
&gt; 2 x /50 +
&gt; 1 x /49
&gt; so, the returning number of items is only 3 lines instead of 8,
&gt; similar if youd split a /32 into /128&#39;s,
&gt; instead of manymanymany 128&#39;s, &#40;memory probs etc.&#41;
&gt; i would rather need get &#39;only&#39; 96 &#40;or 97?&#41; lines back...
&gt; much easier to handle!
&gt;
</div>
hmmm.... how about something like this where the current split&#40;$bits&#41; is
extended

With a single argument, split works as stated. An extend version could
work like this where the &#34;split&#34; would do the arguments as encountered and
replicate the last argument.

i.e.

where $ip = someipV6/48
$ip-&gt;split&#40;50,50,49&#41;

split would return two 50&#39;s and the balance in /49&#39;s

further, negating any argument to split would cause it to work from the
top  down instead of the bottom up. i.e it would return a bunch of 49&#39;s
and two 50&#39;s. Similarly, mask IP&#39;s could be used but the &#34;reversal&#34;
feature would not be available in this context.

That might be a reasonable extension. I don&#39;t have any idea at the moment
what kind of coding would be required to extend this feature. Am pretty
busy now but will look into it maybe later.


Michael


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; so, i wrote a little tool like:
&gt; --------------
&gt; use NetAddr::IP;
&gt; my $ip = new NetAddr::IP $ARGV[0];
&gt; my $ipver = $ip-&gt;version&#40;&#41;;
&gt; my $supermask=$ip-&gt;masklen&#40;&#41;;
&gt; my $mask=$ARGV[1];
&gt; my $oursuper=$ip;
&gt; for &#40;$i = $supermask + 1; $i &lt;= $mask; $i++&#41; {
&gt;  my $calcip = new NetAddr::IP $oursuper;
&gt;  my @CURRENTHALFS;
&gt;  if &#40;$ipver == 4&#41; {
&gt;   @CURRENTHALFS = $calcip-&gt;split&#40;$i&#41;;
&gt;   print &#34;$CURRENTHALFS[1]\n&#34;;
&gt;   $oursuper=$CURRENTHALFS[0];
&gt;  } else {
&gt;   my $v6halfstr = `ipv6gen $calcip $i`;
&gt;   @CURRENTHALFS = split&#40;&#34;\n&#34;, &#34;$v6halfstr&#34;&#41;;
&gt;   print &#34;$CURRENTHALFS[1]\n&#34;;
&gt;   $oursuper=$CURRENTHALFS[0];
&gt;  }
&gt; }
&gt; print &#34;$oursuper\n&#34;;
&gt; --------------------------------------
&gt; maybe an easy to implement feature to integrate?
&gt; eg as:
&gt; splitaggr&#40;l&#41;
&gt; or
&gt; splitaggr&#40;b&#41;
&gt;
&gt; with l=little endian and b=bigendian,
&gt; so the destination split might be at the beginning or the end of the
&gt; superblock?
&gt;
&gt; makes sense?
&gt; you care?
&gt;
&gt; cheers anyways
&gt; ;-&#41;
&gt; -k
&gt;
&gt;
&gt;
&gt; michael@insulin-pumpers.org via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt; &gt;
&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt;        Queue: NetAddr-IP
&gt; &gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt; &gt;&gt;
&gt; &gt;&gt; not sure if i understand,
&gt; &gt;&gt; you are saying no masks longer then /32 are allowed?
&gt; &gt;&gt;
&gt; &gt;&gt;
</div>&gt; &gt;
&gt; &gt; No, nets containing IP&#39;s of more than 2 **32 are not allowed because
&gt; &gt; it would be too large an array to process and return.
&gt; &gt;
&gt; &gt; I see the dilemma here. I will take a look at the implementation and
&gt; &gt; see if it warrants a change. Perhaps what we need to do is restrict
&gt; &gt; the return size of the array instead of the number of nets.
&gt; &gt;
&gt; &gt; Michael
&gt; &gt;
&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt; Michael Robinton via RT wrote:
&gt; &gt;&gt;
<div class="message-stanza open">&gt; &gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=41008">http://rt.cpan.org/Ticket/Display.html?id=41008</a></span> &gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Behavior is consistent with the docs. splits beyond 2**32 are not
&gt; &gt;&gt;&gt; allowed due to real world constraints on the processor, etc...
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;
</div></div>&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;24&nbsp;15:08:13&nbsp;2008</span>
    <span class="description">michael [...] bizsystems.com -  Correspondence added</span>
    <span class="time-taken">2160 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Extended the capability of &#39;splitref&#39; to allow splitting of
objects into multiple pieces with differing CIDR masks.
Returned object list can be split from bottom to top
or from top to bottom depending on which method is called

       split, rsplit, splitref, rsplitref

Splits are restricted by default to 2**16 but may be changed with
the &#34;netlimit&#34; function call
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;24&nbsp;15:08:16&nbsp;2008</span>
    <span class="description">michael [...] bizsystems.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;24&nbsp;15:08:18&nbsp;2008</span>
    <span class="description">michael [...] bizsystems.com -  Given to MIKER</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
