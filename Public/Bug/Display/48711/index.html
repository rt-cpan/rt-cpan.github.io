<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #48711 for IO-Compress: rawinflate did the job, but return undef and set $!</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #48711 for IO-Compress: rawinflate did the job, but return undef and set $!</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=IO-Compress">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=IO-Compress">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=IO-Compress">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=IO-Compress">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IO-Compress">IO-Compress CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">48711</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=IO-Compress">IO-Compress</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
felix.ostmann [...] thewar.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-226778-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.020    </td>
  </tr>
  <tr id="CF-226779-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




io-uncompress-error.packed<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/647850/331608/io-uncompress-error.packed">
Fri Aug 14 10:01:46 2009 (881b) by felix.ostmann [...] thewar.de
</a>
</font></li>
</ul>


io-uncompress-error2.packed<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/764298/395460/io-uncompress-error2.packed">
Fri Apr 16 11:52:42 2010 (453b) by felix.ostmann [...] thewar.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=48711">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-647850" href="/Public/Bug/Display.html?id=48711#txn-647850">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;14&nbsp;10:01:46&nbsp;2009</span>
    <span class="description">felix.ostmann [...] thewar.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rawinflate did the job, but return undef and set $!</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/647850/331605/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/331605">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 311b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">perl -MIO::Uncompress::RawInflate=rawinflate -e &#39;$/=undef;my
$d=&lt;&gt;;rawinflate&#40;\$d,\my $s&#41; or warn&#40;$!&#41;; print $s;&#39; &lt;
/tmp/io-uncompress-error.packed

This will produce a warning but $s is the correct string?!?! Last time i
investigate a problem in base will raise this.

i attached the io-uncompress-error.packed
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> io-uncompress-error.packed</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/647850/331608/io-uncompress-error.packed">Download io-uncompress-error.packed</a><br />
<span class="downloadcontenttype">application/octet-stream 881b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648647" href="/Public/Bug/Display.html?id=48711#txn-648647">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;06:10:42&nbsp;2009</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/648647/332036/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/332036">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1006b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Aug 14 10:01:46 2009, Sadrak wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -MIO::Uncompress::RawInflate=rawinflate -e &#39;$/=undef;my
&gt; $d=&lt;&gt;;rawinflate&#40;\$d,\my $s&#41; or warn&#40;$!&#41;; print $s;&#39; &lt;
&gt; /tmp/io-uncompress-error.packed
&gt; 
&gt; This will produce a warning but $s is the correct string?!?! Last time i
&gt; investigate a problem in base will raise this.
&gt; 
&gt; i attached the io-uncompress-error.packed
</div>
Hi Felix,

I ran your one-liner and it didn&#39;t produce any warning. I&#39;m not clear
from your report whether you expect to get an eror or not. Can you tell
me in more detail what your problem is?

When I run your script like this &#40;note the use of Transparent =&gt; 0&#41;

$ perl -MIO::Uncompress::RawInflate=:all -e &#39;rawinflate&#40;&#34;-&#34;, \my $s,
Transparent =&gt; 0&#41; or die&#40;&#34;Error is $RawInflateError\n&#34;&#41;; print $s;&#39;
&lt;io-uncompress-error.packed

I get this error

  Error is unexpected end of file

By default when rawinflate cannot uncompress the input it will just send
the input to the output. The Transparent option controls that behaviour.


Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-648648" href="/Public/Bug/Display.html?id=48711#txn-648648">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;16&nbsp;06:10:44&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-716641" href="/Public/Bug/Display.html?id=48711#txn-716641">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;07&nbsp;08:04:02&nbsp;2010</span>
    <span class="description">pmqs [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764247" href="/Public/Bug/Display.html?id=48711#txn-764247">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;16&nbsp;09:58:20&nbsp;2010</span>
    <span class="description">felix.ostmann [...] thewar.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> felix.ostmann [...] thewar.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/764247/395429/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395429">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 654b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry for not answering ... i used a hack and did not see your answer.

Problem still active.

I am on x86_64 / perl5.10.1 and get a &#34;unexpected end of file&#34; from
IO::Uncompress::Base.pm line ~788

-&gt;smartRead return 0, but i cannot see why.

only thing i see, he enter readBlock 2 times and the result is
uncompressed &#40;ok&#41;, but i got this error.

...

i go to smartRead and checked $$buf, $$out and BufferOffset.
The last run &#40;befor throwing error&#41;, length&#40;$$bug&#41; ==
*$self-&gt;{BufferOffset} ...

i am confused. I dont understand what to debug :-/ I think he dont
realize he is done &#40;calling smartRead with nothing todo&#41;, but cannot
find whats wrong :-/
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764249" href="/Public/Bug/Display.html?id=48711#txn-764249">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;16&nbsp;09:58:21&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764290" href="/Public/Bug/Display.html?id=48711#txn-764290">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;16&nbsp;11:08:31&nbsp;2010</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/764290/395452/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395452">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Apr 16 09:58:20 2010, Sadrak wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry for not answering ... i used a hack and did not see your answer.
&gt; 
&gt; Problem still active.
&gt; 
&gt; I am on x86_64 / perl5.10.1 and get a &#34;unexpected end of file&#34; from
&gt; IO::Uncompress::Base.pm line ~788
&gt; 
&gt; -&gt;smartRead return 0, but i cannot see why.
&gt; 
&gt; only thing i see, he enter readBlock 2 times and the result is
&gt; uncompressed &#40;ok&#41;, but i got this error.
&gt; 
&gt; ...
&gt; 
&gt; i go to smartRead and checked $$buf, $$out and BufferOffset.
&gt; The last run &#40;befor throwing error&#41;, length&#40;$$bug&#41; ==
&gt; *$self-&gt;{BufferOffset} ...
&gt; 
&gt; i am confused. I dont understand what to debug :-/ I think he dont
&gt; realize he is done &#40;calling smartRead with nothing todo&#41;, but cannot
&gt; find whats wrong :-/
&gt; 
</div>
Thanks for getting back to me. 

I had another look at the data file you provided and it is missing a 
single byte at the end of the file. That would account for 
the &#34;unexpected end of file&#34; error you are getting. The byte missing is 
used to flag the end of the compressed data stream, it doen&#39;t contain 
any compressed data - that accounts for you getting the correct 
uncompressed data output and the &#34;unexpected end of file&#34; error.

How was the io-uncompress-error.packed created? It wasn&#39;t created by a 
C or C++ program by any chance? 

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764298" href="/Public/Bug/Display.html?id=48711#txn-764298">#</a>      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;16&nbsp;11:52:42&nbsp;2010</span>
    <span class="description">felix.ostmann [...] thewar.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> felix.ostmann [...] thewar.de</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/764298/395459/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395459">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK, thanks!

I cant remember how i compressed that ...

and: i dont get an error with that file anymore!

Here i provide another file, can you check if there is something
missing? Only with that file i get the error.

Its from a services called DCHK from DeNIC ... perhaps they produce
broken compressions :-/




Am Fr 16. Apr 2010, 11:08:31, PMQS schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Apr 16 09:58:20 2010, Sadrak wrote:
<div class="message-stanza open">&gt; &gt; Sorry for not answering ... i used a hack and did not see your answer.
&gt; &gt; 
&gt; &gt; Problem still active.
&gt; &gt; 
&gt; &gt; I am on x86_64 / perl5.10.1 and get a &#34;unexpected end of file&#34; from
&gt; &gt; IO::Uncompress::Base.pm line ~788
&gt; &gt; 
&gt; &gt; -&gt;smartRead return 0, but i cannot see why.
&gt; &gt; 
&gt; &gt; only thing i see, he enter readBlock 2 times and the result is
&gt; &gt; uncompressed &#40;ok&#41;, but i got this error.
&gt; &gt; 
&gt; &gt; ...
&gt; &gt; 
&gt; &gt; i go to smartRead and checked $$buf, $$out and BufferOffset.
&gt; &gt; The last run &#40;befor throwing error&#41;, length&#40;$$bug&#41; ==
&gt; &gt; *$self-&gt;{BufferOffset} ...
&gt; &gt; 
&gt; &gt; i am confused. I dont understand what to debug :-/ I think he dont
&gt; &gt; realize he is done &#40;calling smartRead with nothing todo&#41;, but cannot
&gt; &gt; find whats wrong :-/
&gt; &gt; 
</div>&gt; 
&gt; Thanks for getting back to me. 
&gt; 
&gt; I had another look at the data file you provided and it is missing a 
&gt; single byte at the end of the file. That would account for 
&gt; the &#34;unexpected end of file&#34; error you are getting. The byte missing is 
&gt; used to flag the end of the compressed data stream, it doen&#39;t contain 
&gt; any compressed data - that accounts for you getting the correct 
&gt; uncompressed data output and the &#34;unexpected end of file&#34; error.
&gt; 
&gt; How was the io-uncompress-error.packed created? It wasn&#39;t created by a 
&gt; C or C++ program by any chance? 
&gt; 
&gt; Paul
</div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> io-uncompress-error2.packed</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/764298/395460/io-uncompress-error2.packed">Download io-uncompress-error2.packed</a><br />
<span class="downloadcontenttype">application/octet-stream 453b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764583" href="/Public/Bug/Display.html?id=48711#txn-764583">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;17&nbsp;07:27:01&nbsp;2010</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/764583/395600/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395600">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 908b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Apr 16 11:52:42 2010, Sadrak wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; OK, thanks!
&gt; 
&gt; I cant remember how i compressed that ...
&gt; 
&gt; and: i dont get an error with that file anymore!
&gt; 
&gt; Here i provide another file, can you check if there is something
&gt; missing? Only with that file i get the error.
</div>
I checked the new file you posted, and it is missing a single trailing
null byte, just like the first one you posted.

I also recompressed both your files myself using rawdeflate and the
compressed output is byte for byte  identical, apart from the the
trailing null byte that mine have.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Its from a services called DCHK from DeNIC ... perhaps they produce
&gt; broken compressions :-/
</div>
I&#39;d be surprised if they missed that last byte, but you never know. Can
you explain what is involved in you getting the files you posted. Have
you written any code yourself to fetch the content, or is it all handled
by another application?

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764695" href="/Public/Bug/Display.html?id=48711#txn-764695">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;17&nbsp;15:51:17&nbsp;2010</span>
    <span class="description">felix.ostmann [...] thewar.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> felix.ostmann [...] thewar.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/764695/395670/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395670">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Sa 17. Apr 2010, 07:27:01, PMQS schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Apr 16 11:52:42 2010, Sadrak wrote:
<div class="message-stanza open">&gt; &gt; OK, thanks!
&gt; &gt; 
&gt; &gt; I cant remember how i compressed that ...
&gt; &gt; 
&gt; &gt; and: i dont get an error with that file anymore!
&gt; &gt; 
&gt; &gt; Here i provide another file, can you check if there is something
&gt; &gt; missing? Only with that file i get the error.
</div>&gt; 
&gt; I checked the new file you posted, and it is missing a single trailing
&gt; null byte, just like the first one you posted.
&gt; 
&gt; I also recompressed both your files myself using rawdeflate and the
&gt; compressed output is byte for byte  identical, apart from the the
&gt; trailing null byte that mine have.
&gt; 
<div class="message-stanza open">&gt; &gt; Its from a services called DCHK from DeNIC ... perhaps they produce
&gt; &gt; broken compressions :-/
</div>&gt; 
&gt; I&#39;d be surprised if they missed that last byte, but you never know. Can
&gt; you explain what is involved in you getting the files you posted. Have
&gt; you written any code yourself to fetch the content, or is it all handled
&gt; by another application?
&gt; 
&gt; Paul
</div>
The service used UDP and i use IO::AIO to fetch the data ... perhaps
there is a bug with a trailing zero byte ... i will ask the author in
irc, perhaps he can explain the missing byte. Also i will write to
DeNIC. But i think this bug is not your problem :&#41; Thanks for your help!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-764710" href="/Public/Bug/Display.html?id=48711#txn-764710">#</a>      
    </span>
    <span class="date">Sat&nbsp;Apr&nbsp;17&nbsp;18:12:23&nbsp;2010</span>
    <span class="description">pmqs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/764710/395678/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/395678">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Apr 17 15:51:17 2010, Sadrak wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Am Sa 17. Apr 2010, 07:27:01, PMQS schrieb:
<div class="message-stanza open">&gt; &gt; On Fri Apr 16 11:52:42 2010, Sadrak wrote:
<div class="message-stanza open">&gt; &gt; &gt; OK, thanks!
&gt; &gt; &gt; 
&gt; &gt; &gt; I cant remember how i compressed that ...
&gt; &gt; &gt; 
&gt; &gt; &gt; and: i dont get an error with that file anymore!
&gt; &gt; &gt; 
&gt; &gt; &gt; Here i provide another file, can you check if there is something
&gt; &gt; &gt; missing? Only with that file i get the error.
</div>&gt; &gt; 
&gt; &gt; I checked the new file you posted, and it is missing a single trailing
&gt; &gt; null byte, just like the first one you posted.
&gt; &gt; 
&gt; &gt; I also recompressed both your files myself using rawdeflate and the
&gt; &gt; compressed output is byte for byte  identical, apart from the the
&gt; &gt; trailing null byte that mine have.
&gt; &gt; 
<div class="message-stanza open">&gt; &gt; &gt; Its from a services called DCHK from DeNIC ... perhaps they produce
&gt; &gt; &gt; broken compressions :-/
</div>&gt; &gt; 
&gt; &gt; I&#39;d be surprised if they missed that last byte, but you never know. Can
&gt; &gt; you explain what is involved in you getting the files you posted. Have
&gt; &gt; you written any code yourself to fetch the content, or is it all handled
&gt; &gt; by another application?
&gt; &gt; 
&gt; &gt; Paul
</div>&gt; 
&gt; The service used UDP and i use IO::AIO to fetch the data ... perhaps
&gt; there is a bug with a trailing zero byte ... i will ask the author in
&gt; irc, perhaps he can explain the missing byte. Also i will write to
&gt; DeNIC. But i think this bug is not your problem :&#41; Thanks for your help!
</div>
No problem. Please get back to me if you need any more help with this.

Paul
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-765022" href="/Public/Bug/Display.html?id=48711#txn-765022">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;19&nbsp;03:12:57&nbsp;2010</span>
    <span class="description">pmqs [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.429541</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
