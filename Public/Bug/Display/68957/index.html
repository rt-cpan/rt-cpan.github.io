<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #68957 for Log-Dispatch-Config: Issue with Log::Dispatch::Config/Log::Dispatch::Email::MailSend under CentOS/RHEL 5.x</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #68957 for Log-Dispatch-Config: Issue with Log::Dispatch::Config/Log::Dispatch::Email::MailSend under CentOS/RHEL 5.x</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Log-Dispatch-Config/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Log-Dispatch-Config/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Log-Dispatch-Config/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Log-Dispatch-Config/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Log-Dispatch-Config">Log-Dispatch-Config CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">68957</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Log-Dispatch-Config/Active/">Log-Dispatch-Config</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
todd.green [...] irondata.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;20&nbsp;15:29:19&nbsp;2011</span>
    <span class="description">todd.green [...] irondata.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Issue with Log::Dispatch::Config/Log::Dispatch::Email::MailSend under CentOS/RHEL 5.x</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 20 Jun 2011 15:29:04 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Log-Dispatch-Config [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Todd Green&#34; &lt;todd.green [...] irondata.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;d like to report an issue with the use of Log::Dispatch::Config and Log::Dispatch::Email::MailSend under CentOS/RHEL 5.x using perl 5.10.0, 5.12.0, 5.12.1 and 5.14.0.

 

I&#39;ve been using these two modules without any issues under various versions of 3.x and 4.x CentOS/RHEL using perl 5.8.8 and below.  Recently I attempted to run one of the scripts under perl 5.12.1 on CentOS 5.6 and received the following error:

 

Can&#39;t locate object method &#34;open&#34; via package &#34;Mail::Mailer::sendmail&#34; at /usr/local/lib/perl5/site_perl/5.12.1/Mail/Send.pm line 58 during global destruction.

 

After a number of tests I isolated the issue down to the use of Log::Dispatch::Config.  I have included two test scripts and a sample log configuration file.   Script #1 uses Log::Dispatch::Config and the config file.  Script #2 accomplishes the same thing without the use Log::Dispatch::Config.

 

Script #1 fails with the above error.

Script #2 does not fail.

 

I have also duplicated the behavior on perl 5.10.0, 5.12.0 and 5.14.1 on various CentOS/RHEL 5.x platforms.  I suspect at this point it is related to perl versions 5.10.x and higher since I tried it against 5.8.8 distributed with CentOS 5.6 and both worked without issue.

 

Any guidance you can provide would be appreciated.

 

==== Script #1 ====

 

#!/usr/local/bin/perl -w

 

use Log::Dispatch::Config;

 

my $conf_file = &#39;test_log.conf&#39;;

 

# Start up logging

Log::Dispatch::Config-&gt;configure&#40;$conf_file&#41;;

my $log = Log::Dispatch::Config-&gt;instance;

 

$log-&gt;debug&#40;&#39;Testing&#39;&#41;;

 

==== test_log.conf ====

 

dispatchers = email

 

email.class = Log::Dispatch::Email::MailSend

email.min_level = debug

email.to = todd.green@irondata.com

email.from = test_logging@myserver.irondata.com

email.subject = Test Logging

email.format = %m%n

 

==== Script #2 ====

 

#!/usr/local/bin/perl

 

use Log::Dispatch;

use Log::Dispatch::Email::MailSend;

 

my $log = Log::Dispatch-&gt;new&#40;&#41;;

$log-&gt;add&#40;

  Log::Dispatch::Email::MailSend-&gt;new&#40;

    name      =&gt; &#39;email&#39;,

    min_level =&gt; &#39;debug&#39;,

    to        =&gt; [qw&#40; todd.green@irondata.com &#41;],

    from =&gt; &#39;test_logging@myserver.irondata.com&#39;,

    subject =&gt; &#39;Test Logging&#39;,

    format =&gt; &#39;%m%n&#39;

  &#41;

&#41;;

 

$log-&gt;debug&#40;&#39;Testing&#39;&#41;;

 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________

Todd A. Green │ Systems Engineer │ 3400 Players Club Parkway Suite 300 Memphis, TN 38125 │ 901.271.1863 Direct │ 901.755.0110 Main| 901. 339.7977 Fax │  todd.green@irondata.com &lt;imap://tgreen@mail.accuship.com:143/tekela.tarvin@irondata.com&gt; 

 

 

              www.irondata.com

 

IRONDATA uses Intelligent Process Management to Improve Efficiency, 

Reduce Redundant Workload, Increase Productivity and Automate Workflow.

 

The information contained in this e-mail message is intended only for the personal and confidential use of the recipient&#40;s&#41; named above. This message may be a work product and as such is privileged and confidential. If the reader of this message is not the intended recipient or an agent responsible for delivering it to the intended recipient, you are hereby notified that you have received this document in error and that any review, dissemination, distribution, or copying of this message is strictly prohibited. If you have received this communication in error, please notify us immediately by e-mail, and delete the original message.

 
</div></div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>

<div class="messagebody">
<img alt="image001.png" title="image001.png" src="/Ticket/Attachment/947351/492618/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;04&nbsp;05:24:32&nbsp;2014</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 20 15:29:19 2011, todd.green@irondata.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can&#39;t locate object method &#34;open&#34; via package &#34;Mail::Mailer::sendmail&#34;
&gt; at /usr/local/lib/perl5/site_perl/5.12.1/Mail/Send.pm line 58 during
&gt; global destruction.
</div>
The ::Email::* objects can either be used in single shot mode &#40;buffered is true, the default&#41; or batch mode.

Log::Dispatch::Config wants to use the batch-mode, in which the ::Email::* objects stay alive for the whole program.  This requires the &#39;buffered&#39; to
be explicitly swiched off:

  email.buffered = 0

The default value for &#39;buffered&#39; is inconvenient.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;04&nbsp;05:24:32&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;04&nbsp;14:17:58&nbsp;2014</span>
    <span class="description">todd.green [...] irondata.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #68957] Issue with Log::Dispatch::Config/Log::Dispatch::Email::MailSend under CentOS/RHEL 5.x</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 4 Aug 2014 18:17:41 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Log-Dispatch-Config [...] rt.cpan.org&#34; &lt;bug-Log-Dispatch-Config [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Todd Green &lt;todd.green [...] irondata.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you, thank you, a million times thank you.  This has been a thorn that I&#39;ve failed to extract various times in the past few years.

Good things come to those who wait!

Todd

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Mark Overmeer via RT [mailto:bug-Log-Dispatch-Config@rt.cpan.org] 
Sent: Monday, August 04, 2014 4:25 AM
To: Todd Green
Subject: [rt.cpan.org #68957] Issue with Log::Dispatch::Config/Log::Dispatch::Email::MailSend under CentOS/RHEL 5.x

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=68957">https://rt.cpan.org/Ticket/Display.html?id=68957</a></span> &gt;

On Mon Jun 20 15:29:19 2011, todd.green@irondata.com wrote:
<div class="message-stanza open">&gt; Can&#39;t locate object method &#34;open&#34; via package &#34;Mail::Mailer::sendmail&#34;
&gt; at /usr/local/lib/perl5/site_perl/5.12.1/Mail/Send.pm line 58 during 
&gt; global destruction.
</div>
The ::Email::* objects can either be used in single shot mode &#40;buffered is true, the default&#41; or batch mode.

Log::Dispatch::Config wants to use the batch-mode, in which the ::Email::* objects stay alive for the whole program.  This requires the &#39;buffered&#39; to be explicitly swiched off:

  email.buffered = 0

The default value for &#39;buffered&#39; is inconvenient.
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
