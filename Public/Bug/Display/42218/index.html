<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #42218 for Win32-API: Win32::API::Callback Heap Allocation Size</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #42218 for Win32-API: Win32::API::Callback Heap Allocation Size</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Win32-API/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Win32-API/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Win32-API/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Win32-API/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Win32-API">Win32-API CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">42218</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">2 hours (120 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Win32-API/Active/">Win32-API</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">cosimo [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jim.brackett [...] milliman.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-35436-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.57    </td>
  </tr>
  <tr id="CF-35437-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;07&nbsp;17:43:23&nbsp;2009</span>
    <span class="description">cosimo [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Win32::API::Callback Heap Allocation Size</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello, 

While using Win32::API::Callback with ActiveState Perl, I observed 
corruption of a heap block which I think is attributable to an 
overwrite by one byte of the dynamically-allocated code buffer.  
Specifically, the high byte of the number of bytes to pop off the stack 
upon return from a stdcall &#40;in my case, and presumably most everyone 
else&#39;s case, zero&#41; is placed at offset tomalloc, which -- given the 
first byte is at offset zero -- exceeds the allocation size by one 
byte, resulting in heap corruption. 

I have not had an opportunity to recompile the extension for debugging, 
but I believe the error may be the addition of 3 bytes instead of 4 to 
account for stdcall epilogue; I note at the bottom of CallbackCreate, 
you deduct 2 bytes from the cursor, then proceed to emit 6 bytes of 
machine code for the epilogue, which -- if I understand the other 
pointer arithmetic correctly -- results in a net addition of 4 bytes, 
not 3.  Although I did not recompile from source, I did apply a binary 
patch to the DLL to replace the +3 with +4, and the modified binary 
worked perfectly, precisely filling the heap block with code, and not 
yielding any heap corruption. 

I hope this information proves helpful.  Thanks for such a great job on 
a very valuable Perl extension! 

Kind regards, 
Jim
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;15:20:35&nbsp;2009</span>
    <span class="description">cosimo [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;15:22:40&nbsp;2009</span>
    <span class="description">cosimo [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jim wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Although I did not recompile from source, I did apply a binary 
&gt; patch to the DLL to replace the +3 with +4, and the modified binary 
&gt; worked perfectly, precisely filling the heap block with code, and not 
&gt; yielding any heap corruption. 
</div>
Hi Jim,

I made the change, but I&#39;d like to add a proper test case for that.
Can you send me the example script that caused the problem? Or can you 
help me build a test case for this bug?

Thanks again.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;13&nbsp;16:14:27&nbsp;2009</span>
    <span class="description">jim.brackett [...] milliman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #42218] Win32::API::Callback Heap Allocation Size</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 13 Jan 2009 15:13:53 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jim Brackett &lt;jim.brackett [...] milliman.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The original offending script is a bit on the heavy side, but I&#39;m sure I 
can come up with something that trips the overwrite.  The trick might be 
in systematically identifying the problem when it happens, since in my 
case it was detected during a debugging session, based in part on compiler 
specifics; I think the heap from which the memory is allocated depends on 
the distribution of Perl, so I&#39;m not sure how best to interrogate heap 
integrity.  One possible approach is to add a croak to callback.xs to 
validate that the final byte written to the cursor pointer falls within 
the code memory allocation, and then confirm that -- without your fix -- 
any use of the callback trips the error.  &#40;I think, at least by 
inspection, the overwrite is likely to happen regardless of the callback 
signature, although it&#39;s hard for me to say, because some of the callback 
creation logic is dependent on what the compiler emits for the template 
function.  I was working with a callback that returned void and accepted 6 
32-bit words on the stack.&#41;

I&#39;m looking at 0.57 source, with a callback.xs source control revision of 
109.  I apologize because I don&#39;t have my development environment set up 
to build extensions from source, but I think something after line 804 
&#40;after the epilogue is written&#41; like the following would help with 
testing:

if &#40;code + tomalloc &lt;= cursor&#41; {
        croak&#40;&#34;CallbackCreate cursor exceeds memory buffer allocation 
boundary&#34;&#41;;
}

I suppose a WIN32_API_DEBUG printf message might help also, but would 
presumably not break the test script.  Of course, if the code does in fact 
continue to exhibit an overwrite bug, it might destabilize the extension 
enough to not run the check &#40;since, by line 804, the corruption is already 
committed, and could arguably have resulted in a segfault&#41;.

Anyway, I&#39;m writing this &#34;off the cuff,&#34; and I&#39;m by no means an expert in 
Perl extension development, particularly test scripts.  I was actually 
working on embedding Perl in a Windows application, and was using the 
Callback extension to enable a script to interface with yet another native 
Windows library.  I&#39;ve learned a lot about Perl guts, and have climbed 
some of the learning curve around extension subroutines, but not high 
enough to be of much help.  I&#39;m not sure if this is the sort of guidance 
for which you were looking, but apart from some defensive programming, I&#39;m 
not sure how to detect the problem reliably.  I was using precompiled 
binaries from ActiveState, so it&#39;s entirely possible the behavior is 
different with a different runtime heap, a different Perl allocation 
scheme &#40;ActiveState uses a VMem object attached to CPerlHost to implement 
PerlMem_malloc&#41;, or a different compiler &#40;which might make a different 
template function, and thus, change how RelocateCode is called&#41;.  I don&#39;t 
see an obvious way to screen for the problem across compilers and across 
different implementations of the interpreter, but if you&#39;d like me to give 
it more thought -- or focus on just ActiveState binaries -- I&#39;m happy to 
help if I can.

Best,
Jim


James M. Brackett 
Financial Technology Practice 
Milliman, Inc. 
71 S. Wacker Drive 
31st Floor 
Chicago, IL 60606 
Telephone: &#40;312&#41; 726-0677
FAX: &#40;312&#41; 726-5225
E-Mail: jim.brackett@milliman.com




&#34;Cosimo Streppone via RT&#34; &lt;bug-Win32-API@rt.cpan.org&gt;

01/13/2009 02:22 PM
Please respond to
bug-Win32-API@rt.cpan.org


To
jim.brackett@milliman.com
cc

Subject
[rt.cpan.org #42218] Win32::API::Callback Heap Allocation Size






&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=42218">https://rt.cpan.org/Ticket/Display.html?id=42218</a></span> &gt;

Jim wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Although I did not recompile from source, I did apply a binary 
&gt; patch to the DLL to replace the +3 with +4, and the modified binary 
&gt; worked perfectly, precisely filling the heap block with code, and not 
&gt; yielding any heap corruption. 
</div>
Hi Jim,

I made the change, but I&#39;d like to add a proper test case for that.
Can you send me the example script that caused the problem? Or can you 
help me build a test case for this bug?

Thanks again.





**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or opinions
upon which reliance may be made by the addressee or any other party,
and it should be considered to be a work in progress. Unless otherwise
noted in this email or its attachments, this communication does not form 
a Statement of Actuarial Opinion under American Academy of Actuaries guidelines.
**************************************************************************************
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;04&nbsp;04:39:49&nbsp;2009</span>
    <span class="description">cosimo [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">120 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This problem should be fixed in 0.58, release to CPAN already.
Jim, can you confirm please?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;04&nbsp;04:39:50&nbsp;2009</span>
    <span class="description">cosimo [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;04&nbsp;10:33:43&nbsp;2009</span>
    <span class="description">jim.brackett [...] milliman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #42218] Win32::API::Callback Heap Allocation Size</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 4 Feb 2009 09:17:23 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jim Brackett &lt;jim.brackett [...] milliman.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Will do!  Thanks for looking into this so promptly.  As I said earlier, 
your work on this module has been exemplary, and I&#39;m sure represents 
considerable value to the Perl community.


James M. Brackett 
Financial Technology Practice 
Milliman, Inc. 
71 S. Wacker Drive 
31st Floor 
Chicago, IL 60606 
Telephone: &#40;312&#41; 726-0677
FAX: &#40;312&#41; 726-5225
E-Mail: jim.brackett@milliman.com




From:
&#34;Cosimo Streppone via RT&#34; &lt;bug-Win32-API@rt.cpan.org&gt;
To:
jim.brackett@milliman.com
Date:
02/04/2009 03:39 AM
Subject:
[rt.cpan.org #42218] Win32::API::Callback Heap Allocation Size



&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=42218">https://rt.cpan.org/Ticket/Display.html?id=42218</a></span> &gt;

This problem should be fixed in 0.58, release to CPAN already.
Jim, can you confirm please?






**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or opinions
upon which reliance may be made by the addressee or any other party,
and it should be considered to be a work in progress. Unless otherwise
noted in this email or its attachments, this communication does not form 
a Statement of Actuarial Opinion under American Academy of Actuaries guidelines.
**************************************************************************************
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;04&nbsp;10:33:44&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;05&nbsp;21:16:39&nbsp;2009</span>
    <span class="description">jim.brackett [...] milliman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #42218] Win32::API::Callback Heap Allocation Size</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Feb 2009 20:15:25 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jim Brackett &lt;jim.brackett [...] milliman.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Cosimo,

I&#39;ve had an opportunity to build version 0.58 of the Win32::API module 
from CPAN sources under ActiveState, and both a runtime test of my 
embedded Perl program and a visual inspection of the source code look 
great.  The heap corruption I had previously detected was reconfirmed when 
running version 0.46 from the ActiveState PPM, but was gone when I dropped 
in my locally compiled version 0.58.  And the addition of 4 bytes for the 
epilogue in Callback.xs is consistent with what I had implemented as a 
quick fix already.  I think it&#39;s safe to say the bug has been vanquished, 
at least as far as I can tell.

I really appreciate your responsiveness and diligence in making this 
improvement, and again, I offer my thanks for your contributions to the 
Perl community.  If you ever find yourself in need of some help with the 
module in the future, please at least let me know, as I&#39;d be delighted to 
lend a hand someday, time permitting.

Take care,
Jim


James M. Brackett 
Financial Technology Practice 
Milliman, Inc. 
71 S. Wacker Drive 
31st Floor 
Chicago, IL 60606 
Telephone: &#40;312&#41; 726-0677
FAX: &#40;312&#41; 726-5225
E-Mail: jim.brackett@milliman.com




From:
&#34;Cosimo Streppone via RT&#34; &lt;bug-Win32-API@rt.cpan.org&gt;
To:
jim.brackett@milliman.com
Date:
02/04/2009 03:39 AM
Subject:
[rt.cpan.org #42218] Win32::API::Callback Heap Allocation Size



&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=42218">https://rt.cpan.org/Ticket/Display.html?id=42218</a></span> &gt;

This problem should be fixed in 0.58, release to CPAN already.
Jim, can you confirm please?






**************************************************************************************
This communication is intended solely for the addressee and is
confidential. If you are not the intended recipient, any disclosure, 
copying, distribution or any action taken or omitted to be taken in
reliance on it, is prohibited and may be unlawful. Unless indicated
to the contrary: it does not constitute professional advice or opinions
upon which reliance may be made by the addressee or any other party,
and it should be considered to be a work in progress. Unless otherwise
noted in this email or its attachments, this communication does not form 
a Statement of Actuarial Opinion under American Academy of Actuaries guidelines.
**************************************************************************************
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;12&nbsp;18:54:47&nbsp;2009</span>
    <span class="description">cosimo [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
