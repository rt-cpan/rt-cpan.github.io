<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #18066 for Test-File: Handle or document the weird root cases</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #18066 for Test-File: Handle or document the weird root cases</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Test-File/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Test-File/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Test-File/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Test-File/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/briandfoy/test-file/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Test-File">Test-File CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">18066</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">5 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Test-File/Active/">Test-File</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">bdfoy [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
adamk [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-31404-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31405-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;21:31:16&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Handle or document the weird root cases</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">When writing File::Flat I had some testing issues because sometimes the
module would be tested as root, and sometimes not.

When confirming that a chmod 0000 file is not readable by the current
user, the normal user could correctly not read the file, and the root
user still could, despite permissions.

As a result, I ended up having to skip can_not_read_file type tests when
running as root.

You may want to consider either adjusting tests to handle this issue &#40;by
skipping the expected-false test that root will unexpectedly pass, or at
the very minimum by documenting that the problem exists.

Note, I haven&#39;t actually tested you have this problem for sure, but I
thought I should at least bring it up.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;21:59:25&nbsp;2006</span>
    <span class="description">Guest -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> brian.d.foy [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 08 21:31:16 2006, guest wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When writing File::Flat I had some testing issues because sometimes the
&gt; module would be tested as root, and sometimes not.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; When confirming that a chmod 0000 file is not readable by the current
&gt; user, the normal user could correctly not read the file, and the root
&gt; user still could, despite permissions.
</div>
If the file is readable by the current user &#40;even if that&#39;s root&#41;,
file_readable_ok&#40;&#41; should still return true, shouldn&#39;t it? I had the
same problem in creating the tests for Test::File, but the function
still works as advertised. Note that the second paragraph under
DESCRIPTION explains this.

Perhaps we need a file_readable_by_user&#40; $file, $user &#41; function when
you want to test it for a particular user.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;21:59:26&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;22:01:11&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;22:01:11&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Given to BDFOY</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;22:07:58&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18066] Handle or document the weird root cases</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 09 Mar 2006 14:07:40 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-File [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Nope.

When a file is set to u-r &#40;as it is with 0000&#41; it means that the user 
should not be able to read it.

In fact, nobody should be able to read write or execute a 0000 file 
other than root.

However, as the owner of the file, the owner can still change the 
permissions of the file to allow themselves the permission, and then do 
what they want. &#40;which is something you need to also bear in mind when 
deleting the temporary test 0000 file&#41;.

For a 0000 file...

file_readable_ok&#40;$file&#41;; # Root OK, User Not OK
file_not_readable&#40;$file&#41;; # Root Not OK, User OK

Or rather, you probably want to skip a bunch of things when running as root.

In fact, if you split it into file_readable_user_ok and etc_root, then 
you can cause each test called not in your current user mode 
&#40;root/not-root&#41; to skip.

Adam K

Guest via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 08 21:31:16 2006, guest wrote:
&gt; 
<div class="message-stanza open">&gt;&gt;When writing File::Flat I had some testing issues because sometimes the
&gt;&gt;module would be tested as root, and sometimes not.
</div>&gt; 
&gt; 
<div class="message-stanza open">&gt;&gt;When confirming that a chmod 0000 file is not readable by the current
&gt;&gt;user, the normal user could correctly not read the file, and the root
&gt;&gt;user still could, despite permissions.
</div>&gt; 
&gt; 
&gt; If the file is readable by the current user &#40;even if that&#39;s root&#41;,
&gt; file_readable_ok&#40;&#41; should still return true, shouldn&#39;t it? I had the
&gt; same problem in creating the tests for Test::File, but the function
&gt; still works as advertised. Note that the second paragraph under
&gt; DESCRIPTION explains this.
&gt; 
&gt; Perhaps we need a file_readable_by_user&#40; $file, $user &#41; function when
&gt; you want to test it for a particular user.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;22:08:00&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;22:37:57&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Mar 08 22:07:58 2006, adam@phase-n.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Nope.
</div>
I&#39;m not sure what that applies to. You asked to handle or document the
root cases. If you think the docs that are already there for that, tell
me where it&#39;s still confusing. A patch would work :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For a 0000 file...
&gt; 
&gt; file_readable_ok&#40;$file&#41;; # Root OK, User Not OK
&gt; file_not_readable&#40;$file&#41;; # Root Not OK, User OK
</div>
Did you not see this behavior? On my tests with Mac OS X.4, that is what
happens. Or, are you saying that this is what you saw and you think that
is wrong?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Or rather, you probably want to skip a bunch of things when running as
</div>root.

I don&#39;t want to do that in the module because I don&#39;t want to guess or
limit what the user is doing. If you&#39;re running as root and you can read
the file as root, then the file is readable and the answer to &#34;Can I
read the file&#34; is &#34;yes&#34;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;08&nbsp;22:37:58&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:22:35&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18066] Handle or document the weird root cases</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 10 Mar 2006 09:20:02 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-File [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

brian_d_foy via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Mar 08 22:07:58 2006, adam@phase-n.com wrote:
<div class="message-stanza open">&gt;&gt; Nope.
</div>&gt; 
&gt; I&#39;m not sure what that applies to. You asked to handle or document the
&gt; root cases. If you think the docs that are already there for that, tell
&gt; me where it&#39;s still confusing. A patch would work :&#41;
&gt; 
<div class="message-stanza open">&gt;&gt; For a 0000 file...
&gt;&gt;
&gt;&gt; file_readable_ok&#40;$file&#41;; # Root OK, User Not OK
&gt;&gt; file_not_readable&#40;$file&#41;; # Root Not OK, User OK
</div>&gt; 
&gt; Did you not see this behavior? On my tests with Mac OS X.4, that is what
&gt; happens. Or, are you saying that this is what you saw and you think that
&gt; is wrong?
</div>
Correct.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Or rather, you probably want to skip a bunch of things when running as
</div>&gt; root.
&gt; 
&gt; I don&#39;t want to do that in the module because I don&#39;t want to guess or
&gt; limit what the user is doing. If you&#39;re running as root and you can read
&gt; the file as root, then the file is readable and the answer to &#34;Can I
&gt; read the file&#34; is &#34;yes&#34;.
</div>
While this is true, the problem is that the results can be 
non-deterministic.

There&#39;s one highly probably case here. If you put in a file_not_readable 
or type-test anywhere, that test will fail for root.

So in File::Flat all I did was skip the negative tests as root. The 
remain potential false positive tests I didn&#39;t put any work into 
preventing them and was will to deal with any if bug reports got 
generated somewhere.

But the test failure when testing for negative read/write/execute 
permissions is a biggie.

Adam K
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:22:35&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:32:53&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 09 17:22:35 2006, adam@phase-n.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; brian_d_foy via RT wrote:
<div class="message-stanza open">&gt; &gt; On Wed Mar 08 22:07:58 2006, adam@phase-n.com wrote:
</div></div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt;&gt; For a 0000 file...
&gt; &gt;&gt;
&gt; &gt;&gt; file_readable_ok&#40;$file&#41;; # Root OK, User Not OK
&gt; &gt;&gt; file_not_readable&#40;$file&#41;; # Root Not OK, User OK
</div>&gt; &gt; 
&gt; &gt; Did you not see this behavior? On my tests with Mac OS X.4, that is what
&gt; &gt; happens. Or, are you saying that this is what you saw and you think that
&gt; &gt; is wrong?
</div>&gt; 
&gt; Correct.
</div>
Which one of those does your reply apply to?

I think I understand what you are saying. You don&#39;t want to know that
root can read the file no matter what when you call file_not_readable&#40;&#41;.

I don&#39;t see a bug here though. You want something that excludes root, so
I suggest you come up with a function that does what you want. I&#39;d be
happy to add it. However, file_not_readable does exactly what I want it
to do and I&#39;m not going to change it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:32:54&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:37:07&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18066] Handle or document the weird root cases</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 10 Mar 2006 09:34:33 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-File [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">brian_d_foy via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Mar 09 17:22:35 2006, adam@phase-n.com wrote:
&gt; 
<div class="message-stanza open">&gt;&gt; brian_d_foy via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt; On Wed Mar 08 22:07:58 2006, adam@phase-n.com wrote:
</div></div>&gt; 
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; For a 0000 file...
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; file_readable_ok&#40;$file&#41;; # Root OK, User Not OK
&gt;&gt;&gt;&gt; file_not_readable&#40;$file&#41;; # Root Not OK, User OK
</div>&gt;&gt;&gt; Did you not see this behavior? On my tests with Mac OS X.4, that is what
&gt;&gt;&gt; happens. Or, are you saying that this is what you saw and you think that
&gt;&gt;&gt; is wrong?
</div>&gt;&gt; Correct.
</div>&gt; 
&gt; Which one of those does your reply apply to?
</div>
Sorry, correct &#40;this is what I saw, and it&#39;s a bug&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think I understand what you are saying. You don&#39;t want to know that
&gt; root can read the file no matter what when you call file_not_readable&#40;&#41;.
&gt; 
&gt; I don&#39;t see a bug here though. You want something that excludes root, so
&gt; I suggest you come up with a function that does what you want. I&#39;d be
&gt; happy to add it. However, file_not_readable does exactly what I want it
&gt; to do and I&#39;m not going to change it.
</div>
Well, the problem comes during installation.

Some people build as a normal user, and only make install as root.

Some people run &#34;sudo cpan&#34; and do the entire install as root.

So if you have a negative test that uses -r then some of the time the 
module will install, and some of the time it won&#39;t.

That&#39;s what my problem turned out to be. I kept getting cpan testers 
failure because of it, and reports from users.

Adam K
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:37:09&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:46:46&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 09 17:37:07 2006, adam@phase-n.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So if you have a negative test that uses -r then some of the time the 
&gt; module will install, and some of the time it won&#39;t.
&gt; 
&gt; That&#39;s what my problem turned out to be. I kept getting cpan testers 
&gt; failure because of it, and reports from users.
</div>
Are CPAN Testers reporting failures with your tests, or with mine? I
haven&#39;t received any failures or complaints.

You need to handle the special cases yourself. You can build a function
on top of the stuff that I alreayd have, or use skip&#40;&#41; like I do in my
tests for the same situation.

I think we&#39;re going around in circles though. If your tests are failing,
 you probably should test those situations that way. It&#39;s not the fault
of Test::File, though.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:46:48&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:51:56&nbsp;2006</span>
    <span class="description">adam [...] phase-n.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #18066] Handle or document the weird root cases</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 10 Mar 2006 09:49:23 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Test-File [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Adam Kennedy &lt;adam [...] phase-n.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">No, I&#39;m just saying that that&#39;s what happened with File::Flat.

I personally didn&#39;t have any problems, it was completely fine for me.

But over time, bad testing reports would keep coming in, all for that 
same problem.

So I&#39;m suggesting that since the root/not problem applies to every 
single time any user of File::Test does a negative test, you should 
build in support for it directly. As some form of skip perhaps.

I personally don&#39;t have any problems, but every user you have will have 
that problem.

Adam K

brian_d_foy via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Thu Mar 09 17:37:07 2006, adam@phase-n.com wrote:
&gt; 
<div class="message-stanza open">&gt;&gt; So if you have a negative test that uses -r then some of the time the 
&gt;&gt; module will install, and some of the time it won&#39;t.
&gt;&gt;
&gt;&gt; That&#39;s what my problem turned out to be. I kept getting cpan testers 
&gt;&gt; failure because of it, and reports from users.
</div>&gt; 
&gt; Are CPAN Testers reporting failures with your tests, or with mine? I
&gt; haven&#39;t received any failures or complaints.
&gt; 
&gt; You need to handle the special cases yourself. You can build a function
&gt; on top of the stuff that I alreayd have, or use skip&#40;&#41; like I do in my
&gt; tests for the same situation.
&gt; 
&gt; I think we&#39;re going around in circles though. If your tests are failing,
&gt;  you probably should test those situations that way. It&#39;s not the fault
&gt; of Test::File, though.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:51:56&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:58:23&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Mar 09 17:51:56 2006, adam@phase-n.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; No, I&#39;m just saying that that&#39;s what happened with File::Flat.
&gt; 
&gt; I personally didn&#39;t have any problems, it was completely fine for me.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I personally don&#39;t have any problems, but every user you have will have 
&gt; that problem.
</div>
Every user? You&#39;re the only one who&#39;s said anything about it, and you
say you don&#39;t have the problem. :&#41;

Let&#39;s leave this closed.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;09&nbsp;17:58:24&nbsp;2006</span>
    <span class="description">bdfoy [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
