<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19191 for Time-Format: Prerequisites need to be made explicit</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19191 for Time-Format: Prerequisites need to be made explicit</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Time-Format/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Time-Format/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Time-Format/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Time-Format/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Time-Format">Time-Format CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19191</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">8 hours (480 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Time-Format/Active/">Time-Format</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">eric.roode.cpan [...] gmail.com
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
aaron [...] FreeBSD.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-33438-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.02    </td>
  </tr>
  <tr id="CF-33439-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.04    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;10&nbsp;13:17:08&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Prerequisites need to be made explicit</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">While trying to add this to the BSD ports tree, make test is failing
miserably.  The Makefile.PL does not list any prerequisites.  The POD
does, and I install some of them, but I still get errors.  If
I18N/Langinfo is truly necessary for the use of this port, it should be
explicitly requested in the Makefile.PL.  Otherwise make test should
fail gracefully and not die.  Apparently DateTime is tested for, but not
listed in the Makefile.PL or in the POD as a prerequisite.  It would be
most helpful if either:

1&#41; Makefile.PL explicitly stated which modules are truly required for
the correct operation of the module
or
2&#41; Make test is tweaked so as to gracefully skip optional tests.

Below is the output of a make test on a Perl 5.6 jail I run.

fivetwoone# make test
PERL_DL_NONLAZY=1 /usr/local/bin/perl5.6.2 &#34;-MExtUtils::Command::MM&#34;
&#34;-e&#34; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/DateManip......ok 2/12Can&#39;t locate I18N/Langinfo.pm in @INC &#40;@INC
contains: /root/p5-Time-Format/work/Time-Format-1.02/blib/lib
/root/p5-Time-Format/work/Time-Format-1.02/blib/arch
/usr/local/lib/perl5/site_perl/5.6.2/mach
/usr/local/lib/perl5/site_perl/5.6.2 /usr/local/lib/perl5/site_perl
/usr/local/lib/perl5/5.6.2/BSDPAN /usr/local/lib/perl5/5.6.2/mach
/usr/local/lib/perl5/5.6.2 . ..&#41; at &#40;eval 9&#41; line 30, &lt;DATA&gt; line 1.
        ...propagated at
/root/p5-Time-Format/work/Time-Format-1.02/blib/lib/Time/Format.pm line
77, &lt;DATA&gt; chunk 1.
# Looks like you planned 12 tests but only ran 2.
# Looks like your test died just after 2.
t/DateManip......dubious
        Test returned status 255 &#40;wstat 65280, 0xff00&#41;
DIED. FAILED tests 3-12
        Failed 10/12 tests, 16.67% okay
t/DateTime.......ok
        11/12 skipped: DateTime not available
t/die............ok
t/doc............ok
t/export1........ok
t/export2........ok
t/export3........ok
t/funcs..........ok 1/15Can&#39;t locate I18N/Langinfo.pm in @INC &#40;@INC
contains: /root/p5-Time-Format/work/Time-Format-1.02/blib/lib
/root/p5-Time-Format/work/Time-Format-1.02/blib/arch
/usr/local/lib/perl5/site_perl/5.6.2/mach
/usr/local/lib/perl5/site_perl/5.6.2 /usr/local/lib/perl5/site_perl
/usr/local/lib/perl5/5.6.2/BSDPAN /usr/local/lib/perl5/5.6.2/mach
/usr/local/lib/perl5/5.6.2 . ..&#41; at &#40;eval 13&#41; line 30, &lt;DATA&gt; line 1.
        ...propagated at
/root/p5-Time-Format/work/Time-Format-1.02/blib/lib/Time/Format.pm line
77, &lt;DATA&gt; chunk 1.
# Looks like you planned 15 tests but only ran 2.
# Looks like your test died just after 2.
t/funcs..........dubious
        Test returned status 255 &#40;wstat 65280, 0xff00&#41;
DIED. FAILED tests 3-15
        Failed 13/15 tests, 13.33% okay
t/locale.........ok
        6/9 skipped: various reasons
t/manip..........ok
t/quot...........ok
t/strftime.......ok
t/string.........ok 1/21Can&#39;t locate I18N/Langinfo.pm in @INC &#40;@INC
contains: /root/p5-Time-Format/work/Time-Format-1.02/blib/lib
/root/p5-Time-Format/work/Time-Format-1.02/blib/arch
/usr/local/lib/perl5/site_perl/5.6.2/mach
/usr/local/lib/perl5/site_perl/5.6.2 /usr/local/lib/perl5/site_perl
/usr/local/lib/perl5/5.6.2/BSDPAN /usr/local/lib/perl5/5.6.2/mach
/usr/local/lib/perl5/5.6.2 . ..&#41; at &#40;eval 6&#41; line 30, &lt;DATA&gt; line 1.
        ...propagated at
/root/p5-Time-Format/work/Time-Format-1.02/blib/lib/Time/Format.pm line
77, &lt;DATA&gt; chunk 1.
# Looks like you planned 21 tests but only ran 2.
# Looks like your test died just after 2.
t/string.........dubious
        Test returned status 255 &#40;wstat 65280, 0xff00&#41;
DIED. FAILED tests 3-21
        Failed 19/21 tests, 9.52% okay
t/time...........ok
t/xs_DateTime....ok
        11/12 skipped: DateTime not available
t/xs_doc.........ok
        16/18 skipped: XS version not available
t/xs_funcs.......ok
        4/5 skipped: XS version not available
t/xs_locale......ok
        8/9 skipped: XS version not available
t/xs_quot........ok
        22/23 skipped: XS version not available
t/xs_time........ok
        77/78 skipped: XS version not available
Failed Test   Stat Wstat Total Fail  Failed  List of Failed
-------------------------------------------------------------------------------
t/DateManip.t  255 65280    12   20 166.67%  3-12
t/funcs.t      255 65280    15   26 173.33%  3-15
t/string.t     255 65280    21   38 180.95%  3-21
155 subtests skipped.
Failed 3/20 test scripts, 85.00% okay. 42/377 subtests failed, 88.86% okay.
*** Error code 35

Stop in /root/p5-Time-Format/work/Time-Format-1.02.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;04&nbsp;16:15:29&nbsp;2006</span>
    <span class="description">eric.roode.cpan [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> ROODE [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is odd.  The prerequisites, including I18N::LangInfo, are supposed
to be optional, and the module checks for errors whenever it tries to
use any of them.

Each of the errors you received occurred at line 77 of Format.pm, which
is where the Perl-only subroutines are loaded and compiled.  The actual
error is propagated from line 30 of the __DATA__ segment, which is line
266 of the module, which is &#34;require I18N::LangInfo;&#34;.  But that line is
enclosed in an eval{} block to trap any errors.  Control should continue
after the eval statement, onto line 281 of the module.  I can&#39;t imagine
why that is not happening.

I cannot reproduce this problem &#40;I currently have access to ActiveState
Perl on Windows XP, and Cygwin Perl&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;04&nbsp;16:15:32&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Dec&nbsp;04&nbsp;16:18:39&nbsp;2006</span>
    <span class="description">eric.roode.cpan [...] gmail.com -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;27&nbsp;19:44:05&nbsp;2008</span>
    <span class="description">eric.roode.cpan [...] gmail.com -  Correspondence added</span>
    <span class="time-taken">480 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This should be resolved in v1.05.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;27&nbsp;19:44:06&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;27&nbsp;19:44:07&nbsp;2008</span>
    <span class="description">eric.roode.cpan [...] gmail.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;27&nbsp;19:44:09&nbsp;2008</span>
    <span class="description">eric.roode.cpan [...] gmail.com -  Given to ROODE</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;27&nbsp;19:44:31&nbsp;2008</span>
    <span class="description">eric.roode.cpan [...] gmail.com -  Fixed in 1.04 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
