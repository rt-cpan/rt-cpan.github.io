<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #88097 for Finance-InteractiveBrokers-SWIG: Using with a GUI</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #88097 for Finance-InteractiveBrokers-SWIG: Using with a GUI</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Finance-InteractiveBrokers-SWIG">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Finance-InteractiveBrokers-SWIG">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Finance-InteractiveBrokers-SWIG">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Finance-InteractiveBrokers-SWIG">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Finance-InteractiveBrokers-SWIG">Finance-InteractiveBrokers-SWIG CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">88097</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Finance-InteractiveBrokers-SWIG">Finance-InteractiveBrokers-SWIG</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">INFIDEL [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
richie765 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-236860-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.08    </td>
  </tr>
  <tr id="CF-236861-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<ul>
<li>
0.09</li>
<li>
0.10</li>
</ul>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=88097">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253306" href="/Public/Bug/Display.html?id=88097#txn-1253306">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;05:45:01&nbsp;2013</span>
    <span class="description">richie765 [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Using with a GUI</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 25 Aug 2013 11:44:48 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-InteractiveBrokers-SWIG [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Richard &lt;richie765 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253306/663273/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663273">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1004b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve created a simple wxPerl app to do some simple interaction with IB. I
can&#39;t figure out how to make it work.

I&#39;ve created an IDLE method to periodically call processMessages. But this
locks the GUI for periods of time.

Furthermore I keep getting the following error.

Server Error: ReqID -1; code 509: Exception caught while reading socket -
No such file or directory

I tried many things to get rid of it but I can&#39;t. This error code isn&#39;t
documented anywhere.

I&#39;ve looked at the source of processMessages but I don&#39;t understand it&#39;s
function. I&#39;ve also looked at the IBAPI GUI examples for C++ and Java, and
it seems they don&#39;t call anything similar like &#34;processMessages&#34;, the event
handler just gets called without any such thing. What is it needed in Perl
and what does it do exactly?

I&#39;ve also tried to fork and run the message loop in its own process, but
that just results in errors.

Do you have any suggestions how I could make this work? I can give more
detailed information if needed.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253306/663274/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663274">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253313" href="/Public/Bug/Display.html?id=88097#txn-1253313">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;06:22:04&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253313/663279/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663279">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi there.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve created an IDLE method to periodically call processMessages. But this
&gt; locks the GUI for periods of time.
</div>
That&#39;s sort of a known issue.  I&#39;m sharing the select&#40;&#41; timeout to poll for messages with the ping timeout value in IBAPI.cxx.  There is a workaround someone else came up for it here:
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=79926">https://rt.cpan.org/Ticket/Display.html?id=79926</a></span>

I believe he modified the select&#40;&#41; timeout on line 128 of IBAPI.cxx with something shorter.

My use case &#40;the one it was designed for&#41; is that it runs as a daemon that writes to an intermediary FIFO queue, and then the queue is processed via other apps; the latency/lag doesn&#39;t matter in this situation, as it only does the poll/write loop.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;ve looked at the source of processMessages but I don&#39;t understand it&#39;s
&gt; function. I&#39;ve also looked at the IBAPI GUI examples for C++ and Java, and
&gt; it seems they don&#39;t call anything similar like &#34;processMessages&#34;, the event
&gt; handler just gets called without any such thing. What is it needed in Perl
&gt; and what does it do exactly?
</div>
It&#39;s not in the API itself, but it&#39;s a shrunken version of the call in their CPP PosixTestClient distributed with their app.  It&#39;s a fairly standard event loop processor; it polls the socket for incoming messages with a timeout; but as you noticed above, it blocks for a possibly undesirably long period of time, if used directly in an interactive program.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Furthermore I keep getting the following error.
&gt; 
&gt; Server Error: ReqID -1; code 509: Exception caught while reading socket -
&gt; No such file or directory
&gt; 
&gt; I tried many things to get rid of it but I can&#39;t. This error code isn&#39;t
&gt; documented anywhere.
</div>
For this one, I&#39;m not sure offhand, and I&#39;ve had to see what you&#39;re doing.  This is the error message reference:
<span class="clickylink"><a target="new" rel="nofollow" href="https://www.interactivebrokers.com/en/software/api/apiguide/tables/api_message_codes.htm">https://www.interactivebrokers.com/en/software/api/apiguide/tables/api_message_codes.htm</a></span>

That error is generated in MyEventHandler.pm by the &#39;error&#40;&#41;&#39; sub, and it is called as a result of receiving a message from the server &#40;well, the TWS endpoint or daemon&#41;, so it is something IB is sending to your client.

If you&#39;re familiar with strace and/or wireshark, those tools would likely be beneficial in troubleshooting this issue, so you can see roughly what calls are being made and what is being communicated over the network.  Furthermore, the IB daemon or TWS have their own logs that might also help.

Are you passing a valid Request ID to the API?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Do you have any suggestions how I could make this work? I can give more
&gt; detailed information if needed.
</div>
I might be able to take a look at a simple test case.  If you can provide a short example of this, it&#39;s possible that I can recommend something for better architecting your event loop; but for the error above, it is unlikely I&#39;d be able to provide more than the recommendations above.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253314" href="/Public/Bug/Display.html?id=88097#txn-1253314">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;06:22:04&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253316" href="/Public/Bug/Display.html?id=88097#txn-1253316">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;06:25:32&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253381" href="/Public/Bug/Display.html?id=88097#txn-1253381">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;10:55:47&nbsp;2013</span>
    <span class="description">richie765 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #88097] Using with a GUI</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 25 Aug 2013 16:55:32 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-InteractiveBrokers-SWIG [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Richard &lt;richie765 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253381/663314/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663314">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the fast response!

That&#39;s sort of a known issue.  I&#39;m sharing the select&#40;&#41; timeout to poll for
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; messages with the ping timeout value in IBAPI.cxx.  There is a workaround
&gt; someone else came up for it here:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=79926">https://rt.cpan.org/Ticket/Display.html?id=79926</a></span>
&gt;
&gt; I believe he modified the select&#40;&#41; timeout on line 128 of IBAPI.cxx with
&gt; something shorter.
&gt;
</div>

Thanks cool, I changed the time to 0 and it works fine now.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"> &gt; Furthermore I keep getting the following error.
&gt;
&gt; Server Error: ReqID -1; code 509: Exception caught while reading socket -
&gt; No such file or directory
&gt;
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That error is generated in MyEventHandler.pm by the &#39;error&#40;&#41;&#39; sub, and it
&gt; is called as a result of receiving a message from the server &#40;well, the TWS
&gt; endpoint or daemon&#41;, so it is something IB is sending to your client.
&gt;
&gt;
</div>I found this error. It&#39;s actually a bug in the IB API but it can be fixed
in your module. What happens is the following:

* Call eConnect successfully
* Other code runs that sets &#34;errno&#34; to a non-zero value, for example due to
a non-fatal file-not-found.
* After the next successful &#34;select&#34; in handleMessages, it continues to
onReceive and then to handleSocketError where it detects a non-zero &#34;errno&#34;
and terminates with an error.

errno is normally never set to zero and one should only check it&#39;s value if
a function returns an error. However in the IB API they don&#39;t do it that
way so it catches an error that really isn&#39;t there.

The way I got around it is by having the line &#34;errno = 0;&#34; just before the
select statement in handleMessages.


While I&#39;m at it I have another question. While making your module on OSX it
complains about the compiler version and that I should update it. I updated
it to the latest but it still complains. I removed this check from
Makefile.PL to force building regardless.

I don&#39;t know what the potential problem was. So do you think I&#39;m still
using the wrong compiler or is the check not valid anymore?

$ c++ --version
i686-apple-darwin11-llvm-g++-4.2 &#40;GCC&#41; 4.2.1 &#40;Based on Apple Inc. build
5658&#41; &#40;LLVM build 2336.11.00&#41;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253381/663315/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663315">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253408" href="/Public/Bug/Display.html?id=88097#txn-1253408">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;11:40:55&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253408/663331/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663331">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 25 10:55:47 2013, richie765@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks cool, I changed the time to 0 and it works fine now.
</div>
Great!  Though, you may want to check how frequently ping requests are sent now...
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The way I got around it is by having the line &#34;errno = 0;&#34; just before
&gt; the
&gt; select statement in handleMessages.
</div>
Clear as day, thanks for reporting back on this.  I assume you mean IBAPI.cxx:processMessages&#40;&#41; line 143 here?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; While I&#39;m at it I have another question. While making your module on
&gt; OSX it
&gt; complains about the compiler version and that I should update it. I
&gt; updated
&gt; it to the latest but it still complains. I removed this check from
&gt; Makefile.PL to force building regardless.
&gt; 
&gt; I don&#39;t know what the potential problem was. So do you think I&#39;m still
&gt; using the wrong compiler or is the check not valid anymore?
&gt; 
&gt; $ c++ --version
&gt; i686-apple-darwin11-llvm-g++-4.2 &#40;GCC&#41; 4.2.1 &#40;Based on Apple Inc.
&gt; build 5658&#41; &#40;LLVM build 2336.11.00&#41;
</div>
The build-time checks for OS-X were the result of this bug report:
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76932">https://rt.cpan.org/Ticket/Display.html?id=76932</a></span>

I spent several hours digging through that, and discovered 2 things:
1. The Apple devs, or whoever builds the Perl binaries for OSX, do not use a system layout that matches that of their end-users, so &#39;perl -V&#39; and the Config.pm module lie on OS-X, and cause many build headaches, likely with many other complex Perl modules also.
2. Some bug in Apple&#39;s XCode 4.1 or 4.2 seems to generate bogus binaries, which caused build failures in many projects.  From what I could tell, it seemed to be an issue during their migration to clang/llvm.  I&#39;m not an expert in OS-X&#39;s toolchain, and don&#39;t use it for development myself, so I added those checks after a few days of frustrating Heisenbugs when running identical test cases on different versions of the OS-X toolchain.

If it works for you without generating segfaults or other issues, it may be that it&#39;s now fixed after all, and my checks should be refined some other way, since your toolchain signature looks the same as the one in that ticket.

Don&#39;t suppose you could paste your &#39;perl -V&#39;, &#39;uname -a&#39;, and other toolchain and XCode versions, and OS-X version in here &#40;masking any private information&#41;?

HTH, and hope everything works well for you now!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253412" href="/Public/Bug/Display.html?id=88097#txn-1253412">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;12:30:51&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253413" href="/Public/Bug/Display.html?id=88097#txn-1253413">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;12:30:51&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Severity Normal added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253414" href="/Public/Bug/Display.html?id=88097#txn-1253414">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;12:30:52&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Broken in 0.08 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253589" href="/Public/Bug/Display.html?id=88097#txn-1253589">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;25&nbsp;13:37:05&nbsp;2013</span>
    <span class="description">richie765 [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #88097] Using with a GUI</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 25 Aug 2013 19:36:49 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Finance-InteractiveBrokers-SWIG [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Richard &lt;richie765 [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253589/663413/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663413">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=88097">https://rt.cpan.org/Ticket/Display.html?id=88097</a></span> &gt;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;
<div class="message-stanza open">&gt; &gt; Thanks cool, I changed the time to 0 and it works fine now.
</div>&gt;
&gt; Great!  Though, you may want to check how frequently ping requests are
&gt; sent now...
&gt;
&gt;
</div>I&#39;ll check but I think that hasn&#39;t changed. 0 seems to be the best for GUI,
I can call handleMessages a couple of times per second when idle and using
a timer without blocking the UI at all. So far that works very well. If you
are making an update, you could make the timeout configurable. In its
current form the module only seems to be usable in a very specific way.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Clear as day, thanks for reporting back on this.  I assume you mean
&gt; IBAPI.cxx:processMessages&#40;&#41; line 143 here?
&gt;
&gt;
</div>Exactly so it should be:

        errno=0;
        int ret = select&#40; m_pClient-&gt;fd&#40;&#41; + 1,
                          &#38;readSet, &#38;writeSet, &#38;errorSet, &#38;tval &#41;;



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; The build-time checks for OS-X were the result of this bug report:
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=76932">https://rt.cpan.org/Ticket/Display.html?id=76932</a></span>
&gt;
&gt;
</div>Ah ok, I didn&#39;t get segfaults so I think that problem is of the past.
Perhaps this check isn&#39;t so important anymore if you put the requirements
in the README.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Don&#39;t suppose you could paste your &#39;perl -V&#39;, &#39;uname -a&#39;, and other
&gt; toolchain and XCode versions, and OS-X version in here &#40;masking any private
&gt; information&#41;?
&gt;
&gt;
</div>I don&#39;t think that is a problem. It&#39;s at the bottom of this mail.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; HTH, and hope everything works well for you now!
&gt;
</div>
So far it works great! I&#39;m really happy about this module. Thanks a lot for
making it and responding so fast.

Everything is up to date to the latest versions.

$ perl -V
Summary of my perl5 &#40;revision 5 version 12 subversion 4&#41; configuration:

  Platform:
    osname=darwin, osvers=12.0, archname=darwin-thread-multi-2level
    uname=&#39;darwin b1026.apple.com 12.0 darwin kernel version 12.0.0: tue
may 15 23:31:29 pdt 2012; root:xnu-2050.6.70~1release_x86_64 x86_64 &#39;
    config_args=&#39;-ds -e -Dprefix=/usr -Dccflags=-g  -pipe  -Dldflags=
-Dman3ext=3pm -Duseithreads -Duseshrplib -Dinc_version_list=none -Dcc=clang&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;clang&#39;, ccflags =&#39;-arch i386 -arch x86_64 -g -pipe -fno-common
-DPERL_DARWIN -fno-strict-aliasing -fstack-protector -I/usr/local/include&#39;,
    optimize=&#39;-Os&#39;,
    cppflags=&#39;-g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing
-fstack-protector -I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.2.1 Compatible Apple Clang 4.0
&#40;tags/Apple/clang-418.0.60&#41;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;,
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;clang -mmacosx-version-min=10.8&#39;, ldflags =&#39;-arch i386 -arch x86_64
-fstack-protector -L/usr/local/lib&#39;
    libpth=/usr/local/lib /usr/lib
    libs=-ldbm -ldl -lm -lutil -lc
    perllibs=-ldl -lm -lutil -lc
    libc=, so=dylib, useshrplib=true, libperl=libperl.dylib
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39;-arch i386 -arch x86_64 -bundle -undefined
dynamic_lookup -L/usr/local/lib -fstack-protector&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
USE_64_BIT_ALL
                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES
                        USE_PERLIO USE_PERL_ATOF USE_REENTRANT_API
  Locally applied patches:
    /Library/Perl/Updates/&lt;version&gt; comes before system perl directories
    installprivlib and installarchlib points to the Updates directory
  Built under darwin
  Compiled at Jun 20 2012 13:55:28
  %ENV:
    PERL5LIB=&#34;/path/to/lib&#34;
  @INC:
    /path/to/lib
    /Library/Perl/5.12/darwin-thread-multi-2level
    /Library/Perl/5.12
    /Network/Library/Perl/5.12/darwin-thread-multi-2level
    /Network/Library/Perl/5.12
    /Library/Perl/Updates/5.12.4/darwin-thread-multi-2level
    /Library/Perl/Updates/5.12.4
    /System/Library/Perl/5.12/darwin-thread-multi-2level
    /System/Library/Perl/5.12
    /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level
    /System/Library/Perl/Extras/5.12
    .


$ uname -a
Darwin somehost.local 12.4.0 Darwin Kernel Version 12.4.0: Wed May  1
17:57:12 PDT 2013; root:xnu-2050.24.15~1/RELEASE_X86_64 x86_64

$ gcc --version
i686-apple-darwin11-llvm-gcc-4.2 &#40;GCC&#41; 4.2.1 &#40;Based on Apple Inc. build
5658&#41; &#40;LLVM build 2336.11.00&#41;

XCode: Version 4.6.3 &#40;4H1503&#41;

Commandline Tools: Updated to the latest
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253589/663414/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663414">with headers</a>
<br />
<span class="downloadcontenttype">text/html 6.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253805" href="/Public/Bug/Display.html?id=88097#txn-1253805">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;26&nbsp;07:59:15&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1253805/663526/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/663526">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 978b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Aug 25 13:37:05 2013, richie765@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ah ok, I didn&#39;t get segfaults so I think that problem is of the past.
&gt; Perhaps this check isn&#39;t so important anymore if you put the
&gt; requirements
&gt; in the README.
</div>
In looking at your versions, and redoing the research on it, it looks like it was an issue with fastcall and/or varargs semantics in LLVM build 2335.  Many people were complaining loudly about ABI issues in that release, though I still haven&#39;t found an authoritative root cause.

I changed the signature checker to complain about that, rather than the toolchain string, for v0.09.  I also added the &#39;errno = 0;&#39; reset that you mentioned.

If you&#39;d like to try out the build step in 0.09 to see if it complains, feel free &#40;and I&#39;d love to hear back&#41;, but for now if you install it, you&#39;d have to re-add your timeout tweak.  I&#39;ll work on a configurable timeout for a later release when I&#39;ve got a bit more time.

Thanks for the feedback, and happy trading!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1253807" href="/Public/Bug/Display.html?id=88097#txn-1253807">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;26&nbsp;07:59:15&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Fixed in 0.09 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1256223" href="/Public/Bug/Display.html?id=88097#txn-1256223">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;30&nbsp;12:53:10&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1256223/664925/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/664925">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 307b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve uploaded FIB::SWIG 0.10, which adds the method setSelectTimeout&#40;&#41;, which should hopefully be backwards compatible, and allow a reset of the select&#40;2&#41; timeout issue for your interactive use case.

It has a dependency on FIB::API 0.04, which I also just uploaded.

I&#39;d love to know if this works for you.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1256347" href="/Public/Bug/Display.html?id=88097#txn-1256347">#</a>      
    </span>
    <span class="date">Fri&nbsp;Aug&nbsp;30&nbsp;20:35:12&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Fixed in 0.10 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1259536" href="/Public/Bug/Display.html?id=88097#txn-1259536">#</a>      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;07&nbsp;02:01:43&nbsp;2013</span>
    <span class="description">INFIDEL [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.747934</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
