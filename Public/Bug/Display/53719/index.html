<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53719 for Net-FTPSSL: Not a bug but a workaround to a server bug.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53719 for Net-FTPSSL: Not a bug but a workaround to a server bug.</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Net-FTPSSL/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Net-FTPSSL/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-FTPSSL">Net-FTPSSL CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53719</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Net-FTPSSL/Active/">Net-FTPSSL</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
webb [...] cargotel.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-22628-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.14</li>
<li>
0.12</li>
</ul>
    </td>
  </tr>
  <tr id="CF-22629-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.15    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;10:20:54&nbsp;2010</span>
    <span class="description">webb [...] cargotel.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Not a bug but a workaround to a server bug.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Jan 2010 09:20:11 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-NET-FTPSSL [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Webb &lt;webb [...] cargotel.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Curtis,

I would have just emailed you directly but you have your email squashed on
CPAN.  A server I&#39;m having to communicate with breaks if you send it an ALLO
command, so I added an option to disable the allo.  My diff follows.  I
don&#39;t know if this is something you want to include or not, but for at least
one person it was necessary.

Thanks for providing a good module.


-- 
Ben Webb
CargoTel
ph: 866-227-4683 x719
YIM: benrwebb

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@@ -74,6 +74,7 @@
   my $data_prot    = &#40;$encrypt_mode eq CLR_CRYPT&#41; ? DATA_PROT_CLEAR
                                  : &#40;$arg-&gt;{DataProtLevel} ||
DATA_PROT_PRIVATE&#41;;
   my $use_ssl      = $arg-&gt;{useSSL} || 0;
+  my $squash_allo  = $arg-&gt;{squashALLO} || 0;
   my $die          = $arg-&gt;{Croak} || $arg-&gt;{Die};
   my $pres_ts      = $arg-&gt;{PreserveTimestamp} || 0;
   my $use_logfile  = $debug &#38;&#38; &#40;defined $arg-&gt;{DebugLogFile} &#38;&#38;
@@ -189,15 +190,16 @@
   }

   # These options control the behaviour of the Net::FTPSSL class ...
-  ${*$obj}{Crypt}     = $encrypt_mode;
-  ${*$obj}{debug}     = $debug;
-  ${*$obj}{trace}     = $trace;
-  ${*$obj}{timeout}   = $timeout;
-  ${*$obj}{buf_size}  = $buf_size;
-  ${*$obj}{type}      = MODE_ASCII;
-  ${*$obj}{data_prot} = $data_prot;
-  ${*$obj}{Croak}     = $die;
-  ${*$obj}{FixPutTs}  = ${*$obj}{FixGetTs} = $pres_ts;
+  ${*$obj}{Crypt}       = $encrypt_mode;
+  ${*$obj}{debug}       = $debug;
+  ${*$obj}{trace}       = $trace;
+  ${*$obj}{timeout}     = $timeout;
+  ${*$obj}{buf_size}    = $buf_size;
+  ${*$obj}{type}        = MODE_ASCII;
+  ${*$obj}{data_prot}   = $data_prot;
+  ${*$obj}{squash_allo} = $squash_allo;
+  ${*$obj}{Croak}       = $die;
+  ${*$obj}{FixPutTs}    = ${*$obj}{FixGetTs} = $pres_ts;

   ${*$obj}{ftpssl_filehandle} = $FTPS_ERROR  if &#40; $debug == 2 &#41;;
   $FTPS_ERROR = undef;
@@ -814,8 +816,8 @@
     return undef;    # Already decided not to call croak if you get here!
   }

-  # If alloc_size is already set, I skip this part
-  unless &#40; defined ${*$self}{alloc_size} &#41; {
+  # If alloc_size is already set or we squash allo, I skip this part
+  unless &#40; defined ${*$self}{alloc_size} || ${*$self}{squash_allo} &#41; {
     if &#40; $close_file &#38;&#38; -f $file_loc &#41; {
       my $size = -s $file_loc;
       $self-&gt;alloc&#40;$size&#41;;
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;13:51:07&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Broken in 0.14 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;13:51:08&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Severity Normal added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;14:41:17&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Ben,

I&#39;m always looking for ways to improve this module.  And I prefer
contact via the bug report so that I can track problems to their
resolution.  Emails just tend to get lost if I can&#39;t deal with it
immediately.

To bad you contacted me just after I released v0.14, so now this fix
will need to wait on v0.15, which may be a while.

In the mean time, since I can&#39;t reproduce your problem, I&#39;d appreciate
if you could run a test for me and send back the log file so that I can
see the actual problem you encountered.  Since I have an idea for a more
elegant solution.

There is a boolean function called supported&#40;&#41; in this class.  And I&#39;d
prefer to make the check dynamic instead of adding a new option that
someone needs to examine source code to figure out if they need to use
it or not.  The servers I have just ignore the ALLO command if it isn&#39;t
supported, which is why the code didn&#39;t test for success.  But if your
server connection is dying, I need to make a change.

So I&#39;d appreciate it if you could run the following code for me without
using your new squash_allo option and return the allo_test.txt file for
analysis to me as well as what was printed to your screen.  Please
replace all &#34;...&#34; with appropriate values for your server.

$ftp=Net::FTP-&gt;new&#40;....,Debug=&gt;1,DebugLogFile=&gt;&#34;allo_test.txt&#34;,Croak=&gt;1&#41;;
$ftp-&gt;login &#40;..., ...&#41;;
$h = $ftp-&gt;supported &#40;&#34;allo&#34;&#41;;
print &#34;*** ALLO Supported? &#34;, &#40;$h ? &#34;TRUE&#34; : &#34;FALSE&#34;&#41;, &#34;\n&#34;;
$ftp-&gt;put &#40;...&#41;;   # So I can see it fail.
$ftp-&gt;quit &#40;&#41;;

Don&#39;t worry about the overhead of supported&#40;&#41;, it just runs the &#34;HELP&#34;
command the first time it&#39;s called.  Afterward each call to supported&#40;&#41;
references an internal hash of all the commands the server said it
supports.  So only your 1st call to put&#40;&#41; would result in an additional
server hit and each subsequent call would skip the server hit.

Once I get your results, I&#39;ll decide on the best solution to take for
future development of this module.

Thanks for your help.

Curtis

On Fri Jan 15 10:20:54 2010, webb@cargotel.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Curtis,
&gt; 
&gt; I would have just emailed you directly but you have your email squashed on
&gt; CPAN.  A server I&#39;m having to communicate with breaks if you send it
</div>an ALLO
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; command, so I added an option to disable the allo.  My diff follows.  I
&gt; don&#39;t know if this is something you want to include or not, but for at
</div>least
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; one person it was necessary.
&gt; 
&gt; Thanks for providing a good module.
&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;14:41:18&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;15:22:45&nbsp;2010</span>
    <span class="description">webb [...] cargotel.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53719] Not a bug but a workaround to a server bug.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Jan 2010 14:22:11 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-FTPSSL [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Webb &lt;webb [...] cargotel.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Curtis,

Thanks for the quick response.  I&#39;m attaching all relevant files.  One thing
to note - I have to pass some less than normal commands within the session
to set up an upload.  That is because this is not an ftp server but a
mainframe connection tool that more or less supports the ftp protocol.

Also, I manually broke and truncated the screen grab.  It was looping and I
was going to run out of buffer.



On Fri, Jan 15, 2010 at 1:41 PM, Curtis Leach via RT &lt;
bug-Net-FTPSSL@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt;
&gt; Hi Ben,
&gt;
&gt; I&#39;m always looking for ways to improve this module.  And I prefer
&gt; contact via the bug report so that I can track problems to their
&gt; resolution.  Emails just tend to get lost if I can&#39;t deal with it
&gt; immediately.
&gt;
&gt; To bad you contacted me just after I released v0.14, so now this fix
&gt; will need to wait on v0.15, which may be a while.
&gt;
&gt; In the mean time, since I can&#39;t reproduce your problem, I&#39;d appreciate
&gt; if you could run a test for me and send back the log file so that I can
&gt; see the actual problem you encountered.  Since I have an idea for a more
&gt; elegant solution.
&gt;
&gt; There is a boolean function called supported&#40;&#41; in this class.  And I&#39;d
&gt; prefer to make the check dynamic instead of adding a new option that
&gt; someone needs to examine source code to figure out if they need to use
&gt; it or not.  The servers I have just ignore the ALLO command if it isn&#39;t
&gt; supported, which is why the code didn&#39;t test for success.  But if your
&gt; server connection is dying, I need to make a change.
&gt;
&gt; So I&#39;d appreciate it if you could run the following code for me without
&gt; using your new squash_allo option and return the allo_test.txt file for
&gt; analysis to me as well as what was printed to your screen.  Please
&gt; replace all &#34;...&#34; with appropriate values for your server.
&gt;
&gt; $ftp=Net::FTP-&gt;new&#40;....,Debug=&gt;1,DebugLogFile=&gt;&#34;allo_test.txt&#34;,Croak=&gt;1&#41;;
&gt; $ftp-&gt;login &#40;..., ...&#41;;
&gt; $h = $ftp-&gt;supported &#40;&#34;allo&#34;&#41;;
&gt; print &#34;*** ALLO Supported? &#34;, &#40;$h ? &#34;TRUE&#34; : &#34;FALSE&#34;&#41;, &#34;\n&#34;;
&gt; $ftp-&gt;put &#40;...&#41;;   # So I can see it fail.
&gt; $ftp-&gt;quit &#40;&#41;;
&gt;
&gt; Don&#39;t worry about the overhead of supported&#40;&#41;, it just runs the &#34;HELP&#34;
&gt; command the first time it&#39;s called.  Afterward each call to supported&#40;&#41;
&gt; references an internal hash of all the commands the server said it
&gt; supports.  So only your 1st call to put&#40;&#41; would result in an additional
&gt; server hit and each subsequent call would skip the server hit.
&gt;
&gt; Once I get your results, I&#39;ll decide on the best solution to take for
&gt; future development of this module.
&gt;
&gt; Thanks for your help.
&gt;
&gt; Curtis
&gt;
&gt; On Fri Jan 15 10:20:54 2010, webb@cargotel.com wrote:
<div class="message-stanza open">&gt; &gt; Curtis,
&gt; &gt;
&gt; &gt; I would have just emailed you directly but you have your email squashed
</div>&gt; on
<div class="message-stanza open">&gt; &gt; CPAN.  A server I&#39;m having to communicate with breaks if you send it
</div>&gt; an ALLO
<div class="message-stanza open">&gt; &gt; command, so I added an option to disable the allo.  My diff follows.  I
&gt; &gt; don&#39;t know if this is something you want to include or not, but for at
</div>&gt; least
<div class="message-stanza open">&gt; &gt; one person it was necessary.
&gt; &gt;
&gt; &gt; Thanks for providing a good module.
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt;
&gt;
</div>

-- 
Ben Webb
CargoTel
ph: 866-227-4683 x719
YIM: benrwebb
</div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;16:51:59&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks Ben for performing the test.  It gives me a lot to work with.

Looks like my supported&#40;&#41; solution will work for you by making the ALLO
conditional.  It did detect properly that ALLO wasn&#39;t supported.  So I
don&#39;t need a new option.  It can be done dynamically.

But your screen shot and log file suggests I might have a bug in my code
when the server unexpectedly closes the connection.  I didn&#39;t like the
stuff that was being written to your screen.  Or the fact that my code
was in a loop of sending &#34;ABOR&#34; commands to your server.  This strongly
suggests a runaway error routine on my part.  So I&#39;m going to have to
figure out why it&#39;s looping like that.

Would you mind downloading v0.14 and retrying the test?  I had improved
some error checking in that release.  It would be nice to confirm that
those fixes didn&#39;t help with this particular issue.

If you do this test, also add &#34;Trace=&gt;1&#34; as one of the options to new&#40;&#41;.
 It may cause additional info to be written to your screen.

Either way I may send you a beta next week if you are willing to help me
determine what&#39;s causing the loop.

Curtis
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;16:58:33&nbsp;2010</span>
    <span class="description">webb [...] cargotel.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53719] Not a bug but a workaround to a server bug.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Jan 2010 15:58:16 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-FTPSSL [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Webb &lt;webb [...] cargotel.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I will try to over the weekend.  I&#39;m in the uncomfortable spot of not owning
the server that is creating the problem &#40;otherwise I would have fixed the
server not to drop the connection on an allo... where is the error handling
here?&#41;

The supported&#40;&#41; test is a good idea, I was just in a hurry and needed it to
work.

Thanks again,

Ben

On Fri, Jan 15, 2010 at 3:52 PM, Curtis Leach via RT &lt;
bug-Net-FTPSSL@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt;
&gt; Thanks Ben for performing the test.  It gives me a lot to work with.
&gt;
&gt; Looks like my supported&#40;&#41; solution will work for you by making the ALLO
&gt; conditional.  It did detect properly that ALLO wasn&#39;t supported.  So I
&gt; don&#39;t need a new option.  It can be done dynamically.
&gt;
&gt; But your screen shot and log file suggests I might have a bug in my code
&gt; when the server unexpectedly closes the connection.  I didn&#39;t like the
&gt; stuff that was being written to your screen.  Or the fact that my code
&gt; was in a loop of sending &#34;ABOR&#34; commands to your server.  This strongly
&gt; suggests a runaway error routine on my part.  So I&#39;m going to have to
&gt; figure out why it&#39;s looping like that.
&gt;
&gt; Would you mind downloading v0.14 and retrying the test?  I had improved
&gt; some error checking in that release.  It would be nice to confirm that
&gt; those fixes didn&#39;t help with this particular issue.
&gt;
&gt; If you do this test, also add &#34;Trace=&gt;1&#34; as one of the options to new&#40;&#41;.
&gt;  It may cause additional info to be written to your screen.
&gt;
&gt; Either way I may send you a beta next week if you are willing to help me
&gt; determine what&#39;s causing the loop.
&gt;
&gt; Curtis
&gt;
&gt;
</div>

-- 
Ben Webb
CargoTel
ph: 866-227-4683 x719
YIM: benrwebb
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;18:31:25&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Ben,

There is no need to download it over the weekend.  I found the loop and
it&#39;s still in the v0.14 code base.  So I&#39;ll reach out to you again when
I have a beta for you to check out.

_croak_or_return&#40;&#41; calls _abort&#40;&#41;, which calls command&#40;&#41;, which calls
_croak_or_return&#40;&#41; again.  We are now caught in an infinite recursive
loop!  I think it only happens when Croak=&gt;1 is turned on.

I&#39;m also going to fix quot&#40;&#41; so that it&#39;s no longer restricted to what&#39;s
returned by HELP.  Since by your example it&#39;s obvious that some
unsupported FTP commands are not acknowledged to exist by the server. 
and it was for those extra misc commands like &#34;routing&#34; that this method
was created to handle in the 1st place.

Curtis

On Fri Jan 15 16:58:33 2010, webb@cargotel.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I will try to over the weekend.  I&#39;m in the uncomfortable spot of not
</div>owning
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the server that is creating the problem &#40;otherwise I would have fixed the
&gt; server not to drop the connection on an allo... where is the error
</div>handling
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; here?&#41;
&gt; 
&gt; The supported&#40;&#41; test is a good idea, I was just in a hurry and needed
</div>it to
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; work.
&gt; 
&gt; Thanks again,
&gt; 
&gt; Ben
&gt; 
&gt; On Fri, Jan 15, 2010 at 3:52 PM, Curtis Leach via RT &lt;
&gt; bug-Net-FTPSSL@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt; &gt;
&gt; &gt; Thanks Ben for performing the test.  It gives me a lot to work with.
&gt; &gt;
&gt; &gt; Looks like my supported&#40;&#41; solution will work for you by making the ALLO
&gt; &gt; conditional.  It did detect properly that ALLO wasn&#39;t supported.  So I
&gt; &gt; don&#39;t need a new option.  It can be done dynamically.
&gt; &gt;
&gt; &gt; But your screen shot and log file suggests I might have a bug in my code
&gt; &gt; when the server unexpectedly closes the connection.  I didn&#39;t like the
&gt; &gt; stuff that was being written to your screen.  Or the fact that my code
&gt; &gt; was in a loop of sending &#34;ABOR&#34; commands to your server.  This strongly
&gt; &gt; suggests a runaway error routine on my part.  So I&#39;m going to have to
&gt; &gt; figure out why it&#39;s looping like that.
&gt; &gt;
&gt; &gt; Would you mind downloading v0.14 and retrying the test?  I had improved
&gt; &gt; some error checking in that release.  It would be nice to confirm that
&gt; &gt; those fixes didn&#39;t help with this particular issue.
&gt; &gt;
&gt; &gt; If you do this test, also add &#34;Trace=&gt;1&#34; as one of the options to new&#40;&#41;.
&gt; &gt;  It may cause additional info to be written to your screen.
&gt; &gt;
&gt; &gt; Either way I may send you a beta next week if you are willing to help me
&gt; &gt; determine what&#39;s causing the loop.
&gt; &gt;
&gt; &gt; Curtis
&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;18:33:02&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Broken in 0.12 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;18&nbsp;10:19:24&nbsp;2010</span>
    <span class="description">webb [...] cargotel.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53719] Not a bug but a workaround to a server bug.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 18 Jan 2010 09:18:02 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-FTPSSL [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Webb &lt;webb [...] cargotel.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Replies inline...

On Fri, Jan 15, 2010 at 5:31 PM, Curtis Leach via RT &lt;
bug-Net-FTPSSL@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt;
&gt; Hi Ben,
&gt;
&gt; There is no need to download it over the weekend.  I found the loop and
&gt; it&#39;s still in the v0.14 code base.  So I&#39;ll reach out to you again when
&gt; I have a beta for you to check out.
&gt;
</div>
Sounds great, thanks.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; _croak_or_return&#40;&#41; calls _abort&#40;&#41;, which calls command&#40;&#41;, which calls
&gt; _croak_or_return&#40;&#41; again.  We are now caught in an infinite recursive
&gt; loop!  I think it only happens when Croak=&gt;1 is turned on.
&gt;
&gt;
</div>That may be true.  When I first encountered the error I had Croak off, Debug
set to 2 and trace turned on.  I didn&#39;t get the screen output I saw when I
ran the test for you, just a long timeout and an eventual fail.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m also going to fix quot&#40;&#41; so that it&#39;s no longer restricted to what&#39;s
&gt; returned by HELP.  Since by your example it&#39;s obvious that some
&gt; unsupported FTP commands are not acknowledged to exist by the server.
&gt; and it was for those extra misc commands like &#34;routing&#34; that this method
&gt; was created to handle in the 1st place.
&gt;
&gt;
</div>Oddly enough I didn&#39;t experience a problem sending a non help listed command
with quot, but what I found was that quot automatically uc&#39;s the command and
for whatever reason that breaks the server.  it has to be lower case.  At
the time I was trying to get it up and running without modifying any of the
library code so that lead me to just use command rather than change the way
quot works.


Thanks again for your help,

Ben



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Curtis
&gt;
&gt; On Fri Jan 15 16:58:33 2010, webb@cargotel.com wrote:
<div class="message-stanza open">&gt; &gt; I will try to over the weekend.  I&#39;m in the uncomfortable spot of not
</div>&gt; owning
<div class="message-stanza open">&gt; &gt; the server that is creating the problem &#40;otherwise I would have fixed the
&gt; &gt; server not to drop the connection on an allo... where is the error
</div>&gt; handling
<div class="message-stanza open">&gt; &gt; here?&#41;
&gt; &gt;
&gt; &gt; The supported&#40;&#41; test is a good idea, I was just in a hurry and needed
</div>&gt; it to
<div class="message-stanza open">&gt; &gt; work.
&gt; &gt;
&gt; &gt; Thanks again,
&gt; &gt;
&gt; &gt; Ben
&gt; &gt;
&gt; &gt; On Fri, Jan 15, 2010 at 3:52 PM, Curtis Leach via RT &lt;
&gt; &gt; bug-Net-FTPSSL@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks Ben for performing the test.  It gives me a lot to work with.
&gt; &gt; &gt;
&gt; &gt; &gt; Looks like my supported&#40;&#41; solution will work for you by making the ALLO
&gt; &gt; &gt; conditional.  It did detect properly that ALLO wasn&#39;t supported.  So I
&gt; &gt; &gt; don&#39;t need a new option.  It can be done dynamically.
&gt; &gt; &gt;
&gt; &gt; &gt; But your screen shot and log file suggests I might have a bug in my
</div></div>&gt; code
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; when the server unexpectedly closes the connection.  I didn&#39;t like the
&gt; &gt; &gt; stuff that was being written to your screen.  Or the fact that my code
&gt; &gt; &gt; was in a loop of sending &#34;ABOR&#34; commands to your server.  This strongly
&gt; &gt; &gt; suggests a runaway error routine on my part.  So I&#39;m going to have to
&gt; &gt; &gt; figure out why it&#39;s looping like that.
&gt; &gt; &gt;
&gt; &gt; &gt; Would you mind downloading v0.14 and retrying the test?  I had improved
&gt; &gt; &gt; some error checking in that release.  It would be nice to confirm that
&gt; &gt; &gt; those fixes didn&#39;t help with this particular issue.
&gt; &gt; &gt;
&gt; &gt; &gt; If you do this test, also add &#34;Trace=&gt;1&#34; as one of the options to
</div></div>&gt; new&#40;&#41;.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;  It may cause additional info to be written to your screen.
&gt; &gt; &gt;
&gt; &gt; &gt; Either way I may send you a beta next week if you are willing to help
</div></div>&gt; me
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; determine what&#39;s causing the loop.
&gt; &gt; &gt;
&gt; &gt; &gt; Curtis
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt;
&gt;
</div>

-- 
Ben Webb
CargoTel
ph: 866-227-4683 x719
YIM: benrwebb
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;19&nbsp;22:46:01&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ben,

I sent you an email a couple of weeks ago asking if you&#39;d like to beta 
test my fix for you.  Could you please let me know if you will be 
interested in testing it out or not? I&#39;ll be glad to resend to your 
personal email address again if this is so.

If I don&#39;t hear from you by the end of the week I&#39;m going to post my 
fixes as is as v0.15, even though I couldn&#39;t reproduce your problems 
locally.

Curtis

On Mon Jan 18 10:19:24 2010, webb@cargotel.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Replies inline...
&gt; 
&gt; On Fri, Jan 15, 2010 at 5:31 PM, Curtis Leach via RT &lt;
&gt; bug-Net-FTPSSL@rt.cpan.org&gt; wrote:
&gt; 
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt; &gt;
&gt; &gt; Hi Ben,
&gt; &gt;
&gt; &gt; There is no need to download it over the weekend.  I found the loop
</div>&gt; and
<div class="message-stanza open">&gt; &gt; it&#39;s still in the v0.14 code base.  So I&#39;ll reach out to you again
</div>&gt; when
<div class="message-stanza open">&gt; &gt; I have a beta for you to check out.
&gt; &gt;
</div>&gt; 
&gt; Sounds great, thanks.
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt; _croak_or_return&#40;&#41; calls _abort&#40;&#41;, which calls command&#40;&#41;, which
</div>&gt; calls
<div class="message-stanza open">&gt; &gt; _croak_or_return&#40;&#41; again.  We are now caught in an infinite
</div>&gt; recursive
<div class="message-stanza open">&gt; &gt; loop!  I think it only happens when Croak=&gt;1 is turned on.
&gt; &gt;
&gt; &gt;
</div>&gt; That may be true.  When I first encountered the error I had Croak 
</div>off,
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Debug
&gt; set to 2 and trace turned on.  I didn&#39;t get the screen output I saw
&gt; when I
&gt; ran the test for you, just a long timeout and an eventual fail.
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; I&#39;m also going to fix quot&#40;&#41; so that it&#39;s no longer restricted to
</div>&gt; what&#39;s
<div class="message-stanza open">&gt; &gt; returned by HELP.  Since by your example it&#39;s obvious that some
&gt; &gt; unsupported FTP commands are not acknowledged to exist by the
</div>&gt; server.
<div class="message-stanza open">&gt; &gt; and it was for those extra misc commands like &#34;routing&#34; that this
</div>&gt; method
<div class="message-stanza open">&gt; &gt; was created to handle in the 1st place.
&gt; &gt;
&gt; &gt;
</div>&gt; Oddly enough I didn&#39;t experience a problem sending a non help listed
&gt; command
&gt; with quot, but what I found was that quot automatically uc&#39;s the
&gt; command and
&gt; for whatever reason that breaks the server.  it has to be lower case.
&gt; At
&gt; the time I was trying to get it up and running without modifying any
&gt; of the
&gt; library code so that lead me to just use command rather than change
&gt; the way
&gt; quot works.
&gt; 
&gt; 
&gt; Thanks again for your help,
&gt; 
&gt; Ben
&gt; 
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; Curtis
&gt; &gt;
&gt; &gt; On Fri Jan 15 16:58:33 2010, webb@cargotel.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; I will try to over the weekend.  I&#39;m in the uncomfortable spot of
</div></div>&gt; not
<div class="message-stanza open">&gt; &gt; owning
<div class="message-stanza open">&gt; &gt; &gt; the server that is creating the problem &#40;otherwise I would have
</div></div>&gt; fixed the
<div class="message-stanza open">&gt; &gt; &gt; server not to drop the connection on an allo... where is the 
</div></div>error
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; handling
<div class="message-stanza open">&gt; &gt; &gt; here?&#41;
&gt; &gt; &gt;
&gt; &gt; &gt; The supported&#40;&#41; test is a good idea, I was just in a hurry and
</div></div>&gt; needed
<div class="message-stanza open">&gt; &gt; it to
<div class="message-stanza open">&gt; &gt; &gt; work.
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks again,
&gt; &gt; &gt;
&gt; &gt; &gt; Ben
&gt; &gt; &gt;
&gt; &gt; &gt; On Fri, Jan 15, 2010 at 3:52 PM, Curtis Leach via RT &lt;
&gt; &gt; &gt; bug-Net-FTPSSL@rt.cpan.org&gt; wrote:
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Thanks Ben for performing the test.  It gives me a lot to work
</div></div></div>&gt; with.
<div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Looks like my supported&#40;&#41; solution will work for you by making
</div>&gt; the ALLO
<div class="message-stanza open">&gt; &gt; &gt; &gt; conditional.  It did detect properly that ALLO wasn&#39;t 
</div></div>supported.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So I
<div class="message-stanza open">&gt; &gt; &gt; &gt; don&#39;t need a new option.  It can be done dynamically.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; But your screen shot and log file suggests I might have a bug 
</div></div>in
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; my
<div class="message-stanza open">&gt; &gt; code
<div class="message-stanza open">&gt; &gt; &gt; &gt; when the server unexpectedly closes the connection.  I didn&#39;t
</div></div>&gt; like the
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; stuff that was being written to your screen.  Or the fact that
</div></div>&gt; my code
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; was in a loop of sending &#34;ABOR&#34; commands to your server.  This
</div></div>&gt; strongly
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; suggests a runaway error routine on my part.  So I&#39;m going to
</div></div>&gt; have to
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; figure out why it&#39;s looping like that.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Would you mind downloading v0.14 and retrying the test?  I had
</div></div>&gt; improved
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; some error checking in that release.  It would be nice to
</div></div>&gt; confirm that
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; those fixes didn&#39;t help with this particular issue.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; If you do this test, also add &#34;Trace=&gt;1&#34; as one of the options
</div></div>&gt; to
<div class="message-stanza open">&gt; &gt; new&#40;&#41;.
<div class="message-stanza open">&gt; &gt; &gt; &gt;  It may cause additional info to be written to your screen.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Either way I may send you a beta next week if you are willing 
</div></div></div>to
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; help
<div class="message-stanza open">&gt; &gt; me
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; determine what&#39;s causing the loop.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Curtis
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt;
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;19&nbsp;23:46:58&nbsp;2010</span>
    <span class="description">webb [...] cargotel.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53719] Not a bug but a workaround to a server bug.</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 19 Apr 2010 22:46:41 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-FTPSSL [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Webb &lt;webb [...] cargotel.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Curtis,

Sorry, I must have missed the email the first time around.  I&#39;ll try to get
it tested for you this week.

Thanks for your help.

Ben

On Mon, Apr 19, 2010 at 9:46 PM, Curtis Leach via RT &lt;
bug-Net-FTPSSL@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt;
&gt; Ben,
&gt;
&gt; I sent you an email a couple of weeks ago asking if you&#39;d like to beta
&gt; test my fix for you.  Could you please let me know if you will be
&gt; interested in testing it out or not? I&#39;ll be glad to resend to your
&gt; personal email address again if this is so.
&gt;
&gt; If I don&#39;t hear from you by the end of the week I&#39;m going to post my
&gt; fixes as is as v0.15, even though I couldn&#39;t reproduce your problems
&gt; locally.
&gt;
&gt; Curtis
&gt;
&gt; On Mon Jan 18 10:19:24 2010, webb@cargotel.com wrote:
<div class="message-stanza open">&gt; &gt; Replies inline...
&gt; &gt;
&gt; &gt; On Fri, Jan 15, 2010 at 5:31 PM, Curtis Leach via RT &lt;
&gt; &gt; bug-Net-FTPSSL@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Hi Ben,
&gt; &gt; &gt;
&gt; &gt; &gt; There is no need to download it over the weekend.  I found the loop
</div>&gt; &gt; and
<div class="message-stanza open">&gt; &gt; &gt; it&#39;s still in the v0.14 code base.  So I&#39;ll reach out to you again
</div>&gt; &gt; when
<div class="message-stanza open">&gt; &gt; &gt; I have a beta for you to check out.
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; Sounds great, thanks.
&gt; &gt;
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; _croak_or_return&#40;&#41; calls _abort&#40;&#41;, which calls command&#40;&#41;, which
</div>&gt; &gt; calls
<div class="message-stanza open">&gt; &gt; &gt; _croak_or_return&#40;&#41; again.  We are now caught in an infinite
</div>&gt; &gt; recursive
<div class="message-stanza open">&gt; &gt; &gt; loop!  I think it only happens when Croak=&gt;1 is turned on.
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt; That may be true.  When I first encountered the error I had Croak
</div>&gt; off,
<div class="message-stanza open">&gt; &gt; Debug
&gt; &gt; set to 2 and trace turned on.  I didn&#39;t get the screen output I saw
&gt; &gt; when I
&gt; &gt; ran the test for you, just a long timeout and an eventual fail.
&gt; &gt;
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; I&#39;m also going to fix quot&#40;&#41; so that it&#39;s no longer restricted to
</div>&gt; &gt; what&#39;s
<div class="message-stanza open">&gt; &gt; &gt; returned by HELP.  Since by your example it&#39;s obvious that some
&gt; &gt; &gt; unsupported FTP commands are not acknowledged to exist by the
</div>&gt; &gt; server.
<div class="message-stanza open">&gt; &gt; &gt; and it was for those extra misc commands like &#34;routing&#34; that this
</div>&gt; &gt; method
<div class="message-stanza open">&gt; &gt; &gt; was created to handle in the 1st place.
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt; Oddly enough I didn&#39;t experience a problem sending a non help listed
&gt; &gt; command
&gt; &gt; with quot, but what I found was that quot automatically uc&#39;s the
&gt; &gt; command and
&gt; &gt; for whatever reason that breaks the server.  it has to be lower case.
&gt; &gt; At
&gt; &gt; the time I was trying to get it up and running without modifying any
&gt; &gt; of the
&gt; &gt; library code so that lead me to just use command rather than change
&gt; &gt; the way
&gt; &gt; quot works.
&gt; &gt;
&gt; &gt;
&gt; &gt; Thanks again for your help,
&gt; &gt;
&gt; &gt; Ben
&gt; &gt;
&gt; &gt;
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; Curtis
&gt; &gt; &gt;
&gt; &gt; &gt; On Fri Jan 15 16:58:33 2010, webb@cargotel.com wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; I will try to over the weekend.  I&#39;m in the uncomfortable spot of
</div></div>&gt; &gt; not
<div class="message-stanza open">&gt; &gt; &gt; owning
<div class="message-stanza open">&gt; &gt; &gt; &gt; the server that is creating the problem &#40;otherwise I would have
</div></div>&gt; &gt; fixed the
<div class="message-stanza open">&gt; &gt; &gt; &gt; server not to drop the connection on an allo... where is the
</div></div>&gt; error
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; handling
<div class="message-stanza open">&gt; &gt; &gt; &gt; here?&#41;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; The supported&#40;&#41; test is a good idea, I was just in a hurry and
</div></div>&gt; &gt; needed
<div class="message-stanza open">&gt; &gt; &gt; it to
<div class="message-stanza open">&gt; &gt; &gt; &gt; work.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Thanks again,
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Ben
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On Fri, Jan 15, 2010 at 3:52 PM, Curtis Leach via RT &lt;
&gt; &gt; &gt; &gt; bug-Net-FTPSSL@rt.cpan.org&gt; wrote:
&gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53719">https://rt.cpan.org/Ticket/Display.html?id=53719</a></span> &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Thanks Ben for performing the test.  It gives me a lot to work
</div></div></div>&gt; &gt; with.
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Looks like my supported&#40;&#41; solution will work for you by making
</div>&gt; &gt; the ALLO
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; conditional.  It did detect properly that ALLO wasn&#39;t
</div></div>&gt; supported.
<div class="message-stanza open">&gt; &gt; So I
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; don&#39;t need a new option.  It can be done dynamically.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; But your screen shot and log file suggests I might have a bug
</div></div>&gt; in
<div class="message-stanza open">&gt; &gt; my
<div class="message-stanza open">&gt; &gt; &gt; code
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; when the server unexpectedly closes the connection.  I didn&#39;t
</div></div>&gt; &gt; like the
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; stuff that was being written to your screen.  Or the fact that
</div></div>&gt; &gt; my code
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; was in a loop of sending &#34;ABOR&#34; commands to your server.  This
</div></div>&gt; &gt; strongly
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; suggests a runaway error routine on my part.  So I&#39;m going to
</div></div>&gt; &gt; have to
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; figure out why it&#39;s looping like that.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Would you mind downloading v0.14 and retrying the test?  I had
</div></div>&gt; &gt; improved
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; some error checking in that release.  It would be nice to
</div></div>&gt; &gt; confirm that
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; those fixes didn&#39;t help with this particular issue.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; If you do this test, also add &#34;Trace=&gt;1&#34; as one of the options
</div></div>&gt; &gt; to
<div class="message-stanza open">&gt; &gt; &gt; new&#40;&#41;.
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;  It may cause additional info to be written to your screen.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Either way I may send you a beta next week if you are willing
</div></div></div>&gt; to
<div class="message-stanza open">&gt; &gt; help
<div class="message-stanza open">&gt; &gt; &gt; me
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; determine what&#39;s causing the loop.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Curtis
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
&gt;
&gt;
</div>

-- 
Ben Webb
CargoTel
ph: 866-227-4683 x719
YIM: benrwebb
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;27&nbsp;12:24:47&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ben,

Thanks for your evaluation of the previous patch last week.  Glad it 
fixed your problem.  But sorry to hear that the error case continues 
to loop.

Attached is a new patch to v0.15 so that you can test if the infinite 
loop problems on error have now been fixed.  Can you please do this 
test with &#40;Croak =&gt; 1, Debug =&gt;1, DebugLogFile =&gt; &#34;ftps_log.txt&#34;&#41; to 
hit the error condition.

I&#39;d like the log file generated and anything written to your screen 
returned to me for evaluation.  Hopefully this will be the last patch 
needed to fix this problem.

Also don&#39;t forget to make that change to &#34;sub alloc&#34; where supported 
references &#34;HELP&#34; instead of &#34;ALLO&#34;.  So that we can trap the error 
I&#39;m attempting to fix.

Thanks for your help.

Curtis

On Mon Apr 19 23:46:58 2010, webb@cargotel.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Curtis,
&gt; 
&gt; Sorry, I must have missed the email the first time around.  I&#39;ll try 
</div>to get
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; it tested for you this week.
&gt; 
&gt; Thanks for your help.
&gt; 
&gt; Ben
&gt; 
</div></div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> FTPSSL.pm</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;18&nbsp;18:55:30&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;May&nbsp;18&nbsp;18:55:31&nbsp;2010</span>
    <span class="description">CLEACH [...] cpan.org -  Fixed in 0.15 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
