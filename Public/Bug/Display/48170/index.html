<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #48170 for Regexp-Grammars: hash tests fail</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #48170 for Regexp-Grammars: hash tests fail</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Regexp-Grammars/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Regexp-Grammars/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Regexp-Grammars/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Regexp-Grammars/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Regexp-Grammars">Regexp-Grammars CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">48170</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Regexp-Grammars/Active/">Regexp-Grammars</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mschwern [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
jpeacock [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-228600-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.001004    </td>
  </tr>
  <tr id="CF-228601-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




hash.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/641458/327844/hash.t">
Wed Jul 29 11:05:39 2009 (1.4k) by damian [...] conway.org
</a>
</font></li>
</ul>


perlV.out<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/638601/325699/perlV.out">
Sun Jul 26 02:08:50 2009 (2.9k) by schwern [...] pobox.com
</a>
</font></li>
</ul>


test.out<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/638601/325700/test.out">
Sun Jul 26 02:08:50 2009 (2.2k) by schwern [...] pobox.com
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/637880/325299/test.out">
Fri Jul 24 15:06:16 2009 (2.7k) by mschwern [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;24&nbsp;15:06:16&nbsp;2009</span>
    <span class="description">mschwern [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> hash tests fail</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Both the hash tests failed on my machine &#40;OS X 10.5.7 with a source
compiled 5.10.0&#41;.  Attached is the verbose output of those tests.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test.out</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/637880/325299/test.out">Download test.out</a><br />
<span class="downloadcontenttype">application/octet-stream 2.7k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;25&nbsp;21:44:23&nbsp;2009</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 25 Jul 2009 18:43:44 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Both the hash tests failed on my machine &#40;OS X 10.5.7 with a source
&gt; compiled 5.10.0&#41;. Attached is the verbose output of those tests.
</div>
I cannot replicate this on the same system and version of Perl. Can you
give me a perl -V so I can compare the Perl versions more closely.

More importantly, the error messages don&#39;t make sense. There&#39;s nothing
in the test&#39;s code that would undefine the value of $first_only.
That&#39;s the root cause here, because the corresponding match then fails
and the eq comparison in the test is to the result of the previous
successful match.

Can you rerun the following variation on hash.t so we can track down the
mysterious undefiner?

Thanks,

Damian

-----cut----------cut----------cut----------cut----------cut-----

use 5.010;
use warnings;

use Test::More &#39;no_plan&#39;;

my %hash = &#40;
    do   =&gt; &#39;a deer&#39;,
    re   =&gt; &#39;a drop of golden sun&#39;,
    dore =&gt; &#39;a portal&#39;,
    me   =&gt; &#39;a name I call myself&#39;,
    fa   =&gt; &#39;a long long way to run&#39;,
&#41;;

my $other = 1;   # Needed to counteract bug in scoping &#40;?&#41;

my $listified = do {
    use Regexp::Grammars;
    qr{ &lt;[WORD=%hash]&gt;+ }xms;
};

my $first_only = do {
    use Regexp::Grammars;
    qr{ &lt;WORD=%hash&gt; }xms;
};
warn defined $first_only;

my $no_cap = do {
    use Regexp::Grammars;
    qr{ &lt;%hash&gt;+ }xms;
};
warn defined $first_only;

while &#40;my $line = &lt;DATA&gt;&#41; {
warn defined $first_only;
    my &#40;$input, $expected&#41; = split /\s+/, $line;

warn defined $first_only;
    if &#40;$input =~ $listified&#41; {
        is_deeply $/{WORD}, eval&#40;$expected&#41;, &#34;list:   $input&#34;;
    }
    else { is &#39;FAIL&#39;, $expected, &#34;list:   $input&#34;; }

warn defined $first_only;
    if &#40;$input =~ $first_only&#41; {
        is $/{WORD}, eval&#40;$expected&#41;-&gt;[0], &#34;scalar: $input&#34;;
    }
    else { is &#39;FAIL&#39;, $expected, &#34;scalar: $input&#34;; }

    if &#40;$input =~ $no_cap&#41; { isnt &#39;FAIL&#39;, $expected, &#34;no-cap:  $input&#34;; }
    else                   {   is &#39;FAIL&#39;, $expected, &#34;no-cap:  $input&#34;; }

}

__DATA__
dorefameredo    [&#39;dore&#39;,&#39;fa&#39;,&#39;me&#39;,&#39;re&#39;,&#39;do&#39;]
dorefamell      [&#39;dore&#39;,&#39;fa&#39;,&#39;me&#39;]
zzzzz           FAIL
zzzdoremezzz    [&#39;dore&#39;,&#39;me&#39;]
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;25&nbsp;21:44:23&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;02:08:50&nbsp;2009</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 25 Jul 2009 23:08:27 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">damian@conway.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=48170">http://rt.cpan.org/Ticket/Display.html?id=48170</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt;&gt; Both the hash tests failed on my machine &#40;OS X 10.5.7 with a source
&gt;&gt; compiled 5.10.0&#41;. Attached is the verbose output of those tests.
</div>&gt; 
&gt; I cannot replicate this on the same system and version of Perl. Can you
&gt; give me a perl -V so I can compare the Perl versions more closely.
</div>
Attached as perlV

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; More importantly, the error messages don&#39;t make sense. There&#39;s nothing
&gt; in the test&#39;s code that would undefine the value of $first_only.
&gt; That&#39;s the root cause here, because the corresponding match then fails
&gt; and the eq comparison in the test is to the result of the previous
&gt; successful match.
&gt; 
&gt; Can you rerun the following variation on hash.t so we can track down the
&gt; mysterious undefiner?
</div>
Attached as test.out


-- 
184. When operating a military vehicle I may *not* attempt something
     &#34;I saw in a cartoon&#34;.
    -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
           <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/638601/325699/perlV.out">Download perlV.out</a><br />
<span class="downloadcontenttype">application/octet-stream 2.9k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/638601/325700/test.out">Download test.out</a><br />
<span class="downloadcontenttype">application/octet-stream 2.2k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;27&nbsp;14:19:01&nbsp;2009</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Jul 2009 14:18:23 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Can you
&gt;&gt; give me a perl -V so I can compare the Perl versions more closely.
</div>&gt;
&gt; Attached as perlV
&gt;
<div class="message-stanza open">&gt;&gt; Can you rerun the following variation on hash.t so we can track down the
&gt;&gt; mysterious undefiner?
</div>&gt;
&gt; Attached as test.out
</div>
Many thanks. According to the test the matching of a completely unrelated regex
is causing a second regex to become undef. Sounds like a problem in Perl itself
to me.

The only obvious differences between our set-ups is that you have

    PERL_IMPLICIT_CONTEXT
    USE_ITHREADS
    USE_REENTRANT_API

set whereas I don&#39;t.

So I&#39;m theorizing maybe a thread-related issue?

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;12:58:49&nbsp;2009</span>
    <span class="description">jpeacock [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 27 14:19:01 2009, damian@conway.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The only obvious differences between our set-ups is that you have
&gt; 
&gt;     PERL_IMPLICIT_CONTEXT
&gt;     USE_ITHREADS
&gt;     USE_REENTRANT_API
</div>
FWIW, I have precisely the same test failures as schwern, but on RHEL5.2
with a custom-built Perl at $WORK.  Indeed, I also have the same
compile-time flags as he does, with the addition of USE_64_BIT_ALL and
USE_64_BIT_INT &#40;not that those should make any difference&#41;...

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;12:59:26&nbsp;2009</span>
    <span class="description">jpeacock [...] cpan.org -  Cc JPEACOCK added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;13:25:55&nbsp;2009</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jul 2009 10:25:32 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">damian@conway.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=48170">http://rt.cpan.org/Ticket/Display.html?id=48170</a></span> &gt;
&gt; 
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; Can you
&gt;&gt;&gt; give me a perl -V so I can compare the Perl versions more closely.
</div>&gt;&gt; Attached as perlV
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; Can you rerun the following variation on hash.t so we can track down the
&gt;&gt;&gt; mysterious undefiner?
</div>&gt;&gt; Attached as test.out
</div>&gt; 
&gt; Many thanks. According to the test the matching of a completely unrelated regex
&gt; is causing a second regex to become undef. Sounds like a problem in Perl itself
&gt; to me.
&gt; 
&gt; The only obvious differences between our set-ups is that you have
&gt; 
&gt;     PERL_IMPLICIT_CONTEXT
&gt;     USE_ITHREADS
&gt;     USE_REENTRANT_API
&gt; 
&gt; set whereas I don&#39;t.
&gt; 
&gt; So I&#39;m theorizing maybe a thread-related issue?
</div>
Sounds like a bug introduced by compiling in threads, yeah.  5.10.1RC0 still
has it.  That&#39;s going to eliminate a lot of perls. :&#40;


-- 
60. &#34;The Giant Space Ants&#34; are not at the top of my chain of command.
    -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
           <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;14:09:21&nbsp;2009</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> mschwern [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jul 2009 14:09:03 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sounds like a bug introduced by compiling in threads, yeah.  5.10.1RC0 still
&gt; has it.  That&#39;s going to eliminate a lot of perls. :&#40;
</div>
Is it possible that this is at all related to the recent p5p discussion 
regarding &#34;Regex inside regex&#34;?

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2009-07/msg01095.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2009-07/msg01095.html</a></span>

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;17:16:32&nbsp;2009</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jul 2009 17:15:54 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Michael G Schwern via RT &lt;bug-Regexp-Grammars@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sounds like a bug introduced by compiling in threads, yeah.  5.10.1RC0 still
&gt; has it.  That&#39;s going to eliminate a lot of perls. :&#40;
</div>
Hmmmm. That&#39;s most frustrating. Particularly because it&#39;s utterly
outside my control.
The module doesn&#39;t use threading, so it shouldn&#39;t be affected by threading.
Not sure how to proceed. :-&#40;

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;17:18:15&nbsp;2009</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Jul 2009 17:17:37 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">John Peacock via RT &lt;bug-Regexp-Grammars@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is it possible that this is at all related to the recent p5p discussion
&gt; regarding &#34;Regex inside regex&#34;?
</div>
I&#39;ll have to check again, but I was trying to be exceptionally careful
*not* to use
regexes inside the generated regexes. For precisely that reason. Maybe I missed
one. I&#39;ll investigate that possibility when I get a change.

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;11:05:38&nbsp;2009</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jul 2009 15:57:11 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I finally managed to reproduce a similar error on my unthreaded version of 5.10.
So could I get you both to try this version of the hash test?

And then repeat the trials, removing one of the $other variables each time?

If the behaviour changes as I expect then we&#39;re in deep trouble &#40;as you&#39;ll see&#41;.

Thanks,

Damian
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;11:35:51&nbsp;2009</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> mschwern [...] cpan.org, jpeacock [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jul 2009 11:35:29 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">damian@conway.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=48170">https://rt.cpan.org/Ticket/Display.html?id=48170</a></span> &gt;
&gt; 
&gt; I finally managed to reproduce a similar error on my unthreaded version of 5.10.
&gt; So could I get you both to try this version of the hash test?
&gt; 
&gt; And then repeat the trials, removing one of the $other variables each time?
&gt; 
&gt; If the behaviour changes as I expect then we&#39;re in deep trouble &#40;as you&#39;ll see&#41;.
</div>
Seems _very_ sensitive.  The first time I tried it I could get passes 
with all &#40;obviously&#41; and with both #3 and #4 commented out.  Now when I 
try it I can only get passes with any single $other variable commented 
out.  This is very bad.

Since you managed to reproduce locally, you seem to have a better idea 
of what is getting stomped on.  Do you think you can conceive of a test 
that doesn&#39;t rely on Regexp::Grammars that we can send to p5p so we can 
get the groupmind working on it?  I&#39;m not sure this needs to block 
5.10.1, but it would be good to document this failure mode &#40;since it 
seems to be fairly deep magic that is going wildly off target&#41;...

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;11:45:25&nbsp;2009</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> mschwern [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jul 2009 11:45:04 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">John Peacock via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Seems _very_ sensitive.  The first time I tried it I could get passes 
&gt; with all &#40;obviously&#41; and with both #3 and #4 commented out.  Now when I 
&gt; try it I can only get passes with any single $other variable commented 
&gt; out.  This is very bad.
</div>
Interesting to note that if I move the $other assignments to between the 
block for $listified and $first_only, then I only need two $other&#39;s and 
not three.  And if I move them to between $first_only and $no_cap, then 
I only need a single $other assignment.  I don&#39;t know whether this is 
significant...

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;13:07:29&nbsp;2009</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jul 2009 18:06:50 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">John Peacock via RT &lt;bug-Regexp-Grammars@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Do you think you can conceive of a test that doesn&#39;t rely on
&gt; Regexp::Grammars that we can send to p5p so we can get the groupmind
&gt; working on it?
</div>
It turns out not to rely on Regexp::Grammars at all. Here&#39;s a minimal example.

-----cut----------cut----------cut----------cut----------cut-----

    use 5.010;

    my $rx = qr{ &#40;?{ @arr = [1]; $arr[-1][0] = 0; my $var; }&#41; }x;

    my $line = &#34;&#34;;
    $line =~ $rx;

    say &#39;fail&#39; if !defined $line;

-----cut----------cut----------cut----------cut----------cut-----

It seems to be a &#34;carnage-à-trois&#34; between regexes, lexicals, and
autovivification.
Because if you remove either of the final two statements in the &#40;?{...}&#41; block,
then it stops killing $line. %-&#41;

That may suggest a workaround for Regexp::Grammars: namely, eschewing
lexicals in its magically inserted code blocks. I&#39;m exploring that now.

Interestingly, injecting one *extra* lexical declaration anywhere in the
code &#40;outside the &#40;?{...}&#41; that is&#41; has no effect. But injecting *two*
lexicals anywhere in the code also stops the match from undefinng $line.

Whereas injecting a second lexical inside the &#40;?{...}&#41; is giving me a
bus error. :-&#40;

John, if you&#39;d be willing to submit this conundrum to p5p, I&#39;d be
extremely grateful. &#40;I&#39;m in full conference travel mode at the moment,
so I wouldn&#39;t be able to shepherd this through the groupminding for at
least a month&#41;.

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;13:14:59&nbsp;2009</span>
    <span class="description">john.peacock [...] havurah-software.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> mschwern [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jul 2009 13:14:38 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;john.peacock [...] havurah-software.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">damian@conway.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It turns out not to rely on Regexp::Grammars at all. Here&#39;s a minimal example.
&gt; 
&gt; -----cut----------cut----------cut----------cut----------cut-----
&gt; 
&gt;     use 5.010;
&gt; 
&gt;     my $rx = qr{ &#40;?{ @arr = [1]; $arr[-1][0] = 0; my $var; }&#41; }x;
&gt; 
&gt;     my $line = &#34;&#34;;
&gt;     $line =~ $rx;
&gt; 
&gt;     say &#39;fail&#39; if !defined $line;
&gt; 
&gt; -----cut----------cut----------cut----------cut----------cut-----
</div>
Nice.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; John, if you&#39;d be willing to submit this conundrum to p5p, I&#39;d be
&gt; extremely grateful. &#40;I&#39;m in full conference travel mode at the moment,
&gt; so I wouldn&#39;t be able to shepherd this through the groupminding for at
&gt; least a month&#41;.
</div>
Not a problem at all.  I&#39;ll write this up and send it out tonight &#40;I 
have 9 million other things going on right this minute at $WORK, so it 
isn&#39;t a good time for that&#41;...

John
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;13:37:08&nbsp;2009</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48170] hash tests fail</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jul 2009 18:36:26 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Regexp-Grammars [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Not a problem at all.  I&#39;ll write this up and send it out tonight &#40;I
&gt; have 9 million other things going on right this minute at $WORK, so it
&gt; isn&#39;t a good time for that&#41;...
</div>
Deeply appreciated, John.

Meanwhile, I&#39;ll see if I can&#39;t kludge around the lexicals in Regexp::Grammars.

Damian
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
