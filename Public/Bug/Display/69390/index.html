<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #69390 for Pod-Simple: [PATCH] POD string in variables not handled properly</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #69390 for Pod-Simple: [PATCH] POD string in variables not handled properly</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Pod-Simple">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Pod-Simple">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Pod-Simple">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Pod-Simple">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/perl-pod/pod-simple/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Pod-Simple">Pod-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">69390</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Pod-Simple">Pod-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
florent.angly [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-26176-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.16    </td>
  </tr>
  <tr id="CF-26177-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




tricky.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/954402/496435/tricky.pl">
Sun Jul 10 19:28:51 2011 (353b) by florent.angly [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=69390">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-954402" href="/Public/Bug/Display.html?id=69390#txn-954402">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;10&nbsp;19:28:51&nbsp;2011</span>
    <span class="description">florent.angly [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> POD string in variables not handled properly</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/954402/496434/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/496434">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 825b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have been trying to parse Perl files that contain POD with
Pod::Simple. I have noticed that Pod::Simple fails to properly handle
certain cases. If the Perl file contains a variable whose content is
POD-formatted, then this POD will be extracted by Pod::Simple although
it should not be extracted since it is not a POD section but the content
of a variable.

I attached a test file containing POD to reproduce the problem. Run the
following and notice that a POD that should not be extracted is extracted:
    perl -MPod::Simple::Text -e
&#34;Pod::Simple::Text-&gt;filter&#40;&#39;/home/floflooo/Desktop/test_euclid/tricky.pl&#39;&#41;&#34;

The POD parsing mechanism of perltidy seems to be more robust and able
to detect this variable-embedded POD. Running the following properly
keeps the POD string in the file:
    perltidy --delete-pod tricky.pl
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> tricky.pl</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/954402/496435/tricky.pl">Download tricky.pl</a><br />
<span class="downloadcontenttype">text/x-perl 353b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#! /usr/bin/env perl

use strict;
use warnings;

=head1 NAME

Tricky

=cut

print &#34;Starting...\n--------\n&#34;;

my $var =&lt;&lt;EOS;

=head1 FAKE_POD_ENTRY_HERE

This should not be extracted as POD since it is the content of a variable

=cut

EOS

print $var;
print &#34;--------\nDone!\n&#34;;
exit;

__END__

=head1 SYNOPSIS

Tricky file to test proper POD parsing

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1019579" href="/Public/Bug/Display.html?id=69390#txn-1019579">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;07&nbsp;07:55:52&nbsp;2012</span>
    <span class="description">florent.angly [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1019579/531689/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/531689">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 148b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I have managed to produce a working patch for this issue. Please merge
it from <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/theory/pod-simple/pull/25">https://github.com/theory/pod-simple/pull/25</a></span>

Regards,

Florent
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1019581" href="/Public/Bug/Display.html?id=69390#txn-1019581">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;07&nbsp;07:55:53&nbsp;2012</span>
    <span class="description">florent.angly [...] gmail.com -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1019582" href="/Public/Bug/Display.html?id=69390#txn-1019582">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;07&nbsp;08:04:56&nbsp;2012</span>
    <span class="description">florent.angly [...] gmail.com -  Subject changed from &#39;POD string in variables not handled properly&#39; to &#39;[PATCH] POD string in variables not handled properly&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1023739" href="/Public/Bug/Display.html?id=69390#txn-1023739">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;17&nbsp;21:01:37&nbsp;2012</span>
    <span class="description">florent.angly [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1023739/533944/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/533944">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 209b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I would appreciate some feedback on this.
I am eager to continue the development of Getopt::Euclid using
Pod::Simple for its POD needs, but I cannot go ahead until this bug is
resolved.

Cheers,

Florent
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1026580" href="/Public/Bug/Display.html?id=69390#txn-1026580">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;23&nbsp;23:03:22&nbsp;2012</span>
    <span class="description">david [...] kineticode.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #69390] [PATCH] POD string in variables not handled properly </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 23 Jan 2012 20:03:11 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Pod-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;david [...] kineticode.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1026580/535536/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/535536">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Jan 17, 2012, at 6:01 PM, Florent Angly via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would appreciate some feedback on this.
&gt; I am eager to continue the development of Getopt::Euclid using
&gt; Pod::Simple for its POD needs, but I cannot go ahead until this bug is
&gt; resolved.
</div>
The simplest way to work around this issue is to escape the POD directives in the string, like this:

my $var =&lt;&lt;EOS;

\=head1 FAKE_POD_ENTRY_HERE

This should not be extracted as POD since it is the content of a variable

\=cut

EOS

That will solve your problem.

I admire your attempt to work around this in code, but I gotta say, I donâ€™t think I want to go there. Youâ€™re getting into parsing Perl code, and thatâ€™s absolutely fraught with pitfalls.

For example, your patch has this bit:

+  if &#40; $line =~ m/^\s*&lt;&lt;\s*[&#34;&#39;]?&#40;\s*[a-z0-9]+&#41;[&#34;&#39;]?/i &#41; {
+    # Catch heredocs
+    $ending_re = &#39;^&#39;.$1;

And yet there are also single-&lt; heredocs that would be missed. And this code would catch something like:

my $string =  &#34;&lt;&lt;&#39;FOO&#34;;

Which would also be wrong. So I really think that just escaping the =s in your string-embedded Pod is the way to go.

HTH,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1026583" href="/Public/Bug/Display.html?id=69390#txn-1026583">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;23&nbsp;23:04:10&nbsp;2012</span>
    <span class="description">dwheeler [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1026584" href="/Public/Bug/Display.html?id=69390#txn-1026584">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;23&nbsp;23:04:10&nbsp;2012</span>
    <span class="description">dwheeler [...] cpan.org -  Severity Normal changed to Wishlist</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1026606" href="/Public/Bug/Display.html?id=69390#txn-1026606">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;23&nbsp;23:49:37&nbsp;2012</span>
    <span class="description">florent.angly [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1026606/535554/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/535554">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi David and thanks for the reply.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The simplest way to work around this issue is to escape the POD
&gt; directives in the string, like this:
&gt; 
&gt; my $var =&lt;&lt;EOS;
&gt; 
&gt; \=head1 FAKE_POD_ENTRY_HERE
&gt; 
&gt; This should not be extracted as POD since it is the content of a
&gt; variable
&gt; 
&gt; \=cut
&gt; 
&gt; EOS
&gt; 
&gt; That will solve your problem.
</div>
I agree that this would fix the problem. However, you and I do not
necessarily have access to all code that might need this sort of
workaround. You certainly agree that it would be more elegant to have
Pod::Simple know how to deal with the issue properly instead of
requiring authors to use a workaround.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I admire your attempt to work around this in code, but I gotta say, I
&gt; donâ€™t think I want to go there. Youâ€™re getting into parsing Perl code,
&gt; and thatâ€™s absolutely fraught with pitfalls.
&gt; 
&gt; For example, your patch has this bit:
&gt; 
&gt; +  if &#40; $line =~ m/^\s*&lt;&lt;\s*[&#34;&#39;]?&#40;\s*[a-z0-9]+&#41;[&#34;&#39;]?/i &#41; {
&gt; +    # Catch heredocs
&gt; +    $ending_re = &#39;^&#39;.$1;
&gt; 
&gt; And yet there are also single-&lt; heredocs that would be missed. And
&gt; this code would catch something like:
&gt; 
&gt; my $string =  &#34;&lt;&lt;&#39;FOO&#34;;
&gt; 
&gt; Which would also be wrong.
</div>
Yes, you are entirely right that my patch does not cover all possible
cases. Consider it a proof-of-concept that this can be done.

Parsing Perl code is difficult and I prefer to rely on modules dedicated
to it when possible. Text::Balanced is great at detecting quoted string
and has methods to catch heredocs:
<span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~adamk/Text-Balanced-2.02/lib/Text/Balanced.pm#extract_quotelike_and_%22here_documents%22">http://search.cpan.org/~adamk/Text-Balanced-2.02/lib/Text/Balanced.pm#extract_quotelike_and_%22here_documents%22</a></span>

If it is acceptable for Pod::Simple to depend on Getopt::Euclid, using
its features would prove more robust than using my proof-of-concept code.

This rogue POD string are not a frequent occurrence nor a trivial
problem. So, I understand that you might be reluctant to fix it. However
considering that Pod::Simple is becoming the main Pod parser in Perl, I
have high expectations for it.

Best,

Florent
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1026608" href="/Public/Bug/Display.html?id=69390#txn-1026608">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;23&nbsp;23:49:38&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1026947" href="/Public/Bug/Display.html?id=69390#txn-1026947">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;12:02:09&nbsp;2012</span>
    <span class="description">david [...] justatheory.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #69390] [PATCH] POD string in variables not handled properly </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 24 Jan 2012 09:02:00 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Pod-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;david [...] justatheory.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1026947/535756/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/535756">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Jan 23, 2012, at 8:49 PM, Florent Angly via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I agree that this would fix the problem. However, you and I do not
&gt; necessarily have access to all code that might need this sort of
&gt; workaround. You certainly agree that it would be more elegant to have
&gt; Pod::Simple know how to deal with the issue properly instead of
&gt; requiring authors to use a workaround.
</div>
Itâ€™s rare enough that I am not worried about it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, you are entirely right that my patch does not cover all possible
&gt; cases. Consider it a proof-of-concept that this can be done.
</div>
It could only really be done well by using PPI. And we are not about to depend on PPI.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If it is acceptable for Pod::Simple to depend on Getopt::Euclid, using
&gt; its features would prove more robust than using my proof-of-concept code.
</div>
It is not. Pod::Simple is a core-distributed module, and not really in a position to start using modules not distributed with the Perl core &#40;like PPI and Getopt::Euclid&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This rogue POD string are not a frequent occurrence nor a trivial
&gt; problem. So, I understand that you might be reluctant to fix it. However
&gt; considering that Pod::Simple is becoming the main Pod parser in Perl, I
&gt; have high expectations for it.
</div>
It has been the main Pod parser for many years already, and complaints such as this are quite rare, especially considering that all of search.cpan.org and metacpan.org have their docs generated via Pod::Simple.

In short, Pod::Simple is a Pod parser, not a Perl parser, and I think thatâ€™s the way it ought to stay.

Best,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1026950" href="/Public/Bug/Display.html?id=69390#txn-1026950">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;12:02:26&nbsp;2012</span>
    <span class="description">dwheeler [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1027186" href="/Public/Bug/Display.html?id=69390#txn-1027186">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;18:21:27&nbsp;2012</span>
    <span class="description">florent.angly [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1027186/535884/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/535884">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 118b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I can undertand your reasoning...
Thanks for pointing out PPI to me. It seems like a very powerful tool.
Best,
Florent
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1027188" href="/Public/Bug/Display.html?id=69390#txn-1027188">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;18:21:28&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1027189" href="/Public/Bug/Display.html?id=69390#txn-1027189">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;24&nbsp;18:21:55&nbsp;2012</span>
    <span class="description">florent.angly [...] gmail.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.557407</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
