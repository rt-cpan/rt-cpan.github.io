<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #99747 for DBD-SQLite: New test t/virtual_table/21_perldata_charinfo.t relies on volatile data</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #99747 for DBD-SQLite: New test t/virtual_table/21_perldata_charinfo.t relies on volatile data</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-SQLite/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-SQLite/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-SQLite">DBD-SQLite CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">99747</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-SQLite/Active/">DBD-SQLite</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ribasushi [...] leporine.io

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
laurent.dami [...] free.fr

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10248-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.44    </td>
  </tr>
  <tr id="CF-10249-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;23&nbsp;04:19:07&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> laurent.dami [...] free.fr</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> New test t/virtual_table/21_perldata_charinfo.t relies on
 volatile data</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* This bug is currently of unimportant severity, but this may change *

I am so sorry I didn&#39;t catch this earlier, I am in the process of adjusting my CI to make sure I do not miss this kind of stuff in the future.

The main issue is that the test relies on Unicode::UCD::charinfo to always return the same data. Unicode is an evolving standard. It *does* change &#40;more often than one would want&#41;. In the interest on of backward and more importantly forward compatibility, changing this test to use a stable data set before 1.46 around Christmas is very strongly advised.

rabbit@Ahasver:~$ perlbrew use 5.8.1
rabbit@Ahasver:~$ perl -MDevel::Dwarn -MUnicode::UCD=charinfo -e &#39;Dwarn { ver_perl =&gt; $], ver_UCD =&gt; Unicode::UCD-&gt;VERSION, cmap =&gt; { map { $_, &#40;charinfo&#40;$_&#41;||{}&#41;-&gt;{script} } &#40;890..900&#41; } }&#39;
{
  cmap =&gt; {
    890 =&gt; &#34;Greek&#34;,
    891 =&gt; undef,
    892 =&gt; undef,
    893 =&gt; undef,
    894 =&gt; undef,
    895 =&gt; undef,
    896 =&gt; undef,
    897 =&gt; undef,
    898 =&gt; undef,
    899 =&gt; undef,
    900 =&gt; undef
  },
  ver_UCD =&gt; &#34;0.21&#34;,
  ver_perl =&gt; &#34;5.008001&#34;
}
rabbit@Ahasver:~$ perlbrew use 5.8.5
rabbit@Ahasver:~$ perl -MDevel::Dwarn -MUnicode::UCD=charinfo -e &#39;Dwarn { ver_perl =&gt; $], ver_UCD =&gt; Unicode::UCD-&gt;VERSION, cmap =&gt; { map { $_, &#40;charinfo&#40;$_&#41;||{}&#41;-&gt;{script} } &#40;890..900&#41; } }&#39;
{
  cmap =&gt; {
    890 =&gt; &#34;Greek&#34;,
    891 =&gt; undef,
    892 =&gt; undef,
    893 =&gt; undef,
    894 =&gt; &#34;Common&#34;,
    895 =&gt; undef,
    896 =&gt; undef,
    897 =&gt; undef,
    898 =&gt; undef,
    899 =&gt; undef,
    900 =&gt; &#34;Greek&#34;
  },
  ver_UCD =&gt; &#34;0.22&#34;,
  ver_perl =&gt; &#34;5.008005&#34;
}
rabbit@Ahasver:~$ perlbrew use 5.16.2
rabbit@Ahasver:~$ perl -MDevel::Dwarn -MUnicode::UCD=charinfo -e &#39;Dwarn { ver_perl =&gt; $], ver_UCD =&gt; Unicode::UCD-&gt;VERSION, cmap =&gt; { map { $_, &#40;charinfo&#40;$_&#41;||{}&#41;-&gt;{script} } &#40;890..900&#41; } }&#39;
{
  cmap =&gt; {
    890 =&gt; &#34;Greek&#34;,
    891 =&gt; &#34;Greek&#34;,
    892 =&gt; &#34;Greek&#34;,
    893 =&gt; &#34;Greek&#34;,
    894 =&gt; &#34;Common&#34;,
    895 =&gt; undef,
    896 =&gt; undef,
    897 =&gt; undef,
    898 =&gt; undef,
    899 =&gt; undef,
    900 =&gt; &#34;Greek&#34;
  },
  ver_UCD =&gt; &#34;0.43&#34;,
  ver_perl =&gt; &#34;5.016002&#34;
}
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;23&nbsp;21:01:29&nbsp;2014</span>
    <span class="description">ishigaki [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> laurent.dami [...] free.fr</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 23 17:19:07 2014, RIBASUSHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; * This bug is currently of unimportant severity, but this may change *
&gt; 
&gt; I am so sorry I didn&#39;t catch this earlier, I am in the process of
&gt; adjusting my CI to make sure I do not miss this kind of stuff in the
&gt; future.
&gt; 
&gt; The main issue is that the test relies on Unicode::UCD::charinfo to
&gt; always return the same data. Unicode is an evolving standard. It
&gt; *does* change &#40;more often than one would want&#41;. In the interest on of
&gt; backward and more importantly forward compatibility, changing this
&gt; test to use a stable data set before 1.46 around Christmas is very
&gt; strongly advised.
</div>
This test is to see if an example in the pod works correctly. So changing U::UCD into a stable data doesn&#39;t make much sense. Besides, the test is fairly loose and it&#39;s unlikely to break unless Unicode standard changes so drastically that &#34;Greek and Coptic&#34; block itself moves into a totally different block.

One thing I do care is it assumes U::UCD is always installed in the system. The assumption is fairly right as U::UCD is a core module as of now, but it&#39;s not promised, and I do not want to add it as an explicit dependency of DBD::SQLite, either. So, if we need to make the test more robust, it should test the existence of U::UCD first and skip the test if it&#39;s not installed. It might also be useful to add a perl code to see if U::UCD has actually a greek sigma in the testing block. It&#39;s also an option to factor out ::VirtualTable and make it another distribution so that it can depend on U::UCD &#40;and a non-dev version of DBD::SQLite&#41; freely.

What do you think, Laurent?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; rabbit@Ahasver:~$ perlbrew use 5.8.1
&gt; rabbit@Ahasver:~$ perl -MDevel::Dwarn -MUnicode::UCD=charinfo -e
&gt; &#39;Dwarn { ver_perl =&gt; $], ver_UCD =&gt; Unicode::UCD-&gt;VERSION, cmap =&gt; {
&gt; map { $_, &#40;charinfo&#40;$_&#41;||{}&#41;-&gt;{script} } &#40;890..900&#41; } }&#39;
&gt; {
&gt;   cmap =&gt; {
&gt;     890 =&gt; &#34;Greek&#34;,
&gt;     891 =&gt; undef,
&gt;     892 =&gt; undef,
&gt;     893 =&gt; undef,
&gt;     894 =&gt; undef,
&gt;     895 =&gt; undef,
&gt;     896 =&gt; undef,
&gt;     897 =&gt; undef,
&gt;     898 =&gt; undef,
&gt;     899 =&gt; undef,
&gt;     900 =&gt; undef
&gt;   },
&gt;   ver_UCD =&gt; &#34;0.21&#34;,
&gt;   ver_perl =&gt; &#34;5.008001&#34;
&gt; }
&gt; rabbit@Ahasver:~$ perlbrew use 5.8.5
&gt; rabbit@Ahasver:~$ perl -MDevel::Dwarn -MUnicode::UCD=charinfo -e
&gt; &#39;Dwarn { ver_perl =&gt; $], ver_UCD =&gt; Unicode::UCD-&gt;VERSION, cmap =&gt; {
&gt; map { $_, &#40;charinfo&#40;$_&#41;||{}&#41;-&gt;{script} } &#40;890..900&#41; } }&#39;
&gt; {
&gt;   cmap =&gt; {
&gt;     890 =&gt; &#34;Greek&#34;,
&gt;     891 =&gt; undef,
&gt;     892 =&gt; undef,
&gt;     893 =&gt; undef,
&gt;     894 =&gt; &#34;Common&#34;,
&gt;     895 =&gt; undef,
&gt;     896 =&gt; undef,
&gt;     897 =&gt; undef,
&gt;     898 =&gt; undef,
&gt;     899 =&gt; undef,
&gt;     900 =&gt; &#34;Greek&#34;
&gt;   },
&gt;   ver_UCD =&gt; &#34;0.22&#34;,
&gt;   ver_perl =&gt; &#34;5.008005&#34;
&gt; }
&gt; rabbit@Ahasver:~$ perlbrew use 5.16.2
&gt; rabbit@Ahasver:~$ perl -MDevel::Dwarn -MUnicode::UCD=charinfo -e
&gt; &#39;Dwarn { ver_perl =&gt; $], ver_UCD =&gt; Unicode::UCD-&gt;VERSION, cmap =&gt; {
&gt; map { $_, &#40;charinfo&#40;$_&#41;||{}&#41;-&gt;{script} } &#40;890..900&#41; } }&#39;
&gt; {
&gt;   cmap =&gt; {
&gt;     890 =&gt; &#34;Greek&#34;,
&gt;     891 =&gt; &#34;Greek&#34;,
&gt;     892 =&gt; &#34;Greek&#34;,
&gt;     893 =&gt; &#34;Greek&#34;,
&gt;     894 =&gt; &#34;Common&#34;,
&gt;     895 =&gt; undef,
&gt;     896 =&gt; undef,
&gt;     897 =&gt; undef,
&gt;     898 =&gt; undef,
&gt;     899 =&gt; undef,
&gt;     900 =&gt; &#34;Greek&#34;
&gt;   },
&gt;   ver_UCD =&gt; &#34;0.43&#34;,
&gt;   ver_perl =&gt; &#34;5.016002&#34;
&gt; }
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;23&nbsp;21:01:30&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;24&nbsp;04:17:46&nbsp;2014</span>
    <span class="description">laurent.dami [...] free.fr -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99747] New test t/virtual_table/21_perldata_charinfo.t relies on volatile data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 24 Oct 2014 10:17:31 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-SQLite [...] rt.cpan.org, ribasushi [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Laurent Dami &lt;laurent.dami [...] free.fr&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le 24.10.2014 03:01, Kenichi Ishigaki via RT a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; [...]
&gt; One thing I do care is it assumes U::UCD is always installed in the system. The assumption is fairly right as U::UCD is a core module as of now, but it&#39;s not promised, and I do not want to add it as an explicit dependency of DBD::SQLite, either. So, if we need to make the test more robust, it should test the existence of U::UCD first and skip the test if it&#39;s not installed. It might also be useful to add a perl code to see if U::UCD has actually a greek sigma in the testing block.
</div>That&#39;s an excellent compromise. I&#39;m currently on holydays but I can 
volunteer to adapt the test in this way within a couple of days.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It&#39;s also an option to factor out ::VirtualTable and make it another distribution so that it can depend on U::UCD &#40;and a non-dev version of DBD::SQLite&#41; freely.
&gt;
&gt; What do you think, Laurent?
&gt;
</div>Separating VirtualTable would be good in principle, because it will only 
be used by a small subset of SQLite users. But the C code is tightly 
integrated with dbdimp.c , so I don&#39;t see how this code could possibly 
separated.  Of course we could just keep the abstract class in the 
distribution, and publish the example concrete subclasses separately, 
but then the problem is how to write meaningful tests without having the 
subclasses.

Cheers, Laurent
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;24&nbsp;04:53:31&nbsp;2014</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99747] New test t/virtual_table/21_perldata_charinfo.t relies on volatile data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 24 Oct 2014 10:53:15 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-SQLite [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Peter Rabbitson &lt;ribasushi [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 10/24/2014 10:17 AM, laurent.dami@free.fr via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=99747">https://rt.cpan.org/Ticket/Display.html?id=99747</a></span> &gt;
&gt;
&gt; Le 24.10.2014 03:01, Kenichi Ishigaki via RT a écrit :
<div class="message-stanza open">&gt;&gt; [...]
&gt;&gt; One thing I do care is it assumes U::UCD is always installed in the system. The assumption is fairly right as U::UCD is a core module as of now, but it&#39;s not promised, and I do not want to add it as an explicit dependency of DBD::SQLite, either. So, if we need to make the test more robust, it should test the existence of U::UCD first and skip the test if it&#39;s not installed. It might also be useful to add a perl code to see if U::UCD has actually a greek sigma in the testing block.
</div>&gt; That&#39;s an excellent compromise. I&#39;m currently on holydays but I can
&gt; volunteer to adapt the test in this way within a couple of days.
</div>
The easiest is to check the version of U::UCD and to skip unless found. 
I still think this is a bad idea for &#34;down the road&#34;, but am happy with 
whatever solution that will let me pass tests on 5.8.1+ &#40;currently 
DBD::SQLite is effectively 5.8.4+&#41;

Btw Laurent have you had a chance to look at 
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Public/Bug/Display.html?id=99748">https://rt.cpan.org/Public/Bug/Display.html?id=99748</a></span> ?

Cheers
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;24&nbsp;05:09:13&nbsp;2014</span>
    <span class="description">ishigaki [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Oct 24 17:17:46 2014, laurent.dami@free.fr wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le 24.10.2014 03:01, Kenichi Ishigaki via RT a écrit :
<div class="message-stanza open">&gt; &gt; [...]
&gt; &gt; One thing I do care is it assumes U::UCD is always installed in the
&gt; &gt; system. The assumption is fairly right as U::UCD is a core module as
&gt; &gt; of now, but it&#39;s not promised, and I do not want to add it as an
&gt; &gt; explicit dependency of DBD::SQLite, either. So, if we need to make
&gt; &gt; the test more robust, it should test the existence of U::UCD first
&gt; &gt; and skip the test if it&#39;s not installed. It might also be useful to
&gt; &gt; add a perl code to see if U::UCD has actually a greek sigma in the
&gt; &gt; testing block.
</div>&gt; That&#39;s an excellent compromise. I&#39;m currently on holydays but I can
&gt; volunteer to adapt the test in this way within a couple of days.
&gt; 
<div class="message-stanza open">&gt; &gt; It&#39;s also an option to factor out ::VirtualTable and make it another
&gt; &gt; distribution so that it can depend on U::UCD &#40;and a non-dev version
&gt; &gt; of DBD::SQLite&#41; freely.
&gt; &gt;
&gt; &gt; What do you think, Laurent?
&gt; &gt;
</div>&gt; Separating VirtualTable would be good in principle, because it will
&gt; only
&gt; be used by a small subset of SQLite users. But the C code is tightly
&gt; integrated with dbdimp.c , so I don&#39;t see how this code could possibly
&gt; separated.  Of course we could just keep the abstract class in the
&gt; distribution, and publish the example concrete subclasses separately,
&gt; but then the problem is how to write meaningful tests without having
&gt; the
&gt; subclasses.
</div>
Maybe we can move everything except C code into a separate distribution, and eval require ::VirtualTable&#40;::SubClasses&#41; &#40;and skip if not available&#41; in some basic tests in DBD::SQLite.

Or, maybe we can remove even those basic tests from DBD::SQLite itself, and let ::VirtualTable distribution do thorough testing with an arbitrary version of DBD::SQLite &#40;so that future DBD::SQLite should not fail accidentally by old/incompatible ::VirtualTable&#41;.

I think the latter is a bit more robust wrt DBD::SQLite &#40;if I need to choose between those two&#41;, but whatever you feel comfortable is fine with me :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Cheers, Laurent
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;24&nbsp;23:42:25&nbsp;2014</span>
    <span class="description">laurent.dami [...] free.fr -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #99747] New test t/virtual_table/21_perldata_charinfo.t relies on volatile data</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 25 Oct 2014 05:42:14 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-SQLite [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Laurent Dami &lt;laurent.dami [...] free.fr&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le 24.10.2014 11:09, Kenichi Ishigaki via RT a écrit :
[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So, if we need to make
&gt; the test more robust, it should test the existence of U::UCD first
&gt; and skip the test if it&#39;s not installed. It might also be useful to
&gt; add a perl code to see if U::UCD has actually a greek sigma in the
&gt; testing block.
</div>Patched.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe we can move everything except C code into a separate 
&gt; distribution, and eval require ::VirtualTable&#40;::SubClasses&#41; &#40;and skip 
&gt; if not available&#41; in some basic tests in DBD::SQLite.
</div>This would make it very difficult to propagate any later changes. The 
.pm code and C code go tightly together, so any change is likely to 
affect both parts, and this should go in one single commit. Even worse, 
if they belonged to separate distributions, this would mean that CPAN 
publications of both distributions would have to be synchronized ... a 
nightmare !

By the way, the python version also has vtable bundled within the main 
distribution :
<span class="clickylink"><a target="new" rel="nofollow" href="http://rogerbinns.github.io/apsw/vtable.html">http://rogerbinns.github.io/apsw/vtable.html</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;24&nbsp;23:43:43&nbsp;2014</span>
    <span class="description">DAMI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;25&nbsp;00:03:26&nbsp;2014</span>
    <span class="description">ishigaki [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> laurent.dami [...] free.fr</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat Oct 25 12:42:25 2014, laurent.dami@free.fr wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le 24.10.2014 11:09, Kenichi Ishigaki via RT a écrit :
&gt; [...]
<div class="message-stanza open">&gt; &gt; So, if we need to make
&gt; &gt; the test more robust, it should test the existence of U::UCD first
&gt; &gt; and skip the test if it&#39;s not installed. It might also be useful to
&gt; &gt; add a perl code to see if U::UCD has actually a greek sigma in the
&gt; &gt; testing block.
</div>&gt; Patched.
</div>
Thanks!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt; Maybe we can move everything except C code into a separate 
&gt; &gt; distribution, and eval require ::VirtualTable&#40;::SubClasses&#41; &#40;and skip 
&gt; &gt; if not available&#41; in some basic tests in DBD::SQLite.
</div>&gt; This would make it very difficult to propagate any later changes. The 
&gt; .pm code and C code go tightly together, so any change is likely to 
&gt; affect both parts, and this should go in one single commit. Even worse, 
&gt; if they belonged to separate distributions, this would mean that CPAN 
&gt; publications of both distributions would have to be synchronized ... a 
&gt; nightmare !
&gt; 
&gt; By the way, the python version also has vtable bundled within the main 
&gt; distribution :
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rogerbinns.github.io/apsw/vtable.html">http://rogerbinns.github.io/apsw/vtable.html</a></span>
&gt; 
</div>
OK. Let&#39;s keep them in the DBD::SQLite distribution then.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;11&nbsp;23:48:34&nbsp;2014</span>
    <span class="description">ishigaki [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Closed as DBD::SQLite 1.46 was released. Thanks!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;11&nbsp;23:48:34&nbsp;2014</span>
    <span class="description">ishigaki [...] cpan.org -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
