<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #46850 for CPANPLUS: cpan2dist --nobuildprereqs is of no use</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #46850 for CPANPLUS: cpan2dist --nobuildprereqs is of no use</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=CPANPLUS">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=CPANPLUS">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=CPANPLUS">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=CPANPLUS">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPANPLUS">CPANPLUS CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">46850</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=CPANPLUS">CPANPLUS</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jquelin [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8270-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-8271-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=46850">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-617093" href="/Public/Bug/Display.html?id=46850#txn-617093">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;11&nbsp;04:01:45&nbsp;2009</span>
    <span class="description">jquelin [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> cpan2dist --nobuildprereqs is of no use</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/617093/313515/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/313515">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">cpan2dist always follows dependencies and tries to build them, which is
not always wanted.


one can think that &#34;cpan2dist --nobuildprereqs&#34; would prevent this, but
nope, it&#39;s the default and really means: &#34;don&#39;t rebuild prereqs if we&#39;re
at latest version, but rebuild anyway if we&#39;re not at latest version&#34;.

&#34;cpan2dist --buildprereqs&#34; indeed means &#34;i really really want to loose
my time, please rebuild a package for all the prereqs even if i already
have them installed and working&#34;.

i don&#39;t think --buildprereqs is really useful...

i therefore propose to change the meaning to:

- --buildprereqs &#40;default&#41;: build the prereqs if they are not installed,
or if the version installed is not recent enough to build the wanted
package. however, if the prereq is installed and recent enough for the
package to be built, don&#39;t rebuild it, even cpan holds a newer version
than what is installed on system.

- --nobuildprereqs: don&#39;t build the prereqs at all. if some of them are
missing, fail cpan2dist - after all, the user requested it.

i would really want that for app::cpan2pkg, and also because i really
cannot see a valid use case for current behaviour.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-617738" href="/Public/Bug/Display.html?id=46850#txn-617738">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;12&nbsp;12:52:25&nbsp;2009</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/617738/313903/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/313903">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jun 11 04:01:45 2009, JQUELIN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; cpan2dist always follows dependencies and tries to build them, which is
&gt; not always wanted.
&gt; 
&gt; 
&gt; one can think that &#34;cpan2dist --nobuildprereqs&#34; would prevent this, but
&gt; nope, it&#39;s the default and really means: &#34;don&#39;t rebuild prereqs if we&#39;re
&gt; at latest version, but rebuild anyway if we&#39;re not at latest version&#34;.
&gt; 
&gt; &#34;cpan2dist --buildprereqs&#34; indeed means &#34;i really really want to loose
&gt; my time, please rebuild a package for all the prereqs even if i already
&gt; have them installed and working&#34;.
&gt; 
&gt; i don&#39;t think --buildprereqs is really useful...
&gt; 
&gt; i therefore propose to change the meaning to:
&gt; 
&gt; - --buildprereqs &#40;default&#41;: build the prereqs if they are not installed,
&gt; or if the version installed is not recent enough to build the wanted
&gt; package. however, if the prereq is installed and recent enough for the
&gt; package to be built, don&#39;t rebuild it, even cpan holds a newer version
&gt; than what is installed on system.
&gt; 
&gt; - --nobuildprereqs: don&#39;t build the prereqs at all. if some of them are
&gt; missing, fail cpan2dist - after all, the user requested it.
&gt; 
&gt; i would really want that for app::cpan2pkg, and also because i really
&gt; cannot see a valid use case for current behaviour.
&gt; 
</div>
Hi Jerome,

I understand your point, but i&#39;m a bit stuck at a good solution. The use
case for &#39;buildprereqs&#39; is to build a mirror of software. This is what
debian.pkgs.cpan.org does/did.

This means that irrespective of my own install base, I want to build
packages I can put on an apt mirror for others to use. For that, I need
to make sure I have all dependencies built as well.

Your use case makes sense too, and we should incorporate that.
Suggestions &#40;or even better, patches&#41; are most welcome. If I can help
clarify things, just come find me on #perl or email here and I&#39;ll be
happy to.

Cheers,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-617739" href="/Public/Bug/Display.html?id=46850#txn-617739">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;12&nbsp;12:52:26&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-618441" href="/Public/Bug/Display.html?id=46850#txn-618441">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;14&nbsp;09:40:44&nbsp;2009</span>
    <span class="description">jquelin [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/618441/314321/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/314321">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 860b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">ok, i understand now the interest of --build-requires

i therefore propose to change the way --build--requires work. instead of
being a boolean, i propose it takes a string, with the following meaning:

- --buildrequires always &#40;or &#39;all&#39;&#41; ==&gt; same meaning that
--build-requires currently, always build package for prereqs

- --buildrequires as_needed &#40;or &#39;update&#39; or &#39;newer&#39;&#41; ==&gt; same meaning
that --nobuild-requires today, ie build package only if a newer version
exists. this would be the default if --buildrequires is not specified.

- --buildrequires never &#40;or &#39;none&#39;&#41; ==&gt; whatever current state, never
try to build a package for prereq, even if a newer version exist
upstream, even if this means that one of the prereq is not installed or
installed with a version not recent enough. fail and let the user deal
with that.


what do you think of this idea?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-625096" href="/Public/Bug/Display.html?id=46850#txn-625096">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jun&nbsp;27&nbsp;08:49:47&nbsp;2009</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/625096/318086/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/318086">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jun 14 09:40:44 2009, JQUELIN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; ok, i understand now the interest of --build-requires
&gt; 
&gt; i therefore propose to change the way --build--requires work. instead of
&gt; being a boolean, i propose it takes a string, with the following meaning:
&gt; 
&gt; - --buildrequires always &#40;or &#39;all&#39;&#41; ==&gt; same meaning that
&gt; --build-requires currently, always build package for prereqs
&gt; 
&gt; - --buildrequires as_needed &#40;or &#39;update&#39; or &#39;newer&#39;&#41; ==&gt; same meaning
&gt; that --nobuild-requires today, ie build package only if a newer version
&gt; exists. this would be the default if --buildrequires is not specified.
&gt; 
&gt; - --buildrequires never &#40;or &#39;none&#39;&#41; ==&gt; whatever current state, never
&gt; try to build a package for prereq, even if a newer version exist
&gt; upstream, even if this means that one of the prereq is not installed or
&gt; installed with a version not recent enough. fail and let the user deal
&gt; with that.
&gt; 
&gt; 
&gt; what do you think of this idea?
</div>
I understand what you&#39;re trying to do, but it&#39;d be a backwards incompatible change. Can you 
think of a way to do this change with, for example, another flag?

Basically, the value of this flag is passed on straight to $obj-&gt;install, which then ends up at 
the C::Dist::* implementations, unchanged.

Cheers,
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-626354" href="/Public/Bug/Display.html?id=46850#txn-626354">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;30&nbsp;11:47:47&nbsp;2009</span>
    <span class="description">jquelin [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/626354/318802/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/318802">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 966b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">hi jos,

i understand your concern. however, cpanplus is 0.x software, so
breaking its api is fair game *imo*. and i&#39;m not sure cpan2dist is used
that much.

but that&#39;s your call as cpanplus author, so i&#39;ll try to find something
else... :-&#41;


what about adding a new flag:
--update-check
&#40;or --prereq-update or whatever the name&#41;
if yes &#40;default&#41;: checks to find a more recent version of the installed
prereqs package
if no: no such checks 


which give us the matrix:
--nobuild-prereq &#38;&#38; --update-check &#40;default&#41;
check for newer versions of installed prereqs, but don&#39;t rebuild them if
we&#39;re up to date.

--nobuild-prereq &#38;&#38; --noupdate-check
don&#39;t rebuild a prereq package if we have the prereq installed, even if
a newer version is available on cpan

--build-prereq &#38;&#38; --update-check
check for newer versions of installed prereqs, and rebuild them

--build-prereq &#38;&#38; --noupdate-check
should be forbidden, since cpanplus use latest version when building a
package
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-629289" href="/Public/Bug/Display.html?id=46850#txn-629289">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;07&nbsp;04:21:59&nbsp;2009</span>
    <span class="description">kane [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/629289/320401/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/320401">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 713b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Jerome,

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; i understand your concern. however, cpanplus is 0.x software, so
&gt; breaking its api is fair game *imo*. and i&#39;m not sure cpan2dist is used
&gt; that much.
&gt; 
&gt; but that&#39;s your call as cpanplus author, so i&#39;ll try to find something
&gt; else... :-&#41;
</div>
I&#39;ve taken another look at the code, following the path it takes. It seems to me that that 
CPANPLUS::Dist-&gt;prereq_satisfied *SHOULD* have this behaviour already.

Could you please verify &#40;See CPANPLUS::Dist:472 for where it&#39;s invoked&#41;? 

I&#39;m actually inclined to think it&#39;s a bug now if:

 * Module::A requires Module::B 1 
 * You have version Module::B 1
 * CPAN has Module::B 2
 * cpan2dist goes and builds Module::B 2 without --build-prereq specified
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-630269" href="/Public/Bug/Display.html?id=46850#txn-630269">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;08&nbsp;12:48:31&nbsp;2009</span>
    <span class="description">jquelin [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/630269/320918/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/320918">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 333b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">indeed, you&#39;re right that it will not create a package for the prereqs
if the installed version is recent enough to meet the module minimum
prereq version.

however, would it be possible to tell cpan2dist to never, ever create a
package for prereqs, even if the minimum version is not met? in that
case, cpan2dist would just fail...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-630271" href="/Public/Bug/Display.html?id=46850#txn-630271">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;08&nbsp;12:53:16&nbsp;2009</span>
    <span class="description">jquelin [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/630271/320920/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/320920">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 396b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">note however that there is a bug with --force:

cpan2dist --nobuildprereqs --force Foo::Bar

==&gt; this *will* recreate the packages for prereqs that are already at a
correct level.

it recreate the packages even if the modules are at latest version that
can be found on cpan... this is a bug.

i expect --force to proceed even if the package for Foo::Bar already
exists, but not for the prereqs...
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.457997</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
