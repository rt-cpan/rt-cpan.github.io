<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #69524 for XML-Compile: NIL constant needs option of using undef</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #69524 for XML-Compile: NIL constant needs option of using undef</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=XML-Compile">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=XML-Compile">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=XML-Compile">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=XML-Compile">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-Compile">XML-Compile CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">69524</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=XML-Compile">XML-Compile</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
BitCard [...] ResonatorSoft.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-40392-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.01</li>
<li>
0.02</li>
<li>
0.04</li>
<li>
0.05</li>
<li>
0.07</li>
<li>
0.08</li>
<li>
0.11</li>
<li>
0.12</li>
<li>
0.15</li>
<li>
0.16</li>
<li>
0.17</li>
<li>
0.18</li>
<li>
0.5</li>
<li>
0.51</li>
<li>
0.52</li>
<li>
0.53</li>
<li>
0.54</li>
<li>
0.55</li>
<li>
0.56</li>
<li>
0.57</li>
<li>
0.58</li>
<li>
0.59</li>
<li>
0.60</li>
<li>
0.63</li>
<li>
0.64</li>
<li>
0.65</li>
<li>
0.66</li>
<li>
0.67</li>
<li>
0.68</li>
<li>
0.69</li>
<li>
0.70</li>
<li>
0.71</li>
<li>
0.72</li>
<li>
0.73</li>
<li>
0.74</li>
<li>
0.75</li>
<li>
0.76</li>
<li>
0.77</li>
<li>
0.78</li>
<li>
0.79</li>
<li>
0.80</li>
<li>
0.81</li>
<li>
0.82</li>
<li>
0.83</li>
<li>
0.84</li>
<li>
0.85</li>
<li>
0.86</li>
<li>
0.87</li>
<li>
0.88</li>
<li>
0.89</li>
<li>
0.90</li>
<li>
0.91</li>
<li>
0.92</li>
<li>
0.93</li>
<li>
0.93-raw</li>
<li>
0.94</li>
<li>
0.95</li>
<li>
0.96</li>
<li>
0.97</li>
<li>
0.98</li>
<li>
0.99</li>
<li>
1.00</li>
<li>
1.01</li>
<li>
1.02</li>
<li>
1.03</li>
<li>
1.04</li>
<li>
1.05</li>
<li>
1.06</li>
<li>
1.07</li>
<li>
1.08</li>
<li>
1.09</li>
<li>
1.10</li>
<li>
1.11</li>
<li>
1.12</li>
<li>
1.13</li>
<li>
1.14</li>
<li>
1.15</li>
<li>
1.16</li>
<li>
1.17</li>
<li>
1.18</li>
<li>
1.19</li>
<li>
1.20</li>
<li>
1.21</li>
<li>
1.22</li>
</ul>
    </td>
  </tr>
  <tr id="CF-40393-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=69524">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-956486" href="/Public/Bug/Display.html?id=69524#txn-956486">#</a>      
    </span>
    <span class="date">Sat&nbsp;Jul&nbsp;16&nbsp;14:05:05&nbsp;2011</span>
    <span class="description">BitCard [...] ResonatorSoft.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> NIL constant needs option of using undef</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/956486/497588/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/497588">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Using the constant string of &#39;NIL&#39; doesn&#39;t seem to be the best
translation into a Perl hash tree.  It means that programmers have to
detect both zero-based checks &#40;!$a&#41; and the string &#39;NIL&#39; for any checks.
 Code like this would not work:

$XML-&gt;{a} ||= &#34;test&#34;;  # still keeps a NIL field as NIL

However, other options may be inappropriate.  Using 0 or &#39;&#39; is not the
same as a NULL value.  But, undef works.  It&#39;s more or less the NULL
field for Perl.

However, there is still a difference between a non-existent tag and
nillable data.  So, using the interpret_nillable_as_optional option is
NOT the same as defining NIL as undef.  If the NIL constant was set to
undef, you can still tell the difference in Perl:

&lt;root&gt;&lt;a&gt;test&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&lt;c xsi:nil=&#34;true&#34; /&gt;&lt;/root&gt;

say &#39;A = True&#39;    if &#40;$XML-&gt;{a}&#41;;          # True

say &#39;B = True&#39;    if &#40;$XML-&gt;{b}&#41;;          # False
say &#39;B = Defined&#39; if &#40;defined $XML-&gt;{b}&#41;;  # True

say &#39;C = True&#39;    if &#40;$XML-&gt;{c}&#41;;          # False
say &#39;C = Defined&#39; if &#40;defined $XML-&gt;{c}&#41;;  # False
say &#39;C = Exists&#39;  if &#40;exists $XML-&gt;{c}&#41;;   # True

say &#39;D = True&#39;    if &#40;$XML-&gt;{d}&#41;;          # False
say &#39;D = Defined&#39; if &#40;defined $XML-&gt;{d}&#41;;  # False
say &#39;D = Exists&#39;  if &#40;exists $XML-&gt;{d}&#41;;   # False

Therefore, there should be a nil_value option for the reader/writer.  It
would default to &#39;NIL&#39; &#40;for compatibility&#41;, but you can set it to
whatever value you want, including undef.  Say somebody is used to NULL
in databases, or need to feed the reader to some sort of DB writer that
uses that string.  They could set it to &#39;NULL&#39;, instead.  Or fix Perl
matching problem by setting it to undef.

I can write a patch, but I&#39;ll need a hour to digest the code.  Also
wanted your option on the manner.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-956575" href="/Public/Bug/Display.html?id=69524#txn-956575">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;17&nbsp;07:47:48&nbsp;2011</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #69524] NIL constant needs option of using undef</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 17 Jul 2011 13:47:28 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Brendan Byrd via RT &lt;bug-XML-Compile [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/956575/497631/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/497631">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Brendan Byrd via RT &#40;bug-XML-Compile@rt.cpan.org&#41; [110716 18:05]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sat Jul 16 14:05:05 2011: Request 69524 was acted upon.
&gt; Transaction: Ticket created by SineSwiper
&gt;        Queue: XML-Compile
&gt;      Subject: NIL constant needs option of using undef
&gt; Using the constant string of &#39;NIL&#39; doesn&#39;t seem to be the best
&gt; translation into a Perl hash tree.  It means that programmers have to
&gt; detect both zero-based checks &#40;!$a&#41; and the string &#39;NIL&#39; for any checks.
</div>
Longer answer after my holidays.

There is a big difference between NIL and undef.  Nillable means
explicitly missing, undef is implicitly missing.

  &lt;element name=&#34;t&#34; minOccurs=&#34;0&#34; nillable=&#34;true&#34;/&gt;

  t =&gt; undef    # or missing  -&gt;   no element
  t =&gt; &#39;NIL&#39;                  -&gt;   &lt;t nil=&#34;true&#34;/&gt;

As some schemas confuse users by offering both optional als nillable
for elements I have to distiguish between them. Besides, having an
explict NIL in the perl hash where the schema requires an explicit
NIL in the message seems justified.

The &#39;interpret_nillable_as_optional&#34; is used for some schema&#39;s where
the designed did not understand the difference between both. So,
where messages are sent without elements which are not optional but
only nillable.
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
drs Mark A.C.J. Overmeer                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-956578" href="/Public/Bug/Display.html?id=69524#txn-956578">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;17&nbsp;07:47:50&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-956611" href="/Public/Bug/Display.html?id=69524#txn-956611">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;17&nbsp;13:32:58&nbsp;2011</span>
    <span class="description">BitCard [...] ResonatorSoft.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> BitCard [...] ResonatorSoft.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/956611/497643/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/497643">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Jul 17 07:47:48 2011, Mark@Overmeer.net wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There is a big difference between NIL and undef.  Nillable means
&gt; explicitly missing, undef is implicitly missing.
&gt; 
&gt;   &lt;element name=&#34;t&#34; minOccurs=&#34;0&#34; nillable=&#34;true&#34;/&gt;
&gt; 
&gt;   t =&gt; undef    # or missing  -&gt;   no element
&gt;   t =&gt; &#39;NIL&#39;                  -&gt;   &lt;t nil=&#34;true&#34;/&gt;
</div>
You might be misunderstanding what I&#39;m asking for.  I&#39;m not asking for
an undef as an implicitly missing value.  I&#39;m asking for it as an
-explicitly- missing value.  From your example above, it transforms into:

  !exists t                   -&gt;   no element
  t =&gt; undef                  -&gt;   &lt;t nil=&#34;true&#34;/&gt;

The element &#39;t&#39; as a hash, array, or a LibXML node can still exist, even
if the value inside of it is &#39;undef&#39;.  Perl&#39;s undef is the NULL value
for the language, so it should be used as such, so that the underlying
code that accesses the hashes &#34;just works&#34;.  It&#39;s unnecessary busy work
to write &#39;NIL&#39; exceptions to everything or a walk_hash_tree sub just to
remove &#40;and then readd&#41; all of the NILs from the tree.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The &#39;interpret_nillable_as_optional&#34; is used for some schema&#39;s where
&gt; the designed did not understand the difference between both. So,
&gt; where messages are sent without elements which are not optional but
&gt; only nillable.
</div>
Yep, but that&#39;s different than assigning undef/NIL to an element.  I
don&#39;t want to remove the element; I want the hash to translate NIL to
undef and back, so that the Perl code works better.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-958862" href="/Public/Bug/Display.html?id=69524#txn-958862">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;22&nbsp;10:04:16&nbsp;2011</span>
    <span class="description">Mark [...] Overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #69524] NIL constant needs option of using undef</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Jul 2011 16:03:59 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Brendan Byrd via RT &lt;bug-XML-Compile [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;mark [...] overmeer.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/958862/498942/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/498942">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Brendan Byrd via RT &#40;bug-XML-Compile@rt.cpan.org&#41; [110717 17:33]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   !exists t                   -&gt;   no element
&gt;   t =&gt; undef                  -&gt;   &lt;t nil=&#34;true&#34;/&gt;
</div>
Where you win in the case of schema&#39;s using NIL &#40;quite rare&#41;, you
loose for everyone who wants to write

 { s =&gt; take_values&#40;&#41;
 , t =&gt; collect_data&#40;&#41;
 }

where that function may return undef. If I have a look at my own
code &#40;many modules&#41;, that approach would seriously lengten my
implementations.

But there are many other places, with complex structures which will
break. For instance, &#34;undef&#34; is also false for booleans.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perl&#39;s undef is the NULL value for the language, so it should be used
&gt; as such, so that the underlying code that accesses the hashes &#34;just works&#34;.
</div>
Perl&#39;s undef is an implicit NULL &#40;missing value&#41;, not an explicit
NULL &#40;NIL&#41;.  See:
    my $x;         # value now is undef

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It&#39;s unnecessary busy work
&gt; to write &#39;NIL&#39; exceptions to everything or a walk_hash_tree sub just to
&gt; remove &#40;and then readd&#41; all of the NILs from the tree.
</div>
That&#39;s the weird thing of writing explicit NILs: they give you
extra work but have no clear benefit. You can use them on things
like this:
   name    =&gt; &#39;filled in&#39;
   address =&gt; undef       # unknown whether there is one
   phone   =&gt; NIL         # explicitly state we do not have one

But that&#39;s their only correct purpose.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yep, but that&#39;s different than assigning undef/NIL to an element.  I
&gt; don&#39;t want to remove the element; I want the hash to translate NIL to
&gt; undef and back, so that the Perl code works better.
</div>
I do understand what you want, but it will complicate the code
for everyone including you!
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
drs Mark A.C.J. Overmeer                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-962451" href="/Public/Bug/Display.html?id=69524#txn-962451">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;01&nbsp;16:18:34&nbsp;2011</span>
    <span class="description">MARKOV [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/962451/500823/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/500823">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 76b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Unless there are new arguments in favor, this idea will not get implemented.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-962453" href="/Public/Bug/Display.html?id=69524#txn-962453">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;01&nbsp;16:18:35&nbsp;2011</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.668749</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
