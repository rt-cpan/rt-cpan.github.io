<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #102277 for Tk: 804.033 tests doesn&#39;t build with Test::Pod installed under x86_64</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #102277 for Tk: 804.033 tests doesn&#39;t build with Test::Pod installed under x86_64</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Tk/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Tk/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Tk/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Tk/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tk">Tk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">102277</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Tk/Active/">Tk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
felixonmars [...] archlinux.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;00:36:47&nbsp;2015</span>
    <span class="description">felixonmars [...] archlinux.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 804.033 tests doesn&#39;t build with Test::Pod installed under x86_64</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Feb 2015 13:36:24 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Felix Yan &lt;felixonmars [...] archlinux.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I am getting a problem when trying to build 804.033 tests with Test::Pod 
installed. When Test::Pod was not present, the build went well. This problem 
also doesn&#39;t exist when building under i686.

Environment:
Arch Linux x86_64
perl 5.20.2
Test::Pod 1.48
gcc 4.9.2

Below I&#39;ll paste the logs for &#34;make test&#34;:

Running Mkbootstrap for Tk &#40;&#41;
cc -c  -I/usr/include/freetype2 -D_REENTRANT -D_GNU_SOURCE -fwrapv -fno-
strict-aliasing -pipe -fstack-protector -I/usr/local/include -
D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -march=x86-64 -mtune=generic -O2 -
pipe -fstack-protector-strong --param=ssp-buffer-size=4   -
DVERSION=\&#34;804.033\&#34; -DXS_VERSION=\&#34;804.033\&#34; -fPIC &#34;-
I/usr/lib/perl5/core_perl/CORE&#34;   -Wall -Wno-implicit-int -Wno-comment -Wno-
unused -D__USE_FIXED_PROTOTYPES__ tixGlue.c
cc -c  -I/usr/include/freetype2 -D_REENTRANT -D_GNU_SOURCE -fwrapv -fno-
strict-aliasing -pipe -fstack-protector -I/usr/local/include -
D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -march=x86-64 -mtune=generic -O2 -
pipe -fstack-protector-strong --param=ssp-buffer-size=4   -
DVERSION=\&#34;804.033\&#34; -DXS_VERSION=\&#34;804.033\&#34; -fPIC &#34;-
I/usr/lib/perl5/core_perl/CORE&#34;   -Wall -Wno-implicit-int -Wno-comment -Wno-
unused -D__USE_FIXED_PROTOTYPES__ tkGlue_f.c
cd pTk &#38;&#38; make DEFINE=&#34;&#34; LIBPERL_A=&#34;libperl.a&#34; LINKTYPE=&#34;dynamic&#34; OPTIMIZE=&#34;-
march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong --param=ssp-
buffer-size=4&#34; PREFIX=&#34;/usr&#34; PASTHRU_DEFINE=&#34;&#34; PASTHRU_INC=&#34;&#34;
chmod 644 Tk.bs
make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/PNG&#39;
Running Mkbootstrap for Tk::PNG &#40;&#41;
make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
chmod 644 PNG.bs
/usr/bin/perl &#34;-I../t&#34; &#34;-MTkTest&#34; &#34;-e&#34; &#34;checked_test_harness&#40;&#39;../xt&#39;, 0, 
&#39;../blib/lib&#39;, &#39;../blib/arch&#39;&#41;&#34; t/*.t
make[1]: Leaving directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
make[1]: Leaving directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/pod&#39;
rm -f blib/arch/auto/Tk/Tk.so
LD_RUN_PATH=&#34;/usr/lib&#34; cc  -shared -Wl,-O1,--sort-common,--as-needed,-z,relro 
-L/usr/local/lib -fstack-protector Tk.o chnGlue.o encGlue.o evtGlue.o 
objGlue.o tixGlue.o tkGlue.o tkGlue_f.o tkWin32Dll.o  -o 
blib/arch/auto/Tk/Tk.so pTk/libpTk.a  \
   -L/usr/lib -lXft -lX11 -L/usr/local/lib -lfontconfig -lnsl -lm       \

Can&#39;t locate loadable object for module Tk in @INC &#40;@INC contains: 
/build/perl-tk/src/Tk-804.033/PNG/../blib/lib /build/perl-
tk/src/Tk-804.033/PNG/../blib/arch ../t /usr/lib/perl5/site_perl 
/usr/share/perl5/site_perl /usr/lib/perl5/vendor_perl 
/usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl 
/usr/share/perl5/core_perl .&#41; at t/basic.t line 4.
Compilation failed in require at t/basic.t line 4.
BEGIN failed--compilation aborted at t/basic.t line 4.
t/basic.t ..
Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
No subtests run
make[1]: Leaving directory &#39;/build/perl-tk/src/Tk-804.033/pod&#39;
make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/demos&#39;
Can&#39;t load &#39;/build/perl-tk/src/Tk-804.033/PNG/../blib/arch/auto/Tk/Tk.so&#39; for 
module Tk: /build/perl-tk/src/Tk-804.033/PNG/../blib/arch/auto/Tk/Tk.so: file 
too short at /usr/lib/perl5/core_perl/DynaLoader.pm line 193.
 at t/crash.t line 11.
Compilation failed in require at t/crash.t line 11.
BEGIN failed--compilation aborted at t/crash.t line 11.
t/crash.t ..
Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
No subtests run

Regards,
Felix Yan
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;03:10:03&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-02-22 00:36:47, felixonmars@archlinux.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I am getting a problem when trying to build 804.033 tests with
&gt; Test::Pod
&gt; installed. When Test::Pod was not present, the build went well. This
&gt; problem
&gt; also doesn&#39;t exist when building under i686.
&gt; 
&gt; Environment:
&gt; Arch Linux x86_64
&gt; perl 5.20.2
&gt; Test::Pod 1.48
&gt; gcc 4.9.2
&gt; 
&gt; Below I&#39;ll paste the logs for &#34;make test&#34;:
&gt; 
&gt; Running Mkbootstrap for Tk &#40;&#41;
&gt; cc -c  -I/usr/include/freetype2 -D_REENTRANT -D_GNU_SOURCE -fwrapv
&gt; -fno-
&gt; strict-aliasing -pipe -fstack-protector -I/usr/local/include -
&gt; D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -march=x86-64 -mtune=generic
&gt; -O2 -
&gt; pipe -fstack-protector-strong --param=ssp-buffer-size=4   -
&gt; DVERSION=\&#34;804.033\&#34; -DXS_VERSION=\&#34;804.033\&#34; -fPIC &#34;-
&gt; I/usr/lib/perl5/core_perl/CORE&#34;   -Wall -Wno-implicit-int -Wno-comment
&gt; -Wno-
&gt; unused -D__USE_FIXED_PROTOTYPES__ tixGlue.c
&gt; cc -c  -I/usr/include/freetype2 -D_REENTRANT -D_GNU_SOURCE -fwrapv
&gt; -fno-
&gt; strict-aliasing -pipe -fstack-protector -I/usr/local/include -
&gt; D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -march=x86-64 -mtune=generic
&gt; -O2 -
&gt; pipe -fstack-protector-strong --param=ssp-buffer-size=4   -
&gt; DVERSION=\&#34;804.033\&#34; -DXS_VERSION=\&#34;804.033\&#34; -fPIC &#34;-
&gt; I/usr/lib/perl5/core_perl/CORE&#34;   -Wall -Wno-implicit-int -Wno-comment
&gt; -Wno-
&gt; unused -D__USE_FIXED_PROTOTYPES__ tkGlue_f.c
&gt; cd pTk &#38;&#38; make DEFINE=&#34;&#34; LIBPERL_A=&#34;libperl.a&#34; LINKTYPE=&#34;dynamic&#34;
&gt; OPTIMIZE=&#34;-
&gt; march=x86-64 -mtune=generic -O2 -pipe -fstack-protector-strong
&gt; --param=ssp-
&gt; buffer-size=4&#34; PREFIX=&#34;/usr&#34; PASTHRU_DEFINE=&#34;&#34; PASTHRU_INC=&#34;&#34;
&gt; chmod 644 Tk.bs
&gt; make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/PNG&#39;
&gt; Running Mkbootstrap for Tk::PNG &#40;&#41;
&gt; make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
&gt; chmod 644 PNG.bs
&gt;  /usr/bin/perl &#34;-I../t&#34; &#34;-MTkTest&#34; &#34;-e&#34; &#34;checked_test_harness&#40;&#39;../xt&#39;,
&gt; 0,
&gt; &#39;../blib/lib&#39;, &#39;../blib/arch&#39;&#41;&#34; t/*.t
&gt; make[1]: Leaving directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
&gt; make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
&gt; make[1]: Leaving directory &#39;/build/perl-tk/src/Tk-804.033/pTk&#39;
&gt; make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/pod&#39;
&gt; rm -f blib/arch/auto/Tk/Tk.so
&gt;  LD_RUN_PATH=&#34;/usr/lib&#34; cc  -shared -Wl,-O1,--sort-common,--as-
&gt; needed,-z,relro
&gt;  -L/usr/local/lib -fstack-protector Tk.o chnGlue.o encGlue.o evtGlue.o
&gt;  objGlue.o tixGlue.o tkGlue.o tkGlue_f.o tkWin32Dll.o  -o
&gt; blib/arch/auto/Tk/Tk.so pTk/libpTk.a  \
&gt;    -L/usr/lib -lXft -lX11 -L/usr/local/lib -lfontconfig -lnsl -lm
&gt; \
&gt; 
&gt; Can&#39;t locate loadable object for module Tk in @INC &#40;@INC contains:
&gt; /build/perl-tk/src/Tk-804.033/PNG/../blib/lib /build/perl-
&gt; tk/src/Tk-804.033/PNG/../blib/arch ../t /usr/lib/perl5/site_perl
&gt; /usr/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt; /usr/share/perl5/core_perl .&#41; at t/basic.t line 4.
&gt; Compilation failed in require at t/basic.t line 4.
&gt; BEGIN failed--compilation aborted at t/basic.t line 4.
&gt; t/basic.t ..
&gt; Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt; No subtests run
&gt; make[1]: Leaving directory &#39;/build/perl-tk/src/Tk-804.033/pod&#39;
&gt; make[1]: Entering directory &#39;/build/perl-tk/src/Tk-804.033/demos&#39;
&gt; Can&#39;t load &#39;/build/perl-tk/src/Tk-
&gt; 804.033/PNG/../blib/arch/auto/Tk/Tk.so&#39; for
&gt; module Tk: /build/perl-tk/src/Tk-
&gt; 804.033/PNG/../blib/arch/auto/Tk/Tk.so: file
&gt; too short at /usr/lib/perl5/core_perl/DynaLoader.pm line 193.
&gt; at t/crash.t line 11.
&gt; Compilation failed in require at t/crash.t line 11.
&gt; BEGIN failed--compilation aborted at t/crash.t line 11.
&gt; t/crash.t ..
&gt; Dubious, test returned 2 &#40;wstat 512, 0x200&#41;
&gt; No subtests run
&gt;
</div>
It does not look like the failure has anything to do with Test::Pod. One possible problem is that a build with different parameters &#40;e.g. different perls&#41; was done in the same directory without running &#34;make clean&#34; before. Also the &#34;Tk.so: file too short&#34; message looks very strange --- maybe it&#39;s just a disk full condition here, or some race condition e.g. two processes tried to create Tk.so at the same time?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;03:10:04&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;03:15:33&nbsp;2015</span>
    <span class="description">felixonmars [...] archlinux.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102277] 804.033 tests doesn&#39;t build with Test::Pod installed under x86_64</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Feb 2015 16:15:09 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Felix Yan &lt;felixonmars [...] archlinux.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sunday, February 22, 2015 03:10:09 you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It does not look like the failure has anything to do with Test::Pod. One
&gt; possible problem is that a build with different parameters &#40;e.g. different
&gt; perls&#41; was done in the same directory without running &#34;make clean&#34; before.
&gt; Also the &#34;Tk.so: file too short&#34; message looks very strange --- maybe it&#39;s
&gt; just a disk full condition here, or some race condition e.g. two processes
&gt; tried to create Tk.so at the same time?
</div>
I built it in a clean chroot each time using the PKGBUILD attached, so I don&#39;t 
think it&#39;s related to parameters or a dirty build environment. I have tried it 
back and forth, but the only way I can reproduce it is to include perl-test-
pod in the build environment, and I can reproduce it every time. Any hints on 
how to debug in this case?

Regards,
Felix Yan
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;03:32:41&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-02-22 03:15:33, felixonmars@archlinux.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sunday, February 22, 2015 03:10:09 you wrote:
<div class="message-stanza open">&gt; &gt; It does not look like the failure has anything to do with Test::Pod.
&gt; &gt; One
&gt; &gt; possible problem is that a build with different parameters &#40;e.g.
&gt; &gt; different
&gt; &gt; perls&#41; was done in the same directory without running &#34;make clean&#34;
&gt; &gt; before.
&gt; &gt; Also the &#34;Tk.so: file too short&#34; message looks very strange --- maybe
&gt; &gt; it&#39;s
&gt; &gt; just a disk full condition here, or some race condition e.g. two
&gt; &gt; processes
&gt; &gt; tried to create Tk.so at the same time?
</div>&gt; 
&gt; I built it in a clean chroot each time using the PKGBUILD attached, so
&gt; I don&#39;t
&gt; think it&#39;s related to parameters or a dirty build environment. I have
&gt; tried it
&gt; back and forth, but the only way I can reproduce it is to include
&gt; perl-test-
&gt; pod in the build environment, and I can reproduce it every time. Any
&gt; hints on
&gt; how to debug in this case?
</div>
Well, the t/pod.t test is new in this release, but it seems that the failure happens much earlier. You could try to remove this file before building &#38; testing, but I doubt that it makes any difference.

Maybe by installing Test::Pod some other dependencies are also installed, or existing dependencies upgraded, changing the way how the compilation works. Though the dependencies are all core perl modules and look rather harmless, so it&#39;s also quite unlikely.

Maybe it helps if we could see the full compile logs of both builds, and do a diff between both, to see if something changes in the way the compilation works &#40;different order, maybe additional warnings, whatever&#41;.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;03:53:29&nbsp;2015</span>
    <span class="description">felixonmars [...] archlinux.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102277] 804.033 tests doesn&#39;t build with Test::Pod installed under x86_64</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Feb 2015 16:52:25 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Felix Yan &lt;felixonmars [...] archlinux.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sunday, February 22, 2015 03:32:42 you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Well, the t/pod.t test is new in this release, but it seems that the failure
&gt; happens much earlier. You could try to remove this file before building &#38;
&gt; testing, but I doubt that it makes any difference.
&gt; 
&gt; Maybe by installing Test::Pod some other dependencies are also installed, or
&gt; existing dependencies upgraded, changing the way how the compilation works.
&gt; Though the dependencies are all core perl modules and look rather harmless,
&gt; so it&#39;s also quite unlikely.
&gt; 
&gt; Maybe it helps if we could see the full compile logs of both builds, and do
&gt; a diff between both, to see if something changes in the way the compilation
&gt; works &#40;different order, maybe additional warnings, whatever&#41;.
</div>
Looks like it&#39;s coincidence that the builds with Test::Pod failed. It&#39;s 
actually a random failure after a lot more tests. Sorry for the confusion!

I&#39;m attaching two full build logs, one for success and one for failure. A 
quick diff here shows some difference in ordering of the commands.

Regards,
Felix Yan
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;06:03:34&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-02-22 03:53:29, felixonmars@archlinux.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sunday, February 22, 2015 03:32:42 you wrote:
<div class="message-stanza open">&gt; &gt; Well, the t/pod.t test is new in this release, but it seems that the
&gt; &gt; failure
&gt; &gt; happens much earlier. You could try to remove this file before
&gt; &gt; building &#38;
&gt; &gt; testing, but I doubt that it makes any difference.
&gt; &gt;
&gt; &gt; Maybe by installing Test::Pod some other dependencies are also
&gt; &gt; installed, or
&gt; &gt; existing dependencies upgraded, changing the way how the compilation
&gt; &gt; works.
&gt; &gt; Though the dependencies are all core perl modules and look rather
&gt; &gt; harmless,
&gt; &gt; so it&#39;s also quite unlikely.
&gt; &gt;
&gt; &gt; Maybe it helps if we could see the full compile logs of both builds,
&gt; &gt; and do
&gt; &gt; a diff between both, to see if something changes in the way the
&gt; &gt; compilation
&gt; &gt; works &#40;different order, maybe additional warnings, whatever&#41;.
</div>&gt; 
&gt; Looks like it&#39;s coincidence that the builds with Test::Pod failed.
&gt; It&#39;s
&gt; actually a random failure after a lot more tests. Sorry for the
&gt; confusion!
&gt; 
&gt; I&#39;m attaching two full build logs, one for success and one for
&gt; failure. A
&gt; quick diff here shows some difference in ordering of the commands.
</div>
Another idea: is the build running in parallel? E.g. using make -j...? If so, would the result be predictable if -j was not used?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;08:55:10&nbsp;2015</span>
    <span class="description">felixonmars [...] archlinux.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102277] 804.033 tests doesn&#39;t build with Test::Pod installed under x86_64</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 22 Feb 2015 21:54:47 +0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Felix Yan &lt;felixonmars [...] archlinux.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sunday, February 22, 2015 06:03:36 you wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Another idea: is the build running in parallel? E.g. using make -j...? If
&gt; so, would the result be predictable if -j was not used?
</div>
You are right! I just tried to run the tests with &#34;make -j1 test&#34;, and it 
succeeded 10 times in a row.

Regards,
Felix Yan
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Feb&nbsp;22&nbsp;14:10:51&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-02-22 08:55:10, felixonmars@archlinux.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sunday, February 22, 2015 06:03:36 you wrote:
<div class="message-stanza open">&gt; &gt; Another idea: is the build running in parallel? E.g. using make -j...? If
&gt; &gt; so, would the result be predictable if -j was not used?
</div>&gt; 
&gt; You are right! I just tried to run the tests with &#34;make -j1 test&#34;, and it 
&gt; succeeded 10 times in a row.
</div>
Fine! I added a note in the INSTALL document about &#34;make -j...&#34; &#40;commit ff2bb33508cdb37c97776948ad8c3fee24abaaf8&#41;. It would be nice to make Tk safe for parallel building, though... it&#39;s now on my ToDo list.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
