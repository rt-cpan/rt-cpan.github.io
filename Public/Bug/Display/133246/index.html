<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #133246 for Tk: Problem selecting last entry in dropdown list</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #133246 for Tk: Problem selecting last entry in dropdown list</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Tk/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Tk/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Tk/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Tk/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tk">Tk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">133246</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Tk/Active/">Tk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
j.j.berkhout [...] staalenberk.nl

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;10:33:55&nbsp;2020</span>
    <span class="description">j.j.berkhout [...] staalenberk.nl -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Problem selecting last entry in dropdown list</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2020 15:21:40 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;J.J. Berkhout&#34; &lt;j.j.berkhout [...] staalenberk.nl&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I experience a funny problem in Tk::BrowseEntry:
The code:
&#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt; 1,
-choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&#40;@posten&#41;&#41;&#41; -&gt; pack;

@posten is an array with 16 elements.  If I select the last element in
the dropdown list, it is not entered in the entry of BrowseEntry.  All
other choices are no problem.  I can &#39;solve&#39; this by either remove the
listheight option &#40;and getting a scrollbar&#41; or making the listheight one
more than the number of elements in @posten.  In the last case, an empty
line appears at the bottom of the dropdown list and clicking on this
line selects the last element in @posten, the same as clicking on the
last element itself.

Environment:
OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
perl-tk/bionic,now 1:804.033-2build1 amd64

Is this a bug or a problem with my code?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;11:03:30&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; I experience a funny problem in Tk::BrowseEntry:
&gt; The code:
&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt; 1,
&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt; 
&gt; @posten is an array with 16 elements.  If I select the last element in
&gt; the dropdown list, it is not entered in the entry of BrowseEntry.  All
&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove the
&gt; listheight option &#40;and getting a scrollbar&#41; or making the listheight one
&gt; more than the number of elements in @posten.  In the last case, an empty
&gt; line appears at the bottom of the dropdown list and clicking on this
&gt; line selects the last element in @posten, the same as clicking on the
&gt; last element itself.
&gt; 
&gt; Environment:
&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt; 
&gt; Is this a bug or a problem with my code?
</div>
I tried the following complete script on a Debian/jessie system with Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:

#!/usr/bin/perl -w
use strict;
use Tk;
my $mw = tkinit;
my $w_post;
my @posten = &#40;1..16&#41;;
&#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt; 1,
-choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&#40;@posten&#41;&#41;&#41; -&gt; pack;
MainLoop;
__END__

So either something happened between 804.033 and 804.035 &#40;but I don&#39;t see anything relevant in the Changes file&#41;, or your X11 setup is different from mine &#40;but I doubt that it matters&#41; or your values are different and cause somehow the different behaviour.

Can you check with the latest Perl/Tk first?

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;11:03:31&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;11:03:31&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;11:20:05&nbsp;2020</span>
    <span class="description">j.j.berkhout [...] staalenberk.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #133246] Problem selecting last entry in dropdown list</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2020 17:18:41 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;J.J. Berkhout&#34; &lt;j.j.berkhout [...] staalenberk.nl&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On 29-08-2020 17:03, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; 
&gt; On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; I experience a funny problem in Tk::BrowseEntry:
&gt;&gt; The code:
&gt;&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt; 1,
&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;
&gt;&gt; @posten is an array with 16 elements.  If I select the last element in
&gt;&gt; the dropdown list, it is not entered in the entry of BrowseEntry.  All
&gt;&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove the
&gt;&gt; listheight option &#40;and getting a scrollbar&#41; or making the listheight one
&gt;&gt; more than the number of elements in @posten.  In the last case, an empty
&gt;&gt; line appears at the bottom of the dropdown list and clicking on this
&gt;&gt; line selects the last element in @posten, the same as clicking on the
&gt;&gt; last element itself.
&gt;&gt;
&gt;&gt; Environment:
&gt;&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt;&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt;&gt;
&gt;&gt; Is this a bug or a problem with my code?
</div>&gt; 
&gt; I tried the following complete script on a Debian/jessie system with Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:
&gt; 
&gt; #!/usr/bin/perl -w
&gt; use strict;
&gt; use Tk;
&gt; my $mw = tkinit;
&gt; my $w_post;
&gt; my @posten = &#40;1..16&#41;;
&gt; &#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt; 1,
&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt; MainLoop;
&gt; __END__
&gt; 
&gt; So either something happened between 804.033 and 804.035 &#40;but I don&#39;t see anything relevant in the Changes file&#41;, or your X11 setup is different from mine &#40;but I doubt that it matters&#41; or your values are different and cause somehow the different behaviour.
&gt; 
&gt; Can you check with the latest Perl/Tk first?
&gt; 
&gt; Regards,
&gt;     Slaven
&gt; 
</div>
I continued testing this problem.  It appears to be triggered in another
part of my code &#40;the script in question has about 2000 lines&#41;.  Thanks
for your prompt response, but please wait until I located the culprit.
I am converting this script &#40;among others&#41; from Tkx to Tk so I can get
rid of ActivePerl...
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;11:20:06&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;stalled&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;12:16:00&nbsp;2020</span>
    <span class="description">j.j.berkhout [...] staalenberk.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #133246] Problem selecting last entry in dropdown list</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2020 18:14:56 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;J.J. Berkhout&#34; &lt;j.j.berkhout [...] staalenberk.nl&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On 29-08-2020 17:03, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; 
&gt; On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; I experience a funny problem in Tk::BrowseEntry:
&gt;&gt; The code:
&gt;&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt; 1,
&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;
&gt;&gt; @posten is an array with 16 elements.  If I select the last element in
&gt;&gt; the dropdown list, it is not entered in the entry of BrowseEntry.  All
&gt;&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove the
&gt;&gt; listheight option &#40;and getting a scrollbar&#41; or making the listheight one
&gt;&gt; more than the number of elements in @posten.  In the last case, an empty
&gt;&gt; line appears at the bottom of the dropdown list and clicking on this
&gt;&gt; line selects the last element in @posten, the same as clicking on the
&gt;&gt; last element itself.
&gt;&gt;
&gt;&gt; Environment:
&gt;&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt;&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt;&gt;
&gt;&gt; Is this a bug or a problem with my code?
</div>&gt; 
&gt; I tried the following complete script on a Debian/jessie system with Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:
&gt; 
&gt; #!/usr/bin/perl -w
&gt; use strict;
&gt; use Tk;
&gt; my $mw = tkinit;
&gt; my $w_post;
&gt; my @posten = &#40;1..16&#41;;
&gt; &#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt; 1,
&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt; MainLoop;
&gt; __END__
&gt; 
&gt; So either something happened between 804.033 and 804.035 &#40;but I don&#39;t see anything relevant in the Changes file&#41;, or your X11 setup is different from mine &#40;but I doubt that it matters&#41; or your values are different and cause somehow the different behaviour.
&gt; 
&gt; Can you check with the latest Perl/Tk first?
&gt; 
&gt; Regards,
&gt;     Slaven
&gt; 
</div>OK.
I removed too much code in my original report.
Attached code which is as reduced as I can easily make it.
Observations:
If I remove the Tk::CmdLine statements, no problem is obvious.
If I remove some Label definitions, the problem is also not visible.
Could it be a mismatch between screen coordinates and the entry position?

With kind regards,
Jaap Berkhout
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;12:30:37&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2020-08-29 12:16:00, j.j.berkhout@staalenberk.nl wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; On 29-08-2020 17:03, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; &gt;
&gt; &gt; On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt; &gt;&gt; Hello,
&gt; &gt;&gt;
&gt; &gt;&gt; I experience a funny problem in Tk::BrowseEntry:
&gt; &gt;&gt; The code:
&gt; &gt;&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt;
&gt; &gt;&gt; 1,
&gt; &gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt; &gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt; &gt;&gt;
&gt; &gt;&gt; @posten is an array with 16 elements.  If I select the last element
&gt; &gt;&gt; in
&gt; &gt;&gt; the dropdown list, it is not entered in the entry of BrowseEntry.
&gt; &gt;&gt; All
&gt; &gt;&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove
&gt; &gt;&gt; the
&gt; &gt;&gt; listheight option &#40;and getting a scrollbar&#41; or making the listheight
&gt; &gt;&gt; one
&gt; &gt;&gt; more than the number of elements in @posten.  In the last case, an
&gt; &gt;&gt; empty
&gt; &gt;&gt; line appears at the bottom of the dropdown list and clicking on this
&gt; &gt;&gt; line selects the last element in @posten, the same as clicking on
&gt; &gt;&gt; the
&gt; &gt;&gt; last element itself.
&gt; &gt;&gt;
&gt; &gt;&gt; Environment:
&gt; &gt;&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt; &gt;&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt; &gt;&gt;
&gt; &gt;&gt; Is this a bug or a problem with my code?
</div>&gt; &gt;
&gt; &gt; I tried the following complete script on a Debian/jessie system with
&gt; &gt; Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:
&gt; &gt;
&gt; &gt; #!/usr/bin/perl -w
&gt; &gt; use strict;
&gt; &gt; use Tk;
&gt; &gt; my $mw = tkinit;
&gt; &gt; my $w_post;
&gt; &gt; my @posten = &#40;1..16&#41;;
&gt; &gt; &#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt; &gt; =&gt; 1,
&gt; &gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt; &gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt; &gt; MainLoop;
&gt; &gt; __END__
&gt; &gt;
&gt; &gt; So either something happened between 804.033 and 804.035 &#40;but I don&#39;t
&gt; &gt; see anything relevant in the Changes file&#41;, or your X11 setup is
&gt; &gt; different from mine &#40;but I doubt that it matters&#41; or your values are
&gt; &gt; different and cause somehow the different behaviour.
&gt; &gt;
&gt; &gt; Can you check with the latest Perl/Tk first?
&gt; &gt;
&gt; &gt; Regards,
&gt; &gt;     Slaven
&gt; &gt;
</div>&gt; OK.
&gt; I removed too much code in my original report.
&gt; Attached code which is as reduced as I can easily make it.
&gt; Observations:
&gt; If I remove the Tk::CmdLine statements, no problem is obvious.
&gt; If I remove some Label definitions, the problem is also not visible.
&gt; Could it be a mismatch between screen coordinates and the entry
&gt; position?
</div>
I still don&#39;t see a problem with the attached script, even if I enable the commented out Tk::CmdLine lines. On a Debian system there&#39;s probably no &#34;Ubuntu&#34; font available. But I tried the script also on a Xubuntu 20.04 system, still without problems: clicking on the &#34;16&#34; value puts the value into the entry.

Regards,
    Slaven
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;13:15:48&nbsp;2020</span>
    <span class="description">j.j.berkhout [...] staalenberk.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #133246] Problem selecting last entry in dropdown list</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2020 19:15:02 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;J.J. Berkhout&#34; &lt;j.j.berkhout [...] staalenberk.nl&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On 29-08-2020 18:30, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; 
&gt; On 2020-08-29 12:16:00, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt;
&gt;&gt; On 29-08-2020 17:03, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt; Hello,
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I experience a funny problem in Tk::BrowseEntry:
&gt;&gt;&gt;&gt; The code:
&gt;&gt;&gt;&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth =&gt;
&gt;&gt;&gt;&gt; 1,
&gt;&gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; @posten is an array with 16 elements.  If I select the last element
&gt;&gt;&gt;&gt; in
&gt;&gt;&gt;&gt; the dropdown list, it is not entered in the entry of BrowseEntry.
&gt;&gt;&gt;&gt; All
&gt;&gt;&gt;&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove
&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt; listheight option &#40;and getting a scrollbar&#41; or making the listheight
&gt;&gt;&gt;&gt; one
&gt;&gt;&gt;&gt; more than the number of elements in @posten.  In the last case, an
&gt;&gt;&gt;&gt; empty
&gt;&gt;&gt;&gt; line appears at the bottom of the dropdown list and clicking on this
&gt;&gt;&gt;&gt; line selects the last element in @posten, the same as clicking on
&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt; last element itself.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Environment:
&gt;&gt;&gt;&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt;&gt;&gt;&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Is this a bug or a problem with my code?
</div>&gt;&gt;&gt;
&gt;&gt;&gt; I tried the following complete script on a Debian/jessie system with
&gt;&gt;&gt; Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:
&gt;&gt;&gt;
&gt;&gt;&gt; #!/usr/bin/perl -w
&gt;&gt;&gt; use strict;
&gt;&gt;&gt; use Tk;
&gt;&gt;&gt; my $mw = tkinit;
&gt;&gt;&gt; my $w_post;
&gt;&gt;&gt; my @posten = &#40;1..16&#41;;
&gt;&gt;&gt; &#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt;&gt;&gt; =&gt; 1,
&gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;&gt; MainLoop;
&gt;&gt;&gt; __END__
&gt;&gt;&gt;
&gt;&gt;&gt; So either something happened between 804.033 and 804.035 &#40;but I don&#39;t
&gt;&gt;&gt; see anything relevant in the Changes file&#41;, or your X11 setup is
&gt;&gt;&gt; different from mine &#40;but I doubt that it matters&#41; or your values are
&gt;&gt;&gt; different and cause somehow the different behaviour.
&gt;&gt;&gt;
&gt;&gt;&gt; Can you check with the latest Perl/Tk first?
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt;     Slaven
&gt;&gt;&gt;
</div>&gt;&gt; OK.
&gt;&gt; I removed too much code in my original report.
&gt;&gt; Attached code which is as reduced as I can easily make it.
&gt;&gt; Observations:
&gt;&gt; If I remove the Tk::CmdLine statements, no problem is obvious.
&gt;&gt; If I remove some Label definitions, the problem is also not visible.
&gt;&gt; Could it be a mismatch between screen coordinates and the entry
&gt;&gt; position?
</div>&gt; 
&gt; I still don&#39;t see a problem with the attached script, even if I enable the commented out Tk::CmdLine lines. On a Debian system there&#39;s probably no &#34;Ubuntu&#34; font available. But I tried the script also on a Xubuntu 20.04 system, still without problems: clicking on the &#34;16&#34; value puts the value into the entry.
&gt; 
&gt; Regards,
&gt;     Slaven
&gt; 
</div>
I changed the font to &#39;Liberation&#34; &#40;which I think is on Debian systems
as well&#41; with the same result.  The reason for the *Label*Font is that
without this the font used for labels is a rather small bold font.
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;13:36:07&nbsp;2020</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2020-08-29 13:15:48, j.j.berkhout@staalenberk.nl wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; 
&gt; On 29-08-2020 18:30, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; &gt;
&gt; &gt; On 2020-08-29 12:16:00, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; On 29-08-2020 17:03, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt; &gt;&gt;&gt;&gt; Hello,
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; I experience a funny problem in Tk::BrowseEntry:
&gt; &gt;&gt;&gt;&gt; The code:
&gt; &gt;&gt;&gt;&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt; &gt;&gt;&gt;&gt; =&gt;
&gt; &gt;&gt;&gt;&gt; 1,
&gt; &gt;&gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt; &gt;&gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; @posten is an array with 16 elements.  If I select the last
&gt; &gt;&gt;&gt;&gt; element
&gt; &gt;&gt;&gt;&gt; in
&gt; &gt;&gt;&gt;&gt; the dropdown list, it is not entered in the entry of BrowseEntry.
&gt; &gt;&gt;&gt;&gt; All
&gt; &gt;&gt;&gt;&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove
&gt; &gt;&gt;&gt;&gt; the
&gt; &gt;&gt;&gt;&gt; listheight option &#40;and getting a scrollbar&#41; or making the
&gt; &gt;&gt;&gt;&gt; listheight
&gt; &gt;&gt;&gt;&gt; one
&gt; &gt;&gt;&gt;&gt; more than the number of elements in @posten.  In the last case, an
&gt; &gt;&gt;&gt;&gt; empty
&gt; &gt;&gt;&gt;&gt; line appears at the bottom of the dropdown list and clicking on
&gt; &gt;&gt;&gt;&gt; this
&gt; &gt;&gt;&gt;&gt; line selects the last element in @posten, the same as clicking on
&gt; &gt;&gt;&gt;&gt; the
&gt; &gt;&gt;&gt;&gt; last element itself.
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; Environment:
&gt; &gt;&gt;&gt;&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt; &gt;&gt;&gt;&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt; Is this a bug or a problem with my code?
</div>&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; I tried the following complete script on a Debian/jessie system
&gt; &gt;&gt;&gt; with
&gt; &gt;&gt;&gt; Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; #!/usr/bin/perl -w
&gt; &gt;&gt;&gt; use strict;
&gt; &gt;&gt;&gt; use Tk;
&gt; &gt;&gt;&gt; my $mw = tkinit;
&gt; &gt;&gt;&gt; my $w_post;
&gt; &gt;&gt;&gt; my @posten = &#40;1..16&#41;;
&gt; &gt;&gt;&gt; &#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt; &gt;&gt;&gt; =&gt; 1,
&gt; &gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt; &gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt; &gt;&gt;&gt; MainLoop;
&gt; &gt;&gt;&gt; __END__
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; So either something happened between 804.033 and 804.035 &#40;but I
&gt; &gt;&gt;&gt; don&#39;t
&gt; &gt;&gt;&gt; see anything relevant in the Changes file&#41;, or your X11 setup is
&gt; &gt;&gt;&gt; different from mine &#40;but I doubt that it matters&#41; or your values
&gt; &gt;&gt;&gt; are
&gt; &gt;&gt;&gt; different and cause somehow the different behaviour.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Can you check with the latest Perl/Tk first?
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Regards,
&gt; &gt;&gt;&gt;     Slaven
&gt; &gt;&gt;&gt;
</div>&gt; &gt;&gt; OK.
&gt; &gt;&gt; I removed too much code in my original report.
&gt; &gt;&gt; Attached code which is as reduced as I can easily make it.
&gt; &gt;&gt; Observations:
&gt; &gt;&gt; If I remove the Tk::CmdLine statements, no problem is obvious.
&gt; &gt;&gt; If I remove some Label definitions, the problem is also not visible.
&gt; &gt;&gt; Could it be a mismatch between screen coordinates and the entry
&gt; &gt;&gt; position?
</div>&gt; &gt;
&gt; &gt; I still don&#39;t see a problem with the attached script, even if I
&gt; &gt; enable the commented out Tk::CmdLine lines. On a Debian system
&gt; &gt; there&#39;s probably no &#34;Ubuntu&#34; font available. But I tried the script
&gt; &gt; also on a Xubuntu 20.04 system, still without problems: clicking on
&gt; &gt; the &#34;16&#34; value puts the value into the entry.
&gt; &gt;
&gt; &gt; Regards,
&gt; &gt;     Slaven
&gt; &gt;
</div>&gt; 
&gt; I changed the font to &#39;Liberation&#34; &#40;which I think is on Debian systems
&gt; as well&#41; with the same result.  The reason for the *Label*Font is that
&gt; without this the font used for labels is a rather small bold font.
</div>
According to fc-list I don&#39;t have &#34;Liberation&#34;, but &#34;Liberation Sans&#34; &#40;and other variants&#41;, so I tried

   Tk::CmdLine::SetArguments &#40;-font =&gt; &#34;{Liberation Sans}&#34;&#41;;
   Tk::CmdLine::SetResources &#40;&#39;*Label*font: {Liberation Sans} 12 normal&#39;, &#39;widgetDefault&#39;&#41;;

but still &#34;16&#34; is selectable.

Are you trying your script with Tk 804.035?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;13:58:05&nbsp;2020</span>
    <span class="description">j.j.berkhout [...] staalenberk.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #133246] Problem selecting last entry in dropdown list</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2020 19:57:07 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;J.J. Berkhout&#34; &lt;j.j.berkhout [...] staalenberk.nl&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On 29-08-2020 19:36, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; 
&gt; On 2020-08-29 13:15:48, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt;
&gt;&gt; On 29-08-2020 18:30, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 2020-08-29 12:16:00, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On 29-08-2020 17:03, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt; Hello,
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; I experience a funny problem in Tk::BrowseEntry:
&gt;&gt;&gt;&gt;&gt;&gt; The code:
&gt;&gt;&gt;&gt;&gt;&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt;&gt;&gt;&gt;&gt;&gt; =&gt;
&gt;&gt;&gt;&gt;&gt;&gt; 1,
&gt;&gt;&gt;&gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt;&gt;&gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; @posten is an array with 16 elements.  If I select the last
&gt;&gt;&gt;&gt;&gt;&gt; element
&gt;&gt;&gt;&gt;&gt;&gt; in
&gt;&gt;&gt;&gt;&gt;&gt; the dropdown list, it is not entered in the entry of BrowseEntry.
&gt;&gt;&gt;&gt;&gt;&gt; All
&gt;&gt;&gt;&gt;&gt;&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove
&gt;&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt;&gt; listheight option &#40;and getting a scrollbar&#41; or making the
&gt;&gt;&gt;&gt;&gt;&gt; listheight
&gt;&gt;&gt;&gt;&gt;&gt; one
&gt;&gt;&gt;&gt;&gt;&gt; more than the number of elements in @posten.  In the last case, an
&gt;&gt;&gt;&gt;&gt;&gt; empty
&gt;&gt;&gt;&gt;&gt;&gt; line appears at the bottom of the dropdown list and clicking on
&gt;&gt;&gt;&gt;&gt;&gt; this
&gt;&gt;&gt;&gt;&gt;&gt; line selects the last element in @posten, the same as clicking on
&gt;&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt;&gt; last element itself.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Environment:
&gt;&gt;&gt;&gt;&gt;&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt;&gt;&gt;&gt;&gt;&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Is this a bug or a problem with my code?
</div>&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I tried the following complete script on a Debian/jessie system
&gt;&gt;&gt;&gt;&gt; with
&gt;&gt;&gt;&gt;&gt; Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; #!/usr/bin/perl -w
&gt;&gt;&gt;&gt;&gt; use strict;
&gt;&gt;&gt;&gt;&gt; use Tk;
&gt;&gt;&gt;&gt;&gt; my $mw = tkinit;
&gt;&gt;&gt;&gt;&gt; my $w_post;
&gt;&gt;&gt;&gt;&gt; my @posten = &#40;1..16&#41;;
&gt;&gt;&gt;&gt;&gt; &#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt;&gt;&gt;&gt;&gt; =&gt; 1,
&gt;&gt;&gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt;&gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;&gt;&gt;&gt; MainLoop;
&gt;&gt;&gt;&gt;&gt; __END__
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; So either something happened between 804.033 and 804.035 &#40;but I
&gt;&gt;&gt;&gt;&gt; don&#39;t
&gt;&gt;&gt;&gt;&gt; see anything relevant in the Changes file&#41;, or your X11 setup is
&gt;&gt;&gt;&gt;&gt; different from mine &#40;but I doubt that it matters&#41; or your values
&gt;&gt;&gt;&gt;&gt; are
&gt;&gt;&gt;&gt;&gt; different and cause somehow the different behaviour.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Can you check with the latest Perl/Tk first?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Regards,
&gt;&gt;&gt;&gt;&gt;     Slaven
&gt;&gt;&gt;&gt;&gt;
</div>&gt;&gt;&gt;&gt; OK.
&gt;&gt;&gt;&gt; I removed too much code in my original report.
&gt;&gt;&gt;&gt; Attached code which is as reduced as I can easily make it.
&gt;&gt;&gt;&gt; Observations:
&gt;&gt;&gt;&gt; If I remove the Tk::CmdLine statements, no problem is obvious.
&gt;&gt;&gt;&gt; If I remove some Label definitions, the problem is also not visible.
&gt;&gt;&gt;&gt; Could it be a mismatch between screen coordinates and the entry
&gt;&gt;&gt;&gt; position?
</div>&gt;&gt;&gt;
&gt;&gt;&gt; I still don&#39;t see a problem with the attached script, even if I
&gt;&gt;&gt; enable the commented out Tk::CmdLine lines. On a Debian system
&gt;&gt;&gt; there&#39;s probably no &#34;Ubuntu&#34; font available. But I tried the script
&gt;&gt;&gt; also on a Xubuntu 20.04 system, still without problems: clicking on
&gt;&gt;&gt; the &#34;16&#34; value puts the value into the entry.
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt;     Slaven
&gt;&gt;&gt;
</div>&gt;&gt;
&gt;&gt; I changed the font to &#39;Liberation&#34; &#40;which I think is on Debian systems
&gt;&gt; as well&#41; with the same result.  The reason for the *Label*Font is that
&gt;&gt; without this the font used for labels is a rather small bold font.
</div>&gt; 
&gt; According to fc-list I don&#39;t have &#34;Liberation&#34;, but &#34;Liberation Sans&#34; &#40;and other variants&#41;, so I tried
&gt; 
&gt;    Tk::CmdLine::SetArguments &#40;-font =&gt; &#34;{Liberation Sans}&#34;&#41;;
&gt;    Tk::CmdLine::SetResources &#40;&#39;*Label*font: {Liberation Sans} 12 normal&#39;, &#39;widgetDefault&#39;&#41;;
&gt; 
&gt; but still &#34;16&#34; is selectable.
&gt; 
&gt; Are you trying your script with Tk 804.035?
&gt; 
&gt; 
</div>No, my Tk version is 804.033, perl version is 5.26.1.
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;29&nbsp;14:14:11&nbsp;2020</span>
    <span class="description">j.j.berkhout [...] staalenberk.nl -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #133246] Problem selecting last entry in dropdown list</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 29 Aug 2020 20:13:21 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;J.J. Berkhout&#34; &lt;j.j.berkhout [...] staalenberk.nl&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

On 29-08-2020 19:36, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt; 
&gt; On 2020-08-29 13:15:48, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt;
&gt;&gt; On 29-08-2020 18:30, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 2020-08-29 12:16:00, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On 29-08-2020 17:03, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=133246">https://rt.cpan.org/Ticket/Display.html?id=133246</a></span> &gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; On 2020-08-29 10:33:55, j.j.berkhout@staalenberk.nl wrote:
<div class="message-stanza open">&gt;&gt;&gt;&gt;&gt;&gt; Hello,
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; I experience a funny problem in Tk::BrowseEntry:
&gt;&gt;&gt;&gt;&gt;&gt; The code:
&gt;&gt;&gt;&gt;&gt;&gt; &#40;$Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt;&gt;&gt;&gt;&gt;&gt; =&gt;
&gt;&gt;&gt;&gt;&gt;&gt; 1,
&gt;&gt;&gt;&gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt;&gt;&gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; @posten is an array with 16 elements.  If I select the last
&gt;&gt;&gt;&gt;&gt;&gt; element
&gt;&gt;&gt;&gt;&gt;&gt; in
&gt;&gt;&gt;&gt;&gt;&gt; the dropdown list, it is not entered in the entry of BrowseEntry.
&gt;&gt;&gt;&gt;&gt;&gt; All
&gt;&gt;&gt;&gt;&gt;&gt; other choices are no problem.  I can &#39;solve&#39; this by either remove
&gt;&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt;&gt; listheight option &#40;and getting a scrollbar&#41; or making the
&gt;&gt;&gt;&gt;&gt;&gt; listheight
&gt;&gt;&gt;&gt;&gt;&gt; one
&gt;&gt;&gt;&gt;&gt;&gt; more than the number of elements in @posten.  In the last case, an
&gt;&gt;&gt;&gt;&gt;&gt; empty
&gt;&gt;&gt;&gt;&gt;&gt; line appears at the bottom of the dropdown list and clicking on
&gt;&gt;&gt;&gt;&gt;&gt; this
&gt;&gt;&gt;&gt;&gt;&gt; line selects the last element in @posten, the same as clicking on
&gt;&gt;&gt;&gt;&gt;&gt; the
&gt;&gt;&gt;&gt;&gt;&gt; last element itself.
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Environment:
&gt;&gt;&gt;&gt;&gt;&gt; OS: Linux Mint 19.3 Cinnamon, kernel 4.15.0-112
&gt;&gt;&gt;&gt;&gt;&gt; perl-tk/bionic,now 1:804.033-2build1 amd64
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt; Is this a bug or a problem with my code?
</div>&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I tried the following complete script on a Debian/jessie system
&gt;&gt;&gt;&gt;&gt; with
&gt;&gt;&gt;&gt;&gt; Tk 804.035, clicked on &#34;16&#34; and it appears in the entry:
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; #!/usr/bin/perl -w
&gt;&gt;&gt;&gt;&gt; use strict;
&gt;&gt;&gt;&gt;&gt; use Tk;
&gt;&gt;&gt;&gt;&gt; my $mw = tkinit;
&gt;&gt;&gt;&gt;&gt; my $w_post;
&gt;&gt;&gt;&gt;&gt; my @posten = &#40;1..16&#41;;
&gt;&gt;&gt;&gt;&gt; &#40;my $Be = $mw -&gt; BrowseEntry &#40;-variable =&gt; \$w_post, -autolistwidth
&gt;&gt;&gt;&gt;&gt; =&gt; 1,
&gt;&gt;&gt;&gt;&gt; -choices =&gt; \@posten,  -state =&gt; &#39;readonly&#39;, -listheight =&gt; scalar
&gt;&gt;&gt;&gt;&gt; &#40;@posten&#41;&#41;&#41; -&gt; pack;
&gt;&gt;&gt;&gt;&gt; MainLoop;
&gt;&gt;&gt;&gt;&gt; __END__
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; So either something happened between 804.033 and 804.035 &#40;but I
&gt;&gt;&gt;&gt;&gt; don&#39;t
&gt;&gt;&gt;&gt;&gt; see anything relevant in the Changes file&#41;, or your X11 setup is
&gt;&gt;&gt;&gt;&gt; different from mine &#40;but I doubt that it matters&#41; or your values
&gt;&gt;&gt;&gt;&gt; are
&gt;&gt;&gt;&gt;&gt; different and cause somehow the different behaviour.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Can you check with the latest Perl/Tk first?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Regards,
&gt;&gt;&gt;&gt;&gt;     Slaven
&gt;&gt;&gt;&gt;&gt;
</div>&gt;&gt;&gt;&gt; OK.
&gt;&gt;&gt;&gt; I removed too much code in my original report.
&gt;&gt;&gt;&gt; Attached code which is as reduced as I can easily make it.
&gt;&gt;&gt;&gt; Observations:
&gt;&gt;&gt;&gt; If I remove the Tk::CmdLine statements, no problem is obvious.
&gt;&gt;&gt;&gt; If I remove some Label definitions, the problem is also not visible.
&gt;&gt;&gt;&gt; Could it be a mismatch between screen coordinates and the entry
&gt;&gt;&gt;&gt; position?
</div>&gt;&gt;&gt;
&gt;&gt;&gt; I still don&#39;t see a problem with the attached script, even if I
&gt;&gt;&gt; enable the commented out Tk::CmdLine lines. On a Debian system
&gt;&gt;&gt; there&#39;s probably no &#34;Ubuntu&#34; font available. But I tried the script
&gt;&gt;&gt; also on a Xubuntu 20.04 system, still without problems: clicking on
&gt;&gt;&gt; the &#34;16&#34; value puts the value into the entry.
&gt;&gt;&gt;
&gt;&gt;&gt; Regards,
&gt;&gt;&gt;     Slaven
&gt;&gt;&gt;
</div>&gt;&gt;
&gt;&gt; I changed the font to &#39;Liberation&#34; &#40;which I think is on Debian systems
&gt;&gt; as well&#41; with the same result.  The reason for the *Label*Font is that
&gt;&gt; without this the font used for labels is a rather small bold font.
</div>&gt; 
&gt; According to fc-list I don&#39;t have &#34;Liberation&#34;, but &#34;Liberation Sans&#34; &#40;and other variants&#41;, so I tried
&gt; 
&gt;    Tk::CmdLine::SetArguments &#40;-font =&gt; &#34;{Liberation Sans}&#34;&#41;;
&gt;    Tk::CmdLine::SetResources &#40;&#39;*Label*font: {Liberation Sans} 12 normal&#39;, &#39;widgetDefault&#39;&#41;;
&gt; 
&gt; but still &#34;16&#34; is selectable.
&gt; 
&gt; Are you trying your script with Tk 804.035?
&gt; 
&gt; 
</div>Followup:

The same script runs flawlessly with the same Tk version but perl 5.30.0
&#40;on another machine &#40;laptop&#41; with Linux Mint Cinnamon 20, kernel 5.4.0-42.
I have a workaround for now, and plan to upgrade my machines in the near
future, so for now there is no need for further research, more so while
it seems the error is not in Tk.  Sorry to have bothered you and thanks
for your effort.

Have a nice weekend and stay healthy.

With kind regards,
Jaap.
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
