<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #38011 for HTTP-Server-Simple: Tests hang on Windows XP with Strawberry Perl 5.10.0.1</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #38011 for HTTP-Server-Simple: Tests hang on Windows XP with Strawberry Perl 5.10.0.1</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/HTTP-Server-Simple/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/HTTP-Server-Simple">HTTP-Server-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">38011</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/HTTP-Server-Simple/Active/">HTTP-Server-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
david.sitsky [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-16414-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.34</li>
<li>
0.35</li>
</ul>
    </td>
  </tr>
  <tr id="CF-16415-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




01live.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/547730/275541/01live.patch">
Sat Dec 27 09:37:44 2008 (485b) by raherh [...] gmail.com
</a>
</font></li>
</ul>


01live.t.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/536129/269039/01live.t.patch">
Sat Nov 22 03:42:04 2008 (566b) by ZARQUON [...] cpan.org
</a>
</font></li>
</ul>


04cgi.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/547730/275538/04cgi.patch">
Sat Dec 27 09:37:44 2008 (861b) by raherh [...] gmail.com
</a>
</font></li>
</ul>


test.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/548976/276237/test.patch">
Wed Dec 31 16:04:44 2008 (312b) by gyles19 [...] visi.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;29&nbsp;07:05:53&nbsp;2008</span>
    <span class="description">david.sitsky [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests hang on Windows XP with Strawberry Perl 5.10.0.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 29 Jul 2008 21:04:44 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-HTTP-Server-Simple [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David Sitsky&#34; &lt;david.sitsky [...] gmail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am trying to install Catalyst on a Windows XP machine with
Strawberry Perl 5.10.0.1.

Unfortunately the tests seem to hang in the same spot - here is the
relevant output.  Is there anything I can do to get this working?

C:\work\catalyst&gt;perl -MCPAN -e &#34;install HTTP::Server::Simple&#34;
CPAN: File::HomeDir loaded ok &#40;v0.69&#41;
Database was generated on Tue, 29 Jul 2008 09:52:16 GMT
Running install for module &#39;HTTP::Server::Simple&#39;
Running make for J/JE/JESSE/HTTP-Server-Simple-0.34.tar.gz
Checksum for C:\strawberry\cpan\sources\authors\id\J\JE\JESSE\HTTP-Server-Simple
-0.34.tar.gz ok

  CPAN.pm: Going to build J/JE/JESSE/HTTP-Server-Simple-0.34.tar.gz

Checking if your kit is complete...
Looks good
Writing Makefile for HTTP::Server::Simple
cp lib/HTTP/Server/Simple/CGI/Environment.pm blib\lib\HTTP\Server\Simple\CGI\Env
ironment.pm
cp lib/HTTP/Server/Simple.pm blib\lib\HTTP\Server\Simple.pm
cp lib/HTTP/Server/Simple/CGI.pm blib\lib\HTTP\Server\Simple\CGI.pm
  JESSE/HTTP-Server-Simple-0.34.tar.gz
  C:\strawberry\c\bin\dmake.EXE -- OK
Running make test
C:\strawberry\perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0,
&#39;inc&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/*.t
t/00smoke............ok
t/01live.............6/14

Cheers,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;28&nbsp;20:48:30&nbsp;2008</span>
    <span class="description">CHORNY [...] cpan.org -  Broken in 0.34 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;28&nbsp;20:48:31&nbsp;2008</span>
    <span class="description">CHORNY [...] cpan.org -  Broken in 0.35 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;28&nbsp;20:48:31&nbsp;2008</span>
    <span class="description">CHORNY [...] cpan.org -  Severity Important added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;21&nbsp;18:18:15&nbsp;2008</span>
    <span class="description">ZARQUON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Also having this problem.  Here I&#39;m unable to force install because I&#39;m
trying to build a Strawberry perl distribution with Catalyst and tools
all included.

I have a little time to help with fixing this, but need some guidance.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;21&nbsp;18:18:17&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;22&nbsp;03:42:04&nbsp;2008</span>
    <span class="description">ZARQUON [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 21 18:18:15 2008, ZARQUON wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Also having this problem.  Here I&#39;m unable to force install because I&#39;m
&gt; trying to build a Strawberry perl distribution with Catalyst and tools
&gt; all included.
&gt; 
&gt; I have a little time to help with fixing this, but need some guidance.
</div>

Here&#39;s a fix that gets around the problem by skipping the SlowServer
tests on windows.  I did find something that might be a workaround for
this issue at
<span class="clickylink"><a target="new" rel="nofollow" href="http://samdelacruz.blogspot.com/2007/02/kill-processes-in-windows.html">http://samdelacruz.blogspot.com/2007/02/kill-processes-in-windows.html</a></span>,
but I lack the expertise to assess it, and it does seem awfully long and
cumbersome for a bug that will be amply tested on other platforms anyway.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- 01live.t	2008-11-22 19:33:02.000000000 +1100
+++ 01live.t_new	2008-11-22 19:33:26.000000000 +1100
@@ -34,10 +34,12 @@
 }
 
 
-TODO: { 
-    local $TODO = &#34;We don&#39;t currently wait for &#39;server is running&#39; responses from the client&#34;;
-    run_server_tests&#40;&#39;SlowServer&#39;&#41;;
-
+ TODO: { 
+     local $TODO = &#34;We don&#39;t currently wait for &#39;server is running&#39; responses from the client&#34;;
+   SKIP: {
+       skip &#34;SlowServer tests don&#39;t work on win32 because the CORE::kill&#40;&#41; is subtly broken&#34;, 4 if $^O = &#39;MSWin32&#39;;
+       run_server_tests&#40;&#39;SlowServer&#39;&#41;;
+     }
 }
 
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Nov&nbsp;23&nbsp;14:16:36&nbsp;2008</span>
    <span class="description">SMPETERS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 29 07:05:53 2008, david.sitsky@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am trying to install Catalyst on a Windows XP machine with
&gt; Strawberry Perl 5.10.0.1.
&gt; 
&gt; Unfortunately the tests seem to hang in the same spot - here is the
&gt; relevant output.  Is there anything I can do to get this working?
&gt; 
&gt; C:\work\catalyst&gt;perl -MCPAN -e &#34;install HTTP::Server::Simple&#34;
&gt; CPAN: File::HomeDir loaded ok &#40;v0.69&#41;
&gt; Database was generated on Tue, 29 Jul 2008 09:52:16 GMT
&gt; Running install for module &#39;HTTP::Server::Simple&#39;
&gt; Running make for J/JE/JESSE/HTTP-Server-Simple-0.34.tar.gz
&gt; Checksum for C:\strawberry\cpan\sources\authors\id\J\JE\JESSE\HTTP-
&gt; Server-Simple
&gt; -0.34.tar.gz ok
&gt; 
&gt;   CPAN.pm: Going to build J/JE/JESSE/HTTP-Server-Simple-0.34.tar.gz
&gt; 
&gt; Checking if your kit is complete...
&gt; Looks good
&gt; Writing Makefile for HTTP::Server::Simple
&gt; cp lib/HTTP/Server/Simple/CGI/Environment.pm
&gt; blib\lib\HTTP\Server\Simple\CGI\Env
&gt; ironment.pm
&gt; cp lib/HTTP/Server/Simple.pm blib\lib\HTTP\Server\Simple.pm
&gt; cp lib/HTTP/Server/Simple/CGI.pm blib\lib\HTTP\Server\Simple\CGI.pm
&gt;   JESSE/HTTP-Server-Simple-0.34.tar.gz
&gt;   C:\strawberry\c\bin\dmake.EXE -- OK
&gt; Running make test
&gt; C:\strawberry\perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;test_harness&#40;0,
&gt; &#39;inc&#39;, &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/*.t
&gt; t/00smoke............ok
&gt; t/01live.............6/14
&gt; 
</div>
I&#39;m seeing similar problems on Win32 with 5.8.9-RC1, but have not yet determined whether 
this is a regression or not from 5.8.8.

Steve Peters
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;28&nbsp;12:39:45&nbsp;2008</span>
    <span class="description">jesse [...] fsck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38011] Tests hang on Windows XP with Strawberry Perl 5.10.0.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 28 Nov 2008 12:39:31 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Steve Peters via RT &lt;bug-HTTP-Server-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jesse Vincent &lt;jesse [...] fsck.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Steve, 

Have you managed to figure out if it&#39;s failing this way on 5.8.8 as
well?

Jesse
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/538279/270272/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 194b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Dec&nbsp;27&nbsp;09:37:44&nbsp;2008</span>
    <span class="description">raherh [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> raherh [...] gmail.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 29 07:05:53 2008, david.sitsky@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am trying to install Catalyst on a Windows XP machine with
&gt; Strawberry Perl 5.10.0.1.
&gt; 
&gt; Unfortunately the tests seem to hang in the same spot - here is the
&gt; relevant output.  Is there anything I can do to get this working?
</div>
I tried to fix the tests &#40;01live.t, 04cgi.t&#41; to pass on Windows with 
perl 5.10.0.

The 01live test hangs because the server is not ready for fetching.
Therefore the waiting time is increased to 3 sec.
The SlowServer part of test fails only occasionaly: it uses the same 
port as the previous one. When the port is different, it&#39;s ok, so the 
port number is increased by 1.

The 04cgi fixed test uses the same waiting time &#40;3 sec&#41; after starting.
#20 and #21 use http 0.9 and this protocol fails every time so I 
changed the proto to http 1.0. Don&#39;t know why the server doesn&#39;t accept 
this protocol.

Both patches are included.

Radek
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- 04cgi.t	2008-03-20 19:18:00.000000000 +0000
+++ 04cgi.new	2008-12-27 13:32:48.250270400 +0000
@@ -1,3 +1,5 @@
+# -*- perl -*-
+
 use Test::More;
 use Socket;
 use strict;
@@ -38,7 +40,7 @@
 
   like&#40;$pid, &#39;/^-?\d+$/&#39;, &#39;pid is numeric&#39;&#41;;
 
-  select&#40;undef,undef,undef,0.2&#41;; # wait a sec
+  sleep 3; # wait a sec
   like&#40;fetch&#40;&#34;GET / HTTP/1.1&#34;,&#34;&#34;&#41;, &#39;/NOFILE/&#39;, &#39;no file&#39;&#41;;
 
   foreach my $method &#40;keys&#40;%methods&#41;&#41; {
@@ -60,13 +62,13 @@
   }
 
   like&#40;
-       fetch&#40;&#34;GET /cgitest/REQUEST_URI?foo%3Fbar&#34;,&#34;&#34;&#41;,
+       fetch&#40;&#34;GET /cgitest/REQUEST_URI?foo%3Fbar HTTP/1.0&#34;,&#34;&#34;&#41;,
        qr/foo%3Fbar/,
        &#34;Didn&#39;t decode already&#34;
       &#41;;
 
   like&#40;
-       fetch&#40;&#34;GET /cgitest/foo%2Fbar/PATH_INFO&#34;,&#34;&#34;&#41;,
+       fetch&#40;&#34;GET /cgitest/foo%2Fbar/PATH_INFO HTTP/1.0&#34;,&#34;&#34;&#41;,
        qr|foo/bar|,
        &#34;Did decode already&#34;
       &#41;;
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- 01live.t	2008-06-05 21:41:15.000000000 +0000
+++ 01live.new	2008-12-27 13:33:13.166097600 +0000
@@ -140,11 +140,12 @@
 
 sub run_server_tests {
     my $class = shift;
+    $PORT += 1 if $class eq &#39;SlowServer&#39;;
     my $s = $class-&gt;new&#40;$PORT&#41;;
     is&#40;$s-&gt;port&#40;&#41;,$PORT,&#34;Constructor set port correctly&#34;&#41;;
 
     my $pid=$s-&gt;background&#40;&#41;;
-    select&#40;undef,undef,undef,0.2&#41;; # wait a sec
+    sleep 3; # wait a sec
 
     like&#40;$pid, &#39;/^-?\d+$/&#39;, &#39;pid is numeric&#39;&#41;;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Dec&nbsp;31&nbsp;16:04:44&nbsp;2008</span>
    <span class="description">gyles19 [...] visi.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">[snip]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tried to fix the tests &#40;01live.t, 04cgi.t&#41; to pass on Windows with 
&gt; perl 5.10.0.
&gt; 
&gt; The 01live test hangs because the server is not ready for fetching.
&gt; Therefore the waiting time is increased to 3 sec.
&gt; The SlowServer part of test fails only occasionaly: it uses the same 
&gt; port as the previous one. When the port is different, it&#39;s ok, so the 
&gt; port number is increased by 1.
&gt; 
&gt; The 04cgi fixed test uses the same waiting time &#40;3 sec&#41; after starting.
&gt; #20 and #21 use http 0.9 and this protocol fails every time so I 
&gt; changed the proto to http 1.0. Don&#39;t know why the server doesn&#39;t accept 
&gt; this protocol.
</div>[snip]

There is mention of this issue on one or more of the other open bug reports.
I am seeing the same problem on linux/perl 5.8.8.  I found that the 
attached one-line patch fixes the failures in 01live.t, at least running
on my ancient laptop.
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff --git a/t/01live.t b/t/01live.t
index 78593f4..74bebd4 100644
--- a/t/01live.t
+++ b/t/01live.t
@@ -20,8 +20,8 @@ package SlowServer;
 use base qw&#40;HTTP::Server::Simple::CGI&#41;;
 sub setup_listener {
     my $self = shift;
-    sleep 2;
     $self-&gt;SUPER::setup_listener&#40;&#41;;
+    sleep 2;
 }
 1;
 package main;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;02&nbsp;12:10:18&nbsp;2009</span>
    <span class="description">jesse [...] fsck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38011] Tests hang on Windows XP with Strawberry Perl 5.10.0.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 2 Jan 2009 12:10:11 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;gyles19 [...] visi.com via RT&#34; &lt;bug-HTTP-Server-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jesse Vincent &lt;jesse [...] fsck.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Gyles,

Thanks, applied.



On Wed 31.Dec&#39;08 at 16:04:45 -0500, gyles19@visi.com via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: HTTP-Server-Simple
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=38011">https://rt.cpan.org/Ticket/Display.html?id=38011</a></span> &gt;
&gt; 
&gt; [snip]
<div class="message-stanza open">&gt; &gt; I tried to fix the tests &#40;01live.t, 04cgi.t&#41; to pass on Windows with 
&gt; &gt; perl 5.10.0.
&gt; &gt; 
&gt; &gt; The 01live test hangs because the server is not ready for fetching.
&gt; &gt; Therefore the waiting time is increased to 3 sec.
&gt; &gt; The SlowServer part of test fails only occasionaly: it uses the same 
&gt; &gt; port as the previous one. When the port is different, it&#39;s ok, so the 
&gt; &gt; port number is increased by 1.
&gt; &gt; 
&gt; &gt; The 04cgi fixed test uses the same waiting time &#40;3 sec&#41; after starting.
&gt; &gt; #20 and #21 use http 0.9 and this protocol fails every time so I 
&gt; &gt; changed the proto to http 1.0. Don&#39;t know why the server doesn&#39;t accept 
&gt; &gt; this protocol.
</div>&gt; [snip]
&gt; 
&gt; There is mention of this issue on one or more of the other open bug reports.
&gt; I am seeing the same problem on linux/perl 5.8.8.  I found that the 
&gt; attached one-line patch fixes the failures in 01live.t, at least running
&gt; on my ancient laptop.
&gt; 
&gt; 
</div>


-- 
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/549579/276658/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 194b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;02&nbsp;12:18:48&nbsp;2009</span>
    <span class="description">jesse [...] fsck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> undisclosed-recipients: ;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #38011] Tests hang on Windows XP with Strawberry Perl 5.10.0.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 2 Jan 2009 12:18:42 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Radek via RT &lt;bug-HTTP-Server-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jesse Vincent &lt;jesse [...] fsck.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">


On Sat 27.Dec&#39;08 at  9:37:45 -0500, Radek via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: HTTP-Server-Simple
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=38011">https://rt.cpan.org/Ticket/Display.html?id=38011</a></span> &gt;
&gt; 
&gt; On Tue Jul 29 07:05:53 2008, david.sitsky@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; I am trying to install Catalyst on a Windows XP machine with
&gt; &gt; Strawberry Perl 5.10.0.1.
&gt; &gt; 
&gt; &gt; Unfortunately the tests seem to hang in the same spot - here is the
&gt; &gt; relevant output.  Is there anything I can do to get this working?
</div>&gt; 
&gt; I tried to fix the tests &#40;01live.t, 04cgi.t&#41; to pass on Windows with 
&gt; perl 5.10.0.
&gt; 
&gt; The 01live test hangs because the server is not ready for fetching.
&gt; Therefore the waiting time is increased to 3 sec.
&gt; The SlowServer part of test fails only occasionaly: it uses the same 
&gt; port as the previous one. When the port is different, it&#39;s ok, so the 
&gt; port number is increased by 1.
</div>
Ok. Applied

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The 04cgi fixed test uses the same waiting time &#40;3 sec&#41; after starting.
</div>
Applied, even though it makes me a little nervous that we need to.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #20 and #21 use http 0.9 and this protocol fails every time so I 
&gt; changed the proto to http 1.0. Don&#39;t know why the server doesn&#39;t accept 
&gt; this protocol.
</div>
The server sure should be accepting this protocol. Rather than changing
the tests to accept the broken behaviour, I&#39;d hugely appreciate some
triage to find the server bug ;&#41; &#40;It passes for me&#41;;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Both patches are included.
&gt; 
&gt; Radek
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
</div>



-- 
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/549582/276663/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 194b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;05&nbsp;03:39:15&nbsp;2009</span>
    <span class="description">raherh [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> jesse [...] fsck.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Jan 02 12:18:48 2009, jesse@fsck.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The 04cgi fixed test uses the same waiting time &#40;3 sec&#41; after 
</div></div>starting.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Applied, even though it makes me a little nervous that we need to.
</div>
Now even without any waiting time it&#39;s ok. Don&#39;t know.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The server sure should be accepting this protocol. Rather than 
</div>changing
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the tests to accept the broken behaviour, I&#39;d hugely appreciate some
&gt; triage to find the server bug ;&#41; &#40;It passes for me&#41;;
</div>
When fetching with 0.9 protocol the line should read:

fetch&#40;&#34;GET /cgitest/REQUEST_URI?foo%3Fbar&#34;&#41;, not

fetch&#40;&#34;GET /cgitest/REQUEST_URI?foo%3Fbar&#34;,&#34;&#34;&#41; and

the same for:
fetch&#40;&#34;GET /cgitest/foo%2Fbar/PATH_INFO&#34;&#41;.

The second parameter is intended for optional entity-body with http 1.0 
and should be missing for http 0.9.
The message is being composed like this:
$message = join &#34;&#34;, map { &#34;$_\015\012&#34; } @_;
So there&#39;s another obligatory crlf for http 1.0.

I think simple-response &#40;http 0.9&#41; should follow the rf1945 and send 
back only entity-body without any headers though it doesn&#39;t affect 
tests.
It&#39;s being used with H::S::S in bad_request, H::S::S::CGI in 
bundle_request and in handle_request of package CGIServer with 04cgi.t 
where it could be something along these lines:

    my $file=&#40;split&#40;&#39;/&#39;,$cgi-&gt;path_info&#41;&#41;[-1]||&#39;NOFILE&#39;;
    $file=~s/\s+//g;
    $file||=&#39;NOFILE&#39;;
    my $proto = &#40;split&#40;&#39;/&#39;,$cgi-&gt;server_protocol&#41;&#41;[1]||1.0;
    print &#34;HTTP/1.0 200 OK\r\n&#34; if $proto &gt;= 1;
    print &#34;Content-Type: text/html\r\nContent-Length: &#34; if $proto &gt;= 1;
    my $response;
    if&#40;$methods{$file}&#41; {
      $response = &#34;$file: &#34;.$cgi-&gt;$file&#40;&#41;;
    } elsif&#40;$envvars{$file}&#41; {
      $response=&#34;$file: $ENV{$file}&#34;;
    } else {
      $response=$file;
    }
    print length&#40;$response&#41;, &#34;\r\n\r\n&#34; if $proto &gt;= 1;
    print $response;
   }

htp

Radek
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;02&nbsp;11:15:00&nbsp;2015</span>
    <span class="description">cpan [...] jibsheet.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m not seeing hangs from the smokers on more modern strawberry perls, please reopen if you still see the failures.

-kevin
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;02&nbsp;11:15:12&nbsp;2015</span>
    <span class="description">cpan [...] jibsheet.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
