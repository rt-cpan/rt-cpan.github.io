<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #39593 for Tk: Mac OS X Leopard: Bus error</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #39593 for Tk: Mac OS X Leopard: Bus error</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Tk/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Tk/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Tk/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Tk/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Tk">Tk CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">39593</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Tk/Active/">Tk</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
please_dont_panic [...] yahoo.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-33610-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
804.026</li>
<li>
804.027</li>
<li>
804.028</li>
</ul>
    </td>
  </tr>
  <tr id="CF-33611-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;24&nbsp;14:13:59&nbsp;2008</span>
    <span class="description">please_dont_panic [...] yahoo.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Mac OS X Leopard: Bus error</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I&#39;m running perl v5.10.0.  I have tried installing 804.026, 804.027,
804.028 as well as the svn Tk.  I have had the same results with each
version.

Compile completes but &#39;make test&#39; returns:

cd pTk &#38;&#38; make DEFINE=&#34;&#34; LIBPERL_A=&#34;libperl.a&#34; LINKTYPE=&#34;dynamic&#34;
OPTIMIZE=&#34;-O3&#34; PREFIX=&#34;/usr/local&#34; PASTHRU_DEFINE=&#34;&#34; PASTHRU_INC=&#34;&#34;
cd zlib &#38;&#38; make libz.a &#34;CC=cc  &#34; RANLIB=&#34;/usr/bin/ar s&#34;
make[2]: `libz.a&#39; is up to date.
make  all-am
make[3]: Nothing to be done for `all-am&#39;.
make[2]: Nothing to be done for `all&#39;.
cd jpeg &#38;&#38; make libjpeg.a
make[2]: `libjpeg.a&#39; is up to date.
make[2]: Nothing to be done for `all&#39;.
/usr/local/bin/perl &#34;-It&#34; &#34;-MTkTest&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&#34;check_display_harness; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
t/00wmcheck.t t/JP.t t/KR.t t/Require.t t/Tkxs.t t/Trace.t t/X.t
t/adjuster.t t/after.t t/async.t t/autoload.t t/balloon.t t/bind.t
t/browseentry-grabtest.t t/browseentry-subclassing.t t/browseentry.t
t/browseentry2.t t/button-tcl.t t/button.t t/canvas.t t/canvas2.t
t/coloreditor.t t/create.t t/cursor.t t/dash.t t/dialogbox.t t/dirtree.t
t/entry.t t/errordialog.t t/exefiles.t t/fbox.t t/fileevent.t
t/fileevent2.t t/fileselect.t t/font.t t/fork.t t/geomgr.t t/iso8859-1.t
t/leak.t t/list.t t/listbox.t t/listvar.t t/magic.t t/mega.t t/msgbox.t
t/mwm.t t/optmenu.t t/photo.t t/pixmap.t t/progbar.t t/property.t
t/regexp.t t/rotext.t t/slaves.t t/table.t t/text.t t/textundo.t
t/trace1.t t/unicode.t t/widget.t t/wm-tcl.t t/wm-time.t t/wm.t
t/zzHList.t t/zzPhoto.t t/zzScrolled.t t/zzText.t t/zzTixGrid.t
make: *** [test_dynamic] Bus error
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;24&nbsp;19:14:34&nbsp;2008</span>
    <span class="description">slaven [...] rezic.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39593] Mac OS X Leopard: Bus error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> 25 Sep 2008 01:09:03 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Tk [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Slaven Rezic &lt;slaven [...] rezic.de&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Tyson Koger via RT&#34; &lt;bug-Tk@rt.cpan.org&gt; writes:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Sep 24 14:13:59 2008: Request 39593 was acted upon.
&gt; Transaction: Ticket created by tkoger
&gt;        Queue: Tk
&gt;      Subject: Mac OS X Leopard: Bus error
&gt;    Broken in: 804.026, 804.027, 804.028
&gt;     Severity: Normal
&gt;        Owner: Nobody
&gt;   Requestors: please_dont_panic@yahoo.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39593">http://rt.cpan.org/Ticket/Display.html?id=39593</a></span> &gt;
&gt; 
&gt; 
&gt; Hello,
&gt; 
&gt; I&#39;m running perl v5.10.0.  I have tried installing 804.026, 804.027,
&gt; 804.028 as well as the svn Tk.  I have had the same results with each
&gt; version.
&gt; 
&gt; Compile completes but &#39;make test&#39; returns:
&gt; 
&gt; cd pTk &#38;&#38; make DEFINE=&#34;&#34; LIBPERL_A=&#34;libperl.a&#34; LINKTYPE=&#34;dynamic&#34;
&gt; OPTIMIZE=&#34;-O3&#34; PREFIX=&#34;/usr/local&#34; PASTHRU_DEFINE=&#34;&#34; PASTHRU_INC=&#34;&#34;
&gt; cd zlib &#38;&#38; make libz.a &#34;CC=cc  &#34; RANLIB=&#34;/usr/bin/ar s&#34;
&gt; make[2]: `libz.a&#39; is up to date.
&gt; make  all-am
&gt; make[3]: Nothing to be done for `all-am&#39;.
&gt; make[2]: Nothing to be done for `all&#39;.
&gt; cd jpeg &#38;&#38; make libjpeg.a
&gt; make[2]: `libjpeg.a&#39; is up to date.
&gt; make[2]: Nothing to be done for `all&#39;.
&gt; /usr/local/bin/perl &#34;-It&#34; &#34;-MTkTest&#34; &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;check_display_harness; test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34;
&gt; t/00wmcheck.t t/JP.t t/KR.t t/Require.t t/Tkxs.t t/Trace.t t/X.t
&gt; t/adjuster.t t/after.t t/async.t t/autoload.t t/balloon.t t/bind.t
&gt; t/browseentry-grabtest.t t/browseentry-subclassing.t t/browseentry.t
&gt; t/browseentry2.t t/button-tcl.t t/button.t t/canvas.t t/canvas2.t
&gt; t/coloreditor.t t/create.t t/cursor.t t/dash.t t/dialogbox.t t/dirtree.t
&gt; t/entry.t t/errordialog.t t/exefiles.t t/fbox.t t/fileevent.t
&gt; t/fileevent2.t t/fileselect.t t/font.t t/fork.t t/geomgr.t t/iso8859-1.t
&gt; t/leak.t t/list.t t/listbox.t t/listvar.t t/magic.t t/mega.t t/msgbox.t
&gt; t/mwm.t t/optmenu.t t/photo.t t/pixmap.t t/progbar.t t/property.t
&gt; t/regexp.t t/rotext.t t/slaves.t t/table.t t/text.t t/textundo.t
&gt; t/trace1.t t/unicode.t t/widget.t t/wm-tcl.t t/wm-time.t t/wm.t
&gt; t/zzHList.t t/zzPhoto.t t/zzScrolled.t t/zzText.t t/zzTixGrid.t
&gt; make: *** [test_dynamic] Bus error
&gt; 
</div>
Can you retry again, but first remove the &#34;check_display_harness;&#34;
call from the Makefile &#40;there should be two places&#41;.

Do you have a core dump? If so, can you load the core dump into gdb or
similar and show me the backtrace?

Regards,
    Slaven

-- 
Slaven Rezic - slaven &lt;at&gt; rezic &lt;dot&gt; de

    tktimex - time recording tool
    <span class="clickylink"><a target="new" rel="nofollow" href="http://sourceforge.net/projects/ptktools/">http://sourceforge.net/projects/ptktools/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;24&nbsp;19:14:46&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;26&nbsp;17:53:33&nbsp;2008</span>
    <span class="description">please_dont_panic [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> please_dont_panic [...] yahoo.com</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;11&nbsp;21:32:32&nbsp;2009</span>
    <span class="description">anders.glans [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> anders.glans [...] gmail.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

Has there been any progress on this bug? I am running perl 5.8.9 and I
see basically the same as tkoger when trying to install Tk 804.028. I get a 

make: *** [test_dynamic] Bus error

when trying make test. Removing &#34;check_display_harness;&#34; from Makefile,
PNG/Makefile and JPEG/Makefile results in the Bus error going away, but
most of the tests fail.




On Fri Sep 26 17:53:33 2008, tkoger wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you.  I removed the &#34;check_display_harness;&#34; call from the
&gt; Makefile in both places and I&#39;m not getting the bus error any longer.
&gt; However &#34;make test&#34; is still failing with the following:
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;13&nbsp;21:55:22&nbsp;2009</span>
    <span class="description">anders.glans [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I&#39;ve tried a few more things. I updated perl to 5.10.0 and rebuilt all
modules and reinstalled a couple of other things that looked vaguely
perl-related. make test still results in a Bus error.

p5-tk from macports installs, but any attempt to use the module results
in Bus error. I made the file test.pl:

{{{
#!/opt/local/bin/perl
   use Tk;
   print &#34;Hello World/n&#34;;
}}}

{{{
$ perl test.pl 
Bus error
}}}

Running in gdb results in:

{{{
$ gdb perl
GNU gdb 6.3.50-20050815 &#40;Apple version gdb-962&#41; &#40;Sat Jul 26 08:14:40 UTC
2008&#41;
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain
conditions.
Type &#34;show copying&#34; to see the conditions.
There is absolutely no warranty for GDB.  Type &#34;show warranty&#34; for details.
This GDB was configured as &#34;i386-apple-darwin&#34;...Reading symbols for
shared libraries .... done

&#40;gdb&#41; set args test.pl
&#40;gdb&#41; run
Starting program: /opt/local/bin/perl test.pl
Reading symbols for shared libraries +++. done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries . done
Reading symbols for shared libraries .... done

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_PROTECTION_FAILURE at address: 0x00000009
0x005bc68a in InitVtabs &#40;&#41;
&#40;gdb&#41; where
#0  0x005bc68a in InitVtabs &#40;&#41;
#1  0x005bdfc9 in Boot_Glue &#40;&#41;
#2  0x005b294f in boot_Tk &#40;&#41;
#3  0x0009a3d4 in Perl_pp_entersub &#40;&#41;
#4  0x00090719 in Perl_runops_standard &#40;&#41;
#5  0x0008a1d5 in Perl_call_sv &#40;&#41;
#6  0x0008a5a4 in Perl_call_list &#40;&#41;
#7  0x0002fb25 in S_process_special_blocks &#40;&#41;
#8  0x00041ded in Perl_newATTRSUB &#40;&#41;
#9  0x000426b9 in Perl_utilize &#40;&#41;
#10 0x0002d41a in Perl_yyparse &#40;&#41;
#11 0x0008ed41 in S_parse_body &#40;&#41;
#12 0x00090623 in perl_parse &#40;&#41;
#13 0x00001ae7 in main &#40;&#41;
}}}

I don&#39;t really know either perl nor gdb, so I am posting this
information in the hopes that it is helpful in hunting down the reason
for the Bus error. I&#39;ll happily supply more/other information if required.



On Wed Feb 11 21:32:32 2009, AndersG wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; Has there been any progress on this bug? I am running perl 5.8.9 and I
&gt; see basically the same as tkoger when trying to install Tk 804.028. I
</div>get a 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; make: *** [test_dynamic] Bus error
&gt; 
&gt; when trying make test. Removing &#34;check_display_harness;&#34; from Makefile,
&gt; PNG/Makefile and JPEG/Makefile results in the Bus error going away, but
&gt; most of the tests fail.
&gt; 
&gt; 
&gt; 
&gt; 
&gt; On Fri Sep 26 17:53:33 2008, tkoger wrote:
<div class="message-stanza open">&gt; &gt; Thank you.  I removed the &#34;check_display_harness;&#34; call from the
&gt; &gt; Makefile in both places and I&#39;m not getting the bus error any longer.
&gt; &gt; However &#34;make test&#34; is still failing with the following:
&gt; &gt; 
</div>&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Apr&nbsp;24&nbsp;15:36:39&nbsp;2009</span>
    <span class="description">TJENNESS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The problem with initialisation is related to some odd code in Tk/MMutil.pm. For some 
reason I don&#39;t understand the module modifies the link line to force each bundle file to be 
linked against libperl. By default perl does not build a shareable library so in that case each 
bundle &#40;Tk::Event, Tk etc&#41; gets its own private libperl. When the perl binary dynamically loads 
the Tk bundles the perl state in the main binary does not map to the bundle so the module 
itself segvs because none of the perl infrastructure is initialised &#40;the bundle can&#39;t see the 
parent perl state&#41;.

Commenting out  line 301 in Tk/MMutil.pm &#40;I&#39;m using the developer build&#41; fixes most things 
for me. 

   if &#40; -e &#34;$Config{&#39;archlib&#39;}/CORE/$Config{&#39;libperl&#39;}&#34; &#41; {
#    $self-&gt;{&#39;LDDLFLAGS&#39;} .= &#34; -L\${PERL_ARCHLIB}/CORE -lperl &#34;;
   }

At least most tests now pass &#40;using bleadperl compiled with 64-bit mode enabled&#41;. I have no 
idea why there is a need to link against libperl. Maybe Tiger or Panther behaved differently.

As a final note, this works with /usr/bin/perl because the Apple perl is built using a shared 
library. So an alternate fix in the short term is for you to rebuild perl using a shared library.

Hope this helps everyone.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
