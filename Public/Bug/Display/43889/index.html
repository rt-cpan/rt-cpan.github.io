<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #43889 for Win32-Clipboard: Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #43889 for Win32-Clipboard: Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Win32-Clipboard">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Win32-Clipboard">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Win32-Clipboard">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Win32-Clipboard">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Win32-Clipboard">Win32-Clipboard CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">43889</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Win32-Clipboard">Win32-Clipboard</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KWittrock [...] web.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-35466-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-35467-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=43889">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-573589" href="/Public/Bug/Display.html?id=43889#txn-573589">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;05&nbsp;16:45:46&nbsp;2009</span>
    <span class="description">KWittrock [...] web.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 5 Mar 2009 17:06:44 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Win32-Clipboard [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;K. Wittrock&#34; &lt;KWittrock [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/573589/289535/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/289535">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 388b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear maintainer of Win32::Clipboard,

MS Windows uses \r\n for Newline, while Perl uses \n. So Win32::Clipboard::GetText&#40;&#41;
should perform a &#34;$text =~ s/\r$//mg;&#34; before returning the text. Otherwise the \r
is treated as part of the text by Perl.

I use Windows XP with SP3 and ActivePerl 5.8.8. I observed the error with Win32::Clipboard versions 0.52 and 0.55.

Regards

Klaus Wittrock
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-573856" href="/Public/Bug/Display.html?id=43889#txn-573856">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;06&nbsp;07:00:27&nbsp;2009</span>
    <span class="description">dbecoll [...] roadrunner.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 06 Mar 2009 04:00:09 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-Clipboard [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bill Luebkert &lt;dbecoll [...] roadrunner.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/573856/289708/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/289708">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 718b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">K. Wittrock via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; MS Windows uses \r\n for Newline, while Perl uses \n. So Win32::Clipboard::GetText&#40;&#41;
&gt; should perform a &#34;$text =~ s/\r$//mg;&#34; before returning the text. Otherwise the \r
&gt; is treated as part of the text by Perl.
</div>
That&#39;s kinda debatable.  GetText returns the string contained in the
clipboard - I see no conversion documented or implied.  But it would
be nice if it stated how it handled newlines just for this type of
situation.

The text in the clipboard could possibly be text without \r&#39;s too.
If you always strip the \r, you eliminate the ability to get a DOS
CRLF from the clipboard even if you wanted one.

I&#39;d rather leave it and document it or add a strip option than change
it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-573857" href="/Public/Bug/Display.html?id=43889#txn-573857">#</a>      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;06&nbsp;07:00:27&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-574851" href="/Public/Bug/Display.html?id=43889#txn-574851">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;08&nbsp;16:34:03&nbsp;2009</span>
    <span class="description">KWittrock [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 8 Mar 2009 13:07:47 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Win32-Clipboard [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;K. Wittrock&#34; &lt;KWittrock [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/574851/290313/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290313">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----- 
From: &#34;Bill Luebkert via RT&#34; &lt;bug-Win32-Clipboard@rt.cpan.org&gt;
To: &lt;KWittrock@web.de&gt;
Sent: Friday, March 06, 2009 1:00 PM
Subject: Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines


<div class="message-stanza open">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=43889">http://rt.cpan.org/Ticket/Display.html?id=43889</a></span> &gt;
&gt;
&gt; K. Wittrock via RT wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; MS Windows uses \r\n for Newline, while Perl uses \n. So Win32::Clipboard::GetText&#40;&#41;
&gt;&gt; should perform a &#34;$text =~ s/\r$//mg;&#34; before returning the text. Otherwise the \r
&gt;&gt; is treated as part of the text by Perl.
</div>&gt;
&gt; That&#39;s kinda debatable.  GetText returns the string contained in the
&gt; clipboard - I see no conversion documented or implied.  But it would
&gt; be nice if it stated how it handled newlines just for this type of
&gt; situation.
&gt;
&gt; The text in the clipboard could possibly be text without \r&#39;s too.
</div>
A \n without a preceeding \r is not a line end marker on Windows. It is not touched by my suggestion &#40;note the $ and the mg in the 
regex&#41;. To see the difference, open a text file that was created on Linux by Notepad.

<div class="message-stanza open">&gt; If you always strip the \r, you eliminate the ability to get a DOS
&gt; CRLF from the clipboard even if you wanted one.
&gt;
&gt; I&#39;d rather leave it and document it or add a strip option than change
&gt; it.
</div>
Thank you for reacting so fast on my report. I thought over your arguments and I believe ttat adding a strip option would be a 
practical solution. I suggest that you add a method &#34;Binary&#34; to Clipboard to turn line end conversion on or off. Hopefully the 
default will be Binary off &#40;= do convert line end markers from Windows \r\n to Perl \n&#41;. I think this will be what the user needs in 
most cases.

Here are some examples of the trouble that is caused by not converting: chomp will not remove trailing whitespace, because it is no 
longer trailing. /a$/ will not match lines ending with &#34;a&#34;, although you know there are some. Or: Open a text file by Notepad, use 
&#34;ctrl-a ctrl-c&#34; to send it to the clipboard, fetch it by GetText, and save it as a new file. Both files should be identical, but 
they aren&#39;t. At the end of each line you have \r\r\n &#40;hex 0d0d0a&#41;.

Of course I can do the &#34;$text =~ s/\r$//mg;&#34; by myself after each call to GetText. And I can automate this with a small subroutine 
myGetText. Then this should be told in the docu. But I would prefer a solution within GetText.

Thank you very much for your kind help. Please feel free to contact me if you want additional info.

Kind regards

Klaus Wittrock
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575085" href="/Public/Bug/Display.html?id=43889#txn-575085">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;06:01:04&nbsp;2009</span>
    <span class="description">dbecoll [...] roadrunner.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 09 Mar 2009 03:00:26 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-Clipboard [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bill Luebkert &lt;dbecoll [...] roadrunner.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575085/290433/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290433">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 855b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">K. Wittrock via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; A \n without a preceeding \r is not a line end marker on Windows. It is not touched by my suggestion &#40;note the $ and the mg in the 
&gt; regex&#41;. To see the difference, open a text file that was created on Linux by Notepad.
</div>
Not implying otherwise - just stating that \r\n may or may not be in the clipboard.
Just because you&#39;re on Windoze, doesn&#39;t mean that there will always be Windoze
text in the clipboard.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Of course I can do the &#34;$text =~ s/\r$//mg;&#34; by myself after each call to GetText. And I can automate this with a small subroutine 
&gt; myGetText. Then this should be told in the docu. But I would prefer a solution within GetText.
</div>
At least if they document it, they are covering themselves.  I suspect changing
the normal behavior could be problematic for some, so I would be against changing
the default behavior.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575157" href="/Public/Bug/Display.html?id=43889#txn-575157">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;09:18:05&nbsp;2009</span>
    <span class="description">KWittrock [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 9 Mar 2009 14:16:39 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Win32-Clipboard [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;K. Wittrock&#34; &lt;KWittrock [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575157/290470/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290470">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----- 
From: &#34;Bill Luebkert via RT&#34; &lt;bug-Win32-Clipboard@rt.cpan.org&gt;
To: &lt;KWittrock@web.de&gt;
Sent: Monday, March 09, 2009 11:01 AM
Subject: Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43889">https://rt.cpan.org/Ticket/Display.html?id=43889</a></span> &gt;

<div class="message-stanza open">&gt; K. Wittrock via RT wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; A \n without a preceeding \r is not a line end marker on Windows. It is not touched by my suggestion &#40;note the $ and the mg in 
&gt;&gt; the
&gt;&gt; regex&#41;. To see the difference, open a text file that was created on Linux by Notepad.
</div>&gt;
&gt; Not implying otherwise - just stating that \r\n may or may not be in the clipboard.
&gt; Just because you&#39;re on Windoze, doesn&#39;t mean that there will always be Windoze
&gt; text in the clipboard.
</div>
But the likelihood is certainly high. That&#39;s why I suggested to have Binary off as the default.

<div class="message-stanza open">&gt;
<div class="message-stanza open">&gt;&gt; Of course I can do the &#34;$text =~ s/\r$//mg;&#34; by myself after each call to GetText. And I can automate this with a small 
&gt;&gt; subroutine
&gt;&gt; myGetText. Then this should be told in the docu. But I would prefer a solution within GetText.
</div>&gt;
&gt; At least if they document it, they are covering themselves.  I suspect changing
&gt; the normal behavior could be problematic for some, so I would be against changing
&gt; the default behavior.
</div>
Perl developers are often anxious about backward compatibility. Ok, go ahead.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575220" href="/Public/Bug/Display.html?id=43889#txn-575220">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;11:43:07&nbsp;2009</span>
    <span class="description">dbecoll [...] roadrunner.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 09 Mar 2009 08:41:46 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-Clipboard [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Bill Luebkert &lt;dbecoll [...] roadrunner.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575220/290504/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290504">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 329b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">K. Wittrock via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Perl developers are often anxious about backward compatibility. Ok, go ahead.
</div>
Go ahead and what ?  I&#39;m not the maintainer - just another user.

All I&#39;m saying is that the maintainer should document the newline behavior
and possibly make an addition as you requested for an option to convert
them.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575291" href="/Public/Bug/Display.html?id=43889#txn-575291">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;14:10:03&nbsp;2009</span>
    <span class="description">KWittrock [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 9 Mar 2009 19:08:32 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Win32-Clipboard [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;K. Wittrock&#34; &lt;KWittrock [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575291/290555/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290555">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----- 
From: &#34;Bill Luebkert via RT&#34; &lt;bug-Win32-Clipboard@rt.cpan.org&gt;
To: &lt;KWittrock@web.de&gt;
Sent: Monday, March 09, 2009 4:43 PM
Subject: Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43889">https://rt.cpan.org/Ticket/Display.html?id=43889</a></span> &gt;

<div class="message-stanza open">&gt; K. Wittrock via RT wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; Perl developers are often anxious about backward compatibility. Ok, go ahead.
</div>&gt;
&gt; Go ahead and what ?  I&#39;m not the maintainer - just another user.
&gt;
&gt; All I&#39;m saying is that the maintainer should document the newline behavior
&gt; and possibly make an addition as you requested for an option to convert
&gt; them.
</div>
Sorry, I wasn&#39;t aware of this. I got your email in response to my error report, so I assumed it came from the maintainer. Did you 
pass your suggestion to CPAN somehow, so it can be seen by the real maintainer? I don&#39;t know how to do this, I&#39;m not very familiar 
with CPAN.

What i wanted to say in my last reply is that backward compatibility should be weighted against other concerns such as comfort, ease 
of use, consistancy. I feel that backward compatibility sometimes causes confusing complexity in Perl. Maintainers should not only 
consider the past, but also the future.

Kind regards

Klaus Wittrock
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-575327" href="/Public/Bug/Display.html?id=43889#txn-575327">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;09&nbsp;14:51:27&nbsp;2009</span>
    <span class="description">jand [...] ActiveState.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 9 Mar 2009 11:26:41 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Win32-Clipboard [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jan Dubois&#34; &lt;jand [...] activestate.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/575327/290577/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290577">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; K. Wittrock via RT wrote:
<div class="message-stanza open">&gt; &gt; Perl developers are often anxious about backward compatibility. Ok,
&gt; &gt; go ahead.
</div>&gt;
&gt; Go ahead and what ? I&#39;m not the maintainer - just another user.
&gt;
&gt; All I&#39;m saying is that the maintainer should document the newline
&gt; behavior and possibly make an addition as you requested for an option
&gt; to convert them.
</div>
I&#39;m maintaining Win32::Clipboard, and I&#39;ll eventually make some changes
as indicated. I find it very useful to see these changes discussed a
little in public first, which is why I&#39;ve set up the RT queues to copy
all these messages to libwin32@perl.org as well.

I think the libwin32 modules are so old that they should not be changed
in incompatible ways, even if their interfaces &#40;and implementations&#41; are
sometimes quite gross. But they are a product of their time, have been
&#34;documented&#34; in published books and sample code all over the net, so we
should not break this body of existing code/knowledge.

Win32::Clipboard is especially hard to change as it has taken up a lot
of syntactic space that otherwise could be used to extend the
functionality in a compatible way &#40;it uses both object and function
interfaces, and has already up a lot of the obvious method names&#41;.

One other area that needs addressing is the CF_UNICODETEXT support,
which currently also just returns the raw data, and not a Perl string
with the correctly set up Unicode characters instead. There is then
another issue about Perl&#39;s internal encoding schizophrenia, that
sometimes it treas 8-bit data as being CP_ANSI encoded, and sometimes as
Latin1, but I don&#39;t want to go into that here.

Any update to the Win32::Clipboard interface should take these issues
into account and allow for further extensibility in the future.

My current way of thinking would be to leave the functional interface
alone, but add additional options to the constructor of the
Win32::Clipboard object. That should completely solve the backwards
compatibility issue and still provide a more perlish interface for new
code &#40;you could mix the old and the new APIs in the same program, which
is important if you use modules, which in turn use Win32::Clipboard&#41;.

I won&#39;t get around to actually *doing* anything about this until later
in April, but feel free to continue to file bugs / discuss changes; this
will help in shaping the final implementation.

Cheers,
-Jan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576015" href="/Public/Bug/Display.html?id=43889#txn-576015">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;10&nbsp;17:05:36&nbsp;2009</span>
    <span class="description">KWittrock [...] web.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 10 Mar 2009 19:31:48 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Win32-Clipboard [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;K. Wittrock&#34; &lt;KWittrock [...] web.de&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/576015/290959/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/290959">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----- 
From: &#34;jand@ActiveState.com via RT&#34; &lt;bug-Win32-Clipboard@rt.cpan.org&gt;
To: &lt;KWittrock@web.de&gt;
Sent: Monday, March 09, 2009 7:51 PM
Subject: RE: [rt.cpan.org #43889] Win32::Clipboard::GetText&#40;&#41; doesn&#39;t convert newlines


&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=43889">https://rt.cpan.org/Ticket/Display.html?id=43889</a></span> &gt;

<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; K. Wittrock via RT wrote:
<div class="message-stanza open">&gt;&gt; &gt; Perl developers are often anxious about backward compatibility. Ok,
&gt;&gt; &gt; go ahead.
</div>&gt;&gt;
&gt;&gt; Go ahead and what ? I&#39;m not the maintainer - just another user.
&gt;&gt;
&gt;&gt; All I&#39;m saying is that the maintainer should document the newline
&gt;&gt; behavior and possibly make an addition as you requested for an option
&gt;&gt; to convert them.
</div>&gt;
&gt; I&#39;m maintaining Win32::Clipboard, and I&#39;ll eventually make some changes
&gt; as indicated. I find it very useful to see these changes discussed a
&gt; little in public first, which is why I&#39;ve set up the RT queues to copy
&gt; all these messages to libwin32@perl.org as well.
&gt;
&gt; I think the libwin32 modules are so old that they should not be changed
&gt; in incompatible ways, even if their interfaces &#40;and implementations&#41; are
&gt; sometimes quite gross. But they are a product of their time, have been
&gt; &#34;documented&#34; in published books and sample code all over the net, so we
&gt; should not break this body of existing code/knowledge.
&gt;
&gt; Win32::Clipboard is especially hard to change as it has taken up a lot
&gt; of syntactic space that otherwise could be used to extend the
&gt; functionality in a compatible way &#40;it uses both object and function
&gt; interfaces, and has already up a lot of the obvious method names&#41;.
&gt;
&gt; One other area that needs addressing is the CF_UNICODETEXT support,
&gt; which currently also just returns the raw data, and not a Perl string
&gt; with the correctly set up Unicode characters instead. There is then
&gt; another issue about Perl&#39;s internal encoding schizophrenia, that
&gt; sometimes it treas 8-bit data as being CP_ANSI encoded, and sometimes as
&gt; Latin1, but I don&#39;t want to go into that here.
&gt;
&gt; Any update to the Win32::Clipboard interface should take these issues
&gt; into account and allow for further extensibility in the future.
&gt;
&gt; My current way of thinking would be to leave the functional interface
&gt; alone, but add additional options to the constructor of the
&gt; Win32::Clipboard object. That should completely solve the backwards
&gt; compatibility issue and still provide a more perlish interface for new
&gt; code &#40;you could mix the old and the new APIs in the same program, which
&gt; is important if you use modules, which in turn use Win32::Clipboard&#41;.
</div>
Thank you for your explanations. I admit that there are aspects of backward compatibility that I&#39;m not aware with the small Perl 
scripts which I write.

<div class="message-stanza open">&gt;
&gt; I won&#39;t get around to actually *doing* anything about this until later
&gt; in April, .....
</div>
As I stated earlier, the conversion of line end markers isn&#39;t a high priority matter, particulary since I know how to do it 
afterwards. So April is more than I could expect.

Greetings

Klaus
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.565533</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
