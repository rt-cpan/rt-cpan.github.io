<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #31794 for Storable: Reading 32-bit Storable files on 64-bit system</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #31794 for Storable: Reading 32-bit Storable files on 64-bit system</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Storable">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Storable">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Storable">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Storable">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://rt.perl.org/perlbug/">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Storable">Storable CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">31794</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Storable">Storable</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mark_young [...] hotmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29856-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29857-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=31794">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-400236" href="/Public/Bug/Display.html?id=31794#txn-400236">#</a>      
    </span>
    <span class="date">Fri&nbsp;Dec&nbsp;21&nbsp;06:10:13&nbsp;2007</span>
    <span class="description">mark_young [...] hotmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Reading 32-bit Storable files on 64-bit system</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 21 Dec 2007 11:09:42 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-storable [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Young &lt;mark_young [...] hotmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/400236/187545/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/187545">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi,
 
I have a perl application that has been running for many years on a 32-bit Debian system using perl v5.8.4 and Storable v2.14. That application has stored thousands of files in Storable format using the store&#40;&#41; command. I&#39;m attempting to migrate to a new 64-bit system using perl v5.8.8 and Storable v2.18. I&#39;ve found that retrieve&#40;&#41; on the 64-bit system can not read the 32-bit systems&#39; Storables. The error it produces is
 
Byte order is not compatible at blib/lib/Storable.pm &#40;autosplit into blib/lib/auto/Storable/_retrieve.al&#41; line 380, at ./try line 37
 
The problem appears to be that retrieve&#40;&#41; on the 64-bit system is not happy with the Storables longsize, ptrsize and byteorder. If I write out a Storable on each system and use the Storable::file_magic to read the details of the header I get these values that differ between the two systems.
 
32 bit system:        &#39;hdrsize&#39; =&gt; 15, &#39;version&#39; =&gt; &#39;2.7&#39;, &#39;longsize&#39; =&gt; 4, &#39;ptrsize&#39; =&gt; 4, &#39;byteorder&#39; =&gt; &#39;1234&#39;, 
 
64 bit system:        &#39;hdrsize&#39; =&gt; 19, &#39;version&#39; =&gt; &#39;2.7&#39;, &#39;longsize&#39; =&gt; 8, &#39;ptrsize&#39; =&gt; 8, &#39;byteorder&#39; =&gt; &#39;12345678&#39;,
 
I have subsequently found out, thanks to the perlmonks, that if I write a storable using nstore&#40;&#41; then the resultant file can be written by either then 32-bit or 64-bit system and can be read by either the 32-bit or 64-bit system. That&#39;s useful, but unfortunately I have many thousands of files that would need to be converted. So the reason I am writing to explain this is to ask whether you would consider that the 64-bit system should be able to read the store&#40;&#41; file written out by the 32-bit system? Shouldn&#39;t the 64-bit system be able to read the header of the Storable file and thus know how to read the contents?
 
My ideal situation would be to be able to enable the 64-bit system to read the 32-bit systems&#39; storables, preferably in a manner that means it could read Storables written out by either a 32-bit system or a 64-bit system, in the same way you get that capability if you&#39;d used nstore all along.
 
Please let me know what you think?
 
Best Regards,Mark Young
BTW - The incompatibility is the same between a 32-bit perl v5.8.8 Storable v2.18 system and a 64-bit perl v5.8.8 Storable v2.18 system.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/400236/187546/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/187546">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-807260" href="/Public/Bug/Display.html?id=31794#txn-807260">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;21&nbsp;12:19:33&nbsp;2010</span>
    <span class="description">walkeraj [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> walkeraj [...] gmail.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/807260/418551/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/418551">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This bug also affects me.  I receive the exact same error when 
attempting to retrieve&#40;&#41; a file that was created on a 32-bit system. 
[&#39;Byte order is not compatible at blib/lib/Storable.pm &#40;autosplit into 
blib/lib/auto/Storable/_retrieve.al&#41; line 380&#39;] 

Setting $Storable::interwork_56_64bit=1 does not solve the issue.Please 
let me know how I can provide further information to resolve this.

On Fri Dec 21 06:10:13 2007, mark_young@hotmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Hi,
&gt; 
&gt; I have a perl application that has been running for many years on a
&gt;    32-bit Debian system using perl v5.8.4 and Storable v2.14. That
&gt;    application has stored thousands of files in Storable format using
&gt;    the store&#40;&#41; command. I&#39;m attempting to migrate to a new 64-bit
&gt;    system using perl v5.8.8 and Storable v2.18. I&#39;ve found that
&gt;    retrieve&#40;&#41; on the 64-bit system can not read the 32-bit systems&#39;
&gt;    Storables. The error it produces is
&gt; 
&gt; Byte order is not compatible at blib/lib/Storable.pm &#40;autosplit into
&gt;    blib/lib/auto/Storable/_retrieve.al&#41; line 380, at ./try line 37
&gt; 
&gt; The problem appears to be that retrieve&#40;&#41; on the 64-bit system is not
&gt;    happy with the Storables longsize, ptrsize and byteorder. If I
&gt;    write out a Storable on each system and use the
&gt;    Storable::file_magic to read the details of the header I get these
&gt;    values that differ between the two systems.
&gt; 
&gt; 32 bit system:        &#39;hdrsize&#39; =&gt; 15, &#39;version&#39; =&gt; &#39;2.7&#39;, &#39;longsize&#39;
&gt;    =&gt; 4, &#39;ptrsize&#39; =&gt; 4, &#39;byteorder&#39; =&gt; &#39;1234&#39;,
&gt; 
&gt; 64 bit system:        &#39;hdrsize&#39; =&gt; 19, &#39;version&#39; =&gt; &#39;2.7&#39;, &#39;longsize&#39;
&gt;    =&gt; 8, &#39;ptrsize&#39; =&gt; 8, &#39;byteorder&#39; =&gt; &#39;12345678&#39;,
&gt; 
&gt; I have subsequently found out, thanks to the perlmonks, that if I
&gt;    write a storable using nstore&#40;&#41; then the resultant file can be
&gt;    written by either then 32-bit or 64-bit system and can be read by
&gt;    either the 32-bit or 64-bit system. That&#39;s useful, but
&gt;    unfortunately I have many thousands of files that would need to be
&gt;    converted. So the reason I am writing to explain this is to ask
&gt;    whether you would consider that the 64-bit system should be able to
&gt;    read the store&#40;&#41; file written out by the 32-bit system? Shouldn&#39;t
&gt;    the 64-bit system be able to read the header of the Storable file
&gt;    and thus know how to read the contents?
&gt; 
&gt; My ideal situation would be to be able to enable the 64-bit system to
&gt;    read the 32-bit systems&#39; storables, preferably in a manner that
&gt;    means it could read Storables written out by either a 32-bit system
&gt;    or a 64-bit system, in the same way you get that capability if
&gt;    you&#39;d used nstore all along.
&gt; 
&gt; Please let me know what you think?
&gt; 
&gt; Best Regards,Mark Young
&gt; BTW - The incompatibility is the same between a 32-bit perl v5.8.8
&gt;    Storable v2.18 system and a 64-bit perl v5.8.8 Storable v2.18
&gt;    system.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-807263" href="/Public/Bug/Display.html?id=31794#txn-807263">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;21&nbsp;12:19:33&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-807459" href="/Public/Bug/Display.html?id=31794#txn-807459">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;22&nbsp;04:42:57&nbsp;2010</span>
    <span class="description">mark_young [...] hotmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #31794] Reading 32-bit Storable files on 64-bit system</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 22 Jul 2010 08:42:46 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-storable [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Young &lt;mark_young [...] hotmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/807459/418660/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/418660">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hi Andrew,

I think I may have inadvertently deleted a mail from you. Did you mail me directly about this problem? I ended up writing a script that found and converted all of my perl programs &#38; storables to nstore format. I never heard any response to filing that bug.

Cheers,
Mark


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Subject: [rt.cpan.org #31794] Reading 32-bit Storable files on 64-bit system 
&gt; From: bug-Storable@rt.cpan.org
&gt; To: mark_young@hotmail.com
&gt; Date: Wed, 21 Jul 2010 12:19:33 -0400
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=31794">https://rt.cpan.org/Ticket/Display.html?id=31794</a></span> &gt;
&gt; 
&gt; This bug also affects me.  I receive the exact same error when 
&gt; attempting to retrieve&#40;&#41; a file that was created on a 32-bit system. 
&gt; [&#39;Byte order is not compatible at blib/lib/Storable.pm &#40;autosplit into 
&gt; blib/lib/auto/Storable/_retrieve.al&#41; line 380&#39;] 
&gt; 
&gt; Setting $Storable::interwork_56_64bit=1 does not solve the issue.Please 
&gt; let me know how I can provide further information to resolve this.
&gt; 
&gt; On Fri Dec 21 06:10:13 2007, mark_young@hotmail.com wrote:
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; Hi,
&gt; &gt; 
&gt; &gt; I have a perl application that has been running for many years on a
&gt; &gt;    32-bit Debian system using perl v5.8.4 and Storable v2.14. That
&gt; &gt;    application has stored thousands of files in Storable format using
&gt; &gt;    the store&#40;&#41; command. I&#39;m attempting to migrate to a new 64-bit
&gt; &gt;    system using perl v5.8.8 and Storable v2.18. I&#39;ve found that
&gt; &gt;    retrieve&#40;&#41; on the 64-bit system can not read the 32-bit systems&#39;
&gt; &gt;    Storables. The error it produces is
&gt; &gt; 
&gt; &gt; Byte order is not compatible at blib/lib/Storable.pm &#40;autosplit into
&gt; &gt;    blib/lib/auto/Storable/_retrieve.al&#41; line 380, at ./try line 37
&gt; &gt; 
&gt; &gt; The problem appears to be that retrieve&#40;&#41; on the 64-bit system is not
&gt; &gt;    happy with the Storables longsize, ptrsize and byteorder. If I
&gt; &gt;    write out a Storable on each system and use the
&gt; &gt;    Storable::file_magic to read the details of the header I get these
&gt; &gt;    values that differ between the two systems.
&gt; &gt; 
&gt; &gt; 32 bit system:        &#39;hdrsize&#39; =&gt; 15, &#39;version&#39; =&gt; &#39;2.7&#39;, &#39;longsize&#39;
&gt; &gt;    =&gt; 4, &#39;ptrsize&#39; =&gt; 4, &#39;byteorder&#39; =&gt; &#39;1234&#39;,
&gt; &gt; 
&gt; &gt; 64 bit system:        &#39;hdrsize&#39; =&gt; 19, &#39;version&#39; =&gt; &#39;2.7&#39;, &#39;longsize&#39;
&gt; &gt;    =&gt; 8, &#39;ptrsize&#39; =&gt; 8, &#39;byteorder&#39; =&gt; &#39;12345678&#39;,
&gt; &gt; 
&gt; &gt; I have subsequently found out, thanks to the perlmonks, that if I
&gt; &gt;    write a storable using nstore&#40;&#41; then the resultant file can be
&gt; &gt;    written by either then 32-bit or 64-bit system and can be read by
&gt; &gt;    either the 32-bit or 64-bit system. That&#39;s useful, but
&gt; &gt;    unfortunately I have many thousands of files that would need to be
&gt; &gt;    converted. So the reason I am writing to explain this is to ask
&gt; &gt;    whether you would consider that the 64-bit system should be able to
&gt; &gt;    read the store&#40;&#41; file written out by the 32-bit system? Shouldn&#39;t
&gt; &gt;    the 64-bit system be able to read the header of the Storable file
&gt; &gt;    and thus know how to read the contents?
&gt; &gt; 
&gt; &gt; My ideal situation would be to be able to enable the 64-bit system to
&gt; &gt;    read the 32-bit systems&#39; storables, preferably in a manner that
&gt; &gt;    means it could read Storables written out by either a 32-bit system
&gt; &gt;    or a 64-bit system, in the same way you get that capability if
&gt; &gt;    you&#39;d used nstore all along.
&gt; &gt; 
&gt; &gt; Please let me know what you think?
&gt; &gt; 
&gt; &gt; Best Regards,Mark Young
&gt; &gt; BTW - The incompatibility is the same between a 32-bit perl v5.8.8
&gt; &gt;    Storable v2.18 system and a 64-bit perl v5.8.8 Storable v2.18
&gt; &gt;    system.
</div>&gt; 
&gt; 
&gt; 
</div>                                          
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/807459/418661/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/418661">with headers</a>
<br />
<span class="downloadcontenttype">text/html 6.2k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-824703" href="/Public/Bug/Display.html?id=31794#txn-824703">#</a>      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;30&nbsp;19:29:13&nbsp;2010</span>
    <span class="description">bitcard_kiddm [...] ghctechnologies.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> bitcard_kiddm [...] ghctechnologies.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/824703/427242/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/427242">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have the same problem as Mark on Perl 5.10 as I move into the 64-bit
Linux world.

At the very least the error message should be changed. Byte order means
little-endian vs. big-endian. Both my Windows and Linux boxes are
running on Intel chips and therefore have the same byte order. The issue
is really 32-bit vs. 64-bit pointers and longs.

Although network order is the proscribed workaround, switching to it
degrades performance when operating on the same platform. And according
to the Storeable documentation, doubles get stored as text instead of
the exact machine representation with the consequence of losing +-Inf
and NaN &#40;often used to represent missing data&#41;. Since nearly all
platforms now use the IEEE Standard 754 standard to store floating point
numbers, it is annoying to unnecessarily lose precision when switching
between platforms.

It seems like reading 32-bit Storable files on 64-bit platforms would be
relatively easy to implement and a great convenience. In fact I also
think 32-bit platforms ought to make an effort to read 64-bit Storable
files too. Yes, an exception will have to be thrown if a 64-bit integer
that can not fit in 32-bits is encountered. And some very large data
structures will use pointers that are too big. But those large
structures aren&#39;t going to fit into the 32-bit Perl&#39;s memory space anyhow.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1702414" href="/Public/Bug/Display.html?id=31794#txn-1702414">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;02&nbsp;11:24:49&nbsp;2017</span>
    <span class="description">RURBAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1702414/914361/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/914361">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 353b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m working on a version which can read 32 from 64bit and vice versa on most platforms, when
the double size and kind is the same. 
Only on BE &#40;big-endian&#41; you cannot read LE files, you need to store netorder
via nstore there.

It&#39;s still in work, but passes all the interload tests.
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/rurban/Storable/commits/64read32">https://github.com/rurban/Storable/commits/64read32</a></span>

-- 
Reini Urban
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.421373</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
