<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #92496 for File-Sharedir-Install: Tests Fail under parallel testing</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #92496 for File-Sharedir-Install: Tests Fail under parallel testing</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=File-Sharedir-Install">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=File-Sharedir-Install">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=File-Sharedir-Install">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=File-Sharedir-Install">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Sharedir-Install">File-Sharedir-Install CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">92496</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=File-Sharedir-Install">File-Sharedir-Install</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KENTNL [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-228180-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.07    </td>
  </tr>
  <tr id="CF-228181-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




unique-names.01.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1319054/699516/unique-names.01.patch">
Tue Jan 28 11:23:57 2014 (4k) by perl [...] pied.nu
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=92496">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1318472" href="/Public/Bug/Display.html?id=92496#txn-1318472">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;27&nbsp;00:19:11&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests Fail under parallel testing</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1318472/699178/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699178">with headers</a>
<br />
<span class="downloadcontenttype">text/html 964b</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	exporting HARNESS_OPTIONS=jN for some values of N &gt;= 2 causes tests to fail in random ways based on the order and timing of tests:</p>

<p>
	&nbsp;</p>

<p>
	<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/ad7b7236-8096-11e3-bd44-3abc9783d55a">http://www.cpantesters.org/cpan/report/ad7b7236-8096-11e3-bd44-3abc9783d55a</a></span></p>

<p>
	<span class="clickylink"><a target="new" rel="nofollow" href="http://www.cpantesters.org/cpan/report/c6d535e4-8304-11e3-a4b1-4a592b17323a">http://www.cpantesters.org/cpan/report/c6d535e4-8304-11e3-a4b1-4a592b17323a</a></span><br>

	<br>

	The usual cause for this is several tests sharing the same paths or files for intermediate state, clobbering each others generated files at odd times, or some assumed test execution order resulting in one test requiring another test to generate a file prior to its execution.</p>

<p>
	&nbsp;</p>

<p>
	This failure is not machine or platform specific: <span class="clickylink"><a target="new" rel="nofollow" href="http://matrix.cpantesters.org/?dist=File-ShareDir-Install%200.07;reports=1">http://matrix.cpantesters.org/?dist=File-ShareDir-Install%200.07;reports=1</a></span></p>

<p>
	ETHER is somebody I know also executes tests with parallel harness.</p>

<p>
	And testing confirms failure does not occur for me without the parallelism.</p>

<p>
	&nbsp;</p>

<p>
	&nbsp;</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1318793" href="/Public/Bug/Display.html?id=92496#txn-1318793">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;27&nbsp;18:04:03&nbsp;2014</span>
    <span class="description">perl [...] pied.nu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1318793/699360/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699360">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 447b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the bug report.

This module will only ever be used to by other modules at install-time.  The shared path you refer to is only shared between modules/distributions.  If a distribution is being installed in parallel, it could trip over itself.  

That said, why would one ever install a distribution in parallel?  cpan and cpanm will prevent it.  This leaves 2 sysadmins doing &#34;make install&#34; at the same moment; an unlikely scenario.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1318794" href="/Public/Bug/Display.html?id=92496#txn-1318794">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;27&nbsp;18:04:03&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1318827" href="/Public/Bug/Display.html?id=92496#txn-1318827">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;27&nbsp;19:27:29&nbsp;2014</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1318827/699371/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699371">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 835b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2014-01-27 15:04:03, GWYN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you for the bug report.
&gt; 
&gt; This module will only ever be used to by other modules at install-
&gt; time.  The shared path you refer to is only shared between
&gt; modules/distributions.  If a distribution is being installed in
&gt; parallel, it could trip over itself.
&gt; 
&gt; That said, why would one ever install a distribution in parallel?
&gt; cpan and cpanm will prevent it.  This leaves 2 sysadmins doing &#34;make
&gt; install&#34; at the same moment; an unlikely scenario.
</div>
You misunderstand what is being parallelized -- it is not multiple installations, but multiple *tests from the same installation*.

See what happens when you do this in the repository:  prove -lr -j9 t

It is quite common to run tests in parallel. I have HARNESS_OPTIONS=j9 set in my main dev environment, as I have a quad-core cpu.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319044" href="/Public/Bug/Display.html?id=92496#txn-1319044">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;28&nbsp;11:20:04&nbsp;2014</span>
    <span class="description">perl [...] pied.nu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1319044/699507/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699507">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 406b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 27 19:27:29 2014, ETHER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You misunderstand what is being parallelized -- it is not multiple
&gt; installations, but multiple *tests from the same installation*.
</div>
I understand this.  I&#39;m just wondering how this would be a problem in production.  I was under the impression that parallel testing was used to flush out bugs in the module.  What you are bumping into is bugs in the unit tests.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319054" href="/Public/Bug/Display.html?id=92496#txn-1319054">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;28&nbsp;11:23:57&nbsp;2014</span>
    <span class="description">perl [...] pied.nu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1319054/699515/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699515">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 216b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Included patch adds $$ to temporary file and directory names.  This fixes this issue.  If this is satisfactory, I&#39;ll push another version out.

I would still like to know how running unit tests in parallel is useful.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> unique-names.01.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1319054/699516/unique-names.01.patch">Download unique-names.01.patch</a><br />
<span class="downloadcontenttype">text/x-diff 4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: t/10_makefile.t
===================================================================
--- t/10_makefile.t	&#40;revision 1612&#41;
+++ t/10_makefile.t	&#40;working copy&#41;
@@ -10,11 +10,11 @@
 
 use ExtUtils::MakeMaker;
 
-my $FILE = &#39;test-Makefile&#39;;
-rmtree&#40; [ qw&#40; tlib troot &#41; ], 0, 0 &#41;;
+my $FILE = &#34;test-$$-Makefile&#34;;
+rmtree&#40; [ qw&#40; tlib-$$ troot-$$ &#41; ], 0, 0 &#41;;
 END { 
     $FILE and -f $FILE and unlink $FILE;
-    rmtree&#40; [ qw&#40; tlib troot &#41; ], 0, 0 &#41;;
+    rmtree&#40; [ qw&#40; tlib-$$ troot-$$ &#41; ], 0, 0 &#41;;
 }
 
 use File::ShareDir::Install;
@@ -29,8 +29,8 @@
 WriteMakefile&#40;
     NAME              =&gt; &#39;File::ShareDir::Install&#39;,
     VERSION_FROM      =&gt; &#39;lib/File/ShareDir/Install.pm&#39;,
-    INST_LIB          =&gt; &#39;tlib/lib&#39;,
-    PREFIX            =&gt; &#39;troot&#39;,
+    INST_LIB          =&gt; &#34;tlib-$$/lib&#34;,
+    PREFIX            =&gt; &#34;troot-$$&#34;,
     MAKEFILE          =&gt; $FILE,
     PREREQ_PM         =&gt; {},
     &#40;$] &gt;= 5.005 ?     
@@ -59,7 +59,7 @@
 
 #####
 mysystem&#40; $Config{make}, &#39;-f&#39;, $FILE &#41;;
-my $TOP = &#34;tlib/lib/auto/share&#34;;
+my $TOP = &#34;tlib-$$/lib/auto/share&#34;;
 ok&#40; -f &#34;$TOP/dist/File-ShareDir-Install/honk&#34;, &#34;Copied to blib for dist&#34; &#41;;
 ok&#40; -f &#34;$TOP/module/My-Test/bonk&#34;, &#34;Copied to blib for module&#34; &#41;;
 ok&#40; -f &#34;$TOP/module/My-Test/again&#34;, &#34;Copied to blib for module again&#34; &#41;;
@@ -79,7 +79,7 @@
 }
 else {
     $TOP = &#34;$1/auto/share&#34;;
-    $TOP =~ s/\$\&#40;SITEPREFIX\&#41;/troot/;
+    $TOP =~ s/\$\&#40;SITEPREFIX\&#41;/troot-$$/;
     ok&#40; -f &#34;$TOP/dist/File-ShareDir-Install/honk&#34;, &#34;Copied to blib for dist&#34; &#41;;
     ok&#40; -f &#34;$TOP/module/My-Test/bonk&#34;, &#34;Copied to blib for module&#34; &#41;;
     ok&#40; -f &#34;$TOP/module/My-Test/again&#34;, &#34;Copied to blib for module again&#34; &#41;;
Index: t/12_delete.t
===================================================================
--- t/12_delete.t	&#40;revision 1612&#41;
+++ t/12_delete.t	&#40;working copy&#41;
@@ -10,11 +10,11 @@
 
 use ExtUtils::MakeMaker;
 
-my $FILE = &#39;test-Makefile&#39;;
-rmtree&#40; [ qw&#40; tlib troot &#41; ], 0, 0 &#41;;
+my $FILE = &#34;test-$$-Makefile&#34;;
+rmtree&#40; [ qw&#40; tlib-$$ troot-$$ &#41; ], 0, 0 &#41;;
 END { 
     $FILE and -f $FILE and unlink $FILE;
-    rmtree&#40; [ qw&#40; tlib troot &#41; ], 0, 0 &#41;;
+    rmtree&#40; [ qw&#40; tlib-$$ troot-$$ &#41; ], 0, 0 &#41;;
 }
 
 use File::ShareDir::Install;
@@ -30,8 +30,8 @@
 WriteMakefile&#40;
     NAME              =&gt; &#39;File::ShareDir::Install&#39;,
     VERSION_FROM      =&gt; &#39;lib/File/ShareDir/Install.pm&#39;,
-    INST_LIB          =&gt; &#39;tlib/lib&#39;,
-    PREFIX            =&gt; &#39;troot&#39;,
+    INST_LIB          =&gt; &#34;tlib-$$/lib&#34;,
+    PREFIX            =&gt; &#34;troot-$$&#34;,
     MAKEFILE          =&gt; $FILE,
     PREREQ_PM         =&gt; {},
     &#40;$] &gt;= 5.005 ?     
@@ -60,7 +60,7 @@
 
 #####
 mysystem&#40; $Config{make}, &#39;-f&#39;, $FILE &#41;;
-my $TOP = &#34;tlib/lib/auto/share&#34;;
+my $TOP = &#34;tlib-$$/lib/auto/share&#34;;
 ok&#40; -f &#34;$TOP/module/My-Test/bonk&#34;, &#34;Installed this file&#34; &#41;;
 ok&#40; !-f &#34;$TOP/module/My-Test/again&#34;, &#34;Removed this file&#34; &#41;;
 ok&#40; !-d &#34;$TOP/dist/File-ShareDir-Install/deeper&#34;, &#34;Removed a directory&#34; &#41;;
Index: t/11_dotfile.t
===================================================================
--- t/11_dotfile.t	&#40;revision 1612&#41;
+++ t/11_dotfile.t	&#40;working copy&#41;
@@ -10,11 +10,11 @@
 
 use ExtUtils::MakeMaker;
 
-my $FILE = &#39;test-Makefile&#39;;
-rmtree&#40; [ qw&#40; tlib troot &#41; ], 0, 0 &#41;;
+my $FILE = &#34;test-$$-Makefile&#34;;
+rmtree&#40; [ qw&#40; tlib-$$ troot-$$ &#41; ], 0, 0 &#41;;
 END { 
     $FILE and -f $FILE and unlink $FILE;
-    rmtree&#40; [ qw&#40; tlib troot &#41; ], 0, 0 &#41;;
+    rmtree&#40; [ qw&#40; tlib-$$ troot-$$ &#41; ], 0, 0 &#41;;
 }
 
 use File::ShareDir::Install;
@@ -32,8 +32,8 @@
 WriteMakefile&#40;
     NAME              =&gt; &#39;File::ShareDir::Install&#39;,
     VERSION_FROM      =&gt; &#39;lib/File/ShareDir/Install.pm&#39;,
-    INST_LIB          =&gt; &#39;tlib/lib&#39;,
-    PREFIX            =&gt; &#39;troot&#39;,
+    INST_LIB          =&gt; &#34;tlib-$$/lib&#34;,
+    PREFIX            =&gt; &#34;troot-$$&#34;,
     MAKEFILE          =&gt; $FILE,
     PREREQ_PM         =&gt; {},
     &#40;$] &gt;= 5.005 ?     
@@ -61,7 +61,7 @@
 
 #####
 mysystem&#40; $Config{make}, &#39;-f&#39;, $FILE &#41;;
-my $TOP = &#34;tlib/lib/auto/share&#34;;
+my $TOP = &#34;tlib-$$/lib/auto/share&#34;;
 ok&#40; -f &#34;$TOP/dist/File-ShareDir-Install/.something&#34;, &#34;Copied a dotfile&#34; &#41;;
 ok&#40; !-d &#34;$TOP/dist/File-ShareDir-Install/.dir&#34;, &#34; ... but not dotdir&#34; &#41;;
 ok&#40; -d &#34;$TOP/module/My-Test/.dir&#34;, &#34;Copied a dotdir&#34; &#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319210" href="/Public/Bug/Display.html?id=92496#txn-1319210">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;28&nbsp;22:16:24&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1319210/699610/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699610">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	Its not so much a function of &quot;useful&quot; but a function of &quot;Fast&quot;.</p>

<p>
	Many CPAN modules have rather&nbsp; complex unit tests, several hundred t/* files, and taking many many minutes to run the test suite inspires people to not run the tests at all.<br>

	<br>

	So a fast optimisation that allows running NUM_CPU tests simultaneously proves advantageous.</p>

<p>
	This is is not so much an issue with things with small numbers of tests, but the feature of turning on parallel test globally is so useful in so many places it makes sense to turn it on globally.</p>

<p>
	The only downside is there are a few modules on CPAN that don&#39;t support parallel testing, and require manual intervention to install/test with parallelism turned off.</p>

<p>
	Overall, this still proves to be a performance advantage, because shaving a 10 minute test suite down to a 2 minute test suite gives you time to fix stuff in the saved time.</p>

<p>
	And we can fix the few CPAN modules that have failing tests under parallelism, and negate even that small negative =)</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319417" href="/Public/Bug/Display.html?id=92496#txn-1319417">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;29&nbsp;10:00:59&nbsp;2014</span>
    <span class="description">perl [...] pied.nu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1319417/699717/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699717">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 355b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jan 28 22:16:24 2014, KENTNL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Its not so much a function of &#34;useful&#34; but a function of &#34;Fast&#34;.
</div>
OK, this makes sense.  I&#39;ll get a new version out today if I get the time.

If I may, I&#39;ve seen a lot of interest &#40;3 bug reports&#41; in this module on the last few weeks.  I wrote it as a lark a while back.  I&#39;m wondering why the sudden interest.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319464" href="/Public/Bug/Display.html?id=92496#txn-1319464">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;29&nbsp;12:05:55&nbsp;2014</span>
    <span class="description">KENTNL [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1319464/699740/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699740">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza"><p>
	On 2014-01-30 04:00:59, GWYN wrote:<br>

	&gt; On Tue Jan 28 22:16:24 2014, KENTNL wrote:<br>

	&gt; &gt; Its not so much a function of &quot;useful&quot; but a function of &quot;Fast&quot;.<br>

	&gt;<br>

	&gt; OK, this makes sense. I&#39;ll get a new version out today if I get the<br>

	&gt; time.<br>

	&gt;<br>

	<br>

	Thanks. Tested, And Passed :D<br>

	<br>

	&gt; If I may, I&#39;ve seen a lot of interest (3 bug reports) in this module<br>

	&gt; on the last few weeks. I wrote it as a lark a while back. I&#39;m<br>

	&gt; wondering why the sudden interest.<br>

	<br>

	Not sure exactly, things get a little more attention when we have a growth of people testing and reporting parallel issues.</p>

<p>
	And for a very long time, the File::ShareDir approach seemed unknown and mysterious, and it has gained much traction lately, perhaps due to DZIL, and perhaps due to a few other things drinking the Kool Aid more.</p>

<p>
	And when somebody fixes something on CPAN, that tends to trigger reinstallation waves too, and reinstallation waves trigger testing, which triggers bugs being exposed and reported.</p>

<p>
	Maybe, if I&#39;m being optimistic, the growth in bugs may be a symptom of something growing in perl itself.</p>

<p>
	Just hard to say, because the cause of the overall trend is not obvious. Like a flock of starlings, its hard to explain why an individual starling takes the path it does, or why the starlings around it do what they do. They give the illusion of an overarching intelligence, but there is none to seen. ( And this kinda verges into the question of &quot;what is, why is, consciousness&quot; , we give a good illusion of having a shared contiguous motive ... but at the cellular level it is just chaos )<br>

	&nbsp;</p>


</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319474" href="/Public/Bug/Display.html?id=92496#txn-1319474">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;29&nbsp;13:49:26&nbsp;2014</span>
    <span class="description">perl [...] pied.nu -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1319474/699751/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/699751">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 268b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jan 29 12:05:55 2014, KENTNL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks. Tested, And Passed :D
</div>Good.  Closing ticket.

Of the 3 reports, this was the only bug report.  The other 2 were feature requets.  I&#39;m wondering if File::ShareDir::Install is moving to &#34;important CPAN module&#34; status.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1319476" href="/Public/Bug/Display.html?id=92496#txn-1319476">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;29&nbsp;13:49:27&nbsp;2014</span>
    <span class="description">perl [...] pied.nu -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.591274</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
