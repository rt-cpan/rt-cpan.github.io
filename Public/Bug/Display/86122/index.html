<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #86122 for Sphinx-Search: UpdateAttributes&#40;&#41; fails to update negative bigint attributes</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #86122 for Sphinx-Search: UpdateAttributes&#40;&#41; fails to update negative bigint attributes</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Sphinx-Search">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Sphinx-Search">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Sphinx-Search">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Sphinx-Search">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Sphinx-Search">Sphinx-Search CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">86122</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Sphinx-Search">Sphinx-Search</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
grinnz [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45236-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45237-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




sphinx_test.pl<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1230299/650046/sphinx_test.pl">
Sun Jun 30 11:56:35 2013 (657b) by grinnz [...] gmail.com
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=86122">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1223686" href="/Public/Bug/Display.html?id=86122#txn-1223686">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;13&nbsp;17:24:48&nbsp;2013</span>
    <span class="description">grinnz [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> UpdateAttributes&#40;&#41; fails to update negative bigint attributes</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 13 Jun 2013 17:24:34 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sphinx-Search [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dan Book &lt;grinnz [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1223686/646355/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/646355">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 237b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Bigint attributes should be now possible to update &#40;as well as floats
maybe?&#41;, however when sending a negative or non-integer value, the function
dies with the error &#34;attribute must be numeric&#34; and thus does not even
attempt the update.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1223686/646356/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/646356">with headers</a>
<br />
<span class="downloadcontenttype">text/html 268b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1230208" href="/Public/Bug/Display.html?id=86122#txn-1230208">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;30&nbsp;06:52:32&nbsp;2013</span>
    <span class="description">JJSCHUTZ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1230208/649997/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/649997">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 366b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Jun 13 17:24:48 2013, Grinnz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Bigint attributes should be now possible to update &#40;as well as floats
&gt; maybe?&#41;, however when sending a negative or non-integer value, the function
&gt; dies with the error &#34;attribute must be numeric&#34; and thus does not even
&gt; attempt the update.
</div>

I can&#39;t reproduce this.  Can you send a test case?

Thanks,

-- 

Jon Schutz
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1230209" href="/Public/Bug/Display.html?id=86122#txn-1230209">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;30&nbsp;06:52:32&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1230299" href="/Public/Bug/Display.html?id=86122#txn-1230299">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;30&nbsp;11:56:35&nbsp;2013</span>
    <span class="description">grinnz [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #86122] UpdateAttributes&#40;&#41; fails to update negative bigint attributes</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Jun 2013 11:56:18 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sphinx-Search [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dan Book &lt;grinnz [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1230299/650044/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/650044">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sure. Using Sphinx 2.0.7 and Sphinx::Search 0.28, and the following
source/index config:

source src1
{
    type            = mysql

    sql_host        = localhost
    sql_user        =
    sql_pass        =
    sql_db          = test
    sql_port        = 3306  # optional, default is 3306

    sql_query       = \
        SELECT id, text, int_value, bigint_value, float_value FROM
test_table

    sql_attr_uint       = int_value
    sql_attr_bigint     = bigint_value
    sql_attr_float      = float_value

    sql_query_info      = SELECT * FROM test_table WHERE id=$id
}

index test1
{
    source          = src1
    path            = /var/lib/sphinx/test1
    docinfo         = extern
    charset_type        = sbcs
}

And the test script is attached. If either of the $updated_bigint or
$updated_float lines are left uncommented the script will die.

On Sun, Jun 30, 2013 at 6:52 AM, Jon Schutz via RT &lt;
bug-Sphinx-Search@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=86122">https://rt.cpan.org/Ticket/Display.html?id=86122</a></span> &gt;
&gt;
&gt; On Thu Jun 13 17:24:48 2013, Grinnz wrote:
<div class="message-stanza open">&gt; &gt; Bigint attributes should be now possible to update &#40;as well as floats
&gt; &gt; maybe?&#41;, however when sending a negative or non-integer value, the
</div>&gt; function
<div class="message-stanza open">&gt; &gt; dies with the error &#34;attribute must be numeric&#34; and thus does not even
&gt; &gt; attempt the update.
</div>&gt;
&gt;
&gt; I can&#39;t reproduce this.  Can you send a test case?
&gt;
&gt; Thanks,
&gt;
&gt; --
&gt;
&gt; Jon Schutz
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1230299/650045/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/650045">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.9k</span>
</div>
<div class="messagebody">
</div>
</div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1230299/650046/sphinx_test.pl">Download sphinx_test.pl</a><br />
<span class="downloadcontenttype">text/x-perl 657b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1230315" href="/Public/Bug/Display.html?id=86122#txn-1230315">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;30&nbsp;12:10:20&nbsp;2013</span>
    <span class="description">grinnz [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #86122] UpdateAttributes&#40;&#41; fails to update negative bigint attributes</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 30 Jun 2013 12:10:02 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sphinx-Search [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Dan Book &lt;grinnz [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1230315/650057/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/650057">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">By the way, I have &#34;resolved&#34; the issue by using SphinxQL for the updates
instead of the API. Just seems like it should be consistent. Thanks for
your work on the module.

On Sun, Jun 30, 2013 at 11:56 AM, Dan Book &lt;grinnz@gmail.com&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Sure. Using Sphinx 2.0.7 and Sphinx::Search 0.28, and the following
&gt; source/index config:
&gt;
&gt; source src1
&gt; {
&gt;     type            = mysql
&gt;
&gt;     sql_host        = localhost
&gt;     sql_user        =
&gt;     sql_pass        =
&gt;     sql_db          = test
&gt;     sql_port        = 3306  # optional, default is 3306
&gt;
&gt;     sql_query       = \
&gt;         SELECT id, text, int_value, bigint_value, float_value FROM
&gt; test_table
&gt;
&gt;     sql_attr_uint       = int_value
&gt;     sql_attr_bigint     = bigint_value
&gt;     sql_attr_float      = float_value
&gt;
&gt;     sql_query_info      = SELECT * FROM test_table WHERE id=$id
&gt; }
&gt;
&gt; index test1
&gt; {
&gt;     source          = src1
&gt;     path            = /var/lib/sphinx/test1
&gt;     docinfo         = extern
&gt;     charset_type        = sbcs
&gt; }
&gt;
&gt; And the test script is attached. If either of the $updated_bigint or
&gt; $updated_float lines are left uncommented the script will die.
&gt;
&gt; On Sun, Jun 30, 2013 at 6:52 AM, Jon Schutz via RT &lt;
&gt; bug-Sphinx-Search@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=86122">https://rt.cpan.org/Ticket/Display.html?id=86122</a></span> &gt;
&gt;&gt;
&gt;&gt; On Thu Jun 13 17:24:48 2013, Grinnz wrote:
<div class="message-stanza open">&gt;&gt; &gt; Bigint attributes should be now possible to update &#40;as well as floats
&gt;&gt; &gt; maybe?&#41;, however when sending a negative or non-integer value, the
</div>&gt;&gt; function
<div class="message-stanza open">&gt;&gt; &gt; dies with the error &#34;attribute must be numeric&#34; and thus does not even
&gt;&gt; &gt; attempt the update.
</div>&gt;&gt;
&gt;&gt;
&gt;&gt; I can&#39;t reproduce this.  Can you send a test case?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt; --
&gt;&gt;
&gt;&gt; Jon Schutz
&gt;&gt;
</div>&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1230315/650058/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/650058">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1230608" href="/Public/Bug/Display.html?id=86122#txn-1230608">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;01&nbsp;07:17:55&nbsp;2013</span>
    <span class="description">jon [...] jschutz.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #86122] UpdateAttributes&#40;&#41; fails to update negative bigint attributes</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 01 Jul 2013 20:47:26 +0930</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Sphinx-Search [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jon Schutz &lt;jon [...] jschutz.net&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1230608/650248/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/650248">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the test case.  This appears to be a limitation of the API;
UpdateAttributes can only send 32-bit unsigned integers.  There are
other references to this issue, e.g.
<span class="clickylink"><a target="new" rel="nofollow" href="http://sphinxsearch.com/forum/view.html?id=11108">http://sphinxsearch.com/forum/view.html?id=11108</a></span>,
<span class="clickylink"><a target="new" rel="nofollow" href="http://sphinxsearch.com/forum/view.html?id=3103">http://sphinxsearch.com/forum/view.html?id=3103</a></span>.  So I&#39;ll have to let
this sit until the API is updated.

-- 

Jon Schutz



On 01/07/13 01:26, Dan Book via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Sphinx-Search
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=86122">https://rt.cpan.org/Ticket/Display.html?id=86122</a></span> &gt;
&gt;
&gt; Sure. Using Sphinx 2.0.7 and Sphinx::Search 0.28, and the following
&gt; source/index config:
&gt;
&gt; source src1
&gt; {
&gt;     type            = mysql
&gt;
&gt;     sql_host        = localhost
&gt;     sql_user        =
&gt;     sql_pass        =
&gt;     sql_db          = test
&gt;     sql_port        = 3306  # optional, default is 3306
&gt;
&gt;     sql_query       = \
&gt;         SELECT id, text, int_value, bigint_value, float_value FROM
&gt; test_table
&gt;
&gt;     sql_attr_uint       = int_value
&gt;     sql_attr_bigint     = bigint_value
&gt;     sql_attr_float      = float_value
&gt;
&gt;     sql_query_info      = SELECT * FROM test_table WHERE id=$id
&gt; }
&gt;
&gt; index test1
&gt; {
&gt;     source          = src1
&gt;     path            = /var/lib/sphinx/test1
&gt;     docinfo         = extern
&gt;     charset_type        = sbcs
&gt; }
&gt;
&gt; And the test script is attached. If either of the $updated_bigint or
&gt; $updated_float lines are left uncommented the script will die.
&gt;
&gt; On Sun, Jun 30, 2013 at 6:52 AM, Jon Schutz via RT &lt;
&gt; bug-Sphinx-Search@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=86122">https://rt.cpan.org/Ticket/Display.html?id=86122</a></span> &gt;
&gt;&gt;
&gt;&gt; On Thu Jun 13 17:24:48 2013, Grinnz wrote:
<div class="message-stanza open">&gt;&gt;&gt; Bigint attributes should be now possible to update &#40;as well as floats
&gt;&gt;&gt; maybe?&#41;, however when sending a negative or non-integer value, the
</div>&gt;&gt; function
<div class="message-stanza open">&gt;&gt;&gt; dies with the error &#34;attribute must be numeric&#34; and thus does not even
&gt;&gt;&gt; attempt the update.
</div>&gt;&gt;
&gt;&gt; I can&#39;t reproduce this.  Can you send a test case?
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt;
&gt;&gt; --
&gt;&gt;
&gt;&gt; Jon Schutz
&gt;&gt;
</div></div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.370554</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
