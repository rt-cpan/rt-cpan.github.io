<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #61358 for Finance-OFX-Parse-Simple: parsing TRNAMT fields</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #61358 for Finance-OFX-Parse-Simple: parsing TRNAMT fields</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Finance-OFX-Parse-Simple">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Finance-OFX-Parse-Simple">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Finance-OFX-Parse-Simple">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Finance-OFX-Parse-Simple">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Finance-OFX-Parse-Simple">Finance-OFX-Parse-Simple CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">61358</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Finance-OFX-Parse-Simple">Finance-OFX-Parse-Simple</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">JJONES [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Allen.Conway [...] atosorigin.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-225438-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.01</li>
<li>
0.02</li>
<li>
0.03</li>
</ul>
    </td>
  </tr>
  <tr id="CF-225439-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<ul>
<li>
0.04</li>
<li>
0.05</li>
</ul>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=61358">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-831447" href="/Public/Bug/Display.html?id=61358#txn-831447">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;15&nbsp;10:49:03&nbsp;2010</span>
    <span class="description">Allen.Conway [...] atosorigin.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> parsing TRNAMT fields</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Sep 2010 16:48:42 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Finance-OFX-Parse-Simple [...] rt.cpan.org&#34; &lt;bug-Finance-OFX-Parse-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Conway Allen &lt;Allen.Conway [...] atosorigin.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/831447/430679/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/430679">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

There&#39;s a problem when these fields are formatted in European fashion, i.e. with a comma instead of a decimal point - the value returned is just what comes in front of the comma so cents are dropped... There needs to be some way to say what the character is separating the dollars from the cents!

best regards

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________

Ce message et les pi?ces jointes sont confidentiels et r?serv?s ? l&#39;usage exclusif de ses destinataires. Il peut ?galement ?tre prot?g? par le secret professionnel. Si vous recevez ce message par erreur, merci d&#39;en avertir imm?diatement l&#39;exp?diteur et de le d?truire. L&#39;int?grit? du message ne pouvant ?tre assur?e sur Internet, la responsabilit? du groupe Atos Origin ne pourra ?tre recherch?e quant au contenu de ce message. Bien que les meilleurs efforts soient faits pour maintenir cette transmission exempte de tout virus, l&#39;exp?diteur ne donne aucune garantie ? cet ?gard et sa responsabilit? ne saurait ?tre recherch?e pour tout dommage r?sultant d&#39;un virus transmis.

This e-mail and the documents attached are confidential and intended solely for the addressee; it may also be privileged. If you receive this e-mail in error, please notify the sender immediately and destroy it. As its integrity cannot be secured on the Internet, the Atos Origin group liability cannot be triggered for the message content. Although the sender endeavours to maintain a computer virus-free network, the sender does not warrant that this transmission is virus-free and will not be liable for any damages resulting from any virus transmitted.
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/831447/430680/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/430680">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.9k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832043" href="/Public/Bug/Display.html?id=61358#txn-832043">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;16&nbsp;14:29:14&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/832043/430975/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/430975">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Thanks for the report. This is fixed as of version 0.04 &#40;&#38; 0.05 which is 
the same except for minor documentation changes&#41;. The module now follows 
the system&#39;s current locale setting for the decimal point character, 
using POSIX if available, otherwise falling back to a dot.

I had some issues when testing a version which let you manually override 
the system&#39;s locale setting, but if you&#39;d be willing to assist me with 
that then please get in touch.

Otherwise hopefully the revisions above will resolve the issue for you. 
If you can&#39;t see them yet then you can also get it from Github on 
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/JeremyJones/Finance--OFX--Parse--Simple">http://github.com/JeremyJones/Finance--OFX--Parse--Simple</a></span>

Thanks!
Jeremy



On Wed Sep 15 10:49:03 2010, Allen.Conway@atosorigin.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; There&#39;s a problem when these fields are formatted in European fashion,
&gt;    i.e. with a comma instead of a decimal point - the value returned
&gt;    is just what comes in front of the comma so cents are dropped...
&gt;    There needs to be some way to say what the character is separating
&gt;    the dollars from the cents!
&gt; 
&gt; best regards
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832045" href="/Public/Bug/Display.html?id=61358#txn-832045">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;16&nbsp;14:29:14&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832046" href="/Public/Bug/Display.html?id=61358#txn-832046">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;16&nbsp;14:29:15&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832048" href="/Public/Bug/Display.html?id=61358#txn-832048">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;16&nbsp;14:30:27&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Broken in 0.01 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832049" href="/Public/Bug/Display.html?id=61358#txn-832049">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;16&nbsp;14:30:27&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Broken in 0.02 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832050" href="/Public/Bug/Display.html?id=61358#txn-832050">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;16&nbsp;14:30:27&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Broken in 0.03 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832723" href="/Public/Bug/Display.html?id=61358#txn-832723">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;17&nbsp;15:37:10&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Fixed in 0.04 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-832724" href="/Public/Bug/Display.html?id=61358#txn-832724">#</a>      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;17&nbsp;15:37:10&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Fixed in 0.05 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-837170" href="/Public/Bug/Display.html?id=61358#txn-837170">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;28&nbsp;09:40:17&nbsp;2010</span>
    <span class="description">Allen.Conway [...] atosorigin.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #61358] parsing TRNAMT fields </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Sep 2010 15:40:00 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-Finance-OFX-Parse-Simple [...] rt.cpan.org&#34; &lt;bug-Finance-OFX-Parse-Simple [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Conway Allen &lt;Allen.Conway [...] atosorigin.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/837170/433697/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/433697">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello. I should have got back to you sooner...

I haven&#39;t picked up your corrected version yet. I&#39;m not sure it&#39;ll work very well for me, however, because, for instance, I have 2 banks and one uses a decimal point and the other a comma! Using the locale setting is, of course, better than just assuming that the decimal separator is a point.

It seems to me that if you did something like

        if &#40; $s =~ m/&lt;TRNAMT&gt;\s*&#40;-|\+&#41;?\s*&#40;?:&#40;\d*&#41;&#40;?:[.,]&#40;\d\d&#41;&#41;?&#41;/so &#41;
      {
          $1 . $2 . &#39;.&#39; . $3;
      };

That would &#40;probably/possibly&#41; handle everything - I can&#39;t believe that any other character is used anywhere else. Anyway that regex certainly handles correctly the data my 2 banks send me.

Thanks for your help, anyway.

Allen.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Jeremy Jones via RT [mailto:bug-Finance-OFX-Parse-Simple@rt.cpan.org]
Sent: Thursday, September 16, 2010 8:29 PM
To: Conway Allen
Subject: [rt.cpan.org #61358] parsing TRNAMT fields

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=61358">https://rt.cpan.org/Ticket/Display.html?id=61358</a></span> &gt;

Hi,

Thanks for the report. This is fixed as of version 0.04 &#40;&#38; 0.05 which is
the same except for minor documentation changes&#41;. The module now follows
the system&#39;s current locale setting for the decimal point character,
using POSIX if available, otherwise falling back to a dot.

I had some issues when testing a version which let you manually override
the system&#39;s locale setting, but if you&#39;d be willing to assist me with
that then please get in touch.

Otherwise hopefully the revisions above will resolve the issue for you.
If you can&#39;t see them yet then you can also get it from Github on
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/JeremyJones/Finance--OFX--Parse--Simple">http://github.com/JeremyJones/Finance--OFX--Parse--Simple</a></span>

Thanks!
Jeremy



On Wed Sep 15 10:49:03 2010, Allen.Conway@atosorigin.com wrote:
<div class="message-stanza open">&gt; Hello,
&gt;
&gt; There&#39;s a problem when these fields are formatted in European fashion,
&gt;    i.e. with a comma instead of a decimal point - the value returned
&gt;    is just what comes in front of the comma so cents are dropped...
&gt;    There needs to be some way to say what the character is separating
&gt;    the dollars from the cents!
&gt;
&gt; best regards
</div>



Ce message et les piÃ¨ces jointes sont confidentiels et rÃ©servÃ©s Ã  l&#39;usage exclusif de ses destinataires. Il peut Ã©galement Ãªtre protÃ©gÃ© par le secret professionnel. Si vous recevez ce message par erreur, merci d&#39;en avertir immÃ©diatement l&#39;expÃ©diteur et de le dÃ©truire. L&#39;intÃ©gritÃ© du message ne pouvant Ãªtre assurÃ©e sur Internet, la responsabilitÃ© du groupe Atos Origin ne pourra Ãªtre recherchÃ©e quant au contenu de ce message. Bien que les meilleurs efforts soient faits pour maintenir cette transmission exempte de tout virus, l&#39;expÃ©diteur ne donne aucune garantie Ã  cet Ã©gard et sa responsabilitÃ© ne saurait Ãªtre recherchÃ©e pour tout dommage rÃ©sultant d&#39;un virus transmis.

This e-mail and the documents attached are confidential and intended solely for the addressee; it may also be privileged. If you receive this e-mail in error, please notify the sender immediately and destroy it. As its integrity cannot be secured on the Internet, the Atos Origin group liability cannot be triggered for the message content. Although the sender endeavours to maintain a computer virus-free network, the sender does not warrant that this transmission is virus-free and will not be liable for any damages resulting from any virus transmitted.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-837172" href="/Public/Bug/Display.html?id=61358#txn-837172">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;28&nbsp;09:40:18&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-838383" href="/Public/Bug/Display.html?id=61358#txn-838383">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;01&nbsp;09:35:15&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/838383/434313/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/434313">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 587b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Ok version 0.06 of Finance::OFX::Parse::Simple is available on Github 
and uploaded to CPAN. 

Using this version you can manually specify the character to use for the 
decimal point within your OFX data prior to parsing.

The environment variable MON_DECIMAL_POINT is checked first, so you can 
specify a character to use in that variable &#40;e.g. local 
$ENV{MON_DECIMAL_POINT} = &#39;,&#39;&#41; prior to parsing the data, and that 
allows you to control the character per-parse when using data from 
disparate sources.

I hope this helps but let me know any remaining issues.

Thanks,
Jeremy
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-838384" href="/Public/Bug/Display.html?id=61358#txn-838384">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;01&nbsp;09:35:41&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-838385" href="/Public/Bug/Display.html?id=61358#txn-838385">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;01&nbsp;09:38:30&nbsp;2010</span>
    <span class="description">JJONES [...] cpan.org -  Given to JJONES</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.563069</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
