<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #108200 for XML-Compile-WSDL11: clashing sub names with Try::Tiny module</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #108200 for XML-Compile-WSDL11: clashing sub names with Try::Tiny module</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/XML-Compile-WSDL11/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/XML-Compile-WSDL11/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/XML-Compile-WSDL11/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/XML-Compile-WSDL11/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/XML-Compile-WSDL11">XML-Compile-WSDL11 CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">108200</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/XML-Compile-WSDL11/Active/">XML-Compile-WSDL11</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
arfreitas [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-253196-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.04    </td>
  </tr>
  <tr id="CF-253197-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;30&nbsp;10:49:53&nbsp;2015</span>
    <span class="description">arfreitas [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> clashing sub names with Try::Tiny module</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi there,

I was doing some tests with XML-Compile-WSDL11 and all was fine until I decided to turn on the trace mode with:

use Log::Report mode =&gt; &#39;DEBUG&#39;;

On the script I created for testing, which has a part that uses Try::Tiny module to catch errors and do something about this.

The script:

my $wsdl = XML::Compile::WSDL11-&gt;new&#40;$wsdlfile&#41;;
my $auth = Siebel::SOAP::Auth-&gt;new&#40; { user =&gt; &#39;user&#39;, password =&gt; &#39;password&#39; } &#41;;
my $call = $wsdl-&gt;compileClient&#40; operation =&gt; &#39;SWIContactServicesQueryByExample&#39;, transport_hook =&gt; sub { $auth-&gt;add_auth_header&#40;@_&#41; } &#41;;

my $response_ok = 1;
print &#39;Starting test at &#39;, scalar&#40;localtime&#40;time&#40;&#41;&#41;&#41;, &#34;\n&#34;;
my &#40;$answer, $trace&#41; =  $call-&gt;&#40;%request&#41;;
$auth-&gt;find_token&#40; $answer &#41;;
print Dumper&#40;$answer&#41;;

while &#40; $response_ok &#41; {

    try {

        sleep&#40; int&#40;rand&#40;11&#41;&#41; + 10 &#41;;
        my &#40;$answer, $trace&#41; =  $call-&gt;&#40;%request&#41;;
        $auth-&gt;find_token&#40; $answer &#41;;

    } catch {
    
        warn $_;

        if &#40; $_ eq &#39;token expired&#39; &#41; {
        
            print &#39;token expired, ending test at &#39;, scalar&#40;localtime&#40;time&#40;&#41;&#41;&#41;, &#34;\n&#34;;
            $response_ok = 0;
        
        } else {
        
            die $_;
        
        }

    };

}

No error is generated until I &#34;use Log::Report mode =&gt; &#39;DEBUG&#39;;&#34;. In this case, this is the error generated &#40;I omitted must of the output to make it short&#41;:

trace: received 200 OK
trace: using preparsed XML document with element &lt;{<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a></span>}Envelope&gt;
trace: node {<span class="clickylink"><a target="new" rel="nofollow" href="http://siebel.com/webservices">http://siebel.com/webservices</a></span>}SessionToken not understood, expected are &#40;none&#41;
trace: using preparsed XML node &lt;{<span class="clickylink"><a target="new" rel="nofollow" href="http://siebel.com/asi/V0">http://siebel.com/asi/V0</a></span>}SWIContactServicesQueryByExample_Output&gt;
panic: odd length parameter list for try&#40;&#41;: forgot the terminating &#39;;&#39;?
 at siebel_ws2.pl line 53
Log::Report::try&#40;&#34;CODE&#40;0x46893d0&#41;&#34;, &#34;Try::Tiny::Catch=REF&#40;0x4419978&#41;&#34;&#41; at siebel_ws2.pl line 53

This error is avoidable if I use the full name for &#34;try&#34; and &#34;catch&#34; functions of Try::Tiny module:

    Try::Tiny::try {

        sleep&#40; int&#40;rand&#40;11&#41;&#41; + 10 &#41;;
        my &#40;$answer, $trace&#41; =  $call-&gt;&#40;%request&#41;;
        $auth-&gt;find_token&#40; $answer &#41;;

    } Try::Tiny::catch {
    
        warn $_;

        if &#40; $_ eq &#39;token expired&#39; &#41; {
        
            print &#39;token expired, ending test at &#39;, scalar&#40;localtime&#40;time&#40;&#41;&#41;&#41;, &#34;\n&#34;;
            $response_ok = 0;
        
        } else {
        
            die $_;
        
        }

    };

Ugly, but works as expected, both with the trace turned on/off. I probably will be releasing Siebel::SOAP::Auth to CPAN as is &#40;depending on XML::Compile::WSDL, Log::Report&#41;, but I&#39;m not sure if it a good idea. The module Siebel::SOAP::Auth will provide transparent authentication for Siebel applications by using Session Management, but I was thinking on rely on Try::Tiny to catch exceptions.

Regards,

Alceu
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;30&nbsp;11:22:10&nbsp;2015</span>
    <span class="description">solutions [...] overmeer.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #108200] clashing sub names with Try::Tiny module</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 30 Oct 2015 16:21:47 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Alceu Rodrigues de Freitas Junior via RT &lt;bug-XML-Compile-WSDL11 [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Mark Overmeer &lt;solutions [...] overmeer.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">* Alceu Rodrigues de Freitas Junior via RT &#40;bug-XML-Compile-WSDL11@rt.cpan.org&#41; [151030 14:50]:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fri Oct 30 10:49:53 2015: Request 108200 was acted upon.
&gt; Transaction: Ticket created by ARFREITAS
&gt;        Queue: XML-Compile-WSDL11
&gt;      Subject: clashing sub names with Try::Tiny module
&gt;    Broken in: 3.04
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=108200">https://rt.cpan.org/Ticket/Display.html?id=108200</a></span> &gt;
&gt; 
&gt; I was doing some tests with XML-Compile-WSDL11 and all was fine until
&gt; I decided to turn on the trace mode with:
&gt; 
&gt;    use Log::Report mode =&gt; &#39;DEBUG&#39;;
</div>
You did not invoke Log::Report in the older version?  Log::Report imports
a range of commands, like &#39;info&#39;, &#39;notice&#39;, &#39;panic&#39;, &#39;dispatcher&#39;, and
&#39;try&#39;.  You can avoid that with
     use Log::Report mode =&gt; &#39;DEBUG&#39;, import =&gt; [];

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;     try {
&gt;         sleep&#40; int&#40;rand&#40;11&#41;&#41; + 10 &#41;;
&gt;         my &#40;$answer, $trace&#41; =  $call-&gt;&#40;%request&#41;;
&gt;         $auth-&gt;find_token&#40; $answer &#41;;
&gt;     } catch {
&gt;     
&gt;         warn $_;
&gt; 
&gt;         if &#40; $_ eq &#39;token expired&#39; &#41; {
&gt;             print &#39;token expired, ending test at &#39;, scalar&#40;localtime&#40;time&#40;&#41;&#41;&#41;, &#34;\n&#34;;
&gt;             $response_ok = 0;
&gt;         } else {
&gt;             die $_;
&gt;         }
&gt;     };
</div>
With Log::Report&#39;s try&#40;&#41; you would write

      try { sleep rand&#40;11&#41; + 10;
            my &#40;$answer, $trace&#41; =  $call-&gt;&#40;%request&#41;;
            $auth-&gt;find_token&#40; $answer &#41;;
      };
      if&#40;my $e = $@-&gt;wasFatal&#41;
      {   if&#40;$e =~ /token expired/&#41; ...
          else { $e-&gt;throw }
      }

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; trace: using preparsed XML document with element &lt;{<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a></span>}Envelope&gt;
&gt; trace: node {<span class="clickylink"><a target="new" rel="nofollow" href="http://siebel.com/webservices">http://siebel.com/webservices</a></span>}SessionToken not understood, expected are &#40;none&#41;
</div>
This means that your SessionToken gets ignored.  Unless a field in the
header contains mustUnderstand=&#34;true&#34;, they are simply ignored.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; trace: using preparsed XML node &lt;{<span class="clickylink"><a target="new" rel="nofollow" href="http://siebel.com/asi/V0">http://siebel.com/asi/V0</a></span>}SWIContactServicesQueryByExample_Output&gt;
&gt; panic: odd length parameter list for try&#40;&#41;: forgot the terminating &#39;;&#39;?
&gt;  at siebel_ws2.pl line 53
&gt; Log::Report::try&#40;&#34;CODE&#40;0x46893d0&#41;&#34;, &#34;Try::Tiny::Catch=REF&#40;0x4419978&#41;&#34;&#41; at siebel_ws2.pl line 53
</div>
Yes, that&#39;s &#34;my&#34; version of try&#40;&#41; which has a different prototype.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ugly, but works as expected, both with the trace turned on/off. I
&gt; probably will be releasing Siebel::SOAP::Auth to CPAN as is &#40;depending on
&gt; XML::Compile::WSDL, Log::Report&#41;, but I&#39;m not sure if it a good idea. The
&gt; module Siebel::SOAP::Auth will provide transparent authentication for
&gt; Siebel applications by using Session Management, but I was thinking on
&gt; rely on Try::Tiny to catch exceptions.
</div>
So, the trace shows that the SessionToken does not get processed at
all.  Probably you need something like XML::Compile::SOAP::WSA
-- 
Regards,
               MarkOv

------------------------------------------------------------------------
       Mark Overmeer MSc                                MARKOV Solutions
       Mark@Overmeer.net                          solutions@overmeer.net
<span class="clickylink"><a target="new" rel="nofollow" href="http://Mark.Overmeer.net">http://Mark.Overmeer.net</a></span>                   <span class="clickylink"><a target="new" rel="nofollow" href="http://solutions.overmeer.net">http://solutions.overmeer.net</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;30&nbsp;11:22:10&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;31&nbsp;13:09:35&nbsp;2015</span>
    <span class="description">arfreitas [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Em Sex Out 30 11:22:10 2015, solutions@overmeer.net escreveu:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; You did not invoke Log::Report in the older version?  Log::Report
&gt; imports
&gt; a range of commands, like &#39;info&#39;, &#39;notice&#39;, &#39;panic&#39;, &#39;dispatcher&#39;, and
&gt; &#39;try&#39;.  You can avoid that with
&gt;      use Log::Report mode =&gt; &#39;DEBUG&#39;, import =&gt; [];
</div>
I used the newest version available of Log::Report.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; With Log::Report&#39;s try&#40;&#41; you would write
&gt; 
&gt; try { sleep rand&#40;11&#41; + 10;
&gt;       my &#40;$answer, $trace&#41; =  $call-&gt;&#40;%request&#41;;
&gt;       $auth-&gt;find_token&#40; $answer &#41;;
&gt; };
&gt; if&#40;my $e = $@-&gt;wasFatal&#41;
&gt; {   if&#40;$e =~ /token expired/&#41; ...
&gt;     else { $e-&gt;throw }
&gt; }
</div>
Thanks! I just did that and it worked.
I didn&#39;t realized initially that XML::Compile::WSDL11 had it&#39;s own mechanism to deal with exceptions. Now that I actually read the documentation it is now clearer.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; trace: using preparsed XML document with element
&gt; &gt; &lt;{<span class="clickylink"><a target="new" rel="nofollow" href="http://schemas.xmlsoap.org/soap/envelope/">http://schemas.xmlsoap.org/soap/envelope/</a></span>}Envelope&gt;
&gt; &gt; trace: node {<span class="clickylink"><a target="new" rel="nofollow" href="http://siebel.com/webservices">http://siebel.com/webservices</a></span>}SessionToken not
&gt; &gt; understood, expected are &#40;none&#41;
</div>&gt; 
&gt; This means that your SessionToken gets ignored.  Unless a field in the
&gt; header contains mustUnderstand=&#34;true&#34;, they are simply ignored.
</div>
Understood, but for my purposes leaving it as is it&#39;s the expected thing. Siebel just created their own implementation for authentication.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So, the trace shows that the SessionToken does not get processed at
&gt; all.  Probably you need something like XML::Compile::SOAP::WSA
</div>
After applying the changes you suggested, it all worked as expected. It could be avoided if I have read all the documentation available, which in fact could be improved. If you are willing to accept patches on Pod for that, please let me know.

On the other hand, by following the documentation to use transport_hook also for mocking results, I think I got another issue: when creating manually the XML response expected, I made a mistake and introduced a syntax error on the XML. The thing is the script stopped working without any error message. I was able to caught that there were an exception because I used the debugger.

After it, I just checked $@ for exceptions and caught the same error. Before doing that, the program stopped working silently, which is never a good thing. I can try again to reproduce the same error and send you a test file.

Anyway, for this case I think you can closed since there is no bug.

Thank you for your help! Siebel::SOAP::Auth should be release in the next few days to CPAN thanks to your inputs.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;11&nbsp;09:12:34&nbsp;2016</span>
    <span class="description">MARKOV [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
