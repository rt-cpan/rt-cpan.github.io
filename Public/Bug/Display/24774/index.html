<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #24774 for ExtUtils-MakeMaker: PREREQ_FATAL not overridable on the commandline</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #24774 for ExtUtils-MakeMaker: PREREQ_FATAL not overridable on the commandline</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/ExtUtils-MakeMaker/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/ExtUtils-MakeMaker">ExtUtils-MakeMaker CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">24774</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/ExtUtils-MakeMaker/Active/">ExtUtils-MakeMaker</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ANDK [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12494-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-12495-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;03&nbsp;10:49:52&nbsp;2007</span>
    <span class="description">ANDK [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> PREREQ_FATAL not overridable on the commandline</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Take as a test case TELS/math/bignum-0.19.tar.gz

The author insists on using PREREQ_FATAL=&gt;1 in his Makefile.PL.

MakeMaker does not let me override this on the commandline. It commits
suicide without even *reading* the commandline.

The attached patch seems to dalay the fatal action and lets me override
PREREQ_FATAL. But I do not know about side effects.

At least it passes all tests, but I have not tried anything besides
&#39;make test&#39; in the MakeMaker distribution.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> makemaker-prereq-fatal-overrideable.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- /home/src/perl/repoperls/installed-perls/perl/p07FX0V/perl-5.8.0@30104/lib/5.9.5/ExtUtils/MakeMaker.pm~	2007-02-03 09:06:59.000000000 +0100
+++ /home/src/perl/repoperls/installed-perls/perl/p07FX0V/perl-5.8.0@30104/lib/5.9.5/ExtUtils/MakeMaker.pm	2007-02-03 16:16:01.000000000 +0100
@@ -414,13 +414,6 @@
               $self-&gt;{PREREQ_PM}-&gt;{$prereq} : &#39;unknown version&#39; ;
         }
     }
-    if &#40;%unsatisfied &#38;&#38; $self-&gt;{PREREQ_FATAL}&#41;{
-        my $failedprereqs = join &#39;, &#39;, map {&#34;$_ $unsatisfied{$_}&#34;} 
-                            keys %unsatisfied;
-        die qq{MakeMaker FATAL: prerequisites not found &#40;$failedprereqs&#41;\n
-               Please install these modules first and rerun &#39;perl Makefile.PL&#39;.\n};
-    }
-
     if &#40;defined $self-&gt;{CONFIGURE}&#41; {
         if &#40;ref $self-&gt;{CONFIGURE} eq &#39;CODE&#39;&#41; {
             %configure_att = %{&#38;{$self-&gt;{CONFIGURE}}};
@@ -490,6 +483,13 @@
     } else {
         parse_args&#40;$self,split&#40;&#39; &#39;, $ENV{PERL_MM_OPT} || &#39;&#39;&#41;,@ARGV&#41;;
     }
+    if &#40;%unsatisfied &#38;&#38; $self-&gt;{PREREQ_FATAL}&#41;{
+        my $failedprereqs = join &#39;, &#39;, map {&#34;$_ $unsatisfied{$_}&#34;} 
+                            keys %unsatisfied;
+        die qq{MakeMaker FATAL: prerequisites not found &#40;$failedprereqs&#41;\n
+               Please install these modules first and rerun &#39;perl Makefile.PL&#39;.\n};
+    }
+
 
     $self-&gt;{NAME} ||= $self-&gt;guess_name;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;06&nbsp;15:36:37&nbsp;2007</span>
    <span class="description">ANDK [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Alternatively, I would welcome to chainsaw this whole option without
replacement. Authors who want to boycott constructive cooperation
between the toolchain shall use  die&#40;&#41;, they will always know where to
find it. And the users and integrators will have a much easier job in
patching the die out of the Makefile.PL than with going through the
extra loop of trying to argue against inadequate PREREQ_FATAL nihilism.

Alternatively, I know I have tried to get this regression out of
MakeMaker some 6 years ago, let me suggest we document this option as
what it is.

The following writeup was my desparate trial to justify its bare
existence in extraordinary situations. &#40;But I&#39;m quite positive that
within a year&#39;s time even this situation will be resolved cleanly.&#41;

Here it is:

    =item PREREQ_FATAL

    Bool. If this parameter is true, failing to have the required modules
    &#40;or the right versions thereof&#41; will be fatal. C&lt;perl Makefile.PL&gt;
will C&lt;die&gt;
    instead of simply informing the user of the missing dependencies.

    This is strongly discouraged and should never be used lightly.
    Consider that the purpose of the C&lt;Makefile.PL&gt; within the whole
    CPAN toolchain is just to write a good C&lt;Makefile&gt; that enables
    the user to continue building this module. This also involves
    putting all the necessary information for this task into the
    appropriate places, like for example to put all prerequisite
    information into the Makefile, so that the next tools in the
    toolchain can take the required actions to install them.

    If you deliberately C&lt;die&gt; in a C&lt;Makefile.PL&gt;, you break the
    toolchain because C&lt;ExtUtils::MakeMaker&gt; cannot write a
    C&lt;Makefile&gt; and cannot inform other players about the status of
    your module. As a consequence the user will have to do things
    manually that would otherwise be done by tools like C&lt;CPAN.pm&gt; or
    C&lt;CPANPLUS&gt;.

    Note: see L&lt;Test::Harness&gt; for a shortcut for stopping tests early
    if you are missing dependencies and are afraid that users might
    use your module with an incomplete environment.

    Do I&lt;not&gt; use this parameter for simple requirements, which could be
resolved
    at a later time.

    Simple requirements are usually optimally resolved by tools in the
    toolchain. But this can only work well if you let
    C&lt;ExtUtils::MakeMaker&gt; do its job but not if you force it to
    commit suicide.

    It is I&lt;extremely&gt; rare to have to use C&lt;PREREQ_FATAL&gt; at all. The
    only situation where it is appropriate is when you have
    dependencies that are indispensible to actually I&lt;write&gt; a
    Makefile. For example when you need a module that can parse a
    header file that can determine some dependencies that must be
    written to the Makefile. If such a module is missing, then you
    apparently are unable to write a Makefile. And only then you
    should use PREREQ_FATAL.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;06&nbsp;15:36:39&nbsp;2007</span>
    <span class="description">ANDK [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;29&nbsp;17:55:51&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks.  This will be in 6.33.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;29&nbsp;17:55:54&nbsp;2007</span>
    <span class="description">mschwern [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
