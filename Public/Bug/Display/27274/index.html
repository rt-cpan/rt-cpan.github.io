<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #27274 for SVN-Notify: SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #27274 for SVN-Notify: SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41;</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=SVN-Notify">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=SVN-Notify">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=SVN-Notify">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=SVN-Notify">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="http://github.com/theory/svn-notify/issues/">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/SVN-Notify">SVN-Notify CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">27274</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=SVN-Notify">SVN-Notify</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jpeacock [...] rowman.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-30306-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-30307-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
2.66    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=27274">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322039" href="/Public/Bug/Display.html?id=27274#txn-322039">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;08:43:22&nbsp;2007</span>
    <span class="description">jpeacock [...] rowman.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 08:41:42 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> John Peacock via RT &lt;bug-SVN-Notify [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322039/147227/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147227">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I got a bug report vs. SVN::Notify::Config for test failures:

        <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=26209">http://rt.cpan.org/Ticket/Display.html?id=26209</a></span>

and it took me ages to recreate it &#40;since I didn&#39;t notice that you&#39;d 
updated SVN::Notify&#41;.  Once it was pointed out that it was 0.26 that 
triggers the error, I was able to finally debug it.

The problem is this line:

--- lib/SVN/Notify.pm~  2007-03-27 03:00:40.000000000 -0400
+++ lib/SVN/Notify.pm   2007-05-24 06:08:56.000000000 -0400
@@ -955,7 +955,7 @@ sub prepare_recipients {
              if &#40;/$rx/&#41; {
                  $self-&gt;_dbpnt&#40; qq{&#34;$_&#34; matched $rx}&#41; if 
$self-&gt;{verbose} &gt; 2;
                  push @$tos, $email unless $seen{$email}++;
-                splice @$regexen, $i, 2;
+                #splice @$regexen, $i, 2;
              }
          }
          # Grab the context if it&#39;s needed for the subject.

You are iterating over the $regexen using a loop, but in the line above 
you are splicing out any regex that matches.  The end result is that 
everytime you match one of the regexes, you are *skipping* the next 
regex &#40;since you can&#39;t both iterate over the index of the array *and* 
remove array elements casually&#41;.

The above trivial patch restores SVN::Notify::Config&#39;s tests.

Thanks

John

p.s. RT.cpan.org seems to be on the fritz, which is why I am cc&#39;ing you 
directly...

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4501 Forbes Blvd
Suite H
Lanham, MD 20706
301-459-3366 x.5010
fax 301-429-5747
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322088" href="/Public/Bug/Display.html?id=27274#txn-322088">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;12:53:42&nbsp;2007</span>
    <span class="description">david [...] kineticode.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 09:52:56 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;david [...] kineticode.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322088/147264/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147264">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 213b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On May 24, 2007, at 03:21, John Peacock wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The above trivial patch restores SVN::Notify::Config&#39;s tests.
</div>
Do SVN::Notify&#39;s tests still pass? I&#39;m certain that I added that for  
a reason…

Thanks,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322089" href="/Public/Bug/Display.html?id=27274#txn-322089">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;12:53:43&nbsp;2007</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322094" href="/Public/Bug/Display.html?id=27274#txn-322094">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;13:32:08&nbsp;2007</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 13:13:51 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322094/147271/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147271">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Wheeler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Do SVN::Notify&#39;s tests still pass? I&#39;m certain that I added that for  
&gt; a reason…
</div>
Yes, *your* tests pass, but are you testing multiple recipients for 
overlapping path&#39;s?  SVN::Notify::Config&#39;s uses the empty path &#40;matches 
every repository commit&#41; for globals &#40;like PATH&#41;.

Besides, just from first principles, the code is wrong.  You can&#39;t 
access an array by index in a for&#40;&#41; loop and delete elements from the 
array inside the loop &#40;unless you also decrement the index at the same 
time&#41;.  You are guaranteed to skip elements.

#!perl -wl
my @array = &#40;1,2,3,4,5,6,7,8,9&#41;;

for &#40;my $i=0; $i &lt; $#array; $i++&#41; {
   print &#34;processing $i&#34;;
   if &#40; $i%2 == 1 &#41; {
       splice @array, $i, 1;
   }
}

foreach my $i &#40; @array &#41; {
   print $i;
}

which prints

processing 0
processing 1
processing 2
processing 3
processing 4
processing 5
1
3
4
6
7
9

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4501 Forbes Boulevard
Suite H
Lanham, MD  20706
301-459-3366 x.5010
fax 301-429-5748
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322096" href="/Public/Bug/Display.html?id=27274#txn-322096">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;13:39:22&nbsp;2007</span>
    <span class="description">david [...] kineticode.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 10:37:24 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;david [...] kineticode.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322096/147273/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147273">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On May 24, 2007, at 10:32, John Peacock via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, *your* tests pass, but are you testing multiple recipients for
&gt; overlapping path&#39;s?  SVN::Notify::Config&#39;s uses the empty path  
&gt; &#40;matches
&gt; every repository commit&#41; for globals &#40;like PATH&#41;.
&gt;
&gt; Besides, just from first principles, the code is wrong.  You can&#39;t
&gt; access an array by index in a for&#40;&#41; loop and delete elements from the
&gt; array inside the loop &#40;unless you also decrement the index at the same
&gt; time&#41;.  You are guaranteed to skip elements.
</div>
Quite right. My local Perl is broken &#40;too much Ruby development these  
days&#41;, but does this work?

Index: Notify.pm
===================================================================
--- Notify.pm   &#40;revision 3299&#41;
+++ Notify.pm   &#40;working copy&#41;
@@ -961,8 +961,9 @@
      my %seen;
      while &#40;&lt;$fh&gt;&#41; {
          s/[\n\r\/\\]+$//;
-        for &#40;my $i = 0; $i &lt; @$regexen; $i += 2&#41; {
-            my &#40;$email, $rx&#41; = @{$regexen}[$i, $i + 1];
+        @rxen = @$regexen;
+        for &#40;my $i = 0; $i &lt; @rxen; $i += 2&#41; {
+            my &#40;$email, $rx&#41; = @rxen[$i, $i + 1];
              # If the directory matches the regex, save the email.
              if &#40;/$rx/&#41; {
                  $self-&gt;_dbpnt&#40; qq{&#34;$_&#34; matched $rx}&#41; if $self-&gt; 
{verbose} &gt; 2;

Thanks,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322104" href="/Public/Bug/Display.html?id=27274#txn-322104">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;14:09:15&nbsp;2007</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 14:08:57 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322104/147283/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147283">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Wheeler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Quite right. My local Perl is broken &#40;too much Ruby development these  
&gt; days&#41;, but does this work?
</div>
It does, but I&#39;m not entirely convinced that is the correct fix.

I *think* &#40;based on the comments&#41; that you are considering the 
possibility that the same e-mail address &#40;key&#41; will match multiple paths 
and you only want to send a single e-mail.  In this case, the previous line:

        push @$tos, $email unless $seen{$email}++;

has the appropriate effect.  I suspect the splice&#40;&#41; came out the 
sensible notion that if you have already matched once in this file, you 
don&#39;t want to check the same regex again.  But I &#39;m not 100% sure that 
is what that code does... :&#40;

For reference purposes, SVN::Notify::Config works like having multiple 
to_regex_map entries on the command line of svnnotify.  All matching 
paths must generate a matching &#39;to&#39; entry in order for everything to 
work properly.

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4501 Forbes Boulevard
Suite H
Lanham, MD  20706
301-459-3366 x.5010
fax 301-429-5748
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322106" href="/Public/Bug/Display.html?id=27274#txn-322106">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;14:45:21&nbsp;2007</span>
    <span class="description">david [...] kineticode.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-0.26 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 11:43:37 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;david [...] kineticode.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322106/147285/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147285">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On May 24, 2007, at 11:09, John Peacock via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I *think* &#40;based on the comments&#41; that you are considering the
&gt; possibility that the same e-mail address &#40;key&#41; will match multiple  
&gt; paths
&gt; and you only want to send a single e-mail.
</div>
Right, each email address should be added as a recipient only once.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;   In this case, the previous line:
&gt;
&gt;       push @$tos, $email unless $seen{$email}++;
&gt;
&gt; has the appropriate effect.  I suspect the splice&#40;&#41; came out the
&gt; sensible notion that if you have already matched once in this file,  
&gt; you
&gt; don&#39;t want to check the same regex again.  But I &#39;m not 100% sure that
&gt; is what that code does... :&#40;
</div>
It looks to me like it does, but you&#39;re right about the push  
statement covering the issue.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; For reference purposes, SVN::Notify::Config works like having multiple
&gt; to_regex_map entries on the command line of svnnotify.  All matching
&gt; paths must generate a matching &#39;to&#39; entry in order for everything to
&gt; work properly.
</div>
Oh, so they *all* have to work? So it&#39;s best, from your POV, not to  
change the array at all. Okay, that works for me, since we do have  
the push line to cover the issue, as you pointed out.

Best,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-322111" href="/Public/Bug/Display.html?id=27274#txn-322111">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;24&nbsp;15:15:05&nbsp;2007</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-2.65 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 24 May 2007 15:13:05 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/322111/147290/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/147290">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Wheeler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Oh, so they *all* have to work? So it&#39;s best, from your POV, not to  
&gt; change the array at all. Okay, that works for me, since we do have  
&gt; the push line to cover the issue, as you pointed out.
</div>
Yeah, if you have this structure:

/project1/trunk
/project1/trunk/accounting

and the following config file:

#!/usr/bin/perl -MSVN::Notify::Config=$0
--- #YAML:1.0
&#39;&#39;:
   PATH: &#34;/usr/local/bin:/usr/bin&#34;
&#39;/project1/trunk&#39;:
   handler: Dummy
   user_domain: example.com
   to:
     - trunk@example.com
     - other@example.com
   with_diff: 1
&#39;/project1/trunk/accounting&#39;:
   handler: Dummy
   from: tags@example.com
   to:
     - cfo@example.com
   smtp: 127.0.0.1

Then a specific commit of

/project1/trunk/accounting/somefile.txt

should generate 3 &#39;to&#39; entries &#40;each of the above will match&#41;.  In the 
above case the Dummy handler just dumps out the $notify object as YAML, 
but it could be two e-mail&#39;s with diff and one without...

So if you can release 2.6501 without the offending splice&#40;&#41;, then I can 
close my bug too... ;-&#41;

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4501 Forbes Boulevard
Suite H
Lanham, MD  20706
301-459-3366 x.5010
fax 301-429-5748
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-324164" href="/Public/Bug/Display.html?id=27274#txn-324164">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;03&nbsp;10:06:35&nbsp;2007</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-2.65 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 03 Jun 2007 10:04:00 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/324164/148484/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/148484">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 327b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">PING - Any chance you can squeeze out a new release of SVN::Notify with the fix
we discussed?  Is there anything I can do to help?

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4501 Forbes Boulevard
Suite H
Lanham, MD  20706
301-459-3366 x.5010
fax 301-429-5748
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-327125" href="/Public/Bug/Display.html?id=27274#txn-327125">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;17&nbsp;01:11:44&nbsp;2007</span>
    <span class="description">david [...] kineticode.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-2.65 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 16 Jun 2007 22:11:21 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David E. Wheeler&#34; &lt;david [...] kineticode.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/327125/150154/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150154">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 319b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Jun 3, 2007, at 07:06, John Peacock via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; PING - Any chance you can squeeze out a new release of SVN::Notify  
&gt; with the fix
&gt; we discussed?  Is there anything I can do to help?
</div>
Sorry, I&#39;ve just been so slammed. I suck. I&#39;ve just now uploaded 2.66  
with the fix. Apologies for the delay.

Best,

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-327205" href="/Public/Bug/Display.html?id=27274#txn-327205">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;17&nbsp;11:07:36&nbsp;2007</span>
    <span class="description">jpeacock [...] rowman.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #27274] SVN-Notify-2.65 breaks SVN::Notify::Config &#40;and others&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 17 Jun 2007 11:07:42 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SVN-Notify [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> John Peacock &lt;jpeacock [...] rowman.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/327205/150192/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/150192">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 378b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">David Wheeler via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry, I&#39;ve just been so slammed. I suck. I&#39;ve just now uploaded 2.66  
&gt; with the fix. Apologies for the delay.
</div>
That&#39;s OK!  I appreciate your getting to it.

John

-- 
John Peacock
Director of Information Research and Technology
Rowman &#38; Littlefield Publishing Group
4501 Forbes Blvd
Suite H
Lanham, MD 20706
301-459-3366 x.5010
fax 301-429-5747
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-418014" href="/Public/Bug/Display.html?id=27274#txn-418014">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;06&nbsp;13:56:37&nbsp;2008</span>
    <span class="description">dwheeler [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-418016" href="/Public/Bug/Display.html?id=27274#txn-418016">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;06&nbsp;13:56:53&nbsp;2008</span>
    <span class="description">dwheeler [...] cpan.org -  Fixed in 2.66 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.632562</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
