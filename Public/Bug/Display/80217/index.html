<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #80217 for Win32-API: Build failure under Cygwin on Windows</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #80217 for Win32-API: Build failure under Cygwin on Windows</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Win32-API">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Win32-API">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Win32-API">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Win32-API">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Win32-API">Win32-API CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">80217</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Win32-API">Win32-API</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">BULKDD [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jdhedden [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-35436-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.72    </td>
  </tr>
  <tr id="CF-35437-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




win32api.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1130804/594963/win32api.patch">
Fri Oct 19 08:40:15 2012 (513b) by jdhedden [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=80217">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1129572" href="/Public/Bug/Display.html?id=80217#txn-1129572">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;16&nbsp;08:53:50&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Build failure under Cygwin on Windows</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1129572/594211/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594211">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 7.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Checking if your kit is complete...
Looks good
Writing Makefile for Win32::API::Callback
Writing MYMETA.yml and MYMETA.json
Writing Makefile for Win32::API
Writing MYMETA.yml and MYMETA.json

cp Type.pm blib/lib/Win32/API/Type.pm
cp Callback.pm blib/lib/Win32/API/Callback.pm
cp Test.pm blib/lib/Win32/API/Test.pm
cp Struct.pm blib/lib/Win32/API/Struct.pm
cp API.pm blib/lib/Win32/API.pm
cp IATPatch.pod blib/lib/Win32/API/Callback/IATPatch.pod
make[1]: Entering directory `/var/perl/cpan/build/Win32-API-
0.72/Callback&#39;
/usr/bin/perl.exe /usr/lib/perl5/5.17.5/ExtUtils/xsubpp  -typemap 
/usr/lib/perl5/5.17.5/ExtUtils/typemap  Callback.xs &gt; Callback.xsc &#38;&#38; mv 
Callback.xsc Callback.c
gcc -c    -DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -DNO_MATHOMS -fno-
strict-aliasing -pipe -fstack-protector -I/usr/local/include -
DUSEIMPORTLIB -Os -pipe -funit-at-a-time -march=pentium4 -mfpmath=sse -
mieee-fp -mmmx -msse -msse2    -DVERSION=\&#34;0.72\&#34;  -DXS_VERSION=\&#34;0.72\&#34;  
&#34;-I/usr/lib/perl5/5.17.5/cygwin/CORE&#34;   Callback.c
Callback.xs: In function &#39;PerlCallback&#39;:
Callback.xs:229:5: warning: cast from pointer to integer of different 
size
Callback.xs: In function &#39;XS_Win32__API__Callback__HeapBlock_new&#39;:
Callback.xs:625:18: warning: cast from pointer to integer of different 
size
Callback.xs: In function &#39;XS_Win32__API__Callback__HeapBlock_DESTROY&#39;:
Callback.xs:653:27: warning: cast to pointer from integer of different 
size
Callback.xs: In function &#39;XS_Win32__API__Callback__IATPatch_new&#39;:
Callback.xs:681:21: warning: cast to pointer from integer of different 
size
Callback.xs:695:23: warning: cast to pointer from integer of different 
size
Callback.xs:704:5: warning: cast from pointer to integer of different 
size
Callback.xs:706:5: warning: cast from pointer to integer of different 
size
Callback.xs: In function &#39;XS_Win32__API__Callback__IATPatch_Unpatch&#39;:
Callback.xs:742:19: warning: cast to pointer from integer of different 
size
Callback.xs:744:13: warning: cast to pointer from integer of different 
size
rm -f ../blib/arch/auto/Win32/API/Callback/Callback.dll
g++  --shared  -Wl,--enable-auto-import -Wl,--export-all-symbols -Wl,--
enable-auto-image-base -s -L/usr/local/lib -fstack-protector Callback.o  
-o ../blib/arch/auto/Win32/API/Callback/Callback.dll    \
  /usr/lib/perl5/5.17.5/cygwin/CORE/cygperl5_17_5.dll           \
  
chmod 755 ../blib/arch/auto/Win32/API/Callback/Callback.dll
test -s Callback.bs &#38;&#38; cp Callback.bs 
../blib/arch/auto/Win32/API/Callback/Callback.bs &#38;&#38; \
  chmod 644 ../blib/arch/auto/Win32/API/Callback/Callback.bs
Makefile:444: recipe for target 
`../blib/arch/auto/Win32/API/Callback/Callback.dll&#39; failed
make[1]: [../blib/arch/auto/Win32/API/Callback/Callback.dll] Error 1 
&#40;ignored&#41;
make[1]: Leaving directory `/var/perl/cpan/build/Win32-API-
0.72/Callback&#39;
/usr/bin/perl.exe /usr/lib/perl5/5.17.5/ExtUtils/xsubpp  -nolinenumbers  
-typemap /usr/lib/perl5/5.17.5/ExtUtils/typemap -typemap typemap  API.xs 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; API.xsc &#38;&#38; mv API.xsc API.c
</div>gcc -c    -DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -DNO_MATHOMS -fno-
strict-aliasing -pipe -fstack-protector -I/usr/local/include -
DUSEIMPORTLIB -Os -pipe -funit-at-a-time -march=pentium4 -mfpmath=sse -
mieee-fp -mmmx -msse -msse2    -DVERSION=\&#34;0.72\&#34;  -DXS_VERSION=\&#34;0.72\&#34;  
&#34;-I/usr/lib/perl5/5.17.5/cygwin/CORE&#34;   API.c
API.c:123:55: error: expected declaration specifiers or &#39;...&#39; before 
&#39;__int32&#39;
API.c: In function &#39;w32sv_setwstr&#39;:
API.c:131:22: error: &#39;wlenparam&#39; undeclared &#40;first use in this function&#41;
API.c:131:22: note: each undeclared identifier is reported only once for 
each function it appears in
API.c:150:15: error: &#39;WC_NO_BEST_FIT_CHARS&#39; undeclared &#40;first use in 
this function&#41;
API.c: In function &#39;XS_Win32__API_LoadLibrary&#39;:
API.c:371:13: warning: cast from pointer to integer of different size
API.c: In function &#39;XS_Win32__API_GetProcAddress&#39;:
API.c:390:15: warning: cast to pointer from integer of different size
API.c: In function &#39;XS_Win32__API_FreeLibrary&#39;:
API.c:414:15: warning: cast to pointer from integer of different size
API.c: In function &#39;XS_Win32__API_PointerTo&#39;:
API.c:506:5: warning: cast from pointer to integer of different size
API.c: In function &#39;XS_Win32__API_SafeReadWideCString&#39;:
API.c:701:19: error: &#39;WC_NO_BEST_FIT_CHARS&#39; undeclared &#40;first use in 
this function&#41;
API.c: In function &#39;XS_Win32__API_GetModuleFileName&#39;:
API.c:747:14: warning: cast to pointer from integer of different size
API.c:765:9: error: too many arguments to function &#39;w32sv_setwstr&#39;
API.c:123:13: note: declared here
API.c: In function &#39;XS_Win32__API_Call&#39;:
API.c:1106:19: warning: cast to pointer from integer of different size
Makefile:351: recipe for target `API.o&#39; failed
make: *** [API.o] Error 1

If you need more information, just holler.  &#40;And, if possible, it might 
be good to fix those warnings.&#41;

My &#39;perl -V&#39; dump:


Summary of my perl5 &#40;revision 5 version 17 subversion 5 patch 54805&#41; 
configuration:
  Snapshot of: f7a5efebd238ec9a1dc9839d1d642288cee9de56
  Platform:
    osname=cygwin, osvers=1.7.16&#40;0.26253&#41;, archname=cygwin-thread-multi-
64int
    uname=&#39;cygwin_nt-5.1 med-heddenj 1.7.16&#40;0.26253&#41; 2012-07-20 22:55 
i686 cygwin &#39;
    config_args=&#39;-de -Duse64bitint -Dusethreads -Uusemymalloc -Dusedevel 
-Dversiononly=no -Dinstallusrbinperl -Uusemallocwrap -
Dinc_version_list=none -Dnoextensions=DB_File Devel/DProf Devel/Peek 
GDBM_File IPC/SysV NDBM_File ODBM_File Sys/Syslog Text/Soundex 
Time/Piece attrs B/Debug B/Lint -A append:ccflags= -DNO_MATHOMS -A 
define:optimize=-Os -pipe -funit-at-a-time -march=pentium4 -mfpmath=sse 
-mieee-fp -mmmx -msse -msse2&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;, ccflags =&#39;-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -
DNO_MATHOMS -fno-strict-aliasing -pipe -fstack-protector -
I/usr/local/include&#39;,
    optimize=&#39;-Os -pipe -funit-at-a-time -march=pentium4 -mfpmath=sse -
mieee-fp -mmmx -msse -msse2&#39;,
    cppflags=&#39;-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -DNO_MATHOMS -
fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.5.3&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, 
Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;g++&#39;, ldflags =&#39; -Wl,--enable-auto-import -Wl,--export-all-
symbols -Wl,--enable-auto-image-base -s -fstack-protector -
L/usr/local/lib&#39;
    libpth=/usr/local/lib /usr/lib /lib
    libs=-ldb -ldl -lcrypt
    perllibs=-ldl -lcrypt
    libc=/usr/lib/libc.a, so=dll, useshrplib=true, 
libperl=cygperl5_17_5.dll
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; -s&#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39; --shared  -Wl,--enable-auto-import -Wl,-
-export-all-symbols -Wl,--enable-auto-image-base -s -L/usr/local/lib -
fstack-protector&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: HAS_TIMES MULTIPLICITY NO_MATHOMS PERLIO_LAYERS
                        PERL_DONT_CREATE_GVSV PERL_IMPLICIT_CONTEXT
                        PERL_PRESERVE_IVUV PERL_USE_DEVEL
                        PERL_USE_SAFE_PUTENV USE_64_BIT_INT USE_ITHREADS
                        USE_LARGE_FILES USE_LOCALE USE_LOCALE_COLLATE
                        USE_LOCALE_CTYPE USE_LOCALE_NUMERIC USE_PERLIO
                        USE_PERL_ATOF USE_REENTRANT_API
  Built under cygwin
  Compiled at Oct 12 2012 09:44:38
  %ENV:
    PERLIO=&#34;perlio&#34;
    CYGWIN=&#34;nodosfilewarning&#34;
  @INC:
    /usr/lib/perl5/site_perl/5.17.5/cygwin
    /usr/lib/perl5/site_perl/5.17.5
    /usr/lib/perl5/5.17.5/cygwin
    /usr/lib/perl5/5.17.5
    .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1129709" href="/Public/Bug/Display.html?id=80217#txn-1129709">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;16&nbsp;14:21:15&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1129709/594295/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594295">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 16 08:53:50 2012, JDHEDDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you need more information, just holler.  &#40;And, if possible, it might 
&gt; be good to fix those warnings.&#41;
&gt; 
</div>

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Makefile:444: recipe for target 
&gt; `../blib/arch/auto/Win32/API/Callback/Callback.dll&#39; failed
&gt; make[1]: [../blib/arch/auto/Win32/API/Callback/Callback.dll] Error 1 
&gt; &#40;ignored&#41;
&gt; make[1]: Leaving directory `/var/perl/cpan/build/Win32-API-
&gt; 0.72/Callback&#39;
</div>
Why did Callback.dll fail to build? Other than the 32 to 64 cast
warnings, I dont see anything else in the compiler log.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; API.c:123:55: error: expected declaration specifiers or &#39;...&#39; before 
&gt; &#39;__int32&#39;
&gt; API.c: In function &#39;w32sv_setwstr&#39;:
&gt; API.c:131:22: error: &#39;wlenparam&#39; undeclared &#40;first use in this function&#41;
&gt; API.c:131:22: note: each undeclared identifier is reported only once for 
&gt; each function it appears in
&gt; API.c:150:15: error: &#39;WC_NO_BEST_FIT_CHARS&#39; undeclared &#40;first use in 
&gt; this function&#41;
</div>
WC_NO_BEST_FIT_CHARS is defined in Cygwin
<span class="clickylink"><a target="new" rel="nofollow" href="http://cygwin.com/cgi-bin/cvsweb.cgi/src/winsup/w32api/include/winnls.h?rev=1.10&#38;content-type=text/x-cvsweb-markup&#38;cvsroot=src">http://cygwin.com/cgi-bin/cvsweb.cgi/src/winsup/w32api/include/winnls.h?rev=1.10&#38;content-type=text/x-cvsweb-markup&#38;cvsroot=src</a></span>
in a WINVER conditional and it also is in a WINVER conditional on Visual
C. But Win32:: has
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">___________________________________________________
#ifndef WC_NO_BEST_FIT_CHARS
#  define WC_NO_BEST_FIT_CHARS 0x00000400
#endif
<div class="message-stanza open">___________________________________________________
in it. Strawberry does not keep WC_NO_BEST_FIT_CHARS in a conditional
<span class="clickylink"><a target="new" rel="nofollow" href="http://mingw-w64.svn.sourceforge.net/viewvc/mingw-w64/trunk/mingw-w64-headers/include/winnls.h?revision=5147&#38;view=markup">http://mingw-w64.svn.sourceforge.net/viewvc/mingw-w64/trunk/mingw-w64-headers/include/winnls.h?revision=5147&#38;view=markup</a></span>
. I&#39;ll guess Cygwin Perl does not set WINVER but native Win32 Perl does.

Strawberry defines __int3264 in
<span class="clickylink"><a target="new" rel="nofollow" href="http://mingw-w64.svn.sourceforge.net/viewvc/mingw-w64/trunk/mingw-w64-headers/include/basetsd.h?revision=5316&#38;view=markup">http://mingw-w64.svn.sourceforge.net/viewvc/mingw-w64/trunk/mingw-w64-headers/include/basetsd.h?revision=5316&#38;view=markup</a></span>
and __int32 in
<span class="clickylink"><a target="new" rel="nofollow" href="http://mingw-w64.svn.sourceforge.net/viewvc/mingw-w64/trunk/mingw-w64-headers/crt/_mingw.h.in?revision=5431&#38;view=markup">http://mingw-w64.svn.sourceforge.net/viewvc/mingw-w64/trunk/mingw-w64-headers/crt/_mingw.h.in?revision=5431&#38;view=markup</a></span>
. Cygwin defines __int3264 in
<span class="clickylink"><a target="new" rel="nofollow" href="http://cygwin.com/cgi-bin/cvsweb.cgi/src/winsup/w32api/include/basetsd.h?rev=1.6&#38;content-type=text/x-cvsweb-markup&#38;cvsroot=src">http://cygwin.com/cgi-bin/cvsweb.cgi/src/winsup/w32api/include/basetsd.h?rev=1.6&#38;content-type=text/x-cvsweb-markup&#38;cvsroot=src</a></span>
but I dont have Cygwin&#39;s headers to grep to see if __int32 is defined. I
think I will try INT_PTR instead of __int3264.

Getting Win32::API working on your 32 bit with quads Cygwin will take a
couple trys since once it compiles, I bet a 32 bit with 64 ivs bug will
come up. Can you try my github version &#40;not right now, no changes are up
right now&#41; at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> in the future as
part of this ticket? IDK if Cosimo has time to make new CPAN releases
which may or may not work on Cygwin, and I really wouldn&#39;t want
Win32::API to hit 1.00 any time soon.
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1129712" href="/Public/Bug/Display.html?id=80217#txn-1129712">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;16&nbsp;14:21:16&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1129772" href="/Public/Bug/Display.html?id=80217#txn-1129772">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;16&nbsp;20:15:00&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1129772/594326/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594326">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 240b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Can you try my github version &#40;not right now, no changes are up
&gt; right now&#41; at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> in the future
&gt; as part of this ticket?
</div>Yes, I can access it.  I&#39;d be more than happy to test any changes you 
make.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1129809" href="/Public/Bug/Display.html?id=80217#txn-1129809">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;16&nbsp;22:03:39&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1129809/594343/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594343">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 212b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Oct 16 20:15:00 2012, JDHEDDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Yes, I can access it.  I&#39;d be more than happy to test any changes you 
&gt; make.
</div>
New version up at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . Try it and
report back.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1129948" href="/Public/Bug/Display.html?id=80217#txn-1129948">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;07:51:29&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1129948/594450/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594450">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 9.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012-10-16 22:03:39, BULKDD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Tue Oct 16 20:15:00 2012, JDHEDDEN wrote:
<div class="message-stanza open">&gt; &gt; Yes, I can access it.  I&#39;d be more than happy to test any changes 
</div></div>you 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; make.
</div>&gt; 
&gt; New version up at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . Try it 
</div>and
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; report back.
</div>
Progress.  It builds, but segfaults on testing:



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; make
</div>cp Type.pm blib/lib/Win32/API/Type.pm
cp Callback.pm blib/lib/Win32/API/Callback.pm
cp Test.pm blib/lib/Win32/API/Test.pm
cp Struct.pm blib/lib/Win32/API/Struct.pm
cp API.pm blib/lib/Win32/API.pm
cp IATPatch.pod blib/lib/Win32/API/Callback/IATPatch.pod
make[1]: Entering directory `/d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/Callback&#39;
/usr/bin/perl.exe /usr/lib/perl5/5.16.1/ExtUtils/xsubpp  -typemap 
/usr/lib/perl5/5.16.1/ExtUtils/typemap  Callback.xs &gt; Callback.xsc &#38;&#38; mv 
Callback.xsc Callback.c
gcc -c   -DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -DNO_MATHOMS -fno-
strict-aliasing -pipe -DUSEIMPORTLIB -Os -pipe -funit-at-a-time -
march=pentium4 -mfpmath=sse -mieee-fp -mmmx -msse -msse2   -
DVERSION=\&#34;0.72\&#34; -DXS_VERSION=\&#34;0.72\&#34;  &#34;-
I/usr/lib/perl5/5.16.1/cygwin/CORE&#34;   Callback.c
In file included from Callback.xs:36:
../API.h:85: warning: malformed &#39;#pragma pack&#40;push[, id], &lt;n&gt;&#41;&#39; - 
ignored
../API.h:93: warning: #pragma pack &#40;pop&#41; encountered without matching 
#pragma pack &#40;push, &lt;n&gt;&#41;
Callback.xs: In function `PerlCallback&#39;:
Callback.xs:229: warning: cast from pointer to integer of different size
Callback.xs: In function `XS_Win32__API__Callback__HeapBlock_new&#39;:
Callback.xs:625: warning: cast from pointer to integer of different size
Callback.xs: In function `XS_Win32__API__Callback__HeapBlock_DESTROY&#39;:
Callback.xs:653: warning: cast to pointer from integer of different size
Callback.xs: In function `XS_Win32__API__Callback__IATPatch_new&#39;:
Callback.xs:681: warning: cast to pointer from integer of different size
Callback.xs:695: warning: cast to pointer from integer of different size
Callback.xs:704: warning: cast from pointer to integer of different size
Callback.xs:706: warning: cast from pointer to integer of different size
Callback.xs: In function `XS_Win32__API__Callback__IATPatch_Unpatch&#39;:
Callback.xs:742: warning: cast to pointer from integer of different size
Callback.xs:744: warning: cast to pointer from integer of different size
rm -f ../blib/arch/auto/Win32/API/Callback/Callback.dll
g++  --shared  -Wl,--enable-auto-import -Wl,--export-all-symbols -Wl,--
enable-auto-image-base -s -L/usr/local/lib Callback.o  -o 
../blib/arch/auto/Win32/API/Callback/Callback.dll      \
          /usr/lib/perl5/5.16.1/cygwin/CORE/cygperl5_16_1.dll           
\
          
chmod 755 ../blib/arch/auto/Win32/API/Callback/Callback.dll
test -s Callback.bs &#38;&#38; cp Callback.bs 
../blib/arch/auto/Win32/API/Callback/Callback.bs &#38;&#38; \
          chmod 644 ../blib/arch/auto/Win32/API/Callback/Callback.bs
make[1]: [../blib/arch/auto/Win32/API/Callback/Callback.dll] Error 1 
&#40;ignored&#41;
make[1]: Leaving directory `/d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/Callback&#39;
/usr/bin/perl.exe /usr/lib/perl5/5.16.1/ExtUtils/xsubpp  -nolinenumbers  
-typemap /usr/lib/perl5/5.16.1/ExtUtils/typemap -typemap typemap  API.xs 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; API.xsc &#38;&#38; mv API.xsc API.c
</div>gcc -c   -DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -DNO_MATHOMS -fno-
strict-aliasing -pipe -DUSEIMPORTLIB -Os -pipe -funit-at-a-time -
march=pentium4 -mfpmath=sse -mieee-fp -mmmx -msse -msse2   -
DVERSION=\&#34;0.72\&#34; -DXS_VERSION=\&#34;0.72\&#34;  &#34;-
I/usr/lib/perl5/5.16.1/cygwin/CORE&#34;   API.c
In file included from API.c:28:
API.h:85: warning: malformed &#39;#pragma pack&#40;push[, id], &lt;n&gt;&#41;&#39; - ignored
API.h:93: warning: #pragma pack &#40;pop&#41; encountered without matching 
#pragma pack &#40;push, &lt;n&gt;&#41;
API.c: In function `XS_Win32__API_LoadLibrary&#39;:
API.c:371: warning: cast from pointer to integer of different size
API.c: In function `XS_Win32__API_GetProcAddress&#39;:
API.c:390: warning: cast to pointer from integer of different size
API.c: In function `XS_Win32__API_FreeLibrary&#39;:
API.c:414: warning: cast to pointer from integer of different size
API.c: In function `XS_Win32__API_PointerTo&#39;:
API.c:506: warning: cast from pointer to integer of different size
API.c: In function `XS_Win32__API_GetModuleFileName&#39;:
API.c:747: warning: cast to pointer from integer of different size
API.c: In function `XS_Win32__API_Call&#39;:
API.c:1106: warning: cast to pointer from integer of different size
rm -f blib/arch/auto/Win32/API/API.dll
g++  --shared  -Wl,--enable-auto-import -Wl,--export-all-symbols -Wl,--
enable-auto-image-base -s -L/usr/local/lib API.o  -o 
blib/arch/auto/Win32/API/API.dll   \
          /usr/lib/perl5/5.16.1/cygwin/CORE/cygperl5_16_1.dll           
\
          
chmod 755 blib/arch/auto/Win32/API/API.dll
test -s API.bs &#38;&#38; cp API.bs blib/arch/auto/Win32/API/API.bs &#38;&#38; \
          chmod 644 blib/arch/auto/Win32/API/API.bs
make: [blib/arch/auto/Win32/API/API.dll] Error 1 &#40;ignored&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; make test
</div>chmod 755 API_test.dll
make[1]: Entering directory `/d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/Callback&#39;
make[1]: Leaving directory `/d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/Callback&#39;
PERL_DL_NONLAZY=1 /usr/bin/perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; 
&#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/00_API.t .......... 1/48 # API test dll found at &#40;./API_test.dll&#41;
# Cygwin::winpid_to_pid&#40;&#41;=66332
# Cygwin::winpid_to_pid&#40;&#41;=66332
# Cygwin::winpid_to_pid&#40;&#41;=66332
t/00_API.t .......... Failed 37/48 subtests 
t/01_Struct.t ....... 1/18 # $^E=
t/01_Struct.t ....... Failed 13/18 subtests 
t/02_GetProcess.t ... 1/3 # $result=66376
# $$=67856
t/02_GetProcess.t ... ok   
t/03_undef.t ........ 1/3 # Win32::API 0.72
# Import: 
t/03_undef.t ........ Failed 2/3 subtests 
t/04_rt_48006.t ..... 1/4 

Uninit warnings are intentional

Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
Use of uninitialized value in pack at /d/Xfer/bulk88-perl5-win32-api-
ce9d4d7/blib/lib/Win32/API/Struct.pm line 317.
# Size is 296. Should be 296
t/04_rt_48006.t ..... ok   
t/05_more_struct.t .. ok     
t/06_rt_74578.t ..... 1/3 # @pack=&#40;LLLLLLLlLa260, ARRAY&#40;0x802870&#41;, 
ARRAY&#40;0x802990&#41;, 296, ARRAY&#40;0x7fa1d0&#41;&#41;
t/06_rt_74578.t ..... ok   
t/benchmark.t ....... 1/7 # API test dll found at &#40;./API_test.dll&#41;
t/benchmark.t ....... Failed 2/7 subtests 
t/pod-coverage.t .... ok   
t/pod.t ............. ok   
t/v69.t ............. 1/36 # API test dll found at &#40;./API_test.dll&#41;
t/v69.t ............. Failed 32/36 subtests 
t/v70.t ............. ok     
t/v71.t ............. 1/23 # API test dll found at &#40;./API_test.dll&#41;
t/v71.t ............. Failed 19/23 subtests 

Test Summary Report
-------------------
t/00_API.t        &#40;Wstat: 139 Tests: 11 Failed: 0&#41;
  Non-zero wait status: 139
  Parse errors: Bad plan.  You planned 48 tests but ran 11.
t/01_Struct.t     &#40;Wstat: 139 Tests: 5 Failed: 0&#41;
  Non-zero wait status: 139
  Parse errors: Bad plan.  You planned 18 tests but ran 5.
t/03_undef.t      &#40;Wstat: 139 Tests: 1 Failed: 0&#41;
  Non-zero wait status: 139
  Parse errors: Bad plan.  You planned 3 tests but ran 1.
t/benchmark.t     &#40;Wstat: 139 Tests: 5 Failed: 0&#41;
  Non-zero wait status: 139
  Parse errors: Bad plan.  You planned 7 tests but ran 5.
t/v69.t           &#40;Wstat: 139 Tests: 4 Failed: 0&#41;
  Non-zero wait status: 139
  Parse errors: Bad plan.  You planned 36 tests but ran 4.
t/v71.t           &#40;Wstat: 139 Tests: 4 Failed: 0&#41;
  Non-zero wait status: 139
  Parse errors: Bad plan.  You planned 23 tests but ran 4.
Files=13, Tests=90, 10 wallclock secs &#40; 0.13 usr  0.20 sys +  5.03 cusr  
4.23 csys =  9.58 CPU&#41;
Result: FAIL
Failed 6/13 test programs. 0/90 subtests failed.
make: *** [test_dynamic] Error 255


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib t/00_API.t 
</div>1..48
ok 1 - use Win32::API;
ok 2 - use Win32::API::Test;
ok 3 - use Win32;
ok 4 - loaded
# API test dll found at &#40;./API_test.dll&#41;
ok 5 - found API test dll
ok 6 - GetCurrentProcessId&#40;&#41; function found
# Cygwin::winpid_to_pid&#40;&#41;=66196
ok 7 - GetCurrentProcessId&#40;&#41; result ok
# Cygwin::winpid_to_pid&#40;&#41;=66196
ok 8 - GetCurrentProcessId&#40;&#41; result ok
ok 9 - Import of GetCurrentProcessId&#40;&#41; function from kernel32.dll
# Cygwin::winpid_to_pid&#40;&#41;=66196
ok 10 - GetCurrentProcessId&#40;&#41; result ok
ok 11 - Import of IsBadReadPtr function from kernel32.dll
Segmentation fault &#40;core dumped&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib t/01_Struct.t
</div>1..18
ok 1 - use Win32::API;
ok 2 - use Win32::API::Test;
ok 3 - loaded
ok 4 - found API test dll
ok 5 - mangle_simple_struct&#40;&#41; function
# $^E=
Segmentation fault &#40;core dumped&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib t/03_undef.t 
</div>1..3
# Win32::API 0.72
ok 1 - import sample API &#40;PeekNamedPipe&#41;
# Import: 
Segmentation fault &#40;core dumped&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib t/benchmark.t 
</div>1..7
ok 1 - use Win32::API;
ok 2 - use Win32::API::Test;
# API test dll found at &#40;./API_test.dll&#41;
ok 3 - found API test dll
ok 4 - setlasterror_loop&#40;&#41; function defined
ok 5 - QueryPerformanceCounter Win32::API obj created
Segmentation fault &#40;core dumped&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib t/v69.t
</div>1..36
ok 1 - use Win32::API;
ok 2 - use Win32::API::Test;
ok 3 - use Win32;
# API test dll found at &#40;./API_test.dll&#41;
ok 4 - found API test dll
Segmentation fault &#40;core dumped&#41;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib t/v71.t 
</div>1..23
ok 1 - use Win32::API;
ok 2 - use Win32::API::Test;
# API test dll found at &#40;./API_test.dll&#41;
ok 3 - found API test dll
ok 4 - find_char&#40;&#41; function defined
Segmentation fault &#40;core dumped&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130015" href="/Public/Bug/Display.html?id=80217#txn-1130015">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;10:40:33&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130015/594495/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594495">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 622b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 17 07:51:29 2012, JDHEDDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Progress.  It builds, but segfaults on testing:
&gt; 
</div>
That is good. A new version is up at
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . It has a normally off
Win32::API verbose logging mode turned on. You will probably have to
redirect stderr to stdout on the console to get proper interleaving of
the 2. The TAP will be corrupt by the logging but the test line output
is still readable by a human. I am still looking at your last post, but
since I didn&#39;t quickly figure out what was wrong, I am requesting for
you to try the verbose debugging version up on github right now.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130056" href="/Public/Bug/Display.html?id=80217#txn-1130056">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;11:48:44&nbsp;2012</span>
    <span class="description">rurban [...] x-ray.at -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> libwin32 [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80217] Build failure under Cygwin on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 17 Oct 2012 10:48:32 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Reini Urban &lt;rurban [...] x-ray.at&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130056/594519/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594519">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Oct 17, 2012 at 9:40 AM, Daniel Dragan via RT
&lt;bug-Win32-API@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Oct 17 07:51:29 2012, JDHEDDEN wrote:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; Progress.  It builds, but segfaults on testing:
</div></div>
I can fully reproduce the errors.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That is good. A new version is up at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . It has a normally off
&gt; Win32::API verbose logging mode turned on. You will probably have to
&gt; redirect stderr to stdout on the console to get proper interleaving of
&gt; the 2. The TAP will be corrupt by the logging but the test line output
&gt; is still readable by a human. I am still looking at your last post, but
&gt; since I didn&#39;t quickly figure out what was wrong, I am requesting for
&gt; you to try the verbose debugging version up on github right now.
</div>
t/00_API.t:
ok 11 - Import of IsBadReadPtr function from kernel32.dll
&#40;PM&#41;new: converted &#39;./API_test.dll&#39; to
  &#39;API_test.dll&#39;
Win32::API::new: Loading library &#39;API_test.dll&#39;
&#40;PM&#41;parse_prototype: got PROC &#39;ThisFunctionDoesntExist&#39;
&#40;PM&#41;parse_prototype: got PARAMS &#39;int a, int b&#39;
&#40;PM&#41;parse_prototype: IN=&#39;int&#39; PACKING=&#39;i&#39; API_TYPE=3
&#40;PM&#41;parse_prototype: IN=&#39;int&#39; PACKING=&#39;i&#39; API_TYPE=3
parse_prototype: IN=[ 3 3 ]
parse_prototype: OUT=&#39;int&#39; PACKING=&#39;i&#39; API_TYPE=3
FAILED GetProcAddress for Proc &#39;ThisFunctionDoesntExist&#39;: Transport
endpoint is already connected
Segmentation fault &#40;core dumped&#41;

XS_Win32__API_Call &#40;my_perl=0x200393c8, cv=0x202d8150&#41; at API.c:866
866                     params[i].t = T_NUMBER;
&#40;gdb&#41; bt
#0  XS_Win32__API_Call &#40;my_perl=0x200393c8, cv=0x202d8150&#41; at API.c:866
&#40;gdb&#41; p i
$1 = 0
&#40;gdb&#41; p params[i]
$2 = {{b = 0x8bdc4589 &lt;Address 0x8bdc4589 out of bounds&gt;, c = -119
&#39;\211&#39;, s = 17801,
    p = 0x8bdc4589 &lt;Address 0x8bdc4589 out of bounds&gt;, l = 2346468745,
f = -8.48455424e-32, d = -626.03395816886143,
    q = -4574654168104680055}, t = 1 &#39;\001&#39;}

-- 
Reini Urban
<span class="clickylink"><a target="new" rel="nofollow" href="http://cpanel.net/">http://cpanel.net/</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl-compiler.org/">http://www.perl-compiler.org/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130086" href="/Public/Bug/Display.html?id=80217#txn-1130086">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;13:55:55&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130086/594538/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594538">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 17 11:48:44 2012, rurban@x-ray.at wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I can fully reproduce the errors.
</div>
As you said on IRC the problem is alloca. I installed a Cygwin Perl.

$ perl -V
Summary of my perl5 &#40;revision 5 version 14 subversion 2&#41; configuration:

  Platform:
    osname=cygwin, osvers=1.7.15&#40;0.26053&#41;,
archname=cygwin-thread-multi-64int
    uname=&#39;cygwin_nt-5.1 winxp 1.7.15&#40;0.26053&#41; 2012-05-09 10:25 i686
cygwin &#39;
    config_args=&#39;-de -Dlibperl=cygperl5_14.dll -Dcc=gcc-4 -Dld=g++-4
-Darchname=i686-cygwin-threads-64int -Dmksymlinks -Dusethreads -Accflags=-g&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;gcc-4&#39;, ccflags =&#39;-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -g
-fno-strict-aliasing -pipe -fstack-protector&#39;,
    optimize=&#39;-O3&#39;,
    cppflags=&#39;-DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -g
-fno-strict-aliasing -pipe -fstack-protector&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.5.3&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype=&#39;long long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8,
Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;g++-4&#39;, ldflags =&#39; -Wl,--enable-auto-import
-Wl,--export-all-symbols -Wl,--enable-auto-image-base -fstack-protector
-L/usr/local/lib&#39;
    libpth=/usr/local/lib /usr/lib /lib
    libs=-lgdbm -ldb -ldl -lcrypt -lgdbm_compat
    perllibs=-ldl -lcrypt
    libc=/usr/lib/libc.a, so=dll, useshrplib=true, libperl=cygperl5_14.dll
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=dll, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39; --shared  -Wl,--enable-auto-import
-Wl,--export-all-symbols -Wl,--enable-auto-image-base -L/usr/local/lib
-fstack-protector&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_PRESERVE_IVUV
                        PERL_USE_SAFE_PUTENV USE_64_BIT_INT USE_ITHREADS
                        USE_LARGE_FILES USE_PERLIO USE_PERL_ATOF
                        USE_REENTRANT_API
  Locally applied patches:
        Bug#55162 File::Spec::case_tolerant performance
        CYG07 $vendorarch/auto/.rebase
        CYG15 static Win32CORE
        CYG17 cyg-1.7 paths-utf8
        0c612ce82 Fix building static extensions on cygwin, -UUSEIMPORTLIB
        1bac5ecc1 Fix 64-bit threading sv.c: S_anonymise_cv_maybe
        Cygwin::sync_winenv added
  Built under cygwin
  Compiled at Jul 12 2012 14:17:21
  %ENV:
    PERL_JSON_BACKEND=&#34;JSON::XS&#34;
    PERL_YAML_BACKEND=&#34;YAML&#34;
    CYGWIN=&#34;tty&#34;
  @INC:
    /usr/lib/perl5/site_perl/5.14/i686-cygwin-threads-64int
    /usr/lib/perl5/site_perl/5.14
    /usr/lib/perl5/vendor_perl/5.14/i686-cygwin-threads-64int
    /usr/lib/perl5/vendor_perl/5.14
    /usr/lib/perl5/5.14/i686-cygwin-threads-64int
    /usr/lib/perl5/5.14
    /usr/lib/perl5/site_perl/5.10
    /usr/lib/perl5/vendor_perl/5.10
    /usr/lib/perl5/site_perl/5.8
    .

I got the same SEGV as others in this ticket said on benchmark.t. The
bug is limited to C funcs that Win32::API calls, that have more than 0
parameters, so this
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/COSIMO/Win32-API-0.72/t/00_API.t#L46">https://metacpan.org/source/COSIMO/Win32-API-0.72/t/00_API.t#L46</a></span> didn&#39;t
crash, but 95% of everything else did. I used a assembly debugger &#40;it
was faster for me, too much time to modify makefile.pl to include gdb
symbols&#41;, and what I think is the static linked in the DLL alloca,
returned in EAX &#40;return value of alloca&#41;, the return instruction address
to right after the CALL alloca opcode, not a pointer to somewhere
near/in the C stack. The bug is towards the end of alloca since the
former return IP is read from the C stack into eax, then eax is pushed
on the c stack, then a retn to return. EAX now contains the return
instructionaddress &#40;0x6E9E2772&#41; while EBP is 0022AA48 and ESP is
0022A960 right before the retn opcode. This is a code generation problem
with Cygwin, not a problem with Win32::API. Here is what I think is
alloca is

6E9E4020 51               push        ecx  ; save ecx
6E9E4021 8D 4C 24 08      lea         ecx,[esp+8] 
6E9E4025 3D 00 10 00 00   cmp         eax,1000h 
6E9E402A 72 15            jb          6E9E4041 
6E9E402C 81 E9 00 10 00 00 sub         ecx,1000h 
6E9E4032 83 09 00         or          dword ptr [ecx],0 
6E9E4035 2D 00 10 00 00   sub         eax,1000h 
6E9E403A 3D 00 10 00 00   cmp         eax,1000h 
6E9E403F 77 EB            ja          6E9E402C 
6E9E4041 29 C1            sub         ecx,eax 
6E9E4043 83 09 00         or          dword ptr [ecx],0 
6E9E4046 89 E0            mov         eax,esp ;move orig esp to eax, our
new mem block
6E9E4048 89 CC            mov         esp,ecx ;move new sp to esp
6E9E404A 8B 08            mov         ecx,dword ptr [eax]; restore ecx
from 6E9E4020
6E9E404C 8B 40 04         mov         eax,dword ptr [eax+4] ;ret addr to
eax, and trash alloca-ed pointer
6E9E404F 50               push        eax ;push eax on stack
6E9E4050 C3               ret             ;pop off stack and jmp
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130092" href="/Public/Bug/Display.html?id=80217#txn-1130092">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;14:51:46&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130092/594546/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594546">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">the alloca was linked from /lib/gcc/i686-pc-cygwin/4.5.3/libgcc.a .
Looking at libgcc.a&#39;s disassembly it was identical to what I saw in API.dll.

for the record cygwin gcc -S output

.globl _XS_Win32__API_Call
        .def    _XS_Win32__API_Call;    .scl    2;      .type   32;     .endef
_XS_Win32__API_Call:
LFB32:
        .loc 1 726 0
LVL373:
        pushl   %ebp
LCFI161:
        movl    %esp, %ebp
LCFI162:
        pushl   %edi
LCFI163:
        pushl   %esi
LCFI164:
        pushl   %ebx
LCFI165:
        subl    $204, %esp
LCFI166:
        .loc 1 726 0
        movl    8&#40;%ebp&#41;, %ebx
        .loc 1 728 0
        movl    72&#40;%ebx&#41;, %eax
        movl    &#40;%ebx&#41;, %edx
LVL374:
        movl    &#40;%eax&#41;, %edi
LVL375:
        subl    $4, %eax
        movl    %eax, 72&#40;%ebx&#41;
        movl    12&#40;%ebx&#41;, %eax
LVL376:
        movl    %edx, %esi
        leal    &#40;%eax,%edi,4&#41;, %ecx
LVL377:
        subl    %ecx, %esi
        sarl    $2, %esi
LVL378:
        .loc 1 732 0
        testl   %esi, %esi
        jle     L331
LVL379:
        .loc 1 728 0
        leal    1&#40;%edi&#41;, %ecx
LVL380:
        movl    %ecx, -108&#40;%ebp&#41;
LBB161:
        .loc 1 737 0
        movl    &#40;%eax,%ecx,4&#41;, %eax
        movl    %eax, -84&#40;%ebp&#41;
LVL381:
        .loc 1 739 0
        movl    16&#40;%ebx&#41;, %eax
LVL382:
        subl    %edx, %eax
        cmpl    $11, %eax
        jle     L332
LVL383:
L192:
LBB163:
        .loc 1 765 0
        movl    -84&#40;%ebp&#41;, %eax
        movl    $LC45, 8&#40;%esp&#41;
        movl    %ebx, &#40;%esp&#41;
        movl    %eax, 4&#40;%esp&#41;
        call    _Perl_sv_isa
        .loc 1 767 0
        movl    $0, 8&#40;%esp&#41;
        movl    $LC46, 4&#40;%esp&#41;
        movl    %ebx, &#40;%esp&#41;
        .loc 1 765 0
        movl    %eax, -92&#40;%ebp&#41;
LVL384:
        .loc 1 767 0
        call    _Perl_get_sv
        .loc 1 768 0
        movl    -84&#40;%ebp&#41;, %edx
        movl    16&#40;%edx&#41;, %edx
LBB270:
        .loc 1 770 0
        movl    $0, 24&#40;%esp&#41;
LBE270:
        .loc 1 767 0
        movl    %eax, -80&#40;%ebp&#41;
LVL385:
LBB269:
        .loc 1 770 0
        movl    $0, 20&#40;%esp&#41;
LBE269:
        .loc 1 768 0
        movl    %edx, -76&#40;%ebp&#41;
LVL386:
LBB268:
        .loc 1 770 0
        movl    $32, 16&#40;%esp&#41;
        movl    $7, 12&#40;%esp&#41;
        movl    $LC47, 8&#40;%esp&#41;
        movl    %edx, 4&#40;%esp&#41;
        movl    %ebx, &#40;%esp&#41;
        call    _Perl_hv_common_key_len
LVL387:
        .loc 1 772 0
        movb    $0, -109&#40;%ebp&#41;
        .loc 1 771 0
        testl   %eax, %eax
        je      L193
        .loc 1 771 0 is_stmt 0 discriminator 1
        movl    &#40;%eax&#41;, %eax
LVL388:
        movl    %ebx, &#40;%esp&#41;
        movl    %eax, 4&#40;%esp&#41;
        call    _Perl_sv_true
        testl   %eax, %eax
        setne   -109&#40;%ebp&#41;
L193:
LVL389:
LBE268:
        .loc 1 774 0 is_stmt 1
        movl    -76&#40;%ebp&#41;, %ecx
        movl    $0, 24&#40;%esp&#41;
        movl    $0, 20&#40;%esp&#41;
        movl    $32, 16&#40;%esp&#41;
        movl    $5, 12&#40;%esp&#41;
        movl    $LC48, 8&#40;%esp&#41;
        movl    %ecx, 4&#40;%esp&#41;
        movl    %ebx, &#40;%esp&#41;
        call    _Perl_hv_common_key_len
LVL390:
        .loc 1 775 0
        movb    $0, -101&#40;%ebp&#41;
        .loc 1 764 0
        movb    $0, -93&#40;%ebp&#41;
        .loc 1 775 0
        testl   %eax, %eax
        je      L194
        .loc 1 775 0 is_stmt 0 discriminator 1
        movl    &#40;%eax&#41;, %eax
LVL391:
        testb   $1, 9&#40;%eax&#41;
        je      L195
        movl    &#40;%eax&#41;, %eax
        movb    $0, -101&#40;%ebp&#41;
        .loc 1 764 0 is_stmt 1 discriminator 1
        movb    $0, -93&#40;%ebp&#41;
        .loc 1 775 0 discriminator 1
        movl    16&#40;%eax&#41;, %edx
        orl     20&#40;%eax&#41;, %edx
        setne   %al
        testb   %al, %al
        jne     L333
LVL392:
L194:
        .loc 1 782 0
        movl    -76&#40;%ebp&#41;, %edx
        .loc 1 786 0
        subl    $1, %esi
LVL393:
        .loc 1 782 0
        movl    $0, 24&#40;%esp&#41;
        movl    $0, 20&#40;%esp&#41;
        movl    $32, 16&#40;%esp&#41;
        movl    %edx, 4&#40;%esp&#41;
        movl    $2, 12&#40;%esp&#41;
        movl    $LC23, 8&#40;%esp&#41;
        movl    %ebx, &#40;%esp&#41;
        call    _Perl_hv_common_key_len
LVL394:
        .loc 1 783 0
        movl    &#40;%eax&#41;, %eax
LVL395:
        movl    16&#40;%eax&#41;, %eax
        .loc 1 784 0
        movl    %ebx, &#40;%esp&#41;
        .loc 1 783 0
        movl    %eax, -64&#40;%ebp&#41;
LVL396:
        .loc 1 784 0
        movl    %eax, 4&#40;%esp&#41;
        call    _Perl_av_len
LVL397:
        movl    %eax, -60&#40;%ebp&#41;
LVL398:
        .loc 1 786 0
        addl    $1, %eax
LVL399:
        cmpl    %eax, %esi
        movl    %eax, -88&#40;%ebp&#41;
        jne     L334
        .loc 1 790 0
        movl    -60&#40;%ebp&#41;, %ecx
        testl   %ecx, %ecx
        js      L198
LBB212:
        .loc 1 798 0
        call    _DebugBreak@0
        .loc 1 799 0
        movl    -88&#40;%ebp&#41;, %eax
        .loc 1 802 0
        leal    8&#40;,%edi,4&#41;, %edi
        .loc 1 799 0
        sall    $4, %eax
        movl    %eax, &#40;%esp&#41;
        call    __alloca
        .loc 1 802 0
        movl    -88&#40;%ebp&#41;, %edx
        .loc 1 799 0
        movl    %eax, -48&#40;%ebp&#41;
LVL400:
        .loc 1 802 0
        leal    0&#40;,%edx,4&#41;, %eax
LVL401:
        movl    %eax, &#40;%esp&#41;
        call    __alloca
        movl    -48&#40;%ebp&#41;, %esi
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130141" href="/Public/Bug/Display.html?id=80217#txn-1130141">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;16:16:19&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130141/594575/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594575">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The culprit from cygwin.asm
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">_______________________________________________________
#ifdef L_chkstk

/* Function prologue calls _alloca to probe the stack when allocating more
   than CHECK_STACK_LIMIT bytes in one go.  Touching the stack at 4K
   increments is necessary to ensure that the guard pages used
   by the OS virtual memory manger are allocated in correct sequence.  */

        .global ___chkstk
        .global __alloca
#ifndef _WIN64
___chkstk:
__alloca:
        pushl   %ecx            /* save temp */
        leal    8&#40;%esp&#41;, %ecx   /* point past return addr */
        cmpl    $0x1000, %eax   /* &gt; 4k ?*/
        jb      Ldone

Lprobe:
        subl    $0x1000, %ecx           /* yes, move pointer down 4k*/
        orl     $0x0, &#40;%ecx&#41;            /* probe there */
        subl    $0x1000, %eax           /* decrement count */
        cmpl    $0x1000, %eax
        ja      Lprobe                  /* and do it again */

Ldone:
        subl    %eax, %ecx         
        orl     $0x0, &#40;%ecx&#41;    /* less than 4k, just peek here */

        movl    %esp, %eax      /* save old stack pointer */
        movl    %ecx, %esp      /* decrement stack */
        movl    &#40;%eax&#41;, %ecx    /* recover saved temp */
        movl    4&#40;%eax&#41;, %eax   /* recover return address */

        /* Push the return value back.  Doing this instead of just
           jumping to %eax preserves the cached call-return stack
           used by most modern processors.  */
        pushl   %eax
        ret
#else
___________CUT______________________
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130149" href="/Public/Bug/Display.html?id=80217#txn-1130149">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;16:27:50&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130149/594582/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594582">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 604b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 17 16:16:19 2012, BULKDD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The culprit from cygwin.asm
</div>
The dirty hack fix is

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">______________________________________________________
/* what is the macro for cygwin platform?*/
#define _alloca&#40;x&#41; &#40;void *&#41;sv_grow&#40;sv_newmortal&#40;&#41;, x&#41;
<div class="message-stanza open">______________________________________________________

The correct fix is talking to whoever maintains cygwin.asm and fixing
the bug in cygwin.asm and waiting for a new cygwin release. I&#39;m not sure
who&#39;s or what bug ticket system &#40;linux GCC, binutils, mingw, cygwin,
etc&#41; is responsible for this file. I am done with this ticket until I
hear more input.
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130156" href="/Public/Bug/Display.html?id=80217#txn-1130156">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;16:47:25&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130156/594588/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594588">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 394b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2012-10-17 16:27:50, BULKDD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The correct fix is talking to whoever maintains cygwin.asm and fixing
&gt; the bug in cygwin.asm and waiting for a new cygwin release.
</div>
Well, not really.  You&#39;ll need to support older Cygwin versions.  &#40;I&#39;m 
still on Cygwin 1.5 at home, for example&#41;.  Therefore, the hack needs to 
be &#34;permanent&#34;, or conditionally compiled based on Cygwin 
version/release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130203" href="/Public/Bug/Display.html?id=80217#txn-1130203">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;19:06:51&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130203/594610/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594610">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 17 16:47:25 2012, JDHEDDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2012-10-17 16:27:50, BULKDD wrote:
<div class="message-stanza open">&gt; &gt; The correct fix is talking to whoever maintains cygwin.asm and fixing
&gt; &gt; the bug in cygwin.asm and waiting for a new cygwin release.
</div>&gt; 
&gt; Well, not really.  You&#39;ll need to support older Cygwin versions.  &#40;I&#39;m 
&gt; still on Cygwin 1.5 at home, for example&#41;.  Therefore, the hack needs to 
&gt; be &#34;permanent&#34;, or conditionally compiled based on Cygwin 
&gt; version/release.
</div>
2 major problems were causing the test failures.

1 was alloca bug, fixed with a 

#ifdef __CYGWIN__
#  define _alloca&#40;size&#41; __builtin_alloca&#40;size&#41;
#endif

2nd was verbose logging mode caused printf args/string litteral pointers
to wind up as args to the C funcs in the test DLL, &#40;#define
WIN32_API_DEBUG&#41;. IsBadReadPtr by the test dll caused some things to be
failures rather than segvs.

Now I have to mop up &#34;J&#34; is not a pointer bugs in the test scripts.

I will update this ticket when I have a working 32 bit with 64 bit IVs
Cygwin Perl Win32::API for you to try.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130207" href="/Public/Bug/Display.html?id=80217#txn-1130207">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;19:12:03&nbsp;2012</span>
    <span class="description">tony [...] develop-help.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> libwin32 [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80217] Build failure under Cygwin on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 18 Oct 2012 10:11:44 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Daniel Dragan via RT &lt;bug-Win32-API [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tony Cook &lt;tony [...] develop-help.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130207/594614/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594614">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 404b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Oct 17, 2012 at 01:55:57PM -0400, Daniel Dragan via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I used a assembly debugger &#40;it
&gt; was faster for me, too much time to modify makefile.pl to include gdb
&gt; symbols&#41;,
</div>
You don&#39;t need to modify Makefile.PL add debugging symbols, simply
start Makefile.PL with:

  perl Makefile.PL OPTIMIZE=-g

or if you want to keep the optimization options:

  perl Makefile.PL OPTIMIZE=-O3\ -g

Tony
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130211" href="/Public/Bug/Display.html?id=80217#txn-1130211">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;17&nbsp;19:12:45&nbsp;2012</span>
    <span class="description">rurban [...] x-ray.at -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> libwin32 [...] perl.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80217] Build failure under Cygwin on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 17 Oct 2012 18:12:34 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Reini Urban &lt;rurban [...] x-ray.at&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130211/594618/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594618">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Oct 17, 2012 at 6:06 PM, Daniel Dragan via RT
&lt;bug-Win32-API@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Wed Oct 17 19:06:51 2012: Request 80217 was acted upon.
&gt; Transaction: Correspondence added by BULKDD
&gt;        Queue: Win32-API
&gt;      Subject: Build failure under Cygwin on Windows
&gt;    Broken in: 0.72
&gt;     Severity: Critical
&gt;        Owner: Nobody
&gt;   Requestors: jdhedden@cpan.org
&gt;       Status: open
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80217">https://rt.cpan.org/Ticket/Display.html?id=80217</a></span> &gt;
&gt;
&gt;
&gt; On Wed Oct 17 16:47:25 2012, JDHEDDEN wrote:
<div class="message-stanza open">&gt;&gt; On 2012-10-17 16:27:50, BULKDD wrote:
<div class="message-stanza open">&gt;&gt; &gt; The correct fix is talking to whoever maintains cygwin.asm and fixing
&gt;&gt; &gt; the bug in cygwin.asm and waiting for a new cygwin release.
</div>&gt;&gt;
&gt;&gt; Well, not really.  You&#39;ll need to support older Cygwin versions.  &#40;I&#39;m
&gt;&gt; still on Cygwin 1.5 at home, for example&#41;.  Therefore, the hack needs to
&gt;&gt; be &#34;permanent&#34;, or conditionally compiled based on Cygwin
&gt;&gt; version/release.
</div>&gt;
&gt; 2 major problems were causing the test failures.
&gt;
&gt; 1 was alloca bug, fixed with a
&gt;
&gt; #ifdef __CYGWIN__
&gt; #  define _alloca&#40;size&#41; __builtin_alloca&#40;size&#41;
&gt; #endif
&gt;
&gt; 2nd was verbose logging mode caused printf args/string litteral pointers
&gt; to wind up as args to the C funcs in the test DLL, &#40;#define
&gt; WIN32_API_DEBUG&#41;. IsBadReadPtr by the test dll caused some things to be
&gt; failures rather than segvs.
&gt;
&gt; Now I have to mop up &#34;J&#34; is not a pointer bugs in the test scripts.
&gt;
&gt; I will update this ticket when I have a working 32 bit with 64 bit IVs
&gt; Cygwin Perl Win32::API for you to try.
</div>
Yes, much better
With the better alloca and DEBUG disabled I got

t/00_API.t        &#40;Wstat: 256 Tests: 48 Failed: 1&#41;
  Failed test:  46
  Non-zero exit status: 1
t/01_Struct.t     &#40;Wstat: 0 Tests: 7 Failed: 0&#41;
  Parse errors: Bad plan.  You planned 18 tests but ran 7.
t/03_undef.t      &#40;Wstat: 256 Tests: 3 Failed: 1&#41;
  Failed test:  2
  Non-zero exit status: 1
t/v69.t           &#40;Wstat: 65280 Tests: 29 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 36 tests but ran 29.
t/v71.t           &#40;Wstat: 65280 Tests: 5 Failed: 0&#41;
  Non-zero exit status: 255
  Parse errors: Bad plan.  You planned 23 tests but ran 5.
Files=13, Tests=159,  9 wallclock secs &#40; 0.03 usr  0.11 sys +  3.70
cusr  5.51 csys =  9.35 CPU&#41;
Result: FAIL
Failed 5/13 test programs. 2/159 subtests failed.
-- 
Reini Urban
<span class="clickylink"><a target="new" rel="nofollow" href="http://cpanel.net/">http://cpanel.net/</a></span>   <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl-compiler.org/">http://www.perl-compiler.org/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130685" href="/Public/Bug/Display.html?id=80217#txn-1130685">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;01:42:21&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> libwin32 [...] perl.org, rurban [...] x-ray.at</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130685/594882/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594882">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 314b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Oct 17 19:06:51 2012, BULKDD wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I will update this ticket when I have a working 32 bit with 64 bit IVs
&gt; Cygwin Perl Win32::API for you to try.
</div>
New version posted at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . It
passed all tests for my 32 bit with Quads Cygwin Perl. Please try it and
report back.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130801" href="/Public/Bug/Display.html?id=80217#txn-1130801">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;07:39:19&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80217] Build failure under Cygwin on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 19 Oct 2012 07:38:37 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jerry D. Hedden&#34; &lt;jdhedden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130801/594958/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594958">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Oct 19, 2012 at 1:42 AM, Daniel Dragan via RT
&lt;bug-Win32-API@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80217">https://rt.cpan.org/Ticket/Display.html?id=80217</a></span> &gt;
&gt;
&gt; New version posted at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . It
&gt; passed all tests for my 32 bit with Quads Cygwin Perl. Please try it and
&gt; report back.
</div>
Lots of failure on Cygwin 1.5 due to:

cygpath: unknown option -- V
Usage: cygpath &#40;-d|-m|-u|-w|-t TYPE&#41; [-f FILE] [OPTION]... NAME...
       cygpath [-c HANDLE]
       cygpath [-ADHPSW]
Convert Unix and Windows format paths, or output system path information

Output type options:
  -d, --dos             print DOS &#40;short&#41; form of NAMEs &#40;C:\PROGRA~1\&#41;
  -m, --mixed           like --windows, but with regular slashes &#40;C:/WINNT&#41;
  -M, --mode            report on mode of file &#40;binmode or textmode&#41;
  -u, --unix            &#40;default&#41; print Unix form of NAMEs &#40;/cygdrive/c/winnt&#41;
  -w, --windows         print Windows form of NAMEs &#40;C:\WINNT&#41;
  -t, --type TYPE       print TYPE form: &#39;dos&#39;, &#39;mixed&#39;, &#39;unix&#39;, or &#39;windows&#39;
Path conversion options:
  -a, --absolute        output absolute path
  -l, --long-name       print Windows long form of NAMEs &#40;with -w, -m only&#41;
  -p, --path            NAME is a PATH list &#40;i.e., &#39;/bin:/usr/bin&#39;&#41;
  -s, --short-name      print DOS &#40;short&#41; form of NAMEs &#40;with -w, -m only&#41;
System information:
  -A, --allusers        use `All Users&#39; instead of current user for -D, -P
  -D, --desktop         output `Desktop&#39; directory and exit
  -H, --homeroot        output `Profiles&#39; directory &#40;home root&#41; and exit
  -P, --smprograms      output Start Menu `Programs&#39; directory and exit
  -S, --sysdir          output system directory and exit
  -W, --windir          output `Windows&#39; directory and exit
Try `cygpath --help&#39; for more information.

I&#39;ll test under Cygwin 1.7 later this morning.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130804" href="/Public/Bug/Display.html?id=80217#txn-1130804">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;08:40:15&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80217] Build failure under Cygwin on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 19 Oct 2012 08:39:32 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jerry D. Hedden&#34; &lt;jdhedden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130804/594962/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594962">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 510b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Oct 19, 2012 at 7:38 AM, Jerry D. Hedden &lt;jdhedden@cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri, Oct 19, 2012 at 1:42 AM, Daniel Dragan via RT
&gt; &lt;bug-Win32-API@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80217">https://rt.cpan.org/Ticket/Display.html?id=80217</a></span> &gt;
&gt;&gt;
&gt;&gt; New version posted at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . It
&gt;&gt; passed all tests for my 32 bit with Quads Cygwin Perl. Please try it and
&gt;&gt; report back.
</div>&gt;
&gt; Lots of failure on Cygwin 1.5 due to:
&gt;
&gt; cygpath: unknown option -- V
</div>
The attached patch is a fix for this.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130804/594963/win32api.patch">Download win32api.patch</a><br />
<span class="downloadcontenttype">text/x-diff 513b</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1130807" href="/Public/Bug/Display.html?id=80217#txn-1130807">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;08:47:40&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80217] Build failure under Cygwin on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 19 Oct 2012 08:47:00 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jerry D. Hedden&#34; &lt;jdhedden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1130807/594966/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/594966">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Oct 19, 2012 at 1:42 AM, Daniel Dragan via RT
&lt;bug-Win32-API@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80217">https://rt.cpan.org/Ticket/Display.html?id=80217</a></span> &gt;
&gt; New version posted at <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> . It
&gt; passed all tests for my 32 bit with Quads Cygwin Perl. Please try it and
&gt; report back.
</div>
With Cygwin 1.7 and Perl 5.16.1, there is the following test failure:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib Callback/t/03_Jim_Shaw.t
</div>1..6
ok 1 - use Win32::API;
ok 2 - use Win32::API::Callback;
ok 3 - use Win32::API::Test;
ok 4 - loaded
get_window_pids: Desktop hwnd: 65556
Invalid type &#39;-&#39; in unpack at
/c/_/Xfer/bulk88-perl5-win32-api-patched/blib/lib/Win32/API/Callback.pm
line 188.
# Looks like you planned 6 tests but ran 4.
# Looks like your test exited with 255 just after 4.

Uncommenting the Data::Dumper command on line 189 of Callback.pm products:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -Mblib Callback/t/03_Jim_Shaw.t
</div>1..6
ok 1 - use Win32::API;
ok 2 - use Win32::API::Callback;
ok 3 - use Win32::API::Test;
ok 4 - loaded
get_window_pids: Desktop hwnd: 65556
$VAR1 = [
          &#39;ÃœÂ¨&#34;&#39;,
          &#39;Ã¨Â¤B~&#39;,
          &#39;V&#39;,
          &#39;&#39;
        ];
$VAR1 = [
          &#39;ÃœÂ¨&#34;&#39;,
          &#39;Ã¨Â¤B~&#39;,
          &#39;X&#39;,
          &#39;&#39;
        ];
$VAR1 = [
          &#39;ÃœÂ¨&#34;&#39;,
          &#39;Ã¨Â¤B~&#39;,
          &#39;â€“&#39;,
          &#39;&#39;
        ];
$VAR1 = [
          &#39;ÃœÂ¨&#34;&#39;,
          &#39;Ã¨Â¤B~&#39;,
          &#39;Â¨&#39;,
          &#39;&#39;
        ];
$VAR1 = [
          &#39;ÃœÂ¨&#34;&#39;,
          &#39;Ã¨Â¤B~&#39;,
          &#39;X%&#39;,
          &#39;&#39;
        ];
$VAR1 = [
          &#39;ÃœÂ¨&#34;&#39;,
          &#39;Ã¨Â¤B~&#39;,
          &#39;5&#39;,
          &#39;&#39;
        ];
$VAR1 = [
          &#39;ÃœÂ¨&#34;&#39;,
          &#39;Ã¨Â¤B~&#39;,
          &#39;8d&#39;,
          &#39;&#39;
        ];
Invalid type &#39;-&#39; in unpack at
/c/_/Xfer/bulk88-perl5-win32-api-patched/blib/lib/Win32/API/Callback.pm
line 188.
# Looks like you planned 6 tests but ran 4.
# Looks like your test exited with 255 just after 4.

I see a &#39;-&#39; in the third $vAR1, but it&#39;s beyond me what the issue is.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1131036" href="/Public/Bug/Display.html?id=80217#txn-1131036">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;17:51:21&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1131047" href="/Public/Bug/Display.html?id=80217#txn-1131047">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;18:02:15&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> libwin32 [...] perl.org, rurban [...] x-ray.at</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1131047/595096/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/595096">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Oct 19 08:47:40 2012, JDHEDDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Uncommenting the Data::Dumper command on line 189 of Callback.pm products:
&gt; 
<div class="message-stanza open">&gt; &gt; perl -Mblib Callback/t/03_Jim_Shaw.t
</div>&gt; 1..6
&gt; ok 1 - use Win32::API;
&gt; ok 2 - use Win32::API::Callback;
&gt; ok 3 - use Win32::API::Test;
&gt; ok 4 - loaded
&gt; get_window_pids: Desktop hwnd: 65556
&gt; $VAR1 = [
&gt;           &#39;ÃœÂ¨&#34;&#39;,
&gt;           &#39;Ã¨Â¤B~&#39;,
&gt;           &#39;V&#39;,
&gt;           &#39;&#39;
&gt;         ];
&gt; $VAR1 = [
&gt;           &#39;ÃœÂ¨&#34;&#39;,
&gt;           &#39;Ã¨Â¤B~&#39;,
&gt;           &#39;X&#39;,
&gt;           &#39;&#39;
&gt;         ];
&gt; $VAR1 = [
&gt;           &#39;ÃœÂ¨&#34;&#39;,
&gt;           &#39;Ã¨Â¤B~&#39;,
&gt;           &#39;â€“&#39;,
&gt;           &#39;&#39;
&gt;         ];
&gt; $VAR1 = [
&gt;           &#39;ÃœÂ¨&#34;&#39;,
&gt;           &#39;Ã¨Â¤B~&#39;,
&gt;           &#39;Â¨&#39;,
&gt;           &#39;&#39;
&gt;         ];
&gt; $VAR1 = [
&gt;           &#39;ÃœÂ¨&#34;&#39;,
&gt;           &#39;Ã¨Â¤B~&#39;,
&gt;           &#39;X%&#39;,
&gt;           &#39;&#39;
&gt;         ];
&gt; $VAR1 = [
&gt;           &#39;ÃœÂ¨&#34;&#39;,
&gt;           &#39;Ã¨Â¤B~&#39;,
&gt;           &#39;5&#39;,
&gt;           &#39;&#39;
&gt;         ];
&gt; $VAR1 = [
&gt;           &#39;ÃœÂ¨&#34;&#39;,
&gt;           &#39;Ã¨Â¤B~&#39;,
&gt;           &#39;8d&#39;,
&gt;           &#39;&#39;
&gt;         ];
&gt; Invalid type &#39;-&#39; in unpack at
&gt; /c/_/Xfer/bulk88-perl5-win32-api-patched/blib/lib/Win32/API/Callback.pm
&gt; line 188.
&gt; # Looks like you planned 6 tests but ran 4.
&gt; # Looks like your test exited with 255 just after 4.
&gt; 
&gt; I see a &#39;-&#39; in the third $vAR1, but it&#39;s beyond me what the issue is.
</div>
The $VAR1s look fine. The first 2 slices are always the same. The 3rd is
a HWND and the only one that should change call to call, and the 4th is
always NULL. Try my latest version at 
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> and report back. I added extra
debugging to code to ::Callback&#39;s 32 bit RunCB. Also
Callback/t/03_Jim_Shaw.t is capable of dumping all the data it
collected, change this line to
<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/source/COSIMO/Win32-API-0.72/Callback/t/03_Jim_Shaw.t#L74">https://metacpan.org/source/COSIMO/Win32-API-0.72/Callback/t/03_Jim_Shaw.t#L74</a></span>
&#34;my $print = 1;&#34; but its output may produce a log with confidential
information that you might not want to be public.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1131057" href="/Public/Bug/Display.html?id=80217#txn-1131057">#</a>      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;19&nbsp;18:40:50&nbsp;2012</span>
    <span class="description">jdhedden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #80217] Build failure under Cygwin on Windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 19 Oct 2012 18:40:03 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Win32-API [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jerry D. Hedden&#34; &lt;jdhedden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1131057/595104/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/595104">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 285b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">All tests passed on Cygwin 1.5 with Perl 5.16.1.

On Fri, Oct 19, 2012 at 6:02 PM, Daniel Dragan via RT
&lt;bug-Win32-API@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80217">https://rt.cpan.org/Ticket/Display.html?id=80217</a></span> &gt;
&gt;Try my latest version at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/bulk88/perl5-win32-api">https://github.com/bulk88/perl5-win32-api</a></span> and report back.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1131379" href="/Public/Bug/Display.html?id=80217#txn-1131379">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;20&nbsp;20:18:20&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> libwin32 [...] perl.org, rurban [...] x-ray.at</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1131379/595320/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/595320">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 162b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Oct 19 18:40:50 2012, JDHEDDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; All tests passed on Cygwin 1.5 with Perl 5.16.1.
&gt; 
</div>
The Cygwin fixes are now available in Win32::API 0.73 on CPAN.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1131384" href="/Public/Bug/Display.html?id=80217#txn-1131384">#</a>      
    </span>
    <span class="date">Sat&nbsp;Oct&nbsp;20&nbsp;20:18:21&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1151697" href="/Public/Bug/Display.html?id=80217#txn-1151697">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;06&nbsp;13:17:59&nbsp;2012</span>
    <span class="description">BULKDD [...] cpan.org -  Reference by ticket #81748 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.016015</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
