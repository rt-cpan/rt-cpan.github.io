<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #128158 for TimeDate: After 2018-DEC-31T23:59:59, Date::Parse::str2time returns wrong value for dates before 1970-01-01T00:00:00</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #128158 for TimeDate: After 2018-DEC-31T23:59:59, Date::Parse::str2time returns wrong value for dates before 1970-01-01T00:00:00</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=TimeDate">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=TimeDate">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=TimeDate">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=TimeDate">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/TimeDate">TimeDate CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">128158</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=TimeDate">TimeDate</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jeffrey.l.holt [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33566-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33567-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=128158">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827379" href="/Public/Bug/Display.html?id=128158#txn-1827379">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;02&nbsp;17:10:59&nbsp;2019</span>
    <span class="description">jeffrey.l.holt [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> After 2018-DEC-31T23:59:59, Date::Parse::str2time returns wrong value for dates before 1970-01-01T00:00:00</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 1 Jan 2019 00:01:29 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TimeDate [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Holt &lt;jeffrey.l.holt [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827379/982949/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/982949">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The str2time function returns the wrong value as soon as the system clock
reaches 01-JAN-2019T00:00:00.000000. But it apparently only does so for
time values that precede 01-JAN-1970T00:00:00.000000.

I&#39;ve tested version 2.30 of TimeDate with ActivePerl 5.20.2.2001,
5.26.3.2603, and 5.28.1 &#40;built from source&#41; on macos. I&#39;ve also tested
5.26.3.2603 on mswin64 and linux64 with TimeDate 2.30 and gotten the same
incorrect results.

To execute the test, you install perl and TimeDate. Then you execute the
following t.sh, which does 3 things:

1. prints perl path and perl version
2. changes system date to 31-DEC-2018T23:59:59
3. executes a loop printing date and running the t.pl perl script.

Note that I expect t.pl to exit with 1 as I stated above. If you cannot
reproduce the failure, then you&#39;ll have to interrupt the execution once it
becomes clear you won&#39;t reproduce the results.

Here&#39;s t.sh:

which perl
perl -v
sudo date 123123592018.58
while [ 1 ]; do
    date
    perl t.pl &gt; t.out 2&gt;&#38;1
    if [ $? -ne 0 ]; then
        cat t.out
        rm t.out
        break
    fi
done


Here&#39;s t.pl:

use Date::Parse qw&#40;str2time&#41;;
my %tests = &#40;
    &#34;1969-08-16T14:00:00.000000&#34; =&gt; &#34;-11854800&#34;,
    &#34;1969-08-18T03:00:00.000000&#34; =&gt; &#34;-11721600&#34;,
    &#34;1969-12-31T23:59:59.999999&#34; =&gt; &#34;21599.999999&#34;,
    &#34;1970-01-01T00:00:00.000000&#34; =&gt; &#34;21600&#34;,
&#41;;
my $fail = 0;
while &#40;my &#40;$s, $expect&#41; = each %tests&#41; {
    my $got = str2time&#40;$s&#41;;
    my $result = $expect eq $got ? &#34;OK&#34; : &#34;FAIL&#34;;
    print &#34;$result s=&#39;$s&#39; expect=&#39;$expect&#39; got=&#39;$got&#39;\n&#34;;
    $fail = 1 if $result ne &#34;OK&#34;;
}
exit &#40;$fail ? 1 : 0&#41;;

When I execute t.sh, I get the following consistently on my MacBook Pro
running Mojave &#40;10.14.2&#41;. Notice that sudo will complain about the local
time being in the future, this should havd no effect on the test outcome:

$ sh t.sh
/usr/local/bin/perl

This is perl 5, version 28, subversion 1 &#40;v5.28.1&#41; built for darwin-2level

Copyright 1987-2018, Larry Wall

Perl may be copied only under the terms of either the Artistic License or
the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.

Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
Mon Dec 31 23:59:59 CST 2018
OK s=&#39;1970-01-01T00:00:00.000000&#39; expect=&#39;21600&#39; got=&#39;21600&#39;
FAIL s=&#39;1969-12-31T23:59:59.999999&#39; expect=&#39;21599.999999&#39; got=&#39;3155781600&#39;
FAIL s=&#39;1969-08-16T14:00:00.000000&#39; expect=&#39;-11854800&#39; got=&#39;3143905200&#39;
FAIL s=&#39;1969-08-18T03:00:00.000000&#39; expect=&#39;-11721600&#39; got=&#39;3144038400&#39;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827379/982950/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/982950">with headers</a>
<br />
<span class="downloadcontenttype">text/html 10.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827427" href="/Public/Bug/Display.html?id=128158#txn-1827427">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;10:13:24&nbsp;2019</span>
    <span class="description">jeffrey.l.holt [...] gmail.com - Ticket #128161:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: After 2018-DEC-31T23:59:59, Date::Parse::str2time returns wrong value for dates before 1970-01-01T00:00:00</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 1 Jan 2019 00:02:42 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TimeDate [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeff Holt &lt;jeffrey.l.holt [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827427/982976/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/982976">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve narrowed the problem to Time::Local::timelocal, which your pod clearly
identifies.

Please close this case. I&#39;m opening a new one for Time::Local::timelocal.
BTW, all of its tests pass too.

On Tue, Jan 1, 2019 at 12:01 AM Jeff Holt &lt;jeffrey.l.holt@gmail.com&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The str2time function returns the wrong value as soon as the system clock
&gt; reaches 01-JAN-2019T00:00:00.000000. But it apparently only does so for
&gt; time values that precede 01-JAN-1970T00:00:00.000000.
&gt;
&gt; I&#39;ve tested version 2.30 of TimeDate with ActivePerl 5.20.2.2001,
&gt; 5.26.3.2603, and 5.28.1 &#40;built from source&#41; on macos. I&#39;ve also tested
&gt; 5.26.3.2603 on mswin64 and linux64 with TimeDate 2.30 and gotten the same
&gt; incorrect results.
&gt;
&gt; To execute the test, you install perl and TimeDate. Then you execute the
&gt; following t.sh, which does 3 things:
&gt;
&gt; 1. prints perl path and perl version
&gt; 2. changes system date to 31-DEC-2018T23:59:59
&gt; 3. executes a loop printing date and running the t.pl perl script.
&gt;
&gt; Note that I expect t.pl to exit with 1 as I stated above. If you cannot
&gt; reproduce the failure, then you&#39;ll have to interrupt the execution once it
&gt; becomes clear you won&#39;t reproduce the results.
&gt;
&gt; Here&#39;s t.sh:
&gt;
&gt; which perl
&gt; perl -v
&gt; sudo date 123123592018.58
&gt; while [ 1 ]; do
&gt;     date
&gt;     perl t.pl &gt; t.out 2&gt;&#38;1
&gt;     if [ $? -ne 0 ]; then
&gt;         cat t.out
&gt;         rm t.out
&gt;         break
&gt;     fi
&gt; done
&gt;
&gt;
&gt; Here&#39;s t.pl:
&gt;
&gt; use Date::Parse qw&#40;str2time&#41;;
&gt; my %tests = &#40;
&gt;     &#34;1969-08-16T14:00:00.000000&#34; =&gt; &#34;-11854800&#34;,
&gt;     &#34;1969-08-18T03:00:00.000000&#34; =&gt; &#34;-11721600&#34;,
&gt;     &#34;1969-12-31T23:59:59.999999&#34; =&gt; &#34;21599.999999&#34;,
&gt;     &#34;1970-01-01T00:00:00.000000&#34; =&gt; &#34;21600&#34;,
&gt; &#41;;
&gt; my $fail = 0;
&gt; while &#40;my &#40;$s, $expect&#41; = each %tests&#41; {
&gt;     my $got = str2time&#40;$s&#41;;
&gt;     my $result = $expect eq $got ? &#34;OK&#34; : &#34;FAIL&#34;;
&gt;     print &#34;$result s=&#39;$s&#39; expect=&#39;$expect&#39; got=&#39;$got&#39;\n&#34;;
&gt;     $fail = 1 if $result ne &#34;OK&#34;;
&gt; }
&gt; exit &#40;$fail ? 1 : 0&#41;;
&gt;
&gt; When I execute t.sh, I get the following consistently on my MacBook Pro
&gt; running Mojave &#40;10.14.2&#41;. Notice that sudo will complain about the local
&gt; time being in the future, this should havd no effect on the test outcome:
&gt;
&gt; $ sh t.sh
&gt; /usr/local/bin/perl
&gt;
&gt; This is perl 5, version 28, subversion 1 &#40;v5.28.1&#41; built for darwin-2level
&gt;
&gt; Copyright 1987-2018, Larry Wall
&gt;
&gt; Perl may be copied only under the terms of either the Artistic License or
&gt; the
&gt; GNU General Public License, which may be found in the Perl 5 source kit.
&gt;
&gt; Complete documentation for Perl, including FAQ lists, should be found on
&gt; this system using &#34;man perl&#34; or &#34;perldoc perl&#34;.  If you have access to the
&gt; Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.org/">http://www.perl.org/</a></span>, the Perl Home Page.
&gt;
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; Mon Dec 31 23:59:59 CST 2018
&gt; OK s=&#39;1970-01-01T00:00:00.000000&#39; expect=&#39;21600&#39; got=&#39;21600&#39;
&gt; FAIL s=&#39;1969-12-31T23:59:59.999999&#39; expect=&#39;21599.999999&#39; got=&#39;3155781600&#39;
&gt; FAIL s=&#39;1969-08-16T14:00:00.000000&#39; expect=&#39;-11854800&#39; got=&#39;3143905200&#39;
&gt; FAIL s=&#39;1969-08-18T03:00:00.000000&#39; expect=&#39;-11721600&#39; got=&#39;3144038400&#39;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827427/982977/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/982977">with headers</a>
<br />
<span class="downloadcontenttype">text/html 11k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827487" href="/Public/Bug/Display.html?id=128158#txn-1827487">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;12:45:31&nbsp;2019</span>
    <span class="description">ether [...] cpan.org - Ticket #128161:  Merged into ticket #128158</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827488" href="/Public/Bug/Display.html?id=128158#txn-1827488">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;12:45:31&nbsp;2019</span>
    <span class="description">ether [...] cpan.org -  Merged into ticket #128158</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827489" href="/Public/Bug/Display.html?id=128158#txn-1827489">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;12:47:14&nbsp;2019</span>
    <span class="description">ether [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827489/983018/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983018">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 109b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please could you link to the other issue&#40;s&#41; you have opened so that others may track the progress of the fix?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827490" href="/Public/Bug/Display.html?id=128158#txn-1827490">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;12:47:15&nbsp;2019</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827494" href="/Public/Bug/Display.html?id=128158#txn-1827494">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;13:03:37&nbsp;2019</span>
    <span class="description">jeff.holt [...] method-r.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827494/983021/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983021">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 529b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here&#39;s the link to the case I logged with Time::Local.

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/houseabsolute/Time-Local/issues/8">https://github.com/houseabsolute/Time-Local/issues/8</a></span>

It turns out that Time::Local has a pod comment implying you &#40;i.e. the Date::Parse maintainer&#41; should never use Time::Local::timelocal.

Instead you should be using timelocal_modern.

Therefore, it&#39;s not a bug in Time::Local, it&#39;s a &#34;bug&#34; in Date::Parse inasmuch as it hasn&#39;t been maintained sufficiently to prevent these types of problems.

I modified the source code to use timelocal_modern but the tests didn&#39;t pass.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827522" href="/Public/Bug/Display.html?id=128158#txn-1827522">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;15:14:45&nbsp;2019</span>
    <span class="description">blake [...] vindicia.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #128158]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 3 Jan 2019 20:13:24 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-TimeDate [...] rt.cpan.org&#34; &lt;bug-TimeDate [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Blake Thomas &lt;blake [...] vindicia.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827522/983030/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983030">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 523b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I donâ€™t think itâ€™s a problem with Time::Local â€“ the real issue is that strptime will subtract 1900 from the yhear number even if you pass in a date with a 4-digit year. Switching to timelocal_modern would completely break str2time for any date after 1900.
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at <span class="clickylink"><a target="new" rel="nofollow" href="https://www.amdocs.com/about/email-terms-of-service">https://www.amdocs.com/about/email-terms-of-service</a></span> &lt;<span class="clickylink"><a target="new" rel="nofollow" href="https://www.amdocs.com/about/email-terms-of-service">https://www.amdocs.com/about/email-terms-of-service</a></span>&gt;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827522/983031/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983031">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.3k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827532" href="/Public/Bug/Display.html?id=128158#txn-1827532">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;15:19:54&nbsp;2019</span>
    <span class="description">beebop [...] baz.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #128158]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 3 Jan 2019 12:19:27 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TimeDate [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Blake Thomas &lt;beebop [...] baz.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827532/983035/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983035">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 64b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Whoops, probably shouldn&#39;t have sent that from my work email :p
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827532/983036/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983036">with headers</a>
<br />
<span class="downloadcontenttype">text/html 89b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1827544" href="/Public/Bug/Display.html?id=128158#txn-1827544">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;03&nbsp;17:40:24&nbsp;2019</span>
    <span class="description">beebop [...] baz.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> [rt.cpan.org #128158]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 3 Jan 2019 14:39:59 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-TimeDate [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Blake Thomas &lt;beebop [...] baz.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827544/983049/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983049">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 227b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Actually upon closer inspection I think there are problems in both
Date::Parse and Time::Local - Date::Parse gives timelocal a 2-digit year
sometimes when it shouldn&#39;t be and then timelocal is doing the wrong thing
with it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1827544/983050/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/983050">with headers</a>
<br />
<span class="downloadcontenttype">text/html 426b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879627" href="/Public/Bug/Display.html?id=128158#txn-1879627">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;15&nbsp;16:28:16&nbsp;2020</span>
    <span class="description">me [...] eboxr.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879627/1008656/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008656">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 79b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ticket migrated to github as <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/atoomic/perl-TimeDate/issues/37">https://github.com/atoomic/perl-TimeDate/issues/37</a></span>
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.523695</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
