<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #71339 for DBD-Sybase: Report of new bug with UNIVARCHAR long string &#40;over than 128 caracters&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #71339 for DBD-Sybase: Report of new bug with UNIVARCHAR long string &#40;over than 128 caracters&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBD-Sybase/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBD-Sybase/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBD-Sybase/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBD-Sybase/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-Sybase">DBD-Sybase CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">71339</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBD-Sybase/Active/">DBD-Sybase</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">mpeppler [...] peppler.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
jjoly.ext [...] orange.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10262-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10263-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;29&nbsp;12:47:15&nbsp;2011</span>
    <span class="description">jjoly.ext [...] orange.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;rt-cpan-admin [...] bestpractical.com&#34; &lt;rt-cpan-admin [...] bestpractical.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Report of new bug with UNIVARCHAR long string &#40;over than 128 caracters&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 29 Sep 2011 18:46:58 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-DBD-Sybase [...] rt.cpan.org&#34; &lt;bug-DBD-Sybase [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;jjoly.ext [...] orange.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

    I am currently a developper in Orange France, and I found a bug in the DBD::Sybase.
    The module was describe as the sample of Sybase, but I also had an issue using their samples with a very big string &#40;more than 25 caracters UNIVARCHAR&#41;.
    I solve this issue by changing the reservation of buffer used to fetch the data comming from the database. It was previously the same a specified in the datafmt: eg UNIVARCHAR&#40;255&#41; =&gt; size = 255.
    Or UNIVARCHAR is UTF-16. and the maximum string could now goes to 510 octet&#39;s long.
    I have modify the sample of Sybase, and validate it with them. They include these new modification in the Sybase 15.7 delivered yesterday.
    I have applied the same modification on the module DBD::Sybase. Please read the joind tarball. It&#39;s included the &#34;utf8.t&#34;, &#34;dbdimp.c&#34; and &#34;Sybase.h&#34;. All importants modifications are in &#34;dbdimp.c&#34; in red:

82a83,92
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #if defined&#40;CS_VERSION_155&#41;
&gt; #if !defined BLK_VERSION_155
&gt; #define BLK_VERSION_155       BLK_VERSION_150
&gt; #endif
&gt; #endif
&gt; #if defined&#40;CS_VERSION_157&#41;
&gt; #if !defined BLK_VERSION_157
&gt; #define BLK_VERSION_157       BLK_VERSION_155
&gt; #endif
&gt; #endif
</div>625c635
&lt;               len = column-&gt;maxlength;
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         len = column-&gt;maxlength;
</div>630a641,644
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #if defined&#40;CS_UNICHAR_TYPE&#41;
&gt;       case CS_UNICHAR_TYPE:
&gt;       case CS_UNITEXT_TYPE:
&gt; #endif
</div>3698a3713,3716
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;                               /* For these types send data &#34;as is&#34; */
&gt;                               ptr = imp_sth-&gt;coldata[i].ptr;
&gt;                               imp_sth-&gt;coldata[i].valuelen = slen;
&gt;                               break;
</div>3701d3718
&lt; #endif
3704c3721
&lt;                               imp_sth-&gt;coldata[i].valuelen = slen;
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;                               imp_sth-&gt;coldata[i].valuelen = slen * 2;
</div>3705a3723
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #endif
</div>    If you have some questions, I will be pleased to answer

Regards

[cid:453350916@29092011-14EF]
Julien JOLY Pour ORANGE
FT/OLNC/DPS/MSE/IDE/SSO







Téléphone: +33 &#40;0&#41;1 57 36 10 71
Adresse: 21, rue Jasmin
                  75016 Paris
Email:  jjoly.ext@orange.com &lt;mailto:jjoly.ext@orange.com&gt;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________
P Cette obscure clarté qui tombe des étoiles,
Enfin, avec le flux nous fit voir trente voiles,
L&#39;onde s&#39;enfle dessous et, d&#39;un commun effort,
Les Mores et la mer montent jusques au port.

Corneille Le Cid &#40;1636&#41;
<div class="message-stanza open">________________________________


********************************************************************************
IMPORTANT.Les informations contenues dans ce message electronique y compris les fichiers attaches sont strictement confidentielles
et peuvent etre protegees par la loi.
Ce message electronique est destine exclusivement au&#40;x&#41; destinataire&#40;s&#41; mentionne&#40;s&#41; ci-dessus.
Si vous avez recu ce message par erreur ou s il ne vous est pas destine, veuillez immediatement le signaler  a l expediteur et effacer ce message 
et tous les fichiers eventuellement attaches.
Toute lecture, exploitation ou transmission des informations contenues dans ce message est interdite.
Tout message electronique est susceptible d alteration.
A ce titre, le Groupe France Telecom decline toute responsabilite notamment s il a ete altere, deforme ou falsifie.
De meme, il appartient au destinataire de s assurer de l absence de tout virus.

IMPORTANT.This e-mail message and any attachments are strictly confidential and may be protected by law. This message is
intended only for the named recipient&#40;s&#41; above.
If you have received this message in error, or are not the named recipient&#40;s&#41;, please immediately notify the sender and delete this e-mail message.
Any unauthorized view, usage or disclosure ofthis message is prohibited.
Since e-mail messages may not be reliable, France Telecom Group shall not be liable for any message if modified, changed or falsified.
Additionally the recipient should ensure they are actually virus free.
********************************************************************************
</div></div></div></div>

<div class="messagebody">
</div>
</div>

<div class="messagebody">
<img alt="logo_altran_tem.jpg" title="logo_altran_tem.jpg" src="/Ticket/Attachment/983005/511857/" /></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;02&nbsp;11:07:26&nbsp;2011</span>
    <span class="description">mpeppler [...] peppler.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;02&nbsp;11:07:59&nbsp;2011</span>
    <span class="description">mpeppler [...] peppler.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Should be fixed in 1.14, uploaded to CPAN a few minutes ago.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;02&nbsp;11:07:59&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Oct&nbsp;02&nbsp;11:07:59&nbsp;2011</span>
    <span class="description">mpeppler [...] peppler.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;06:06:04&nbsp;2011</span>
    <span class="description">jjoly.ext [...] orange.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #71339] Resolved: Report of new bug with UNIVARCHAR long string &#40;over than 128 caracters&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 3 Oct 2011 12:05:46 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-DBD-Sybase [...] rt.cpan.org&#34; &lt;bug-DBD-Sybase [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;jjoly.ext [...] orange.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hello,

    I am sorry, but i have test the modification and it does not work. The librarie Sybase generate and error 132 again.
  I have seen that the modification regarding the CS_UNICHAR_TYPE were partially comment &#40;eg line 641 to 644&#41;. Bug it is the most important lines. I their are commented, the error appears.I have made a test with your code, it does not work. I made it again, with the line 641 to 644 uncomment, and it is work.

Regards




 Julien JOLY Pour ORANGE
FT/OLNC/DPS/MSE/IDE/SSO






Téléphone: +33 &#40;0&#41;1 57 36 10 71
Adresse: 21, rue Jasmin
                  75016 Paris
Email:  jjoly.ext@orange.com
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________

P Cette obscure clarté qui tombe des étoiles,
Enfin, avec le flux nous fit voir trente voiles,
L&#39;onde s&#39;enfle dessous et, d&#39;un commun effort,
Les Mores et la mer montent jusques au port.

Corneille Le Cid &#40;1636&#41;

-----Message d&#39;origine-----
De : Michael Peppler via RT [mailto:bug-DBD-Sybase@rt.cpan.org]
Envoyé : dimanche 2 octobre 2011 17:08
À : JOLY Julien Ext OLNC/DPS
Objet : [rt.cpan.org #71339] Resolved: Report of new bug with UNIVARCHAR long string &#40;over than 128 caracters&#41;

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71339">https://rt.cpan.org/Ticket/Display.html?id=71339</a></span> &gt;

According to our records, your request has been resolved. If you have any further questions or concerns, please respond to this message.

********************************************************************************
IMPORTANT.Les informations contenues dans ce message electronique y compris les fichiers attaches sont strictement confidentielles
et peuvent etre protegees par la loi.
Ce message electronique est destine exclusivement au&#40;x&#41; destinataire&#40;s&#41; mentionne&#40;s&#41; ci-dessus.
Si vous avez recu ce message par erreur ou s il ne vous est pas destine, veuillez immediatement le signaler  a l expediteur et effacer ce message 
et tous les fichiers eventuellement attaches.
Toute lecture, exploitation ou transmission des informations contenues dans ce message est interdite.
Tout message electronique est susceptible d alteration.
A ce titre, le Groupe France Telecom decline toute responsabilite notamment s il a ete altere, deforme ou falsifie.
De meme, il appartient au destinataire de s assurer de l absence de tout virus.

IMPORTANT.This e-mail message and any attachments are strictly confidential and may be protected by law. This message is
intended only for the named recipient&#40;s&#41; above.
If you have received this message in error, or are not the named recipient&#40;s&#41;, please immediately notify the sender and delete this e-mail message.
Any unauthorized view, usage or disclosure ofthis message is prohibited.
Since e-mail messages may not be reliable, France Telecom Group shall not be liable for any message if modified, changed or falsified.
Additionally the recipient should ensure they are actually virus free.
********************************************************************************
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;06:06:05&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;03&nbsp;13:33:51&nbsp;2011</span>
    <span class="description">mpeppler [...] peppler.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Oct 03 06:06:04 2011, jjoly.ext@orange.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; Hello,
&gt; 
&gt;     I am sorry, but i have test the modification and it does not work.
&gt;    The librarie Sybase generate and error 132 again.
&gt;   I have seen that the modification regarding the CS_UNICHAR_TYPE were
&gt;    partially comment &#40;eg line 641 to 644&#41;. Bug it is the most
&gt;    important lines. I their are commented, the error appears.I have
&gt;    made a test with your code, it does not work. I made it again, with
&gt;    the line 641 to 644 uncomment, and it is work.
</div>
Which platform &#40;OS&#41; are you on, which versions of OpenClient, and which
version of ASE please?

I tested my version with OpenClient 15.7 and 15.5, against 15.5 and 15.7
servers, and at least the utf8.t test script worked fine.

If possible could you send me the actual error message you get, as well
as version info, etc?

Thanks.

Michael

PS - you can send this directly to me, and in French if you prefer
&#40;j&#39;habite en Suisse...&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;04&nbsp;03:11:25&nbsp;2011</span>
    <span class="description">jjoly.ext [...] orange.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #71339] Report of new bug with UNIVARCHAR long string &#40;over than 128 caracters&#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 4 Oct 2011 09:11:11 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-DBD-Sybase [...] rt.cpan.org&#34; &lt;bug-DBD-Sybase [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &lt;jjoly.ext [...] orange.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry

    I made a test through OCS 12.5.4, 15.5.1 and 15.7.0 with ASE 12.5.1.
    The instance of the server is with charset &#34;utf8&#34;. But i used UNIVARCHAR type.
    My error message is this one:
DBD::Sybase::st fetchrow_array failed: OpenClient message: LAYER = &#40;1&#41; ORIGIN = &#40;4&#41; SEVERITY = &#40;1&#41; NUMBER = &#40;132&#41;
Server ss2_nopfa236, database
Message String: ct_fetch&#40;&#41;: user api layer: internal common library error: The bind of result set item 17 resulted in truncation.

    I saw that you comment my test in &#34;utf8.t&#34;. That explain my remark. I the sentence in the UNIVARCHAR field is shorter rathen than the size of the field, this issue does not appear. You have to specified a very long sentence. I used a Hindy string &#40;recopy of 3 hindy caracters&#41; to form a 255 UNIVARCHAR sentence &#40;to fullfill the field&#41;. I fetch it through PERL and the issue appear.

    As I saw now, i have write an issue in the test:

$dbh-&gt;do&#40;&#34;create table #utf8test &#40;uv univarchar&#40;255&#41;, ut unitext&#41;&#34;&#41;;

my $ascii = &#39;Some text&#39;;
my $utf8 = &#34;à¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿà¥à¤Ÿà¤ªà¤Ÿ&#34;;

    Sorry about that last point

    Regards







 Julien JOLY Pour ORANGE
FT/OLNC/DPS/MSE/IDE/SSO






Téléphone: +33 &#40;0&#41;1 57 36 10 71
Adresse: 21, rue Jasmin
                  75016 Paris
Email:  jjoly.ext@orange.com
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">________________________________

P Cette obscure clarté qui tombe des étoiles,
Enfin, avec le flux nous fit voir trente voiles,
L&#39;onde s&#39;enfle dessous et, d&#39;un commun effort,
Les Mores et la mer montent jusques au port.

Corneille Le Cid &#40;1636&#41;

-----Message d&#39;origine-----
De : Michael Peppler via RT [mailto:bug-DBD-Sybase@rt.cpan.org]
Envoyé : lundi 3 octobre 2011 19:34
À : JOLY Julien Ext OLNC/DPS
Objet : [rt.cpan.org #71339] Report of new bug with UNIVARCHAR long string &#40;over than 128 caracters&#41;

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=71339">https://rt.cpan.org/Ticket/Display.html?id=71339</a></span> &gt;

On Mon Oct 03 06:06:04 2011, jjoly.ext@orange.com wrote:
<div class="message-stanza open">&gt;
&gt; Hello,
&gt;
&gt;     I am sorry, but i have test the modification and it does not work.
&gt;    The librarie Sybase generate and error 132 again.
&gt;   I have seen that the modification regarding the CS_UNICHAR_TYPE were
&gt;    partially comment &#40;eg line 641 to 644&#41;. Bug it is the most
&gt;    important lines. I their are commented, the error appears.I have
&gt;    made a test with your code, it does not work. I made it again, with
&gt;    the line 641 to 644 uncomment, and it is work.
</div>
Which platform &#40;OS&#41; are you on, which versions of OpenClient, and which version of ASE please?

I tested my version with OpenClient 15.7 and 15.5, against 15.5 and 15.7 servers, and at least the utf8.t test script worked fine.

If possible could you send me the actual error message you get, as well as version info, etc?

Thanks.

Michael

PS - you can send this directly to me, and in French if you prefer &#40;j&#39;habite en Suisse...&#41;


********************************************************************************
IMPORTANT.Les informations contenues dans ce message electronique y compris les fichiers attaches sont strictement confidentielles
et peuvent etre protegees par la loi.
Ce message electronique est destine exclusivement au&#40;x&#41; destinataire&#40;s&#41; mentionne&#40;s&#41; ci-dessus.
Si vous avez recu ce message par erreur ou s il ne vous est pas destine, veuillez immediatement le signaler  a l expediteur et effacer ce message 
et tous les fichiers eventuellement attaches.
Toute lecture, exploitation ou transmission des informations contenues dans ce message est interdite.
Tout message electronique est susceptible d alteration.
A ce titre, le Groupe France Telecom decline toute responsabilite notamment s il a ete altere, deforme ou falsifie.
De meme, il appartient au destinataire de s assurer de l absence de tout virus.

IMPORTANT.This e-mail message and any attachments are strictly confidential and may be protected by law. This message is
intended only for the named recipient&#40;s&#41; above.
If you have received this message in error, or are not the named recipient&#40;s&#41;, please immediately notify the sender and delete this e-mail message.
Any unauthorized view, usage or disclosure ofthis message is prohibited.
Since e-mail messages may not be reliable, France Telecom Group shall not be liable for any message if modified, changed or falsified.
Additionally the recipient should ensure they are actually virus free.
********************************************************************************
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
