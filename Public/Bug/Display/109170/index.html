<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #109170 for CPANPLUS-Dist-Fedora: make edit-metafile work for rpms</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #109170 for CPANPLUS-Dist-Fedora: make edit-metafile work for rpms</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/CPANPLUS-Dist-Fedora/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/CPANPLUS-Dist-Fedora/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/CPANPLUS-Dist-Fedora/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/CPANPLUS-Dist-Fedora/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/CPANPLUS-Dist-Fedora">CPANPLUS-Dist-Fedora CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">109170</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/CPANPLUS-Dist-Fedora/Active/">CPANPLUS-Dist-Fedora</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
joseph.konczal.ctr [...] usno.navy.mil

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-223510-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-223511-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;19&nbsp;17:41:41&nbsp;2015</span>
    <span class="description">joseph.konczal.ctr [...] usno.navy.mil -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> make edit-metafile work for rpms</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 Nov 2015 22:48:35 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&#34; &lt;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Konczal, Joseph&#34; &lt;joseph.konczal.ctr [...] usno.navy.mil&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I needed to edit the spec file of a Perl package I was creating with
cpan2build, in order to add some &#39;obsoletes&#39; so it could properly replace
some RPMs of a few different version 0 packages that had been combined into
one version 1 package. Unfortunately, &#39;--edit-metafiles&#39; had not yet been
implemented for CPANPLUS::Dist::Fedora, so I implemented it via the attached
patch.

Joseph Konczal
Senior Programmer
General Dynamics Information Technology
&#40;202&#41; 762-1428  Direct
&#40;240&#41; 449-9295  Cell
joseph.konczal@gdit.com
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Nov&nbsp;19&nbsp;17:51:47&nbsp;2015</span>
    <span class="description">joseph.konczal.ctr [...] usno.navy.mil -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #109170]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 19 Nov 2015 22:58:43 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&#34; &lt;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Konczal, Joseph&#34; &lt;joseph.konczal.ctr [...] usno.navy.mil&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The program I used was cpan2dist, not cpan2build.
</div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;20&nbsp;02:54:32&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Nov 19 17:41:41 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I needed to edit the spec file of a Perl package I was creating with
&gt; cpan2build, in order to add some &#39;obsoletes&#39; so it could properly replace
&gt; some RPMs of a few different version 0 packages that had been combined into
&gt; one version 1 package. Unfortunately, &#39;--edit-metafiles&#39; had not yet been
&gt; implemented for CPANPLUS::Dist::Fedora, so I implemented it via the attached
&gt; patch.
&gt; 
&gt; Joseph Konczal
&gt; Senior Programmer
&gt; General Dynamics Information Technology
&gt; &#40;202&#41; 762-1428  Direct
&gt; &#40;240&#41; 449-9295  Cell
&gt; joseph.konczal@gdit.com
&gt; 
</div>
Thanks, Joseph! I&#39;ll take a look at the patch soon.

Regards,

-- Shlomi Fish
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;20&nbsp;02:54:32&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;20&nbsp;03:29:33&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Joseph,

some comments about your code:

1. You&#39;re using File::Slurp which is no longer recommended. See <span class="clickylink"><a target="new" rel="nofollow" href="http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html">http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html</a></span> . You also didn&#39;t specify the imports explicitly. That put aside, I would prefer if you didn&#39;t add another dependency here , and instead write the _read_file/_write_file &#40;with a leading underscore&#41; functions explicitly.

2. You should specify the encoding of the files.

3. You mutate $contents by doing “$contents = FOO &#40;$contents&#41;;” which I dislike. Please assign to a new variable.

------------

Would you like to fix these issues yourself, or do you want me to do that for you? I&#39;m going to await for your reply.

Regards,

-- Shlomi Fish
  
On Thu Nov 19 17:41:41 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I needed to edit the spec file of a Perl package I was creating with
&gt; cpan2build, in order to add some &#39;obsoletes&#39; so it could properly replace
&gt; some RPMs of a few different version 0 packages that had been combined into
&gt; one version 1 package. Unfortunately, &#39;--edit-metafiles&#39; had not yet been
&gt; implemented for CPANPLUS::Dist::Fedora, so I implemented it via the attached
&gt; patch.
&gt; 
&gt; Joseph Konczal
&gt; Senior Programmer
&gt; General Dynamics Information Technology
&gt; &#40;202&#41; 762-1428  Direct
&gt; &#40;240&#41; 449-9295  Cell
&gt; joseph.konczal@gdit.com
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;20&nbsp;12:29:05&nbsp;2015</span>
    <span class="description">joseph.konczal.ctr [...] usno.navy.mil -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [Non-DoD Source] [rt.cpan.org #109170] make edit-metafile work for rpms</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 20 Nov 2015 17:35:49 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&#34; &lt;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Konczal, Joseph&#34; &lt;joseph.konczal.ctr [...] usno.navy.mil&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Shlomi,

Thank you for the comments. I will try to address them with a new patch.
 
Joe

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Shlomi Fish via RT [mailto:bug-CPANPLUS-Dist-Fedora@rt.cpan.org] 
Sent: Friday, November 20, 2015 3:30 AM
To: Konczal, Joseph
Subject: [Non-DoD Source] [rt.cpan.org #109170] make edit-metafile work for rpms

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=109170">https://rt.cpan.org/Ticket/Display.html?id=109170</a></span> &gt;

Hi Joseph,

some comments about your code:

1. You&#39;re using File::Slurp which is no longer recommended. See <span class="clickylink"><a target="new" rel="nofollow" href="http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html">http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html</a></span> . You also didn&#39;t specify the imports explicitly. That put aside, I would prefer if you didn&#39;t add another dependency here , and instead write the _read_file/_write_file &#40;with a leading underscore&#41; functions explicitly.

2. You should specify the encoding of the files.

3. You mutate $contents by doing “$contents = FOO &#40;$contents&#41;;” which I dislike. Please assign to a new variable.

------------

Would you like to fix these issues yourself, or do you want me to do that for you? I&#39;m going to await for your reply.

Regards,

-- Shlomi Fish
  
On Thu Nov 19 17:41:41 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<div class="message-stanza open">&gt; Hi,
&gt; 
&gt; I needed to edit the spec file of a Perl package I was creating with 
&gt; cpan2build, in order to add some &#39;obsoletes&#39; so it could properly 
&gt; replace some RPMs of a few different version 0 packages that had been 
&gt; combined into one version 1 package. Unfortunately, &#39;--edit-metafiles&#39; 
&gt; had not yet been implemented for CPANPLUS::Dist::Fedora, so I 
&gt; implemented it via the attached patch.
&gt; 
&gt; Joseph Konczal
&gt; Senior Programmer
&gt; General Dynamics Information Technology
&gt; &#40;202&#41; 762-1428  Direct
&gt; &#40;240&#41; 449-9295  Cell
&gt; joseph.konczal@gdit.com
&gt; 
</div></div></div></div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;20&nbsp;14:22:31&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 20 12:29:05 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Shlomi,
&gt; 
&gt; Thank you for the comments. I will try to address them with a new
&gt; patch.
&gt; 
</div>
Thanks! I&#39;ll be waiting for the new patch before I proceed.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Joe
&gt; 
&gt; -----Original Message-----
&gt;  From: Shlomi Fish via RT [mailto:bug-CPANPLUS-Dist-
&gt; Fedora@rt.cpan.org]
&gt; Sent: Friday, November 20, 2015 3:30 AM
&gt; To: Konczal, Joseph
&gt; Subject: [Non-DoD Source] [rt.cpan.org #109170] make edit-metafile
&gt; work for rpms
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=109170">https://rt.cpan.org/Ticket/Display.html?id=109170</a></span> &gt;
&gt; 
&gt; Hi Joseph,
&gt; 
&gt; some comments about your code:
&gt; 
&gt; 1. You&#39;re using File::Slurp which is no longer recommended. See
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-">http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-</a></span>
&gt; broken-and-wrong.html . You also didn&#39;t specify the imports
&gt; explicitly. That put aside, I would prefer if you didn&#39;t add another
&gt; dependency here , and instead write the _read_file/_write_file &#40;with a
&gt; leading underscore&#41; functions explicitly.
&gt; 
&gt; 2. You should specify the encoding of the files.
&gt; 
&gt; 3. You mutate $contents by doing “$contents = FOO &#40;$contents&#41;;” which
&gt; I dislike. Please assign to a new variable.
&gt; 
&gt; ------------
&gt; 
&gt; Would you like to fix these issues yourself, or do you want me to do
&gt; that for you? I&#39;m going to await for your reply.
&gt; 
&gt; Regards,
&gt; 
&gt; -- Shlomi Fish
&gt; 
&gt; On Thu Nov 19 17:41:41 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<div class="message-stanza open">&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I needed to edit the spec file of a Perl package I was creating with
&gt; &gt; cpan2build, in order to add some &#39;obsoletes&#39; so it could properly
&gt; &gt; replace some RPMs of a few different version 0 packages that had been
&gt; &gt; combined into one version 1 package. Unfortunately, &#39;--edit-
&gt; &gt; metafiles&#39;
&gt; &gt; had not yet been implemented for CPANPLUS::Dist::Fedora, so I
&gt; &gt; implemented it via the attached patch.
&gt; &gt;
&gt; &gt; Joseph Konczal
&gt; &gt; Senior Programmer
&gt; &gt; General Dynamics Information Technology
&gt; &gt; &#40;202&#41; 762-1428  Direct
&gt; &gt; &#40;240&#41; 449-9295  Cell
&gt; &gt; joseph.konczal@gdit.com
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;24&nbsp;15:02:58&nbsp;2015</span>
    <span class="description">joseph.konczal.ctr [...] usno.navy.mil -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [Non-DoD Source] [rt.cpan.org #109170] make edit-metafile work for rpms</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 23 Nov 2015 20:06:33 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&#34; &lt;bug-CPANPLUS-Dist-Fedora [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Konczal, Joseph&#34; &lt;joseph.konczal.ctr [...] usno.navy.mil&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Shlomi,

I hope I have adequately addressed your concerns with my first patch in the attached new patch. Thank you for taking the time to work with me to get this code into the package.

Joe

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Shlomi Fish via RT [mailto:bug-CPANPLUS-Dist-Fedora@rt.cpan.org] 
Sent: Friday, November 20, 2015 3:30 AM
To: Konczal, Joseph
Subject: [Non-DoD Source] [rt.cpan.org #109170] make edit-metafile work for rpms

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=109170">https://rt.cpan.org/Ticket/Display.html?id=109170</a></span> &gt;

Hi Joseph,

some comments about your code:

1. You&#39;re using File::Slurp which is no longer recommended. See <span class="clickylink"><a target="new" rel="nofollow" href="http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html">http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-broken-and-wrong.html</a></span> . You also didn&#39;t specify the imports explicitly. That put aside, I would prefer if you didn&#39;t add another dependency here , and instead write the _read_file/_write_file &#40;with a leading underscore&#41; functions explicitly.

2. You should specify the encoding of the files.

3. You mutate $contents by doing “$contents = FOO &#40;$contents&#41;;” which I dislike. Please assign to a new variable.

------------

Would you like to fix these issues yourself, or do you want me to do that for you? I&#39;m going to await for your reply.

Regards,

-- Shlomi Fish
  
On Thu Nov 19 17:41:41 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<div class="message-stanza open">&gt; Hi,
&gt; 
&gt; I needed to edit the spec file of a Perl package I was creating with 
&gt; cpan2build, in order to add some &#39;obsoletes&#39; so it could properly 
&gt; replace some RPMs of a few different version 0 packages that had been 
&gt; combined into one version 1 package. Unfortunately, &#39;--edit-metafiles&#39; 
&gt; had not yet been implemented for CPANPLUS::Dist::Fedora, so I 
&gt; implemented it via the attached patch.
&gt; 
&gt; Joseph Konczal
&gt; Senior Programmer
&gt; General Dynamics Information Technology
&gt; &#40;202&#41; 762-1428  Direct
&gt; &#40;240&#41; 449-9295  Cell
&gt; joseph.konczal@gdit.com
&gt; 
</div></div></div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;25&nbsp;02:14:07&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Joe,

On Tue Nov 24 15:02:58 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Shlomi,
&gt; 
&gt; I hope I have adequately addressed your concerns with my first patch
&gt; in the attached new patch. Thank you for taking the time to work with
&gt; me to get this code into the package.
&gt; 
</div>
the patch was mostly fine except for:

1. It didn&#39;t have explicit close statements.

2. It was not based on the source directory &#40;no lib/ prefix&#41;

3. «print $fh $contents;» should be «print {$fh} $contents;» &#40;not a bug, just a precaution&#41;.

I fixed these problems and applied the patch in a modified way. It should be OK in v0.0.9. Please let me know if it is working for you.

Regards,

-- Shlomi Fish

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Joe
&gt; 
&gt; -----Original Message-----
&gt;  From: Shlomi Fish via RT [mailto:bug-CPANPLUS-Dist-
&gt; Fedora@rt.cpan.org]
&gt; Sent: Friday, November 20, 2015 3:30 AM
&gt; To: Konczal, Joseph
&gt; Subject: [Non-DoD Source] [rt.cpan.org #109170] make edit-metafile
&gt; work for rpms
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=109170">https://rt.cpan.org/Ticket/Display.html?id=109170</a></span> &gt;
&gt; 
&gt; Hi Joseph,
&gt; 
&gt; some comments about your code:
&gt; 
&gt; 1. You&#39;re using File::Slurp which is no longer recommended. See
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-">http://blogs.perl.org/users/leon_timmermans/2015/08/fileslurp-is-</a></span>
&gt; broken-and-wrong.html . You also didn&#39;t specify the imports
&gt; explicitly. That put aside, I would prefer if you didn&#39;t add another
&gt; dependency here , and instead write the _read_file/_write_file &#40;with a
&gt; leading underscore&#41; functions explicitly.
&gt; 
&gt; 2. You should specify the encoding of the files.
&gt; 
&gt; 3. You mutate $contents by doing “$contents = FOO &#40;$contents&#41;;” which
&gt; I dislike. Please assign to a new variable.
&gt; 
&gt; ------------
&gt; 
&gt; Would you like to fix these issues yourself, or do you want me to do
&gt; that for you? I&#39;m going to await for your reply.
&gt; 
&gt; Regards,
&gt; 
&gt; -- Shlomi Fish
&gt; 
&gt; On Thu Nov 19 17:41:41 2015, joseph.konczal.ctr@usno.navy.mil wrote:
<div class="message-stanza open">&gt; &gt; Hi,
&gt; &gt;
&gt; &gt; I needed to edit the spec file of a Perl package I was creating with
&gt; &gt; cpan2build, in order to add some &#39;obsoletes&#39; so it could properly
&gt; &gt; replace some RPMs of a few different version 0 packages that had been
&gt; &gt; combined into one version 1 package. Unfortunately, &#39;--edit-
&gt; &gt; metafiles&#39;
&gt; &gt; had not yet been implemented for CPANPLUS::Dist::Fedora, so I
&gt; &gt; implemented it via the attached patch.
&gt; &gt;
&gt; &gt; Joseph Konczal
&gt; &gt; Senior Programmer
&gt; &gt; General Dynamics Information Technology
&gt; &gt; &#40;202&#41; 762-1428  Direct
&gt; &gt; &#40;240&#41; 449-9295  Cell
&gt; &gt; joseph.konczal@gdit.com
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;25&nbsp;02:14:19&nbsp;2015</span>
    <span class="description">SHLOMIF [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
