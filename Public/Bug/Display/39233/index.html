<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #39233 for PAR-Packer: Suspected buffer overflow while running executable made by Par::Packer</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #39233 for PAR-Packer: Suspected buffer overflow while running executable made by Par::Packer</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/PAR-Packer/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/PAR-Packer/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/PAR-Packer/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/PAR-Packer/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/PAR-Packer">PAR-Packer CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">39233</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">stalled</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/PAR-Packer/Active/">PAR-Packer</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dave_clarke [...] merck.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-41710-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-41711-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;12&nbsp;16:31:35&nbsp;2008</span>
    <span class="description">dave_clarke [...] merck.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Suspected buffer overflow while running executable made by Par::Packer</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 12 Sep 2008 16:26:41 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Clarke, Dave S&#34; &lt;dave_clarke [...] merck.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have encountered an error while running an executable made by
Par::Packer.  It occurs as part of a regexp pattern match.
The error has been narrowed down to this snippet of code &#40;problem
bolded&#41;:
                $_ =
q[TEXT=&#34;some_very_large_text_to_be_extracted_between_double_quotes&#34;];
                my $rQStr = qr/&#34;&#40;&#40;?:&#34;&#34;|[^&#34;]&#41;*&#41;&#34;/;
# String between double quotes &#40;&#34;&#41;
                my $key = &#39;TEXT&#39;;
                if &#40;m/${key}=${rQStr}/&#41; {
                        $_ = $1;
                
$_ at the start of the pattern match contains a large string &#40;&gt; 7000&#41;
characters.
The perl script executes flawlessly, and has been in production for over
a year.  I recently distributed this script and associated modules to
other users using Par::Packer.
The .exe generated by Par::Packer works for strings up to 7261
characters, but fails silently at 7262 characters between the quotes.
In other words, the .exe just exits w/o issuing any kind of error msg.
Perl Version:
This is perl, v5.8.8 built for MSWin32-x86-multi-thread
Binary build 820 [274739] provided by ActiveState
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
Built Jan 23 2007 15:57:46
Module Versions &#40;installed from bribes&#41;:
PAR             0.982
PAR-Dist        0.31
PAR-Packer      0.982
OS Version:
Microsoft Windows XP Professional
Version 5.1.2600 Service Pack 2 Build 2600
If you need any additional information, or explanation of the problem.
Please E-Mail, or call me using the info below.

Dave Clarke
Aker Solutions Representative  at Merck &#38; Co., Inc
 a&#38; Co., Inc. -  Business Confidential 
Phone: &#40;215&#41;  993-3015
Email: dave_clarke@merck.com


Notice:  This e-mail message, together with any attachments, contains
information of Merck &#38; Co., Inc. &#40;One Merck Drive, Whitehouse Station,
New Jersey, USA 08889&#41;, and/or its affiliates &#40;which may be known
outside the United States as Merck Frosst, Merck Sharp &#38; Dohme or
MSD and in Japan, as Banyu - direct contact information for affiliates is
available at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.merck.com/contact/contacts.html&#41;">http://www.merck.com/contact/contacts.html&#41;</a></span> that may be
confidential, proprietary copyrighted and/or legally privileged. It is
intended solely for the use of the individual or entity named on this
message. If you are not the intended recipient, and have received this
message in error, please notify us immediately by reply e-mail and
then delete it from your system.
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;12&nbsp;17:38:55&nbsp;2008</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Unfortunately, I&#39;m unable to reproduce the problem. I could only check
on linux, though.

Would it be possible to provide an entire test script which fails if you
package and run it? I&#39;ll try to dig up a working Virtual Machine for
testing on win32.

Best regards,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;12&nbsp;17:39:02&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Sep&nbsp;13&nbsp;09:38:49&nbsp;2008</span>
    <span class="description">wyp3rlx02 [...] sneakemail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39233] Suspected buffer overflow while running executable made by Par::Packer </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 13 Sep 2008 11:38:24 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-PAR [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steffen Mueller &lt;wyp3rlx02 [...] sneakemail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi again,

Clarke, Dave S via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fri Sep 12 16:31:35 2008: Request 39233 was acted upon.
&gt; Transaction: Ticket created by dave_clarke@merck.com
&gt;        Queue: PAR
&gt;      Subject: Suspected buffer overflow while running executable made by Par::Packer
</div>[...]

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;               $_ =
&gt; q[TEXT=&#34;some_very_large_text_to_be_extracted_between_double_quotes&#34;];
&gt;               my $rQStr = qr/&#34;&#40;&#40;?:&#34;&#34;|[^&#34;]&#41;*&#41;&#34;/;
&gt; # String between double quotes &#40;&#34;&#41;
&gt;               my $key = &#39;TEXT&#39;;
&gt;               if &#40;m/${key}=${rQStr}/&#41; {
&gt;                       $_ = $1;
</div>
It&#39;s likely that this isn&#39;t a PAR::Packer issue after all. That regex
was triggering some alarms when I first saw it, but I wasn&#39;t entirely
sure at the time. Since then, I talked to somebody who knows Perl
regexes inside out and he simply called it a &#34;diabolical pattern&#34;. It&#39;ll
use one stack frame per input character. The details aren&#39;t clear to me,
but it&#39;s pretty obvious that by replacing the regex with a less evil
one, you&#39;ll fix the code.

The quick suggestion was:
my $rQStr = qr/&#34;&#40;&#40;?&gt;&#40;&#34;&#34;|[^&#34;]+&#41;*&#41;&#41;&#34;/;

He wasn&#39;t entirely sure it&#39;d be right because it was way past end of
work time for both of us.

Best regards,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;15&nbsp;13:03:46&nbsp;2008</span>
    <span class="description">dave_clarke [...] merck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #39233] Suspected buffer overflow while running executable made by Par::Packer </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 15 Sep 2008 13:03:20 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Clarke, Dave S&#34; &lt;dave_clarke [...] merck.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Steffen,

Thanks for your quick response to this.  This was work related, so I put
it aside over the weekend.

I did take a second look at the regexp.  If you knew what I was trying
to parse, you may not think it was quite so diabolocal.  I was parsing
some text, that included some strings in double quotes.  The odd part is
that, instead of escaping an embedded double quote with a back slash,
they escape it with a second double quote.  Therefore, I am dealing with
a string like the following example.

TEXT=&#34;this is a string with an &#34;&#34;embedded quotation&#34;&#34; in it&#34;.

I decided it was much easier to parse, if I replaced the consecutive
double qutoes with a control character, match a much simpler quoted
string, then restore the embedded double quote.

The example you sent looked like it was using an experimental feature
[?&gt;] -- or maybe I&#39;m looking at old documentation.

Anyways, I have a good solution to the problem for now.  However, there
was a difference between the way the interpreted perl code ran, and the
.exe created by Par::Packer.  If I can create a simple script, and .exe
that I can forward to you, I will.  

Again, thanks for your help.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Steffen Mueller via RT [mailto:bug-PAR@rt.cpan.org]
Sent: Saturday, September 13, 2008 9:39 AM
To: Clarke, Dave S
Subject: Re: [rt.cpan.org #39233] Suspected buffer overflow while
running executable made by Par::Packer

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39233">http://rt.cpan.org/Ticket/Display.html?id=39233</a></span> &gt;

Hi again,

Clarke, Dave S via RT wrote:
<div class="message-stanza open">&gt; Fri Sep 12 16:31:35 2008: Request 39233 was acted upon.
&gt; Transaction: Ticket created by dave_clarke@merck.com
&gt;        Queue: PAR
&gt;      Subject: Suspected buffer overflow while running executable made
</div>by Par::Packer
[...]

<div class="message-stanza open">&gt;               $_ =
&gt; q[TEXT=&#34;some_very_large_text_to_be_extracted_between_double_quotes&#34;];
&gt;               my $rQStr = qr/&#34;&#40;&#40;?:&#34;&#34;|[^&#34;]&#41;*&#41;&#34;/;
&gt; # String between double quotes &#40;&#34;&#41;
&gt;               my $key = &#39;TEXT&#39;;
&gt;               if &#40;m/${key}=${rQStr}/&#41; {
&gt;                       $_ = $1;
</div>
It&#39;s likely that this isn&#39;t a PAR::Packer issue after all. That regex
was triggering some alarms when I first saw it, but I wasn&#39;t entirely
sure at the time. Since then, I talked to somebody who knows Perl
regexes inside out and he simply called it a &#34;diabolical pattern&#34;. It&#39;ll
use one stack frame per input character. The details aren&#39;t clear to me,
but it&#39;s pretty obvious that by replacing the regex with a less evil
one, you&#39;ll fix the code.

The quick suggestion was:
my $rQStr = qr/&#34;&#40;&#40;?&gt;&#40;&#34;&#34;|[^&#34;]+&#41;*&#41;&#41;&#34;/;

He wasn&#39;t entirely sure it&#39;d be right because it was way past end of
work time for both of us.

Best regards,
Steffen



Notice:  This e-mail message, together with any attachments, contains
information of Merck &#38; Co., Inc. &#40;One Merck Drive, Whitehouse Station,
New Jersey, USA 08889&#41;, and/or its affiliates &#40;which may be known
outside the United States as Merck Frosst, Merck Sharp &#38; Dohme or
MSD and in Japan, as Banyu - direct contact information for affiliates is
available at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.merck.com/contact/contacts.html&#41;">http://www.merck.com/contact/contacts.html&#41;</a></span> that may be
confidential, proprietary copyrighted and/or legally privileged. It is
intended solely for the use of the individual or entity named on this
message. If you are not the intended recipient, and have received this
message in error, please notify us immediately by reply e-mail and
then delete it from your system.
</div></div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;15&nbsp;14:21:03&nbsp;2008</span>
    <span class="description">wyp3rlx02 [...] sneakemail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #39233] Suspected buffer overflow while running executable made by Par::Packer</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 15 Sep 2008 20:20:45 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-PAR [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Steffen Mueller &lt;wyp3rlx02 [...] sneakemail.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Dave,

Clarke, Dave S via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: PAR
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=39233">http://rt.cpan.org/Ticket/Display.html?id=39233</a></span> &gt;
</div>[...]
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I did take a second look at the regexp.  If you knew what I was trying
&gt; to parse, you may not think it was quite so diabolocal.
</div>
Well, I wasn&#39;t considering your goal diabolical nor the means, but the
specific regular expression which, according to the expert, uses a &#40;C&#41;
stack frame per character which is a major issue.

From what I know, it&#39;s quite possible that the condition is being
triggered *both* with- and without PAR::Packer. In the PAR::Packer case,
more code has been run, the whole script is essentially running inside
an &#39;eval&#34;&#34;&#39;. Maybe the problem just manifests earlier in that case? I&#39;m
just speculating, though. Are you seeing the problem when you&#39;re running
the generated executable on the exact same system or is it a different
computer or OS installation?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The example you sent looked like it was using an experimental feature
&gt; [?&gt;] -- or maybe I&#39;m looking at old documentation.
</div>
You&#39;re right. In 5.8.8, this is marked as &#34;highly experimental&#34;. I don&#39;t
have a 5.10.0 handy, but I suspect it&#39;s not experimental any more. In
5.11.0, that construct is absolutely not flagged as experimental any more!

Given that the advice came from the person who wrote almost all of the
improvements in the regexp engine for 5.10.0, he&#39;d naturally use
advanced feaetures.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Anyways, I have a good solution to the problem for now.  However, there
&gt; was a difference between the way the interpreted perl code ran, and the
&gt; .exe created by Par::Packer.  If I can create a simple script, and .exe
&gt; that I can forward to you, I will.  
</div>
Reporting the issue was entirely valid, no doubts. If you can produced a
simple script, that would be much appreciated. I&#39;ll mark the issue as
resolved, but a simple reply will reopen the ticket.

Best regards,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;15&nbsp;17:10:04&nbsp;2008</span>
    <span class="description">dave_clarke [...] merck.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #39233] Suspected buffer overflow while running executable made by Par::Packer</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 15 Sep 2008 17:09:32 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Clarke, Dave S&#34; &lt;dave_clarke [...] merck.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Steffen,

I reduced the script to the following, which still demonstrates the
problem.  I am running both the script and the .exe on the same machine.
By the way, I tried using the regexp that you supplied, and it runs fine
in both the interpreted and compiled mode.  It makes a lot more sense,
when I take a few minutes to study it.

        use strict;
        use warnings;

        my $pre  = q[TEXT=&#34;];
        my $filler = q[A long string with an &#34;&#34;embedded quotation&#34;&#34; in
it] x 10;
        my $post = q[&#34;];

        my $key = &#39;TEXT&#39;;
        my $rQStr1 = qr/&#34;&#40;&#40;?&gt;&#40;&#34;&#34;|[^&#34;]+&#41;*&#41;&#41;&#34;/;           # RE that
Steffen recommends
        my $rQStr2 = qr/&#34;&#40;&#40;?:&#34;&#34;|[^&#34;]&#41;*&#41;&#34;/;                      # RE
that crashes

        for my $loop &#40;1..100&#41; {
                $_ = $pre . &#40; $filler x $loop&#41; . $post;
                my $size = length&#40;$_&#41;;
                if &#40; m/${key}=${rQStr1}/&#41; {
                        warn &#34;Iteration $loop: RE1: String size $size,
matched size &#34; . length&#40;$1&#41; . &#34;\n&#34;;
                }
                if &#40; m/${key}=${rQStr2}/&#41; {
                        warn &#34;Iteration $loop: RE2: String size $size,
matched size &#34; . length&#40;$1&#41; . &#34;\n&#34;;
                }
        }

__END__

perl h.pl
pp -o h.exe h.pl
h.exe

The results are interesting:  The script starts generating warnings for
$rQStr2 on loop 69-100.  The .exe stops after loop 8.

...
Iteration 8: RE1: String size 4007, matched size 4000
...
Iteration 68: RE1: String size 34007, matched size 34000
Iteration 68: RE2: String size 34007, matched size 34000
Iteration 69: RE1: String size 34507, matched size 34500
Complex regular subexpression recursion limit &#40;32766&#41; exceeded at h.pl
line 19.
Iteration 69: RE2: String size 34507, matched size 34122
...
Iteration 100: RE1: String size 50007, matched size 50000
Complex regular subexpression recursion limit &#40;32766&#41; exceeded at h.pl
line 20.
Iteration 100: RE2: String size 50007, matched size 34122


Environment:

Perl Version:
This is perl, v5.8.8 built for MSWin32-x86-multi-thread
Binary build 820 [274739] provided by ActiveState
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.ActiveState.com">http://www.ActiveState.com</a></span>
Built Jan 23 2007 15:57:46
Module Versions &#40;installed from bribes&#41;:
PAR             0.982
PAR-Dist        0.31
PAR-Packer      0.982
OS Version:
Microsoft Windows XP Professional
Version 5.1.2600 Service Pack 2 Build 2600

Notice:  This e-mail message, together with any attachments, contains
information of Merck &#38; Co., Inc. &#40;One Merck Drive, Whitehouse Station,
New Jersey, USA 08889&#41;, and/or its affiliates &#40;which may be known
outside the United States as Merck Frosst, Merck Sharp &#38; Dohme or
MSD and in Japan, as Banyu - direct contact information for affiliates is
available at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.merck.com/contact/contacts.html&#41;">http://www.merck.com/contact/contacts.html&#41;</a></span> that may be
confidential, proprietary copyrighted and/or legally privileged. It is
intended solely for the use of the individual or entity named on this
message. If you are not the intended recipient, and have received this
message in error, please notify us immediately by reply e-mail and
then delete it from your system.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;02&nbsp;21:08:29&nbsp;2009</span>
    <span class="description">smueller [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m marking this issue as stalled as it&#39;s

a&#41; been replaced with a better regexp,
b&#41; not clear how to &#34;fix&#34; it, but most importantly:
b&#41; still interesting and not understood.

Best regards,
Steffen
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;02&nbsp;21:08:35&nbsp;2009</span>
    <span class="description">smueller [...] cpan.org -  Status changed from &#39;open&#39; to &#39;stalled&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;26&nbsp;10:42:55&nbsp;2009</span>
    <span class="description">smueller [...] cpan.org -  Queue changed from PAR to PAR-Packer</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
