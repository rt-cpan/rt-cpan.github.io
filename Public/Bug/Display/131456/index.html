<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #131456 for JSON-Path: Non deterministic result for $..* on scalar value</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #131456 for JSON-Path: Non deterministic result for $..* on scalar value</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=JSON-Path">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=JSON-Path">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=JSON-Path">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=JSON-Path">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/JSON-Path">JSON-Path CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">131456</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=JSON-Path">JSON-Path</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
christoph.burgmer [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-234486-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-234487-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=131456">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879145" href="/Public/Bug/Display.html?id=131456#txn-1879145">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;02:32:04&nbsp;2020</span>
    <span class="description">christoph.burgmer [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Jan 2020 08:31:42 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christoph Burgmer &lt;christoph.burgmer [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879145/1008352/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008352">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">It seems a recent bump in Alpine 3.11 from 3.10 has changed the Perl
version from
This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
to
This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
and also changed the response from JSON::Path for the edge case of $..* run
on a document of the number 42 from an error response to the result of an
empty array.

However on OS X with the same newer Perl version the previous error
response can still be seen:

$ echo 42 | perl main.pl &#39;$..*&#39;
Unable to decode 42 as JSON: malformed JSON string, neither tag, array,
object, number, string or atom, at character offset 0 &#40;before &#34;&#40;end of
string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81, &lt;STDIN&gt; line 1.
 at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
$ perl --version

This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
darwin-thread-multi-2level
[...]
$ uname -s
Darwin


vs.


$ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
/ # apk add perl
fetch <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
fetch
<span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
&#40;1/2&#41; Installing libbz2 &#40;1.0.8-r1&#41;
&#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
Executing busybox-1.31.1-r8.trigger
OK: 42 MiB in 16 packages
/ # cd mydir/
/mydir # echo 42 | perl main.pl &#39;$..*&#39;
[]
/mydir # perl --version

This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
x86_64-linux-thread-multi
[...]


This currently makes it hard to reproduce the same results for the
json-path-comparison across the Docker and native build &#40;at least on OS X&#41;.
I would be grateful for any pointers into why the behaviour would be
different.

Script is here:
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>

For completeness, I&#39;m tracking this issue on the other side under
<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879145/1008353/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008353">with headers</a>
<br />
<span class="downloadcontenttype">text/html 2.6k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879256" href="/Public/Bug/Display.html?id=131456#txn-1879256">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;13:13:52&nbsp;2020</span>
    <span class="description">popefelix [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Jan 2020 12:13:26 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kit Peters &lt;popefelix [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879256/1008407/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008407">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">So if I&#39;m reading this correctly, the behaviour you&#39;re talking about is
essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as valid
JSON, and the other does not, even though the Perl versions are identical.
My reply will assume that to be the case.

Perl does not natively decode/encode JSON. Instead JSON support is provided
by a number of third party modules. In the case of JSON::Path, the JSON
encoder used is JSON::MaybeXS &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS&#41;">https://metacpan.org/pod/JSON::MaybeXS&#41;</a></span>. Per
the documentation, this will use Cpanel::JSON::XS if available, fall back
to JSON::XS if the former is not available, and finally fall back to
JSON::PP. So JSON on two different systems could be handled by any of these
three modules. Furthermore, until the introduction of ECMA-404 in 2014,
&#34;42&#34; was *not* valid JSON. See
<span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span> for
more discussion on this topic.

I&#39;m a bit surprised, though, that the system Perl on OSX is so old. Let&#39;s
investigate this further. On both systems, execute the following in Bash
and send me the results:

for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done


On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
bug-JSON-Path@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt;        Queue: JSON-Path
&gt;      Subject: Non deterministic result for $..* on scalar value
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: christoph.burgmer@gmail.com
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;
&gt;
&gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the Perl
&gt; version from
&gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt; to
&gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt; and also changed the response from JSON::Path for the edge case of $..* run
&gt; on a document of the number 42 from an error response to the result of an
&gt; empty array.
&gt;
&gt; However on OS X with the same newer Perl version the previous error
&gt; response can still be seen:
&gt;
&gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt; Unable to decode 42 as JSON: malformed JSON string, neither tag, array,
&gt; object, number, string or atom, at character offset 0 &#40;before &#34;&#40;end of
&gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81, &lt;STDIN&gt; line
&gt; 1.
&gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt; $ perl --version
&gt;
&gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; darwin-thread-multi-2level
&gt; [...]
&gt; $ uname -s
&gt; Darwin
&gt;
&gt;
&gt; vs.
&gt;
&gt;
&gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt; / # apk add perl
&gt; fetch
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
&gt; fetch
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
&gt; &#40;1/2
&gt; &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>&gt;&#41;
&gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt; Executing busybox-1.31.1-r8.trigger
&gt; OK: 42 MiB in 16 packages
&gt; / # cd mydir/
&gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt; []
&gt; /mydir # perl --version
&gt;
&gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; x86_64-linux-thread-multi
&gt; [...]
&gt;
&gt;
&gt; This currently makes it hard to reproduce the same results for the
&gt; json-path-comparison across the Docker and native build &#40;at least on OS X&#41;.
&gt; I would be grateful for any pointers into why the behaviour would be
&gt; different.
&gt;
&gt; Script is here:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
&gt;
&gt; For completeness, I&#39;m tracking this issue on the other side under
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt;
&gt;
</div>
-- 
Kit Peters, W0KEH
GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56 ED1D
Hello to any and all NSA, DEA, or other government or non-government agents
reading this email.  Tell me about your life; I&#39;ll tell you about mine.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879256/1008408/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008408">with headers</a>
<br />
<span class="downloadcontenttype">text/html 5.7k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879257" href="/Public/Bug/Display.html?id=131456#txn-1879257">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;13:13:52&nbsp;2020</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879322" href="/Public/Bug/Display.html?id=131456#txn-1879322">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;18:28:03&nbsp;2020</span>
    <span class="description">christoph.burgmer [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Jan 2020 00:27:41 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christoph Burgmer &lt;christoph.burgmer [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879322/1008437/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008437">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks, I did not know about the different standards of JSON. That explains
the recent painful experience with Objective C.

Output for your query on OS X:

$ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
Cpanel::JSON::XS module&#41; &#40;@INC contains:
/usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
/usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
/usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
/usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
/usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
/usr/local/lib/perl5/site_perl/5.30.1&#41;.
BEGIN failed--compilation aborted.
Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
module&#41; &#40;@INC contains:
/usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
/usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
/usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
/usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
/usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
/usr/local/lib/perl5/site_perl/5.30.1&#41;.
BEGIN failed--compilation aborted.
JSON::PP 4.02

Alpine

$ docker run --rm -it alpine:3.11 sh
/ # apk add perl
[...]
/ # for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
Cpanel::JSON::XS module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
/usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
/usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
/usr/share/perl5/core_perl&#41;.
BEGIN failed--compilation aborted.
Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
/usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
/usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
/usr/share/perl5/core_perl&#41;.
BEGIN failed--compilation aborted.
JSON::PP 4.02

Am Di., 14. Jan. 2020 um 19:13 Uhr schrieb Kit Peters via RT &lt;
bug-JSON-Path@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;
&gt; So if I&#39;m reading this correctly, the behaviour you&#39;re talking about is
&gt; essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as valid
&gt; JSON, and the other does not, even though the Perl versions are identical.
&gt; My reply will assume that to be the case.
&gt;
&gt; Perl does not natively decode/encode JSON. Instead JSON support is provided
&gt; by a number of third party modules. In the case of JSON::Path, the JSON
&gt; encoder used is JSON::MaybeXS &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS&#41;">https://metacpan.org/pod/JSON::MaybeXS&#41;</a></span>.
&gt; Per
&gt; the documentation, this will use Cpanel::JSON::XS if available, fall back
&gt; to JSON::XS if the former is not available, and finally fall back to
&gt; JSON::PP. So JSON on two different systems could be handled by any of these
&gt; three modules. Furthermore, until the introduction of ECMA-404 in 2014,
&gt; &#34;42&#34; was *not* valid JSON. See
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span>
&gt; for
&gt; more discussion on this topic.
&gt;
&gt; I&#39;m a bit surprised, though, that the system Perl on OSX is so old. Let&#39;s
&gt; investigate this further. On both systems, execute the following in Bash
&gt; and send me the results:
&gt;
&gt; for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;
&gt;
&gt; On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
&gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt; &gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt; &gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt; &gt;        Queue: JSON-Path
&gt; &gt;      Subject: Non deterministic result for $..* on scalar value
&gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt;     Severity: &#40;no value&#41;
&gt; &gt;        Owner: Nobody
&gt; &gt;   Requestors: christoph.burgmer@gmail.com
&gt; &gt;       Status: new
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt;
&gt; &gt;
&gt; &gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the Perl
&gt; &gt; version from
&gt; &gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt; &gt; to
&gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt; &gt; and also changed the response from JSON::Path for the edge case of $..*
</div>&gt; run
<div class="message-stanza open">&gt; &gt; on a document of the number 42 from an error response to the result of an
&gt; &gt; empty array.
&gt; &gt;
&gt; &gt; However on OS X with the same newer Perl version the previous error
&gt; &gt; response can still be seen:
&gt; &gt;
&gt; &gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; Unable to decode 42 as JSON: malformed JSON string, neither tag, array,
&gt; &gt; object, number, string or atom, at character offset 0 &#40;before &#34;&#40;end of
&gt; &gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81, &lt;STDIN&gt; line
&gt; &gt; 1.
&gt; &gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt; &gt; $ perl --version
&gt; &gt;
&gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; darwin-thread-multi-2level
&gt; &gt; [...]
&gt; &gt; $ uname -s
&gt; &gt; Darwin
&gt; &gt;
&gt; &gt;
&gt; &gt; vs.
&gt; &gt;
&gt; &gt;
&gt; &gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt; &gt; / # apk add perl
&gt; &gt; fetch
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
&gt; &gt; fetch
&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open">&gt; &gt; &#40;1/2
&gt; &gt; &lt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>
<div class="message-stanza open">&gt; &gt;&#41;
&gt; &gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt; &gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt; &gt; Executing busybox-1.31.1-r8.trigger
&gt; &gt; OK: 42 MiB in 16 packages
&gt; &gt; / # cd mydir/
&gt; &gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; []
&gt; &gt; /mydir # perl --version
&gt; &gt;
&gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; x86_64-linux-thread-multi
&gt; &gt; [...]
&gt; &gt;
&gt; &gt;
&gt; &gt; This currently makes it hard to reproduce the same results for the
&gt; &gt; json-path-comparison across the Docker and native build &#40;at least on OS
</div>&gt; X&#41;.
<div class="message-stanza open">&gt; &gt; I would be grateful for any pointers into why the behaviour would be
&gt; &gt; different.
&gt; &gt;
&gt; &gt; Script is here:
&gt; &gt;
&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
<div class="message-stanza open">&gt; &gt;
&gt; &gt; For completeness, I&#39;m tracking this issue on the other side under
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt; --
&gt; Kit Peters, W0KEH
&gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt; ED1D
&gt; Hello to any and all NSA, DEA, or other government or non-government agents
&gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879322/1008438/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008438">with headers</a>
<br />
<span class="downloadcontenttype">text/html 8.8k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879340" href="/Public/Bug/Display.html?id=131456#txn-1879340">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;18:39:58&nbsp;2020</span>
    <span class="description">popefelix [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Jan 2020 17:39:33 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kit Peters &lt;popefelix [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879340/1008453/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008453">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 7.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Curiouser and curiouser... &#40;i.e. &#34;Das war unerwartet&#34;&#41;  Both systems are
using the same version of JSON::PP. I can&#39;t imagine why one system would
treat &#34;42&#34; as valid and another would not; it should be the same code on
both.

On Tue, Jan 14, 2020 at 5:28 PM Christoph Burgmer via RT &lt;
bug-JSON-Path@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: JSON-Path
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;
&gt; Thanks, I did not know about the different standards of JSON. That explains
&gt; the recent painful experience with Objective C.
&gt;
&gt; Output for your query on OS X:
&gt;
&gt; $ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt; Cpanel::JSON::XS module&#41; &#40;@INC contains:
&gt;
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt; BEGIN failed--compilation aborted.
&gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt; module&#41; &#40;@INC contains:
&gt;
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt; BEGIN failed--compilation aborted.
&gt; JSON::PP 4.02
&gt;
&gt; Alpine
&gt;
&gt; $ docker run --rm -it alpine:3.11 sh
&gt; / # apk add perl
&gt; [...]
&gt; / # for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt; Cpanel::JSON::XS module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt; /usr/share/perl5/core_perl&#41;.
&gt; BEGIN failed--compilation aborted.
&gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt; module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt; /usr/share/perl5/core_perl&#41;.
&gt; BEGIN failed--compilation aborted.
&gt; JSON::PP 4.02
&gt;
&gt; Am Di., 14. Jan. 2020 um 19:13 Uhr schrieb Kit Peters via RT &lt;
&gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt;
&gt; &gt; So if I&#39;m reading this correctly, the behaviour you&#39;re talking about is
&gt; &gt; essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as
</div>&gt; valid
<div class="message-stanza open">&gt; &gt; JSON, and the other does not, even though the Perl versions are
</div>&gt; identical.
<div class="message-stanza open">&gt; &gt; My reply will assume that to be the case.
&gt; &gt;
&gt; &gt; Perl does not natively decode/encode JSON. Instead JSON support is
</div>&gt; provided
<div class="message-stanza open">&gt; &gt; by a number of third party modules. In the case of JSON::Path, the JSON
&gt; &gt; encoder used is JSON::MaybeXS &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS&#41;">https://metacpan.org/pod/JSON::MaybeXS&#41;</a></span>.
&gt; &gt; Per
&gt; &gt; the documentation, this will use Cpanel::JSON::XS if available, fall back
&gt; &gt; to JSON::XS if the former is not available, and finally fall back to
&gt; &gt; JSON::PP. So JSON on two different systems could be handled by any of
</div>&gt; these
<div class="message-stanza open">&gt; &gt; three modules. Furthermore, until the introduction of ECMA-404 in 2014,
&gt; &gt; &#34;42&#34; was *not* valid JSON. See
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span>
&gt; &gt; for
&gt; &gt; more discussion on this topic.
&gt; &gt;
&gt; &gt; I&#39;m a bit surprised, though, that the system Perl on OSX is so old. Let&#39;s
&gt; &gt; investigate this further. On both systems, execute the following in Bash
&gt; &gt; and send me the results:
&gt; &gt;
&gt; &gt; for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; &gt;
&gt; &gt;
&gt; &gt; On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
&gt; &gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt; &gt; &gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt; &gt; &gt;        Queue: JSON-Path
&gt; &gt; &gt;      Subject: Non deterministic result for $..* on scalar value
&gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt;     Severity: &#40;no value&#41;
&gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt;   Requestors: christoph.burgmer@gmail.com
&gt; &gt; &gt;       Status: new
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the Perl
&gt; &gt; &gt; version from
&gt; &gt; &gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt; &gt; &gt; to
&gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt; &gt; &gt; and also changed the response from JSON::Path for the edge case of $..*
</div>&gt; &gt; run
<div class="message-stanza open">&gt; &gt; &gt; on a document of the number 42 from an error response to the result of
</div></div>&gt; an
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; empty array.
&gt; &gt; &gt;
&gt; &gt; &gt; However on OS X with the same newer Perl version the previous error
&gt; &gt; &gt; response can still be seen:
&gt; &gt; &gt;
&gt; &gt; &gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; &gt; Unable to decode 42 as JSON: malformed JSON string, neither tag, array,
&gt; &gt; &gt; object, number, string or atom, at character offset 0 &#40;before &#34;&#40;end of
&gt; &gt; &gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81, &lt;STDIN&gt;
</div></div>&gt; line
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; 1.
&gt; &gt; &gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt; &gt; &gt; $ perl --version
&gt; &gt; &gt;
&gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; &gt; darwin-thread-multi-2level
&gt; &gt; &gt; [...]
&gt; &gt; &gt; $ uname -s
&gt; &gt; &gt; Darwin
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; vs.
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt; &gt; &gt; / # apk add perl
&gt; &gt; &gt; fetch
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
&gt; &gt; &gt; fetch
&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &#40;1/2
&gt; &gt; &gt; &lt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;&#41;
&gt; &gt; &gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt; &gt; &gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt; &gt; &gt; Executing busybox-1.31.1-r8.trigger
&gt; &gt; &gt; OK: 42 MiB in 16 packages
&gt; &gt; &gt; / # cd mydir/
&gt; &gt; &gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; &gt; []
&gt; &gt; &gt; /mydir # perl --version
&gt; &gt; &gt;
&gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; &gt; x86_64-linux-thread-multi
&gt; &gt; &gt; [...]
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; This currently makes it hard to reproduce the same results for the
&gt; &gt; &gt; json-path-comparison across the Docker and native build &#40;at least on OS
</div>&gt; &gt; X&#41;.
<div class="message-stanza open">&gt; &gt; &gt; I would be grateful for any pointers into why the behaviour would be
&gt; &gt; &gt; different.
&gt; &gt; &gt;
&gt; &gt; &gt; Script is here:
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt;
&gt; &gt; &gt; For completeness, I&#39;m tracking this issue on the other side under
&gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; --
&gt; &gt; Kit Peters, W0KEH
&gt; &gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt; &gt; ED1D
&gt; &gt; Hello to any and all NSA, DEA, or other government or non-government
</div>&gt; agents
<div class="message-stanza open">&gt; &gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
</div>
-- 
Kit Peters, W0KEH
GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56 ED1D
Hello to any and all NSA, DEA, or other government or non-government agents
reading this email.  Tell me about your life; I&#39;ll tell you about mine.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879340/1008454/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008454">with headers</a>
<br />
<span class="downloadcontenttype">text/html 10.5k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879343" href="/Public/Bug/Display.html?id=131456#txn-1879343">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;18:57:17&nbsp;2020</span>
    <span class="description">christoph.burgmer [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Jan 2020 00:56:53 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christoph Burgmer &lt;christoph.burgmer [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879343/1008458/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008458">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry, I&#39;m not sure I&#39;m setting @INC right. I&#39;m installing the dependencies
via a custom target path
  cpanm -nL ./build JSON
and setting
  use lib qw&#40;./build/lib/perl5/&#41;;

Not sure this helps:

$ diff -r implementations/Perl_JSON-Path/build
implementations/Perl_JSON-Path/build_alpine
diff -r implementations/Perl_JSON-Path/build/.ninja_log
implementations/Perl_JSON-Path/build_alpine/.ninja_log
2,3c2,3
&lt; 0 208 1579045735497619436 implementations/Perl_JSON-Path/build/cpanm
510b975a90dcad89
&lt; 208 16364 1579045751659110162
implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 5 804 1579045273000000000 implementations/Perl_JSON-Path/build/cpanm
</div>510b975a90dcad89
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 805 17022 1579045289000000000
</div>implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
Only in implementations/Perl_JSON-Path/build: bin
Only in implementations/Perl_JSON-Path/build/lib/perl5:
darwin-thread-multi-2level
Only in implementations/Perl_JSON-Path/build_alpine/lib/perl5:
x86_64-linux-thread-multi
$ ls implementations/Perl_JSON-Path/build/bin
cpanel_json_xs



Am Mi., 15. Jan. 2020 um 00:40 Uhr schrieb Kit Peters via RT &lt;
bug-JSON-Path@rt.cpan.org&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;
&gt; Curiouser and curiouser... &#40;i.e. &#34;Das war unerwartet&#34;&#41;  Both systems are
&gt; using the same version of JSON::PP. I can&#39;t imagine why one system would
&gt; treat &#34;42&#34; as valid and another would not; it should be the same code on
&gt; both.
&gt;
&gt; On Tue, Jan 14, 2020 at 5:28 PM Christoph Burgmer via RT &lt;
&gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;
<div class="message-stanza open">&gt; &gt;        Queue: JSON-Path
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt;
&gt; &gt; Thanks, I did not know about the different standards of JSON. That
</div>&gt; explains
<div class="message-stanza open">&gt; &gt; the recent painful experience with Objective C.
&gt; &gt;
&gt; &gt; Output for your query on OS X:
&gt; &gt;
&gt; &gt; $ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains:
&gt; &gt;
&gt; &gt;
</div>&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt; &gt; module&#41; &#40;@INC contains:
&gt; &gt;
&gt; &gt;
</div>&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; JSON::PP 4.02
&gt; &gt;
&gt; &gt; Alpine
&gt; &gt;
&gt; &gt; $ docker run --rm -it alpine:3.11 sh
&gt; &gt; / # apk add perl
&gt; &gt; [...]
&gt; &gt; / # for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD
</div>&gt; -e
<div class="message-stanza open">&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt; &gt; module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; JSON::PP 4.02
&gt; &gt;
&gt; &gt; Am Di., 14. Jan. 2020 um 19:13 Uhr schrieb Kit Peters via RT &lt;
&gt; &gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; So if I&#39;m reading this correctly, the behaviour you&#39;re talking about is
&gt; &gt; &gt; essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as
</div>&gt; &gt; valid
<div class="message-stanza open">&gt; &gt; &gt; JSON, and the other does not, even though the Perl versions are
</div>&gt; &gt; identical.
<div class="message-stanza open">&gt; &gt; &gt; My reply will assume that to be the case.
&gt; &gt; &gt;
&gt; &gt; &gt; Perl does not natively decode/encode JSON. Instead JSON support is
</div>&gt; &gt; provided
<div class="message-stanza open">&gt; &gt; &gt; by a number of third party modules. In the case of JSON::Path, the JSON
&gt; &gt; &gt; encoder used is JSON::MaybeXS &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS">https://metacpan.org/pod/JSON::MaybeXS</a></span>
</div></div>&gt; &#41;.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; Per
&gt; &gt; &gt; the documentation, this will use Cpanel::JSON::XS if available, fall
</div></div>&gt; back
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; to JSON::XS if the former is not available, and finally fall back to
&gt; &gt; &gt; JSON::PP. So JSON on two different systems could be handled by any of
</div>&gt; &gt; these
<div class="message-stanza open">&gt; &gt; &gt; three modules. Furthermore, until the introduction of ECMA-404 in 2014,
&gt; &gt; &gt; &#34;42&#34; was *not* valid JSON. See
&gt; &gt; &gt;
</div></div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; for
&gt; &gt; &gt; more discussion on this topic.
&gt; &gt; &gt;
&gt; &gt; &gt; I&#39;m a bit surprised, though, that the system Perl on OSX is so old.
</div></div>&gt; Let&#39;s
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; investigate this further. On both systems, execute the following in
</div></div>&gt; Bash
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; and send me the results:
&gt; &gt; &gt;
&gt; &gt; &gt; for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD -e
&gt; &gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
&gt; &gt; &gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt; &gt; &gt; &gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt; &gt; &gt; &gt;        Queue: JSON-Path
&gt; &gt; &gt; &gt;      Subject: Non deterministic result for $..* on scalar value
&gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt;     Severity: &#40;no value&#41;
&gt; &gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt; &gt;   Requestors: christoph.burgmer@gmail.com
&gt; &gt; &gt; &gt;       Status: new
&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the Perl
&gt; &gt; &gt; &gt; version from
&gt; &gt; &gt; &gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt; &gt; &gt; &gt; to
&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt; &gt; &gt; &gt; and also changed the response from JSON::Path for the edge case of
</div></div></div>&gt; $..*
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; run
<div class="message-stanza open">&gt; &gt; &gt; &gt; on a document of the number 42 from an error response to the result
</div></div></div>&gt; of
<div class="message-stanza open">&gt; &gt; an
<div class="message-stanza open">&gt; &gt; &gt; &gt; empty array.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; However on OS X with the same newer Perl version the previous error
&gt; &gt; &gt; &gt; response can still be seen:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; &gt; &gt; Unable to decode 42 as JSON: malformed JSON string, neither tag,
</div></div>&gt; array,
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; object, number, string or atom, at character offset 0 &#40;before &#34;&#40;end
</div></div>&gt; of
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81, &lt;STDIN&gt;
</div>&gt; &gt; line
<div class="message-stanza open">&gt; &gt; &gt; &gt; 1.
&gt; &gt; &gt; &gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt; &gt; &gt; &gt; $ perl --version
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; &gt; &gt; darwin-thread-multi-2level
&gt; &gt; &gt; &gt; [...]
&gt; &gt; &gt; &gt; $ uname -s
&gt; &gt; &gt; &gt; Darwin
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; vs.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt; &gt; &gt; &gt; / # apk add perl
&gt; &gt; &gt; &gt; fetch
&gt; &gt; &gt; &gt;
</div></div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; fetch
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &#40;1/2
&gt; &gt; &gt; &gt; &lt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt;&#41;
&gt; &gt; &gt; &gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt; &gt; &gt; &gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt; &gt; &gt; &gt; Executing busybox-1.31.1-r8.trigger
&gt; &gt; &gt; &gt; OK: 42 MiB in 16 packages
&gt; &gt; &gt; &gt; / # cd mydir/
&gt; &gt; &gt; &gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; &gt; &gt; []
&gt; &gt; &gt; &gt; /mydir # perl --version
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; &gt; &gt; x86_64-linux-thread-multi
&gt; &gt; &gt; &gt; [...]
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; This currently makes it hard to reproduce the same results for the
&gt; &gt; &gt; &gt; json-path-comparison across the Docker and native build &#40;at least on
</div></div>&gt; OS
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; X&#41;.
<div class="message-stanza open">&gt; &gt; &gt; &gt; I would be grateful for any pointers into why the behaviour would be
&gt; &gt; &gt; &gt; different.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Script is here:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; For completeness, I&#39;m tracking this issue on the other side under
&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt; --
&gt; &gt; &gt; Kit Peters, W0KEH
&gt; &gt; &gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt; &gt; &gt; ED1D
&gt; &gt; &gt; Hello to any and all NSA, DEA, or other government or non-government
</div>&gt; &gt; agents
<div class="message-stanza open">&gt; &gt; &gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt;
</div>&gt;
&gt; --
&gt; Kit Peters, W0KEH
&gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt; ED1D
&gt; Hello to any and all NSA, DEA, or other government or non-government agents
&gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879343/1008459/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008459">with headers</a>
<br />
<span class="downloadcontenttype">text/html 12.9k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879345" href="/Public/Bug/Display.html?id=131456#txn-1879345">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;18:59:42&nbsp;2020</span>
    <span class="description">popefelix [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 14 Jan 2020 17:59:21 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kit Peters &lt;popefelix [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879345/1008462/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008462">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 9.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">No, not really. I&#39;ve got to run out, but when I get back I&#39;ll see if I can
work out a little script for you to run in both environments that might
shed some light on things.

On Tue, Jan 14, 2020, 17:57 Christoph Burgmer via RT &lt;
bug-JSON-Path@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: JSON-Path
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;
&gt; Sorry, I&#39;m not sure I&#39;m setting @INC right. I&#39;m installing the dependencies
&gt; via a custom target path
&gt;   cpanm -nL ./build JSON
&gt; and setting
&gt;   use lib qw&#40;./build/lib/perl5/&#41;;
&gt;
&gt; Not sure this helps:
&gt;
&gt; $ diff -r implementations/Perl_JSON-Path/build
&gt; implementations/Perl_JSON-Path/build_alpine
&gt; diff -r implementations/Perl_JSON-Path/build/.ninja_log
&gt; implementations/Perl_JSON-Path/build_alpine/.ninja_log
&gt; 2,3c2,3
&gt; &lt; 0 208 1579045735497619436 implementations/Perl_JSON-Path/build/cpanm
&gt; 510b975a90dcad89
&gt; &lt; 208 16364 1579045751659110162
&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt; ---
<div class="message-stanza open">&gt; &gt; 5 804 1579045273000000000 implementations/Perl_JSON-Path/build/cpanm
</div>&gt; 510b975a90dcad89
<div class="message-stanza open">&gt; &gt; 805 17022 1579045289000000000
</div>&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt; Only in implementations/Perl_JSON-Path/build: bin
&gt; Only in implementations/Perl_JSON-Path/build/lib/perl5:
&gt; darwin-thread-multi-2level
&gt; Only in implementations/Perl_JSON-Path/build_alpine/lib/perl5:
&gt; x86_64-linux-thread-multi
&gt; $ ls implementations/Perl_JSON-Path/build/bin
&gt; cpanel_json_xs
&gt;
&gt;
&gt;
&gt; Am Mi., 15. Jan. 2020 um 00:40 Uhr schrieb Kit Peters via RT &lt;
&gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt;
&gt; &gt; Curiouser and curiouser... &#40;i.e. &#34;Das war unerwartet&#34;&#41;  Both systems are
&gt; &gt; using the same version of JSON::PP. I can&#39;t imagine why one system would
&gt; &gt; treat &#34;42&#34; as valid and another would not; it should be the same code on
&gt; &gt; both.
&gt; &gt;
&gt; &gt; On Tue, Jan 14, 2020 at 5:28 PM Christoph Burgmer via RT &lt;
&gt; &gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt;        Queue: JSON-Path
&gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Thanks, I did not know about the different standards of JSON. That
</div>&gt; &gt; explains
<div class="message-stanza open">&gt; &gt; &gt; the recent painful experience with Objective C.
&gt; &gt; &gt;
&gt; &gt; &gt; Output for your query on OS X:
&gt; &gt; &gt;
&gt; &gt; &gt; $ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD
</div></div>&gt; -e
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; &gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt; &gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains:
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt; &gt; &gt;
</div></div>&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt; &gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; &gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt; &gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt; &gt; &gt; module&#41; &#40;@INC contains:
&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt; &gt; &gt;
</div></div>&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt; &gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt; &gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt; &gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; &gt; JSON::PP 4.02
&gt; &gt; &gt;
&gt; &gt; &gt; Alpine
&gt; &gt; &gt;
&gt; &gt; &gt; $ docker run --rm -it alpine:3.11 sh
&gt; &gt; &gt; / # apk add perl
&gt; &gt; &gt; [...]
&gt; &gt; &gt; / # for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl
</div></div>&gt; -M$MOD
<div class="message-stanza open">&gt; &gt; -e
<div class="message-stanza open">&gt; &gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; &gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt; &gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt; &gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt; &gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt; &gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt; &gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt; &gt; &gt; module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt; &gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt; &gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt; &gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt; &gt; &gt; BEGIN failed--compilation aborted.
&gt; &gt; &gt; JSON::PP 4.02
&gt; &gt; &gt;
&gt; &gt; &gt; Am Di., 14. Jan. 2020 um 19:13 Uhr schrieb Kit Peters via RT &lt;
&gt; &gt; &gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; So if I&#39;m reading this correctly, the behaviour you&#39;re talking about
</div></div></div>&gt; is
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as
</div>&gt; &gt; &gt; valid
<div class="message-stanza open">&gt; &gt; &gt; &gt; JSON, and the other does not, even though the Perl versions are
</div>&gt; &gt; &gt; identical.
<div class="message-stanza open">&gt; &gt; &gt; &gt; My reply will assume that to be the case.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Perl does not natively decode/encode JSON. Instead JSON support is
</div>&gt; &gt; &gt; provided
<div class="message-stanza open">&gt; &gt; &gt; &gt; by a number of third party modules. In the case of JSON::Path, the
</div></div></div>&gt; JSON
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; encoder used is JSON::MaybeXS &#40;
</div></div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS">https://metacpan.org/pod/JSON::MaybeXS</a></span>
<div class="message-stanza open">&gt; &gt; &#41;.
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; Per
&gt; &gt; &gt; &gt; the documentation, this will use Cpanel::JSON::XS if available, fall
</div></div>&gt; &gt; back
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; to JSON::XS if the former is not available, and finally fall back to
&gt; &gt; &gt; &gt; JSON::PP. So JSON on two different systems could be handled by any of
</div>&gt; &gt; &gt; these
<div class="message-stanza open">&gt; &gt; &gt; &gt; three modules. Furthermore, until the introduction of ECMA-404 in
</div></div></div>&gt; 2014,
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &#34;42&#34; was *not* valid JSON. See
&gt; &gt; &gt; &gt;
</div>&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span>
<div class="message-stanza open">&gt; &gt; &gt; &gt; for
&gt; &gt; &gt; &gt; more discussion on this topic.
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; I&#39;m a bit surprised, though, that the system Perl on OSX is so old.
</div>&gt; &gt; Let&#39;s
<div class="message-stanza open">&gt; &gt; &gt; &gt; investigate this further. On both systems, execute the following in
</div>&gt; &gt; Bash
<div class="message-stanza open">&gt; &gt; &gt; &gt; and send me the results:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD
</div></div>&gt; -e
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
&gt; &gt; &gt; &gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt; &gt; &gt; &gt;
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt; &gt; &gt; &gt; &gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt; &gt; &gt; &gt; &gt;        Queue: JSON-Path
&gt; &gt; &gt; &gt; &gt;      Subject: Non deterministic result for $..* on scalar value
&gt; &gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt; &gt; &gt; &gt; &gt;     Severity: &#40;no value&#41;
&gt; &gt; &gt; &gt; &gt;        Owner: Nobody
&gt; &gt; &gt; &gt; &gt;   Requestors: christoph.burgmer@gmail.com
&gt; &gt; &gt; &gt; &gt;       Status: new
&gt; &gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the
</div></div></div>&gt; Perl
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; version from
&gt; &gt; &gt; &gt; &gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt; &gt; &gt; &gt; &gt; to
&gt; &gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt; &gt; &gt; &gt; &gt; and also changed the response from JSON::Path for the edge case of
</div></div>&gt; &gt; $..*
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; run
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; on a document of the number 42 from an error response to the result
</div></div></div>&gt; &gt; of
<div class="message-stanza open">&gt; &gt; &gt; an
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; empty array.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; However on OS X with the same newer Perl version the previous error
&gt; &gt; &gt; &gt; &gt; response can still be seen:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; &gt; &gt; &gt; Unable to decode 42 as JSON: malformed JSON string, neither tag,
</div></div>&gt; &gt; array,
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; object, number, string or atom, at character offset 0 &#40;before &#34;&#40;end
</div>&gt; &gt; of
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81,
</div></div>&gt; &lt;STDIN&gt;
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; line
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; 1.
&gt; &gt; &gt; &gt; &gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt; &gt; &gt; &gt; &gt; $ perl --version
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; &gt; &gt; &gt; darwin-thread-multi-2level
&gt; &gt; &gt; &gt; &gt; [...]
&gt; &gt; &gt; &gt; &gt; $ uname -s
&gt; &gt; &gt; &gt; &gt; Darwin
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; vs.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt; &gt; &gt; &gt; &gt; / # apk add perl
&gt; &gt; &gt; &gt; &gt; fetch
&gt; &gt; &gt; &gt; &gt;
</div></div>&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; fetch
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; &#40;1/2
&gt; &gt; &gt; &gt; &gt; &lt;
</div>&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;&#41;
&gt; &gt; &gt; &gt; &gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt; &gt; &gt; &gt; &gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt; &gt; &gt; &gt; &gt; Executing busybox-1.31.1-r8.trigger
&gt; &gt; &gt; &gt; &gt; OK: 42 MiB in 16 packages
&gt; &gt; &gt; &gt; &gt; / # cd mydir/
&gt; &gt; &gt; &gt; &gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt; &gt; &gt; &gt; &gt; []
&gt; &gt; &gt; &gt; &gt; /mydir # perl --version
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt; &gt; &gt; &gt; &gt; x86_64-linux-thread-multi
&gt; &gt; &gt; &gt; &gt; [...]
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; This currently makes it hard to reproduce the same results for the
&gt; &gt; &gt; &gt; &gt; json-path-comparison across the Docker and native build &#40;at least
</div></div>&gt; on
<div class="message-stanza open">&gt; &gt; OS
<div class="message-stanza open">&gt; &gt; &gt; &gt; X&#41;.
<div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; I would be grateful for any pointers into why the behaviour would
</div></div></div>&gt; be
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt; different.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; Script is here:
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
</div>&gt; &gt;
</div>&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt; For completeness, I&#39;m tracking this issue on the other side under
&gt; &gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt; &gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; --
&gt; &gt; &gt; &gt; Kit Peters, W0KEH
&gt; &gt; &gt; &gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74
</div></div>&gt; 7F56
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt; ED1D
&gt; &gt; &gt; &gt; Hello to any and all NSA, DEA, or other government or non-government
</div>&gt; &gt; &gt; agents
<div class="message-stanza open">&gt; &gt; &gt; &gt; reading this email.  Tell me about your life; I&#39;ll tell you about
</div></div></div>&gt; mine.
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
</div>&gt; &gt; &gt;
&gt; &gt; &gt;
</div>&gt; &gt;
&gt; &gt; --
&gt; &gt; Kit Peters, W0KEH
&gt; &gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt; &gt; ED1D
&gt; &gt; Hello to any and all NSA, DEA, or other government or non-government
</div>&gt; agents
<div class="message-stanza open">&gt; &gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt; &gt;
&gt; &gt;
</div>&gt;
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879345/1008463/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008463">with headers</a>
<br />
<span class="downloadcontenttype">text/html 14.9k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879348" href="/Public/Bug/Display.html?id=131456#txn-1879348">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;19:03:48&nbsp;2020</span>
    <span class="description">christoph.burgmer [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Jan 2020 01:03:27 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christoph Burgmer &lt;christoph.burgmer [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879348/1008467/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008467">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 11.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Got it right this time.

OS X

$ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -I
./build/lib/perl5/ -M$MOD -e &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
Cpanel::JSON::XS 4.18
Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
module&#41; &#40;@INC contains: ./build/lib/perl5//darwin-thread-multi-2level
./build/lib/perl5/
/usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
/usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
/usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
/usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
/usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
/usr/local/lib/perl5/site_perl/5.30.1&#41;.
BEGIN failed--compilation aborted.
JSON::PP 4.02

Alpine:

$ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -I
./build/lib/perl5/ -M$MOD -e &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
Cpanel::JSON::XS module&#41; &#40;@INC contains: ./build/lib/perl5/
/usr/local/lib/perl5/site_perl /usr/local/share/perl5/site_perl
/usr/lib/perl5/vendor_perl /usr/share/perl5/vendor_perl
/usr/lib/perl5/core_perl /usr/share/perl5/core_perl&#41;.
BEGIN failed--compilation aborted.
Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
module&#41; &#40;@INC contains: ./build/lib/perl5/ /usr/local/lib/perl5/site_perl
/usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
/usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
/usr/share/perl5/core_perl&#41;.
BEGIN failed--compilation aborted.
JSON::PP 4.02

So the &#34;more correct&#34; solution is only the fallback? Can/should I change
this?
I tried forcing Cpanel::JSON::XS on Alpine and it fails missing header
files.

Am Mi., 15. Jan. 2020 um 00:56 Uhr schrieb Christoph Burgmer &lt;
christoph.burgmer@gmail.com&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Sorry, I&#39;m not sure I&#39;m setting @INC right. I&#39;m installing the
&gt; dependencies via a custom target path
&gt;   cpanm -nL ./build JSON
&gt; and setting
&gt;   use lib qw&#40;./build/lib/perl5/&#41;;
&gt;
&gt; Not sure this helps:
&gt;
&gt; $ diff -r implementations/Perl_JSON-Path/build
&gt; implementations/Perl_JSON-Path/build_alpine
&gt; diff -r implementations/Perl_JSON-Path/build/.ninja_log
&gt; implementations/Perl_JSON-Path/build_alpine/.ninja_log
&gt; 2,3c2,3
&gt; &lt; 0 208 1579045735497619436 implementations/Perl_JSON-Path/build/cpanm
&gt; 510b975a90dcad89
&gt; &lt; 208 16364 1579045751659110162
&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt; ---
<div class="message-stanza open">&gt; &gt; 5 804 1579045273000000000 implementations/Perl_JSON-Path/build/cpanm
</div>&gt; 510b975a90dcad89
<div class="message-stanza open">&gt; &gt; 805 17022 1579045289000000000
</div>&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt; Only in implementations/Perl_JSON-Path/build: bin
&gt; Only in implementations/Perl_JSON-Path/build/lib/perl5:
&gt; darwin-thread-multi-2level
&gt; Only in implementations/Perl_JSON-Path/build_alpine/lib/perl5:
&gt; x86_64-linux-thread-multi
&gt; $ ls implementations/Perl_JSON-Path/build/bin
&gt; cpanel_json_xs
&gt;
&gt;
&gt;
&gt; Am Mi., 15. Jan. 2020 um 00:40 Uhr schrieb Kit Peters via RT &lt;
&gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;
<div class="message-stanza open">&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;
&gt;&gt; Curiouser and curiouser... &#40;i.e. &#34;Das war unerwartet&#34;&#41;  Both systems are
&gt;&gt; using the same version of JSON::PP. I can&#39;t imagine why one system would
&gt;&gt; treat &#34;42&#34; as valid and another would not; it should be the same code on
&gt;&gt; both.
&gt;&gt;
&gt;&gt; On Tue, Jan 14, 2020 at 5:28 PM Christoph Burgmer via RT &lt;
&gt;&gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;&gt;
<div class="message-stanza open">&gt;&gt; &gt;        Queue: JSON-Path
&gt;&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt; &gt;
&gt;&gt; &gt; Thanks, I did not know about the different standards of JSON. That
</div>&gt;&gt; explains
<div class="message-stanza open">&gt;&gt; &gt; the recent painful experience with Objective C.
&gt;&gt; &gt;
&gt;&gt; &gt; Output for your query on OS X:
&gt;&gt; &gt;
&gt;&gt; &gt; $ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD
</div>&gt;&gt; -e
<div class="message-stanza open">&gt;&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt;&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains:
&gt;&gt; &gt;
&gt;&gt; &gt;
</div>&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt;&gt; &gt;
</div>&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt;&gt; &gt; module&#41; &#40;@INC contains:
&gt;&gt; &gt;
&gt;&gt; &gt;
</div>&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt;&gt; &gt;
</div>&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt; &gt; JSON::PP 4.02
&gt;&gt; &gt;
&gt;&gt; &gt; Alpine
&gt;&gt; &gt;
&gt;&gt; &gt; $ docker run --rm -it alpine:3.11 sh
&gt;&gt; &gt; / # apk add perl
&gt;&gt; &gt; [...]
&gt;&gt; &gt; / # for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl
</div>&gt;&gt; -M$MOD -e
<div class="message-stanza open">&gt;&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt;&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt;&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt;&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt;&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt;&gt; &gt; module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt;&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt;&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt;&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt; &gt; JSON::PP 4.02
&gt;&gt; &gt;
&gt;&gt; &gt; Am Di., 14. Jan. 2020 um 19:13 Uhr schrieb Kit Peters via RT &lt;
&gt;&gt; &gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;&gt; &gt;
<div class="message-stanza open">&gt;&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; So if I&#39;m reading this correctly, the behaviour you&#39;re talking about
</div></div>&gt;&gt; is
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as
</div>&gt;&gt; &gt; valid
<div class="message-stanza open">&gt;&gt; &gt; &gt; JSON, and the other does not, even though the Perl versions are
</div>&gt;&gt; &gt; identical.
<div class="message-stanza open">&gt;&gt; &gt; &gt; My reply will assume that to be the case.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; Perl does not natively decode/encode JSON. Instead JSON support is
</div>&gt;&gt; &gt; provided
<div class="message-stanza open">&gt;&gt; &gt; &gt; by a number of third party modules. In the case of JSON::Path, the
</div></div>&gt;&gt; JSON
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; encoder used is JSON::MaybeXS &#40;<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS">https://metacpan.org/pod/JSON::MaybeXS</a></span>
</div></div>&gt;&gt; &#41;.
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; Per
&gt;&gt; &gt; &gt; the documentation, this will use Cpanel::JSON::XS if available, fall
</div></div>&gt;&gt; back
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; to JSON::XS if the former is not available, and finally fall back to
&gt;&gt; &gt; &gt; JSON::PP. So JSON on two different systems could be handled by any of
</div>&gt;&gt; &gt; these
<div class="message-stanza open">&gt;&gt; &gt; &gt; three modules. Furthermore, until the introduction of ECMA-404 in
</div></div>&gt;&gt; 2014,
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &#34;42&#34; was *not* valid JSON. See
&gt;&gt; &gt; &gt;
</div></div>&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; for
&gt;&gt; &gt; &gt; more discussion on this topic.
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; I&#39;m a bit surprised, though, that the system Perl on OSX is so old.
</div></div>&gt;&gt; Let&#39;s
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; investigate this further. On both systems, execute the following in
</div></div>&gt;&gt; Bash
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; and send me the results:
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD
</div></div>&gt;&gt; -e
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
&gt;&gt; &gt; &gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;&gt; &gt; &gt;
<div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt;&gt; &gt; &gt; &gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt;&gt; &gt; &gt; &gt;        Queue: JSON-Path
&gt;&gt; &gt; &gt; &gt;      Subject: Non deterministic result for $..* on scalar value
&gt;&gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt;&gt; &gt; &gt; &gt;     Severity: &#40;no value&#41;
&gt;&gt; &gt; &gt; &gt;        Owner: Nobody
&gt;&gt; &gt; &gt; &gt;   Requestors: christoph.burgmer@gmail.com
&gt;&gt; &gt; &gt; &gt;       Status: new
&gt;&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the Perl
&gt;&gt; &gt; &gt; &gt; version from
&gt;&gt; &gt; &gt; &gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt;&gt; &gt; &gt; &gt; to
&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt;&gt; &gt; &gt; &gt; and also changed the response from JSON::Path for the edge case of
</div></div></div>&gt;&gt; $..*
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; run
<div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; on a document of the number 42 from an error response to the result
</div></div></div>&gt;&gt; of
<div class="message-stanza open">&gt;&gt; &gt; an
<div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; empty array.
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; However on OS X with the same newer Perl version the previous error
&gt;&gt; &gt; &gt; &gt; response can still be seen:
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt;&gt; &gt; &gt; &gt; Unable to decode 42 as JSON: malformed JSON string, neither tag,
</div></div>&gt;&gt; array,
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; object, number, string or atom, at character offset 0 &#40;before &#34;&#40;end
</div></div>&gt;&gt; of
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81, &lt;STDIN&gt;
</div>&gt;&gt; &gt; line
<div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; 1.
&gt;&gt; &gt; &gt; &gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt;&gt; &gt; &gt; &gt; $ perl --version
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt;&gt; &gt; &gt; &gt; darwin-thread-multi-2level
&gt;&gt; &gt; &gt; &gt; [...]
&gt;&gt; &gt; &gt; &gt; $ uname -s
&gt;&gt; &gt; &gt; &gt; Darwin
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; vs.
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt;&gt; &gt; &gt; &gt; / # apk add perl
&gt;&gt; &gt; &gt; &gt; fetch
&gt;&gt; &gt; &gt; &gt;
</div></div>&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; fetch
&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt; &gt; &gt;
</div>&gt;&gt; &gt;
</div>&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; &#40;1/2
&gt;&gt; &gt; &gt; &gt; &lt;
</div>&gt;&gt; &gt; &gt;
</div>&gt;&gt; &gt;
</div>&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &gt;&#41;
&gt;&gt; &gt; &gt; &gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt;&gt; &gt; &gt; &gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt;&gt; &gt; &gt; &gt; Executing busybox-1.31.1-r8.trigger
&gt;&gt; &gt; &gt; &gt; OK: 42 MiB in 16 packages
&gt;&gt; &gt; &gt; &gt; / # cd mydir/
&gt;&gt; &gt; &gt; &gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt;&gt; &gt; &gt; &gt; []
&gt;&gt; &gt; &gt; &gt; /mydir # perl --version
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt;&gt; &gt; &gt; &gt; x86_64-linux-thread-multi
&gt;&gt; &gt; &gt; &gt; [...]
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; This currently makes it hard to reproduce the same results for the
&gt;&gt; &gt; &gt; &gt; json-path-comparison across the Docker and native build &#40;at least
</div></div>&gt;&gt; on OS
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; X&#41;.
<div class="message-stanza open">&gt;&gt; &gt; &gt; &gt; I would be grateful for any pointers into why the behaviour would be
&gt;&gt; &gt; &gt; &gt; different.
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; Script is here:
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt; &gt; &gt;
</div>&gt;&gt; &gt;
</div>&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt; For completeness, I&#39;m tracking this issue on the other side under
&gt;&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt;&gt; &gt; &gt; &gt;
&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt; --
&gt;&gt; &gt; &gt; Kit Peters, W0KEH
&gt;&gt; &gt; &gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74
</div></div>&gt;&gt; 7F56
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt; ED1D
&gt;&gt; &gt; &gt; Hello to any and all NSA, DEA, or other government or non-government
</div>&gt;&gt; &gt; agents
<div class="message-stanza open">&gt;&gt; &gt; &gt; reading this email.  Tell me about your life; I&#39;ll tell you about
</div></div>&gt;&gt; mine.
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt; &gt; &gt;
&gt;&gt; &gt; &gt;
</div>&gt;&gt; &gt;
&gt;&gt; &gt;
</div>&gt;&gt;
&gt;&gt; --
&gt;&gt; Kit Peters, W0KEH
&gt;&gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt;&gt; ED1D
&gt;&gt; Hello to any and all NSA, DEA, or other government or non-government
&gt;&gt; agents
&gt;&gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt;&gt;
&gt;&gt;
</div></div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879348/1008468/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008468">with headers</a>
<br />
<span class="downloadcontenttype">text/html 15.3k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879350" href="/Public/Bug/Display.html?id=131456#txn-1879350">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jan&nbsp;14&nbsp;19:09:10&nbsp;2020</span>
    <span class="description">christoph.burgmer [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 15 Jan 2020 01:08:49 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christoph Burgmer &lt;christoph.burgmer [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879350/1008471/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008471">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 10.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tried forcing Cpanel::JSON::XS on Alpine and it fails missing header
&gt; files.
&gt;
</div>
To answer at least one of my own questions: Adding perl-dev as a dependency
to Alpine aligns the installations on the Cpanel::JSON::XS and makes
JSON-Path fail similarly on both.
Thanks for calling the underlying issue out.

Obviously I&#39;d prefer showcasing the proper response from JSON-Path on this,
so this is only one step better. Let me know if I have options here please.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Am Mi., 15. Jan. 2020 um 00:56 Uhr schrieb Christoph Burgmer &lt;
&gt; christoph.burgmer@gmail.com&gt;:
&gt;
<div class="message-stanza open">&gt;&gt; Sorry, I&#39;m not sure I&#39;m setting @INC right. I&#39;m installing the
&gt;&gt; dependencies via a custom target path
&gt;&gt;   cpanm -nL ./build JSON
&gt;&gt; and setting
&gt;&gt;   use lib qw&#40;./build/lib/perl5/&#41;;
&gt;&gt;
&gt;&gt; Not sure this helps:
&gt;&gt;
&gt;&gt; $ diff -r implementations/Perl_JSON-Path/build
&gt;&gt; implementations/Perl_JSON-Path/build_alpine
&gt;&gt; diff -r implementations/Perl_JSON-Path/build/.ninja_log
&gt;&gt; implementations/Perl_JSON-Path/build_alpine/.ninja_log
&gt;&gt; 2,3c2,3
&gt;&gt; &lt; 0 208 1579045735497619436 implementations/Perl_JSON-Path/build/cpanm
&gt;&gt; 510b975a90dcad89
&gt;&gt; &lt; 208 16364 1579045751659110162
&gt;&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt;&gt; ---
<div class="message-stanza open">&gt;&gt; &gt; 5 804 1579045273000000000 implementations/Perl_JSON-Path/build/cpanm
</div>&gt;&gt; 510b975a90dcad89
<div class="message-stanza open">&gt;&gt; &gt; 805 17022 1579045289000000000
</div>&gt;&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt;&gt; Only in implementations/Perl_JSON-Path/build: bin
&gt;&gt; Only in implementations/Perl_JSON-Path/build/lib/perl5:
&gt;&gt; darwin-thread-multi-2level
&gt;&gt; Only in implementations/Perl_JSON-Path/build_alpine/lib/perl5:
&gt;&gt; x86_64-linux-thread-multi
&gt;&gt; $ ls implementations/Perl_JSON-Path/build/bin
&gt;&gt; cpanel_json_xs
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Am Mi., 15. Jan. 2020 um 00:40 Uhr schrieb Kit Peters via RT &lt;
&gt;&gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Curiouser and curiouser... &#40;i.e. &#34;Das war unerwartet&#34;&#41;  Both systems are
&gt;&gt;&gt; using the same version of JSON::PP. I can&#39;t imagine why one system would
&gt;&gt;&gt; treat &#34;42&#34; as valid and another would not; it should be the same code on
&gt;&gt;&gt; both.
&gt;&gt;&gt;
&gt;&gt;&gt; On Tue, Jan 14, 2020 at 5:28 PM Christoph Burgmer via RT &lt;
&gt;&gt;&gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; &gt;        Queue: JSON-Path
&gt;&gt;&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Thanks, I did not know about the different standards of JSON. That
</div>&gt;&gt;&gt; explains
<div class="message-stanza open">&gt;&gt;&gt; &gt; the recent painful experience with Objective C.
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Output for your query on OS X:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; $ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD
</div>&gt;&gt;&gt; -e
<div class="message-stanza open">&gt;&gt;&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt;&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt;&gt;&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt;&gt;&gt; &gt; module&#41; &#40;@INC contains:
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt; &gt; JSON::PP 4.02
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Alpine
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; $ docker run --rm -it alpine:3.11 sh
&gt;&gt;&gt; &gt; / # apk add perl
&gt;&gt;&gt; &gt; [...]
&gt;&gt;&gt; &gt; / # for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl
</div>&gt;&gt;&gt; -M$MOD -e
<div class="message-stanza open">&gt;&gt;&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt;&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt;&gt;&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt;&gt;&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt;&gt;&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt;&gt;&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt;&gt;&gt; &gt; module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt;&gt;&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt;&gt;&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt;&gt;&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt; &gt; JSON::PP 4.02
&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt; Am Di., 14. Jan. 2020 um 19:13 Uhr schrieb Kit Peters via RT &lt;
&gt;&gt;&gt; &gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;&gt;&gt; &gt;
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; So if I&#39;m reading this correctly, the behaviour you&#39;re talking about
</div></div>&gt;&gt;&gt; is
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as
</div>&gt;&gt;&gt; &gt; valid
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; JSON, and the other does not, even though the Perl versions are
</div>&gt;&gt;&gt; &gt; identical.
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; My reply will assume that to be the case.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; Perl does not natively decode/encode JSON. Instead JSON support is
</div>&gt;&gt;&gt; &gt; provided
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; by a number of third party modules. In the case of JSON::Path, the
</div></div>&gt;&gt;&gt; JSON
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; encoder used is JSON::MaybeXS &#40;
</div></div>&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS&#41;">https://metacpan.org/pod/JSON::MaybeXS&#41;</a></span>.
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; Per
&gt;&gt;&gt; &gt; &gt; the documentation, this will use Cpanel::JSON::XS if available, fall
</div></div>&gt;&gt;&gt; back
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; to JSON::XS if the former is not available, and finally fall back to
&gt;&gt;&gt; &gt; &gt; JSON::PP. So JSON on two different systems could be handled by any of
</div>&gt;&gt;&gt; &gt; these
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; three modules. Furthermore, until the introduction of ECMA-404 in
</div></div>&gt;&gt;&gt; 2014,
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &#34;42&#34; was *not* valid JSON. See
&gt;&gt;&gt; &gt; &gt;
</div></div>&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; for
&gt;&gt;&gt; &gt; &gt; more discussion on this topic.
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; I&#39;m a bit surprised, though, that the system Perl on OSX is so old.
</div></div>&gt;&gt;&gt; Let&#39;s
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; investigate this further. On both systems, execute the following in
</div></div>&gt;&gt;&gt; Bash
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; and send me the results:
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl -M$MOD
</div></div>&gt;&gt;&gt; -e
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
&gt;&gt;&gt; &gt; &gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;&gt;&gt; &gt; &gt;
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt;&gt;&gt; &gt; &gt; &gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt;&gt;&gt; &gt; &gt; &gt;        Queue: JSON-Path
&gt;&gt;&gt; &gt; &gt; &gt;      Subject: Non deterministic result for $..* on scalar value
&gt;&gt;&gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt;&gt;&gt; &gt; &gt; &gt;     Severity: &#40;no value&#41;
&gt;&gt;&gt; &gt; &gt; &gt;        Owner: Nobody
&gt;&gt;&gt; &gt; &gt; &gt;   Requestors: christoph.burgmer@gmail.com
&gt;&gt;&gt; &gt; &gt; &gt;       Status: new
&gt;&gt;&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the
</div></div></div>&gt;&gt;&gt; Perl
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; version from
&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt;&gt;&gt; &gt; &gt; &gt; to
&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt;&gt;&gt; &gt; &gt; &gt; and also changed the response from JSON::Path for the edge case of
</div></div>&gt;&gt;&gt; $..*
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; run
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; on a document of the number 42 from an error response to the
</div></div></div>&gt;&gt;&gt; result of
<div class="message-stanza open">&gt;&gt;&gt; &gt; an
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; empty array.
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; However on OS X with the same newer Perl version the previous error
&gt;&gt;&gt; &gt; &gt; &gt; response can still be seen:
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt;&gt;&gt; &gt; &gt; &gt; Unable to decode 42 as JSON: malformed JSON string, neither tag,
</div></div>&gt;&gt;&gt; array,
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; object, number, string or atom, at character offset 0 &#40;before
</div></div>&gt;&gt;&gt; &#34;&#40;end of
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81,
</div></div>&gt;&gt;&gt; &lt;STDIN&gt;
<div class="message-stanza open">&gt;&gt;&gt; &gt; line
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; 1.
&gt;&gt;&gt; &gt; &gt; &gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt;&gt;&gt; &gt; &gt; &gt; $ perl --version
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt;&gt;&gt; &gt; &gt; &gt; darwin-thread-multi-2level
&gt;&gt;&gt; &gt; &gt; &gt; [...]
&gt;&gt;&gt; &gt; &gt; &gt; $ uname -s
&gt;&gt;&gt; &gt; &gt; &gt; Darwin
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; vs.
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt;&gt;&gt; &gt; &gt; &gt; / # apk add perl
&gt;&gt;&gt; &gt; &gt; &gt; fetch
&gt;&gt;&gt; &gt; &gt; &gt;
</div></div>&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; fetch
&gt;&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; &#40;1/2
&gt;&gt;&gt; &gt; &gt; &gt; &lt;
</div>&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt;&#41;
&gt;&gt;&gt; &gt; &gt; &gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt;&gt;&gt; &gt; &gt; &gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt;&gt;&gt; &gt; &gt; &gt; Executing busybox-1.31.1-r8.trigger
&gt;&gt;&gt; &gt; &gt; &gt; OK: 42 MiB in 16 packages
&gt;&gt;&gt; &gt; &gt; &gt; / # cd mydir/
&gt;&gt;&gt; &gt; &gt; &gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt;&gt;&gt; &gt; &gt; &gt; []
&gt;&gt;&gt; &gt; &gt; &gt; /mydir # perl --version
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt;&gt;&gt; &gt; &gt; &gt; x86_64-linux-thread-multi
&gt;&gt;&gt; &gt; &gt; &gt; [...]
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; This currently makes it hard to reproduce the same results for the
&gt;&gt;&gt; &gt; &gt; &gt; json-path-comparison across the Docker and native build &#40;at least
</div></div>&gt;&gt;&gt; on OS
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; X&#41;.
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; I would be grateful for any pointers into why the behaviour would
</div></div></div>&gt;&gt;&gt; be
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt; different.
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; Script is here:
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt; For completeness, I&#39;m tracking this issue on the other side under
&gt;&gt;&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt; --
&gt;&gt;&gt; &gt; &gt; Kit Peters, W0KEH
&gt;&gt;&gt; &gt; &gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74
</div></div>&gt;&gt;&gt; 7F56
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; ED1D
&gt;&gt;&gt; &gt; &gt; Hello to any and all NSA, DEA, or other government or non-government
</div>&gt;&gt;&gt; &gt; agents
<div class="message-stanza open">&gt;&gt;&gt; &gt; &gt; reading this email.  Tell me about your life; I&#39;ll tell you about
</div></div>&gt;&gt;&gt; mine.
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt; &gt;
&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Kit Peters, W0KEH
&gt;&gt;&gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt;&gt;&gt; ED1D
&gt;&gt;&gt; Hello to any and all NSA, DEA, or other government or non-government
&gt;&gt;&gt; agents
&gt;&gt;&gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt;&gt;&gt;
&gt;&gt;&gt;
</div></div></div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879350/1008472/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008472">with headers</a>
<br />
<span class="downloadcontenttype">text/html 14.2k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879795" href="/Public/Bug/Display.html?id=131456#txn-1879795">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;16&nbsp;14:04:55&nbsp;2020</span>
    <span class="description">christoph.burgmer [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 16 Jan 2020 20:04:31 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Christoph Burgmer &lt;christoph.burgmer [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879795/1008729/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008729">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 11k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found a way to fix JSON:PP for now &#40;cpanm --pureperl&#41;, and get a stable
and non-error response across the different environments.

I&#39;m still not sure what&#39;s really going on here, particularly why another
json decoding is happening inside the library at this stage, but I&#39;ll leave
it to you to judge whether to continue to track this issue here.
For me the &#34;non-determinisim&#34; is now solved.

Thanks for your support!

Am Mi., 15. Jan. 2020 um 01:08 Uhr schrieb Christoph Burgmer &lt;
christoph.burgmer@gmail.com&gt;:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;
<div class="message-stanza open">&gt;&gt; I tried forcing Cpanel::JSON::XS on Alpine and it fails missing header
&gt;&gt; files.
&gt;&gt;
</div>&gt;
&gt; To answer at least one of my own questions: Adding perl-dev as a
&gt; dependency to Alpine aligns the installations on the Cpanel::JSON::XS and
&gt; makes JSON-Path fail similarly on both.
&gt; Thanks for calling the underlying issue out.
&gt;
&gt; Obviously I&#39;d prefer showcasing the proper response from JSON-Path on
&gt; this, so this is only one step better. Let me know if I have options here
&gt; please.
&gt;
&gt;
&gt;
<div class="message-stanza open">&gt;&gt;
&gt;&gt; Am Mi., 15. Jan. 2020 um 00:56 Uhr schrieb Christoph Burgmer &lt;
&gt;&gt; christoph.burgmer@gmail.com&gt;:
&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt; Sorry, I&#39;m not sure I&#39;m setting @INC right. I&#39;m installing the
&gt;&gt;&gt; dependencies via a custom target path
&gt;&gt;&gt;   cpanm -nL ./build JSON
&gt;&gt;&gt; and setting
&gt;&gt;&gt;   use lib qw&#40;./build/lib/perl5/&#41;;
&gt;&gt;&gt;
&gt;&gt;&gt; Not sure this helps:
&gt;&gt;&gt;
&gt;&gt;&gt; $ diff -r implementations/Perl_JSON-Path/build
&gt;&gt;&gt; implementations/Perl_JSON-Path/build_alpine
&gt;&gt;&gt; diff -r implementations/Perl_JSON-Path/build/.ninja_log
&gt;&gt;&gt; implementations/Perl_JSON-Path/build_alpine/.ninja_log
&gt;&gt;&gt; 2,3c2,3
&gt;&gt;&gt; &lt; 0 208 1579045735497619436 implementations/Perl_JSON-Path/build/cpanm
&gt;&gt;&gt; 510b975a90dcad89
&gt;&gt;&gt; &lt; 208 16364 1579045751659110162
&gt;&gt;&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt;&gt;&gt; ---
<div class="message-stanza open">&gt;&gt;&gt; &gt; 5 804 1579045273000000000 implementations/Perl_JSON-Path/build/cpanm
</div>&gt;&gt;&gt; 510b975a90dcad89
<div class="message-stanza open">&gt;&gt;&gt; &gt; 805 17022 1579045289000000000
</div>&gt;&gt;&gt; implementations/Perl_JSON-Path/build/cpan_installed 525f0d1d995f1bc2
&gt;&gt;&gt; Only in implementations/Perl_JSON-Path/build: bin
&gt;&gt;&gt; Only in implementations/Perl_JSON-Path/build/lib/perl5:
&gt;&gt;&gt; darwin-thread-multi-2level
&gt;&gt;&gt; Only in implementations/Perl_JSON-Path/build_alpine/lib/perl5:
&gt;&gt;&gt; x86_64-linux-thread-multi
&gt;&gt;&gt; $ ls implementations/Perl_JSON-Path/build/bin
&gt;&gt;&gt; cpanel_json_xs
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Am Mi., 15. Jan. 2020 um 00:40 Uhr schrieb Kit Peters via RT &lt;
&gt;&gt;&gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Curiouser and curiouser... &#40;i.e. &#34;Das war unerwartet&#34;&#41;  Both systems are
&gt;&gt;&gt;&gt; using the same version of JSON::PP. I can&#39;t imagine why one system would
&gt;&gt;&gt;&gt; treat &#34;42&#34; as valid and another would not; it should be the same code on
&gt;&gt;&gt;&gt; both.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; On Tue, Jan 14, 2020 at 5:28 PM Christoph Burgmer via RT &lt;
&gt;&gt;&gt;&gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt;        Queue: JSON-Path
&gt;&gt;&gt;&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Thanks, I did not know about the different standards of JSON. That
</div>&gt;&gt;&gt;&gt; explains
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; the recent painful experience with Objective C.
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Output for your query on OS X:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; $ for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl
</div>&gt;&gt;&gt;&gt; -M$MOD -e
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt;&gt;&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt;&gt;&gt;&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt;&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt;&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt;&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt;&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt;&gt;&gt;&gt; &gt; module&#41; &#40;@INC contains:
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/site_perl/5.30.1
&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1/darwin-thread-multi-2level
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; /usr/local/Cellar/perl/5.30.1/lib/perl5/5.30.1
&gt;&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1/darwin-thread-multi-2level
&gt;&gt;&gt;&gt; &gt; /usr/local/lib/perl5/site_perl/5.30.1&#41;.
&gt;&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt;&gt; &gt; JSON::PP 4.02
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Alpine
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; $ docker run --rm -it alpine:3.11 sh
&gt;&gt;&gt;&gt; &gt; / # apk add perl
&gt;&gt;&gt;&gt; &gt; [...]
&gt;&gt;&gt;&gt; &gt; / # for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl
</div>&gt;&gt;&gt;&gt; -M$MOD -e
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt;&gt;&gt; &gt; Can&#39;t locate Cpanel/JSON/XS.pm in @INC &#40;you may need to install the
&gt;&gt;&gt;&gt; &gt; Cpanel::JSON::XS module&#41; &#40;@INC contains:
</div>&gt;&gt;&gt;&gt; /usr/local/lib/perl5/site_perl
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt;&gt;&gt;&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt;&gt;&gt;&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt;&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt;&gt; &gt; Can&#39;t locate JSON/XS.pm in @INC &#40;you may need to install the JSON::XS
&gt;&gt;&gt;&gt; &gt; module&#41; &#40;@INC contains: /usr/local/lib/perl5/site_perl
&gt;&gt;&gt;&gt; &gt; /usr/local/share/perl5/site_perl /usr/lib/perl5/vendor_perl
&gt;&gt;&gt;&gt; &gt; /usr/share/perl5/vendor_perl /usr/lib/perl5/core_perl
&gt;&gt;&gt;&gt; &gt; /usr/share/perl5/core_perl&#41;.
&gt;&gt;&gt;&gt; &gt; BEGIN failed--compilation aborted.
&gt;&gt;&gt;&gt; &gt; JSON::PP 4.02
&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt; Am Di., 14. Jan. 2020 um 19:13 Uhr schrieb Kit Peters via RT &lt;
&gt;&gt;&gt;&gt; &gt; bug-JSON-Path@rt.cpan.org&gt;:
&gt;&gt;&gt;&gt; &gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; So if I&#39;m reading this correctly, the behaviour you&#39;re talking
</div></div>&gt;&gt;&gt;&gt; about is
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; essentially that one system treats the string &#34;42&#34; &#40;minus quotes&#41; as
</div>&gt;&gt;&gt;&gt; &gt; valid
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; JSON, and the other does not, even though the Perl versions are
</div>&gt;&gt;&gt;&gt; &gt; identical.
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; My reply will assume that to be the case.
&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; Perl does not natively decode/encode JSON. Instead JSON support is
</div>&gt;&gt;&gt;&gt; &gt; provided
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; by a number of third party modules. In the case of JSON::Path, the
</div></div>&gt;&gt;&gt;&gt; JSON
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; encoder used is JSON::MaybeXS &#40;
</div></div>&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/JSON::MaybeXS&#41;">https://metacpan.org/pod/JSON::MaybeXS&#41;</a></span>.
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; Per
&gt;&gt;&gt;&gt; &gt; &gt; the documentation, this will use Cpanel::JSON::XS if available,
</div></div>&gt;&gt;&gt;&gt; fall back
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; to JSON::XS if the former is not available, and finally fall back to
&gt;&gt;&gt;&gt; &gt; &gt; JSON::PP. So JSON on two different systems could be handled by any
</div></div>&gt;&gt;&gt;&gt; of
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; these
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; three modules. Furthermore, until the introduction of ECMA-404 in
</div></div>&gt;&gt;&gt;&gt; 2014,
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &#34;42&#34; was *not* valid JSON. See
&gt;&gt;&gt;&gt; &gt; &gt;
</div></div>&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/">https://www.mattlunn.me.uk/blog/2014/01/what-is-the-minimum-valid-json/</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; for
&gt;&gt;&gt;&gt; &gt; &gt; more discussion on this topic.
&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; I&#39;m a bit surprised, though, that the system Perl on OSX is so old.
</div></div>&gt;&gt;&gt;&gt; Let&#39;s
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; investigate this further. On both systems, execute the following in
</div></div>&gt;&gt;&gt;&gt; Bash
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; and send me the results:
&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; for MOD in &#39;Cpanel::JSON::XS&#39; &#39;JSON::XS&#39; &#39;JSON::PP&#39; ; do perl
</div></div>&gt;&gt;&gt;&gt; -M$MOD -e
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &#34;print qq{$MOD \$$MOD::VERSION\n}&#34; ; done
&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; On Tue, Jan 14, 2020 at 1:32 AM Christoph Burgmer via RT &lt;
&gt;&gt;&gt;&gt; &gt; &gt; bug-JSON-Path@rt.cpan.org&gt; wrote:
&gt;&gt;&gt;&gt; &gt; &gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; Tue Jan 14 02:32:04 2020: Request 131456 was acted upon.
&gt;&gt;&gt;&gt; &gt; &gt; &gt; Transaction: Ticket created by christoph.burgmer@gmail.com
&gt;&gt;&gt;&gt; &gt; &gt; &gt;        Queue: JSON-Path
&gt;&gt;&gt;&gt; &gt; &gt; &gt;      Subject: Non deterministic result for $..* on scalar value
&gt;&gt;&gt;&gt; &gt; &gt; &gt;    Broken in: &#40;no value&#41;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;     Severity: &#40;no value&#41;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;        Owner: Nobody
&gt;&gt;&gt;&gt; &gt; &gt; &gt;   Requestors: christoph.burgmer@gmail.com
&gt;&gt;&gt;&gt; &gt; &gt; &gt;       Status: new
&gt;&gt;&gt;&gt; &gt; &gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=131456">https://rt.cpan.org/Ticket/Display.html?id=131456</a></span> &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; It seems a recent bump in Alpine 3.11 from 3.10 has changed the
</div></div></div>&gt;&gt;&gt;&gt; Perl
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; version from
&gt;&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 28, subversion 2 &#40;v5.28.2&#41;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; to
&gt;&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; and also changed the response from JSON::Path for the edge case
</div></div>&gt;&gt;&gt;&gt; of $..*
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; run
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; on a document of the number 42 from an error response to the
</div></div></div>&gt;&gt;&gt;&gt; result of
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; an
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; empty array.
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; However on OS X with the same newer Perl version the previous
</div></div>&gt;&gt;&gt;&gt; error
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; response can still be seen:
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; $ echo 42 | perl main.pl &#39;$..*&#39;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; Unable to decode 42 as JSON: malformed JSON string, neither tag,
</div></div>&gt;&gt;&gt;&gt; array,
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; object, number, string or atom, at character offset 0 &#40;before
</div></div>&gt;&gt;&gt;&gt; &#34;&#40;end of
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; string&#41;&#34;&#41; at build/lib/perl5/JSON/Path/Evaluator.pm line 81,
</div></div>&gt;&gt;&gt;&gt; &lt;STDIN&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; line
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; 1.
&gt;&gt;&gt;&gt; &gt; &gt; &gt;  at build/lib/perl5/JSON/Path/Evaluator.pm line 79.
&gt;&gt;&gt;&gt; &gt; &gt; &gt; $ perl --version
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt;&gt;&gt;&gt; &gt; &gt; &gt; darwin-thread-multi-2level
&gt;&gt;&gt;&gt; &gt; &gt; &gt; [...]
&gt;&gt;&gt;&gt; &gt; &gt; &gt; $ uname -s
&gt;&gt;&gt;&gt; &gt; &gt; &gt; Darwin
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; vs.
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; $ docker run --rm -it -v &#34;$&#40;pwd&#41;:/mydir&#34; alpine:3.11 sh
&gt;&gt;&gt;&gt; &gt; &gt; &gt; / # apk add perl
&gt;&gt;&gt;&gt; &gt; &gt; &gt; fetch
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
</div></div>&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/main/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; fetch
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; &#40;1/2
&gt;&gt;&gt;&gt; &gt; &gt; &gt; &lt;
</div>&gt;&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2">http://dl-cdn.alpinelinux.org/alpine/v3.11/community/x86_64/APKINDEX.tar.gz&#40;1/2</a></span>
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt;&#41;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; Installing libbz2 &#40;1.0.8-r1&#41;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; &#40;2/2&#41; Installing perl &#40;5.30.1-r0&#41;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; Executing busybox-1.31.1-r8.trigger
&gt;&gt;&gt;&gt; &gt; &gt; &gt; OK: 42 MiB in 16 packages
&gt;&gt;&gt;&gt; &gt; &gt; &gt; / # cd mydir/
&gt;&gt;&gt;&gt; &gt; &gt; &gt; /mydir # echo 42 | perl main.pl &#39;$..*&#39;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; []
&gt;&gt;&gt;&gt; &gt; &gt; &gt; /mydir # perl --version
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; This is perl 5, version 30, subversion 1 &#40;v5.30.1&#41; built for
&gt;&gt;&gt;&gt; &gt; &gt; &gt; x86_64-linux-thread-multi
&gt;&gt;&gt;&gt; &gt; &gt; &gt; [...]
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; This currently makes it hard to reproduce the same results for the
&gt;&gt;&gt;&gt; &gt; &gt; &gt; json-path-comparison across the Docker and native build &#40;at least
</div></div>&gt;&gt;&gt;&gt; on OS
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; X&#41;.
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; I would be grateful for any pointers into why the behaviour would
</div></div></div>&gt;&gt;&gt;&gt; be
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt; different.
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; Script is here:
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl">https://github.com/cburgmer/json-path-comparison/blob/master/implementations/Perl_JSON-Path/main.pl</a></span>
<div class="message-stanza open"><div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt; For completeness, I&#39;m tracking this issue on the other side under
&gt;&gt;&gt;&gt; &gt; &gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/cburgmer/json-path-comparison/issues/24">https://github.com/cburgmer/json-path-comparison/issues/24</a></span>.
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; &gt;
</div>&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt; --
&gt;&gt;&gt;&gt; &gt; &gt; Kit Peters, W0KEH
&gt;&gt;&gt;&gt; &gt; &gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74
</div></div>&gt;&gt;&gt;&gt; 7F56
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; ED1D
&gt;&gt;&gt;&gt; &gt; &gt; Hello to any and all NSA, DEA, or other government or non-government
</div>&gt;&gt;&gt;&gt; &gt; agents
<div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt; reading this email.  Tell me about your life; I&#39;ll tell you about
</div></div>&gt;&gt;&gt;&gt; mine.
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt;&gt; &gt; &gt;
&gt;&gt;&gt;&gt; &gt; &gt;
</div>&gt;&gt;&gt;&gt; &gt;
&gt;&gt;&gt;&gt; &gt;
</div>&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; --
&gt;&gt;&gt;&gt; Kit Peters, W0KEH
&gt;&gt;&gt;&gt; GPG public key fingerpint: D4FF AA62 AFEA 83D6 CC98 ACE5 6FAE 7E74 7F56
&gt;&gt;&gt;&gt; ED1D
&gt;&gt;&gt;&gt; Hello to any and all NSA, DEA, or other government or non-government
&gt;&gt;&gt;&gt; agents
&gt;&gt;&gt;&gt; reading this email.  Tell me about your life; I&#39;ll tell you about mine.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
</div></div></div></div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879795/1008730/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008730">with headers</a>
<br />
<span class="downloadcontenttype">text/html 15k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1879797" href="/Public/Bug/Display.html?id=131456#txn-1879797">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;16&nbsp;14:09:54&nbsp;2020</span>
    <span class="description">popefelix [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #131456] Non deterministic result for $..* on scalar value</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 16 Jan 2020 13:09:28 -0600</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-JSON-Path [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kit Peters &lt;popefelix [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879797/1008733/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008733">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 12.2k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1879797/1008734/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/1008734">with headers</a>
<br />
<span class="downloadcontenttype">text/html 19.9k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.905144</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
