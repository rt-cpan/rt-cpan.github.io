<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #83193 for Log-Log4perl: Appender::File should not insist on regular files</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #83193 for Log-Log4perl: Appender::File should not insist on regular files</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Log-Log4perl">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Log-Log4perl">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Log-Log4perl">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Log-Log4perl">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Log-Log4perl">Log-Log4perl CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">83193</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Log-Log4perl">Log-Log4perl</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
g_ml2000-x [...] yahoo.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-19484-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-19485-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




appender_file_allow_any.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1178425/621637/appender_file_allow_any.diff">
Thu Feb 07 08:02:51 2013 (413b) by g_ml2000-x [...] yahoo.de
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=83193">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1178425" href="/Public/Bug/Display.html?id=83193#txn-1178425">#</a>      
    </span>
    <span class="date">Thu&nbsp;Feb&nbsp;07&nbsp;08:02:51&nbsp;2013</span>
    <span class="description">g_ml2000-x [...] yahoo.de -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Appender::File should not insist on regular files</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1178425/621636/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/621636">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 248b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Currently, Log::Log4perl::Appender::File calls die if the specified
log file is not a regular file which IMHO considerably reduces
flexibility without any major advantage.
The attached 1-char-patch fixes this.

Regards,
                     Peter
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> appender_file_allow_any.diff</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1178425/621637/appender_file_allow_any.diff">Download appender_file_allow_any.diff</a><br />
<span class="downloadcontenttype">text/x-diff 413b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- Log/Log4perl/Appender/File.org	2013-02-07 13:53:48.920947195 +0100
+++ Log/Log4perl/Appender/File.pm	2013-02-07 13:53:56.485038428 +0100
@@ -94,7 +94,7 @@ sub file_open {
 
     umask&#40;$self-&gt;{umask}&#41; if defined $self-&gt;{umask};
 
-    my $didnt_exist = ! -f $self-&gt;{filename};
+    my $didnt_exist = ! -e $self-&gt;{filename};
 
     if&#40;$self-&gt;{syswrite}&#41; {
         sysopen $fh, &#34;$self-&gt;{filename}&#34;, $sysmode or
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1178806" href="/Public/Bug/Display.html?id=83193#txn-1178806">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;01:37:43&nbsp;2013</span>
    <span class="description">MSCHILLI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1178806/621830/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/621830">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 457b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Feb 07 08:02:51 2013, g_ml200 wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Currently, Log::Log4perl::Appender::File calls die if the specified
&gt; log file is not a regular file which IMHO considerably reduces
&gt; flexibility without any major advantage.
&gt; The attached 1-char-patch fixes this.
</div>
Hi Peter,

are you sure this is a problem? It works fine for me with non-files like 
symlinks in Log::Log4perl 1.40.

Do you have a test case to help me reproduce the problem?

Thanks -- Mike.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1178809" href="/Public/Bug/Display.html?id=83193#txn-1178809">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;01:37:44&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1178957" href="/Public/Bug/Display.html?id=83193#txn-1178957">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;10:34:36&nbsp;2013</span>
    <span class="description">g_ml2000-x [...] yahoo.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> g_ml2000-x [...] yahoo.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1178957/621918/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/621918">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fr 08. Feb 2013, 01:37:43, MSCHILLI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; are you sure this is a problem? It works fine for me with
&gt; non-files like symlinks in Log::Log4perl 1.40.
</div>
Symlinks are no problem, as long as the _point to_ a regular file.

Any other file type will fail because of the &#34;-f&#34; test, even if it
otherwise would work without problem.

The case that I originally tripped over is that I use a default
configuration file across a bunch of related programs because their
logging behavior should be identical where possible. In some scenarios
these would be called from a UID that would not allow write access.
Because I didn&#39;t find any other obvious way to share the configuration
file but deactivate the file appender in this case, I just used a perl
hook to modify the log file path, setting it to &#34;/dev/null&#34; to deactivate
the log file.
For my particular problem there are certainly other possible solutions,
but generally, I don&#39;t see a reason why it should be prohibited to use
character device &#34;files&#34; &#40;or whatever else can be used as a file&#41; with
Appender::File ...

Regards,
                              Peter
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1178966" href="/Public/Bug/Display.html?id=83193#txn-1178966">#</a>      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;08&nbsp;11:09:22&nbsp;2013</span>
    <span class="description">MSCHILLI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1178966/621923/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/621923">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 08 10:34:36 2013, g_ml200 wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Any other file type will fail because of the &#34;-f&#34; test, even if it
&gt; otherwise would work without problem.
</div>
I do agree that writing to non-files is useful &#40;Unix domain sockets come 
to mind&#41;, but I don&#39;t see why you think the current code won&#39;t allow for 
these cases. For example, your /dev/null case:

use Log::Log4perl qw&#40;get_logger&#41;;

my $conf = q&#40;
log4perl.category.Bar.Twix         = WARN, Logfile
log4perl.appender.Logfile          = Log::Log4perl::Appender::File
log4perl.appender.Logfile.filename = /dev/null
log4perl.appender.Logfile.owner    = mschilli
log4perl.appender.Logfile.layout = Log::Log4perl::Layout::SimpleLayout
&#41;;
Log::Log4perl::init&#40;\$conf&#41;;
my $logger = get_logger&#40;&#34;Bar::Twix&#34;&#41;;
$logger-&gt;error&#40;&#34;Waaah!&#34;&#41;;

works just fine.

The only case where I can see this causes a different route to be taken 
in the code is if you explicitly set an owner of the file in the 
Log4perl configuration.

Can you send me an excerpt of your configuration that reproduces the 
problem with /dev/null? I&#39;m all game for allowing that case, just would 
like to know the exact cause of the problem.

Thanks -- Mike
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1179294" href="/Public/Bug/Display.html?id=83193#txn-1179294">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;09&nbsp;03:22:28&nbsp;2013</span>
    <span class="description">g_ml2000-x [...] yahoo.de -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> g_ml2000-x [...] yahoo.de</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1179294/622114/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/622114">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 980b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Am Fr 08. Feb 2013, 11:09:22, MSCHILLI schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The only case where I can see this causes a different route
&gt; to be taken in the code is if you explicitly set an owner of
&gt; the file in the Log4perl configuration.
</div>
... you&#39;re right - the code only fails, if the logfile is some special
file _and_ an owner or group is specified. Because this also is the case
for your example configuration, it will fail:

$ ~&gt; /tmp/test.pl
chown&#40;&#39;500&#39;, &#39;0&#39;&#41; on &#39;/dev/null&#39; failed: Operation not permitted at
/usr/share/perl5/Log/Log4perl/Appender/File.pm line 202, &lt;DATA&gt; line 522.

In Summary:
- regular files can be set up in advance and
  will be just used as they are
- for other &#40;pre-existing&#41; files Appender::Files calls &#34;chown&#34;,
  which will usually fail if run from an unprivileged account
  &#40;unless the file is already owned by the same UID the perl code
  runs from, which might not be desirable in many cases&#41;

Is this asymmetry really intended?

Regards,
                      Peter
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1179424" href="/Public/Bug/Display.html?id=83193#txn-1179424">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;09&nbsp;15:23:31&nbsp;2013</span>
    <span class="description">MSCHILLI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1179424/622180/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/622180">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Is this asymmetry really intended?
</div>
It certainly isn&#39;t as intuitive as I&#39;d like it to be. It&#39;s an 
interesting problem.

If someone puts an &#34;owner&#34; field into the L4p configuration, and a file 
gets created by L4p, the expectation is that the process is either 
running under the intended UID already &#40;in which case the owner setting 
is superfluous&#41; or is privileged and the file needs to be created with 
the given UID, not the privileged UID &#40;the more common case&#41;. So far so 
good.

If the log file already exists, no owner changes are attempted. This is 
somewhat counter-intuitive, but it&#39;s not easy to change that now without 
breaking systems in production.

If we accept that for now, it does make sense to extend it to *other* 
existing file-like entries, like devices, sockets, named pipes, etc.

I&#39;ve applied your patch with some explanatory text in the owner/group 
option documentation sections:

 <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mschilli/log4perl/commit/245f98f1bae8da6c4fd72974270">https://github.com/mschilli/log4perl/commit/245f98f1bae8da6c4fd72974270</a></span>
45e84d9da086f

Sorry this took so long, just wanted to make sure I understand the 
implications before I apply the patch, thanks for your contribution!

-- Mike
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1179427" href="/Public/Bug/Display.html?id=83193#txn-1179427">#</a>      
    </span>
    <span class="date">Sat&nbsp;Feb&nbsp;09&nbsp;15:23:41&nbsp;2013</span>
    <span class="description">MSCHILLI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.588857</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
