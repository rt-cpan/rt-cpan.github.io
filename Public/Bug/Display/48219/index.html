<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #48219 for Perl-Critic: no warning from Perl::Critic::Utils::is_script&#40;&#41; please</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #48219 for Perl-Critic: no warning from Perl::Critic::Utils::is_script&#40;&#41; please</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Perl-Critic/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Perl-Critic/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Perl-Critic/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Perl-Critic/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/Perl-Critic/Perl-Critic/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl-Critic">Perl-Critic CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">48219</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Perl-Critic/Active/">Perl-Critic</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
user42 [...] zip.com.au

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-25198-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-25199-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;21:30:54&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 27 Jul 2009 11:29:59 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In the current cvs I see Perl::Critic::Utils::is_script&#40;&#41; prints a
warning asking you to use -&gt;is_script.

I wish it wouldn&#39;t do that, as it makes existing policies like
Lax::RequireEndWithTrueConst chatter on endlessly &#40;a warning for every
document file processed&#41;.

It looks like the is_script&#40;&#41; code is fine just dispatching to
$doc-&gt;is_script, I&#39;d hope that a note in the docs about what&#39;s now
available from PPI would be enough, and keep the function and its
current behaviour for compatibility.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;22:09:35&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 26 Jul 2009 21:09:10 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Kevin Ryde via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In the current cvs I see Perl::Critic::Utils::is_script&#40;&#41; prints a
&gt; warning asking you to use -&gt;is_script.
&gt; 
&gt; I wish it wouldn&#39;t do that, as it makes existing policies like
&gt; Lax::RequireEndWithTrueConst chatter on endlessly &#40;a warning for every
&gt; document file processed&#41;.
</div>
Would you prefer that your policy just stopped working?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It looks like the is_script&#40;&#41; code is fine just dispatching to
&gt; $doc-&gt;is_script, I&#39;d hope that a note in the docs about what&#39;s now
&gt; available from PPI would be enough, and keep the function and its
&gt; current behaviour for compatibility.
</div>
I&#39;m sorry, but I don&#39;t expect to keep backwards compatibility on poorly designed interfaces forever &#40;some of them created by me&#41;.  We will go through a reasonable deprecation cycle, but we will change our interface over time.  There have been some recent discussions in the Perl community about what &#34;deprecated&#34; means.  For me, &#34;deprecated&#34; means that something WILL BE REMOVED in the future, not languish around for years in a limbo state.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;26&nbsp;22:09:36&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;28&nbsp;19:13:08&nbsp;2009</span>
    <span class="description">rjbs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Heck, if somebody told me that this warning started happening &#40;by filing
a bug against Lax&#41; I would&#39;ve been happy to change it immediately.

-- 
rjbs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;19:51:14&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 30 Jul 2009 09:50:15 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Elliot Shank via RT&#34; &lt;bug-Perl-Critic@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; Would you prefer that your policy just stopped working?
</div>
For non-critical things give authors a time to update, and users a time
to install the new, before lots of messages.

There&#39;s going to be unhappy times when updates are needed post-haste or
things have to stop working, but as far as I can tell is_script&#40;&#41; is
fine and warnings.pm is really quite a blunt instrument to go to
immediately.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; what &#34;deprecated&#34; means
</div>
Of course it&#39;s not a word, but my observation is that in practice it
means anything on a continuum from &#34;this never worked properly and sorry
but we have to transition away&#34; through to &#34;I gratuitously renamed
something others have relied on&#34;.  The problem is when people are nearer
the far end of the spectrum than they care to realize :-&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;23:00:01&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 29 Jul 2009 21:59:39 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Kevin Ryde via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#34;Elliot Shank via RT&#34; &lt;bug-Perl-Critic@rt.cpan.org&gt; writes:
<div class="message-stanza open">&gt;&gt; what &#34;deprecated&#34; means
</div>&gt; 
&gt; Of course it&#39;s not a word, but my observation is that in practice it
&gt; means anything on a continuum from &#34;this never worked properly and sorry
&gt; but we have to transition away&#34; through to &#34;I gratuitously renamed
&gt; something others have relied on&#34;.  The problem is when people are nearer
&gt; the far end of the spectrum than they care to realize :-&#41;
</div>
A name would have to be pretty horrific for me to change it.

And I certainly don&#39;t plan on pulling what JSON 2.0 did.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;20:15:41&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 02 Aug 2009 10:14:06 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Elliot Shank via RT&#34; &lt;bug-Perl-Critic@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; don&#39;t plan on pulling what JSON 2.0 did.
</div>
I&#39;m not aware of what that is/was.  The one that gets up my goat is Gtk
where every new way has immediate simultaneous action against the old.
As if the existence of the old-but-works somehow offends the new.  Or
there can&#39;t be more than one way to do it.  If taken seriously it&#39;d be a
sisyphean treadmill of constant update to stay on a shifting notion of
approved-way.

Umm, err, but at any rate I would like to propose for is_script&#40;&#41;
something modest like the following.  It doesn&#39;t mean of course
something more can&#39;t be done in the future, just no hurry.
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: Utils.pm
===================================================================
--- Utils.pm	&#40;revision 3459&#41;
+++ Utils.pm	&#40;working copy&#41;
@@ -845,11 +845,6 @@
 sub is_script {
     my $doc = shift;
 
-    warnings::warnif&#40;
-        &#39;deprecated&#39;,
-        &#39;Perl::Critic::Utils::is_script&#40;$doc&#41; deprecated, use $doc-&gt;is_script&#40;&#41; instead.&#39;,  ## no critic &#40;ValuesAndExpressions::RequireInterpolationOfMetachars&#41;
-    &#41;;
-
     return $doc-&gt;is_script&#40;&#41;
         if blessed&#40;$doc&#41; &#38;&#38; $doc-&gt;isa&#40;&#39;Perl::Critic::Document&#39;&#41;;
     return 1 if shebang_line&#40;$doc&#41;;
@@ -1652,6 +1647,9 @@
 
 =item C&lt;is_script&#40; $document &#41;&gt;
 
+This function has been adopted into PPI as C&lt;$document-E&lt;gt&gt;is_script&gt;.
+That method is recommended once you&#39;re ready to depend on new enough PPI.
+
 Given a L&lt;PPI::Document|PPI::Document&gt;, test if it starts with
 C&lt;/#!.*/&gt;.  If so, it is judged to be a script instead of a module.
 Also, if the filename of the document ends in &#34;.PL&#34; then it is
@@ -1661,10 +1659,7 @@
 how the document is judged.
 See C&lt;shebang_line&#40;&#41;&gt;.
 
-B&lt;This subroutine is deprecated.&gt; You should use the
-L&lt;Perl::Critic::Document/&#34;is_script&#40;&#41;&#34;&gt; method instead.
 
-
 =item C&lt;is_in_void_context&#40; $token &#41;&gt;
 
 Given a L&lt;PPI::Token|PPI::Token&gt;, answer whether it appears to be in a
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;20:28:35&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 02 Aug 2009 10:27:39 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Oh, I&#39;ve embarrassed myself as between PPI and pc.  What I meant of
course is the following &#40;even if it could helpfully be a PPI method!&#41;.
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Index: Utils.pm
===================================================================
--- Utils.pm	&#40;revision 3459&#41;
+++ Utils.pm	&#40;working copy&#41;
@@ -845,11 +845,6 @@
 sub is_script {
     my $doc = shift;
 
-    warnings::warnif&#40;
-        &#39;deprecated&#39;,
-        &#39;Perl::Critic::Utils::is_script&#40;$doc&#41; deprecated, use $doc-&gt;is_script&#40;&#41; instead.&#39;,  ## no critic &#40;ValuesAndExpressions::RequireInterpolationOfMetachars&#41;
-    &#41;;
-
     return $doc-&gt;is_script&#40;&#41;
         if blessed&#40;$doc&#41; &#38;&#38; $doc-&gt;isa&#40;&#39;Perl::Critic::Document&#39;&#41;;
     return 1 if shebang_line&#40;$doc&#41;;
@@ -1652,6 +1647,10 @@
 
 =item C&lt;is_script&#40; $document &#41;&gt;
 
+This function is now a L&lt;Perl::Critic::Document&gt; method
+C&lt;$document-E&lt;gt&gt;is_script&gt;.  That method is recommended instead of this
+function.
+
 Given a L&lt;PPI::Document|PPI::Document&gt;, test if it starts with
 C&lt;/#!.*/&gt;.  If so, it is judged to be a script instead of a module.
 Also, if the filename of the document ends in &#34;.PL&#34; then it is
@@ -1661,10 +1660,7 @@
 how the document is judged.
 See C&lt;shebang_line&#40;&#41;&gt;.
 
-B&lt;This subroutine is deprecated.&gt; You should use the
-L&lt;Perl::Critic::Document/&#34;is_script&#40;&#41;&#34;&gt; method instead.
 
-
 =item C&lt;is_in_void_context&#40; $token &#41;&gt;
 
 Given a L&lt;PPI::Token|PPI::Token&gt;, answer whether it appears to be in a
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;21:36:15&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 01 Aug 2009 20:35:52 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Kevin Ryde via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Oh, I&#39;ve embarrassed myself as between PPI and pc.  What I meant of
&gt; course is the following &#40;even if it could helpfully be a PPI method!&#41;.
</div>
Adam is not likely to support such a thing.  &#40;I&#39;ve tried with stuff I considered a lot more appropriate than this.&#41;

But down the road of noting deprecations by merely noting it in the documentation leads the way to making interfaces stagnant for ever.  We will evolve slowly, but evolve we will.  If all we do is make a note, then no one will change.  Thus, the warning.

By the way of interface changes, have you been paying attention to the stuff we&#39;ve been going through to be compatible with the next PPI release?  Now there&#39;s a significant breakage for you.  I highly suggest that you test all your code with PPI 1.204_07 / P::C 1.101_003.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;22:02:51&nbsp;2009</span>
    <span class="description">user42 [...] zip.com.au -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 02 Aug 2009 12:01:17 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Kevin Ryde &lt;user42 [...] zip.com.au&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">&#34;Elliot Shank via RT&#34; &lt;bug-Perl-Critic@rt.cpan.org&gt; writes:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt; stagnant for ever.
</div>
Well, you say stagnant, I say stable foundation! :&#41;

Jokes aside, I believe it&#39;s quite important to value usages which were
good at the time and are still supportable.  It&#39;s care with that sort of
thing that makes perl and &#40;most of&#41; its libraries attractive -- code
from 10 years ago still goes well.  &#40;With some irritating exceptions
like associative arrays for instance ...&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; paying attention to the stuff we&#39;ve been going through to be
&gt; compatible with the next PPI release?
</div>
Only some of it.  &#40;I hope the For vs ForLoop can be compatibile-ized
say.&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now there&#39;s a significant breakage for you.
</div>
That&#39;s bad if it ends up like that.  &#40;Maybe there&#39;s an epochal cut
coming along.  I&#39;m not against revamps outright if really called for,
though I always wish it can at least be under completely disjoint names,
so as not to break the existing, or to make the junction clear to
everyone ... if you know what I mean.&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;02&nbsp;12:30:45&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 02 Aug 2009 11:30:21 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Kevin Ryde via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Jokes aside, I believe it&#39;s quite important to value usages which were
&gt; good at the time and are still supportable.  It&#39;s care with that sort of
&gt; thing that makes perl and &#40;most of&#41; its libraries attractive -- code
&gt; from 10 years ago still goes well.
</div>
On the &#34;stability vs. language evolution&#34; debate that Perl has been having of late, I&#39;m towards the language evolution end of the scale.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; paying attention to the stuff we&#39;ve been going through to be
&gt;&gt; compatible with the next PPI release?
</div>&gt; 
&gt; Only some of it.  &#40;I hope the For vs ForLoop can be compatibile-ized
&gt; say.&#41;
</div>
He did an ugly sort-of-compatibility hack, which I don&#39;t like.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Now there&#39;s a significant breakage for you.
</div>&gt; 
&gt; That&#39;s bad if it ends up like that.  &#40;Maybe there&#39;s an epochal cut
&gt; coming along.  I&#39;m not against revamps outright if really called for,
&gt; though I always wish it can at least be under completely disjoint names,
&gt; so as not to break the existing, or to make the junction clear to
&gt; everyone ... if you know what I mean.&#41;
</div>
Unfortunately, he broke up C-style and list iteration loops by making the list iteration conditions be instances of PPI::Structure::List, so, if you want a regular list in the middle of regular code, you now need to check that the list isn&#39;t part of the foreach loop.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;04&nbsp;13:16:53&nbsp;2009</span>
    <span class="description">jeff [...] imaginative-software.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 4 Aug 2009 10:16:31 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Jeffrey Thalhammer &lt;jeff [...] imaginative-software.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Aug 1, 2009, at 7:02 PM, Kevin Ryde via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Perl-Critic
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=48219">https://rt.cpan.org/Ticket/Display.html?id=48219</a></span> &gt;
&gt;
&gt; &#34;Elliot Shank via RT&#34; &lt;bug-Perl-Critic@rt.cpan.org&gt; writes:
<div class="message-stanza open">&gt;&gt;
&gt;&gt; stagnant for ever.
</div>&gt;
&gt; Well, you say stagnant, I say stable foundation! :&#41;
</div>
I tend to agree with Elliot on this.  We&#39;re only human, and  
unfortunately, we make mistakes &#40;especially me&#41;.  So we need a way to  
correct those mistakes without having to pay interest on the technical  
debt forever.  So the Perl::Critic project considers &#34;deprecated&#34; to  
mean &#34;this feature will be removed in the near future.&#34;

I also agree that changing the documentation just isn&#39;t enough.  But I  
do wish we had a more flexible mechanism for emitting warnings.   
Perhaps if P::C had its own configurable warning mechanism for these  
sorts of things &#40;For example:  &#34;perlcritic -no-deprecation-warnings  
SomeFile.pm&#34;&#41; ??

-Jeff
</div></div>

<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;04&nbsp;21:25:27&nbsp;2009</span>
    <span class="description">perl [...] galumph.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #48219] no warning from Perl::Critic::Utils::is_script&#40;&#41; please</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 04 Aug 2009 20:25:05 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Critic [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Elliot Shank &lt;perl [...] galumph.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Jeffrey Thalhammer via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perhaps if P::C had its own configurable warning mechanism for these  
&gt; sorts of things
</div>
It&#39;s called &#34;no warnings &#39;deprecated&#39;;&#34;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;05&nbsp;13:51:23&nbsp;2009</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry, it took a while for the penny to drop. I should have put in my
$0.02 sooner.

In a nutshell, the statement that Perl::Critic::Utils::is_script&#40;&#41;
simply delegates to Perl::Critic::Document is false. It delegates only
if the argument is a Perl::Critic::Document object, and _that_ is the
reason for the deprecation. The alternative to deprecation would have
been to reject an enhancement request.

Deprecation is not done arbitrarily, and as I recall there was some
wrangling over this one on the developers&#39; mailing list before this
deprecation was done.

Recently Perl::Critic was enhanced to allow the user some control over
what is a script and what is a module, based on the file name suffix.
This is for the benefit of Win32 users, whose scripts tend not to have
shebang lines. From both theoretic and pragmatic considerations, this
machinery was hung on the Perl::Critic::Document object.

But Perl::Critic::Utils::is_script&#40;&#41; does not _require_ a
Perl::Critic::Document object as input. If given a PPI::Document::File,
it will not, CAN NOT, use the enhanced classification machinery. Nor can
Perl::Critic::Utils::is_script&#40;&#41; usefully manufacture its own
Perl::Critic::Document, because it does not have access to the
Perl::Critic configuration information it needs to manufacture that
object correctly.

Certainly if Perl::Critic::Lax is used _only_ in the context of
perlcritc &#40;1&#41;, Perl::Critic::Utils::is_script&#40;&#41; will always be passed a
Perl::Critic::Document, and will therefore always do the right thing.
But neither the Perl::Critic nor the Perl::Critic::Lax authors can
guarantee this.

So rather than silently introduce a subtle bug in someone&#39;s DarkPAN
code, the interface was deprecated.

As a postscript, it appears to me that this deprecation is _not_ in
released code, though I see no way to remove it without also removing
the enhancement that depends on it.

Tom Wyant
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Aug&nbsp;11&nbsp;17:45:30&nbsp;2009</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Of all the stuff on CPAN that directly depends on Perl::Critic,
Perl-Critic-Lax is the only one that calls is_script&#40;&#41;.

I have not checked anything on CPAN that depends on Perl::Critic
indirectly, on the somewhat-dubious principle that if the authors of
these modules called Perl::Critic::Utils::is_script&#40;&#41; they would make
the dependency on Perl::Critic direct.

No, I&#39;m not picking on Perl-Critic-Lax, at least not by intent. Just
trying to define the scope of the problem.

Tom Wyant
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
