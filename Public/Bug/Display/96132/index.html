<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #96132 for Perl-Dist-Strawberry: upgrading PkgConfig breakds pkg-config</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #96132 for Perl-Dist-Strawberry: upgrading PkgConfig breakds pkg-config</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Perl-Dist-Strawberry/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Perl-Dist-Strawberry/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Perl-Dist-Strawberry/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Perl-Dist-Strawberry/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Perl-Dist-Strawberry">Perl-Dist-Strawberry CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">96132</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Perl-Dist-Strawberry/Active/">Perl-Dist-Strawberry</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
PLICEASE [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-40214-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-40215-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




pcfiles.zip<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1371872/728427/pcfiles.zip">
Wed Jun 04 04:14:45 2014 (7.5k) by kmx [...] volny.cz
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;06:45:46&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> upgrading PkgConfig breakds pkg-config</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi there,

It&#39;s great that you&#39;ve included PkgConfig with strawberry perl and are using it for pkg-config.  Unfortunately, you&#39;ve included parts of this PR to PkgConfig which were not merged:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mnunberg/perl-PkgConfig/pull/10">https://github.com/mnunberg/perl-PkgConfig/pull/10</a></span>

and now upgrading PkgConfig breaks pkg-config:

N:\&gt;pkg-config
Must specify at least one library at N:/lang/perl/strawberry/x86/5.20.0/perl/vendor/lib/PkgConfig.pm line 906.

N:\&gt;cpanm PkgConfig
--&gt; Working on PkgConfig
Fetching <span class="clickylink"><a target="new" rel="nofollow" href="http://mirror.sydney.wdlabs.com/cpan/authors/id/P/PL/PLICEASE/PkgConfig-0.07420.tar.gz">http://mirror.sydney.wdlabs.com/cpan/authors/id/P/PL/PLICEASE/PkgConfig-0.07420.tar.gz</a></span> ... OK
Configuring PkgConfig-0.07420 ... OK
Building and testing PkgConfig-0.07420 ... OK
Successfully installed PkgConfig-0.07420 &#40;upgraded from 0.07220_99&#41;
1 distribution installed

N:\&gt;pkg-config
Undefined subroutine &#38;PkgConfig::Script::run called at N:\lang\perl\strawberry\x86\5.20.0\perl\bin/pkg-config line 5.

I would appreciate it if you could integrate PkgConfig and ppkg-config in such a way that it can work seamlessly with the upstream variant.  I am open to possibly making changes to PkgConfig, although my goal is to respect the wishes of the original author.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;07:53:55&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 02 Jun 2014 13:53:42 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; N:\&gt;pkg-config
&gt; Must specify at least one library at N:/lang/perl/strawberry/x86/5.20.0/perl/vendor/lib/PkgConfig.pm line 906.
&gt;
&gt; N:\&gt;cpanm PkgConfig
</div>
this upgrade should work:

cpanm PkgConfig --configure-args=--script=pkg-config



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I would appreciate it if you could integrate PkgConfig and ppkg-config in such a way that it can work seamlessly with the upstream variant.  I am open to possibly making changes to PkgConfig, although my goal is to respect the wishes of the original author.
</div>
I&#39;ll try to keep as close as possible to upstream PkgConfig; however I need 
pkg-config in strawberry perl so upgrading troubles by simply running 
&#34;cpanm PkgConfig&#34; &#40;without --configure-args=--script=pkg-config&#41; will last.

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;07:53:55&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;08:15:39&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 02 07:53:55 2014, kmx@volny.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; this upgrade should work:
&gt; 
&gt; cpanm PkgConfig --configure-args=--script=pkg-config
</div>
This is pretty inconvenient if PkgConfig is a prereq for something else that pulls it in automatically.  This can break PkgConfig and thus ExtUtils::PkgConfig without the user having and inkling that he has upgraded PkgConfig or even what PkgConfig is.

I&#39;m not exactly sure why you need this change.  PkgConfig installs fine in windows with the symlinks in the tarball.  When you made your PR you made no attempt to explain what exactly was breaking, though I went out of my way to maintain a dialog.  Perhaps if we worked together we could keep both PkgConfig and Strawberry Perl working properly?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;08:57:52&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 02 Jun 2014 14:57:40 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open">&gt;&gt; this upgrade should work:
&gt;&gt;
&gt;&gt; cpanm PkgConfig --configure-args=--script=pkg-config
</div>&gt; This is pretty inconvenient if PkgConfig is a prereq for something else that pulls it in automatically.  This can break PkgConfig and thus ExtUtils::PkgConfig without the user having and inkling that he has upgraded PkgConfig or even what PkgConfig is.
</div>
I simply need a working command &#34;pkg-config&#34; &#40;neither &#34;ppkg-config&#34; nor 
&#34;pkg-config.pl&#34; is enough&#41; therefore I install PkgConfig via:

cpanm PkgConfig --configure-args=--script=pkg-config



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m not exactly sure why you need this change.  PkgConfig installs fine in windows with the symlinks in the tarball.  When you made your PR you made no attempt to explain what exactly was breaking, though I went out of my way to maintain a dialog.  Perhaps if we worked together we could keep both PkgConfig and Strawberry Perl working properly?
</div>
Troubles with symlinks are mostly during development if you want to clone 
github repo and play with some changes as I did. But keep in mind that at 
install time on Win32 all symlinks are turned into file copies.

Therefore if I initially install:
cpanm PkgConfig --configure-args=--script=pkg-config

and later do upgrade via:
cpanm PkgConfig

the file &#34;pkg-config&#34; &#40;or &#34;pkg-config.bat&#34; in case on MSWin32&#41; will still 
be the copy of the old version.

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;10:11:19&nbsp;2014</span>
    <span class="description">csjewell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 02 08:57:52 2014, kmx@volny.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
<div class="message-stanza open">&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt; this upgrade should work:
&gt; &gt;&gt;
&gt; &gt;&gt; cpanm PkgConfig --configure-args=--script=pkg-config
</div>&gt; &gt; This is pretty inconvenient if PkgConfig is a prereq for something
&gt; &gt; else that pulls it in automatically.  This can break PkgConfig and
&gt; &gt; thus ExtUtils::PkgConfig without the user having and inkling that he
&gt; &gt; has upgraded PkgConfig or even what PkgConfig is.
</div>&gt; 
&gt; I simply need a working command &#34;pkg-config&#34; &#40;neither &#34;ppkg-config&#34;
&gt; nor
&gt; &#34;pkg-config.pl&#34; is enough&#41; therefore I install PkgConfig via:
&gt; 
&gt; cpanm PkgConfig --configure-args=--script=pkg-config
&gt; 
&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt; I&#39;m not exactly sure why you need this change.  PkgConfig installs
&gt; &gt; fine in windows with the symlinks in the tarball.  When you made your
&gt; &gt; PR you made no attempt to explain what exactly was breaking, though I
&gt; &gt; went out of my way to maintain a dialog.  Perhaps if we worked
&gt; &gt; together we could keep both PkgConfig and Strawberry Perl working
&gt; &gt; properly?
</div>&gt; 
&gt; Troubles with symlinks are mostly during development if you want to
&gt; clone
&gt; github repo and play with some changes as I did. But keep in mind that
&gt; at
&gt; install time on Win32 all symlinks are turned into file copies.
&gt; 
&gt; Therefore if I initially install:
&gt; cpanm PkgConfig --configure-args=--script=pkg-config
&gt; 
&gt; and later do upgrade via:
&gt; cpanm PkgConfig
&gt; 
&gt; the file &#34;pkg-config&#34; &#40;or &#34;pkg-config.bat&#34; in case on MSWin32&#41; will
&gt; still
&gt; be the copy of the old version.
</div>
So we probably need one of two things:

1&#41; A way to persist the configuration &#40;a general case&#41;

2&#41; If it finds pkg-config in $Config::Config{sitebin} or $Config::Config{vendorbin} from a previous installation, it continues to use it. &#40;the specific case&#41;

I think the problem KMX was trying to solve is that a non-specially-configured Win32 system with perl will not know to use pkg-config.pl or ppkg-config when &#39;pkg-config&#39; is requested on the command line, and that&#39;s what most modules depending on the pkg-config interface do, I understand &#40;either through ExtUtils::PkgConfig or by calling it itself.&#41; I remember running into that problem when I was building it. 

So Strawberry uses the --configure-args=--script=pkg-config option when it installs the module in order to work around this problem in the version it installed, but cpan/cpanm/cpanp doesn&#39;t know to KEEP doing that, and what about manual installations outside those programs?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;11:16:36&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 02 08:57:52 2014, kmx@volny.cz wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I simply need a working command &#34;pkg-config&#34; &#40;neither &#34;ppkg-config&#34;
&gt; nor
&gt; &#34;pkg-config.pl&#34; is enough&#41; therefore I install PkgConfig via:
&gt; 
&gt; cpanm PkgConfig --configure-args=--script=pkg-config
</div>
I merged that change, since it was obviously useful.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Troubles with symlinks are mostly during development if you want to
&gt; clone
&gt; github repo and play with some changes as I did. But keep in mind that
&gt; at
&gt; install time on Win32 all symlinks are turned into file copies.
</div>
I find the use of symlinks a little inconvenient when working on Windows but I managed to hold my nose enough to get things working there since I do most of my development on Linux.

To make things a little easier, I&#39;ve just added a script win32/fixlinks.pl which replaces the git symlinks with real windows symlinks &#40;the only drawback is that it requires admin priv&#41;.  This seems to work pretty well at the cost of a little extra effort for windows developers.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; the file &#34;pkg-config&#34; &#40;or &#34;pkg-config.bat&#34; in case on MSWin32&#41; will
&gt; still
&gt; be the copy of the old version.
</div>
I think we can agree though that having an older working version is better than having one that doesn&#39;t work?

As a compromise, I&#39;ve added a PkgConfig::Script::run function which should allow pkg-config to continue working after an upgrade to PkgConfig.

I think you have a couple of other changes in your version, that may be useful if incorporated upstream, and I&#39;d welcome any PR that you have.  The paths seem to be translated from /mingw to the appropriate Strawberry Perl paths for example, which my version does not do.  Although since gcc already knows about those paths, I think the more appropriate approach would be to include /mingw paths in the DEFAULT_EXCLUDE_{CFLAGS,LFLAGS} lists.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;11:46:37&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not to belabor the point, but for clarity, I am totally 100% on board and agree and am excited about the goal of making PkgConfig THE pkg-config for strawberry Perl since the alternative is basically to not have pkg-config in Strawberry.  This can be accomplished with this commit, which is part of the upstream version of PkgConfig:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mnunberg/perl-PkgConfig/commit/427e7b8bbff2f53f502c5f03d1e1f5cc8a3022a4">https://github.com/mnunberg/perl-PkgConfig/commit/427e7b8bbff2f53f502c5f03d1e1f5cc8a3022a4</a></span>

I just don&#39;t see how this goal has anything to do with this commit:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916">https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;13:39:53&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 02 Jun 2014 19:39:38 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think we can agree though that having an older working version is better than having one that doesn&#39;t work?
</div>
Sure.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think you have a couple of other changes in your version, that may be useful if incorporated upstream, and I&#39;d welcome any PR that you have.  The paths seem to be translated from /mingw to the appropriate Strawberry Perl paths for example, which my version does not do.  Although since gcc already knows about those paths, I think the more appropriate approach would be to include /mingw paths in the DEFAULT_EXCLUDE_{CFLAGS,LFLAGS} lists.
</div>
This part is kind of an dirty hack which I am not sure about and 
considering the ugliness I am not sure if I want to propose it as a patch 
upstream.

The trouble with /mingw is that it might be ignored &#40;skipped&#41; when used 
like: -L/mingw/lib or -I/mingw/include but not in case 
-I/mingw/include/freetype2

Patching /mingw like I do now is one possibility &#40;which I do not like&#41; the 
other is to force PkgConfig to somehow override variables:
- prefix=&#34;c:/strawberry/c&#34;
- exec_prefix=&#34;c:/strawberry/c&#34;
- libdir=&#34;c:/strawberry/c/lib&#34;
- includedir=&#34;c:/strawberry/c/include&#34;
NOTE1: I am not sure about back/forward slashes here
NOTE2: some of the *.pc files in strawberry perl are not correct and will 
still return bogus values

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;13:44:09&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 02 Jun 2014 19:43:55 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I just don&#39;t see how this goal has anything to do with this commit:
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916">https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916</a></span>
</div>
This commit &#40;as stated in commit message&#41; is about &#34;no symlinks&#34; - which 
you have rejected and I accept your decision although my opinion is 
different. PkgConfig is simply yours.

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;14:18:56&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 02 13:39:53 2014, kmx@volny.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This part is kind of an dirty hack which I am not sure about and
&gt; considering the ugliness I am not sure if I want to propose it as a
&gt; patch
&gt; upstream.
&gt; 
&gt; The trouble with /mingw is that it might be ignored &#40;skipped&#41; when
&gt; used
&gt; like: -L/mingw/lib or -I/mingw/include but not in case
&gt; -I/mingw/include/freetype2
&gt; 
&gt; Patching /mingw like I do now is one possibility &#40;which I do not like&#41;
&gt; the
&gt; other is to force PkgConfig to somehow override variables:
&gt; - prefix=&#34;c:/strawberry/c&#34;
&gt; - exec_prefix=&#34;c:/strawberry/c&#34;
&gt; - libdir=&#34;c:/strawberry/c/lib&#34;
&gt; - includedir=&#34;c:/strawberry/c/include&#34;
&gt; NOTE1: I am not sure about back/forward slashes here
&gt; NOTE2: some of the *.pc files in strawberry perl are not correct and
&gt; will
&gt; still return bogus values
</div>
Would it be possible for relocation.pl.bat update the .pc files?  That way they would work even in the unlikely event someone had the real c version of pkg-config installed.

I see the point about include/freetype2.  I think the exclude lists don&#39;t exclude subdirectories though I will have to check.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; I just don&#39;t see how this goal has anything to do with this commit:
&gt;&gt;
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916">https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916</a></span>
</div>&gt;
&gt; This commit &#40;as stated in commit message&#41; is about &#34;no symlinks&#34; - which 
&gt; you have rejected and I accept your decision although my opinion is 
&gt; different. PkgConfig is simply yours.
</div>
Can you understand my frustration though when you say you have accepted this, but bundle the forked version anyway?

I bring this commit up because the response to this ticket seems to be &#34;we need this in order to have pkg-config in strawberry&#34;, but it doesn&#39;t seem to me that you have demonstrated this.

I am open to having some smarts to the PkgConfig Makefile.PL, to have it install pkg-config if Strawberry Perl 5.20.0 or better is detected &#40;I don&#39;t want to do this automatically for a MSVC or other non-Strawberry Perl on MSWin32&#41;.  That would  solve the issue of having an old version of pkg-config.

Most people will not be using the --script option for the Makefile.PL and those that do can be expected to deal with the caveats associated with it.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;14:51:21&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 02 Jun 2014 20:51:02 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2.6.2014 20:18, Graham Ollis via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: Perl-Dist-Strawberry
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96132">https://rt.cpan.org/Ticket/Display.html?id=96132</a></span> &gt;
&gt;
&gt; On Mon Jun 02 13:39:53 2014, kmx@volny.cz wrote:
<div class="message-stanza open">&gt;&gt; This part is kind of an dirty hack which I am not sure about and
&gt;&gt; considering the ugliness I am not sure if I want to propose it as a
&gt;&gt; patch
&gt;&gt; upstream.
&gt;&gt;
&gt;&gt; The trouble with /mingw is that it might be ignored &#40;skipped&#41; when
&gt;&gt; used
&gt;&gt; like: -L/mingw/lib or -I/mingw/include but not in case
&gt;&gt; -I/mingw/include/freetype2
&gt;&gt;
&gt;&gt; Patching /mingw like I do now is one possibility &#40;which I do not like&#41;
&gt;&gt; the
&gt;&gt; other is to force PkgConfig to somehow override variables:
&gt;&gt; - prefix=&#34;c:/strawberry/c&#34;
&gt;&gt; - exec_prefix=&#34;c:/strawberry/c&#34;
&gt;&gt; - libdir=&#34;c:/strawberry/c/lib&#34;
&gt;&gt; - includedir=&#34;c:/strawberry/c/include&#34;
&gt;&gt; NOTE1: I am not sure about back/forward slashes here
&gt;&gt; NOTE2: some of the *.pc files in strawberry perl are not correct and
&gt;&gt; will
&gt;&gt; still return bogus values
</div>&gt; Would it be possible for relocation.pl.bat update the .pc files?  That way they would work even in the unlikely event someone had the real c version of pkg-config installed.
</div>
relocation.pl.bat can patch .pc files &#40;providing that I first change all /mingw occurrences to c:/strawberry/c&#41; but it does not solve portable version of strawberry perl.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open"><div class="message-stanza open">&gt;&gt;&gt; I just don&#39;t see how this goal has anything to do with this commit:
&gt;&gt;&gt;
&gt;&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916">https://github.com/StrawberryPerl/perl-PkgConfig/commit/2d4146b8815a88b72257a3f5b10948f92772f916</a></span>
</div>&gt;&gt; This commit &#40;as stated in commit message&#41; is about &#34;no symlinks&#34; - which
&gt;&gt; you have rejected and I accept your decision although my opinion is
&gt;&gt; different. PkgConfig is simply yours.
</div>&gt; Can you understand my frustration though when you say you have accepted this, but bundle the forked version anyway?
</div>
I understand. However PkgConfig is not the only one patched/forked module 
bundled with strawberry perl.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I bring this commit up because the response to this ticket seems to be &#34;we need this in order to have pkg-config in strawberry&#34;, but it doesn&#39;t seem to me that you have demonstrated this.
</div>
The commit in question has message &#34;improved Win32 compatibility - no 
symlinks&#34; and this message is true. I have never claimed that this commit 
is necessary to have pkg-config in strawberry. You have responded &#34;Feel 
free to open a new issue if you want to discuss the symlinks.&#34; - which I do 
not want and thus have not open a new issue.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I am open to having some smarts to the PkgConfig Makefile.PL, to have it install pkg-config if Strawberry Perl 5.20.0 or better is detected &#40;I don&#39;t want to do this automatically for a MSVC or other non-Strawberry Perl on MSWin32&#41;.  That would  solve the issue of having an old version of pkg-config.
</div>
Perhaps making &#34;pkg-config&#34; a default name in case strawberry perl is 
detected would do the trick.


--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;16:17:31&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 02 14:51:21 2014, kmx@volny.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; relocation.pl.bat can patch .pc files &#40;providing that I first change
&gt; all /mingw occurrences to c:/strawberry/c&#41; but it does not solve
&gt; portable version of strawberry perl.
</div>
Is there someway to detect the portable version and where the root is?  This kind of issue must come up with other modules.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I understand. However PkgConfig is not the only one patched/forked
&gt; module
&gt; bundled with strawberry perl.
</div>
I totally sympathize with this since most Perl module authors do not care about Windows at all.  It was not a priority for the previous owner of PkgConfig and so it took a some effort on my part to get it to work at all on Strawberry.

In this case I am willing to work with you or anyone to make PkgConfig more portable and work in Strawberry &#40;or anywhere else&#41;.  If we can improve upstream to the point that you don&#39;t NEED to maintain a fork it means less work for you, and less frustration for me when your version works differently from mine.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The commit in question has message &#34;improved Win32 compatibility - no
&gt; symlinks&#34; and this message is true. I have never claimed that this
&gt; commit
&gt; is necessary to have pkg-config in strawberry. You have responded
&gt; &#34;Feel
&gt; free to open a new issue if you want to discuss the symlinks.&#34; - which
&gt; I do
&gt; not want and thus have not open a new issue.
</div>
Again I am not contesting the intent of the commit, I am contesting the necessity of it given the negative consequences of it.  When I opened this ticket which is related to THIS commit you said

&#34;however I need 
pkg-config in strawberry perl so upgrading troubles by simply running 
&#34;cpanm PkgConfig&#34; &#40;without --configure-args=--script=pkg-config&#41; will last.&#34;

However you do not NEED to include this change in order for pkg-config to work.  And with respect, this change does not &#34;keep as close as possible to upstream PkgConfig&#34;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perhaps making &#34;pkg-config&#34; a default name in case strawberry perl is
&gt; detected would do the trick.
</div>
What I had in mind is to make pkg-config installed in addition to ppkg-config that way it would work as the documentation says that it works.  When you install it using the --script option it would only install the specified versions, thus you could use it as the bundled Strawberry version.  I will include this change in the next version.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;17:11:19&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 02 Jun 2014 23:11:00 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2.6.2014 22:17, Graham Ollis via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Mon Jun 02 14:51:21 2014, kmx@volny.cz wrote:
<div class="message-stanza open">&gt;&gt; relocation.pl.bat can patch .pc files &#40;providing that I first change
&gt;&gt; all /mingw occurrences to c:/strawberry/c&#41; but it does not solve
&gt;&gt; portable version of strawberry perl.
</div>&gt; Is there someway to detect the portable version and where the root is?  This kind of issue must come up with other modules.
</div>
Well, actually we do not have anything like portable perl detection. There 
are some special hacks implemented via Portable module &#40;it handles Config 
values, CPAN::Config values + something else&#41;. Detecting portable perl root 
is the same problem as detecting strawberry perl root e.g.

my $root = $^X =~ s|\\perl\\bin\\perl.exe||r;


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open">&gt;&gt; I understand. However PkgConfig is not the only one patched/forked
&gt;&gt; module
&gt;&gt; bundled with strawberry perl.
</div>&gt; I totally sympathize with this since most Perl module authors do not care about Windows at all.  It was not a priority for the previous owner of PkgConfig and so it took a some effort on my part to get it to work at all on Strawberry.
&gt;
&gt; In this case I am willing to work with you or anyone to make PkgConfig more portable and work in Strawberry &#40;or anywhere else&#41;.  If we can improve upstream to the point that you don&#39;t NEED to maintain a fork it means less work for you, and less frustration for me when your version works differently from mine.
&gt;
<div class="message-stanza open">&gt;&gt; The commit in question has message &#34;improved Win32 compatibility - no
&gt;&gt; symlinks&#34; and this message is true. I have never claimed that this
&gt;&gt; commit
&gt;&gt; is necessary to have pkg-config in strawberry. You have responded
&gt;&gt; &#34;Feel
&gt;&gt; free to open a new issue if you want to discuss the symlinks.&#34; - which
&gt;&gt; I do
&gt;&gt; not want and thus have not open a new issue.
</div>&gt; Again I am not contesting the intent of the commit, I am contesting the necessity of it given the negative consequences of it.  When I opened this ticket which is related to THIS commit you said
&gt;
&gt; &#34;however I need
&gt; pkg-config in strawberry perl so upgrading troubles by simply running
&gt; &#34;cpanm PkgConfig&#34; &#40;without --configure-args=--script=pkg-config&#41; will last.&#34;
&gt;
&gt; However you do not NEED to include this change in order for pkg-config to work.  And with respect, this change does not &#34;keep as close as possible to upstream PkgConfig&#34;.
</div>
It was really nothing against you personally.

During last approx. 10 weeks I have spent nearly all my free time on 
preparing strawberry perl 5.20.0.1 release which has new gcc toolchain + 
new mingw-w64 C-runtime &#40;which I have to build from sources - twice 
32/64bit&#41;, approx 30 external libraries &#40;which I have to build from sources 
- twice 32/64bit&#41; and approx 400 perl modules &#40;all built 3 times - 64bit, 
32bit_with_64bit_int, 32bit_without_64bit_int&#41; + bunch of fixed issues. At 
some point I found PkgConfig to be an easy way for having working 
pkg-config and I simply included my patched/forked version which was &#34;good 
enough&#34; and I stayed with it even after you have released newer version &#40;it 
would required another time - which I was short of - to take your newer 
version and back port my extra hacks&#41;. The same kind of &#34;fork of a bit 
older version&#34; we have for example with ExtUtils::Depends.

That&#39;s it, nothing less, nothing more.

I know that for you PkgConfig is THE module. But for me it is just one from 
four hundred.

Knowing that it will start such a hot discussion I would rather not include 
PkgConfig at all or include it as a Alt::PkgConfig to clearly indicate it 
is a fork &#40;which we have already done for example with Crypt::RSA vs. 
Alt::Crypt::RSA::BigInt - which was however not forked by me&#41;.

Perhaps we should rather move on.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
<div class="message-stanza open">&gt;&gt; Perhaps making &#34;pkg-config&#34; a default name in case strawberry perl is
&gt;&gt; detected would do the trick.
</div>&gt; What I had in mind is to make pkg-config installed in addition to ppkg-config that way it would work as the documentation says that it works.  When you install it using the --script option it would only install the specified versions, thus you could use it as the bundled Strawberry version.  I will include this change in the next version.
</div>
I am fine with having both ppkg-config and pkg-config

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;17:47:19&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 02 17:11:19 2014, kmx@volny.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Well, actually we do not have anything like portable perl detection.
&gt; There
&gt; are some special hacks implemented via Portable module &#40;it handles
&gt; Config
&gt; values, CPAN::Config values + something else&#41;. Detecting portable perl
&gt; root
&gt; is the same problem as detecting strawberry perl root e.g.
&gt; 
&gt; my $root = $^X =~ s|\\perl\\bin\\perl.exe||r;
</div>
Actually the more I think about it I think the best solution is to use ${pcfiledir}.  That would work for both portable and unportable Strawberry.  I&#39;d need to implement this outstanding issue, but I don&#39;t think that would be too difficult.

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mnunberg/perl-PkgConfig/issues/2">https://github.com/mnunberg/perl-PkgConfig/issues/2</a></span>

Strawberry would need to modify the the /mingw/include/freetype2 to be ${pcfiledir}/../include/freetype2 style paths but ideally not the /mingw/include ones &#40;the latter being less important&#41;.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; That&#39;s it, nothing less, nothing more.
</div>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I know that for you PkgConfig is THE module. But for me it is just one
&gt; from
&gt; four hundred.
</div>
Honestly?  PkgConfig is not the extent of my universe.  I have hundreds of modules to deal with too, and I maintain large complicated systems with multiple conflicting interests &#40;32/64/linux/cygwin/MSWin32/*BSD/users/developers/system admins, you name it&#41;.  I don&#39;t refuse help when people offer it just because I can&#39;t make an incompatible change to someone else&#39;s code.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Perhaps we should rather move on.
</div>
Can we please fix this properly?  I think we are pretty close here: the way it stands now you can upgrade PkgConfig, and some things will still work but things like freetype2 won&#39;t.

I&#39;m willing to do the legwork in Strawberry land since I can see this issue is taking your interest.

Is there anything aside from the /mingw paths that we have would need to deal with?  I am not familiar with the extent of changes you made in your fork.  Is it stored in revision control somewhere?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jun&nbsp;02&nbsp;18:28:30&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 03 Jun 2014 00:28:02 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On 2.6.2014 23:47, Graham Ollis via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: Perl-Dist-Strawberry
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=96132">https://rt.cpan.org/Ticket/Display.html?id=96132</a></span> &gt;
&gt;
&gt; On Mon Jun 02 17:11:19 2014, kmx@volny.cz wrote:
<div class="message-stanza open">&gt;&gt; Well, actually we do not have anything like portable perl detection.
&gt;&gt; There
&gt;&gt; are some special hacks implemented via Portable module &#40;it handles
&gt;&gt; Config
&gt;&gt; values, CPAN::Config values + something else&#41;. Detecting portable perl
&gt;&gt; root
&gt;&gt; is the same problem as detecting strawberry perl root e.g.
&gt;&gt;
&gt;&gt; my $root = $^X =~ s|\\perl\\bin\\perl.exe||r;
</div>&gt; Actually the more I think about it I think the best solution is to use ${pcfiledir}.  That would work for both portable and unportable Strawberry.  I&#39;d need to implement this outstanding issue, but I don&#39;t think that would be too difficult.
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/mnunberg/perl-PkgConfig/issues/2">https://github.com/mnunberg/perl-PkgConfig/issues/2</a></span>
&gt;
&gt; Strawberry would need to modify the the /mingw/include/freetype2 to be ${pcfiledir}/../include/freetype2 style paths but ideally not the /mingw/include ones &#40;the latter being less important&#41;.
</div>
This can work and it is for me quite easy to implement. But obviously it 
will work only with future strawberry perl releases that will have properly 
patched .pc files.



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Perhaps we should rather move on.
</div>&gt; Can we please fix this properly?  I think we are pretty close here: the way it stands now you can upgrade PkgConfig, and some things will still work but things like freetype2 won&#39;t.
&gt;
&gt; I&#39;m willing to do the legwork in Strawberry land since I can see this issue is taking your interest.
&gt;
&gt; Is there anything aside from the /mingw paths that we have would need to deal with?  I am not familiar with the extent of changes you made in your fork.  Is it stored in revision control somewhere?
</div>
Patched version is 
<span class="clickylink"><a target="new" rel="nofollow" href="http://strawberryperl.com/package/kmx/perl-modules-patched/PkgConfig-0.07220_99.tar.gz">http://strawberryperl.com/package/kmx/perl-modules-patched/PkgConfig-0.07220_99.tar.gz</a></span>

The only remaining important thing is /mingw patching which can be handled 
via ${pcfiledir}

Some minor issues might pop up later.

--
kmx
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;03&nbsp;08:03:29&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jun 02 18:28:30 2014, kmx@volny.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This can work and it is for me quite easy to implement. But obviously
&gt; it
&gt; will work only with future strawberry perl releases that will have
&gt; properly
&gt; patched .pc files.
</div>
Sounds great, I only offered to help to save you the effort, but if you can do it easily that will save some time.  I think the easiest thing to do is just to do a simple conversion of paths.  I can add both /mingw/include and /mingw/lib/pkgconfig/../../include &#40;and lib equivalents&#41; to the list of ignore paths.  Making sure to include include/freetype2 style paths.

If you can give me some example .pc files I can make sure that my exclusions are correct when I implement them.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The only remaining important thing is /mingw patching which can be
&gt; handled
&gt; via ${pcfiledir}
</div>
Here is a dev version which includes ${pcfiledir} support.

<span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/release/PLICEASE/PkgConfig-0.07520_01/lib/PkgConfig.pm">https://metacpan.org/pod/release/PLICEASE/PkgConfig-0.07520_01/lib/PkgConfig.pm</a></span>

I am also now using $^X instead of $INC{&#39;Config.pm&#39;} to find the root to match how you are doing it.  I went with Config.pm because $^X is somewhat unreliable on some platforms, but since this is MSWin32 specific code that shouldn&#39;t matter &#40;?&#41;

I think something like a Strawberry.pm that reported the root and the type of strawberry &#40;portable, unportable, MSI, zip, etc&#41;, the strawberry release &#40;is that available somewhere?&#41; would be helpful for module authors with unusual requirements who want to support Strawberry.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Some minor issues might pop up later.
</div>
I expect they will.

Question: do you expect to back port PkgConfig / pkg-config to future versions of 5.18 or earlier?  If so I will want to change the logic in my Makefile.PL.  &#40;My slight preference would be not to back port&#41;.

Qestion 2: Is there any time table for 5.20.0.2?  Or are new versions released as necessary?  Or do we wait for 5.20.1?  Not pushing for a release, just wanted to have an idea on what to expect.

I appreciate your hearing me out, I realize this is not necessarily your priority, but I think we will both be glad that we were able to compromise on a less hackish solution.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Jun&nbsp;03&nbsp;08:56:18&nbsp;2014</span>
    <span class="description">csjewell [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jun 03 08:03:29 2014, PLICEASE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think something like a Strawberry.pm that reported the root and the
&gt; type of strawberry &#40;portable, unportable, MSI, zip, etc&#41;, the
&gt; strawberry release &#40;is that available somewhere?&#41; would be helpful for
&gt; module authors with unusual requirements who want to support
&gt; Strawberry.
</div>
$Config::Config{&#39;uname&#39;} is worth testing for some of this. When we build, we jump through hoops to make identifying Strawberry, and the release, accessible there.

Unfortunately, it doesn&#39;t include the fact that it is a &#39;portable&#39; build or not there, but there are specific modules that help implement the portability that could be tested for. KMX can help you out there.

C:\Users\Curtis&gt;perl -V
Summary of my perl5 &#40;revision 5 version 18 subversion 0&#41; configuration:

...
    uname=&#39;Win32 strawberry-perl 5.18.0.1 #1 Sat May 18 19:40:33 2013 x64&#39;
...
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;04&nbsp;04:14:45&nbsp;2014</span>
    <span class="description">kmx [...] volny.cz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #96132] upgrading PkgConfig breakds pkg-config</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 04 Jun 2014 10:14:25 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Perl-Dist-Strawberry [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> kmx &lt;kmx [...] volny.cz&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; If you can give me some example .pc files I can make sure that my exclusions are correct when I implement them.
</div>
see pcfiles.zip - they are not unified &#40;each is a bit different&#41; this is 
how they are produced by the build procedure


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Here is a dev version which includes ${pcfiledir} support.
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://metacpan.org/pod/release/PLICEASE/PkgConfig-0.07520_01/lib/PkgConfig.pm">https://metacpan.org/pod/release/PLICEASE/PkgConfig-0.07520_01/lib/PkgConfig.pm</a></span>
</div>
Your dev version seems to work fine &#40;even with enclosed patched .pc files&#41;. 
I have a question: will it be guaranteed that on strawberry PkgConfig will 
install pkg-config or should I rather use --script=pkg-config option?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I think something like a Strawberry.pm that reported the root and the type of strawberry &#40;portable, unportable, MSI, zip, etc&#41;, the strawberry release &#40;is that available somewhere?&#41; would be helpful for module authors with unusual requirements who want to support Strawberry.
</div>
As Curtis said there is $Config{myuname} which is guaranteed to contain 
&#34;strawberry-perl&#34; string

Maybe we can consider:
$Config{mystrawberryroot} = &#39;C:\Strawberry&#39; &#40;of course properly relocated&#41;
or even maybe:
$Config{mystrawberryportable} = 1 &#40;or undef&#41;

It is just an idea I am not saying I am going to implement it right now.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Question: do you expect to back port PkgConfig / pkg-config to future versions of 5.18 or earlier?  If so I will want to change the logic in my Makefile.PL.  &#40;My slight preference would be not to back port&#41;.
</div>
Definitely not but it might be worth considering whether also pre-5.20 
strawberry users should have pkg-config installed by default &#40;along with 
ppkg-config&#41;.

Or maybe you can  detect in Makefile.PL whether there is already working 
&#39;pkg-config&#39; command and if not then install it.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Qestion 2: Is there any time table for 5.20.0.2?  Or are new versions released as necessary?  Or do we wait for 5.20.1?  Not pushing for a release, just wanted to have an idea on what to expect.
</div>
Unless someone reports a really bad bug/issue/problem/trouble the next 
release will be 5.20.1.1 - which I guess will be in August 2014


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I appreciate your hearing me out, I realize this is not necessarily your priority, but I think we will both be glad that we were able to compromise on a less hackish solution.
</div>
I also want to thank you, especially for your time.

To be honest my current priority is to plug off from strawberry hacking for 
a month or two :&#41;

--
kmx
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1371872/728427/pcfiles.zip">Download pcfiles.zip</a><br />
<span class="downloadcontenttype">application/x-zip-compressed 7.5k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;05&nbsp;05:50:03&nbsp;2014</span>
    <span class="description">PLICEASE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here is a newer dev version which I believe gets the exclusions correct:

<span class="clickylink"><a target="new" rel="nofollow" href="http://cpan.metacpan.org/authors/id/P/PL/PLICEASE/PkgConfig-0.07520_04.tar.gz">http://cpan.metacpan.org/authors/id/P/PL/PLICEASE/PkgConfig-0.07520_04.tar.gz</a></span>

I am going to let it do the rounds on cpantesters for a few days and then I will cut a production release.  If you have any concerns, please let me know.  By the time you do the next release of Strawberry, this should have made it to production.

On Wed Jun 04 04:14:45 2014, kmx@volny.cz wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; see pcfiles.zip - they are not unified &#40;each is a bit different&#41; this
&gt; is
&gt; how they are produced by the build procedure
</div>
Exactly what I wanted to see, thanks.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Your dev version seems to work fine &#40;even with enclosed patched .pc
&gt; files&#41;.
&gt; I have a question: will it be guaranteed that on strawberry PkgConfig
&gt; will
&gt; install pkg-config or should I rather use --script=pkg-config option?
</div>
This is the way I did it:

1. on Strawberry Perl 5.20.0.1 or better &#40;but not MSWin32 generally&#41; both ppkg-config and pkg-config will be installed by default when installed by the user from CPAN

2. on Strawberry Perl 5.18.* and earlier &#40;and MSWin32 generally&#41; only ppkg-config will be installed when installed by the user from CPAN.

My recommendation is that Strawberry use the --script=pkg-config option and ONLY install pkg-config for its bundled version.  I feel that someone who is used to PkgConfig and ppkg-config can reasonably expect ppkg-config to be there if they manually install it from CPAN, but the vast majority of users will not expect or need ppkg-config.  I guess you also get it with an upgrade which might be part of an automated process.

My rationale for not installing pkg-config by default on older Strawberries is that the .pc files aren&#39;t going to be right for things like freetype2, and it also sort of changes the behavior of Strawberry after 5.18/16.* have been in production for a long time.

I have included instructions and a script for manually patching the .pc files and installing pkg-config on older Strawberries.  If the user does need this capability they can proactively choose to make the changes themselves, but I feel it shouldn&#39;t happen automatically.

If you have any concerns with this strategy, please let me know.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; As Curtis said there is $Config{myuname} which is guaranteed to
&gt; contain
&gt; &#34;strawberry-perl&#34; string
</div>
I would kind of like to see an API for this sort of thing, but this is adequate.  Are these special configuration items documented anywhere?  When I was looking for Strawberry detection I did eventually stumble on a stack overflow with the myuname suggestion, but I didn&#39;t feel totally confident about its permanence since I couldn&#39;t find any documentation on it.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Maybe we can consider:
&gt; $Config{mystrawberryroot} = &#39;C:\Strawberry&#39; &#40;of course properly
&gt; relocated&#41;
&gt; or even maybe:
&gt; $Config{mystrawberryportable} = 1 &#40;or undef&#41;
&gt; 
&gt; It is just an idea I am not saying I am going to implement it right
&gt; now.
</div>
Definitely portable entry would be useful for diagnostics.  Maybe make it 0 or 1, and undef can be for older Strawberries which do not include have the value at all?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Definitely not but it might be worth considering whether also pre-5.20
&gt; strawberry users should have pkg-config installed by default &#40;along
&gt; with
&gt; ppkg-config&#41;.
</div>
As above I feel that installing pkg-config on pre-5.20 should be part of an active choice the user makes.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Or maybe you can  detect in Makefile.PL whether there is already
&gt; working
&gt; &#39;pkg-config&#39; command and if not then install it.
</div>
So I hesitate to do this since I am not totally confident that I won&#39;t accidentally override another working pkg-config.  I feel as though if there is a pkg-config there already then it is either because 

1. The user has used --script option previously to force its inclusion, and thus probably knows enough about PkgConfig to use it again
2. They are using 5.20, in which case PkgConfig will install pkg-config anyway
3. They have the C version of pkg-config.exe 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unless someone reports a really bad bug/issue/problem/trouble the next
&gt; release will be 5.20.1.1 - which I guess will be in August 2014
</div>
This sounds fine to me, I don&#39;t think this issue by itself is urgent enough for a new Strawberry release.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; To be honest my current priority is to plug off from strawberry
&gt; hacking for
&gt; a month or two :&#41;
</div>
Enjoy your time on other pursuits :&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;17&nbsp;10:38:14&nbsp;2014</span>
    <span class="description">kmx [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza">Should be fixed in strawberry perl 5.20.1.1 which was reelased today
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;17&nbsp;10:38:16&nbsp;2014</span>
    <span class="description">kmx [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
