<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #117975 for Specio: Installation fails on OSX El Capitan</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #117975 for Specio: Installation fails on OSX El Capitan</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Specio/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Specio/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Specio/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Specio/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/houseabsolute/Specio/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Specio">Specio CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">117975</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Specio/Active/">Specio</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mg.pub [...] gmx.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-248638-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.25    </td>
  </tr>
  <tr id="CF-248639-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.26    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;06:19:40&nbsp;2016</span>
    <span class="description">mg.pub [...] gmx.net -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Installation fails on OSX El Capitan</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Trying to install Specio 0.25 via cpanm:

t/00-report-prereqs.t ... ok
Can&#39;t resolve method &#34;???&#34; overloading &#34;&#38;{}&#34; in package &#34;Specio::Constraint::Simple&#34; at Specio::Constraint::Simple-&gt;new 
line 35.
Compilation failed in require at t/anon.t line 7.
BEGIN failed--compilation aborted at t/anon.t line 7.

perl -v

This is perl 5, version 18, subversion 2 &#40;v5.18.2&#41; built for darwin-thread-multi-2level
&#40;with 2 registered patches, see perl -V for more detail&#41;

This is the native Perl of OS X El Capitan. Unfortunately this blocks the installation of important modules like DateTime::Locale &#40;and thus DateTime&#41; as well.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;10:45:51&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-09-20 05:19:40, mgruner wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Trying to install Specio 0.25 via cpanm:
&gt; 
&gt; t/00-report-prereqs.t ... ok
&gt;  Can&#39;t resolve method &#34;???&#34; overloading &#34;&#38;{}&#34; in package
&gt; &#34;Specio::Constraint::Simple&#34; at Specio::Constraint::Simple-&gt;new
&gt; line 35.
&gt; Compilation failed in require at t/anon.t line 7.
&gt; BEGIN failed--compilation aborted at t/anon.t line 7.
&gt; 
&gt; perl -v
&gt; 
&gt; This is perl 5, version 18, subversion 2 &#40;v5.18.2&#41; built for darwin-
&gt; thread-multi-2level
&gt; &#40;with 2 registered patches, see perl -V for more detail&#41;
&gt; 
&gt; This is the native Perl of OS X El Capitan. Unfortunately this blocks
&gt; the installation of important modules like DateTime::Locale &#40;and thus
&gt; DateTime&#41; as well.
</div>
This sounds like some sort of core Perl bug, except that this module works fine with Perl 5.18 in my testing. Does the OSX native Perl have any special patches &#40;look at &#34;perl -V&#34; for details&#41;?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;10:45:51&nbsp;2016</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;10:54:50&nbsp;2016</span>
    <span class="description">mg.pub [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> mg.pub [...] gmx.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the fast response! Here is the info from my system. I&#39;m not actively using Perlbrew, although it is installed.

perl -V
Summary of my perl5 &#40;revision 5 version 18 subversion 2&#41; configuration:
   
  Platform:
    osname=darwin, osvers=15.0, archname=darwin-thread-multi-2level
    uname=&#39;darwin osx219.apple.com 15.0 darwin kernel version 15.0.0: fri may 22 22:03:51 pdt 2015; root:xnu-3216.0.0.1.11~1development_x86_64 x86_64 &#39;
    config_args=&#39;-ds -e -Dprefix=/usr -Dccflags=-g  -pipe  -Dldflags= -Dman3ext=3pm -Duseithreads -Duseshrplib -Dinc_version_list=none -Dcc=cc&#39;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#39;cc&#39;, ccflags =&#39;-arch i386 -arch x86_64 -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector&#39;,
    optimize=&#39;-Os&#39;,
    cppflags=&#39;-g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector&#39;
    ccversion=&#39;&#39;, gccversion=&#39;4.2.1 Compatible Apple LLVM 7.0.0 &#40;clang-700.0.59.1&#41;&#39;, gccosandvers=&#39;&#39;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#39;long&#39;, ivsize=8, nvtype=&#39;double&#39;, nvsize=8, Off_t=&#39;off_t&#39;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#39;cc -mmacosx-version-min=10.11.3&#39;, ldflags =&#39;-arch i386 -arch x86_64 -fstack-protector&#39;
    libpth=/usr/lib /usr/local/lib
    libs= 
    perllibs=
    libc=, so=dylib, useshrplib=true, libperl=libperl.dylib
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;, lddlflags=&#39;-arch i386 -arch x86_64 -bundle -undefined dynamic_lookup -fstack-protector&#39;


Characteristics of this binary &#40;from libperl&#41;: 
  Compile-time options: HAS_TIMES MULTIPLICITY PERLIO_LAYERS
                        PERL_DONT_CREATE_GVSV
                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
                        PERL_PRESERVE_IVUV PERL_SAWAMPERSAND USE_64_BIT_ALL
                        USE_64_BIT_INT USE_ITHREADS USE_LARGE_FILES
                        USE_LOCALE USE_LOCALE_COLLATE USE_LOCALE_CTYPE
                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF
                        USE_REENTRANT_API
  Locally applied patches:
        /Library/Perl/Updates/&lt;version&gt; comes before system perl directories
        installprivlib and installarchlib points to the Updates directory
  Built under darwin
  Compiled at Aug 11 2015 04:22:26
  %ENV:
    PERLBREW_BASHRC_VERSION=&#34;0.76&#34;
    PERLBREW_HOME=&#34;/Users/martin/.perlbrew&#34;
    PERLBREW_PATH=&#34;/Users/martin/perl5/perlbrew/bin&#34;
    PERLBREW_ROOT=&#34;/Users/martin/perl5/perlbrew&#34;
    PERLBREW_VERSION=&#34;0.73&#34;
  @INC:
    /Library/Perl/5.18/darwin-thread-multi-2level
    /Library/Perl/5.18
    /Network/Library/Perl/5.18/darwin-thread-multi-2level
    /Network/Library/Perl/5.18
    /Library/Perl/Updates/5.18.2/darwin-thread-multi-2level
    /Library/Perl/Updates/5.18.2
    /System/Library/Perl/5.18/darwin-thread-multi-2level
    /System/Library/Perl/5.18
    /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level
    /System/Library/Perl/Extras/5.18
    .
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;10:57:46&nbsp;2016</span>
    <span class="description">mg.pub [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> mg.pub [...] gmx.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I actually noticed this because our Travis CI scenarios started failing a few days ago, for different versions of Perl &#40;5.14 to 5.22&#41;. We install &#34;DateTime&#34; via cpanm with --notest, which works fine, but then causes errors:

<span class="clickylink"><a target="new" rel="nofollow" href="https://travis-ci.org/OTRS/otrs/jobs/161325250">https://travis-ci.org/OTRS/otrs/jobs/161325250</a></span>

 Message: Kernel::System::DateTime could not be loaded: Attempt to reload DateTime.pm aborted.
Compilation failed in require at /home/travis/build/OTRS/otrs/Kernel/System/DateTime.pm line 26.

So I&#39;m not sure if this is actually OSX related. Downgrading to versions that don&#39;t rely on Specio makes the errors go away again.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;11:25:43&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-09-20 09:57:46, mgruner wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I actually noticed this because our Travis CI scenarios started
&gt; failing a few days ago, for different versions of Perl &#40;5.14 to 5.22&#41;.
&gt; We install &#34;DateTime&#34; via cpanm with --notest, which works fine, but
&gt; then causes errors:
&gt; 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://travis-ci.org/OTRS/otrs/jobs/161325250">https://travis-ci.org/OTRS/otrs/jobs/161325250</a></span>
&gt; 
&gt; Message: Kernel::System::DateTime could not be loaded: Attempt to
&gt; reload DateTime.pm aborted.
&gt; Compilation failed in require at
&gt; /home/travis/build/OTRS/otrs/Kernel/System/DateTime.pm line 26.
&gt; 
&gt; So I&#39;m not sure if this is actually OSX related. Downgrading to
&gt; versions that don&#39;t rely on Specio makes the errors go away again.
</div>
That looks like a different issue entirely. Why is your code attempting to reload DateTime? That&#39;s an error message from the perl core that I&#39;ve only seen when something weird happens, and I don&#39;t think it&#39;s related to the OSX issue.

That error happens with code like this:

  eval { require Foo };
  require Foo;

If Foo.pm contains some sort of syntax error and the first attempt to load it doesn&#39;t cause the program to die, attempting to load it later gives you that error.

So why are you trying to load DateTime once, failing to load it, and then trying again? I really don&#39;t know. Regardless, this sounds like it could be a bug in OTRS itself.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;12:44:10&nbsp;2016</span>
    <span class="description">mg.pub [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #117975] Installation fails on OSX El Capitan</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 20 Sep 2016 18:43:54 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Specio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Martin Gruner &lt;mg.pub [...] gmx.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Dave,

this might really be unrelated, but it is another issue that started showing up just recently. What we do in our unit tests at some places is to first delete DateTime.pm from %INC &#40;as it had been loaded before in the tested code&#41; and then requiring it again to make sure it catches a globally overriden CORE::GLOBAL::time and similar functions to simulate a fixed time in our tests - we found this reload neccessary so far. It worked fine until just recently, with the latest version of DateTime this no longer works. Would you have a clue about this?

Best regards, Martin

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Am 20.09.2016 um 17:25 schrieb Dave Rolsky via RT &lt;bug-Specio@rt.cpan.org&gt;:
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=117975">https://rt.cpan.org/Ticket/Display.html?id=117975</a></span> &gt;
&gt; 
&gt; On 2016-09-20 09:57:46, mgruner wrote:
<div class="message-stanza open">&gt;&gt; I actually noticed this because our Travis CI scenarios started
&gt;&gt; failing a few days ago, for different versions of Perl &#40;5.14 to 5.22&#41;.
&gt;&gt; We install &#34;DateTime&#34; via cpanm with --notest, which works fine, but
&gt;&gt; then causes errors:
&gt;&gt; 
&gt;&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://travis-ci.org/OTRS/otrs/jobs/161325250">https://travis-ci.org/OTRS/otrs/jobs/161325250</a></span>
&gt;&gt; 
&gt;&gt; Message: Kernel::System::DateTime could not be loaded: Attempt to
&gt;&gt; reload DateTime.pm aborted.
&gt;&gt; Compilation failed in require at
&gt;&gt; /home/travis/build/OTRS/otrs/Kernel/System/DateTime.pm line 26.
&gt;&gt; 
&gt;&gt; So I&#39;m not sure if this is actually OSX related. Downgrading to
&gt;&gt; versions that don&#39;t rely on Specio makes the errors go away again.
</div>&gt; 
&gt; That looks like a different issue entirely. Why is your code attempting to reload DateTime? That&#39;s an error message from the perl core that I&#39;ve only seen when something weird happens, and I don&#39;t think it&#39;s related to the OSX issue.
&gt; 
&gt; That error happens with code like this:
&gt; 
&gt;  eval { require Foo };
&gt;  require Foo;
&gt; 
&gt; If Foo.pm contains some sort of syntax error and the first attempt to load it doesn&#39;t cause the program to die, attempting to load it later gives you that error.
&gt; 
&gt; So why are you trying to load DateTime once, failing to load it, and then trying again? I really don&#39;t know. Regardless, this sounds like it could be a bug in OTRS itself.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;20&nbsp;12:46:11&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2016-09-20 11:44:10, mgruner wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello Dave,
&gt; 
&gt; this might really be unrelated, but it is another issue that started
&gt; showing up just recently. What we do in our unit tests at some places
&gt; is to first delete DateTime.pm from %INC &#40;as it had been loaded before
&gt; in the tested code&#41; and then requiring it again to make sure it
&gt; catches a globally overriden CORE::GLOBAL::time and similar functions
&gt; to simulate a fixed time in our tests - we found this reload
&gt; neccessary so far. It worked fine until just recently, with the latest
&gt; version of DateTime this no longer works. Would you have a clue about
&gt; this?
</div>
This is definitely not related, and it&#39;s really not supported very well by Perl itself. It sort of works, but generally speaking reloading an existing module is asking for trouble.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;21&nbsp;04:25:53&nbsp;2016</span>
    <span class="description">mg.pub [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> mg.pub [...] gmx.net</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Dave,

thanks for your advice. I believe I was able to sort the reload problem by not reloading any more and instead overriding DateTime::_core_time instead, seems to work fine. Thanks!

Best regards, Martin

Am Di 20. Sep 2016, 12:46:11, DROLSKY schrieb:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2016-09-20 11:44:10, mgruner wrote:
<div class="message-stanza open">&gt; &gt; Hello Dave,
&gt; &gt;
&gt; &gt; this might really be unrelated, but it is another issue that started
&gt; &gt; showing up just recently. What we do in our unit tests at some places
&gt; &gt; is to first delete DateTime.pm from %INC &#40;as it had been loaded
&gt; &gt; before
&gt; &gt; in the tested code&#41; and then requiring it again to make sure it
&gt; &gt; catches a globally overriden CORE::GLOBAL::time and similar functions
&gt; &gt; to simulate a fixed time in our tests - we found this reload
&gt; &gt; neccessary so far. It worked fine until just recently, with the
&gt; &gt; latest
&gt; &gt; version of DateTime this no longer works. Would you have a clue about
&gt; &gt; this?
</div>&gt; 
&gt; This is definitely not related, and it&#39;s really not supported very
&gt; well by Perl itself. It sort of works, but generally speaking
&gt; reloading an existing module is asking for trouble.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;01:36:45&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I realized that this was because I needed to depend on Role::Tiny 1.003003. This should be fixed in the latest release.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;01:36:50&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Sep&nbsp;25&nbsp;01:37:00&nbsp;2016</span>
    <span class="description">DROLSKY [...] cpan.org -  Fixed in 0.26 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Sep&nbsp;26&nbsp;03:19:53&nbsp;2016</span>
    <span class="description">mg.pub [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #117975] Installation fails on OSX El Capitan</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Sep 2016 09:19:41 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Specio [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Martin Gruner &lt;mg.pub [...] gmx.net&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I can confirm that this issue is now fixed. Thank you very much!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Am 25.09.2016 um 07:36 schrieb Dave Rolsky via RT &lt;bug-Specio@rt.cpan.org&gt;:
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=117975">https://rt.cpan.org/Ticket/Display.html?id=117975</a></span> &gt;
&gt; 
&gt; I realized that this was because I needed to depend on Role::Tiny 1.003003. This should be fixed in the latest release.
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
