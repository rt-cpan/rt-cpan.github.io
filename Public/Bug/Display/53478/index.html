<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #53478 for Module-Build: Diffs with ActiveState HTML generation and PPM compatibility</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #53478 for Module-Build: Diffs with ActiveState HTML generation and PPM compatibility</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Module-Build/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Module-Build/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Module-Build/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Module-Build/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Module-Build">Module-Build CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">53478</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Module-Build/Active/">Module-Build</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
KEICHNER [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
JDB [...] cpan.org

<br />
klaus03 [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-21558-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-21559-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;07&nbsp;09:11:16&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> klaus03 [...] gmail.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ExtUtils::Command::MM - resolving problems with ActiveState</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza">As described in&nbsp;<a href="http://groups.google.com/group/perl.module-authors/msg/2f6db1f9dee97858"><span class="clickylink"><a target="new" rel="nofollow" href="http://groups.google.com/group/perl.module-authors/msg/2f6db1f9dee97858">http://groups.google.com/group/perl.module-authors/msg/2f6db1f9dee97858</a></span></a>&nbsp;,<br>

&nbsp;<br>

There are problems in the way that Module::Build interacts with ActiveState Perl, those problems are: <br>

<br>

- HTML generated with Module::Build is not conform <br>

&nbsp; with the way HTML is generated by ActiveState / <br>

&nbsp; ExtUtils::MakeMaker&nbsp;<br>

<br>

- with Module::Build, ActiveState's Table of Contents <br>

&nbsp; (html\index.html) is not updated (with <br>

&nbsp; ExtUtils::MakeMaker it is updated)&nbsp;<br>

<br>

- with Module::Build, the file 'lib/perllocal.pod' is not <br>

&nbsp; updated, which leaves ActiveState's PPM-utility in <br>

&nbsp; the dark about the newly installed distribution. (with <br>

&nbsp; ExtUtils::MakeMaker the file 'lib/perllocal.pod' is <br>

&nbsp; correctly updated)&nbsp;<br>

<br>

I have a patch that fixes those problems. 3 modules are to be patched: <br>

&quot;ActivePerl::DocTools::Pod&quot;, &quot;ExtUtils::Command::MM&quot; and &quot;Module::Build::Base&quot;. <br>

<br>

The main patch is in &quot;Module::Build::Base&quot;, but before&nbsp;this can be done, &quot;ExtUtils::Command::MM&quot; needs to be patched as described in the attached file &quot;ExtUtils-Command-MM.txt&quot;. (I will also talk to ActiveState about patching &quot;ActivePerl::DocTools::Pod&quot;)<br>

<br>

Functionally nothing changes in &quot;ExtUtils::Command::MM&quot;, only a new subroutine perllocal_instd()&nbsp;will be&nbsp;exposed (to be called later by &quot;Module::Build::Base&quot;) that allows to extract the textual representation of what the existing subroutine perllocal_install() does.<br>
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ExtUtils-Command-MM.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/ExtUtils/Command/MM.pm.bak     2010-01-06 15:17:20.201000000 +0100
+++ lib/ExtUtils/Command/MM.pm         2010-01-06 15:17:20.201000000 +0100
@@ -206,6 +206,13 @@
     my @mod_info = $Is_VMS ? split /\|/, &lt;STDIN&gt;
                            : @ARGV;

+    print perllocal_instd&#40;$type, $name, @mod_info&#41;;
+}
+
+sub perllocal_instd {
+    my&#40;$type, $name&#41; = splice&#40;@_, 0, 2&#41;;
+    my @mod_info = @_;
+
     my $pod;
     $pod = sprintf &lt;&lt;POD, scalar localtime;
  =head2 %s: C&lt;$type&gt; L&lt;$name|$name&gt;
@@ -228,9 +235,8 @@

     $pod .= &#34;=back\n\n&#34;;
     $pod =~ s/^ //mg;
-    print $pod;

-    return 1;
+    return $pod;
 }

 =item B&lt;uninstall&gt;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;07&nbsp;09:15:26&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;07&nbsp;17:03:31&nbsp;2010</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> yves [...] cpan.org, Ken Williams &lt;kwilliams [...] cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53478] ExtUtils::Command::MM - resolving problems with ActiveState</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 07 Jan 2010 14:03:08 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for noticing all this and working up some patches.  Unfortunately I 
can&#39;t accept them quite so quickly, there&#39;s some things to discuss.


Klaus Eichner via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There are problems in the way that Module::Build interacts with 
&gt; ActiveState Perl, those problems are:
&gt; 
&gt; - HTML generated with Module::Build is not conform
&gt;   with the way HTML is generated by ActiveState /
&gt;   ExtUtils::MakeMaker 
</div>
Should MB be conforming to ActiveState or ActiveState to MB?  What&#39;s the 
difference between the two?  I think that needs to be discussed rather than 
just blindly doing what ActiveState does.

The amount of ActiveState specific code the patch puts into MB also makes me 
unhappy.  I would rather see them harmonize than have a &#34;if we&#39;re on 
ActiveState do X, else do Y&#34;.  Having an HTML TOC available everywhere might 
not be a bad idea.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; - with Module::Build, ActiveState&#39;s Table of Contents
&gt;   &#40;html\index.html&#41; is not updated &#40;with
&gt;   ExtUtils::MakeMaker it is updated&#41; 
</div>
MakeMaker has no built in HTML generation support, so this is an ActiveState 
patch.  Upgrading MakeMaker from a non-ActiveState source will make it go away.

Putting HTML building back into MakeMaker stalled out last year.  You can see 
where this left off.
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/schwern/extutils-makemaker/tree/installhtml">http://github.com/schwern/extutils-makemaker/tree/installhtml</a></span>
<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=37806">https://rt.cpan.org/Ticket/Display.html?id=37806</a></span>


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; - with Module::Build, the file &#39;lib/perllocal.pod&#39; is not
&gt;   updated, which leaves ActiveState&#39;s PPM-utility in
&gt;   the dark about the newly installed distribution. &#40;with
&gt;   ExtUtils::MakeMaker the file &#39;lib/perllocal.pod&#39; is
&gt;   correctly updated&#41; 
</div>
What is PPM using perllocal for?


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have a patch that fixes those problems. 3 modules are to be patched:
&gt; &#34;ActivePerl::DocTools::Pod&#34;, &#34;ExtUtils::Command::MM&#34; and 
&gt; &#34;Module::Build::Base&#34;.
&gt; 
&gt; The main patch is in &#34;Module::Build::Base&#34;, but before this can be done, 
&gt; &#34;ExtUtils::Command::MM&#34; needs to be patched as described in the attached 
&gt; file &#34;ExtUtils-Command-MM.txt&#34;. &#40;I will also talk to ActiveState about 
&gt; patching &#34;ActivePerl::DocTools::Pod&#34;&#41;
&gt; 
&gt; Functionally nothing changes in &#34;ExtUtils::Command::MM&#34;, only a new 
&gt; subroutine perllocal_instd&#40;&#41; will be exposed &#40;to be called later by 
&gt; &#34;Module::Build::Base&#34;&#41; that allows to extract the textual representation 
&gt; of what the existing subroutine perllocal_install&#40;&#41; does.
</div>
Module::Build shouldn&#39;t be depending on MakeMaker, particularly new versions 
of MakeMaker, so the patch is right out.  Sorry.

perllocal.pod is pretty much a dead end, its not particularly useful or 
accurate information and not in a particularly useful format.  If you want to 
pursue having MB update it, it should probably be done inside 
ExtUtils::Install which both MakeMaker and MB use.


-- 
151. The proper way to report to my Commander is &#34;Specialist Schwarz,
      reporting as ordered, Sir&#34; not &#34;You can&#39;t prove a thing!&#34;
     -- The 213 Things Skippy Is No Longer Allowed To Do In The U.S. Army
            <span class="clickylink"><a target="new" rel="nofollow" href="http://skippyslist.com/list/">http://skippyslist.com/list/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;08&nbsp;10:14:28&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> schwern [...] pobox.com, klaus03 [...] gmail.com, yves [...] cpan.org,
 kwilliams [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza">Le Jeu 07 Jan 2010 17:03:31, schwern@pobox.com a &eacute;crit&nbsp;: <br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for noticing all this and working up some patches.<br>
</div><br>

Thanks for your quick response.<br>

<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfortunately I <br>

&gt; can't accept them quite so quickly, there's some things to discuss. <br>

&gt; <br>

&gt; Klaus Eichner via RT wrote: <br>
<div class="message-stanza open">&gt; &gt; There are problems in the way that Module::Build interacts with <br>

&gt; &gt; ActiveState Perl, those problems are: <br>

&gt; &gt; <br>

&gt; &gt; - HTML generated with Module::Build is not conform <br>

&gt; &gt; with the way HTML is generated by ActiveState / <br>

&gt; &gt; ExtUtils::MakeMaker <br>
</div>&gt; <br>

&gt; Should MB be conforming to ActiveState or ActiveState to MB?<br>

&gt; &nbsp;What's&nbsp;the&nbsp;difference between the two? I think that needs to<br>

&gt; be discussed rather&nbsp;than&nbsp;just blindly doing what ActiveState<br>

&gt;&nbsp;does. <br>
</div><br>

I agree.<br>

<br>

There are&nbsp;3&nbsp;differences in the way that MB and AS (=ActiveState/ExtUtils::MakeMaker)&nbsp;use Pod::Html::pod2html():<br>

<br>

(Diff 1)&nbsp;In case of&nbsp;$self-&gt;installdir = 'site'<br>

&nbsp;&nbsp;&nbsp;* MB uses option &quot;--htmlroot =../../../site&quot;&nbsp;in&nbsp;Pod::Html::pod2html()<br>

&nbsp;&nbsp;&nbsp;*&nbsp;AS uses&nbsp;option &quot;--htmlroot=../../..&quot; in&nbsp;Pod::Html::pod2html()<br>

<br>

(Diff 2)&nbsp;other options in&nbsp;Pod::Html::pod2html()<br>

&nbsp;&nbsp;* MB uses option &quot;--flush&quot; and &quot;--title&quot;, but&nbsp;has no option &quot;--quiet&quot;,&nbsp;&quot;--index&quot; or&nbsp;&quot;--libpods=perlfunc:...&quot;<br>

&nbsp;&nbsp;* AS has no option &quot;--flush&quot; or &quot;--title&quot;, but uses option &quot;--quiet&quot;, &quot;--index&quot; and&nbsp;&quot;--libpods=perlfunc:...&quot;<br>

<br>

(Diff 3) The way the output of Pod::Html::pod2html() is treated:<br>

&nbsp; * MB accepts the HTML&nbsp;that is generated by&nbsp;Pod::Html::pod2html() as is<br>

&nbsp; * AS&nbsp;manipulates the HTML that is generated by&nbsp;Pod::Html::pod2html()<br>

&nbsp;<br>

As a consequence of point (Diff 3) AS&nbsp;performs the following manipulations in ActivePerl::DocTools::Pod, subroutine pod2html:<br>

<br>

The following manipulations,&nbsp;performed by AS but not by MB, are *not* AS-specific:<br>

&nbsp;&nbsp;* (Diff 3-a1)&nbsp;Comment&nbsp;found in&nbsp;in ActivePerl::DocTools::Pod<br>

&nbsp;&nbsp;&nbsp;&nbsp; # Despite what Pod::Html says, this is not XHTML.<br>

&nbsp;&nbsp;&nbsp;&nbsp; # IE6 doesn't display things correctly with the wrong DOCTYPE.<br>

&nbsp; * (Diff 3-a2) Modify &lt;!DOCTYPE&gt;<br>

&nbsp; &nbsp;&nbsp;&nbsp; before:&nbsp;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;<a href="http://www.google.com/url?sa=D&amp;q=http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&amp;usg=AFQjCNGyZvRlhcV5U74tS6HQEnjRAh3Y6w" target="_blank"><span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</a></span></a>&quot;&gt;<br>

&nbsp;&nbsp;&nbsp; &nbsp; after:&nbsp;&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;<br>

&nbsp; *&nbsp;(Diff 3-a3) Modify&nbsp;&lt;html xmlns=&quot;<a href="http://www.google.com/url?sa=D&amp;q=http://www.w3.org/1999/xhtml&amp;usg=AFQjCNFx6iI5yL1TV5v1Hh0NXafIXxp4uw" target="_blank"><span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a></span></a>&quot;&gt; into&nbsp;a simple&nbsp;&lt;html&gt;<br>

&nbsp; * (Diff 3-a4) if&nbsp; &quot;--index&quot; was requested, then extract /&lt;TITLE&gt;(.*?)&lt;\/TITLE&gt;/i from the HTML&nbsp;and write &lt;h1&gt;&lt;a&gt;$1&lt;/a&gt;&lt;/h1&gt;<br>

<br>

The following manipulations, again performed by AS but not by MB, *are* AS-specific:<br>


<div>&nbsp; * (Diff 3-b1) Add the following lines directly after &lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;!-- saved from url=(0017)<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/">http://localhost/</a></span> --&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;script language=&quot;JavaScript&quot; src=&quot;$html_root/displayToc.js&quot;&gt;&lt;/script&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;script language=&quot;JavaScript&quot; src=&quot;$html_root/tocParas.js&quot;&gt;&lt;/script&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;script language=&quot;JavaScript&quot; src=&quot;$html_root/tocTab.js&quot;&gt;&lt;/script&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;$html_root/scineplex.css&quot;&gt;<br>
&nbsp;&nbsp;*&nbsp;(Diff 3-b2) Add the following line before&nbsp;&lt;p&gt;&lt;a name=&quot;__index__&quot;&gt;&lt;/a&gt;&lt;/p&gt;,... or before &lt;h1&gt;...&lt;/h1&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&gt;writelinks('__top__',$depth);&lt;/script&gt;<br>
<br>
&gt; The amount of ActiveState specific code the patch puts into MB also <br>
&gt; makes me&nbsp;unhappy. I would rather see them harmonize than<br>
&gt; have a &quot;if we're on&nbsp;ActiveState do X, else do Y&quot;.<br>
<br>
I agree,&nbsp;and I think that, with regards to points (Diff 1) and (Diff 2), AS should move this functionality (which is currently used only in ExtUtils::MakeMaker)&nbsp;to MB, wrapped into an ActiveState Module.<br>
<br>
With regards to point (Diff 3 a), the non-AS specific part:&nbsp;I think that MB should investigate the comments (Diff 3-a1) --&gt; (&quot;...IE6 doesn't display things correctly...&quot;)&nbsp;and the manipulation (Diff 3-a4) --&gt; (&quot;write &lt;h1&gt;&lt;a&gt;$1&lt;/a&gt;&lt;/h1&gt;&quot;) and decide whether or not to conform with AS.<br>
<br>
With regards to point (Diff 3 b), the AS specific part:&nbsp;I think that AS, again,&nbsp;should move this functionality (which is currently used only in ExtUtils::MakeMaker)&nbsp;to MB, wrapped into an ActiveState Module.<br>
<br>
&gt;&nbsp;Having an HTML TOC available everywhere <br>
&gt; might&nbsp; not be a bad idea.&nbsp;<br>
<br>
I currently have some free time, I could write some code. Do you have any suggestions as to where the code should be placed (an existing module ?, or a new module ?&nbsp;in the Module::Build namespace ?)<br>
<br>
&gt; &gt; - with Module::Build, ActiveState's Table of Contents <br>
&gt; &gt; (html\index.html) is not updated (with <br>
&gt; &gt; ExtUtils::MakeMaker it is updated) <br>
&gt; <br>
&gt; MakeMaker has no built in HTML generation support, so this is an <br>
&gt; ActiveState <br>
&gt; patch. Upgrading MakeMaker from a non-ActiveState source will make it <br>
&gt; go away. <br>
&gt; <br>
&gt; Putting HTML building back into MakeMaker stalled out last year. You <br>
&gt; can see <br>
&gt; where this left off. <br>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/schwern/extutils-makemaker/tree/installhtml">http://github.com/schwern/extutils-makemaker/tree/installhtml</a></span> <br>
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=37806&#38;nbsp">https://rt.cpan.org/Ticket/Display.html?id=37806&#38;nbsp</a></span>;<br>
<br>
Another good reason to use&nbsp;Module::Build<br>
<br>
&gt; &gt; - with Module::Build, the file 'lib/perllocal.pod' is not <br>
&gt; &gt; updated, which leaves ActiveState's PPM-utility in <br>
&gt; &gt; the dark about the newly installed distribution. (with <br>
&gt; &gt; ExtUtils::MakeMaker the file 'lib/perllocal.pod' is <br>
&gt; &gt; correctly updated)&nbsp;<br>
<br>
[re-arranged from the bottom]:<br>
&gt; perllocal.pod is pretty much a dead end, its not particularly<br>
&gt; useful&nbsp;or&nbsp;accurate information and not in a particularly<br>
&gt;&nbsp;useful format. If you&nbsp;want to&nbsp;pursue having MB update it,<br>
&gt;&nbsp;it should probably be done inside&nbsp;ExtUtils::Install which<br>
&gt; both MakeMaker and MB use.<br>
<br>
&gt; What is PPM using perllocal for?<br>
<br>
PPM maintains its own SQLite DB&nbsp;(in &quot;etc/ppm-perl-area.db&quot;) as a copy of the usual &quot;.packlist&quot; files under &quot;lib/auto/...&quot;. In order to keep &quot;etc/ppm-perl-area.db&quot; synchronised with the &quot;.packlist&quot; files, the PPM utility needs to know the date-stamp of the most recent &quot;.packlist&quot; and compare it with the date-stamp of &quot;etc/ppm-perl-area.db&quot;.<br>
&nbsp;<br>
I don't know, but it seems that someone&nbsp;decided that the number of &quot;.packlist&quot; files is simply too big to be scanned each time just to find out whether or not to synchronise&nbsp;(there could be hundreds or even thousands of &quot;.packlist&quot; files) and they may have simply (mis-)used the date-stamp of &quot;perllocal.pod&quot; as an approximation of the date-stamp of the most recent &quot;.packlist&quot; file.<br>
<br>
It seems to me that ActiveState is not using Module::Build, otherwise they would have noticed that &quot;perllocal.pod&quot; is not used anymore.<br>
<br>
&gt; &gt; I have a patch that fixes those problems. 3 modules are to be <br>
&gt; patched: <br>
&gt; &gt; &quot;ActivePerl::DocTools::Pod&quot;, &quot;ExtUtils::Command::MM&quot; and <br>
&gt; &gt; &quot;Module::Build::Base&quot;. <br>
&gt; &gt; <br>
&gt; &gt; The main patch is in &quot;Module::Build::Base&quot;, but before this can be <br>
&gt; done, <br>
&gt; &gt; &quot;ExtUtils::Command::MM&quot; needs to be patched as described in the <br>
&gt; attached <br>
&gt; &gt; file &quot;ExtUtils-Command-MM.txt&quot;. (I will also talk to ActiveState <br>
&gt; about <br>
&gt; &gt; patching &quot;ActivePerl::DocTools::Pod&quot;) <br>
&gt; &gt; <br>
&gt; &gt; Functionally nothing changes in &quot;ExtUtils::Command::MM&quot;, only a new <br>
&gt; &gt; subroutine perllocal_instd() will be exposed (to be called later by <br>
&gt; &gt; &quot;Module::Build::Base&quot;) that allows to extract the textual <br>
&gt; representation <br>
&gt; &gt; of what the existing subroutine perllocal_install() does. <br>
&gt; <br>
&gt; Module::Build shouldn't be depending on MakeMaker,<br>
&gt;&nbsp;particularly new&nbsp;versions&nbsp;of MakeMaker, so the patch is<br>
&gt; right out. Sorry.<br>
<br>
OK<br>
&nbsp;</div>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;08&nbsp;11:07:31&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> schwern [...] pobox.com, klaus03 [...] gmail.com, yves [...] cpan.org,
 kwilliams [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza">Le Ven 08 Jan 2010 10:14:28, KEICHNER a &eacute;crit&nbsp;: <br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; There are 3 differences in the way that MB and AS <br>

&gt; (=ActiveState/ExtUtils::MakeMaker) use Pod::Html::pod2html(): <br>

&gt; <br>

&gt; (Diff 1) In case of $self-&gt;installdir = 'site' <br>

&gt; * MB uses option &quot;--htmlroot =../../../site&quot; in Pod::Html::pod2html() <br>

&gt; * AS uses option &quot;--htmlroot=../../..&quot; in Pod::Html::pod2html() <br>

&gt; <br>

&gt; (Diff 2) other options in Pod::Html::pod2html() <br>

&gt; * MB uses option &quot;--flush&quot; and &quot;--title&quot;, but has no option &quot;--quiet&quot;, <br>

&gt; &quot;--index&quot; or &quot;--libpods=perlfunc:...&quot; <br>

&gt; * AS has no option &quot;--flush&quot; or &quot;--title&quot;, but uses option &quot;--quiet&quot;, <br>

&gt; &quot;--index&quot; <br>

&gt; and &quot;--libpods=perlfunc:...&quot; <br>

&gt; <br>

&gt; (Diff 3) The way the output of Pod::Html::pod2html() is treated: <br>

&gt; * MB accepts the HTML that is generated by Pod::Html::pod2html() as is <br>

&gt; * AS manipulates the HTML that is generated by Pod::Html::pod2html()<br>
</div><br>

I have forgotten about (Diff 4):<br>

<br>

&nbsp;(Diff 4)&nbsp;more options in Pod::Html::pod2html()<br>

&nbsp;&nbsp;&nbsp;&nbsp;* MB&nbsp;has no option &quot;--css&quot;, &quot;--header&quot; or &quot;--backlink&quot;<br>

&nbsp;&nbsp;&nbsp; * AS&nbsp;uses option &quot;--css=../../../Active.css&quot;, &quot;--header&quot; and &quot;--backlink=Back to Top&quot;.<br>

<br>

(Diff 4)&nbsp;is AS specific, AS should move this functionality (which is currently used only in ExtUtils::MakeMaker) to MB, wrapped into an ActiveState Module.<br>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;08&nbsp;11:39:12&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> schwern [...] pobox.com, klaus03 [...] gmail.com, yves [...] cpan.org,
 kwilliams [...] cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Ven 08 Jan 2010 10:14:28, KEICHNER a &eacute;crit : <br>

&gt; (Diff 4) more options in Pod::Html::pod2html() <br>

&gt; * MB has no option &quot;--css&quot;, &quot;--header&quot; or &quot;--backlink&quot; <br>

&gt; * AS uses option &quot;--css=../../../Active.css&quot;, &quot;--header&quot; and &quot;-- <br>

&gt; backlink=Back <br>

&gt; to Top&quot;.&nbsp;<br>
</div><br>

Sorry, I've got my logic wrong, (Diff 4) should read:<br>

<br>

&nbsp; * MB has&nbsp;option&nbsp;&quot;--header&quot; and &quot;--backlink=Back&nbsp;to Top&quot;<br>

&nbsp;&nbsp;* AS has no option&nbsp;&quot;--header&quot; or &quot;--backlink&quot;&nbsp;<br>

<br>
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"># option &quot;--css=../../../Active.css&quot; is correctly<br>

#&nbsp;handled by both MB *and* AS, and therefore<br>

#&nbsp;not an issue.<br>
</div><br>

(Diff 4)&nbsp;still remains AS specific, AS should move this functionality (which is&nbsp;currently&nbsp;used only in ExtUtils::MakeMaker) to MB, wrapped into an ActiveState&nbsp;Module.<br>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;08&nbsp;17:49:05&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Subject changed from &#39;ExtUtils::Command::MM - resolving problems with ActiveState&#39; to &#39;Diffs with ActiveState HTML generation and PPM compatibility&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;08&nbsp;17:49:05&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Queue changed from ExtUtils-MakeMaker to Module-Build</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;08&nbsp;17:49:56&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve moved this over into Module::Build&#39;s queue as MakeMaker doesn&#39;t
even generate HTML.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;08&nbsp;17:57:05&nbsp;2010</span>
    <span class="description">mschwern [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">So, not being an HTML expert, it sounds to me like there&#39;s some
concrete work which can be done if you want it.

The non-AS changes to the HTML output can be applied definitely at the
Pod::Html level &#40;since they just seem like invalid or overcomplicated
HTML&#41; and perhaps at the Module::Build level.  Ken will have to decide
how much responsibility MB wants to have over the HTML it produces or
whether to leave it in Pod::Html&#39;s hands.

Generating and updating a table of contents would be handy.  I can&#39;t
really say where it should go, but the code should be fairly mobile so
pick an option and do it.

As for PPM depending on perllocal AND packlists... both of those are
dead end tech so I&#39;m not sure what&#39;s to be done about that.  Patching
ExtUtils::Install to have an option to update perllocal sounds like
the way to go.

I can&#39;t really speak sensibly to the other stuff.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;09&nbsp;12:26:33&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> klaus03 [...] gmail.com, bug-ExtUtils-MakeMaker [...] rt.cpan.org</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have created a ticket to change ActivePerl::DocTools::Pod at
<span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.activestate.com/show_bug.cgi?id=85755">http://bugs.activestate.com/show_bug.cgi?id=85755</a></span>

I haven&#39;t had any reply from Activestate yet, I fear that this ticket 
is not picked up.

I really would like to discuss this with ActiveState. Does anybody have 
an e-mail address at Activestate where I can bring 
<span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.activestate.com/show_bug.cgi?id=85755">http://bugs.activestate.com/show_bug.cgi?id=85755</a></span> to their attention ?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;10&nbsp;03:35:50&nbsp;2010</span>
    <span class="description">schwern [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Jan Dubois &lt;jand [...] activestate.com&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 10 Jan 2010 00:35:28 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Michael G Schwern &lt;schwern [...] pobox.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Klaus Eichner via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: Module-Build
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53478">https://rt.cpan.org/Ticket/Display.html?id=53478</a></span> &gt;
&gt; 
&gt; I have created a ticket to change ActivePerl::DocTools::Pod at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.activestate.com/show_bug.cgi?id=85755">http://bugs.activestate.com/show_bug.cgi?id=85755</a></span>
&gt; 
&gt; I haven&#39;t had any reply from Activestate yet, I fear that this ticket 
&gt; is not picked up.
&gt; 
&gt; I really would like to discuss this with ActiveState. Does anybody have 
&gt; an e-mail address at Activestate where I can bring 
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.activestate.com/show_bug.cgi?id=85755">http://bugs.activestate.com/show_bug.cgi?id=85755</a></span> to their attention ?
</div>
I usually poke Jan Dubois whom I&#39;ve CC&#39;d.


-- 
You know what the chain of command is? It&#39;s the chain I go get and beat you
with &#39;til you understand who&#39;s in ruttin&#39; command here.
         -- Jayne Cobb, &#34;Firefly&#34;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;10&nbsp;06:27:53&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org, schwern [...] pobox.com,
 klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Dim 10 Jan 2010 03:35:50, schwern@pobox.com a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Klaus Eichner via RT wrote:
<div class="message-stanza open">&gt; &gt;        Queue: Module-Build
&gt; &gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53478">https://rt.cpan.org/Ticket/Display.html?id=53478</a></span> &gt;
&gt; &gt; 
&gt; &gt; I have created a ticket to change ActivePerl::DocTools::Pod at
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.activestate.com/show_bug.cgi?id=85755">http://bugs.activestate.com/show_bug.cgi?id=85755</a></span>
&gt; &gt; 
&gt; &gt; I haven&#39;t had any reply from Activestate yet, I fear that this 
</div></div>ticket 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; is not picked up.
&gt; &gt; 
&gt; &gt; I really would like to discuss this with ActiveState. Does anybody 
</div></div>have 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; an e-mail address at Activestate where I can bring 
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.activestate.com/show_bug.cgi?id=85755">http://bugs.activestate.com/show_bug.cgi?id=85755</a></span> to their 
</div></div>attention ?
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I usually poke Jan Dubois whom I&#39;ve CC&#39;d.
</div>
Thanks, I now have a reply on <span class="clickylink"><a target="new" rel="nofollow" href="http://bugs.activestate.com/show_bug.cgi">http://bugs.activestate.com/show_bug.cgi</a></span>?
id=85755 from ActiveState.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;14&nbsp;19:11:31&nbsp;2010</span>
    <span class="description">JDB [...] cpan.org -  Cc JDB added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;14&nbsp;19:24:22&nbsp;2010</span>
    <span class="description">jand [...] ActiveState.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Jan 2010 16:24:05 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;&#39;Michael G Schwern&#39;&#34; &lt;schwern [...] pobox.com&gt;, &lt;bug-Module-Build [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jan Dubois&#34; &lt;jand [...] activestate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Schwern wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for noticing all this and working up some patches.
</div>
Thank you for this from me as well!

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfortunately I can&#39;t accept them quite so quickly, there&#39;s some
&gt; things to discuss.
</div>
Indeed. I don&#39;t think putting the HTML generation code into EU::MM and
M::B is the right approach. Ideally we could figure out some kind of
hook into EU::Install to update the HTML docs during installation and
get rid of any ActivePerl specific code in EU::MM and M::B instead.

Unfortunately I cannot promise when anyone on the ActivePerl team
will have time to do it.  I&#39;ll try to bring it back on our agenda,
but it always seems to be prioritized down so that we don&#39;t actually
get around to do something about it. :&#40;

Note that as a workaround you can always run `ap-update-html` from the
perl/bin directory. It will re-generate HTML docs for all *.pm and
*.pod files in the Perl directories that are either non-existent or
out-of-date &#40;according to their respective mtimes&#41;. It will also
update the TOC.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Klaus Eichner via RT wrote:
<div class="message-stanza open">&gt; &gt; - with Module::Build, the file &#39;lib/perllocal.pod&#39; is not updated,
&gt; &gt;   which leaves ActiveState&#39;s PPM-utility in the dark about the newly
&gt; &gt;   installed distribution. &#40;with ExtUtils::MakeMaker the file
&gt; &gt;   &#39;lib/perllocal.pod&#39; is correctly updated&#41;
</div>&gt;
&gt; What is PPM using perllocal for?
</div>
It actually doesn&#39;t.  PPM uses the .packlist files to locate packages
that have been installed manually or via the CPAN shell.  This allows
it to both warn before installing older versions via PPM, and also to
offer upgrades if a newer version is available from any PPM repository.

It is not clear to me why M::B doesn&#39;t write .packlist files though;
I though EU::Install would be taking care of that.  I guess I need to
take another look.

Cheers,
-Jan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;14&nbsp;19:55:59&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and  PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Jan 2010 19:55:18 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu, Jan 14, 2010 at 7:24 PM, jand@ActiveState.com via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It is not clear to me why M::B doesn&#39;t write .packlist files though;
&gt; I though EU::Install would be taking care of that.  I guess I need to
&gt; take another look.
</div>
It does -- or at least, has since 0.2609 &#40;from 2005&#41;.  Prior to 0.36,
it would not write them if module_name was not set.  Now it tries to
guess a module name the same way that EU::MM does.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;14&nbsp;20:30:42&nbsp;2010</span>
    <span class="description">jand [...] ActiveState.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and  PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 14 Jan 2010 17:30:24 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Module-Build [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jan Dubois&#34; &lt;jand [...] activestate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Klaus Eichner wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I don&#39;t know, but it seems that someone decided that the number of
&gt; &#34;.packlist&#34; files is simply too big to be scanned each time just to
&gt; find out whether or not to synchronise &#40;there could be hundreds or
&gt; even thousands of &#34;.packlist&#34; files&#41; and they may have simply &#40;mis-
&gt; &#41;used the date-stamp of &#34;perllocal.pod&#34; as an approximation of the
&gt; date-stamp of the most recent &#34;.packlist&#34; file.
</div>
Ah, so it does use perllocal.pod.  Seems like you know the code better
than I do. :&#41;

So I guess I wouldn&#39;t mind seeing perllocal.pod at least being &#34;touched&#34;
by a M::B install, even if it doesn&#39;t write to it.  Again, updating
perllocal.pod should be done by EU::Install and not by EU::MM and
M::B though.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It seems to me that ActiveState is not using Module::Build, otherwise
&gt; they would have noticed that &#34;perllocal.pod&#34; is not used anymore.
</div>
That is correct.  Almost all modules that use M::B still provide a
compatible Makefile.PL, so there has been little reason to use M::B
in the past.

Cheers,
-Jan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;04:42:27&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org, dagolden [...] cpan.org,
 klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Jeu 14 Jan 2010 19:24:22, jand@ActiveState.com a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Schwern wrote:
<div class="message-stanza open">&gt; &gt; Thanks for noticing all this and working up some patches.
</div>&gt; 
&gt; Thank you for this from me as well!
&gt; 
<div class="message-stanza open">&gt; &gt; Unfortunately I can&#39;t accept them quite so quickly, there&#39;s some
&gt; &gt; things to discuss.
</div>&gt; 
&gt; Indeed. I don&#39;t think putting the HTML generation code into EU::MM and
&gt; M::B is the right approach. Ideally we could figure out some kind of
&gt; hook into EU::Install to update the HTML docs during installation and
&gt; get rid of any ActivePerl specific code in EU::MM and M::B instead.
</div>
I perfectly agree with your policy, my initial patch was just a first 
attempt to tackle the problem.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Unfortunately I cannot promise when anyone on the ActivePerl team
&gt; will have time to do it.  I&#39;ll try to bring it back on our agenda,
&gt; but it always seems to be prioritized down so that we don&#39;t actually
&gt; get around to do something about it. :&#40;
&gt; 
&gt; Note that as a workaround you can always run `ap-update-html` from the
&gt; perl/bin directory. It will re-generate HTML docs for all *.pm and
&gt; *.pod files in the Perl directories that are either non-existent or
&gt; out-of-date &#40;according to their respective mtimes&#41;. It will also
&gt; update the TOC.
</div>
Thanks for your workaround, I will use that for the time being.

Speaking as a user, I have been using ActiveState Perl and 
ExtUtils::MakeMaker successfully for years, I was particularly happy 
with the way that HTML was generated automatically from POD and how it 
integrated seamlessly with the &#34;index.html&#34; file. Now I am in the 
process of migrating to Module::Build, and it would be nice if the same 
HTML would be generated and automatically integrated with &#34;index.html&#34;, 
without workaround &#40;element of least surprise&#41;.

-- Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;11:30:02&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org, dagolden [...] cpan.org,
 klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Jeu 14 Jan 2010 20:30:42, jand@ActiveState.com a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Klaus Eichner wrote:
<div class="message-stanza open">&gt; &gt; I don&#39;t know, but it seems that someone decided that the number of
&gt; &gt; &#34;.packlist&#34; files is simply too big to be scanned each time just to
&gt; &gt; find out whether or not to synchronise &#40;there could be hundreds or
&gt; &gt; even thousands of &#34;.packlist&#34; files&#41; and they may have simply &#40;mis-
&gt; &gt; &#41;used the date-stamp of &#34;perllocal.pod&#34; as an approximation of the
&gt; &gt; date-stamp of the most recent &#34;.packlist&#34; file.
</div>&gt; 
&gt; Ah, so it does use perllocal.pod.  Seems like you know the code better
&gt; than I do. :&#41;
&gt; 
&gt; So I guess I wouldn&#39;t mind seeing perllocal.pod at least 
</div>being &#34;touched&#34;
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; by a M::B install, even if it doesn&#39;t write to it.  Again, updating
&gt; perllocal.pod should be done by EU::Install and not by EU::MM and
&gt; M::B though.
</div>
The attached &#34;patch-perllocal.txt&#34; touches &#39;perllocal.pod&#39; &#40;without 
writing to it&#41;.

The principle is that:
&#39;perllocal.pod&#39; is touched whenever a &#34;.packlist&#34; file is updated.
&#39;perllocal.pod&#39; is not touched if no &#34;.packlist&#34; file is updated.

The patch is mainly in EU::Install, but I had to include a one-line 
addition in M::B::Base to pass the information $self-&gt;{config}-&gt;get
&#40;&#39;installprivlib&#39;&#41; into EU::Install as a parameter &#40;I could not find 
that information anywhere in EU::Install -- or I didn&#39;t look hard 
enough ?&#41;.

-- Klaus
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-perllocal.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/ExtUtils/Install.pm.bak	2009-08-04 13:31:32.000000000 +0200
+++ lib/ExtUtils/Install.pm	2010-01-15 16:48:25.467000000 +0100
@@ -850,6 +850,44 @@
     return $result;
 }
 
+sub touch_perllocal {
+    my &#40;$corelib, $verbose, $dry_run, $uninstall_shadows&#41; = @_;
+
+    # Touch &#34;lib/perllocal.pod&#34; to get a new timestamp for that file.
+    # The new timestamp is used by ActiveState&#39;s ppm-utility to decide
+    # whether or not to synchronize with the SQLite database
+    # at &#34;etc/ppm-perl-area.db&#34;.
+    # See also &#39;ActivePerl/PPM/InstallArea.pm&#39;, subroutine _init_db&#40;&#41;,
+    # ==&gt; expression &#40;&#40;stat $perllocal&#41;[9] || 0&#41;&#41;
+
+    unless &#40;defined $corelib&#41; {
+        print &#34;Can&#39;t touch perllocal.pod, \$corelib is undefined\n&#34; if $verbose;
+        return;
+    }
+
+    my $perllocal = File::Spec-&gt;catfile&#40;$corelib, &#39;perllocal.pod&#39;&#41;;
+
+    my $t = time;
+    my $stamp = localtime&#40;$t&#41;;
+
+    if &#40;$dry_run&#41; {
+        print &#34;DRY-RUN: file $perllocal would have been touched, &#34;,
+              &#34;timestamp would have been $stamp\n&#34; if $verbose;
+        return;
+    }
+
+    open&#40;PERLLOCAL, &#34;&gt;&gt;$perllocal&#34;&#41; or do {
+        print &#34;Can&#39;t open &gt;&gt; file $perllocal because $!\n&#34; if $verbose;
+        return;
+    };
+
+    close&#40;PERLLOCAL&#41;;
+
+    utime&#40;$t, $t, $perllocal&#41;;
+
+    print &#34;Touching file $perllocal, timestamp $stamp\n&#34; if $verbose;
+}
+
 =begin _private
 
 =item _do_cleanup
--- lib/Module/Build/Base.pm.bak	2009-08-10 01:47:06.000000000 +0200
+++ lib/Module/Build/Base.pm	2010-01-15 17:16:25.358000000 +0100
@@ -2983,6 +2983,7 @@
   require ExtUtils::Install;
   $self-&gt;depends_on&#40;&#39;build&#39;&#41;;
   ExtUtils::Install::install&#40;$self-&gt;install_map, !$self-&gt;quiet, 0, $self-&gt;{args}{uninst}||0&#41;;
+  ExtUtils::Install::touch_perllocal&#40;$self-&gt;{config}-&gt;get&#40;&#39;installprivlib&#39;&#41;, !$self-&gt;quiet, 0, $self-&gt;{args}{uninst}||0&#41;;
 }
 
 sub ACTION_fakeinstall {
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;15&nbsp;16:21:00&nbsp;2010</span>
    <span class="description">jand [...] ActiveState.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and PPM compatibility </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 15 Jan 2010 13:20:45 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Module-Build [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jan Dubois&#34; &lt;jand [...] activestate.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, 15 Jan 2010, Klaus Eichner via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Jeu 14 Jan 2010 20:30:42, jand@ActiveState.com a écrit :
<div class="message-stanza open">&gt; &gt; So I guess I wouldn&#39;t mind seeing perllocal.pod at least being
&gt; &gt; &#34;touched&#34; by a M::B install, even if it doesn&#39;t write to it. Again,
&gt; &gt; updating perllocal.pod should be done by EU::Install and not by
&gt; &gt; EU::MM and M::B though.
</div>&gt; 
&gt; The attached &#34;patch-perllocal.txt&#34; touches &#39;perllocal.pod&#39; &#40;without
&gt; writing to it&#41;.
</div>
Hey, you are really quick with coming up with patches. :&#41;
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The principle is that:
&gt; &#39;perllocal.pod&#39; is touched whenever a &#34;.packlist&#34; file is updated.
&gt; &#39;perllocal.pod&#39; is not touched if no &#34;.packlist&#34; file is updated.
&gt; 
&gt; The patch is mainly in EU::Install, but I had to include a one-line
&gt; addition in M::B::Base to pass the information $self-&gt;{config}-&gt;get
&gt; &#40;&#39;installprivlib&#39;&#41; into EU::Install as a parameter &#40;I could not find
&gt; that information anywhere in EU::Install -- or I didn&#39;t look hard
&gt; enough ?&#41;.
</div>
After thinking about this some more I don&#39;t think this is the best
approach yet. Assuming we get a hook into EU::Install that ActivePerl
would use to update the HTML docs, then it could use the same hook to
update a file that is specific to the install area, e.g. perl/etc/ppm-
dirty for perl/lib and perl/site/etc/ppm-dirty for perl/site/lib. It
could even record the exact path to the .packlist file, making it much
more efficient for PPM to detect and process any new packages that have
been installed outside its control.  

This way the mechanism would no longer depend on perllocal.pod at all,
and since the control files are specific to each install area we
wouldn&#39;t need the change to M::B to pass the installprivlib either.

Please note that no changes to EU::Install can be made until Perl 5.12
is released &#40;there is a code freeze right now&#41;, so we have some time to
hash this out...

Cheers,
-Jan
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;17&nbsp;07:03:50&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org, dagolden [...] cpan.org,
 klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Ven 15 Jan 2010 16:21:00, jand@ActiveState.com a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; The attached &#34;patch-perllocal.txt&#34; touches &#39;perllocal.pod&#39; &#40;without
&gt; &gt; writing to it&#41;.
</div>&gt; 
&gt; Hey, you are really quick with coming up with patches. :&#41;
</div>
I like coming up with patches :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; After thinking about this some more I don&#39;t think this is the best
&gt; approach yet. Assuming we get a hook into EU::Install that ActivePerl
&gt; would use to update the HTML docs, then it could use the same hook to
&gt; update a file that is specific to the install area, e.g. perl/etc/ppm-
&gt; dirty for perl/lib and perl/site/etc/ppm-dirty for perl/site/lib. It
&gt; could even record the exact path to the .packlist file, making it much
&gt; more efficient for PPM to detect and process any new packages that 
</div>have
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; been installed outside its control.  
&gt; 
&gt; This way the mechanism would no longer depend on perllocal.pod at all,
&gt; and since the control files are specific to each install area we
&gt; wouldn&#39;t need the change to M::B to pass the installprivlib either.
</div>
Sounds good to me.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Please note that no changes to EU::Install can be made until Perl 5.12
&gt; is released &#40;there is a code freeze right now&#41;, so we have some time 
</div>to
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; hash this out...
</div>
Perfect, I will work on a patch during the next week.

Cheers,
-Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;07:36:10&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Dim 17 Jan 2010 07:03:50, KEICHNER a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Ven 15 Jan 2010 16:21:00, jand@ActiveState.com a écrit :
<div class="message-stanza open">&gt; &gt; Please note that no changes to EU::Install can be made until Perl 5.12
&gt; &gt; is released &#40;there is a code freeze right now&#41;, so we have some time 
&gt; &gt; to hash this out...
</div>&gt; 
&gt; Perfect, I will work on a patch during the next week.
</div>
Unfortunately I have been busy this week, but I will have more time to
spend on this problem in the weeks ahead.

-Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;22&nbsp;08:23:56&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and  PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Jan 2010 08:23:13 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri, Jan 22, 2010 at 7:36 AM, Klaus Eichner via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: Module-Build
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=53478">https://rt.cpan.org/Ticket/Display.html?id=53478</a></span> &gt;
&gt;
&gt; Le Dim 17 Jan 2010 07:03:50, KEICHNER a écrit :
<div class="message-stanza open">&gt;&gt; Le Ven 15 Jan 2010 16:21:00, jand@ActiveState.com a écrit :
<div class="message-stanza open">&gt;&gt; &gt; Please note that no changes to EU::Install can be made until Perl 5.12
&gt;&gt; &gt; is released &#40;there is a code freeze right now&#41;, so we have some time
&gt;&gt; &gt; to hash this out...
</div>&gt;&gt;
&gt;&gt; Perfect, I will work on a patch during the next week.
</div>&gt;
&gt; Unfortunately I have been busy this week, but I will have more time to
&gt; spend on this problem in the weeks ahead.
</div>
No problem.  I have plenty of other things I&#39;m working on right now,
so my ability to integrate big feature patches is a bit limited.
&#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dagolden.com/index.php/642/etoomanyprojects/&#41;">http://www.dagolden.com/index.php/642/etoomanyprojects/&#41;</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;29&nbsp;12:08:11&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Ven 22 Jan 2010 08:23:56, DAGOLDEN a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri, Jan 22, 2010 at 7:36 AM, Klaus Eichner via RT
<div class="message-stanza open">&gt; &gt; Unfortunately I have been busy this week, but I will have more
&gt; &gt; time to spend on this problem in the weeks ahead.
</div>&gt; 
&gt; No problem.  I have plenty of other things I&#39;m working on right now,
&gt; so my ability to integrate big feature patches is a bit limited.
&gt; &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dagolden.com/index.php/642/etoomanyprojects/&#41;">http://www.dagolden.com/index.php/642/etoomanyprojects/&#41;</a></span>
</div>
Here is a proposal for a patch with &#40;what I believe to be&#41; minimal
changes to Module::Build::Base, ExtUtils::Install and a new module
ExtUtils::HtmlFix.

- Updating perllocal.pod is done by ExtUtils::Install.
- Manipulating HTML is done in the new module ExtUtils::FixHtml &#40;please
let me know if that should better be incorporated into the existing
Pod::Html&#41;
- The patch MB-Base-opt1 proposes changes to Module::Build::Base for
Activestate HTML such that the original non-Activestate HTML generation
is not changed.
- The patch MB-Base-opt2 proposes alternative changes to
Module::Build::Base such that the non-Activestate HTML is very similar
to the Activestate HTML.

To Jan: Sorry, I didn&#39;t have time yet to work on updating a file
specific to the install area &#40;perl/etc/ppm-dirty,
perl/site/etc/ppm-dirty&#41;, I will start working on it next week.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-MB-Base-opt2.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Module/Build/Base.pm.bak	2009-08-10 01:47:06.000000000 +0200
+++ lib/Module/Build/Base.pm	2010-01-29 17:20:38.549000000 +0100
@@ -861,10 +861,11 @@
   },
 &#41;;
 
-{
-  my $Is_ActivePerl = eval {require ActivePerl::DocTools};
-  __PACKAGE__-&gt;add_property&#40;html_css =&gt; $Is_ActivePerl ? &#39;Active.css&#39; : &#39;&#39;&#41;;
-}
+my $Is_Active_Perl      = eval { require ActivePerl::DocTools         };
+my $Is_Active_PPM       = eval { require ActivePerl::PPM::InstallArea };
+my $Is_Active_Scineplex = eval { require ActiveState::Scineplex       };
+
+__PACKAGE__-&gt;add_property&#40;html_css =&gt; $Is_Active_Perl ? &#39;Active.css&#39; : &#39;&#39;&#41;;
 
 {
   my @prereq_action_types = qw&#40;requires build_requires conflicts recommends&#41;;
@@ -2829,6 +2830,7 @@
 
   require Module::Build::PodParser;
   require Pod::Html;
+  require ExtUtils::HtmlFix;
 
   $self-&gt;add_to_cleanup&#40;&#39;pod2htm*&#39;&#41;;
 
@@ -2844,11 +2846,18 @@
   my @rootdirs = &#40;$type eq &#39;bin&#39;&#41; ? qw&#40;bin&#41; :
       $self-&gt;installdirs eq &#39;core&#39; ? qw&#40;lib&#41; : qw&#40;site lib&#41;;
 
+  my $pcore = $self-&gt;original_prefix-&gt;{core};
+  my $pdir  = $self-&gt;base_dir; $pdir =~ s/:/|/g;
+
+  my $podroot = join&#40;&#39;/&#39;, File::Spec-&gt;splitdir&#40;$pcore&#41;&#41;;
   my $podpath = join &#39;:&#39;,
-                map  $_-&gt;[1],
-                grep -e $_-&gt;[0],
-                map  [File::Spec-&gt;catdir&#40;$self-&gt;blib, $_&#41;, $_],
-                qw&#40; script lib &#41;;
+    map  $_-&gt;[1],
+    grep -e $_-&gt;[0],
+    map  [File::Spec-&gt;rel2abs&#40;File::Spec-&gt;catdir&#40;split &#39;/&#39;, do{ my $t = $_; $t =~ s/\|/:/g; $t; }&#41;, $pcore&#41;, $_],
+      $pdir.&#39;/blib&#39;,
+      &#39;lib&#39;,
+      &#39;site/lib&#39;,
+      &#39;bin&#39;;
 
   foreach my $pod &#40; keys %$pods &#41; {
 
@@ -2869,9 +2878,7 @@
     }
 
     my $path2root = join&#40; &#39;/&#39;, &#40;&#39;..&#39;&#41; x &#40;@rootdirs+@dirs&#41; &#41;;
-    my $htmlroot = join&#40; &#39;/&#39;,
-			 &#40;$path2root,
-			  $self-&gt;installdirs eq &#39;core&#39; ? &#40;&#41; : qw&#40;site&#41; &#41; &#41;;
+    my $htmlroot = $path2root;
 
     my $fh = IO::File-&gt;new&#40;$infile&#41; or die &#34;Can&#39;t read $infile: $!&#34;;
     my $abstract = Module::Build::PodParser-&gt;new&#40;fh =&gt; $fh&#41;-&gt;get_abstract&#40;&#41;;
@@ -2880,23 +2887,35 @@
     $title .= &#34; - $abstract&#34; if $abstract;
 
     my @opts = &#40;
-                &#39;--flush&#39;,
-                &#34;--title=$title&#34;,
                 &#34;--podpath=$podpath&#34;,
                 &#34;--infile=$infile&#34;,
                 &#34;--outfile=$outfile&#34;,
-                &#39;--podroot=&#39; . $self-&gt;blib,
+                &#34;--podroot=$podroot&#34;,
                 &#34;--htmlroot=$htmlroot&#34;,
+                &#34;--quiet&#34;,
+                &#34;--index&#34;,
+                &#34;--libpods=perlfunc:perlguts:perlvar:perlrun:perlopt&#34;,
                &#41;;
 
+    push&#40; @opts, &#34;--title=$title&#34;&#41; unless $Is_Active_Perl;
+
     if &#40; eval{Pod::Html-&gt;VERSION&#40;1.03&#41;} &#41; {
-      push&#40; @opts, &#40;&#39;--header&#39;, &#39;--backlink=Back to Top&#39;&#41; &#41;;
+      push&#40; @opts, &#40;&#39;--header&#39;, &#39;--backlink=Back to Top&#39;&#41; &#41; unless $Is_Active_Perl;
       push&#40; @opts, &#34;--css=$path2root/&#34; . $self-&gt;html_css&#41; if $self-&gt;html_css;
     }
 
     $self-&gt;log_info&#40;&#34;HTMLifying $infile -&gt; $outfile\n&#34;&#41;;
     $self-&gt;log_verbose&#40;&#34;pod2html @opts\n&#34;&#41;;
-    eval { Pod::Html::pod2html&#40;@opts&#41;; 1 } 
+    eval { Pod::Html::pod2html&#40;@opts&#41;;
+           ExtUtils::HtmlFix::manipulate_html&#40;$outfile, {
+             index  =&gt; $Is_Active_Perl,
+             script =&gt; $Is_Active_Perl,
+             title  =&gt; $title,
+             is_sp  =&gt; $Is_Active_Scineplex,
+             root   =&gt; $htmlroot,
+             dp     =&gt; scalar&#40;@rootdirs + @dirs&#41;,
+           }&#41;;
+           1; } 
       or $self-&gt;log_warn&#40;&#34;pod2html @opts failed: $@&#34;&#41;;
   }
 
@@ -2983,6 +3002,19 @@
   require ExtUtils::Install;
   $self-&gt;depends_on&#40;&#39;build&#39;&#41;;
   ExtUtils::Install::install&#40;$self-&gt;install_map, !$self-&gt;quiet, 0, $self-&gt;{args}{uninst}||0&#41;;
+
+  if &#40;$Is_Active_PPM&#41; {
+      $self-&gt;log_info&#40;&#34;Touching &#39;perllocal.pod&#39; for Activestate PPM\n&#34;&#41;;
+      ExtUtils::Install::touch_perllocal&#40;&#41;;
+  }
+
+  if &#40;$Is_Active_Perl&#41; {
+      $self-&gt;log_info&#40;&#34;Update Html TOC for Activestate\n&#34;&#41;;
+      eval {
+          ActivePerl::DocTools::WriteTOC&#40;&#41;;
+      }  
+      or $self-&gt;log_warn&#40;&#34;ActivePerl::DocTools::WriteTOC&#40;&#41; failed: $@&#34;&#41;;
+  }
 }
 
 sub ACTION_fakeinstall {

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-EU-HtmlFix.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/ExtUtils/HtmlFix.pm.bak	2010-01-29 17:15:40.308000000 +0100
+++ lib/ExtUtils/HtmlFix.pm	2010-01-29 17:19:06.162000000 +0100
@@ -0,0 +1,78 @@
+package ExtUtils::HtmlFix;
+
+sub manipulate_html {
+    my $outfile             = $_[0];
+    my $index               = $_[1]{index};
+    my $title               = $_[1]{title};
+    my $script              = $_[1]{script};
+    my $Is_Active_Scineplex = $_[1]{is_sp};
+    my $html_root           = $_[1]{root};
+    my $depth               = $_[1]{dp};
+
+    # the code for this subroutine has been copied from &#34;ActivePerl/DocTools/Pod.pm&#34;
+
+    open HTMLFILE, &#34;&lt;$outfile&#34;     or die &#34;Couldn&#39;t open $outfile: $!&#34;;
+    open TMPFILE,  &#34;&gt;$outfile.tmp&#34; or die &#34;Couldn&#39;t open $outfile.tmp: $!&#34;;
+
+    my $first_header = 1;
+
+    while &#40;my $content = &lt;HTMLFILE&gt;&#41; {
+        # Despite what Pod::Html says, this is not XHTML.
+        # IE6 doesn&#39;t display things correctly with the wrong DOCTYPE.
+        $content =~ s#^&lt;!DOCTYPE .*?&gt;#&lt;!DOCTYPE HTML PUBLIC &#34;-//W3C//DTD HTML 4.0 Transitional//EN&#34;&gt;#i;
+        $content =~ s#&lt;html xmlns=&#34;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</a></span>&#34;&gt;#&lt;html&gt;#i;
+
+        if &#40;$content =~ s/^&#40;\s*&#41;&lt;HEAD&gt;\s*//i&#41; {
+            print TMPFILE &lt;&lt;EOT;
+$1&lt;head&gt;
+EOT
+            if &#40;$script&#41; {
+                print TMPFILE &lt;&lt;EOT;
+$1&lt;!-- saved from url=&#40;0017&#41;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/">http://localhost/</a></span> --&gt;
+$1&lt;script language=&#34;JavaScript&#34; src=&#34;$html_root/displayToc.js&#34;&gt;&lt;/script&gt;
+$1&lt;script language=&#34;JavaScript&#34; src=&#34;$html_root/tocParas.js&#34;&gt;&lt;/script&gt;
+$1&lt;script language=&#34;JavaScript&#34; src=&#34;$html_root/tocTab.js&#34;&gt;&lt;/script&gt;
+EOT
+            }
+            if &#40;$Is_Active_Scineplex&#41; {
+                print TMPFILE qq&#40;$1&lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;$html_root/scineplex.css&#34;&gt;\n&#41;;
+            }
+        }
+
+        if &#40;$index and $content =~ /^&lt;p&gt;&lt;a name=&#34;__index__&#34;&gt;&lt;\/a&gt;&lt;\/p&gt;$/i&#41; {
+            $content = &lt;&lt;EOT;
+&lt;h1&gt;&lt;a&gt;$title&lt;/a&gt;&lt;/h1&gt;
+$content
+EOT
+            if &#40;$script&#41; {
+                $content = &lt;&lt;EOT;
+&lt;script&gt;writelinks&#40;&#39;__top__&#39;,$depth&#41;;&lt;/script&gt;
+$content
+EOT
+            }
+        }
+
+        # Don&#39;t duplicate the title if we don&#39;t have an index.
+        # Instead put the TOC buttons on the first header in the document.
+        # This is being used for release notes and changelogs.
+        if &#40;$first_header and !$index and $content =~ /^&lt;H\d&gt;/i&#41; {
+            $first_header = 0;
+            if &#40;$script&#41; {
+                $content = &lt;&lt;EOT;
+&lt;script&gt;writelinks&#40;&#39;__top__&#39;,$depth&#41;;&lt;/script&gt;
+$content
+EOT
+            }
+        }
+
+        print TMPFILE $content;
+    }
+
+    close TMPFILE or die &#34;Couldn&#39;t write all of $outfile.tmp: $!&#34;;
+    close HTMLFILE;
+
+    unlink $outfile;
+    rename &#34;$outfile.tmp&#34;, $outfile or die &#34;Couldn&#39;t rename $outfile.tmp back to $outfile: $!&#34;;
+}
+
+1;
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-EU-Install.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/ExtUtils/Install.pm.bak	2009-08-04 13:31:32.000000000 +0200
+++ lib/ExtUtils/Install.pm	2010-01-29 17:21:37.942000000 +0100
@@ -1241,6 +1241,24 @@
     return $retval;
 }
 
+sub touch_perllocal {
+    # Touch &#34;lib/perllocal.pod&#34; to get a new timestamp for that file.
+    # The new timestamp is used by ActiveState&#39;s ppm-utility to decide
+    # whether or not to synchronize with the two SQLite databases:
+    # 1. &#34;etc/ppm-perl-area.db&#34; 
+    # 2. &#34;site/etc/ppm-site-area.db&#34;
+    # See also &#39;ActivePerl/PPM/InstallArea.pm&#39;, subroutine _init_db&#40;&#41;,
+    # ==&gt; expression &#40;&#40;stat $perllocal&#41;[9] || 0&#41;&#41;
+
+    my $perllocal = File::Spec-&gt;catfile&#40;$Config{&#39;prefix&#39;}, &#39;lib&#39;, &#39;perllocal.pod&#39;&#41;;
+
+    my $t = time;
+
+    open TFILE, &#34;&gt;&gt;$perllocal&#34;;
+    close TFILE;
+
+    utime&#40;$t, $t, $perllocal&#41;;
+}
 
 package ExtUtils::Install::Warn;
 

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> patch-MB-Base-opt1.txt</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/Module/Build/Base.pm.bak	2009-08-10 01:47:06.000000000 +0200
+++ lib/Module/Build/Base.pm	2010-01-29 17:28:53.641000000 +0100
@@ -861,10 +861,11 @@
   },
 &#41;;
 
-{
-  my $Is_ActivePerl = eval {require ActivePerl::DocTools};
-  __PACKAGE__-&gt;add_property&#40;html_css =&gt; $Is_ActivePerl ? &#39;Active.css&#39; : &#39;&#39;&#41;;
-}
+my $Is_Active_Perl      = eval { require ActivePerl::DocTools         };
+my $Is_Active_PPM       = eval { require ActivePerl::PPM::InstallArea };
+my $Is_Active_Scineplex = eval { require ActiveState::Scineplex       };
+
+__PACKAGE__-&gt;add_property&#40;html_css =&gt; $Is_Active_Perl ? &#39;Active.css&#39; : &#39;&#39;&#41;;
 
 {
   my @prereq_action_types = qw&#40;requires build_requires conflicts recommends&#41;;
@@ -2829,6 +2830,7 @@
 
   require Module::Build::PodParser;
   require Pod::Html;
+  require ExtUtils::HtmlFix;
 
   $self-&gt;add_to_cleanup&#40;&#39;pod2htm*&#39;&#41;;
 
@@ -2844,11 +2846,31 @@
   my @rootdirs = &#40;$type eq &#39;bin&#39;&#41; ? qw&#40;bin&#41; :
       $self-&gt;installdirs eq &#39;core&#39; ? qw&#40;lib&#41; : qw&#40;site lib&#41;;
 
-  my $podpath = join &#39;:&#39;,
-                map  $_-&gt;[1],
-                grep -e $_-&gt;[0],
-                map  [File::Spec-&gt;catdir&#40;$self-&gt;blib, $_&#41;, $_],
-                qw&#40; script lib &#41;;
+  my $podroot;
+  my $podpath;
+
+  if &#40;$Is_Active_Perl&#41; {
+      my $pcore = $self-&gt;original_prefix-&gt;{core};
+      my $pdir  = $self-&gt;base_dir; $pdir =~ s/:/|/g;
+
+      $podroot = join&#40;&#39;/&#39;, File::Spec-&gt;splitdir&#40;$pcore&#41;&#41;;
+      $podpath = join &#39;:&#39;,
+        map  $_-&gt;[1],
+        grep -e $_-&gt;[0],
+        map  [File::Spec-&gt;rel2abs&#40;File::Spec-&gt;catdir&#40;split &#39;/&#39;, do{ my $t = $_; $t =~ s/\|/:/g; $t; }&#41;, $pcore&#41;, $_],
+          $pdir.&#39;/blib&#39;,
+          &#39;lib&#39;,
+          &#39;site/lib&#39;,
+          &#39;bin&#39;;
+  }
+  else {
+      $podroot = $self-&gt;blib;
+      $podpath = join &#39;:&#39;,
+        map  $_-&gt;[1],
+        grep -e $_-&gt;[0],
+        map  [File::Spec-&gt;catdir&#40;$self-&gt;blib, $_&#41;, $_],
+        qw&#40; script lib &#41;;
+  }
 
   foreach my $pod &#40; keys %$pods &#41; {
 
@@ -2870,8 +2892,7 @@
 
     my $path2root = join&#40; &#39;/&#39;, &#40;&#39;..&#39;&#41; x &#40;@rootdirs+@dirs&#41; &#41;;
     my $htmlroot = join&#40; &#39;/&#39;,
-			 &#40;$path2root,
-			  $self-&gt;installdirs eq &#39;core&#39; ? &#40;&#41; : qw&#40;site&#41; &#41; &#41;;
+       &#40;$path2root, &#40;$self-&gt;installdirs eq &#39;core&#39; or $Is_Active_Perl&#41; ? &#40;&#41; : qw&#40;site&#41; &#41; &#41;;
 
     my $fh = IO::File-&gt;new&#40;$infile&#41; or die &#34;Can&#39;t read $infile: $!&#34;;
     my $abstract = Module::Build::PodParser-&gt;new&#40;fh =&gt; $fh&#41;-&gt;get_abstract&#40;&#41;;
@@ -2880,23 +2901,46 @@
     $title .= &#34; - $abstract&#34; if $abstract;
 
     my @opts = &#40;
-                &#39;--flush&#39;,
-                &#34;--title=$title&#34;,
                 &#34;--podpath=$podpath&#34;,
                 &#34;--infile=$infile&#34;,
                 &#34;--outfile=$outfile&#34;,
-                &#39;--podroot=&#39; . $self-&gt;blib,
+                &#34;--podroot=$podroot&#34;,
                 &#34;--htmlroot=$htmlroot&#34;,
                &#41;;
 
+    if &#40;$Is_Active_Perl&#41; {
+        push&#40; @opts,
+          &#34;--quiet&#34;,
+          &#34;--index&#34;,
+          &#34;--libpods=perlfunc:perlguts:perlvar:perlrun:perlopt&#34;,
+        &#41;;
+    }
+    else {
+        push&#40; @opts,
+          &#34;--flush&#34;,
+          &#34;--title=$title&#34;,
+        &#41;;
+    }
+
     if &#40; eval{Pod::Html-&gt;VERSION&#40;1.03&#41;} &#41; {
-      push&#40; @opts, &#40;&#39;--header&#39;, &#39;--backlink=Back to Top&#39;&#41; &#41;;
+      push&#40; @opts, &#40;&#39;--header&#39;, &#39;--backlink=Back to Top&#39;&#41; &#41; unless $Is_Active_Perl;
       push&#40; @opts, &#34;--css=$path2root/&#34; . $self-&gt;html_css&#41; if $self-&gt;html_css;
     }
 
     $self-&gt;log_info&#40;&#34;HTMLifying $infile -&gt; $outfile\n&#34;&#41;;
     $self-&gt;log_verbose&#40;&#34;pod2html @opts\n&#34;&#41;;
-    eval { Pod::Html::pod2html&#40;@opts&#41;; 1 } 
+    eval { Pod::Html::pod2html&#40;@opts&#41;;
+           if &#40;$Is_Active_Perl&#41; {
+               ExtUtils::HtmlFix::manipulate_html&#40;$outfile, {
+                 index  =&gt; 1,
+                 script =&gt; 1,
+                 title  =&gt; $title,
+                 is_sp  =&gt; $Is_Active_Scineplex,
+                 root   =&gt; $htmlroot,
+                 dp     =&gt; scalar&#40;@rootdirs + @dirs&#41;,
+               }&#41;;
+           }
+           1; } 
       or $self-&gt;log_warn&#40;&#34;pod2html @opts failed: $@&#34;&#41;;
   }
 
@@ -2983,6 +3027,19 @@
   require ExtUtils::Install;
   $self-&gt;depends_on&#40;&#39;build&#39;&#41;;
   ExtUtils::Install::install&#40;$self-&gt;install_map, !$self-&gt;quiet, 0, $self-&gt;{args}{uninst}||0&#41;;
+
+  if &#40;$Is_Active_PPM&#41; {
+      $self-&gt;log_info&#40;&#34;Touching &#39;perllocal.pod&#39; for Activestate PPM\n&#34;&#41;;
+      ExtUtils::Install::touch_perllocal&#40;&#41;;
+  }
+
+  if &#40;$Is_Active_Perl&#41; {
+      $self-&gt;log_info&#40;&#34;Update Html TOC for Activestate\n&#34;&#41;;
+      eval {
+          ActivePerl::DocTools::WriteTOC&#40;&#41;;
+      }  
+      or $self-&gt;log_warn&#40;&#34;ActivePerl::DocTools::WriteTOC&#40;&#41; failed: $@&#34;&#41;;
+  }
 }
 
 sub ACTION_fakeinstall {

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;29&nbsp;12:16:07&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Ven 29 Jan 2010 12:08:11, KEICHNER a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; - Manipulating HTML is done in the new module
&gt; ExtUtils::FixHtml &#40;please let me know if that should
&gt; better be incorporated into the existing
&gt; Pod::Html&#41;
</div>
The code for subroutine ExtUtils::HtmlFix::manipulate_html&#40;&#41; has been
copied from &#34;ActivePerl/DocTools/Pod.pm&#34;.

Are there any licensing issues with that ?

-- Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;01&nbsp;19:23:39&nbsp;2010</span>
    <span class="description">srenner [...] mandtbank.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> bug-ExtUtils-MakeMaker [...] rt.cpan.org, dagolden [...] cpan.org,
 schwern [...] pobox.com, klaus03 [...] gmail.com, jand [...] activestate.com, yves [...] cpan.org,
 kwilliams [...] cpan.org</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">I saw this ticket and came up with fixes for Module::Build that will 
address all of the HTML generation issues, including the generation of 
the Table of Contents on  ActivePerl installations.  

I sent a e-mail to the &#39;module-build&#39; email address with these changes 
and Dave Golden asked me post the changes and e-mail here.  Not sure 
how these changes will fit in with the updates from Klaus....


The fixes are pretty simple and I’ve attached Module::Build::Base.pm 
with my the changes.  The changes are based on build 0.3603, with a new 
version of 0.36031. 

I’ve tested quite a bit &#40;doing a variety builds, install, ppminstall, 
dist, ppmdist, etc.&#41; and everything works as it should, but I am 
limited to Windows for testing.   I’ve tested on Perl 5.8 and 5.10 
&#40;both AS and standard&#41;.  

With these updates, there is no need to make changes to EU:Install  to 
get the html documentation working properly on any type of 
installation.  

Here is a summary of the changes….

In the section setting default properties… &#40;line 929&#41;

Deleted the property “html_css”, it is no longer needed or used.

sub _is_ActivePerl &#40;line 3034&#41;

New method that returns true if running on an ActivePerl installation.  
Is set using the same eval &#40;require ActivePerl::DocTools&#41; that was used 
to set the property “html_css”.    This is not a property because its 
value needs to be determined when the installation is run, not the 
value on the  system that built the package.  

sub ACTION_manpages &#40;line 3039&#41;

I removed the check to see if there are any files to process, because 
this is performed in both the ‘manify’ subs.  No point in doing the 
check twice.

sub ACTION_html &#40;line 3133&#41;

I also optimized this sub as well.   ‘htmlify_pods’ checks if there are 
no files to process, so there really isn’t any point in doing the check 
here too.

Sub htmlify_pods &#40;line 3172&#41;
                
I saw the comment that says “Links to other modules are not being 
generated” and saw the problem.  The original code uses “$self-&gt;blib” 
as the “podroot” and “podpath” only points to directories 
in “blib”.   “podroot” must be the absolute path to the directory where 
the installed pod files are stored, and “podpath” can be relative 
directories off of podroot, plus an absolute path to the “blib” 
directory.    With this code,  all links are generated properly.  

If $self-&gt;_is_ActivePerl is true, we use 
ActivePerl::DocTools::Pod::pod2html to generate the HTML documentation, 
otherwise we use Pod::Html:pod2html to create it.  The ActivePerl 
version also uses Pod::Html::pod2html, but then does some post 
processing on the HTML files to format them in the ActivePerl style.

I also added code to do some cleanup on the html files after they are 
generated by pod2html.    The generated HTML is NOT XHMTL, so the 
DOCTYPE is wrong.  IE6+ will not display the page if it does not pass 
validation based on the DOCTYPE.  Local pages also need this statement 
in the &lt;HEAD&gt; “&lt;!-- saved from url=&#40;0017&#41;<span class="clickylink"><a target="new" rel="nofollow" href="http://localhost/">http://localhost/</a></span> --&gt;” for 
IE6+ to load local html pages &#40;file://&#41; if certain security settings on 
the user’s PC are strict.  Lastly anchor references to html pages 
within the package point to the “blib” directory.  These are fixed up 
so they point to where they will be after they are installed.

sub ACTION_install &#40;line 3357&#41;

Added logic to check if ‘$self-&gt;is_ActivePerl’ is true, and run 
ActivePerl::DocTools::WriteTOC&#40;&#41;.  WriteTOC&#40;&#41; is the ActivePerl routine 
that updates the ActivePerl Table of Contents page and must be run 
AFTER the all the html files have been installed.

sub ACTION_ppmdist &#40;line 3515&#41;

You don’t need to generate HTML documentation when creating a PPM 
distribution, because it is generated automatically by the ppm client 
at install.   This is noted in the fact that “libdoc” and “bindoc” are 
set to “undef”.   I commented out the lines that generate the HTML.  

sub install_map &#40;line 4830&#41;

Added some logic so that man pages are not installed unless you are 
running on a Unix like operating system.  

Feel free to use these changes and to contact me if you have any 
questions or comments.  I’m glad to help in any way I can.

Scott Renner
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Base.36031.pm</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;02&nbsp;09:41:41&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Lun 01 Fév 2010 19:23:39, SARENNER a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I saw this ticket and came up with fixes for Module::Build that will 
&gt; address all of the HTML generation issues, including the generation of 
&gt; the Table of Contents on  ActivePerl installations.  
&gt; 
&gt; I sent a e-mail to the &#39;module-build&#39; email address with these changes 
&gt; and Dave Golden asked me post the changes and e-mail here.  Not sure 
&gt; how these changes will fit in with the updates from Klaus....
</div>
Hi Scott,

Thanks for your suggested changes, I will review them in detail during
the next days.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I’ve tested quite a bit &#40;doing a variety builds, install, ppminstall, 
&gt; dist, ppmdist, etc.&#41; and everything works as it should, but I am 
&gt; limited to Windows for testing.   I’ve tested on Perl 5.8 and 5.10 
&gt; &#40;both AS and standard&#41;.  
</div>
Also thanks for your testing.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Feel free to use these changes and to contact me if you have any 
&gt; questions or comments.  I’m glad to help in any way I can.
&gt; 
&gt; Scott Renner
</div>
I will contact you when I have reviewed your changes in detail.

-- Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;05&nbsp;11:57:21&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Mar 02 Fév 2010 09:41:41, KEICHNER a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thanks for your suggested changes, I will review them in detail during
&gt; the next days.
</div>
Hi Scott,

Many of your changes are almost identical to my idea of how this problem
should be resolved, so I will certainly take advantage of most of your code.

I am still working on a detailed and complete patch, I guess that next
week I can come up with a solution.

-- Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;10&nbsp;14:08:19&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Feb 05 11:57:21 2010, KEICHNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Mar 02 Fév 2010 09:41:41, KEICHNER a écrit :
<div class="message-stanza open">&gt; &gt; Thanks for your suggested changes, I will review them in detail during
&gt; &gt; the next days.
</div>&gt; 
&gt; Hi Scott,
&gt; 
&gt; Many of your changes are almost identical to my idea of how this problem
&gt; should be resolved, so I will certainly take advantage of most of your
</div>code.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; I am still working on a detailed and complete patch, I guess that next
&gt; week I can come up with a solution.
</div>
Hi Scott,

I have reviewed your changes and I agree with all of them &#40;and I learned
a lot by doing so, thanks again&#41;.

On top of your changes &#40;ver 36031&#41;, I have added changes to handle
&#39;lib/perllocal.pod&#39; &#40;ver 36032&#41;

- I have created a new module ActivePerl::PPM::InstallHist, subroutine
add_info&#40;&#41; to handle the file date of &#39;lib/perllocal.pod&#39; &#40;and I have 
added some comments where I suggest a replacement procedure&#41;

- I have cloned your subroutine _is_ActivePerl&#40;&#41; to create a new
subroutine _is_ActivePPM&#40;&#41; &#40;to check for the new module
ActivePerl::PPM::InstallHist&#41;

- In subroutine ACTION_install, I allowed myself to wrap your call
ActivePerl::DocTools::WriteTOC&#40;&#41; into an eval{...} and I have added my
own call eval{ ActivePerl::PPM::InstallHist::add_info&#40;&#41; }.

I have tested with and without ActiveState under Ubuntu Linux,
perl 5.10.1

Please find the two files &#39;Base.36032.pm&#39; and &#39;InstallHist.00100.pm&#39;
attached &#40;I hope the line endings are ok, as I now work under Linux&#41;

-- Klaus
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Base.36032.pm</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> InstallHist.00100.pm</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">package ActivePerl::PPM::InstallHist;

$VERSION = &#39;0.001&#39;;

use strict;
use warnings;

# The code for subroutine add_info&#40;&#41; is designed to be consistent with
# &#39;ActivePerl/PPM/InstallArea.pm&#39;, subroutine _init_db&#40;&#41;.

use Config qw&#40;%Config&#41;;
use File::Spec;

my $prefix = $Config{prefix};

sub add_info {
    my $P_target    = $_[0]{target};
    my $P_instdir   = $_[0]{instdir};
    my $P_buildtool = $_[0]{buildtool};

    my $dt_stamp = time;
    my $dt_yyyymmdd = do{
        my &#40;$sec, $min, $hour, $day, $month, $year&#41; = localtime&#40;$dt_stamp&#41;;
        sprintf &#39;%04d-%02d-%02d %02d:%02d:%02d&#39;,
          $year + 1900, $month + 1, $day, $hour, $min, $sec;
    };

    # possible values for $P_instdir are: &#39;core&#39;, &#39;site&#39; or &#39;vendor&#39;.
    # &#40;we actually don&#39;t know what to do with &#39;vendor&#39;, so let&#39;s assume &#39;site&#39; when $P_instdir is &#39;vendor&#39;&#41;

    my $name = $P_instdir eq &#39;core&#39; ? &#39;perl&#39; : &#39;site&#39;;
    my @tdir = $P_instdir eq &#39;core&#39; ? &#40;&#41; : &#40;&#39;site&#39;&#41;;

    # in the following line, &#39;perllocal.pod&#39; this is *always* &#39;lib/perllocal.pod&#39;, never &#39;site/lib/perllocal.pod&#39;
    my $F_perllocal = File::Spec-&gt;catfile&#40;$prefix,        &#39;lib&#39;, &#34;perllocal.pod&#34;&#41;;
    my $F_PPM_db    = File::Spec-&gt;catfile&#40;$prefix, @tdir, &#39;etc&#39;, &#34;ppm-$name-area.db&#34;&#41;;
    my $F_Text      = File::Spec-&gt;catfile&#40;$prefix, @tdir, &#39;etc&#39;, &#34;ppm-$name-dirty.txt&#34;&#41;;
    my $F_lib_dir   = File::Spec-&gt;catdir&#40;$prefix,  @tdir, &#39;lib&#39;&#41;;

    # We touch &#39;lib/perllocal.pod&#39;. There is an existing logic in subroutine _init_db&#40;&#41;
    # of &#39;ActivePerl/PPM/InstallArea.pm&#39; that says that if &#39;lib/perllocal.pod&#39; has a &#39;date-last-touched&#39;
    # greater than that of the PPM SQLite databases &#40;&#39;etc/ppm-perl-area.db&#39; and/or
    # &#39;site/etc/ppm-site-area.db&#39;&#41; then the PPM SQLite databases are rebuilt from scratch.

    open PERLLOCAL, &#34;&gt;&gt;$F_perllocal&#34;;
    close PERLLOCAL;
    utime&#40;$dt_stamp, $dt_stamp, $F_perllocal&#41;;

    # What follows here is a proposal to replace the procedure with &#39;lib/perllocal.pod&#39; by something more
    # flexible. The idea is to write our install details to one of two new text files &#40;&#39;etc/ppm-perl-dirty.txt&#39; or
    # &#39;site/etc/ppm-site-dirty.txt&#39;&#41;. Currently, those text files are not exploited, but we hope, in the future,
    # to be able to replace the existing logic &#40;in subroutine _init_db&#40;&#41; of &#39;ActivePerl/PPM/InstallArea.pm&#39;&#41;
    # by a new logic that relies on the information in those two text files. This should allow us to refresh
    # individual modules within the PPM SQLite databases, rather than rebuilding the whole set of installed
    # modules each time we update a single module.

    # The question arises: why don&#39;t we just add a single record &#40;see &#34;$P_target&#34;&#41; to the PPM SQLite databases
    # &#40;&#39;etc/ppm-perl-area.db&#39; and/or &#39;site/etc/ppm-site-area.db&#39;&#41; directly here in this subroutine ? - Well, the
    # answer is: We could, but it turns out that this is not a good idea, because if we did, we would
    # inevitably set a new date/time stamp for the PPM SQLite database, and as a consequence, we would miss
    # all module installs that have been made by ExtUtils::MakeMaker.

    # An open question &#40;about housekeeping&#41;: when do records in the text files get deleted ? - or do they grow
    # indefinitely ? - Should the text file be cleared each time a PPM SQLite database is re-built from scratch ?

    # Anyway, the following 3 lines need to be uncommented to write to the text file:

    # open TXTFILE, &#34;&gt;&gt;$F_Text&#34;;
    # printf TXTFILE &#34;%s, %-40s, %-25s, %s\n&#34;, $dt_yyyymmdd, $P_target, $P_buildtool, $F_lib_dir;
    # close TXTFILE;
}

1;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;14&nbsp;02:25:49&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi David, Jan,

With reference to &#34;ActiveState HTML generation and PPM compatibility&#34;,

Now that Perl 5.12 is out,
can we discuss the changes to Module::Build::Base &#40;and a new module
ActivePerl::PPM::InstallHist&#41; ? as per the attachment -- two files
&#39;Base.36032.pm&#39; and &#39;InstallHist.00100.pm&#39; -- in my message from 10 Feb
2010.

-- Klaus

Le Mer 10 Fév 2010 14:08:19, KEICHNER a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Fri Feb 05 11:57:21 2010, KEICHNER wrote:
<div class="message-stanza open">&gt; &gt; Le Mar 02 Fév 2010 09:41:41, KEICHNER a écrit :
<div class="message-stanza open">&gt; &gt; &gt; Thanks for your suggested changes, I will review them in detail during
&gt; &gt; &gt; the next days.
</div>&gt; &gt; 
&gt; &gt; Hi Scott,
&gt; &gt; 
&gt; &gt; Many of your changes are almost identical to my idea of how this problem
&gt; &gt; should be resolved, so I will certainly take advantage of most of your
</div>&gt; code.
<div class="message-stanza open">&gt; &gt; 
&gt; &gt; I am still working on a detailed and complete patch, I guess that next
&gt; &gt; week I can come up with a solution.
</div>&gt; 
&gt; Hi Scott,
&gt; 
&gt; I have reviewed your changes and I agree with all of them &#40;and I learned
&gt; a lot by doing so, thanks again&#41;.
&gt; 
&gt; On top of your changes &#40;ver 36031&#41;, I have added changes to handle
&gt; &#39;lib/perllocal.pod&#39; &#40;ver 36032&#41;
&gt; 
&gt; - I have created a new module ActivePerl::PPM::InstallHist, subroutine
&gt; add_info&#40;&#41; to handle the file date of &#39;lib/perllocal.pod&#39; &#40;and I have 
&gt; added some comments where I suggest a replacement procedure&#41;
&gt; 
&gt; - I have cloned your subroutine _is_ActivePerl&#40;&#41; to create a new
&gt; subroutine _is_ActivePPM&#40;&#41; &#40;to check for the new module
&gt; ActivePerl::PPM::InstallHist&#41;
&gt; 
&gt; - In subroutine ACTION_install, I allowed myself to wrap your call
&gt; ActivePerl::DocTools::WriteTOC&#40;&#41; into an eval{...} and I have added my
&gt; own call eval{ ActivePerl::PPM::InstallHist::add_info&#40;&#41; }.
&gt; 
&gt; I have tested with and without ActiveState under Ubuntu Linux,
&gt; perl 5.10.1
&gt; 
&gt; Please find the two files &#39;Base.36032.pm&#39; and &#39;InstallHist.00100.pm&#39;
&gt; attached &#40;I hope the line endings are ok, as I now work under Linux&#41;
&gt; 
&gt; -- Klaus
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;14&nbsp;13:21:46&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> klaus03 [...] gmail.com, jand [...] activestate.com,  Module-Build &lt;module-build [...] perl.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and  PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 14 Apr 2010 13:21:08 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Apr 14, 2010 at 2:25 AM, Klaus Eichner via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now that Perl 5.12 is out,
&gt; can we discuss the changes to Module::Build::Base &#40;and a new module
&gt; ActivePerl::PPM::InstallHist&#41; ? as per the attachment -- two files
&gt; &#39;Base.36032.pm&#39; and &#39;InstallHist.00100.pm&#39; -- in my message from 10 Feb
&gt; 2010.
</div>
We can try.  Since your patch, Module::Build has migrated to git and
is being hosted at github.

   <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/dagolden/module-build/">http://github.com/dagolden/module-build/</a></span>

I have created a branch &#39;rt/53478&#39; with your patch:

    <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/dagolden/module-build/tree/rt/53478">http://github.com/dagolden/module-build/tree/rt/53478</a></span>

It fails t/ppm.t because that test expects HTML files and the patch
stops them from being produced.  &#40;Intentionally&#41;.  I&#39;m not sure if
that is the right thing, since it may impact non-ActiveState users of
PPM.

Now that we have git for easy branching, I encourage more refinements
for that branch including getting all tests to a passing state.

If no one on the M::B mailing list objects to PPM no longer having
HTML generated for them, or has an alternate solution that gets
consensus, I&#39;d be happy to merge the branch into the main line.

Regards,
David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;14&nbsp;15:41:12&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Mer 14 Avr 2010 13:21:46, DAGOLDEN a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed, Apr 14, 2010 at 2:25 AM, Klaus Eichner via RT
&gt; &lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<div class="message-stanza open">&gt; &gt; Now that Perl 5.12 is out,
&gt; &gt; can we discuss the changes to Module::Build::Base &#40;and a new module
&gt; &gt; ActivePerl::PPM::InstallHist&#41; ? as per the attachment -- two files
&gt; &gt; &#39;Base.36032.pm&#39; and &#39;InstallHist.00100.pm&#39; -- in my message from 10 Feb
&gt; &gt; 2010.
</div>&gt; 
&gt; We can try.  Since your patch, Module::Build has migrated to git and
&gt; is being hosted at github.
&gt; 
&gt;    <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/dagolden/module-build/">http://github.com/dagolden/module-build/</a></span>
&gt; 
&gt; I have created a branch &#39;rt/53478&#39; with your patch:
&gt; 
&gt;     <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/dagolden/module-build/tree/rt/53478">http://github.com/dagolden/module-build/tree/rt/53478</a></span>
</div>
Thanks for that. I guess I will now need to learn now how to create my
own github :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It fails t/ppm.t because that test expects HTML files and the patch
&gt; stops them from being produced.  &#40;Intentionally&#41;.  I&#39;m not sure if
&gt; that is the right thing, since it may impact non-ActiveState users of
&gt; PPM.
</div>
The stop to writing of HTML for PPM was an addition by Scott Renner
which is not essential for the original problem, that is to say:
personally I don&#39;t mind either way if HTML for PPM is generated or not.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Now that we have git for easy branching, I encourage more refinements
&gt; for that branch including getting all tests to a passing state.
&gt; 
&gt; If no one on the M::B mailing list objects to PPM no longer having
&gt; HTML generated for them, or has an alternate solution that gets
&gt; consensus, I&#39;d be happy to merge the branch into the main line.
</div>
To Jan:
I would like to bring to the attention that a new module
&#40;&#34;ActivePerl::PPM::InstallHist&#34;&#41; is created by this patch. Is that OK
with you ?

Cheers,
Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Apr&nbsp;21&nbsp;06:30:45&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Le Mer 14 Avr 2010 15:41:12, KEICHNER a écrit :
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Mer 14 Avr 2010 13:21:46, DAGOLDEN a écrit :
<div class="message-stanza open">&gt; &gt; Now that we have git for easy branching, I encourage more refinements
&gt; &gt; for that branch including getting all tests to a passing state.
&gt; &gt; 
&gt; &gt; If no one on the M::B mailing list objects to PPM no longer having
&gt; &gt; HTML generated for them, or has an alternate solution that gets
&gt; &gt; consensus, I&#39;d be happy to merge the branch into the main line.
</div></div>
I have refined Module/Build/Base.pm, you can pull from my branch at
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/klaus03/module-build/tree/my53478">http://github.com/klaus03/module-build/tree/my53478</a></span>

&#40; You can see the details of the changes in
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/klaus03/module-build/commit/192f42229955b99d19782c5c7fabe018ec891dc2">http://github.com/klaus03/module-build/commit/192f42229955b99d19782c5c7fabe018ec891dc2</a></span>
&#41;

In that refinement, I have replaced the use of
ActivePerl::PPM::InstallHist by a simple touch perllocal.pod.

I have also removed the stop to writing HTML for PPM.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; To Jan:
&gt; I would like to bring to the attention that a new module
&gt; &#40;&#34;ActivePerl::PPM::InstallHist&#34;&#41; is created by this patch. Is that OK
&gt; with you ?
</div>
I would like to get some directions from ActiveState: is the
introduction of ActivePerl::PPM::InstallHist a good idea &#40;as it was in
branch rt/53478&#41;, or is it better to use a simple touch perllocal.pod
&#40;as it is now in branch my53478&#41; ?

Cheers,
Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;10&nbsp;14:23:10&nbsp;2010</span>
    <span class="description">KEICHNER [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">RT-Send-CC:</td>
    <td class="message-header-value"> dagolden [...] cpan.org, klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Apr 21 06:30:45 2010, KEICHNER wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Le Mer 14 Avr 2010 15:41:12, KEICHNER a écrit :
<div class="message-stanza open">&gt; &gt; Le Mer 14 Avr 2010 13:21:46, DAGOLDEN a écrit :
<div class="message-stanza open">&gt; &gt; &gt; Now that we have git for easy branching, I encourage more
</div></div>&gt; refinements
<div class="message-stanza open">&gt; &gt; &gt; for that branch including getting all tests to a passing state.
&gt; &gt; &gt;
&gt; &gt; &gt; If no one on the M::B mailing list objects to PPM no longer having
&gt; &gt; &gt; HTML generated for them, or has an alternate solution that gets
&gt; &gt; &gt; consensus, I&#39;d be happy to merge the branch into the main line.
</div>&gt; 
&gt; I have refined Module/Build/Base.pm, you can pull from my branch at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/klaus03/module-build/tree/my53478">http://github.com/klaus03/module-build/tree/my53478</a></span>
&gt; 
&gt; &#40; You can see the details of the changes in
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/klaus03/module-">http://github.com/klaus03/module-</a></span>
&gt; build/commit/192f42229955b99d19782c5c7fabe018ec891dc2
&gt; &#41;
&gt; 
&gt; In that refinement, I have replaced the use of
&gt; ActivePerl::PPM::InstallHist by a simple touch perllocal.pod.
&gt; 
&gt; I have also removed the stop to writing HTML for PPM.
</div>
I have merged Module::Build version 0.36.09 into my branch &#34;my53478&#34;

You can find my branch &#40;with the merged version 0.36.09&#41; at
<span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/klaus03/module-build/tree/my53478">http://github.com/klaus03/module-build/tree/my53478</a></span>

The tests &#40;under Linux&#41; look OK &#40;even t/ppm.t works ok&#41;

Any chance that my changes get pulled into the main development branch
for Module::Build ?

Here is the test log:

[$] ~/PerlModules/Module-Build/Module-Build-0.36.09&gt; sudo make test
/usr/local/bin/perl Build --makefile_env_macros 1 test
t/00-compile.t ................. ok     
t/PL_files.t ................... ok   
t/actions/installdeps.t ........ ok   
t/actions/manifest_skip.t ...... ok   
t/add_property.t ............... ok     
t/basic.t ...................... ok     
t/bundle_inc.t ................. skipped: $ENV{MB_TEST_EXPERIMENTAL} is
not set
t/compat.t ..................... ok     
t/compat/exit.t ................ ok   
t/debug.t ...................... ok   
t/destinations.t ............... ok       
t/ext.t ........................ ok       
t/extend.t ..................... ok     
t/files.t ...................... ok   
t/help.t ....................... ok     
t/install.t .................... ok     
t/install_extra_target.t ....... ok   
t/manifypods.t ................. ok     
t/metadata.t ................... ok     
t/metadata2.t .................. ok     
t/moduleinfo.t ................. ok     
t/mymeta.t ..................... ok     
t/new_from_context.t ........... ok   
t/notes.t ...................... ok     
t/par.t ........................ skipped: PAR::Dist 0.17 or up not
installed to check .par&#39;s.
t/parents.t .................... ok     
t/perl_mb_opt.t ................ ok   
t/pod_parser.t ................. ok   
t/ppm.t ........................ ok    
t/properties/module_name.t ..... ok   
t/properties/needs_compiler.t .. ok     
t/properties/share_dir.t ....... ok     
t/resume.t ..................... ok   
t/runthrough.t ................. ok     
t/sample.t ..................... ok   
t/script_dist.t ................ ok   
t/signature.t .................. skipped: $ENV{TEST_SIGNATURE} is not set
t/test_file_exts.t ............. ok   
t/test_type.t .................. ok   
t/test_types.t ................. ok     
t/tilde.t ...................... ok     
t/use_tap_harness.t ............ ok   
t/versions.t ................... ok   
t/write_default_maniskip.t ..... ok   
t/xs.t ......................... ok    
All tests successful.
Files=45, Tests=1168, 121 wallclock secs &#40; 0.27 usr  0.53 sys + 68.04
cusr 46.45 csys = 115.29 CPU&#41;
Result: PASS

--
Klaus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;May&nbsp;10&nbsp;22:54:29&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and  PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 10 May 2010 22:53:58 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, May 10, 2010 at 2:23 PM, Klaus Eichner via RT
&lt;bug-Module-Build@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I have merged Module::Build version 0.36.09 into my branch &#34;my53478&#34;
&gt;
&gt; You can find my branch &#40;with the merged version 0.36.09&#41; at
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/klaus03/module-build/tree/my53478">http://github.com/klaus03/module-build/tree/my53478</a></span>
&gt;
&gt; The tests &#40;under Linux&#41; look OK &#40;even t/ppm.t works ok&#41;
&gt;
&gt; Any chance that my changes get pulled into the main development branch
&gt; for Module::Build ?
</div>
I&#39;ll try to find some time in the next couple weeks to review it.
Assuming it looks good, I&#39;ll merge it in and do a development release
against it to test it in the wild.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;11&nbsp;08:40:19&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> klaus03 [...] gmail.com, jand [...] activestate.com</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #53478] Diffs with ActiveState HTML generation and  PPM compatibility</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 11 May 2010 08:39:42 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Module-Build [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> David Golden &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, May 10, 2010 at 10:53 PM, David Golden &lt;dagolden@cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt;&gt; Any chance that my changes get pulled into the main development branch
&gt;&gt; for Module::Build ?
</div>&gt;
&gt; I&#39;ll try to find some time in the next couple weeks to review it.
&gt; Assuming it looks good, I&#39;ll merge it in and do a development release
&gt; against it to test it in the wild.
</div>
Actually, the changes looked minor so I went ahead and rebased your
branch into the master branch.  I&#39;ll look to do a development release
&#39;soonish&#39;.

-- David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Dec&nbsp;05&nbsp;23:15:53&nbsp;2010</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;27&nbsp;12:21:49&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Now that there has been a stable Module::Build release, I&#39;m marking this
&#34;patched&#34; issue as &#34;resolved&#34;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;27&nbsp;12:21:50&nbsp;2011</span>
    <span class="description">The RT System itself -  Status changed from &#39;patched&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;27&nbsp;12:21:50&nbsp;2011</span>
    <span class="description">dagolden [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
