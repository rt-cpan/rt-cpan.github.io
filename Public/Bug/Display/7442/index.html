<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #7442 for Image-Info: Infinite loop of errors in Image::Info::TIFF</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #7442 for Image-Info: Infinite loop of errors in Image::Info::TIFF</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Image-Info/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Image-Info/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Image-Info/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Image-Info/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Image-Info">Image-Info CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">7442</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1 hour (60 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Image-Info/Active/">Image-Info</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">TELS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
b.wheeler [...] ulcc.ac.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-16644-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.16    </td>
  </tr>
  <tr id="CF-16645-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.20    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




ii16.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/160662/50155/ii16.patch">
Mon Jan 30 13:35:50 2006 (6.6k) by b.wheeler [...] ulcc.ac.uk
</a>
</font></li>
</ul>


test.tif<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/160662/50157/test.tif">
Mon Jan 30 13:35:50 2006 (2.7k) by b.wheeler [...] ulcc.ac.uk
</a>
</font></li>
</ul>


tiff.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/160662/50156/tiff.t">
Mon Jan 30 13:35:50 2006 (1011b) by b.wheeler [...] ulcc.ac.uk
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Aug&nbsp;23&nbsp;09:13:08&nbsp;2004</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Infinite loop of errors in Image::Info::TIFF</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Under certain circumstances, Image::Info::TIFF seems to go into an infinite loop of errors, though I haven&#39;t managed to track down where the loop is yet.
The cause is an incorrect self-call within process_ifds&#40;&#41; at line 185 of Image/Info/TIFF.pm. Here is the context:

        if &#40;$tn eq &#34;ExifOffset&#34;&#41; {
            # parse ExifSubIFD
            &#38;process_ifds&#40;$info,$fh,$byteorder,$offset&#41;;
        }

My guess is it should be
            &#38;process_ifds&#40;$info,$fh,$page,$tagsseen,$byteorder,$offset&#41;;

The missing 3rd and 4th arguments result in $byteorder being undef in the inside call, which leads to this error:

  Use of uninitialized value in string ne at /usr/local/lib/perl5/site_perl/5.8.0/Image/Info/TIFF.pm line 73.

Then, I think because the function is being called inside an eval which doesn&#39;t appear to check whether it succeeded or not, it just goes round again and again. Possibly some additional error checking in my own code could avoid that, but equally how could I guess that an unexpected error in Image::Info would fail to halt?

Ben
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;28&nbsp;05:39:15&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;28&nbsp;06:59:45&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Could you please send me an example file which exhibits this problem?

Thanx,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Jan&nbsp;28&nbsp;06:59:46&nbsp;2006</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;13:35:49&nbsp;2006</span>
    <span class="description">b.wheeler [...] ulcc.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #7442] Infinite loop of errors in Image::Info::TIFF</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 30 Jan 2006 18:34:44 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-Image-Info [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Wheeler &lt;b.wheeler [...] ulcc.ac.uk&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sat, Jan 28, 2006 at 06:59:46AM -0500,  via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Could you please send me an example file which exhibits this problem?
</div>
Strangely, after 1.5 years I don&#39;t still have the file. ;&#41; But it&#39;s
good to know someone has picked this up, thanks!

I do still have some notes from when I discovered the bug.
It was triggered by the presence of an ExifIFD tag
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.awaresystems.be/imaging/tiff/tifftags/exififd.html">http://www.awaresystems.be/imaging/tiff/tifftags/exififd.html</a></span>
which Image::Info attempts to parse by the incorrect recursive call
as reported.

According to my notes the particular file I used was created in Photoshop, 
so that might help you construct one, though not all files created in
Photoshop have them and I don&#39;t know why this one did.
There was nothing special about it, and I think any TIFF containing 
an ExifIFD block will trigger the bug.

I have been successfully using the fix I mention in the original bug report.
I have also fixed another couple of TIFF handling bugs I ran into which I 
didn&#39;t bother to report because Image::Info seemed to be unmaintained. 

2004/10/01 BJW
~ Fixed &#34;deep recursion&#34; in Image::Info::TIFF when processing multi-page 
  TIFF files, by replacing process_ifds recursion for each directory with 
  iteration.

2004/10/01 BJW
~ Fixed logic of process_ifds, which previously failed to catch certain
  conditions or was just plain wrong.
* Wrote t/tiff.t, testing a multi-page tiff in img/test.tif

&#40;By &#34;just plain wrong&#34; I mean it did not agree with the TIFF standard&#41;.

I&#39;m afraid I can&#39;t extract separate patches for these but I have attached
a combined patch against 1.16. I&#39;ve been using this patched version 
since 2004 to process quite a high volume of TIFF files created by
various packages, and haven&#39;t run into any problems with it.

I also attach a new test program which should go in ./t, and a 
multi-page TIFF file to go in ./img which is used by the test program.

Hope this is helpful.
Regards,
Ben
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/160662/50157/test.tif">Download test.tif</a><br />
<span class="downloadcontenttype">image/tiff 2.7k</span>
</div>
<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;30&nbsp;15:05:36&nbsp;2006</span>
    <span class="description">nospam-abuse [...] bloodgate.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #7442] Infinite loop of errors in Image::Info::TIFF</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 30 Jan 2006 21:01:43 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Image-Info [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Tels &lt;nospam-abuse [...] bloodgate.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Moin,

On Monday 30 January 2006 19:35, b.wheeler@ulcc.ac.uk via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=7442">http://rt.cpan.org/Ticket/Display.html?id=7442</a></span> &gt;
&gt;
&gt; On Sat, Jan 28, 2006 at 06:59:46AM -0500,  via RT wrote:
<div class="message-stanza open">&gt; &gt; Could you please send me an example file which exhibits this problem?
</div>&gt;
&gt; Strangely, after 1.5 years I don&#39;t still have the file. ;&#41; But it&#39;s
&gt; good to know someone has picked this up, thanks!
</div>
I now maintain Image::Info since I am using it for something and Gisle 
hasn&#39;t gotten the time for it anymore. So don&#39;t expect miracle from me :&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I do still have some notes from when I discovered the bug.
</div>[snip explanations]

I will look at this for 1.18, which will not happen before the weekend - 
but many thanx for the info and patches etc.

Best wishes,

Tels

-- 
 Signed on Mon Jan 30 21:00:18 2006 with key 0x93B84C15.
 Visit my photo gallery at <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/photos/">http://bloodgate.com/photos/</a></span>
 PGP key on <span class="clickylink"><a target="new" rel="nofollow" href="http://bloodgate.com/tels.asc">http://bloodgate.com/tels.asc</a></span> or per email.

 &#34;...no one would risk manipulating votes in an election because it&#39;s
 against the law and carries a heavy penalty...&#34; -- Diebold spokesman
 David Bear
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/160693/50180/">Download &#40;untitled&#41;</a><br />
<span class="downloadcontenttype">application/pgp-signature 481b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Mar&nbsp;03&nbsp;10:42:15&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">5 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 30 13:35:49 2006, b.wheeler@ulcc.ac.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, Jan 28, 2006 at 06:59:46AM -0500,  via RT wrote:
<div class="message-stanza open">&gt; &gt; Could you please send me an example file which exhibits this problem?
</div></div>
Oh boy, I just released 1.18 after tracking many hours bugs in the EXIF
parsing code and I totally forgot about your problem :&#40;

In any event, I am now really considering just using Image::Exiftool to
extract the EXIF data, since the code in Image::Info is quite a mess and
incomplete/out-of-date. 

F.i., I added some Panasonic stuff, but quite a lot of other
manufacturers/models are still missing.

Hopefully I will find some energy to do this on this weekend.

Sorry about the delays,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;05&nbsp;04:00:56&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">15 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 30 13:35:49 2006, b.wheeler@ulcc.ac.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, Jan 28, 2006 at 06:59:46AM -0500,  via RT wrote:
<div class="message-stanza open">&gt; &gt; Could you please send me an example file which exhibits this problem?
</div>&gt; 
&gt; Strangely, after 1.5 years I don&#39;t still have the file. ;&#41; But it&#39;s
&gt; good to know someone has picked this up, thanks!
</div>
:&#41;

I applied your patch, added the test.tif and t/tiff.t files. 

In addition, I rewrote the test to use Test::More, the my_foo private
functions to be _foo &#40;to make Pod::Test happy with no extra work&#41;, added
a POD and added Info/TIFF.pm to t/pod_cov.t.

The test fail with 1.18 and pass with 1.19, so hopefully this will fix
both this bug and <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=3698">https://rt.cpan.org/Ticket/Display.html?id=3698</a></span> .

Best wishes,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;05&nbsp;04:16:36&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">15 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jan 30 13:35:49 2006, b.wheeler@ulcc.ac.uk wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Sat, Jan 28, 2006 at 06:59:46AM -0500,  via RT wrote:
<div class="message-stanza open">&gt; &gt; Could you please send me an example file which exhibits this problem?
</div>&gt; 
&gt; Strangely, after 1.5 years I don&#39;t still have the file. ;&#41; But it&#39;s
&gt; good to know someone has picked this up, thanks!
</div>
:&#41;

I applied your patch, added the test.tif and t/tiff.t files. 

In addition, I rewrote the test to use Test::More, the my_foo private
functions to be _foo &#40;to make Pod::Test happy with no extra work&#41;, added
a POD and added Info/TIFF.pm to t/pod_cov.t.

The test fail with 1.18 and pass with 1.19, so hopefully this will fix
both this bug and <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=3698">https://rt.cpan.org/Ticket/Display.html?id=3698</a></span> .

Best wishes,

Tels
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;06&nbsp;04:49:55&nbsp;2006</span>
    <span class="description">b.wheeler [...] ulcc.ac.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #7442] Infinite loop of errors in Image::Info::TIFF</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 6 Mar 2006 09:49:32 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> via RT &lt;bug-Image-Info [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ben Wheeler &lt;b.wheeler [...] ulcc.ac.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun, Mar 05, 2006 at 04:16:40AM -0500,  via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The test fail with 1.18 and pass with 1.19, so hopefully this will fix
&gt; both this bug and <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=3698">https://rt.cpan.org/Ticket/Display.html?id=3698</a></span> .
</div>
Great news Tels, thanks very much.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;14&nbsp;12:05:51&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  TimeWorked changed from &#39;35&#39; to &#39;60&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;14&nbsp;12:05:52&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;14&nbsp;12:05:53&nbsp;2006</span>
    <span class="description">TELS [...] cpan.org -  Fixed in 1.20 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
