<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #19478 for HTML-Parser: HTML-Parser does not recognise &lt;meta http-equiv=&#34;&#34;&gt; for charsets</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #19478 for HTML-Parser: HTML-Parser does not recognise &lt;meta http-equiv=&#34;&#34;&gt; for charsets</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/HTML-Parser/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/HTML-Parser/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/HTML-Parser/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/HTML-Parser/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/HTML-Parser">HTML-Parser CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">19478</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/HTML-Parser/Active/">HTML-Parser</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Ben.Evans [...] morganstanley.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-15862-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
3.51    </td>
  </tr>
  <tr id="CF-15863-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;25&nbsp;11:07:54&nbsp;2006</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> HTML-Parser does not recognise &lt;meta http-equiv=&#34;&#34;&gt; for charsets</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">HTML::Parser does not seem to be compatible with non-Western encodings
when the encoding is specified via a &lt;meta&gt; tag.

A good way to manifest this is via HTML in the ISO-2022-JP charset - see
attached sample HTML.

The issue here is that ISO-2022-JP when in one of its Japanese modes may
contain a byte of value 60 &#40;ASCII &#39;&lt;&#39;&#41; as part of a 2-byte character. 
 
If the parser is not charset-aware, this will cause Japanese text to be
silently munched into a broken tagname &#40;probably until the next instance
of byte value 62, &#39;&gt;&#39; or EOL where a sane HTML parser would probably
decide it has been fed a seriously mangled bit of tag soup and reset for
the next line - which is the observed behaviour of HTML::Parser&#41; 

Main use cases for this would be HTML parsing when it is not known ahead
of time which charset the HTML is written in. 

Behaviour demonstrated on perl 5.8.4 on Red Hat Linux AS 3.0
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> hy-decode2.html</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>

<div class="messagebody">
<div class="message-stanza"><p>testテスト</p>
<p>機
腫ぢ筈苳山僖織鹿霈
腫商鈞齔纂昭蝟昭蝟鹿粡
鹿粡
鹿粡
鹿粡
寂蝟赱齠就站續鱇銖痺闔纉黶艱闥鱚齔闔纐緕⊂
寂蝟赱齠就站續鱇銖痺闔⊂
寂蝟赱齠就辣籬⊂
首鞜竚癈鷭♯紜碵雹
鹿齔瘤首鞜竚癈鷭≫癆紜祥闔碵雹麗鈞齔傘窪鈞齔三敢宜艮界鈞齔参旭玄鞜郛
首鞜竚癈鷭≫纉竰蜷闔⊂覗喪鞜隨闥闥鱚齔闔粤釿痲粤篌鞜郛
首鞜竚癈鷭♯蜊絖諷遐昭鞜郛首鞜竚癈鷭≡笏蜿銖蜆粤遐昭鞜郛
鹿粡
寂蝟赱齠就竢銓緕槇

寂蝟赱齠就辣齠瘍繧閼寂蝟赱齠就辣齠瘍絖齡瘤赱蜴纔蜚絖齔痺紜菖蒹纔鞜鴦繖繞粤竢粤矼肬鱚熙３校鞜齠繖挽楊査倚鴦纈黼蒹釿閼
迴糒跂痺蓍纐癆鹿粡鹿粡
鹿粡
鹿粡
鹿粡
寂蝟赱齠就站續鱇銖痺闔癈蜒囈癆粐⊂
寂蝟赱齠就站續鱇銖痺闔⊂
寂蝟赱齠就辣籬⊂
首鞜竚癈鷭♯紜碵雹
鹿齔瘤首鞜竚癈鷭≫癆紜祥闔碵雹麗鈞齔傘窪鈞齔三敢宜艮共鈞齔参旭玄鞜郛
首鞜竚癈鷭≫纉竰蜷闔⊂壽參蜚黼趾囈癆葹鈑繖鳫Γ街試纓Γ街３校關緕Γ街纂鞜郛
首鞜竚癈鷭♯蜊絖諷遐昭鞜郛首鞜竚癈鷭≡笏蜿銖蜆粤遐昭鞜郛
鹿粡
寂蝟赱齠就竢銓緕槇鹿粡
鹿粡
鹿粡
寂蝟赱齠就站續鱇銖痺闔癈蜒囈癆遐寂蝟赱齠就站續鱇銖痺闔⊂
寂蝟赱齠就辣籬⊂
首鞜竚癈鷭♯紜碵雹釈篏癈鱇銖釶辣就赱齡瘤鵞昭鹿齔瘤首鞜竚癈鷭≫癆紜祥闔碵雹麗鈞齔傘窪鈞齔三敢宜艮研鈞齔参旭玄鞜郛
首鞜竚癈鷭≫纉竰蜷闔⊂覗喪鞜隨闥竏瘤艱胙闕３校關緕Γ街３校鱚裙笏繖Γ街纂鞜郛
首鞜竚癈鷭♯蜊絖諷遐昭鞜郛首鞜竚癈鷭≡笏蜿銖蜆粤遐昭鞜郛
鹿粡
寂蝟赱齠就竢銓緕槇鹿粡
鹿粡
鹿粡
鹿粡
取竚癈鷭≪跂癇
鹿粡
鹿粡




鹿粡


取竚癈鷭≪跂癇
鹿粡
鹿硼糯鹿蔗迪