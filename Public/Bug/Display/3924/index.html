<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #3924 for GD: &#39;libgd&#39; installed in dir with upper case letters</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #3924 for GD: &#39;libgd&#39; installed in dir with upper case letters</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/GD/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/GD/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/GD/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/GD/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GD">GD CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">3924</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">1 min

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/GD/Active/">GD</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">LDS [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Bernhard.Schmalhofer [...] biomax.de

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-14260-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
2.07    </td>
  </tr>
  <tr id="CF-14261-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;01&nbsp;11:23:39&nbsp;2003</span>
    <span class="description">Guest -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> &#39;libgd&#39; installed in dir with upper case letters</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">At work, running under Linux, we have &#39;libgd&#39; installed in a directory which contain upper case letters. When installing with CPAN.pm I usually enter the location at the prompt.
However in Makefile.PL the input for &#39;lib_gd_path&#39; is lowercased by &#39;lc&#39;.
Under Linux this breaks compilation.
I think that the &#39;lc&#39; is just a type, left over from lowercasing &#39;Y&#39; to &#39;y&#39;.

As removing the &#39;lc&#39; might break existing scripts, I have added a check,
and lowercase only when &#39;lib_gd_path&#39; does not exist.

A patched &#39;Makefile.PL&#39; is attached.
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">use ExtUtils::MakeMaker qw&#40;prompt WriteMakefile&#41;;

unless &#40;@ARGV&#41; {
warn &lt;&lt;&#39;END_WARN&#39;;
NOTICE: This module requires libgd 2.0.12 or higher.
        it will NOT work with earlier versions.
        See www.cpan.org for versions of GD that are compatible
        with earlier versions of libgd.

Type perl Makefile.PL -h for command-line option summary
END_WARN
}


# =====&gt; PATHS: CHECK AND ADJUST &lt;=====
my @INC     = qw&#40;-I/usr/local/include -I/usr/local/include/gd&#41;;
my @LIBPATH = qw&#40;-L/usr/lib/X11 -L/usr/X11R6/lib -L/usr/X11/lib -L/usr/local/lib&#41;;
my @LIBS    = qw&#40;-lgd -lpng -lz&#41;;

#############################################################################################
# Build options passed in to script to support reproducible builds via Makefiles
#############################################################################################
use Getopt::Long;
my $result = GetOptions&#40;&#34;options=s&#34;       =&gt; \$options,
			&#34;lib_gd_path=s&#34;   =&gt; \$lib_gd_path,
			&#34;lib_ft_path=s&#34;   =&gt; \$lib_ft_path,
			&#34;lib_png_path=s&#34;  =&gt; \$lib_png_path,
			&#34;lib_zlib_path=s&#34; =&gt; \$lib_zlib_path,
		       &#41;;
unless &#40;$result&#41; {
  print STDERR &lt;&lt;END;
Usage: perl Makefile.PL [options]

Configure GD module.

 Options:
     -options       &#34;JPEG,FT,XPM&#34;   feature options, separated by commas
     -lib_gd_path   path            path to libgd
     -lib_ft_path   path            path to Freetype library
     -lib_png_path  path            path to libpng
     -lib_zlib_path path            path to libpng

If no options are passed on the command line.  The program will
prompt for these values interactively.
END
}
if&#40; defined&#40;$options&#41; &#41;
{
    print &#34;\nIncluded Features:          $options\n&#34;;
}
if&#40; defined&#40;$lib_gd_path&#41; &#41;
{
    print &#34;GD library used from:       $lib_gd_path\n&#34;;   
}
if&#40; defined&#40;$lib_ft_path&#41; &#41;
{  
    print &#34;FreeType library used from: $lib_ft_path\n&#34;;
    @INC     = &#40;&#34;-I$lib_ft_path/include&#34;, @INC&#41;;
    @LIBPATH = &#40;&#34;-L$lib_ft_path/lib&#34;, @LIBPATH&#41;;               
}
if&#40; defined&#40;$lib_png_path&#41; &#41;  
{  
    print &#34;PNG library used from:      $lib_png_path\n&#34;;
    @INC     = &#40;&#34;-I$lib_png_path/include&#34;, @INC&#41;;
    @LIBPATH = &#40;&#34;-L$lib_png_path/lib&#34;, @LIBPATH&#41;; 
}
if&#40; defined&#40;$lib_zlib_path&#41; &#41; 
{
    print &#34;Zlib library used from:     $lib_zlib_path\n&#34;;
    @INC     = &#40;&#34;-I$lib_zlib_path/include&#34;, @INC&#41;;
    @LIBPATH = &#40;&#34;-L$lib_zlib_path/lib&#34;, @LIBPATH&#41;; 
}
#############################################################################################

if &#40;$^O eq &#39;VMS&#39;&#41;{
  warn &lt;&lt; &#39;END_WARN&#39;;
This is a build on OpenVMS. In case of problems with the build
do not bother Lincoln Stein but get in touch with
Martin P.J. Zinser &#40;zinser@decus.de&#41;.

END_WARN

  if &#40; ! defined $ENV{LIB_ROOT} || $ENV{LIB_ROOT} eq &#34;&#34;&#41; {
  warn &lt;&lt; &#39;END_WARN&#39;;
Define lib_root as a concealed logical pointing to the
top directory where you have your libraries installed.
E.g. define/job/trans=conc lib_root public$device:[public.util.libs.]\n&#34;;
Also define the logical pubbin to point to the location
of the object libraries
Then re-invoke Makefile.PL
Exiting now...
END_WARN
    exit;
  }

  @INC     = qw&#40;-I/lib_root/gd -I/lib_root/libpng -I/lib_root/zlib&#41;;
  @LIBPATH = qw&#40;-Lpubbin&#41;;
  @LIBS    = qw&#40;-llibgd.olb -llibpng.olb -llibz.olb&#41;;
}

###################################################################
# path to libgd, skip prompt if passed in from above
###################################################################
my $PREFIX = $lib_gd_path;
if&#40; ! defined&#40;$PREFIX&#41; &#41;
{
  warn &#34;\n&#34;;
  $PREFIX = prompt&#40;&#39;Where is libgd installed?&#39;,&#39;/usr/lib&#39;&#41;;
  # When installing with CPAN.pm, one often does not pass &#39;-lib_gd_path&#39;.
  # However it should still be possiple to have &#39;gd&#39; installed in
  # a directory path containing upper case letters.
  
  # In case that $PREFIX does not exist, let&#39;s assume a typo
  if &#40; ! -e $PREFIX &#41; { $PREFIX = lc&#40; $PREFIX &#41; } 
}

unless &#40;$PREFIX eq &#39;/usr/lib&#39;&#41; {
  $PREFIX =~ s!/lib$!!;
  unshift @INC,&#34;-I$PREFIX/include&#34;;
  unshift @LIBPATH,&#34;-L$PREFIX/lib&#34;;
}

# FEATURE FLAGS

##################################################################################################################
# If build options have not been passed in then prompt for settings
##################################################################################################################
my &#40;$JPEG, $FT, $XPM&#41; = &#40;undef, undef, undef&#41;;
if&#40; defined&#40;$options&#41; &#41;
{
    if&#40; $options =~ m/JPEG/i &#41;  {  $JPEG = 1;  }  else  {  $JPEG = 0;  }
    if&#40; $options =~ m/FT/i &#41;    {  $FT   = 1;  }  else  {  $FT   = 0;  }
    if&#40; $options =~ m/XPM/i &#41;   {  $XPM  = 1;  }  else  {  $XPM  = 0;  }
}
else
{
    warn &#34;\nPlease choose the features that match how libgd was built:\n&#34;;
    $JPEG = lc prompt&#40;&#39;Build JPEG support?&#39;,&#39;y&#39;&#41; eq &#39;y&#39;;
    $FT   = lc prompt&#40;&#39;Build FreeType support?&#39;,&#39;y&#39;&#41; eq &#39;y&#39;;
    $XPM  = $^O !~ /^freebsd|MSWin32$/ &#38;&#38; lc prompt&#40;&#39;Build XPM support?&#39;,&#39;y&#39;&#41; eq &#39;y&#39;;
}
##################################################################################################################

my $FCGI    = 0;   # set to 1 to build compatability with fastCGI

warn &#34;\nIf you experience compile problems, please check the \@INC, \@LIBPATH and \@LIBS\n&#34;,
     &#34;arrays defined in Makefile.PL and manually adjust, if necessary.\n\n&#34;;

#### no user-serviceable parts below #####

push @LIBS,&#39;-lfreetype&#39; if $FT;
push @LIBS,&#39;-ljpeg&#39; if $JPEG;
push @LIBS, &#39;-lm&#39; unless $^O eq &#39;MSWin32&#39;;
push @INC, &#39;-I/lib_root/libjpeg&#39; if &#40;$JPEG &#38;&#38; $^O eq &#39;VMS&#39;&#41;;
push @INC, &#39;-I/lib_root/ft2/include/freetype&#39; if &#40;$FT &#38;&#38; $^O eq &#39;VMS&#39;&#41;;
push @INC, &#39;-I/X11&#39; if &#40;$XPM &#38;&#38; $^O eq &#39;VMS&#39;&#41;;

# FreeBSD 3.3 with libgd built from ports croaks if -lXpm is specified 
if &#40;$^O ne &#39;freebsd&#39; &#38;&#38; $^O ne &#39;MSWin32&#39;&#41; { 
  push @LIBS,&#39;-lX11&#39;,&#39;-lXpm&#39; if $XPM; 
} 

my $CAPI = defined $ExtUtils::MakeMaker::CAPI_support ? &#39;TRUE&#39; : &#39;FALSE&#39;;
my $DEFINES = &#39;&#39;;
$DEFINES    .= &#39; -DHAVE_JPEG&#39; if $JPEG;
$DEFINES    .= &#39; -DHAVE_FT&#39;   if $FT;
$DEFINES    .= &#39; -DHAVE_XPM&#39;  if $XPM;
$DEFINES    .= &#39; -DFCGI&#39;      if $FCGI;

WriteMakefile&#40;
    &#39;NAME&#39;	=&gt; &#39;GD&#39;,
    &#39;VERSION_FROM&#39;	=&gt; &#39;GD.pm&#39;,
    &#39;PREREQ_PM&#39; =&gt; {
		    Math::Trig =&gt; 1.00,
		    },
    &#39;dist&#39;      =&gt; {&#39;COMPRESS&#39;=&gt;&#39;gzip -9f&#39;, &#39;SUFFIX&#39; =&gt; &#39;gz&#39;,
	            &#39;ZIP&#39;=&gt;&#39;/usr/bin/zip&#39;,&#39;ZIPFLAGS&#39;=&gt;&#39;-rl&#39;},
    &#39;LIBS&#39;      =&gt; [join&#40;&#39; &#39;,$ENV{&#39;GD_LIBS&#39;},@LIBPATH,@LIBS&#41;],
    &#39;INC&#39;       =&gt; join&#40;&#39; &#39;,$ENV{&#39;GD_INC&#39;},@INC&#41;, 
    &#39;AUTHOR&#39;    =&gt; &#39;Lincoln Stein &#40;lstein@cshl.org&#41;&#39;,
    &#39;ABSTRACT&#39;  =&gt; &#39;Interface to Gd Graphics Library&#39;,
    &#39;CAPI&#39;      =&gt; $CAPI,
    &#39;DEFINE&#39;	=&gt; $DEFINES,
&#41;;

sub MY::postamble {
    my $postamble = &lt;&lt;&#39;END&#39;;
html: GD.pm
	pod2html --outfile=GD.html GD.pm
END
    $postamble;
}

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;07&nbsp;13:25:01&nbsp;2005</span>
    <span class="description">LDS [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">1 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">This was actually fixed a long time ago and I&#39;m just closing this bug 
ticket now. 
 
Lincoln 
 
[guest - Wed Oct  1 11:23:39 2003]: 
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; At work, running under Linux, we have &#39;libgd&#39; installed in a 
</div>directory 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; which contain upper case letters. When installing with CPAN.pm I 
&gt; usually enter the location at the prompt. 
&gt; However in Makefile.PL the input for &#39;lib_gd_path&#39; is lowercased by 
&gt; &#39;lc&#39;. 
&gt; Under Linux this breaks compilation. 
&gt; I think that the &#39;lc&#39; is just a type, left over from lowercasing &#39;Y&#39; 
&gt; to &#39;y&#39;. 
&gt;  
&gt; As removing the &#39;lc&#39; might break existing scripts, I have added a 
&gt; check, 
&gt; and lowercase only when &#39;lib_gd_path&#39; does not exist. 
&gt;  
&gt; A patched &#39;Makefile.PL&#39; is attached. 
</div> 
 
 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;07&nbsp;13:25:02&nbsp;2005</span>
    <span class="description">LDS [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;07&nbsp;13:25:02&nbsp;2005</span>
    <span class="description">LDS [...] cpan.org -  Given to LDS</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
