<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #33506 for Data-Pageset: Patch for slide problem &#40;first shift left is skipped&#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #33506 for Data-Pageset: Patch for slide problem &#40;first shift left is skipped&#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Data-Pageset/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Data-Pageset/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Data-Pageset/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Data-Pageset/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Data-Pageset">Data-Pageset CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">33506</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Data-Pageset/Active/">Data-Pageset</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
ryan [...] innerfence.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9200-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9201-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.05    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;22&nbsp;03:20:12&nbsp;2008</span>
    <span class="description">ryan [...] innerfence.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Patch for slide problem &#40;first shift left is skipped&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Feb 2008 00:19:23 -0800</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Data-Pageset [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ryan D Johnson &lt;ryan [...] innerfence.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi. I noticed a problem with Data::Pageset in sliding mode:

ryan@rdj-laptop ~ $ re.pl
$ use Data::Pageset;
$ my $p = Data::Pageset-&gt;new&#40;{ total_entries =&gt; 500, entries_per_page =&gt; 
20, current_page =&gt; 22, pages_per_set =&gt; 5, mode =&gt; &#39;slide&#39; &#41;;
$Data_Pageset1 = Data::Pageset=HASH&#40;0x8e3a55c&#41;;
$ $p-&gt;pages_in_set;
$ARRAY1 = [
           21,
           22,
           23,
           24,
           25
         ];

In this example, page 22 should be in the middle.

I&#39;ve enclosed a patch that fixed the error &#40;a &gt;= instead of just a &gt;&#41;, 
including new test cases. I wasn&#39;t able to find a source repository, so 
it&#39;s just an interdir diff.

I hope you&#39;ll accept this patch so that the fix will be available for 
everyone on CPAN.

Thanks for the hard work and for sharing it with the community!

/rdj
</div></div>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -urN /home/ryan/.cpan/build/Data-Pageset-1.04-vxuNeK/Changes ./Changes
--- /home/ryan/.cpan/build/Data-Pageset-1.04-vxuNeK/Changes	2008-02-10 09:36:15.000000000 -0800
+++ ./Changes	2008-02-21 23:55:43.000000000 -0800
@@ -1,5 +1,8 @@
 Revision history for Perl extension Data::Pageset.
 
+1.05 Unreleased
+   - fix bug in slide where last slide position is skipped
+
 1.04 Thu Mar  9 22:55:44 GMT 2006
 	- Apply patch from <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Public/Bug/Display.html?id=27384">http://rt.cpan.org/Public/Bug/Display.html?id=27384</a></span>
 	  to fix slider bug - thanks to PLOBBES
diff -urN /home/ryan/.cpan/build/Data-Pageset-1.04-vxuNeK/lib/Data/Pageset.pm ./lib/Data/Pageset.pm
--- /home/ryan/.cpan/build/Data-Pageset-1.04-vxuNeK/lib/Data/Pageset.pm	2008-02-10 09:34:41.000000000 -0800
+++ ./lib/Data/Pageset.pm	2008-02-21 23:52:24.000000000 -0800
@@ -9,7 +9,7 @@
 
 @ISA = qw&#40;Data::Page&#41;;
 
-$VERSION = &#39;1.04&#39;;
+$VERSION = &#39;1.04_01&#39;;
 
 =head1 NAME
 
@@ -256,6 +256,7 @@
                 $self-&gt;{PAGE_SET_PAGES} = [ &#39;1&#39; .. $self-&gt;last_page&#40;&#41; ];
             } else {
 
+
        # Find the middle rounding down - we want more pages after, than before
                 my $middle = int&#40; $max_pages_per_set / 2 &#41;;
 
@@ -281,7 +282,7 @@
                         = $max_pages_per_set + $middle - $offset;
                     $self-&gt;{PAGE_SET_PAGES} = [ &#39;1&#39; .. $max_pages_per_set ];
                 } elsif &#40; $self-&gt;current_page&#40;&#41;
-                    &gt;= &#40; $self-&gt;last_page&#40;&#41; - $middle - $offset &#41; &#41;
+                    &gt; &#40; $self-&gt;last_page&#40;&#41; - $middle - $offset &#41; &#41;
                 {
 
                     # near the end of the page numbers
@@ -386,6 +387,10 @@
 Leo Lapworth &lt;lt&gt;LLAP@cuckoo.org&lt;gt&gt; - let me know if you&#39;ve used
 this module - go on... you know you want to.
 
+=head1 CONTRIBUTORS
+
+Ryan D Johnson C&lt;&lt; &lt;ryan@innerfence.com&gt; &gt;&gt;
+
 =head1 SEE ALSO
 
 L&lt;Data::Page&gt;.
diff -urN /home/ryan/.cpan/build/Data-Pageset-1.04-vxuNeK/t/main.t ./t/main.t
--- /home/ryan/.cpan/build/Data-Pageset-1.04-vxuNeK/t/main.t	2007-09-02 08:52:06.000000000 -0700
+++ ./t/main.t	2008-02-22 00:00:08.000000000 -0800
@@ -4,7 +4,7 @@
 
 use lib qw&#40; ./blib/lib ../blib/lib &#41;;
 
-use Test::More tests =&gt; 499;
+use Test::More tests =&gt; 554;
 
 # Check we can load module
 BEGIN { use_ok&#40; &#39;Data::Pageset&#39; &#41;; }
@@ -260,3 +260,14 @@
 999 10 20 10 1 100 191 200 19 20 21 190,191,192,193,194,195,196,197,198,199 30 10 16,17,18,19,20,21,22,23,24,25 slide
 1070 20 54 15 1 54 1061 1070 53 54 undef 1060,1061,1062,1063,1064,1065,1066,1067,1068,1069 undef 32 40,41,42,43,44,45,46,47,48,49,50,51,52,53,54 slide 
 209 10 5 5 1 21 41 50 4 5 6 40,41,42,43,44,45,46,47,48,49 10 1 3,4,5,6,7 slide
+
+# High pages - shift left two
+500 20 21 5 1 25 401 420 20 21 22    400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419 26    16 19,20,21,22,23 slide
+# High pages - shift left one    
+500 20 22 5 1 25 421 440 21 22 23    420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439 27    17 20,21,22,23,24 slide
+# High pages - first fixed    
+500 20 23 5 1 25 441 460 22 23 24    440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459 undef 18 21,22,23,24,25 slide
+# High pages - penultimate fixed    
+500 20 24 5 1 25 461 480 23 24 25    460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479 undef 18 21,22,23,24,25 slide
+# High pages - final page    
+500 20 25 5 1 25 481 500 24 25 undef 480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499 undef 18 21,22,23,24,25 slide        
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;22&nbsp;05:59:36&nbsp;2008</span>
    <span class="description">LLAP [...] cpan.org -  Status changed from &#39;new&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;22&nbsp;06:02:57&nbsp;2008</span>
    <span class="description">leo [...] cuckoo.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #33506] Patch for slide problem &#40;first shift left is skipped&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 22 Feb 2008 11:02:24 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Data-Pageset [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Leo Lapworth&#34; &lt;leo [...] cuckoo.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Ryan,

Thanks, your patch is going live as 1.05

Leo

On Fri, Feb 22, 2008 at 8:20 AM, Ryan D Johnson via RT
&lt;bug-Data-Pageset@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;
&gt;  Fri Feb 22 03:20:12 2008: Request 33506 was acted upon.
&gt;  Transaction: Ticket created by ryan@innerfence.com
&gt;        Queue: Data-Pageset
&gt;      Subject: Patch for slide problem &#40;first shift left is skipped&#41;
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: &#40;no value&#41;
&gt;        Owner: Nobody
&gt;   Requestors: ryan@innerfence.com
&gt;       Status: new
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=33506">http://rt.cpan.org/Ticket/Display.html?id=33506</a></span> &gt;
&gt;
&gt;
&gt;  Hi. I noticed a problem with Data::Pageset in sliding mode:
&gt;
&gt;  ryan@rdj-laptop ~ $ re.pl
&gt;  $ use Data::Pageset;
&gt;  $ my $p = Data::Pageset-&gt;new&#40;{ total_entries =&gt; 500, entries_per_page =&gt;
&gt;  20, current_page =&gt; 22, pages_per_set =&gt; 5, mode =&gt; &#39;slide&#39; &#41;;
&gt;  $Data_Pageset1 = Data::Pageset=HASH&#40;0x8e3a55c&#41;;
&gt;  $ $p-&gt;pages_in_set;
&gt;  $ARRAY1 = [
&gt;            21,
&gt;            22,
&gt;            23,
&gt;            24,
&gt;            25
&gt;          ];
&gt;
&gt;  In this example, page 22 should be in the middle.
&gt;
&gt;  I&#39;ve enclosed a patch that fixed the error &#40;a &gt;= instead of just a &gt;&#41;,
&gt;  including new test cases. I wasn&#39;t able to find a source repository, so
&gt;  it&#39;s just an interdir diff.
&gt;
&gt;  I hope you&#39;ll accept this patch so that the fix will be available for
&gt;  everyone on CPAN.
&gt;
&gt;  Thanks for the hard work and for sharing it with the community!
&gt;
&gt;  /rdj
&gt;
&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Feb&nbsp;22&nbsp;06:03:08&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;28&nbsp;15:41:57&nbsp;2008</span>
    <span class="description">LLAP [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;28&nbsp;15:41:58&nbsp;2008</span>
    <span class="description">LLAP [...] cpan.org -  Fixed in 1.05 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
