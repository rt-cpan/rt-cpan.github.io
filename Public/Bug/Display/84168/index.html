<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #84168 for SOAP-Lite: Test t/02-payload.t fails under Perl 5.17.10</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #84168 for SOAP-Lite: Test t/02-payload.t fails under Perl 5.17.10</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=SOAP-Lite">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=SOAP-Lite">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=SOAP-Lite">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=SOAP-Lite">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/SOAP-Lite">SOAP-Lite CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">84168</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=SOAP-Lite">SOAP-Lite</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
wyant [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">
gregoa [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Important    </td>
  </tr>
  <tr id="CF-29122-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-29123-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




SOAP-Lite-02-payload.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1194173/630155/SOAP-Lite-02-payload.patch">
Sat Mar 23 15:45:55 2013 (375b) by wyant [...] cpan.org
</a>
</font></li>
</ul>


SOAP-Lite-t-02-payload.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1238467/654719/SOAP-Lite-t-02-payload.patch">
Sun Jul 21 13:36:37 2013 (291b) by wyant [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1220747/644714/SOAP-Lite-t-02-payload.patch">
Wed Jun 05 16:25:19 2013 (291b) by wyant [...] cpan.org
</a>
</font></li>
</ul>


SOAP-Lite-t-04-attach.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1220747/644715/SOAP-Lite-t-04-attach.patch">
Wed Jun 05 16:25:19 2013 (259b) by wyant [...] cpan.org
</a>
</font></li>
</ul>


SOAP-Lite.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1238467/654720/SOAP-Lite.patch">
Sun Jul 21 13:36:37 2013 (1k) by wyant [...] cpan.org
</a>
</font></li>


<li><font size="-2">
<a href="/Ticket/Attachment/1220747/644716/SOAP-Lite.patch">
Wed Jun 05 16:25:19 2013 (788b) by wyant [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=84168">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1194173" href="/Public/Bug/Display.html?id=84168#txn-1194173">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;23&nbsp;15:45:55&nbsp;2013</span>
    <span class="description">wyant [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test t/02-payload.t fails under Perl 5.17.10</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1194173/630154/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/630154">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 944b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The failure is in test 37, map type serialization/deserialization. There is not, I think, anything wrong with SOAP::Lite itself; the problem appears to be that the test assumes that if two hashes contain the same data, iteration over them will produce the keys in the same order. This assumption fails under 5.17.10, due to a change made for security reasons &#40;see perldelta for that release&#41;.

It is possible to make the test pass by changing &#39;keys&#39; to &#39;sort keys&#39; in methods tag&#40;&#41; and map&#40;&#41; in SOAP::Serializer, but I am not sure this is the right solution -- and if it is, there are surely more changes that need to be made.

A better change would probably be to compare the DOMs rather than their serialized representation, but this seems to involve &#40;at least&#41; converting to Test::More.

I have attached a patch which is really more in the nature of a Band-Aid, which marks the failing test as TODO if the Perl version is 5.017010 or higher.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SOAP-Lite-02-payload.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1194173/630155/SOAP-Lite-02-payload.patch">Download SOAP-Lite-02-payload.patch</a><br />
<span class="downloadcontenttype">text/x-diff 375b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- t/02-payload.old	2012-06-25 16:13:34.000000000 -0400
+++ t/02-payload.t	2013-03-23 15:20:19.000000000 -0400
@@ -10,7 +10,12 @@
 use strict;
 use Test;
 
-BEGIN { plan tests =&gt; 131 }
+BEGIN {
+    my @todo;
+    $] &gt;= 5.017010
+	and push @todo, 37;
+    plan tests =&gt; 131, todo =&gt; \@todo;
+}
 
 use SOAP::Lite;
 $SIG{__WARN__} = sub { ; }; # turn off deprecation warnings
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1210580" href="/Public/Bug/Display.html?id=84168#txn-1210580">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;11&nbsp;00:36:25&nbsp;2013</span>
    <span class="description">PHRED [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1210580/639249/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/639249">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 40b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Resolved in 0.716. Thanks for the patch!
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1210581" href="/Public/Bug/Display.html?id=84168#txn-1210581">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;11&nbsp;00:36:25&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1210584" href="/Public/Bug/Display.html?id=84168#txn-1210584">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;11&nbsp;00:36:25&nbsp;2013</span>
    <span class="description">PHRED [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1220626" href="/Public/Bug/Display.html?id=84168#txn-1220626">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;05&nbsp;13:23:49&nbsp;2013</span>
    <span class="description">gregoa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1220626/644638/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/644638">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 254b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">The test still fails with 5.18:

# Failed test 39 in t/02-payload.t at line 260
#  t/02-payload.t line 260 is:     ok&#40;$implicit eq $serialized&#41;;
t/02-payload.t ............................... 
Failed 1/133 subtests 
        &#40;1 TODO test unexpectedly succeeded&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1220629" href="/Public/Bug/Display.html?id=84168#txn-1220629">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;05&nbsp;13:23:50&nbsp;2013</span>
    <span class="description">gregoa [...] cpan.org -  Status changed from &#39;resolved&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1220747" href="/Public/Bug/Display.html?id=84168#txn-1220747">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;05&nbsp;16:25:19&nbsp;2013</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1220747/644713/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/644713">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jun 05 13:23:49 2013, GREGOA wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The test still fails with 5.18:
&gt; 
&gt; # Failed test 39 in t/02-payload.t at line 260
&gt; #  t/02-payload.t line 260 is:     ok&#40;$implicit eq $serialized&#41;;
&gt; t/02-payload.t ............................... 
&gt; Failed 1/133 subtests 
&gt;       &#40;1 TODO test unexpectedly succeeded&#41;
</div>
Yeah. The original patch was a band-aid. I&#39;m not sure the script doesn&#39;t slip extra tests in somewhere, since the &#39;todo&#39; passes.

It seems ridiculous to modify SOAP::Lite just to pass these tests, since the order of attributes is not significant, but the alternative is to completely rework the tests.

I have attached the three patch files I currently use:

SOAP-Lite.patch changes &#39;keys&#39; to &#39;sort keys&#39; in the two places it appears to be needed to make the XML generated for the test deterministic.

SOAP-Lite-t-02-payload.patch retracts &#40;more or less&#41; my original patch.

SOAP-Lite-t-04-attach.patch is the one I&#39;m least certain of. On my system at least I get more tests than are planned, and the patch fixes this. I looked at the first 5 results in CPAN-Testers. In two this test failed because it ran more tests than planned. In the other three this test was skipped because MIME::Parser was not installed. So I _think_ this is a good patch.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SOAP-Lite-t-02-payload.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1220747/644714/SOAP-Lite-t-02-payload.patch">Download SOAP-Lite-t-02-payload.patch</a><br />
<span class="downloadcontenttype">text/x-diff 291b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- t/02-payload.old	2013-05-11 00:34:36.000000000 -0400
+++ t/02-payload.t	2013-05-21 13:57:05.000000000 -0400
@@ -12,8 +12,8 @@
 
 BEGIN {
     my @todo;
-    $] &gt;= 5.017010
-    and push @todo, 37;
+#   $] &gt;= 5.017010
+#   and push @todo, 37;
     plan tests =&gt; 133, todo =&gt; \@todo;
 }
 
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SOAP-Lite-t-04-attach.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1220747/644715/SOAP-Lite-t-04-attach.patch">Download SOAP-Lite-t-04-attach.patch</a><br />
<span class="downloadcontenttype">text/x-diff 259b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- t/04-attach.old	2013-05-11 00:44:37.000000000 -0400
+++ t/04-attach.t	2013-05-17 14:24:05.000000000 -0400
@@ -20,7 +20,7 @@
     }
 }
 
-BEGIN { plan tests =&gt; 15 }
+BEGIN { plan tests =&gt; 18 }
 
 my &#40; $a, $soap, $d, $s, $r, $serialized, $deserialized &#41;;
 
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SOAP-Lite.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1220747/644716/SOAP-Lite.patch">Download SOAP-Lite.patch</a><br />
<span class="downloadcontenttype">text/x-diff 788b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/SOAP/Lite.old	2013-05-11 00:58:27.000000000 -0400
+++ lib/SOAP/Lite.pm	2013-05-21 14:07:40.000000000 -0400
@@ -1365,7 +1365,7 @@
             &#41;,
             &#39;item&#39;,
             &#39;&#39;
-        &#41;} keys %$value;
+        &#41;} sort keys %$value;
     return [
         $name,
         {&#39;xsi:type&#39; =&gt; &#34;$prefix:Map&#34;, %$attr},
@@ -1484,7 +1484,7 @@
     my $tagattrs = join&#40;$tagjoiner, &#39;&#39;,
         map { sprintf &#39;%s=&#34;%s&#34;&#39;, $_, SOAP::Utils::encode_attribute&#40;$attrs-&gt;{$_}&#41; }
             grep { $_ &#38;&#38; defined $attrs-&gt;{$_} &#38;&#38; &#40;$_ ne &#39;xsi:type&#39; || $attrs-&gt;{$_} ne &#39;&#39;&#41; }
-                keys %$attrs&#41;;
+                sort keys %$attrs&#41;;
 
     if &#40;$value gt &#39;&#39;&#41; {
         return sprintf&#40;&#34;$prolog$indent&lt;%s%s&gt;%s%s&lt;/%s&gt;$epilog&#34;,$tag,$tagattrs,$value,&#40;$value =~ /^\s*&lt;/ ? $indent : &#34;&#34;&#41;,$tag&#41;;
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people AddWatcher even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1224655" href="/Public/Bug/Display.html?id=84168#txn-1224655">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jun&nbsp;16&nbsp;11:03:01&nbsp;2013</span>
    <span class="description">gregoa [...] cpan.org -  Cc GREGOA added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1238467" href="/Public/Bug/Display.html?id=84168#txn-1238467">#</a>      
    </span>
    <span class="date">Sun&nbsp;Jul&nbsp;21&nbsp;13:36:37&nbsp;2013</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1238467/654718/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/654718">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 271b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Still an issue with SOAP::Lite 1.0 under Perl 5.18. The patches have changed, though. Here&#39;s what is needed under SOAP::Lite 1.0.

While I was patching lib/SOAP/Lite.pm, I went ahead and did a one-liner that suppresses the suppresses the subroutine redefinition warnings.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SOAP-Lite-t-02-payload.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1238467/654719/SOAP-Lite-t-02-payload.patch">Download SOAP-Lite-t-02-payload.patch</a><br />
<span class="downloadcontenttype">text/x-diff 291b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- t/02-payload.old	2013-05-11 00:34:36.000000000 -0400
+++ t/02-payload.t	2013-07-21 13:16:37.000000000 -0400
@@ -12,8 +12,8 @@
 
 BEGIN {
     my @todo;
-    $] &gt;= 5.017010
-    and push @todo, 37;
+#   $] &gt;= 5.017010
+#   and push @todo, 37;
     plan tests =&gt; 133, todo =&gt; \@todo;
 }
 
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> SOAP-Lite.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1238467/654720/SOAP-Lite.patch">Download SOAP-Lite.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">--- lib/SOAP/Lite.old	2013-07-17 02:11:14.000000000 -0400
+++ lib/SOAP/Lite.pm	2013-07-21 13:27:05.000000000 -0400
@@ -1363,7 +1363,7 @@
             &#41;,
             &#39;item&#39;,
             &#39;&#39;
-        &#41;} keys %$value;
+        &#41;} sort keys %$value;
     return [
         $name,
         {&#39;xsi:type&#39; =&gt; &#34;$prefix:Map&#34;, %$attr},
@@ -1482,7 +1482,7 @@
     my $tagattrs = join&#40;$tagjoiner, &#39;&#39;,
         map { sprintf &#39;%s=&#34;%s&#34;&#39;, $_, SOAP::Utils::encode_attribute&#40;$attrs-&gt;{$_}&#41; }
             grep { $_ &#38;&#38; defined $attrs-&gt;{$_} &#38;&#38; &#40;$_ ne &#39;xsi:type&#39; || $attrs-&gt;{$_} ne &#39;&#39;&#41; }
-                keys %$attrs&#41;;
+                sort keys %$attrs&#41;;
 
     if &#40;$value gt &#39;&#39;&#41; {
         return sprintf&#40;&#34;$prolog$indent&lt;%s%s&gt;%s%s&lt;/%s&gt;$epilog&#34;,$tag,$tagattrs,$value,&#40;$value =~ /^\s*&lt;/ ? $indent : &#34;&#34;&#41;,$tag&#41;;
@@ -2978,7 +2978,7 @@
             $minus ? push&#40;@notrace, $all ? @list : $_&#41; : push&#40;@symbols, $all ? @list : $_&#41;;
         }
     }
-    # TODO - I am getting a warning here about redefining a subroutine
+    no warnings qw{ redefine };
     foreach &#40;@symbols&#41; { *$_ = \&#38;defaultlog }
     foreach &#40;@notrace&#41; { *$_ = sub {} }
 }
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1239109" href="/Public/Bug/Display.html?id=84168#txn-1239109">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;22&nbsp;23:07:26&nbsp;2013</span>
    <span class="description">fred [...] redhotpenguin.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84168] Test t/02-payload.t fails under Perl 5.17.10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 22 Jul 2013 20:07:13 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SOAP-Lite [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fred Moyer &lt;fred [...] redhotpenguin.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1239109/655090/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/655090">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 714b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">So no todo with perl &gt; 5.17?

--- a/t/02-payload.t
+++ b/t/02-payload.t
@@ -12,8 +12,8 @@ use Test;

 BEGIN {
     my @todo;
-    $] &gt;= 5.017010
-    and push @todo, 37;
+#   $] &gt;= 5.017010
+#   and push @todo, 37;
     plan tests =&gt; 133, todo =&gt; \@todo;

On Sun, Jul 21, 2013 at 10:36 AM, Tom Wyant via RT
&lt;bug-SOAP-Lite@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: SOAP-Lite
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84168">https://rt.cpan.org/Ticket/Display.html?id=84168</a></span> &gt;
&gt;
&gt; Still an issue with SOAP::Lite 1.0 under Perl 5.18. The patches have changed, though. Here&#39;s what is needed under SOAP::Lite 1.0.
&gt;
&gt; While I was patching lib/SOAP/Lite.pm, I went ahead and did a one-liner that suppresses the suppresses the subroutine redefinition warnings.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1239458" href="/Public/Bug/Display.html?id=84168#txn-1239458">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;23&nbsp;12:49:26&nbsp;2013</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1239458/655273/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/655273">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 307b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Jul 22 23:07:26 2013, fred@redhotpenguin.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; So no todo with perl &gt; 5.17?
&gt; 
</div>
Yes, no TODO. That was a band-aid, and it appears that it makes the wrong test TODO anyway. Sorry about that. The patch just patches it out, but feel free to revert the change that installed it in the first place.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1239461" href="/Public/Bug/Display.html?id=84168#txn-1239461">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;23&nbsp;12:51:04&nbsp;2013</span>
    <span class="description">fred [...] redhotpenguin.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84168] Test t/02-payload.t fails under Perl 5.17.10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Jul 2013 09:50:51 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SOAP-Lite [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fred Moyer &lt;fred [...] redhotpenguin.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1239461/655276/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/655276">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 584b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok if I remove the Todo entirely then? Sorry if I&#39;m being dense, just
want to make sure.

On Tue, Jul 23, 2013 at 9:49 AM, Tom Wyant via RT
&lt;bug-SOAP-Lite@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: SOAP-Lite
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84168">https://rt.cpan.org/Ticket/Display.html?id=84168</a></span> &gt;
&gt;
&gt; On Mon Jul 22 23:07:26 2013, fred@redhotpenguin.com wrote:
<div class="message-stanza open">&gt;&gt; So no todo with perl &gt; 5.17?
&gt;&gt;
</div>&gt;
&gt; Yes, no TODO. That was a band-aid, and it appears that it makes the wrong test TODO anyway. Sorry about that. The patch just patches it out, but feel free to revert the change that installed it in the first place.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1239482" href="/Public/Bug/Display.html?id=84168#txn-1239482">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;23&nbsp;13:05:20&nbsp;2013</span>
    <span class="description">wyant [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1239482/655289/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/655289">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 538b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Jul 23 12:51:04 2013, fred@redhotpenguin.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Ok if I remove the Todo entirely then? Sorry if I&#39;m being dense, just
&gt; want to make sure.
&gt; 
</div>
Yes, it&#39;s OK with me if you remove the TODO entirely, given the two &#39;sort keys&#39; inserted in SOAP::Lite by a subsequent patch. Maybe a purist would have worked out a way to have the test pass without changing SOAP::Lite, but I was not that smart.

Don&#39;t worry about the request for confirmation. The greatest danger of communication is the illusion that it has occurred.

Thanks,
Tom
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1239485" href="/Public/Bug/Display.html?id=84168#txn-1239485">#</a>      
    </span>
    <span class="date">Tue&nbsp;Jul&nbsp;23&nbsp;13:08:16&nbsp;2013</span>
    <span class="description">fred [...] redhotpenguin.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #84168] Test t/02-payload.t fails under Perl 5.17.10</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Jul 2013 10:07:59 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-SOAP-Lite [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Fred Moyer &lt;fred [...] redhotpenguin.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1239485/655292/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/655292">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 773b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ok sounds good. 1.01 coming tonight.

On Tue, Jul 23, 2013 at 10:05 AM, Tom Wyant via RT
&lt;bug-SOAP-Lite@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;        Queue: SOAP-Lite
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=84168">https://rt.cpan.org/Ticket/Display.html?id=84168</a></span> &gt;
&gt;
&gt; On Tue Jul 23 12:51:04 2013, fred@redhotpenguin.com wrote:
<div class="message-stanza open">&gt;&gt; Ok if I remove the Todo entirely then? Sorry if I&#39;m being dense, just
&gt;&gt; want to make sure.
&gt;&gt;
</div>&gt;
&gt; Yes, it&#39;s OK with me if you remove the TODO entirely, given the two &#39;sort keys&#39; inserted in SOAP::Lite by a subsequent patch. Maybe a purist would have worked out a way to have the test pass without changing SOAP::Lite, but I was not that smart.
&gt;
&gt; Don&#39;t worry about the request for confirmation. The greatest danger of communication is the illusion that it has occurred.
&gt;
&gt; Thanks,
&gt; Tom
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1242302" href="/Public/Bug/Display.html?id=84168#txn-1242302">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;29&nbsp;04:19:53&nbsp;2013</span>
    <span class="description">PHRED [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1242302/656936/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/656936">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 16b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">resolved in 1.01
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1242305" href="/Public/Bug/Display.html?id=84168#txn-1242305">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;29&nbsp;04:19:54&nbsp;2013</span>
    <span class="description">PHRED [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.887471</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
