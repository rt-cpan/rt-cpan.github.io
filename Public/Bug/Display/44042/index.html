<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #44042 for Net-FTPSSL: Net-FTPSSL enhancements</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #44042 for Net-FTPSSL: Net-FTPSSL enhancements</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-FTPSSL">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-FTPSSL">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-FTPSSL">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-FTPSSL">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-FTPSSL">Net-FTPSSL CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">44042</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-FTPSSL">Net-FTPSSL</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
tj [...] castaglia.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-22628-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-22629-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.08    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=44042">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576423" href="/Public/Bug/Display.html?id=44042#txn-576423">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;11&nbsp;14:04:46&nbsp;2009</span>
    <span class="description">tj [...] castaglia.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net-FTPSSL enhancements</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 11 Mar 2009 10:58:11 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-FTPSSL [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> TJ Saunders &lt;tj [...] castaglia.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/576423/291204/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291204">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
Hello, sir.  I&#39;m currently using the Net-FTPSSL package for running some 
FTPS tests in the proftpd test case.

To help exercise many of the code paths in proftpd&#39;s mod_tls, I needed a 
way to specify many of the IO::Socket::SSL options, e.g. I needed to 
configure a Net::FTPSSL object to use a client cert, to reuse SSL 
sessions, etc.

To do this, using the Net-FTPSSL-0.07 version, I had to make the following 
change in the new&#40;&#41; subroutine in FTPSSL.pm:

  my $obj = $type-&gt;start_SSL&#40; $socket, SSL_version =&gt; $mode &#41;
               or return _croak_or_return&#40; $socket, undef,
                                      &#34;$mode: &#34; . IO::Socket::SSL::errstr &#40;&#41; &#41;;

To be:

  unless &#40; defined&#40;$arg{SSL_version}&#41; &#41; {
      $arg{SSL_version} = $use_ssl ? &#39;SSLv23&#39; : &#39;TLSv1&#39;;
  }

  my $obj = $type-&gt;start_SSL&#40; $socket, %arg &#41;
               or return _croak_or_return&#40; $socket, undef,
                                      IO::Socket::SSL::errstr &#40;&#41; &#41;;

Note that this change also makes the &#39;useSSL&#39; constructor option 
unnecessary; the caller can simply set &#39;SSL_version&#39; IO::Socket::SSL 
option in arg.  But that&#39;s a minor thing.

With this change, I can now do:

  my $client = Net::FTPSSL-&gt;new&#40;$server,
    Port =&gt; $port,
    Encryption =&gt; &#39;E&#39;,

    # IO::Socket::SSL options
    SSL_version =&gt; &#39;TLSv1&#39;,
    SSL_use_cert =&gt; 1,
    SSL_cert_file =&gt; $client_cert,
    SSL_key_file =&gt; $client_key,
    SSL_verify_mode =&gt; 0x01,
    SSL_reuse_ctx =&gt; $prev_client,
  &#41;;

Also, in the Makefile.PL, the author is still listed as Marcos Dalla 
Stella.

Cheers,
TJ

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

   Only those who will risk going too far can possibly find out how
   far one can go.
   
        -T.S. Eliot
   
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576487" href="/Public/Bug/Display.html?id=44042#txn-576487">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;11&nbsp;18:39:38&nbsp;2009</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/576487/291241/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291241">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi TJ,

Sounds like you are planning to get real ambitious with this module.  
I&#39;ll have to think a bit on how I&#39;d want to implement such a feature 
in the base code to avoid support nightmare. :-&#41;

I&#39;m planning to release v0.08 shortly to fix a few minor issues with 
v0.07, the other 2 tickets, and some misc enhancements.  I&#39;ll see if I 
have time to include this as well.  But no promises at this point 
since it looks like you&#39;ve implemented your own work around.

My 1st thought is to add a new &#34;SSL_Advanced =&gt; \%ssl_opts&#34; which will 
cause all your requested options to be added to the start_SSL&#40;&#41; call 
and say use at your own risk.  Totally unsupported.  See 
IO::Socket::SSL for available tags. And if the other options for 
FTPSSL conflict with what you provided, this hash will override them.  
Any options added by FTPSSL to your list will cause your hash 
reference to be updated so that you can dump your hash to assist in 
debuging things yoursef.  &#40; I have yet to figure out how to force 
IO:Socket::SSL to turn on it&#39;s debugging levels to allow a trace. 
Setting $IO::Socket::SSL::DEBUG = 2; doesn&#39;t seem to work. &#41;

Does this sound like it would meet your needs?  Or do you have other 
suggestions?  I&#39;m trying to keep the usage of this class as simple as 
possible while making it usefull to people like yourself as well.
 I don&#39;t see FTPSSL supporting every conceivable SSL option without 
the user customizing things a bit for themselves.  But I see no harm 
in providing hooks.

Curtis
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576488" href="/Public/Bug/Display.html?id=44042#txn-576488">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;11&nbsp;18:39:39&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576505" href="/Public/Bug/Display.html?id=44042#txn-576505">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;11&nbsp;18:52:57&nbsp;2009</span>
    <span class="description">tj [...] castaglia.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #44042] Net-FTPSSL enhancements </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 11 Mar 2009 15:46:54 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Curtis Leach via RT &lt;bug-Net-FTPSSL [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> TJ Saunders &lt;tj [...] castaglia.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/576505/291250/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291250">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; My 1st thought is to add a new &#34;SSL_Advanced =&gt; \%ssl_opts&#34; which will 
&gt; cause all your requested options to be added to the start_SSL&#40;&#41; call 
&gt; and say use at your own risk.  Totally unsupported.  See 
&gt; IO::Socket::SSL for available tags. And if the other options for 
&gt; FTPSSL conflict with what you provided, this hash will override them.  
&gt; Any options added by FTPSSL to your list will cause your hash 
&gt; reference to be updated so that you can dump your hash to assist in 
&gt; debuging things yoursef.
</div>
That would work well for me; I simply need a way to set some of the more 
esoteric IO::Socket::SSL options in the start_SSL&#40;&#41; call.  By the time the 
Net::FTPSSL constructor has returned the blessed object, it&#39;s too late to 
change those parameters.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &#40; I have yet to figure out how to force IO:Socket::SSL to turn on it&#39;s
&gt; debugging levels to allow a trace.  Setting $IO::Socket::SSL::DEBUG =
&gt; 2; doesn&#39;t seem to work. &#41;
</div>
Looks like $IO::Socket::SSL::DEBUG is only honored when IO::Socket::SSL is 
imported &#40;via use or require&#41;; IO::Socket::SSL aliases this to 
$Net::SSLeay::trace &#40;same numeric values 0-4&#41;, so maybe having Net::FTPSSL 
change/set $Net::SSLeay::trace directly when Trace is enabled would work?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Does this sound like it would meet your needs?  Or do you have other 
&gt; suggestions?
</div>
Just this one for now, as it gets me most of what I need; I may encounter
others as I implement more and more unit tests for proftpd&#39;s mod_tls
module.

Cheers,
TJ

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

   Music, the greatest good that mortals know,
    And all of heaven we have below.
   
        -Joseph Addison
   
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576507" href="/Public/Bug/Display.html?id=44042#txn-576507">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;11&nbsp;19:18:29&nbsp;2009</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/576507/291252/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291252">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 973b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">OK,

We have a plan simple enough that I probably can get it into v0.08 
when it comes out.  &#40;Hopefully sometime this month.&#41;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &#40; I have yet to figure out how to force IO:Socket::SSL to turn on
</div>&gt; it&#39;s
<div class="message-stanza open">&gt; &gt; debugging levels to allow a trace.  Setting $IO::Socket::SSL::DEBUG
</div>&gt; =
<div class="message-stanza open">&gt; &gt; 2; doesn&#39;t seem to work. &#41;
</div>&gt; 
&gt; Looks like $IO::Socket::SSL::DEBUG is only honored when
&gt; IO::Socket::SSL is
&gt; imported &#40;via use or require&#41;; IO::Socket::SSL aliases this to
&gt; $Net::SSLeay::trace &#40;same numeric values 0-4&#41;, so maybe having
&gt; Net::FTPSSL
&gt; change/set $Net::SSLeay::trace directly when Trace is enabled would
&gt; work?
&gt; 
</div>
Drat, I had already tried the $Net::SSLeay::trace route as well.  It 
hadn&#39;t seemed worked either.  I would have loved adding the tracing of 
start_SSL&#40;&#41; when Debug was used but I have no time to figure out how 
to do it.

If you do figure it out during your tests, please let me know.  It 
would be very usefull to have in tracking down future problems.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576566" href="/Public/Bug/Display.html?id=44042#txn-576566">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;11&nbsp;23:16:13&nbsp;2009</span>
    <span class="description">tj [...] castaglia.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #44042] Net-FTPSSL enhancements </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 11 Mar 2009 20:10:15 -0800 &#40;PST&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Curtis Leach via RT &lt;bug-Net-FTPSSL [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> TJ Saunders &lt;tj [...] castaglia.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/576566/291281/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291281">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Drat, I had already tried the $Net::SSLeay::trace route as well.  It 
&gt; hadn&#39;t seemed worked either.  I would have loved adding the tracing of 
&gt; start_SSL&#40;&#41; when Debug was used but I have no time to figure out how 
&gt; to do it.
&gt; 
&gt; If you do figure it out during your tests, please let me know.  It 
&gt; would be very usefull to have in tracking down future problems.
</div>
From what I&#39;ve seen so far, it looks like Net::SSLeay isn&#39;t really 
instrumented to use $Net::SSLeay::trace all that much.  It is honored in 
many of the utility subroutines &#40;sslcat et al&#41; provided by Net::SSLeay; 
but Net::FTPSSL doesn&#39;t use those subroutines.

For that level of SSL tracing using OpenSSL, I&#39;ve had to use the OpenSSL 
SSL_CTX_set_info_callback&#40;3&#41; and SSL_CTX_set_msg_callback&#40;3&#41; API directly, 
and Net::SSLeay does not use these callbacks.

I can say that setting $Net::SSLeay::trace directly in my calling code 
DOES have some effect, just not as much as might be desired for debugging 
the SSL handshake.  For example, before calling one of the FTP data 
transfer methods, setting $Net::SSLeay::trace to 3 or higher does show the 
actual unencrypted data that was transferred, even if the data transfer 
was protected.

Cheers,
TJ

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

   Nothing ever becomes real till it is experienced -- even a proverb
   is no proverb to you till your life has illustrated it.
   
        -John Keats
   
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-581847" href="/Public/Bug/Display.html?id=44042#txn-581847">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;18:06:34&nbsp;2009</span>
    <span class="description">CLEACH [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/581847/293991/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/293991">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 203b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Enjoy, I’ve implemented the requested &#34;SSL_Advanced =&gt; \%ssl_opts&#34; 
feature, but I ran out of time trying to make the IO::Socket::SSL 
trace work.  Please remember you are on your own with this option.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-581850" href="/Public/Bug/Display.html?id=44042#txn-581850">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;18:07:22&nbsp;2009</span>
    <span class="description">CLEACH [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-581852" href="/Public/Bug/Display.html?id=44042#txn-581852">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;18:07:22&nbsp;2009</span>
    <span class="description">CLEACH [...] cpan.org -  Fixed in 0.08 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-581853" href="/Public/Bug/Display.html?id=44042#txn-581853">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;23&nbsp;18:07:22&nbsp;2009</span>
    <span class="description">CLEACH [...] cpan.org -  Severity Wishlist added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.501171</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
