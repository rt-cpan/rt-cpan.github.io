<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #106145 for File-Tail: </title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #106145 for File-Tail: </h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=File-Tail">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=File-Tail">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=File-Tail">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=File-Tail">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/File-Tail">File-Tail CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">106145</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=File-Tail">File-Tail</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
nonsolosoft [...] diff.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-13188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.2    </td>
  </tr>
  <tr id="CF-13189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.3    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




new_FileTail.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1521390/811467/new_FileTail.t">
Wed Jul 29 12:25:44 2015 (1.4k) by nonsolosoft [...] diff.org
</a>
</font></li>
</ul>


rt106145.t<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1522031/811828/rt106145.t">
Sat Aug 01 04:47:10 2015 (982b) by SREZIC [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=106145">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521355" href="/Public/Bug/Display.html?id=106145#txn-1521355">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;10:01:22&nbsp;2015</span>
    <span class="description">nonsolosoft [...] diff.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521355/811441/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811441">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">perl test_FileTail.pl
1..3
ok 1 - use File::Tail;
ok 2 - file to test is readable by this user
not ok 3 - Timeout File::Tail-&gt;new has not return object
#   Failed test &#39;Timeout File::Tail-&gt;new has not return object&#39;
#   at test_FileTail.pl line 25.
# Looks like you failed 1 test of 3.

--------
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; uname -a
</div>FreeBSD myhost 9.3-RELEASE FreeBSD 9.3 - Sun Jul 26 11:40:02 UTC 2015 amd64
--------

#!/usr/bin/env perl                                                                                                                                   

use strict;
use warnings;
use Test::More tests=&gt;3;

BEGIN {
 use_ok&#40; &#39;File::Tail&#39; &#41;;
};

my $filename = $ENV{FILE_TAIL_TO_TEST} || &#39;/var/log/auth.log&#39;;

ok&#40;-r $filename, &#39;file to test is readable by this user&#39;&#41;;

eval {
    local $SIG{ALRM} = sub { die &#34;alarm\n&#34; }; # NB: \n required                                                                                       
    alarm&#40;1&#41;;
    my $fp = File::Tail-&gt;new&#40;name=&gt;&#39;/var/log/auth.log&#39;, tail=&gt;5&#41;;
    isa_ok&#40;$fp,&#39;File::Tail&#39;&#41;;
    alarm 0;
};
if &#40;$@&#41; {
    alarm 0;
    die unless $@ eq &#34;alarm\n&#34;;   # propagate unexpected errors                                                                                       
        # timed out                                                                                                                                   
    fail&#40;&#39;Timeout File::Tail-&gt;new has not return object&#39;&#41;;
}

exit 0;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521358" href="/Public/Bug/Display.html?id=106145#txn-1521358">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;10:28:07&nbsp;2015</span>
    <span class="description">nonsolosoft [...] diff.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> nonsolosoft [...] diff.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521358/811444/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811444">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">cpan File::Tail
[...]
File::Tail will be installed without debugging information.
This information isn&#39;t usefull unless you intend to tinker 
with the code. To install with debugging enabled, use:
perl Makefile.PL LOGIT
Checking if your kit is complete...
Looks good
Writing Makefile for File::Tail
Writing MYMETA.yml and MYMETA.json
cp Tail.pm blib/lib/File/Tail.pm
Manifying blib/man3/File::Tail.3
  MGRABNAR/File-Tail-1.2.tar.gz
  /usr/bin/make -- OK
&#39;YAML&#39; not installed, will not store persistent state
Running make test
PERL_DL_NONLAZY=1 /usr/local/bin/perl5.16.3 &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34; &#34;test_harness&#40;0, &#39;blib/lib&#39;, &#39;blib/arch&#39;&#41;&#34; t/*.t
t/10open.t ......... ok   
t/20tail.t ......... ok   
t/30name_change.t .. ok   
All tests successful.
Files=3, Tests=15, 66 wallclock secs &#40; 0.02 usr  0.02 sys +  0.11 cusr  0.03 csys =  0.18 CPU&#41;
Result: PASS
  MGRABNAR/File-Tail-1.2.tar.gz
  /usr/bin/make test -- OK
Running make install
Manifying blib/man3/File::Tail.3
Installing /usr/local/lib/perl5/site_perl/5.16/File/Tail.pm
FreeBSD: Registering installation in the package database
Cannot create directory /var/db/pkg/bsdpan-File-Tail-1.2: File exists
Appending installation info to /usr/local/lib/perl5/5.16/mach/perllocal.pod
  MGRABNAR/File-Tail-1.2.tar.gz
  /usr/bin/make install  -- OK

perl ~ferz/test_FileTail.pl
1..3
ok 1 - use File::Tail;
ok 2 - file to test is readable by this user
not ok 3 - Timeout File::Tail-&gt;new has not return object
#   Failed test &#39;Timeout File::Tail-&gt;new has not return object&#39;
#   at /home/ferz/test_FileTail.pl line 27.
File::Tail version: 1.2
# Looks like you failed 1 test of 3.

cd /tmp/File-Tail-1.0
perl Makefile.PL

File::Tail will be installed without debugging information.
This information isn&#39;t usefull unless you intend to tinker 
with the code. To install with debugging enabled, use:
perl Makefile.PL LOGIT
Checking if your kit is complete...
Looks good
Writing Makefile for File::Tail
Writing MYMETA.yml and MYMETA.json
u1# make install clean
cp Tail.pm blib/lib/File/Tail.pm
Manifying blib/man3/File::Tail.3
Installing /usr/local/lib/perl5/site_perl/5.16/File/Tail.pm
FreeBSD: Registering installation in the package database
Cannot create directory /var/db/pkg/bsdpan-File-Tail-1.0: File exists
Appending installation info to /usr/local/lib/perl5/5.16/mach/perllocal.pod
rm -f  *.a core  core.[0-9] blib/arch/auto/File/Tail/extralibs.all  core.[0-9][0-9] Tail.bso  pm_to_blib.ts MYMETA.json  core.[0-9][0-9][0-9][0-9] MYMETA.yml  Tail.x   perl tmon.out  *.o pm_to_blib  blib/arch/auto/File/Tail/extralibs.ld blibdirs.ts  core.[0-9][0-9][0-9][0-9][0-9] *perl.core  core.*perl.*.? Makefile.aperl  Tail.def perl  core.[0-9][0-9][0-9] mon.out  libTail.def perlmain.c  perl.exe so_locations  Tail.exp
rm -rf  blib
mv Makefile Makefile.old &gt; /dev/null 2&gt;&#38;1

perl ~ferz/test_FileTail.pl
1..3
ok 1 - use File::Tail;
ok 2 - file to test is readable by this user
ok 3 - The object isa File::Tail
File::Tail version: 1.0
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521360" href="/Public/Bug/Display.html?id=106145#txn-1521360">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;10:28:59&nbsp;2015</span>
    <span class="description">nonsolosoft [...] diff.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> File::Tail is broken on FreeBSD</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> nonsolosoft [...] diff.org</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521360/811446/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811446">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Jul 29 10:01:22 2015, nonsolosoft@diff.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl test_FileTail.pl
&gt; 1..3
&gt; ok 1 - use File::Tail;
&gt; ok 2 - file to test is readable by this user
&gt; not ok 3 - Timeout File::Tail-&gt;new has not return object
&gt; #   Failed test &#39;Timeout File::Tail-&gt;new has not return object&#39;
&gt; #   at test_FileTail.pl line 25.
&gt; # Looks like you failed 1 test of 3.
&gt; 
&gt; --------
<div class="message-stanza open">&gt; &gt; uname -a
</div>&gt; FreeBSD myhost 9.3-RELEASE FreeBSD 9.3 - Sun Jul 26 11:40:02 UTC 2015
&gt; amd64
&gt; --------
&gt; 
&gt; #!/usr/bin/env perl
&gt; 
&gt; use strict;
&gt; use warnings;
&gt; use Test::More tests=&gt;3;
&gt; 
&gt; BEGIN {
&gt;  use_ok&#40; &#39;File::Tail&#39; &#41;;
&gt; };
&gt; 
&gt; my $filename = $ENV{FILE_TAIL_TO_TEST} || &#39;/var/log/auth.log&#39;;
&gt; 
&gt; ok&#40;-r $filename, &#39;file to test is readable by this user&#39;&#41;;
&gt; 
&gt; eval {
&gt;                                                                                            local
&gt; $SIG{ALRM} = sub { die &#34;alarm\n&#34; }; # NB: \n required
&gt;     alarm&#40;1&#41;;
&gt;     my $fp = File::Tail-&gt;new&#40;name=&gt;&#39;/var/log/auth.log&#39;, tail=&gt;5&#41;;
&gt;     isa_ok&#40;$fp,&#39;File::Tail&#39;&#41;;
&gt;     alarm 0;
&gt; };
&gt; if &#40;$@&#41; {
&gt;     alarm 0;
&gt;                                                                                            die
&gt; unless $@ eq &#34;alarm\n&#34;;   # propagate unexpected errors
&gt;                                                                                                                                            #
&gt; timed out
&gt;     fail&#40;&#39;Timeout File::Tail-&gt;new has not return object&#39;&#41;;
&gt; }
&gt; 
&gt; exit 0;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521390" href="/Public/Bug/Display.html?id=106145#txn-1521390">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jul&nbsp;29&nbsp;12:25:43&nbsp;2015</span>
    <span class="description">nonsolosoft [...] diff.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> A test to add to this Perl module</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> nonsolosoft [...] diff.org</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521390/811466/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811466">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 393b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please add this module to your next distribution.

There are some security scripts using File::Tail and they don&#39;t work with current version even if there is not any error during File::Tail installation and any warnings/failures  when they are executed.

When this test fails they can downgrade File::Tail to version 1.0 or avoid to run those scripts.

Thank you in advance,              \ferz
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> new_FileTail.t</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521390/811467/new_FileTail.t">Download new_FileTail.t</a><br />
<span class="downloadcontenttype">text/x-perl 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/env perl

use strict;
use warnings;
use Test::More tests=&gt;3;
use File::Temp qw/ tempfile /;

BEGIN {
 use_ok&#40; &#39;File::Tail&#39; &#41;;
};

my &#40;$filename&#41;;

if &#40;exists $ENV{FILE_TAIL_TO_TEST}&#41; {
    $filename = $ENV{FILE_TAIL_TO_TEST};
} else {
    $filename = set_up_temp_file&#40;&#41;;
}

ok&#40;-r $filename, &#39;file to test is readable by this user&#39;&#41;;

eval {
    local $SIG{ALRM} = sub { die &#34;alarm\n&#34; }; # NB: \n required
    alarm&#40;3&#41;;
    my $fp = new_ok&#40;&#39;File::Tail&#39;, [name=&gt;$filename, tail=&gt;50]&#41;;
    note&#40;&#34;File::Tail $File::Tail::VERSION&#34;&#41;;
    alarm 0;
};
if &#40;$@&#41; {
    alarm 0;
    die unless $@ eq &#34;alarm\n&#34;;   # propagate unexpected errors
        # timed out
    fail&#40;&#39;Timeout File::Tail-&gt;new has not return object&#39;&#41;;
    diag&#40;&#34;File::Tail version: $File::Tail::VERSION\n&#34;&#41;;
}

unless &#40;exists $ENV{FILE_TAIL_TO_TEST}&#41; {
    unlink&#40;$filename&#41;;
}

exit 0;


sub set_up_temp_file {
    my &#40;$fh, $filename&#41; = tempfile&#40;&#41;;
    # write something...
    my @words = qw/aries taurus gemini cancer leo virgo libra scorpio saggittarius capricorn aquarius pisces/;
    my @verbs = qw/hates loves trusts/;
    for &#40;0..100&#41; {
	printf $fh &#34;$words[rand&#40;@words&#41;] $verbs[rand&#40;@verbs&#41;] $words[rand&#40;@words&#41;]\n&#34;;
    }
    close&#40;$fh&#41;;
    return $filename;
}


=END

=head1 AUTHOR

Ferruccio Zamuner &lt;nonsolosoft@diff.org&gt;

=head1 LICENSE

This library is free software. You can redistribute it and/or modify
it under the same terms as Perl itself.

=cut
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521578" href="/Public/Bug/Display.html?id=106145#txn-1521578">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;09:41:49&nbsp;2015</span>
    <span class="description">matija [...] serverflow.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #106145] File::Tail is broken on FreeBSD</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 30 Jul 2015 15:41:18 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Tail [...] rt.cpan.org, &#34;undisclosed-recipients: ;&#34; [...] serverflow.si</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matija Grabnar &lt;matija [...] serverflow.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521578/811573/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811573">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I think you&#39;re doing something wrong.
I installed freebsd into a virtual machine, installed perl and 
File::Tail, and your test script WORKS FOR ME, so your claim that 
File::Tail is incompatible with FreeBSD is bogus.

Perhaps if you actually propagated the error you get from eval instead 
of doing a die without a parameter, you might find out what the real 
problem was.

Next time, if you think File::Tail died unreasonably, try to collect any 
errors it might have reported,
and sending those along instead of throwing them away in your test script.

Best regards,
                 Matija Grabnar

On 07/29/2015 04:28 PM, nonsolosoft@diff.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;         Queue: File-Tail
&gt;   Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt;
&gt; On Wed Jul 29 10:01:22 2015, nonsolosoft@diff.org wrote:
<div class="message-stanza open">&gt;&gt; perl test_FileTail.pl
&gt;&gt; 1..3
&gt;&gt; ok 1 - use File::Tail;
&gt;&gt; ok 2 - file to test is readable by this user
&gt;&gt; not ok 3 - Timeout File::Tail-&gt;new has not return object
&gt;&gt; #   Failed test &#39;Timeout File::Tail-&gt;new has not return object&#39;
&gt;&gt; #   at test_FileTail.pl line 25.
&gt;&gt; # Looks like you failed 1 test of 3.
&gt;&gt;
&gt;&gt; --------
<div class="message-stanza open">&gt;&gt;&gt; uname -a
</div>&gt;&gt; FreeBSD myhost 9.3-RELEASE FreeBSD 9.3 - Sun Jul 26 11:40:02 UTC 2015
&gt;&gt; amd64
&gt;&gt; --------
&gt;&gt;
&gt;&gt; #!/usr/bin/env perl
&gt;&gt;
&gt;&gt; use strict;
&gt;&gt; use warnings;
&gt;&gt; use Test::More tests=&gt;3;
&gt;&gt;
&gt;&gt; BEGIN {
&gt;&gt;   use_ok&#40; &#39;File::Tail&#39; &#41;;
&gt;&gt; };
&gt;&gt;
&gt;&gt; my $filename = $ENV{FILE_TAIL_TO_TEST} || &#39;/var/log/auth.log&#39;;
&gt;&gt;
&gt;&gt; ok&#40;-r $filename, &#39;file to test is readable by this user&#39;&#41;;
&gt;&gt;
&gt;&gt; eval {
&gt;&gt;                                                                                             local
&gt;&gt; $SIG{ALRM} = sub { die &#34;alarm\n&#34; }; # NB: \n required
&gt;&gt;      alarm&#40;1&#41;;
&gt;&gt;      my $fp = File::Tail-&gt;new&#40;name=&gt;&#39;/var/log/auth.log&#39;, tail=&gt;5&#41;;
&gt;&gt;      isa_ok&#40;$fp,&#39;File::Tail&#39;&#41;;
&gt;&gt;      alarm 0;
&gt;&gt; };
&gt;&gt; if &#40;$@&#41; {
&gt;&gt;      alarm 0;
&gt;&gt;                                                                                             die
&gt;&gt; unless $@ eq &#34;alarm\n&#34;;   # propagate unexpected errors
&gt;&gt;                                                                                                                                             #
&gt;&gt; timed out
&gt;&gt;      fail&#40;&#39;Timeout File::Tail-&gt;new has not return object&#39;&#41;;
&gt;&gt; }
&gt;&gt;
&gt;&gt; exit 0;
</div>&gt;
&gt;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521579" href="/Public/Bug/Display.html?id=106145#txn-1521579">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;09:41:50&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521582" href="/Public/Bug/Display.html?id=106145#txn-1521582">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;09:43:54&nbsp;2015</span>
    <span class="description">matija+pause [...] serverflow.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521582/811576/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811576">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 118b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">tested the freebsd provided version on a freebsd virtual machine, the provided test script does not generate an error.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521584" href="/Public/Bug/Display.html?id=106145#txn-1521584">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;09:43:56&nbsp;2015</span>
    <span class="description">matija+pause [...] serverflow.com -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521608" href="/Public/Bug/Display.html?id=106145#txn-1521608">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;11:15:53&nbsp;2015</span>
    <span class="description">nonsolosoft [...] diff.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #106145] File::Tail is broken on FreeBSD</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 30 Jul 2015 17:15:28 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-File-Tail [...] rt.cpan.org&#34; &lt;bug-File-Tail [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ferruccio Zamuner &lt;nonsolosoft [...] diff.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521608/811583/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811583">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I&#39;ve some freebsd server, with many version of it.
I&#39;d also a script that use File::Tail to listen /var/log/auth.log and some other files to ban IPs those are trying brute force ssh attacks.

That test fails on any server and on my BSD servers that security script doesn&#39;t create any File::Tail, it simply hangs on that first call for anytime, without report any errors. So you think that servers are protected while they aren&#39;t.

I&#39;ve written that test script to track the problem, please don&#39;t drop it easly: if on some &#40;your&#41; server it succeded you can include that simply test in your distro without problem and help others sysadmin to discover if they have security issues or not.

I&#39;ve same issue on FreeBSD 8.1, 8.4, 9.3 and DragonFlyBSD 4.2.3, I can suppose that there are other BSD &#40;real and not virtual&#41; with same problems.

Best regards,          \ferz

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Il giorno 30/lug/2015, alle ore 15:41, Matija Grabnar via RT &lt;bug-File-Tail@rt.cpan.org&gt; ha scritto:
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt; 
&gt; I think you&#39;re doing something wrong.
&gt; I installed freebsd into a virtual machine, installed perl and 
&gt; File::Tail, and your test script WORKS FOR ME, so your claim that 
&gt; File::Tail is incompatible with FreeBSD is bogus.
&gt; 
&gt; Perhaps if you actually propagated the error you get from eval instead 
&gt; of doing a die without a parameter, you might find out what the real 
&gt; problem was.
&gt; 
&gt; Next time, if you think File::Tail died unreasonably, try to collect any 
&gt; errors it might have reported,
&gt; and sending those along instead of throwing them away in your test script.
&gt; 
&gt; Best regards,
&gt;                 Matija Grabnar
&gt; 
<div class="message-stanza open">&gt;&gt; On 07/29/2015 04:28 PM, nonsolosoft@diff.org via RT wrote:
&gt;&gt;        Queue: File-Tail
&gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt;&gt; 
<div class="message-stanza open">&gt;&gt;&gt; On Wed Jul 29 10:01:22 2015, nonsolosoft@diff.org wrote:
&gt;&gt;&gt; perl test_FileTail.pl
&gt;&gt;&gt; 1..3
&gt;&gt;&gt; ok 1 - use File::Tail;
&gt;&gt;&gt; ok 2 - file to test is readable by this user
&gt;&gt;&gt; not ok 3 - Timeout File::Tail-&gt;new has not return object
&gt;&gt;&gt; #   Failed test &#39;Timeout File::Tail-&gt;new has not return object&#39;
&gt;&gt;&gt; #   at test_FileTail.pl line 25.
&gt;&gt;&gt; # Looks like you failed 1 test of 3.
&gt;&gt;&gt; 
&gt;&gt;&gt; --------
<div class="message-stanza open">&gt;&gt;&gt;&gt; uname -a
</div>&gt;&gt;&gt; FreeBSD myhost 9.3-RELEASE FreeBSD 9.3 - Sun Jul 26 11:40:02 UTC 2015
&gt;&gt;&gt; amd64
&gt;&gt;&gt; --------
&gt;&gt;&gt; 
&gt;&gt;&gt; #!/usr/bin/env perl
&gt;&gt;&gt; 
&gt;&gt;&gt; use strict;
&gt;&gt;&gt; use warnings;
&gt;&gt;&gt; use Test::More tests=&gt;3;
&gt;&gt;&gt; 
&gt;&gt;&gt; BEGIN {
&gt;&gt;&gt;  use_ok&#40; &#39;File::Tail&#39; &#41;;
&gt;&gt;&gt; };
&gt;&gt;&gt; 
&gt;&gt;&gt; my $filename = $ENV{FILE_TAIL_TO_TEST} || &#39;/var/log/auth.log&#39;;
&gt;&gt;&gt; 
&gt;&gt;&gt; ok&#40;-r $filename, &#39;file to test is readable by this user&#39;&#41;;
&gt;&gt;&gt; 
&gt;&gt;&gt; eval {
&gt;&gt;&gt;                                                                                            local
&gt;&gt;&gt; $SIG{ALRM} = sub { die &#34;alarm\n&#34; }; # NB: \n required
&gt;&gt;&gt;     alarm&#40;1&#41;;
&gt;&gt;&gt;     my $fp = File::Tail-&gt;new&#40;name=&gt;&#39;/var/log/auth.log&#39;, tail=&gt;5&#41;;
&gt;&gt;&gt;     isa_ok&#40;$fp,&#39;File::Tail&#39;&#41;;
&gt;&gt;&gt;     alarm 0;
&gt;&gt;&gt; };
&gt;&gt;&gt; if &#40;$@&#41; {
&gt;&gt;&gt;     alarm 0;
&gt;&gt;&gt;                                                                                            die
&gt;&gt;&gt; unless $@ eq &#34;alarm\n&#34;;   # propagate unexpected errors
&gt;&gt;&gt;                                                                                                                                            #
&gt;&gt;&gt; timed out
&gt;&gt;&gt;     fail&#40;&#39;Timeout File::Tail-&gt;new has not return object&#39;&#41;;
&gt;&gt;&gt; }
&gt;&gt;&gt; 
&gt;&gt;&gt; exit 0;
</div></div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521651" href="/Public/Bug/Display.html?id=106145#txn-1521651">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jul&nbsp;30&nbsp;14:37:34&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521651/811611/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811611">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Like Matija, I don&#39;t get an error using the attached new_FileTail.t script. My test systems were a physical freebsd 9.2 and virtual freebsd 9.2 and freebsd 10.1. The perls were a couple of self-compiled ones ranging from 5.8.9 to 5.22.0, and the system perl. File::Tail version was always 1.2.

Maybe you have another special setup &#40;jails? zfs?&#41;. Probably it&#39;s best if you could provide a syscall trace from the test script, using ktrace or truss &#40;preferably the trace should be gzipped or provided on another server&#41;.

On 2015-07-30 11:15:53, nonsolosoft@diff.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi,
&gt; 
&gt; I&#39;ve some freebsd server, with many version of it.
&gt; I&#39;d also a script that use File::Tail to listen /var/log/auth.log and
&gt; some other files to ban IPs those are trying brute force ssh attacks.
&gt; 
&gt; That test fails on any server and on my BSD servers that security
&gt; script doesn&#39;t create any File::Tail, it simply hangs on that first
&gt; call for anytime, without report any errors. So you think that servers
&gt; are protected while they aren&#39;t.
&gt; 
&gt; I&#39;ve written that test script to track the problem, please don&#39;t drop
&gt; it easly: if on some &#40;your&#41; server it succeded you can include that
&gt; simply test in your distro without problem and help others sysadmin to
&gt; discover if they have security issues or not.
&gt; 
&gt; I&#39;ve same issue on FreeBSD 8.1, 8.4, 9.3 and DragonFlyBSD 4.2.3, I can
&gt; suppose that there are other BSD &#40;real and not virtual&#41; with same
&gt; problems.
&gt; 
&gt; Best regards,          \ferz
&gt; 
<div class="message-stanza open">&gt; &gt; Il giorno 30/lug/2015, alle ore 15:41, Matija Grabnar via RT &lt;bug-
&gt; &gt; File-Tail@rt.cpan.org&gt; ha scritto:
&gt; &gt;
&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt; &gt;
&gt; &gt; I think you&#39;re doing something wrong.
&gt; &gt;  I installed freebsd into a virtual machine, installed perl and
&gt; &gt;  File::Tail, and your test script WORKS FOR ME, so your claim that
&gt; &gt; File::Tail is incompatible with FreeBSD is bogus.
&gt; &gt;
&gt; &gt; Perhaps if you actually propagated the error you get from eval
&gt; &gt; instead
&gt; &gt; of doing a die without a parameter, you might find out what the real
&gt; &gt; problem was.
&gt; &gt;
&gt; &gt; Next time, if you think File::Tail died unreasonably, try to collect
&gt; &gt; any
&gt; &gt; errors it might have reported,
&gt; &gt; and sending those along instead of throwing them away in your test
&gt; &gt; script.
&gt; &gt;
&gt; &gt; Best regards,
&gt; &gt;                 Matija Grabnar
&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt; On 07/29/2015 04:28 PM, nonsolosoft@diff.org via RT wrote:
&gt; &gt;&gt;        Queue: File-Tail
&gt; &gt;&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt; &gt;&gt;
<div class="message-stanza open">&gt; &gt;&gt;&gt; On Wed Jul 29 10:01:22 2015, nonsolosoft@diff.org wrote:
&gt; &gt;&gt;&gt; perl test_FileTail.pl
&gt; &gt;&gt;&gt; 1..3
&gt; &gt;&gt;&gt; ok 1 - use File::Tail;
&gt; &gt;&gt;&gt; ok 2 - file to test is readable by this user
&gt; &gt;&gt;&gt; not ok 3 - Timeout File::Tail-&gt;new has not return object
&gt; &gt;&gt;&gt; #   Failed test &#39;Timeout File::Tail-&gt;new has not return object&#39;
&gt; &gt;&gt;&gt; #   at test_FileTail.pl line 25.
&gt; &gt;&gt;&gt; # Looks like you failed 1 test of 3.
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; --------
<div class="message-stanza open">&gt; &gt;&gt;&gt;&gt; uname -a
</div>&gt; &gt;&gt;&gt; FreeBSD myhost 9.3-RELEASE FreeBSD 9.3 - Sun Jul 26 11:40:02 UTC
&gt; &gt;&gt;&gt; 2015
&gt; &gt;&gt;&gt; amd64
&gt; &gt;&gt;&gt; --------
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; #!/usr/bin/env perl
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; use strict;
&gt; &gt;&gt;&gt; use warnings;
&gt; &gt;&gt;&gt; use Test::More tests=&gt;3;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; BEGIN {
&gt; &gt;&gt;&gt;  use_ok&#40; &#39;File::Tail&#39; &#41;;
&gt; &gt;&gt;&gt; };
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; my $filename = $ENV{FILE_TAIL_TO_TEST} || &#39;/var/log/auth.log&#39;;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; ok&#40;-r $filename, &#39;file to test is readable by this user&#39;&#41;;
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; eval {
&gt; &gt;&gt;&gt;                                                                                            local
&gt; &gt;&gt;&gt; $SIG{ALRM} = sub { die &#34;alarm\n&#34; }; # NB: \n required
&gt; &gt;&gt;&gt;     alarm&#40;1&#41;;
&gt; &gt;&gt;&gt;     my $fp = File::Tail-&gt;new&#40;name=&gt;&#39;/var/log/auth.log&#39;, tail=&gt;5&#41;;
&gt; &gt;&gt;&gt;     isa_ok&#40;$fp,&#39;File::Tail&#39;&#41;;
&gt; &gt;&gt;&gt;     alarm 0;
&gt; &gt;&gt;&gt; };
&gt; &gt;&gt;&gt; if &#40;$@&#41; {
&gt; &gt;&gt;&gt;     alarm 0;
&gt; &gt;&gt;&gt;                                                                                            die
&gt; &gt;&gt;&gt; unless $@ eq &#34;alarm\n&#34;;   # propagate unexpected errors
&gt; &gt;&gt;&gt;                                                                                                                                            #
&gt; &gt;&gt;&gt; timed out
&gt; &gt;&gt;&gt;     fail&#40;&#39;Timeout File::Tail-&gt;new has not return object&#39;&#41;;
&gt; &gt;&gt;&gt; }
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; exit 0;
</div></div>&gt; &gt;
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1521814" href="/Public/Bug/Display.html?id=106145#txn-1521814">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jul&nbsp;31&nbsp;05:25:05&nbsp;2015</span>
    <span class="description">nonsolosoft [...] diff.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #106145]</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 31 Jul 2015 11:24:43 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-File-Tail [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Ferruccio Zamuner &lt;nonsolosoft [...] diff.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1521814/811713/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811713">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 653b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 30/07/2015 20:37, Slaven_Rezic via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt;
&gt; Like Matija, I don&#39;t get an error using the attached new_FileTail.t script. My test systems were a physical freebsd 9.2 and virtual freebsd 9.2 and freebsd 10.1. The perls were a couple of self-compiled ones ranging from 5.8.9 to 5.22.0, and the system perl. File::Tail version was always 1.2.
</div>
Please try using this env before execute it:

setenv FILE_TAIL_TO_TEST &#39;/var/log/auth.log&#39;

it seems hangs on line 278 of File::Tail::new&#40;&#41;:
      $object-&gt;reset_pointers;


Anyway I&#39;ll investigate better.

Thank you.                       \ferz
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1522019" href="/Public/Bug/Display.html?id=106145#txn-1522019">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;02:32:33&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1522019/811820/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811820">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1011b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-07-31 05:25:05, nonsolosoft@diff.org wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 30/07/2015 20:37, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt; &gt;
&gt; &gt; Like Matija, I don&#39;t get an error using the attached new_FileTail.t
&gt; &gt; script. My test systems were a physical freebsd 9.2 and virtual
&gt; &gt; freebsd 9.2 and freebsd 10.1. The perls were a couple of self-
&gt; &gt; compiled ones ranging from 5.8.9 to 5.22.0, and the system perl.
&gt; &gt; File::Tail version was always 1.2.
</div>&gt; 
&gt; Please try using this env before execute it:
&gt; 
&gt; setenv FILE_TAIL_TO_TEST &#39;/var/log/auth.log&#39;
&gt; 
&gt; it seems hangs on line 278 of File::Tail::new&#40;&#41;:
&gt;       $object-&gt;reset_pointers;
</div>
Ok, finally success: on some systems the following runs into the alarm timeout:

    sudo env FILE_TAIL_TO_TEST=&#39;/var/log/auth.log&#39; perl5.X.Y /tmp/new_FileTail.t

Maybe it depends on the size of /var/log/auth.log. It does not hang on a system where the log file is small &#40;just 5K&#41; and hangs on the other two with larger size &#40;80 resp. 98K&#41;.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1522031" href="/Public/Bug/Display.html?id=106145#txn-1522031">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;04:47:10&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1522031/811827/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811827">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-08-01 02:32:33, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-07-31 05:25:05, nonsolosoft@diff.org wrote:
<div class="message-stanza open">&gt; &gt; On 30/07/2015 20:37, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt; &gt; &gt;
&gt; &gt; &gt; Like Matija, I don&#39;t get an error using the attached new_FileTail.t
&gt; &gt; &gt; script. My test systems were a physical freebsd 9.2 and virtual
&gt; &gt; &gt; freebsd 9.2 and freebsd 10.1. The perls were a couple of self-
&gt; &gt; &gt; compiled ones ranging from 5.8.9 to 5.22.0, and the system perl.
&gt; &gt; &gt; File::Tail version was always 1.2.
</div>&gt; &gt;
&gt; &gt; Please try using this env before execute it:
&gt; &gt;
&gt; &gt; setenv FILE_TAIL_TO_TEST &#39;/var/log/auth.log&#39;
&gt; &gt;
&gt; &gt; it seems hangs on line 278 of File::Tail::new&#40;&#41;:
&gt; &gt;       $object-&gt;reset_pointers;
</div>&gt; 
&gt; Ok, finally success: on some systems the following runs into the alarm
&gt; timeout:
&gt; 
&gt; sudo env FILE_TAIL_TO_TEST=&#39;/var/log/auth.log&#39; perl5.X.Y
&gt; /tmp/new_FileTail.t
&gt; 
&gt; Maybe it depends on the size of /var/log/auth.log. It does not hang on
&gt; a system where the log file is small &#40;just 5K&#41; and hangs on the other
&gt; two with larger size &#40;80 resp. 98K&#41;.
</div>
... and it seems to hang also on Linux systems. I attached a modified test script which fails on all systems with File::Tail 1.2 &#40;1.0 and older is fine&#41;.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rt106145.t</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1522031/811828/rt106145.t">Download rt106145.t</a><br />
<span class="downloadcontenttype">text/x-perl 982b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">#!/usr/bin/env perl

use strict;
use warnings;
use Test::More tests=&gt;1;
use File::Temp qw/ tempfile /;
use File::Tail;

my $filename = set_up_temp_file&#40;&#41;;

eval {
    local $SIG{ALRM} = sub { die &#34;alarm\n&#34; }; # NB: \n required
    alarm&#40;3&#41;;
    my $fp = new_ok&#40;&#39;File::Tail&#39;, [name=&gt;$filename, tail=&gt;5]&#41;;
    note&#40;&#34;File::Tail $File::Tail::VERSION&#34;&#41;;
    alarm 0;
};
if &#40;$@&#41; {
    alarm 0;
    die unless $@ eq &#34;alarm\n&#34;;   # propagate unexpected errors
        # timed out
    fail&#40;&#39;Timeout File::Tail-&gt;new has not return object&#39;&#41;;
    diag&#40;&#34;File::Tail version: $File::Tail::VERSION\n&#34;&#41;;
}

exit 0;


sub set_up_temp_file {
    my &#40;$fh, $filename&#41; = tempfile&#40;UNLINK =&gt; 1&#41;;
    # write something...
    for &#40;1..6&#41; {
	print $fh &#40;&#34;x&#34;x80&#41;.&#34;\n&#34;;
    }
    close&#40;$fh&#41;;
    return $filename;
}


=END

=head1 AUTHOR

Ferruccio Zamuner &lt;nonsolosoft@diff.org&gt;

=head1 LICENSE

This library is free software. You can redistribute it and/or modify
it under the same terms as Perl itself.

=cut
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1522034" href="/Public/Bug/Display.html?id=106145#txn-1522034">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;04:47:17&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Status changed from &#39;rejected&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1522035" href="/Public/Bug/Display.html?id=106145#txn-1522035">#</a>      
    </span>
    <span class="date">Sat&nbsp;Aug&nbsp;01&nbsp;04:56:47&nbsp;2015</span>
    <span class="description">SREZIC [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1522035/811831/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/811831">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2015-08-01 04:47:10, SREZIC wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 2015-08-01 02:32:33, SREZIC wrote:
<div class="message-stanza open">&gt; &gt; On 2015-07-31 05:25:05, nonsolosoft@diff.org wrote:
<div class="message-stanza open">&gt; &gt; &gt; On 30/07/2015 20:37, Slaven_Rezic via RT wrote:
<div class="message-stanza open">&gt; &gt; &gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=106145">https://rt.cpan.org/Ticket/Display.html?id=106145</a></span> &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt; Like Matija, I don&#39;t get an error using the attached
&gt; &gt; &gt; &gt; new_FileTail.t
&gt; &gt; &gt; &gt; script. My test systems were a physical freebsd 9.2 and virtual
&gt; &gt; &gt; &gt; freebsd 9.2 and freebsd 10.1. The perls were a couple of self-
&gt; &gt; &gt; &gt; compiled ones ranging from 5.8.9 to 5.22.0, and the system perl.
&gt; &gt; &gt; &gt; File::Tail version was always 1.2.
</div>&gt; &gt; &gt;
&gt; &gt; &gt; Please try using this env before execute it:
&gt; &gt; &gt;
&gt; &gt; &gt; setenv FILE_TAIL_TO_TEST &#39;/var/log/auth.log&#39;
&gt; &gt; &gt;
&gt; &gt; &gt; it seems hangs on line 278 of File::Tail::new&#40;&#41;:
&gt; &gt; &gt;       $object-&gt;reset_pointers;
</div>&gt; &gt;
&gt; &gt; Ok, finally success: on some systems the following runs into the
&gt; &gt; alarm
&gt; &gt; timeout:
&gt; &gt;
&gt; &gt; sudo env FILE_TAIL_TO_TEST=&#39;/var/log/auth.log&#39; perl5.X.Y
&gt; &gt; /tmp/new_FileTail.t
&gt; &gt;
&gt; &gt; Maybe it depends on the size of /var/log/auth.log. It does not hang
&gt; &gt; on
&gt; &gt; a system where the log file is small &#40;just 5K&#41; and hangs on the other
&gt; &gt; two with larger size &#40;80 resp. 98K&#41;.
</div>&gt; 
&gt; ... and it seems to hang also on Linux systems. I attached a modified
&gt; test script which fails on all systems with File::Tail 1.2 &#40;1.0 and
&gt; older is fine&#41;.
</div>
A little bit of debugging shows that the first while loop in position&#40;&#41; may be an endless loop. At some point, $calclen never increases anymore while $crs stays close below $object-&gt;{tail}.

Probably unrelated to this problem, but this line looks problematic:

    $calclen=length&#40;$object-&gt;{tail}&#41;+1024 if $calclen&lt;=length&#40;$object-&gt;{&#34;tail&#34;}&#41;;

$object-&gt;{tail} is supposed to be a number --- should really length&#40;&#41; be called on it?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1522487" href="/Public/Bug/Display.html?id=106145#txn-1522487">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;02&nbsp;15:42:12&nbsp;2015</span>
    <span class="description">matija+pause [...] serverflow.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1522487/812064/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/812064">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 63b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I just released version 1.3, I believe this bug is fixed there.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1522489" href="/Public/Bug/Display.html?id=106145#txn-1522489">#</a>      
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;02&nbsp;15:42:18&nbsp;2015</span>
    <span class="description">matija+pause [...] serverflow.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1522491" href="/Public/Bug/Display.html?id=106145#txn-1522491">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sun&nbsp;Aug&nbsp;02&nbsp;15:42:19&nbsp;2015</span>
    <span class="description">matija+pause [...] serverflow.com -  Fixed in 1.3 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.883613</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
