<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50304 for DBD-mysql: column_info broken for set values that contain parentheses</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50304 for DBD-mysql: column_info broken for set values that contain parentheses</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-mysql">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-mysql">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-mysql">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-mysql">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-mysql">DBD-mysql CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50304</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-mysql">DBD-mysql</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">MICHIELB [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
kevin [...] bosak.net

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10170-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
4.005</li>
<li>
4.006</li>
<li>
4.007</li>
<li>
4.008</li>
<li>
4.009</li>
<li>
4.010</li>
<li>
4.011</li>
<li>
4.012</li>
<li>
4.013</li>
</ul>
    </td>
  </tr>
  <tr id="CF-10171-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=50304">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-673759" href="/Public/Bug/Display.html?id=50304#txn-673759">#</a>      
    </span>
    <span class="date">Wed&nbsp;Oct&nbsp;07&nbsp;14:40:58&nbsp;2009</span>
    <span class="description">kevinbosak [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> column_info broken for set values that contain parentheses</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/673759/346469/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/346469">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 627b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I ran across a case where I was calling column_info on a table where set
values had parentheses.  The column_info code was not returning the
expected set values.  It appeared to have ignored everything in the list
of set values after the first closing parenthesis it found.

After some digging I found this regex is the culprit:
    $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*?&#41;\&#41;&#41;?\s*&#40;.*&#41;/;

I&#39;ve not tested thoroughly, but I suspect something like this would work
better:

    $type = substr&#40;$type, 0, rindex&#40;$type, &#39;&#41;&#39;&#41;+1&#41;;
    $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*&#41;\&#41;&#41;/;

I found this bug in version 4.005 but 4.013 also appears to have the
same regex.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-734378" href="/Public/Bug/Display.html?id=50304#txn-734378">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;15&nbsp;16:23:10&nbsp;2010</span>
    <span class="description">kevinbosak [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/734378/379510/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/379510">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This bug bit me again so I&#39;ve looked at this more and did some testing.
 My previous fix wasn&#39;t close, but this seems to work for me in version
4.007 and 4.013.  I&#39;ve also run the test suite win 4.013 with this
change and did fail a few tests but I think they&#39;re unrelated &#40;40catalog
and 80process&#41;.  If there&#39;s anything else I can do to help get this bug
in the next release, I&#39;m more than happy to help.

@@ -443,10 +443,10 @@
   for my $row &#40;@$desc&#41;
   {
     my $type = $row-&gt;{type};
-    $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*?&#41;\&#41;&#41;?\s*&#40;.*&#41;/;
+    $type =~ m/^&#40;\w+&#41;&#40;\&#40;&#40;.+&#41;\&#41;&#41;?\s?&#40;.*&#41;?$/;
     my $basetype  = lc&#40;$1&#41;;
-    my $typemod   = $2;
-    my $attr      = $3;
+    my $typemod   = $3;
+    my $attr      = $4;

     my $info = $col_info{ $row-&gt;{field} }= {
        TABLE_CAT               =&gt; $catalog,



On Wed Oct 07 14:40:58 2009, KBOSAK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I ran across a case where I was calling column_info on a table where set
&gt; values had parentheses.  The column_info code was not returning the
&gt; expected set values.  It appeared to have ignored everything in the list
&gt; of set values after the first closing parenthesis it found.
&gt; 
&gt; After some digging I found this regex is the culprit:
&gt;     $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*?&#41;\&#41;&#41;?\s*&#40;.*&#41;/;
&gt; 
&gt; I&#39;ve not tested thoroughly, but I suspect something like this would work
&gt; better:
&gt; 
&gt;     $type = substr&#40;$type, 0, rindex&#40;$type, &#39;&#41;&#39;&#41;+1&#41;;
&gt;     $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*&#41;\&#41;&#41;/;
&gt; 
&gt; I found this bug in version 4.005 but 4.013 also appears to have the
&gt; same regex.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-734381" href="/Public/Bug/Display.html?id=50304#txn-734381">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;15&nbsp;16:23:11&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-743514" href="/Public/Bug/Display.html?id=50304#txn-743514">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;06&nbsp;13:30:40&nbsp;2010</span>
    <span class="description">CAPTTOFU [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/743514/384398/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/384398">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the patch! I&#39;ll test it with the latest DBD::mysql and
include it in an upcoming release if all checks out.

On Mon Feb 15 16:23:10 2010, KBOSAK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This bug bit me again so I&#39;ve looked at this more and did some testing.
&gt;  My previous fix wasn&#39;t close, but this seems to work for me in version
&gt; 4.007 and 4.013.  I&#39;ve also run the test suite win 4.013 with this
&gt; change and did fail a few tests but I think they&#39;re unrelated &#40;40catalog
&gt; and 80process&#41;.  If there&#39;s anything else I can do to help get this bug
&gt; in the next release, I&#39;m more than happy to help.
&gt; 
&gt; @@ -443,10 +443,10 @@
&gt;    for my $row &#40;@$desc&#41;
&gt;    {
&gt;      my $type = $row-&gt;{type};
&gt; -    $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*?&#41;\&#41;&#41;?\s*&#40;.*&#41;/;
&gt; +    $type =~ m/^&#40;\w+&#41;&#40;\&#40;&#40;.+&#41;\&#41;&#41;?\s?&#40;.*&#41;?$/;
&gt;      my $basetype  = lc&#40;$1&#41;;
&gt; -    my $typemod   = $2;
&gt; -    my $attr      = $3;
&gt; +    my $typemod   = $3;
&gt; +    my $attr      = $4;
&gt; 
&gt;      my $info = $col_info{ $row-&gt;{field} }= {
&gt;         TABLE_CAT               =&gt; $catalog,
&gt; 
&gt; 
&gt; 
&gt; On Wed Oct 07 14:40:58 2009, KBOSAK wrote:
<div class="message-stanza open">&gt; &gt; I ran across a case where I was calling column_info on a table where set
&gt; &gt; values had parentheses.  The column_info code was not returning the
&gt; &gt; expected set values.  It appeared to have ignored everything in the list
&gt; &gt; of set values after the first closing parenthesis it found.
&gt; &gt; 
&gt; &gt; After some digging I found this regex is the culprit:
&gt; &gt;     $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*?&#41;\&#41;&#41;?\s*&#40;.*&#41;/;
&gt; &gt; 
&gt; &gt; I&#39;ve not tested thoroughly, but I suspect something like this would work
&gt; &gt; better:
&gt; &gt; 
&gt; &gt;     $type = substr&#40;$type, 0, rindex&#40;$type, &#39;&#41;&#39;&#41;+1&#41;;
&gt; &gt;     $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*&#41;\&#41;&#41;/;
&gt; &gt; 
&gt; &gt; I found this bug in version 4.005 but 4.013 also appears to have the
&gt; &gt; same regex.
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-866486" href="/Public/Bug/Display.html?id=50304#txn-866486">#</a>      
    </span>
    <span class="date">Thu&nbsp;Dec&nbsp;09&nbsp;10:58:22&nbsp;2010</span>
    <span class="description">kevinbosak [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/866486/448694/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/448694">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just wanting to see if there&#39;s anything I can help with to move this bug 
along.  It just bit me again because I&#39;m still having to manually put in 
my patch.

On Sat Mar 06 13:30:40 2010, CAPTTOFU wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thank you for the patch! I&#39;ll test it with the latest DBD::mysql and
&gt; include it in an upcoming release if all checks out.
&gt; 
&gt; On Mon Feb 15 16:23:10 2010, KBOSAK wrote:
<div class="message-stanza open">&gt; &gt; This bug bit me again so I&#39;ve looked at this more and did some 
</div></div>testing.
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt;  My previous fix wasn&#39;t close, but this seems to work for me in 
</div></div>version
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; 4.007 and 4.013.  I&#39;ve also run the test suite win 4.013 with this
&gt; &gt; change and did fail a few tests but I think they&#39;re unrelated 
</div></div>&#40;40catalog
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; and 80process&#41;.  If there&#39;s anything else I can do to help get this 
</div></div>bug
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; in the next release, I&#39;m more than happy to help.
&gt; &gt; 
&gt; &gt; @@ -443,10 +443,10 @@
&gt; &gt;    for my $row &#40;@$desc&#41;
&gt; &gt;    {
&gt; &gt;      my $type = $row-&gt;{type};
&gt; &gt; -    $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*?&#41;\&#41;&#41;?\s*&#40;.*&#41;/;
&gt; &gt; +    $type =~ m/^&#40;\w+&#41;&#40;\&#40;&#40;.+&#41;\&#41;&#41;?\s?&#40;.*&#41;?$/;
&gt; &gt;      my $basetype  = lc&#40;$1&#41;;
&gt; &gt; -    my $typemod   = $2;
&gt; &gt; -    my $attr      = $3;
&gt; &gt; +    my $typemod   = $3;
&gt; &gt; +    my $attr      = $4;
&gt; &gt; 
&gt; &gt;      my $info = $col_info{ $row-&gt;{field} }= {
&gt; &gt;         TABLE_CAT               =&gt; $catalog,
&gt; &gt; 
&gt; &gt; 
&gt; &gt; 
&gt; &gt; On Wed Oct 07 14:40:58 2009, KBOSAK wrote:
<div class="message-stanza open">&gt; &gt; &gt; I ran across a case where I was calling column_info on a table 
</div></div></div>where set
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; values had parentheses.  The column_info code was not returning 
</div></div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; expected set values.  It appeared to have ignored everything in 
</div></div>the list
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; of set values after the first closing parenthesis it found.
&gt; &gt; &gt; 
&gt; &gt; &gt; After some digging I found this regex is the culprit:
&gt; &gt; &gt;     $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*?&#41;\&#41;&#41;?\s*&#40;.*&#41;/;
&gt; &gt; &gt; 
&gt; &gt; &gt; I&#39;ve not tested thoroughly, but I suspect something like this 
</div></div>would work
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; &gt; better:
&gt; &gt; &gt; 
&gt; &gt; &gt;     $type = substr&#40;$type, 0, rindex&#40;$type, &#39;&#41;&#39;&#41;+1&#41;;
&gt; &gt; &gt;     $type =~ m/^&#40;\w+&#41;&#40;?:\&#40;&#40;.*&#41;\&#41;&#41;/;
&gt; &gt; &gt; 
&gt; &gt; &gt; I found this bug in version 4.005 but 4.013 also appears to have 
</div></div>the
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open"><div class="message-stanza open">&gt; &gt; &gt; same regex.
</div>&gt; &gt; 
&gt; &gt; 
</div>&gt; 
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1280220" href="/Public/Bug/Display.html?id=50304#txn-1280220">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;28&nbsp;06:59:06&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1280220/678424/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/678424">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 446b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Kevin,

On Wed Oct 07 14:40:58 2009, KBOSAK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I ran across a case where I was calling column_info on a table where set
&gt; values had parentheses.  The column_info code was not returning the
&gt; expected set values.  It appeared to have ignored everything in the list
&gt; of set values after the first closing parenthesis it found.
</div>
Can you add an example &#39;CREATE TABLE&#39; statement for a table where this problem would manifest itself?
--
Mike
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1280223" href="/Public/Bug/Display.html?id=50304#txn-1280223">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;28&nbsp;06:59:08&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1280720" href="/Public/Bug/Display.html?id=50304#txn-1280720">#</a>      
    </span>
    <span class="date">Tue&nbsp;Oct&nbsp;29&nbsp;11:39:13&nbsp;2013</span>
    <span class="description">kevinbosak [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1280720/678702/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/678702">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 813b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Here&#39;s a short example:

CREATE TABLE `mytable` &#40;
 `id` int&#40;10&#41; unsigned NOT NULL AUTO_INCREMENT,
 `problem_column` set&#40;&#39;&#39;,&#39;&#40;Some Text&#41;&#39;&#41; DEFAULT NULL,
 PRIMARY KEY &#40;`id`&#41;,
 UNIQUE KEY `id` &#40;`id`&#41;
&#41;;

The parenthesis in the set values of &#39;problem_column&#39; aren&#39;t being parsed correctly.

On Mon Oct 28 06:59:06 2013, MICHIELB wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Kevin,
&gt; 
&gt; On Wed Oct 07 14:40:58 2009, KBOSAK wrote:
<div class="message-stanza open">&gt; &gt; I ran across a case where I was calling column_info on a table where
&gt; &gt; set
&gt; &gt; values had parentheses.  The column_info code was not returning the
&gt; &gt; expected set values.  It appeared to have ignored everything in the
&gt; &gt; list
&gt; &gt; of set values after the first closing parenthesis it found.
</div>&gt; 
&gt; Can you add an example &#39;CREATE TABLE&#39; statement for a table where this
&gt; problem would manifest itself?
&gt; --
&gt; Mike
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1281495" href="/Public/Bug/Display.html?id=50304#txn-1281495">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;03:53:18&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1281495/679150/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/679150">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 348b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for the test table; I was now able to create a test script for this issue, which I added here:

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-dbi/DBD-mysql/commit/aa6b66f5ccedcb9b7e01a191921021539029ee56">https://github.com/perl5-dbi/DBD-mysql/commit/aa6b66f5ccedcb9b7e01a191921021539029ee56</a></span>

the fix is also already in DBD::mysql now, so when we release 4.025 you&#39;ll no longer have to patch it manually :D

Many thanks for your contribution!
--
Mike
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1281498" href="/Public/Bug/Display.html?id=50304#txn-1281498">#</a>      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;31&nbsp;03:53:19&nbsp;2013</span>
    <span class="description">MICHIELB [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.594896</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
