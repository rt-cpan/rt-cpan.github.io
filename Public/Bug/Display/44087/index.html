<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #44087 for Devel-PPPort: New supporting functions</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #44087 for Devel-PPPort: New supporting functions</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Devel-PPPort">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Devel-PPPort">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Devel-PPPort">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Devel-PPPort">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/mhx/Devel-PPPort/issues/">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/Devel-PPPort">Devel-PPPort CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">44087</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Devel-PPPort">Devel-PPPort</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
gfuji [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-11154-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-11155-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




dppp.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/616587/313237/dppp.patch">
Wed Jun 10 02:19:05 2009 (6.1k) by gfuji [...] cpan.org
</a>
</font></li>
</ul>


ppport_extra.h<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/576942/291493/ppport_extra.h">
Thu Mar 12 23:36:41 2009 (953b) by gfuji [...] cpan.org
</a>
</font></li>
</ul>


signature.asc<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/585144/295845/signature.asc">
Tue Mar 31 18:17:26 2009 (197b) by mhx-perl [...] gmx.net
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=44087">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-576942" href="/Public/Bug/Display.html?id=44087#txn-576942">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;12&nbsp;23:36:41&nbsp;2009</span>
    <span class="description">gfuji [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> New supporting functions</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/576942/291490/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/291490">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 199b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

There are some functions I define in my momdules in addition to current
ppport.h. Can you add these functions in the attached file to ppport.h?

Regards,
-- 
Goro Fuji &#40;gfx&#41; GFUJI at CPAN.org
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> ppport_extra.h</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/576942/291493/ppport_extra.h">Download ppport_extra.h</a><br />
<span class="downloadcontenttype">text/x-chdr 953b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
#ifndef SvRXOK
#define SvRXOK&#40;sv&#41; my_SvRXOK&#40;aTHX_ sv&#41;
/* see also Perl_get_re_arg&#40;&#41; in util.c &#40;5.10.0&#41; */
STATIC bool
my_SvRXOK&#40;pTHX_ SV* sv&#41;{
	SvGETMAGIC&#40;sv&#41;;

	if&#40;SvROK&#40;sv&#41;&#41;{
		sv = SvRV&#40;sv&#41;;
		if&#40;SvMAGICAL&#40;sv&#41; &#38;&#38; mg_find&#40;sv, PERL_MAGIC_qr&#41;&#41;{
			return TRUE;
		}
	}
	return FALSE;
}
#endif

#ifndef newSV_type
#define newSV_type&#40;t&#41; my_newSV_type&#40;aTHX_ t&#41;
STATIC SV*
my_newSV_type&#40;pTHX_ svtype const t&#41;{
	SV* const sv = newSV&#40;0&#41;;
	sv_upgrade&#40;sv, t&#41;;
	return sv;
}
#endif

#ifndef gv_fetchpvs
#define gv_fetchpvs&#40;name, flags, svt&#41; gv_fetchpv&#40;&#40;name &#34;&#34;&#41;, flags, svt&#41;
#endif

#ifndef gv_stashpvs
#define gv_stashpvs&#40;name, flags&#41; Perl_gv_stashpvn&#40;aTHX_ STR_WITH_LEN&#40;name&#41;, flags&#41;
#endif

#ifndef GvSVn
#define GvSVn&#40;sv&#41; GvSV&#40;sv&#41;
#endif

#ifndef HvNAME_get
#define HvNAME_get&#40;hv&#41; HvNAME&#40;hv&#41;
#endif

#ifndef HvNAMELEN_get
#define HvNAMELEN_get&#40;hv&#41; &#40;strlen&#40;HvNAME_get&#40;hv&#41;&#41;&#41;
#endif

#ifndef SvIS_FREED
#define SvIS_FREED&#40;sv&#41; &#40;SvFLAGS&#40;sv&#41; == SVTYPEMASK&#41;
#endif
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-585144" href="/Public/Bug/Display.html?id=44087#txn-585144">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;31&nbsp;18:17:26&nbsp;2009</span>
    <span class="description">mhx-perl [...] gmx.net -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> gfuji [...] cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #44087] New supporting functions</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 1 Apr 2009 00:17:03 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Devel-PPPort [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Marcus Holland-Moritz &lt;mhx-perl [...] gmx.net&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/585144/295844/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/295844">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2009-03-12, at 23:36:42 -0400, Goro Fuji via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Thu Mar 12 23:36:41 2009: Request 44087 was acted upon.
&gt; Transaction: Ticket created by GFUJI
&gt;        Queue: Devel-PPPort
&gt;      Subject: New supporting functions
&gt;    Broken in: &#40;no value&#41;
&gt;     Severity: Wishlist
&gt;        Owner: Nobody
&gt;   Requestors: gfuji@cpan.org
&gt;       Status: new
&gt;  Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=44087">https://rt.cpan.org/Ticket/Display.html?id=44087</a></span> &gt;
&gt; 
&gt; 
&gt; Hello,
&gt; 
&gt; There are some functions I define in my momdules in addition to current
&gt; ppport.h. Can you add these functions in the attached file to ppport.h?
</div>
Thanks for your report and sorry for the long delay.

It would be nice if you could provide a patch against
the latest Devel::PPPort version on CPAN. I&#39;ll be glad
to test and tweak that patch.

My problem is that I cannot directly reuse the code you
attached. I have to merge it into the source files from
which ppport.h is generated. Also, there are no test
cases. I try very hard to add a test case for every
piece of code provided by ppport.h. As you obviously
have been using all of those functions, it&#39;s a lot
easier for you to provide some simple test cases than
it is for me, as I have to become familiar with these
functions first.

So, if you could have a look at the HACKERS file in the
Devel::PPPort distribution and at the various files in
parts/inc/ and provide me with a patch I would really
appreciate it. If you don&#39;t have the time for this, it
would also be a great help if you could just provide a
test case for every function/macro and I&#39;ll do the rest.

Thanks,
Marcus
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/585144/295845/signature.asc">Download signature.asc</a><br />
<span class="downloadcontenttype">application/pgp-signature 197b</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-585145" href="/Public/Bug/Display.html?id=44087#txn-585145">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;31&nbsp;18:17:27&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-616587" href="/Public/Bug/Display.html?id=44087#txn-616587">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;10&nbsp;02:19:05&nbsp;2009</span>
    <span class="description">gfuji [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/616587/313234/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/313234">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 283b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello MHX,

I have implemented the following APIs and included tests in parts/inc/.
Is it OK?.

PL_in_my
PL_in_my_stash
PL_error_count

GvSVn
isGV_with_GP

gv_fetchpvn_flags
gv_fetchpvs
gv_stashpvs

newSV_type

HvNAME_get
HvNAMELEN_get

Regards,
-- 
Goro Fuji &#40;gfx&#41; GFUJI at CPAN.org
</div></div>
</div>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/616587/313237/dppp.patch">Download dppp.patch</a><br />
<span class="downloadcontenttype">text/x-diff 6.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -burN Devel-PPPort-3.17/PPPort_pm.PL Devel-PPPort/PPPort_pm.PL
--- Devel-PPPort-3.17/PPPort_pm.PL	2009-03-16 00:43:37.000000000 +0900
+++ Devel-PPPort/PPPort_pm.PL	2009-06-10 15:05:59.221744000 +0900
@@ -628,6 +628,8 @@
 
 %include SvREFCNT
 
+%include newSV_type
+
 %include newSVpv
 
 %include SvPV
@@ -638,6 +640,10 @@
 
 %include shared_pv
 
+%include HvNAME
+
+%include gv
+
 %include warn
 
 %include pvs
diff -burN Devel-PPPort-3.17/parts/inc/HvNAME Devel-PPPort/parts/inc/HvNAME
--- Devel-PPPort-3.17/parts/inc/HvNAME	1970-01-01 09:00:00.000000000 +0900
+++ Devel-PPPort/parts/inc/HvNAME	2009-06-10 10:29:30.000000000 +0900
@@ -0,0 +1,27 @@
+
+=provides
+
+__UNDEFINED__
+
+=implementation
+
+__UNDEFINED__ HvNAME_get&#40;hv&#41; HvNAME&#40;hv&#41;
+
+__UNDEFINED__ HvNAMELEN_get&#40;hv&#41; &#40;HvNAME_get&#40;hv&#41; ? &#40;I32&#41;strlen&#40;HvNAME_get&#40;hv&#41;&#41; : 0&#41;
+
+=xsubs
+
+const char*
+HvNAME_get&#40;HV* hv&#41;
+
+int
+HvNAMELEN_get&#40;HV* hv&#41;
+
+=tests plan =&gt; 4
+
+ok&#40;Devel::PPPort::HvNAME_get&#40;\%Devel::PPPort::&#41;, &#39;Devel::PPPort&#39;&#41;;
+ok&#40;Devel::PPPort::HvNAME_get&#40;{}&#41;, undef&#41;;
+
+ok&#40;Devel::PPPort::HvNAMELEN_get&#40;\%Devel::PPPort::&#41;, length&#40;&#39;Devel::PPPort&#39;&#41;&#41;;
+ok&#40;Devel::PPPort::HvNAMELEN_get&#40;{}&#41;, 0&#41;;
+
diff -burN Devel-PPPort-3.17/parts/inc/gv Devel-PPPort/parts/inc/gv
--- Devel-PPPort-3.17/parts/inc/gv	1970-01-01 09:00:00.000000000 +0900
+++ Devel-PPPort/parts/inc/gv	2009-06-10 15:07:30.345463000 +0900
@@ -0,0 +1,47 @@
+
+=provides
+
+__UNDEFINED__
+
+=implementation
+
+__UNDEFINED__ GvSVn&#40;gv&#41;        GvSV&#40;gv&#41;
+__UNDEFINED__ isGV_with_GP&#40;gv&#41; isGV&#40;gv&#41;
+
+=xsubs
+
+int
+GvSVn&#40;&#41;
+	PREINIT:
+		GV* gv;
+	CODE:
+		RETVAL = 0;
+		gv = gv_fetchpvs&#40;&#34;Devel::PPPort::GvTest&#34;, GV_ADDMULTI, SVt_PVGV&#41;;
+		if&#40;GvSVn&#40;gv&#41; != NULL&#41;{
+			RETVAL++;
+		}
+	OUTPUT:
+		RETVAL
+
+int
+isGV_with_GP&#40;&#41;
+	PREINIT:
+		GV* gv;
+	CODE:
+		RETVAL = 0;
+		gv = gv_fetchpvs&#40;&#34;Devel::PPPort::GvTest&#34;, GV_ADDMULTI, SVt_PVGV&#41;;
+		if&#40;isGV_with_GP&#40;gv&#41;&#41;{
+			RETVAL++;
+		}
+		if&#40;!isGV&#40;&#38;PL_sv_undef&#41;&#41;{
+			RETVAL++;
+		}
+	OUTPUT:
+		RETVAL
+
+
+=tests plan =&gt; 2
+
+ok&#40;Devel::PPPort::GvSVn&#40;&#41;, 1&#41;;
+
+ok&#40;Devel::PPPort::isGV_with_GP&#40;&#41;, 2&#41;
diff -burN Devel-PPPort-3.17/parts/inc/newSV_type Devel-PPPort/parts/inc/newSV_type
--- Devel-PPPort-3.17/parts/inc/newSV_type	1970-01-01 09:00:00.000000000 +0900
+++ Devel-PPPort/parts/inc/newSV_type	2009-06-10 10:27:18.000000000 +0900
@@ -0,0 +1,65 @@
+
+=provides
+
+newSV_type
+
+=implementation
+
+#ifndef newSV_type
+
+#if { NEED newSV_type }
+
+SV*
+newSV_type&#40;pTHX_ svtype const t&#41;{
+    SV* const sv = newSV&#40;0&#41;;
+    sv_upgrade&#40;sv, t&#41;;
+    return sv;
+}
+
+#endif
+
+#endif
+
+=xsinit
+
+#define NEED_newSV_type
+
+=xsubs
+
+int
+newSV_type&#40;&#41;
+	PREINIT:
+		SV* sv;
+	CODE:
+		RETVAL = 0;
+		sv = newSV_type&#40;SVt_NULL&#41;;
+		if&#40;SvTYPE&#40;sv&#41; == SVt_NULL&#41;{
+			RETVAL++;
+		}
+		SvREFCNT_dec&#40;sv&#41;;
+
+		sv = newSV_type&#40;SVt_PVIV&#41;;
+		if&#40;SvTYPE&#40;sv&#41; == SVt_PVIV&#41;{
+			RETVAL++;
+		}
+		SvREFCNT_dec&#40;sv&#41;;
+
+		sv = newSV_type&#40;SVt_PVHV&#41;;
+		if&#40;SvTYPE&#40;sv&#41; == SVt_PVHV&#41;{
+			RETVAL++;
+		}
+		SvREFCNT_dec&#40;sv&#41;;
+
+		sv = newSV_type&#40;SVt_PVAV&#41;;
+		if&#40;SvTYPE&#40;sv&#41; == SVt_PVAV&#41;{
+			RETVAL++;
+		}
+		SvREFCNT_dec&#40;sv&#41;;
+	OUTPUT:
+		RETVAL
+
+
+=tests plan =&gt; 1
+
+ok&#40;Devel::PPPort::newSV_type&#40;&#41;, 4&#41;;
+
diff -burN Devel-PPPort-3.17/parts/inc/pvs Devel-PPPort/parts/inc/pvs
--- Devel-PPPort-3.17/parts/inc/pvs	2009-03-16 00:43:40.000000000 +0900
+++ Devel-PPPort/parts/inc/pvs	2009-06-10 10:19:20.000000000 +0900
@@ -35,6 +35,10 @@
 __UNDEFINED__  hv_fetchs&#40;hv, key, lval&#41;    hv_fetch&#40;hv, key &#34;&#34;, sizeof&#40;key&#41; - 1, lval&#41;
 __UNDEFINED__  hv_stores&#40;hv, key, val&#41;     hv_store&#40;hv, key &#34;&#34;, sizeof&#40;key&#41; - 1, val, 0&#41;
 
+__UNDEFINED__  gv_fetchpvn_flags&#40;name, len, flags, svt&#41; gv_fetchpv&#40;name, flags, svt&#41;
+__UNDEFINED__  gv_fetchpvs&#40;name, flags, svt&#41;            gv_fetchpvn_flags&#40;name &#34;&#34;, sizeof&#40;name&#41; - 1, flags, svt&#41;
+__UNDEFINED__  gv_stashpvs&#40;name, flags&#41;                 gv_stashpvn&#40;name &#34;&#34;, sizeof&#40;name&#41; - 1, flags&#41;
+
 =xsubs
 
 void
@@ -78,7 +82,29 @@
 	PPCODE:
 		&#40;void&#41; hv_stores&#40;&#40;HV *&#41; SvRV&#40;hv&#41;, &#34;hv_stores&#34;, SvREFCNT_inc_simple&#40;sv&#41;&#41;;
 
-=tests plan =&gt; 8
+SV*
+gv_fetchpvn_flags&#40;&#41;
+	CODE:
+		RETVAL = newRV_inc&#40;&#40;SV*&#41;gv_fetchpvn_flags&#40;&#34;Devel::PPPort::VERSION&#34;, sizeof&#40;&#34;Devel::PPPort::VERSION&#34;&#41;-1, 0, SVt_PV&#41;&#41;;
+	OUTPUT:
+		RETVAL
+
+SV*
+gv_fetchpvs&#40;&#41;
+	CODE:
+		RETVAL = newRV_inc&#40;&#40;SV*&#41;gv_fetchpvs&#40;&#34;Devel::PPPort::VERSION&#34;, 0, SVt_PV&#41;&#41;;
+	OUTPUT:
+		RETVAL
+
+SV*
+gv_stashpvs&#40;&#41;
+	CODE:
+		RETVAL = newRV_inc&#40;&#40;SV*&#41;gv_stashpvs&#40;&#34;Devel::PPPort&#34;, 0&#41;&#41;;
+	OUTPUT:
+		RETVAL
+
+
+=tests plan =&gt; 11
 
 my $x = &#39;foo&#39;;
 
@@ -97,3 +123,7 @@
 ok&#40;exists $h{&#39;hv_stores&#39;}&#41;;
 ok&#40;$h{&#39;hv_stores&#39;}, 4711&#41;;
 ok&#40;Devel::PPPort::hv_fetchs&#40;\%h&#41;, 42&#41;;
+
+ok&#40;Devel::PPPort::gv_fetchpvn_flags&#40;&#41;, \*Devel::PPPort::VERSION&#41;;
+ok&#40;Devel::PPPort::gv_fetchpvs&#40;&#41;,       \*Devel::PPPort::VERSION&#41;;
+ok&#40;Devel::PPPort::gv_stashpvs&#40;&#41;,       \%Devel::PPPort::&#41;;
diff -burN Devel-PPPort-3.17/parts/inc/variables Devel-PPPort/parts/inc/variables
--- Devel-PPPort-3.17/parts/inc/variables	2009-03-16 00:43:40.000000000 +0900
+++ Devel-PPPort/parts/inc/variables	2009-06-10 14:50:35.638701000 +0900
@@ -60,6 +60,9 @@
 PL_tainted
 PL_tainting
 PL_tokenbuf
+PL_in_my
+PL_in_my_stash
+PL_error_count
 PL_signals
 PERL_SIGNALS_UNSAFE_FLAG
 
@@ -190,6 +193,10 @@
 # define PL_lex_state      D_PPP_my_PL_parser_var&#40;lex_state&#41;
 # define PL_lex_stuff      D_PPP_my_PL_parser_var&#40;lex_stuff&#41;
 # define PL_tokenbuf       D_PPP_my_PL_parser_var&#40;tokenbuf&#41;
+# define PL_in_my          D_PPP_my_PL_parser_var&#40;in_my&#41;
+# define PL_in_my_stash    D_PPP_my_PL_parser_var&#40;in_my_stash&#41;
+# define PL_error_count    D_PPP_my_PL_parser_var&#40;error_count&#41;
+
 
 #else
 
@@ -249,6 +256,20 @@
 # define ppp_lex_state_t U8
 #endif
 
+#if { VERSION &lt; 5.6.0 }
+# define ppp_in_my_t bool
+#elif { VERSION &lt; 5.9.5 }
+# define ppp_in_my_t I32
+#else
+# define ppp_in_my_t U16
+#endif
+
+#if { VERSION &lt; 5.9.5 }
+# define ppp_error_count_t I32
+#else
+# define ppp_error_count_t U8
+#endif
+
 =xsubs
 
 int
@@ -379,6 +400,9 @@
 		ppp_PARSERVAR&#40;char *, PL_bufend&#41;;
 		ppp_PARSERVAR&#40;ppp_lex_state_t, PL_lex_state&#41;;
 		ppp_PARSERVAR&#40;SV *, PL_lex_stuff&#41;;
+		ppp_PARSERVAR&#40;ppp_in_my_t, PL_in_my&#41;;
+		ppp_PARSERVAR&#40;HV*, PL_in_my_stash&#41;;
+		ppp_PARSERVAR&#40;ppp_error_count_t, PL_error_count&#41;;
 
 		XSRETURN&#40;count&#41;;
 
@@ -389,7 +413,7 @@
 int
 dummy_parser_warning&#40;&#41;
 
-=tests plan =&gt; 49
+=tests plan =&gt; 52
 
 ok&#40;Devel::PPPort::compare_PL_signals&#40;&#41;&#41;;
 
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-617585" href="/Public/Bug/Display.html?id=44087#txn-617585">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;12&nbsp;07:42:21&nbsp;2009</span>
    <span class="description">MHX [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/617585/313807/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/313807">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 299b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for this extremely well prepared patch. :&#41;

I only had to do some small tweaks to ensure support for very
old perl versions, but the fact that test cases were present
made this an extremely easy task.

Your patch is part of Devel::PPPort 3.18_01, which has just
been released.

Cheers,
Marcus
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-617588" href="/Public/Bug/Display.html?id=44087#txn-617588">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;12&nbsp;07:42:23&nbsp;2009</span>
    <span class="description">MHX [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.521136</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
