<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #120131 for PAR-Packer: PAR::Packer DynaLoader Problem On Strawberry Perl 5.24.1</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #120131 for PAR-Packer: PAR::Packer DynaLoader Problem On Strawberry Perl 5.24.1</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/PAR-Packer/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/PAR-Packer/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/PAR-Packer/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/PAR-Packer/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/PAR-Packer">PAR-Packer CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">120131</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/PAR-Packer/Active/">PAR-Packer</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
JRushworth [...] divestco.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-41710-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-41711-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;06&nbsp;22:26:13&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> PAR::Packer DynaLoader Problem On Strawberry Perl 5.24.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 6 Feb 2017 15:51:42 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR-Packer [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The attached script when compiled with Strawberry Perl pp on 64bit 
Windows 10 creates an executable which will not run on a 64 bit Windows 
10 machine which does not have Strawberry Perl installed, it won&#39;t run 
on a 64bit Windows 7 machine without Strawberry Perl installed either. 
The program will not run on a machine with ActiveState Perl installed 
giving the same error message.

This is the error message:

Can&#39;t load 
&#39;C:\Users\NTHOMP~1\AppData\Local\Temp\par-6e74686f6d70736f6e\cache-a689a490f84fa6e443fb002bba992a32a268b542\e88b1fb1.xs.dll&#39; 
for module Tk::PNG: load_file:The specified module could not be found at 
C:/Perl64/perl/lib/DynaLoader.pm line 193.
    at C:/Perl64/perl/vendor/lib/PAR/Heavy.pm line 123.
Compilation failed in require at script/module_test.pl line 39.
BEGIN failed--compilation aborted at script/module_test.pl line 39.

all of the modules after the DynaLoader comment cause a variation of 
this error message.

This is the Perl version:

C:\Users\james\perlapp&gt;perl -v

This is perl 5, version 24, subversion 1 &#40;v5.24.1&#41; built for
MSWin32-x64-multi-thread

and this is the module version:

C:\Users\james&gt;perl -MPAR::Packer -le &#34;print $PAR::Packer::VERSION&#34;
1.036
</div></div>

<div class="messagebody">
<p>Message body is not shown because sender requested not to inline it.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;03:24:30&nbsp;2017</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-02-06 22:26:13, JRushworth@divestco.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This is the error message:
&gt; 
&gt; Can&#39;t load
&gt; &#39;C:\Users\NTHOMP~1\AppData\Local\Temp\par-6e74686f6d70736f6e\cache-
&gt; a689a490f84fa6e443fb002bba992a32a268b542\e88b1fb1.xs.dll&#39;
&gt; for module Tk::PNG: load_file:The specified module could not be found
&gt; at
&gt; C:/Perl64/perl/lib/DynaLoader.pm line 193.
</div>
Most likely the Perl &#34;glue&#34; library for Tk::PNG &#40;probably called .../TK/PNG/PNG.xs.dll&#41;
is linked with the png library &#40;included in Strawberry Perl as c/bin/libpng16-16__.dl&#41;,
but this libpng isn&#39;t included in the executable generated by pp.

PAR::Packer doesn&#39;t know about dependencies like this and never packs non-Perl
libraries unless explicitly told to do so. In this case

pp --link libpng16-16__.dll ...

should do the trick. You may verify that libpng gets packed by looking at the
output of
 
unzip -l your.exe

In general, if module Foo::Bar shows this problem, locate its &#34;glue&#34; library
.../Foo/Bar/Bar.xs.dll, then run

objdump -ax ../Foo/Bar/Bar.xs.dll | perl -ne &#39;print if /DLL Name/&#39;

to show the libraries it is linked with, e.g.

        DLL Name: msvcrt.dll
        DLL Name: libpng16-16__.dll
        DLL Name: KERNEL32.dll
        DLL Name: perl524.dll

Ignore Windows system libraries like msvcrt.dll and KERNEL32.dll, also the
Perl shared library perl*.dll. The rest should be specified as --link&#39;s 
on the pp command line.

Cheers, Roderich
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;03:24:31&nbsp;2017</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;03:24:42&nbsp;2017</span>
    <span class="description">RSCHUPP [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;11:34:00&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120131] PAR::Packer DynaLoader Problem On Strawberry Perl 5.24.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 7 Feb 2017 09:33:29 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR-Packer [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Roderich,

I tried the pp command with the --link libpng16-16__.dll option and 
found  libpng16-16__.dll included with the executable &#40;it definitely 
wasn&#39;t without the --link option&#41; but running the executable on a 
Windows 10 machine with no Perl installed produced exactly the same error.

It seems to me that e88b1fb1.xs.dll is some kind of dynamic file which 
gets created if Perl is installed but not if there is no Perl.

ttfn

jr

Roderich Schupp via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120131">https://rt.cpan.org/Ticket/Display.html?id=120131</a></span> &gt;
&gt;
&gt; On 2017-02-06 22:26:13, JRushworth@divestco.com wrote:
<div class="message-stanza open">&gt;&gt; This is the error message:
&gt;&gt;
&gt;&gt; Can&#39;t load
&gt;&gt; &#39;C:\Users\NTHOMP~1\AppData\Local\Temp\par-6e74686f6d70736f6e\cache-
&gt;&gt; a689a490f84fa6e443fb002bba992a32a268b542\e88b1fb1.xs.dll&#39;
&gt;&gt; for module Tk::PNG: load_file:The specified module could not be found
&gt;&gt; at
&gt;&gt; C:/Perl64/perl/lib/DynaLoader.pm line 193.
</div>&gt;
&gt; Most likely the Perl &#34;glue&#34; library for Tk::PNG &#40;probably called .../TK/PNG/PNG.xs.dll&#41;
&gt; is linked with the png library &#40;included in Strawberry Perl as c/bin/libpng16-16__.dl&#41;,
&gt; but this libpng isn&#39;t included in the executable generated by pp.
&gt;
&gt; PAR::Packer doesn&#39;t know about dependencies like this and never packs non-Perl
&gt; libraries unless explicitly told to do so. In this case
&gt;
&gt; pp --link libpng16-16__.dll ...
&gt;
&gt; should do the trick. You may verify that libpng gets packed by looking at the
&gt; output of
&gt;
&gt; unzip -l your.exe
&gt;
&gt; In general, if module Foo::Bar shows this problem, locate its &#34;glue&#34; library
&gt; .../Foo/Bar/Bar.xs.dll, then run
&gt;
&gt; objdump -ax ../Foo/Bar/Bar.xs.dll | perl -ne &#39;print if /DLL Name/&#39;
&gt;
&gt; to show the libraries it is linked with, e.g.
&gt;
&gt;          DLL Name: msvcrt.dll
&gt;          DLL Name: libpng16-16__.dll
&gt;          DLL Name: KERNEL32.dll
&gt;          DLL Name: perl524.dll
&gt;
&gt; Ignore Windows system libraries like msvcrt.dll and KERNEL32.dll, also the
&gt; Perl shared library perl*.dll. The rest should be specified as --link&#39;s
&gt; on the pp command line.
&gt;
&gt; Cheers, Roderich
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
</div>

-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;12:14:22&nbsp;2017</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-02-07 11:34:00, JRushworth@divestco.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I tried the pp command with the --link libpng16-16__.dll option and
&gt; found  libpng16-16__.dll included with the executable &#40;it definitely
&gt; wasn&#39;t without the --link option&#41; but running the executable on a
&gt; Windows 10 machine with no Perl installed produced exactly the same
&gt; error.
&gt; 
&gt; It seems to me that e88b1fb1.xs.dll is some kind of dynamic file which
&gt; gets created if Perl is installed but not if there is no Perl.
</div>
No, it&#39;s not a dynamic file, it&#39;s actually one of the files that you see with

unzip -l your.exe

but extracted into the cache area with a different name &#40;it&#39;s the CRC32 checksum
of the original file&#39;s contents&#41;. My guess would be .../Tk/PNG/PNG.xs.dll 
&#40;verify by comparing the output of md5sum or sha1sum for the two files&#41;.

Anyway, look up the DLLs that this file is actually linked with, e.g.

objdump -ax C:\Users\NTHOMP~1\AppData\Local\Temp\par-6e74686f6d70736f6e\cache-a689a490f84fa6e443fb002bba992a32a268b542\e88b1fb1.xs.dll | perl -ne &#39;print if /DLL 
Name/&#39;

Most likely it&#39;s not only linked with some libpng*, but also some libz*. 
Add another --link option for that, rinse and repeat.

Cheers, Roderich


 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;12:57:02&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120131] PAR::Packer DynaLoader Problem On Strawberry Perl 5.24.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 7 Feb 2017 10:56:32 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR-Packer [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Roderich,

You are correct e88b1fb1.xs.dll is identical to PNG.xs.dll but what that 
means is:

[james.r@jrushworth PNG]$ objdump -ax PNG.xs.dll | perl -ne &#39;print if 
/DLL Name/&#39;
        DLL Name: msvcrt.dll
        DLL Name: libpng16-16__.dll
        DLL Name: KERNEL32.dll
        DLL Name: perl524.dll

C:\Users\james\AppData\Local\Temp\par-6a616d6573\cache-c1546264452e74db829440ed61c603745f7769ed&gt;objdump 
-ax e88b1fb1.xs.dll | perl -ne &#34;print if /DLL Name/&#34;
         DLL Name: msvcrt.dll
         DLL Name: libpng16-16__.dll
         DLL Name: KERNEL32.dll
         DLL Name: perl524.dll

objdump for both files shows exactly the same links.

The original error message tells us that it can&#39;t find e88b1fb1.xs.dll 
but the same file is in the executable called PNG.xs.dll. Why is it able 
to find the file if Strawberry Perl is installed on the machine but not 
if it isn&#39;t. One of the things I tried is installing Strawberry Perl on 
the machine immediately after getting the error message and starting a 
new command prompt with Strawberry Perl in the path and having the 
executable run with no error.

ttfn

jr


Roderich Schupp via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120131">https://rt.cpan.org/Ticket/Display.html?id=120131</a></span> &gt;
&gt;
&gt; On 2017-02-07 11:34:00, JRushworth@divestco.com wrote:
<div class="message-stanza open">&gt;&gt; I tried the pp command with the --link libpng16-16__.dll option and
&gt;&gt; found  libpng16-16__.dll included with the executable &#40;it definitely
&gt;&gt; wasn&#39;t without the --link option&#41; but running the executable on a
&gt;&gt; Windows 10 machine with no Perl installed produced exactly the same
&gt;&gt; error.
&gt;&gt;
&gt;&gt; It seems to me that e88b1fb1.xs.dll is some kind of dynamic file which
&gt;&gt; gets created if Perl is installed but not if there is no Perl.
</div>&gt;
&gt; No, it&#39;s not a dynamic file, it&#39;s actually one of the files that you see with
&gt;
&gt; unzip -l your.exe
&gt;
&gt; but extracted into the cache area with a different name &#40;it&#39;s the CRC32 checksum
&gt; of the original file&#39;s contents&#41;. My guess would be .../Tk/PNG/PNG.xs.dll
&gt; &#40;verify by comparing the output of md5sum or sha1sum for the two files&#41;.
&gt;
&gt; Anyway, look up the DLLs that this file is actually linked with, e.g.
&gt;
&gt; objdump -ax C:\Users\NTHOMP~1\AppData\Local\Temp\par-6e74686f6d70736f6e\cache-a689a490f84fa6e443fb002bba992a32a268b542\e88b1fb1.xs.dll | perl -ne &#39;print if /DLL
&gt; Name/&#39;
&gt;
&gt; Most likely it&#39;s not only linked with some libpng*, but also some libz*.
&gt; Add another --link option for that, rinse and repeat.
&gt;
&gt; Cheers, Roderich
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
</div>

-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;13:59:13&nbsp;2017</span>
    <span class="description">RSCHUPP [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 2017-02-07 12:57:02, JRushworth@divestco.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; C:\Users\james\AppData\Local\Temp\par-6a616d6573\cache-
<div class="message-stanza open">&gt; c1546264452e74db829440ed61c603745f7769ed&gt;objdump
</div>&gt; -ax e88b1fb1.xs.dll | perl -ne &#34;print if /DLL Name/&#34;
&gt;         DLL Name: msvcrt.dll
&gt;         DLL Name: libpng16-16__.dll
&gt;         DLL Name: KERNEL32.dll
&gt;         DLL Name: perl524.dll
</div>
OK, so PNG.xs.dll only links with libpng16-16__.dll, but try the same
command on libpng16-16__.dll and you&#39;ll see that it&#39;s linked with some libz*.dll
&#40;which should be added by a --link option&#41;. 

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; The original error message tells us that it can&#39;t find e88b1fb1.xs.dll
&gt; but the same file is in the executable called PNG.xs.dll. Why is it
&gt; able
&gt; to find the file if Strawberry Perl is installed on the machine but
&gt; not
&gt; if it isn&#39;t. One of the things I tried is installing Strawberry Perl
&gt; on
&gt; the machine immediately after getting the error message and starting a
&gt; new command prompt with Strawberry Perl in the path and having the
&gt; executable run with no error.
</div>
The actual error message from Perl is rather misleading. Perl&#39;s DynaLoader
wants to load the &#34;glue&#34; DLL for Tk::PNG, but it fails because the
Windows DLL loader can&#39;t find a library that it is directly or indirectly 
linked with. If the machine you run the executbale on has Strawberry installed,
then it *has* the libraries &#40;and the Strawberry installation makes sure that
their location is added to the PATH environment variable&#41;. If Strawberry isn&#39;t
installed and the libraries haven&#39;t been packed in either, then you&#39;ll
see the error message.

Cheers, Roderich
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;14:18:13&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120131] PAR::Packer DynaLoader Problem On Strawberry Perl 5.24.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 7 Feb 2017 12:17:51 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR-Packer [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Roderich,

That worked. I also linked zlib1__.dll and the program ran with no 
errors. Now I just need to track down the required link commands for the 
other three modules I need for my program to run and I&#39;ll be good to go.

You really know your stuff.

Thanks.

ttfn

jr

Roderich Schupp via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120131">https://rt.cpan.org/Ticket/Display.html?id=120131</a></span> &gt;
&gt;
&gt; On 2017-02-07 12:57:02, JRushworth@divestco.com wrote:
&gt;
<div class="message-stanza open">&gt;&gt; C:\Users\james\AppData\Local\Temp\par-6a616d6573\cache-
<div class="message-stanza open">&gt;&gt; c1546264452e74db829440ed61c603745f7769ed&gt;objdump
</div>&gt;&gt; -ax e88b1fb1.xs.dll | perl -ne &#34;print if /DLL Name/&#34;
&gt;&gt;          DLL Name: msvcrt.dll
&gt;&gt;          DLL Name: libpng16-16__.dll
&gt;&gt;          DLL Name: KERNEL32.dll
&gt;&gt;          DLL Name: perl524.dll
</div>&gt;
&gt; OK, so PNG.xs.dll only links with libpng16-16__.dll, but try the same
&gt; command on libpng16-16__.dll and you&#39;ll see that it&#39;s linked with some libz*.dll
&gt; &#40;which should be added by a --link option&#41;.
&gt;
<div class="message-stanza open">&gt;&gt; The original error message tells us that it can&#39;t find e88b1fb1.xs.dll
&gt;&gt; but the same file is in the executable called PNG.xs.dll. Why is it
&gt;&gt; able
&gt;&gt; to find the file if Strawberry Perl is installed on the machine but
&gt;&gt; not
&gt;&gt; if it isn&#39;t. One of the things I tried is installing Strawberry Perl
&gt;&gt; on
&gt;&gt; the machine immediately after getting the error message and starting a
&gt;&gt; new command prompt with Strawberry Perl in the path and having the
&gt;&gt; executable run with no error.
</div>&gt;
&gt; The actual error message from Perl is rather misleading. Perl&#39;s DynaLoader
&gt; wants to load the &#34;glue&#34; DLL for Tk::PNG, but it fails because the
&gt; Windows DLL loader can&#39;t find a library that it is directly or indirectly
&gt; linked with. If the machine you run the executbale on has Strawberry installed,
&gt; then it *has* the libraries &#40;and the Strawberry installation makes sure that
&gt; their location is added to the PATH environment variable&#41;. If Strawberry isn&#39;t
&gt; installed and the libraries haven&#39;t been packed in either, then you&#39;ll
&gt; see the error message.
&gt;
&gt; Cheers, Roderich
&gt;
</div>

-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;15:41:20&nbsp;2017</span>
    <span class="description">SLAFFAN [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dependency Walker is an alternate means of finding the required dlls.  It lists the full tree, so is particularly when there are large numbers of them.  

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dependencywalker.com/">http://www.dependencywalker.com/</a></span>

Shawn.



On Tue Feb 07 14:18:13 2017, JRushworth@divestco.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Roderich,
&gt; 
&gt; That worked. I also linked zlib1__.dll and the program ran with no
&gt; errors. Now I just need to track down the required link commands for
&gt; the
&gt; other three modules I need for my program to run and I&#39;ll be good to
&gt; go.
&gt; 
&gt; You really know your stuff.
&gt; 
&gt; Thanks.
&gt; 
&gt; ttfn
&gt; 
&gt; jr
&gt; 
&gt; Roderich Schupp via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120131">https://rt.cpan.org/Ticket/Display.html?id=120131</a></span> &gt;
&gt; &gt;
&gt; &gt; On 2017-02-07 12:57:02, JRushworth@divestco.com wrote:
&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt; C:\Users\james\AppData\Local\Temp\par-6a616d6573\cache-
<div class="message-stanza open">&gt; &gt;&gt; c1546264452e74db829440ed61c603745f7769ed&gt; objdump
</div>&gt; &gt;&gt; -ax e88b1fb1.xs.dll | perl -ne &#34;print if /DLL Name/&#34;
&gt; &gt;&gt;          DLL Name: msvcrt.dll
&gt; &gt;&gt;          DLL Name: libpng16-16__.dll
&gt; &gt;&gt;          DLL Name: KERNEL32.dll
&gt; &gt;&gt;          DLL Name: perl524.dll
</div>&gt; &gt;
&gt; &gt; OK, so PNG.xs.dll only links with libpng16-16__.dll, but try the same
&gt; &gt; command on libpng16-16__.dll and you&#39;ll see that it&#39;s linked with
&gt; &gt; some libz*.dll
&gt; &gt; &#40;which should be added by a --link option&#41;.
&gt; &gt;
<div class="message-stanza open">&gt; &gt;&gt; The original error message tells us that it can&#39;t find
&gt; &gt;&gt; e88b1fb1.xs.dll
&gt; &gt;&gt; but the same file is in the executable called PNG.xs.dll. Why is it
&gt; &gt;&gt; able
&gt; &gt;&gt; to find the file if Strawberry Perl is installed on the machine but
&gt; &gt;&gt; not
&gt; &gt;&gt; if it isn&#39;t. One of the things I tried is installing Strawberry Perl
&gt; &gt;&gt; on
&gt; &gt;&gt; the machine immediately after getting the error message and starting
&gt; &gt;&gt; a
&gt; &gt;&gt; new command prompt with Strawberry Perl in the path and having the
&gt; &gt;&gt; executable run with no error.
</div>&gt; &gt;
&gt; &gt; The actual error message from Perl is rather misleading. Perl&#39;s
&gt; &gt; DynaLoader
&gt; &gt; wants to load the &#34;glue&#34; DLL for Tk::PNG, but it fails because the
&gt; &gt; Windows DLL loader can&#39;t find a library that it is directly or
&gt; &gt; indirectly
&gt; &gt; linked with. If the machine you run the executbale on has Strawberry
&gt; &gt; installed,
&gt; &gt; then it *has* the libraries &#40;and the Strawberry installation makes
&gt; &gt; sure that
&gt; &gt; their location is added to the PATH environment variable&#41;. If
&gt; &gt; Strawberry isn&#39;t
&gt; &gt; installed and the libraries haven&#39;t been packed in either, then
&gt; &gt; you&#39;ll
&gt; &gt; see the error message.
&gt; &gt;
&gt; &gt; Cheers, Roderich
&gt; &gt;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;07&nbsp;15:50:57&nbsp;2017</span>
    <span class="description">JRushworth [...] divestco.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #120131] PAR::Packer DynaLoader Problem On Strawberry Perl 5.24.1</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 7 Feb 2017 13:49:50 -0700</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-PAR-Packer [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;James P. Rushworth&#34; &lt;JRushworth [...] divestco.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Shawn,

So far I&#39;ve been able to get by test script to compile with only four 
--link options which is not bad. Once I get my real program running I&#39;ll 
give your suggestion a try.

Thanks.

ttfn

jr


Shawn Laffan via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120131">https://rt.cpan.org/Ticket/Display.html?id=120131</a></span> &gt;
&gt;
&gt; Dependency Walker is an alternate means of finding the required dlls.  It lists the full tree, so is particularly when there are large numbers of them.
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.dependencywalker.com/">http://www.dependencywalker.com/</a></span>
&gt;
&gt; Shawn.
&gt;
&gt;
&gt;
&gt; On Tue Feb 07 14:18:13 2017, JRushworth@divestco.com wrote:
<div class="message-stanza open">&gt;&gt; Roderich,
&gt;&gt;
&gt;&gt; That worked. I also linked zlib1__.dll and the program ran with no
&gt;&gt; errors. Now I just need to track down the required link commands for
&gt;&gt; the
&gt;&gt; other three modules I need for my program to run and I&#39;ll be good to
&gt;&gt; go.
&gt;&gt;
&gt;&gt; You really know your stuff.
&gt;&gt;
&gt;&gt; Thanks.
&gt;&gt;
&gt;&gt; ttfn
&gt;&gt;
&gt;&gt; jr
&gt;&gt;
&gt;&gt; Roderich Schupp via RT wrote:
<div class="message-stanza open">&gt;&gt;&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=120131">https://rt.cpan.org/Ticket/Display.html?id=120131</a></span> &gt;
&gt;&gt;&gt;
&gt;&gt;&gt; On 2017-02-07 12:57:02, JRushworth@divestco.com wrote:
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; C:\Users\james\AppData\Local\Temp\par-6a616d6573\cache-
<div class="message-stanza open">&gt;&gt;&gt;&gt; c1546264452e74db829440ed61c603745f7769ed&gt; objdump
</div>&gt;&gt;&gt;&gt; -ax e88b1fb1.xs.dll | perl -ne &#34;print if /DLL Name/&#34;
&gt;&gt;&gt;&gt;           DLL Name: msvcrt.dll
&gt;&gt;&gt;&gt;           DLL Name: libpng16-16__.dll
&gt;&gt;&gt;&gt;           DLL Name: KERNEL32.dll
&gt;&gt;&gt;&gt;           DLL Name: perl524.dll
</div>&gt;&gt;&gt;
&gt;&gt;&gt; OK, so PNG.xs.dll only links with libpng16-16__.dll, but try the same
&gt;&gt;&gt; command on libpng16-16__.dll and you&#39;ll see that it&#39;s linked with
&gt;&gt;&gt; some libz*.dll
&gt;&gt;&gt; &#40;which should be added by a --link option&#41;.
&gt;&gt;&gt;
<div class="message-stanza open">&gt;&gt;&gt;&gt; The original error message tells us that it can&#39;t find
&gt;&gt;&gt;&gt; e88b1fb1.xs.dll
&gt;&gt;&gt;&gt; but the same file is in the executable called PNG.xs.dll. Why is it
&gt;&gt;&gt;&gt; able
&gt;&gt;&gt;&gt; to find the file if Strawberry Perl is installed on the machine but
&gt;&gt;&gt;&gt; not
&gt;&gt;&gt;&gt; if it isn&#39;t. One of the things I tried is installing Strawberry Perl
&gt;&gt;&gt;&gt; on
&gt;&gt;&gt;&gt; the machine immediately after getting the error message and starting
&gt;&gt;&gt;&gt; a
&gt;&gt;&gt;&gt; new command prompt with Strawberry Perl in the path and having the
&gt;&gt;&gt;&gt; executable run with no error.
</div>&gt;&gt;&gt;
&gt;&gt;&gt; The actual error message from Perl is rather misleading. Perl&#39;s
&gt;&gt;&gt; DynaLoader
&gt;&gt;&gt; wants to load the &#34;glue&#34; DLL for Tk::PNG, but it fails because the
&gt;&gt;&gt; Windows DLL loader can&#39;t find a library that it is directly or
&gt;&gt;&gt; indirectly
&gt;&gt;&gt; linked with. If the machine you run the executbale on has Strawberry
&gt;&gt;&gt; installed,
&gt;&gt;&gt; then it *has* the libraries &#40;and the Strawberry installation makes
&gt;&gt;&gt; sure that
&gt;&gt;&gt; their location is added to the PATH environment variable&#41;. If
&gt;&gt;&gt; Strawberry isn&#39;t
&gt;&gt;&gt; installed and the libraries haven&#39;t been packed in either, then
&gt;&gt;&gt; you&#39;ll
&gt;&gt;&gt; see the error message.
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers, Roderich
&gt;&gt;&gt;
</div></div>&gt;
&gt;
&gt;
&gt;
</div>



-- 
James P. Rushworth
Senior Support Analyst

Divestco Geomatics

P: 587-952-8168  www.divestco.com
C: 403-370-0519  300, 520 - 3 Avenue SW
F: 587-952-8372  Calgary, AB  T2P 0R3

This e-mail is intended solely for the person or entity to which it is
addressed and may contain confidential or privileged information.  Any
use of this e-mail by any other person is prohibited.  If you have
received this e-mail in error, please contact the sender. We honour
similar requests relating to the privacy of email communications.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
