<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #80015 for DBIx-Class: Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #80015 for DBIx-Class: Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41;</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/DBIx-Class/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/DBIx-Class/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBIx-Class">DBIx-Class CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">80015</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/DBIx-Class/Active/">DBIx-Class</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Josh.Arenberg [...] morganstanley.com

<br />
lmarso [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10410-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10411-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.08205    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Aug&nbsp;08&nbsp;05:27:27&nbsp;2012</span>
    <span class="description">https://lmarso.myopenid.com/ - Ticket #78844:  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> identifier stripping code bug affecting $rs-&gt;update &#40;single query
 bulk update&#41;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">bug is new, entered after 0.8196 &#40;running under perl-5-14.2 perlbrew;
ubuntu 12.04&#41;

i described it as &#34;when i try to do a single query bulk update, passing
$rs-&gt;update&#40; { field =&gt; 1} &#41;, dbix::class doesn&#39;t pass in my postgres
schema name.  the trace says &#39;update table1&#39; instead of &#39;update
schema1.table1&#39;.  no such problem with $rs-&gt;update_all or any
$rs-&gt;search followed by extraction of values, they all supply
&#39;schema1.table1&#39; to postgres.&#34;

➜  test  ./t/update_schema_call.t
1..0 # SKIP Set $ENV{DBICTEST_PG_DSN}, _USER and _PASS to run this test
# &#40; NOTE: This test drops and create a table called &#39;this_schema.item_values
# as following schema: &#39;this_schema&#39;

so specify &#40;e.g.&#41;

export DBICTEST_PG_DSN=&#39;dbi:Pg:dbname=my_test_db
export DBICTEST_PG_USER=&#39;larry&#39;
export DBICTEST_PG_USER=&#39;some_password&#39;

run with DBIx::Class 0.8196:

➜  test  ./t/update_schema_call.t
ok 1 - The object isa DBIx::Class::Row
ok 2 - The object isa DBIx::Class::Row
ok 3 - The object isa DBIx::Class::Row
ok 4 - The object isa DBIx::Class::Row
ok 5 - The object isa DBIx::Class::Row
ok 6 - The object isa DBIx::Class::Row
ok 7 - The object isa DBIx::Class::ResultSet
ok 8 - search on resultset OK
ok 9 - test of single query bulk update
1..9

run with DBIx::Class 0.8198:

larry@desktop test&gt;./t/update_schema_call.t
ok 1 - The object isa DBIx::Class::Row
ok 2 - The object isa DBIx::Class::Row
ok 3 - The object isa DBIx::Class::Row
ok 4 - The object isa DBIx::Class::Row
ok 5 - The object isa DBIx::Class::Row
ok 6 - The object isa DBIx::Class::Row
ok 7 - The object isa DBIx::Class::ResultSet
ok 8 - search on resultset OK
DBIx::Class::ResultSet::update&#40;&#41;: DBI Exception: DBD::Pg::st execute
failed: ERROR:  relation &#34;item_values&#34; does not exist
LINE 1: UPDATE item_values SET secondary = $1 WHERE &#40; item = $2 &#41;
               ^ [for Statement &#34;UPDATE item_values SET secondary = ?
WHERE &#40; item = ? &#41;&#34; with ParamValues: 1=&#39;1&#39;, 2=&#39;Item 5&#39;] at
./t/update_schema_call.t line 64
# Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.

same runs with DBIC_TRACE=1:

0.8196:

➜  test  DBIC_TRACE=1 t/update_schema_call.t                           
                                                                       
                     &lt;&lt;&lt;
SET search_path TO public:
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 1&#39;
ok 1 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 2&#39;
ok 2 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 3&#39;
ok 3 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 4&#39;
ok 4 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 5&#39;
ok 5 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 6&#39;
ok 6 - The object isa DBIx::Class::Row
ok 7 - The object isa DBIx::Class::ResultSet
SET search_path TO public:
SELECT me.item, me.secondary FROM this_schema.item_values me WHERE &#40;
item = ? &#41;: &#39;Item 5&#39;
ok 8 - search on resultset OK
UPDATE this_schema.item_values SET secondary = ? WHERE &#40; item = ? &#41;:
&#39;1&#39;, &#39;Item 5&#39;
ok 9 - test of single query bulk update
1..9


0.8198:

larry@desktop test&gt;DBIC_TRACE=1 ./t/update_schema_call.t                 
SET search_path TO public:
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 1&#39;
ok 1 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 2&#39;
ok 2 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 3&#39;
ok 3 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 4&#39;
ok 4 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 5&#39;
ok 5 - The object isa DBIx::Class::Row
INSERT INTO this_schema.item_values &#40; item&#41; VALUES &#40; ? &#41;: &#39;Item 6&#39;
ok 6 - The object isa DBIx::Class::Row
ok 7 - The object isa DBIx::Class::ResultSet
SET search_path TO public:
SELECT me.item, me.secondary FROM this_schema.item_values me WHERE &#40;
item = ? &#41;: &#39;Item 5&#39;
ok 8 - search on resultset OK
UPDATE item_values SET secondary = ? WHERE &#40; item = ? &#41;: &#39;1&#39;, &#39;Item 5&#39;
DBI Exception: DBD::Pg::st execute failed: ERROR:  relation
&#34;item_values&#34; does not exist
LINE 1: UPDATE item_values SET secondary = $1 WHERE &#40; item = $2 &#41;
               ^ [for Statement &#34;UPDATE item_values SET secondary = ?
WHERE &#40; item = ? &#41;&#34; with ParamValues: 1=&#39;1&#39;, 2=&#39;Item 5&#39;] at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Schema.pm
line 1101.
    DBIx::Class::Schema::throw_exception&#40;&#39;Test::Schema=HASH&#40;0x3439cc0&#41;&#39;,
&#39;DBI Exception: DBD::Pg::st execute failed: ERROR:  relation &#34;...&#39;&#41;
called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage.pm
line 112
   
DBIx::Class::Storage::throw_exception&#40;&#39;DBIx::Class::Storage::DBI::Pg=HASH&#40;0x3c94eb8&#41;&#39;,
&#39;DBI Exception: DBD::Pg::st execute failed: ERROR:  relation &#34;...&#39;&#41;
called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/DBI.pm
line 1315
    DBIx::Class::Storage::DBI::__ANON__&#40;&#39;DBD::Pg::st execute failed:
ERROR:  relation &#34;item_values&#34; do...&#39;, &#39;DBI::st=HASH&#40;0x3cf0130&#41;&#39;, undef&#41;
called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/DBI.pm
line 1644
   
DBIx::Class::Storage::DBI::_dbh_execute&#40;&#39;DBIx::Class::Storage::DBI::Pg=HASH&#40;0x3c94eb8&#41;&#39;,
&#39;DBI::db=HASH&#40;0x3ce2cd8&#41;&#39;, &#39;UPDATE item_values SET secondary = ? WHERE &#40;
item = ? &#41;&#39;, &#39;ARRAY&#40;0x3ce0270&#41;&#39;, &#39;ARRAY&#40;0x3cef9e0&#41;&#39;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/DBI.pm
line 799
    DBIx::Class::Storage::DBI::__ANON__&#40;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/BlockRunner.pm
line 137
    DBIx::Class::Storage::BlockRunner::__ANON__&#40;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/Try/Tiny.pm
line 71
    eval {...} called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/Try/Tiny.pm
line 67
    Try::Tiny::try&#40;&#39;CODE&#40;0x3cefa88&#41;&#39;, &#39;Try::Tiny::Catch=REF&#40;0x3ce09d8&#41;&#39;&#41;
called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/BlockRunner.pm
line 141
    DBIx::Class::Storage::BlockRunner::__ANON__&#40;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/Context/Preserve.pm
line 42
    Context::Preserve::preserve_context&#40;&#39;CODE&#40;0x3c949f0&#41;&#39;, &#39;replace&#39;,
&#39;CODE&#40;0x3cefff8&#41;&#39;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/BlockRunner.pm
line 219
   
DBIx::Class::Storage::BlockRunner::_run&#40;&#39;DBIx::Class::Storage::BlockRunner=HASH&#40;0x3c90fa8&#41;&#39;&#41;
called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/BlockRunner.pm
line 110
   
DBIx::Class::Storage::BlockRunner::run&#40;&#39;DBIx::Class::Storage::BlockRunner=HASH&#40;0x3c90fa8&#41;&#39;&#41;
called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/DBI.pm
line 802
    DBIx::Class::Storage::DBI::dbh_do&#40;undef, undef, &#39;UPDATE item_values
SET secondary = ? WHERE &#40; item = ? &#41;&#39;, &#39;ARRAY&#40;0x3ce0270&#41;&#39;,
&#39;ARRAY&#40;0x3cef9e0&#41;&#39;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/DBI.pm
line 1609
   
DBIx::Class::Storage::DBI::_execute&#40;&#39;DBIx::Class::Storage::DBI::Pg=HASH&#40;0x3c94eb8&#41;&#39;,
&#39;update&#39;, &#39;DBIx::Class::ResultSource::Table=HASH&#40;0x3c94f48&#41;&#39;,
&#39;HASH&#40;0x3cd7310&#41;&#39;, &#39;HASH&#40;0x3439d20&#41;&#39;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/Storage/DBI.pm
line 2125
   
DBIx::Class::Storage::DBI::update&#40;&#39;DBIx::Class::Storage::DBI::Pg=HASH&#40;0x3c94eb8&#41;&#39;,
&#39;DBIx::Class::ResultSource::Table=HASH&#40;0x3c94f48&#41;&#39;, &#39;HASH&#40;0x3cd7310&#41;&#39;,
&#39;HASH&#40;0x3439d20&#41;&#39;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/ResultSet.pm
line 1775
   
DBIx::Class::ResultSet::_rs_update_delete&#40;&#39;DBIx::Class::ResultSet=HASH&#40;0x3c91278&#41;&#39;,
&#39;update&#39;, &#39;HASH&#40;0x3cd7310&#41;&#39;&#41; called at
/home/larry/perl5/perlbrew/perls/perl-5.14.2/lib/site_perl/5.14.2/DBIx/Class/ResultSet.pm
line 1913
   
DBIx::Class::ResultSet::update&#40;&#39;DBIx::Class::ResultSet=HASH&#40;0x3c91278&#41;&#39;,
&#39;HASH&#40;0x3cd7310&#41;&#39;&#41; called at ./t/update_schema_call.t line 64
# Tests were run but no plan was declared and done_testing&#40;&#41; was not seen.

with kind regards,
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> test.tbz2</td>
  </tr>
</table>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Create even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Oct&nbsp;04&nbsp;20:15:58&nbsp;2012</span>
    <span class="description">Josh.Arenberg [...] morganstanley.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 5 Oct 2012 00:15:41 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Arenberg, Josh&#34; &lt;Josh.Arenberg [...] morganstanley.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Using dbic 0.08198 on Linux DB2 with Perl 5.8.



It seems that the delete&#40;&#41; method is dropping the schema names from the queries in certain cases. Examples below:



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ ResourceID =&gt; 54821 }&#41;-&gt;first&#40;&#41;;

SELECT me.ResourceID, me.ResourceTypeID, me.AvailableAsOfDate, me.CreatedBy, me.CreatedDate, me.Subpool

  FROM resourcepool.Resources me

WHERE ResourceID = &#39;54821&#39;



Good



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ ResourceID =&gt; 54821 }&#41;-&gt;delete&#40;&#41;;

DELETE FROM Resources

WHERE ResourceID = &#39;54821&#39;



BAD! No schema name &#40; db2 error &#41;.



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54821 }&#41;-&gt;delete_all&#40;&#41;;

SELECT me.ResourceID, me.ResourceTypeID, me.AvailableAsOfDate, me.CreatedBy, me.CreatedDate, me.Subpool

  FROM resourcepool.Resources me

WHERE ResourceID = &#39;54821&#39;

DELETE FROM resourcepool.Resources

WHERE ResourceID = &#39;54821&#39;



Works, but redundant &#40; db2 already does the cascade for us &#41;. Also incredibly slow at scale &#40; we&#39;re deleting thousands of records often, and delete_all will go one row at a time &#41;.



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54821 }, { prefetch =&gt; &#39;NASShare&#39; }&#41;-&gt;delete&#40;&#41;;

DELETE FROM resourcepool.Resources

WHERE ResourceID IN &#40;

    SELECT me.ResourceID

      FROM resourcepool.Resources me

    WHERE me.ResourceID = &#39;54821&#39;

   &#41;



Succeeds!



But it&#39;s gotta be a prefetch. This fails because it&#39;s missing the schema name:



$schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54822 }, { join =&gt; &#39;NASShare&#39; }&#41;-&gt;delete&#40;&#41;;

DELETE FROM Resources

WHERE ResourceID = &#39;54822&#39;





But this doesn&#39;t:



$schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54822 }, { prefetch =&gt; &#39;NASShare&#39; }&#41;-&gt;delete&#40;&#41;;

DELETE FROM resourcepool.Resources

WHERE ResourceID IN &#40;

    SELECT me.ResourceID

      FROM resourcepool.Resources me

    WHERE ResourceID = &#39;54822&#39;

   &#41;

Please let me know if I can provide any more details or help in any way, and thanks for your time.
Josh

--------------------------------------------------------------------------
NOTICE: Morgan Stanley is not acting as a municipal advisor and the opinions or views contained herein are not intended to be, and do not constitute, advice within the meaning of Section 975 of the Dodd-Frank Wall Street Reform and Consumer Protection Act. If you have received this communication in error, please destroy all electronic and paper copies and notify the sender immediately. Mistransmission is not intended to waive confidentiality or privilege. Morgan Stanley reserves the right, to the extent permitted under applicable law, to monitor electronic communications. This message is subject to terms available at the following link: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.morganstanley.com/disclaimers">http://www.morganstanley.com/disclaimers</a></span>. If you cannot access these links, please notify us by reply message and we will send the contents to you. By messaging with Morgan Stanley you consent to the foregoing.
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;05&nbsp;03:44:44&nbsp;2012</span>
    <span class="description">abraxxa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">As far as I know DBIC doesn&#39;t provide a way to specify any kind of schema name. 
Different databases use &#39;schema&#39; for different things.
Please tell us how you&#39;ve specified the DB2 schema name.
For Oracle I&#39;ve prefixed all tables names but switched to issuing an alter session 
statement on connect to make my DBIC schema cross RDBMS compatible.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;05&nbsp;03:44:47&nbsp;2012</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;05&nbsp;08:51:29&nbsp;2012</span>
    <span class="description">Josh.Arenberg [...] morganstanley.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #80015] AutoReply: Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 5 Oct 2012 12:51:16 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Arenberg, Josh&#34; &lt;Josh.Arenberg [...] morganstanley.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">It&#39;s just defined as part of the table name. We  do this:  __PACKAGE__-&gt;table&#40;&#34;resourcepool.Resources&#34;&#41; in the Schema::Result classes.

I did notice this &#34;gross hack&#34; in the ResultSet code, seems like it could be responsible for stripping the leading portion of the table name, thinking it&#39;s an alias:

# if no subquery - life is easy-ish
  unless &#40;
    $needs_group_by_subq
      or
    keys %$relation_classifications # if any joins at all - need to wrap a subq
      or
    $self-&gt;_has_resolved_attr&#40;qw/rows offset/&#41; # limits call for a subq
  &#41; {
    # Most databases do not allow aliasing of tables in UPDATE/DELETE. Thus
    # a condition containing &#39;me&#39; or other table prefixes will not work
    # at all. Tell SQLMaker to dequalify idents via a gross hack.
    my $sqla = $rsrc-&gt;storage-&gt;sql_maker;
    local $sqla-&gt;{_dequalify_idents} = 1;
    return $rsrc-&gt;storage-&gt;$op&#40;
      $rsrc,
      $op eq &#39;update&#39; ? $values : &#40;&#41;,
      $self-&gt;{cond},
    &#41;;
  }

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Bugs in DBIx-Class via RT [mailto:bug-DBIx-Class@rt.cpan.org] 
Sent: Thursday, October 04, 2012 8:16 PM
To: Arenberg, Josh &#40;Enterprise Infrastructure&#41;
Subject: [rt.cpan.org #80015] AutoReply: Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41; 


Greetings,

This message has been automatically generated in response to the
creation of a trouble ticket regarding:
        &#34;Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41;&#34;, 
a summary of which appears below.

There is no need to reply to this message right now.  Your ticket has been
assigned an ID of [rt.cpan.org #80015].  Your ticket is accessible
on the web at:

    <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80015">https://rt.cpan.org/Ticket/Display.html?id=80015</a></span>

Please include the string:

         [rt.cpan.org #80015]

in the subject line of all future correspondence about this issue. To do so, 
you may reply to this message.

                        Thank you,
                        bug-DBIx-Class@rt.cpan.org

-------------------------------------------------------------------------
Using dbic 0.08198 on Linux DB2 with Perl 5.8.



It seems that the delete&#40;&#41; method is dropping the schema names from the queries in certain cases. Examples below:



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ ResourceID =&gt; 54821 }&#41;-&gt;first&#40;&#41;;

SELECT me.ResourceID, me.ResourceTypeID, me.AvailableAsOfDate, me.CreatedBy, me.CreatedDate, me.Subpool

  FROM resourcepool.Resources me

WHERE ResourceID = &#39;54821&#39;



Good



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ ResourceID =&gt; 54821 }&#41;-&gt;delete&#40;&#41;;

DELETE FROM Resources

WHERE ResourceID = &#39;54821&#39;



BAD! No schema name &#40; db2 error &#41;.



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54821 }&#41;-&gt;delete_all&#40;&#41;;

SELECT me.ResourceID, me.ResourceTypeID, me.AvailableAsOfDate, me.CreatedBy, me.CreatedDate, me.Subpool

  FROM resourcepool.Resources me

WHERE ResourceID = &#39;54821&#39;

DELETE FROM resourcepool.Resources

WHERE ResourceID = &#39;54821&#39;



Works, but redundant &#40; db2 already does the cascade for us &#41;. Also incredibly slow at scale &#40; we&#39;re deleting thousands of records often, and delete_all will go one row at a time &#41;.



$  $schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54821 }, { prefetch =&gt; &#39;NASShare&#39; }&#41;-&gt;delete&#40;&#41;;

DELETE FROM resourcepool.Resources

WHERE ResourceID IN &#40;

    SELECT me.ResourceID

      FROM resourcepool.Resources me

    WHERE me.ResourceID = &#39;54821&#39;

   &#41;



Succeeds!



But it&#39;s gotta be a prefetch. This fails because it&#39;s missing the schema name:



$schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54822 }, { join =&gt; &#39;NASShare&#39; }&#41;-&gt;delete&#40;&#41;;

DELETE FROM Resources

WHERE ResourceID = &#39;54822&#39;





But this doesn&#39;t:



$schema-&gt;resultset&#40;&#34;Resource&#34;&#41;-&gt;search&#40;{ &#39;ResourceID&#39; =&gt; 54822 }, { prefetch =&gt; &#39;NASShare&#39; }&#41;-&gt;delete&#40;&#41;;

DELETE FROM resourcepool.Resources

WHERE ResourceID IN &#40;

    SELECT me.ResourceID

      FROM resourcepool.Resources me

    WHERE ResourceID = &#39;54822&#39;

   &#41;

Please let me know if I can provide any more details or help in any way, and thanks for your time.
Josh

--------------------------------------------------------------------------
NOTICE: Morgan Stanley is not acting as a municipal advisor and the opinions or views contained herein are not intended to be, and do not constitute, advice within the meaning of Section 975 of the Dodd-Frank Wall Street Reform and Consumer Protection Act. If you have received this communication in error, please destroy all electronic and paper copies and notify the sender immediately. Mistransmission is not intended to waive confidentiality or privilege. Morgan Stanley reserves the right, to the extent permitted under applicable law, to monitor electronic communications. This message is subject to terms available at the following link: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.morganstanley.com/disclaimers">http://www.morganstanley.com/disclaimers</a></span>. If you cannot access these links, please notify us by reply message and we will send the contents to you. By messaging with Morgan Stanley you consent to the foregoing.


--------------------------------------------------------------------------
NOTICE: Morgan Stanley is not acting as a municipal advisor and the opinions or views contained herein are not intended to be, and do not constitute, advice within the meaning of Section 975 of the Dodd-Frank Wall Street Reform and Consumer Protection Act. If you have received this communication in error, please destroy all electronic and paper copies and notify the sender immediately. Mistransmission is not intended to waive confidentiality or privilege. Morgan Stanley reserves the right, to the extent permitted under applicable law, to monitor electronic communications. This message is subject to terms available at the following link: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.morganstanley.com/disclaimers">http://www.morganstanley.com/disclaimers</a></span>. If you cannot access these links, please notify us by reply message and we will send the contents to you. By messaging with Morgan Stanley you consent to the foregoing.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;05&nbsp;14:35:24&nbsp;2012</span>
    <span class="description">abraxxa [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">That&#39;s what I did before using the alter session statement.
Can you work around it by also using an alter session or DB2 equivalent statement while 
we look into a fix?
That will also enable you to use your schema for easy testing with SQLite which was my 
case for not prefixing all table names.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Oct&nbsp;05&nbsp;17:11:54&nbsp;2012</span>
    <span class="description">Josh.Arenberg [...] morganstanley.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #80015] Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41; </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 5 Oct 2012 21:11:40 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-DBIx-Class [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Arenberg, Josh&#34; &lt;Josh.Arenberg [...] morganstanley.com&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes, I actually got this working today.  There is a &#39;set schema&#39; call in db2 that does just that, which I wasn&#39;t previously aware of.

Thanks again for the suggestion.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Alexander Hartmaier via RT [mailto:bug-DBIx-Class@rt.cpan.org] 
Sent: Friday, October 05, 2012 2:35 PM
To: Arenberg, Josh &#40;Enterprise Infrastructure&#41;
Subject: [rt.cpan.org #80015] Bug with resultset delete&#40;&#41; on db2 &#40; dropping schema names from database &#41; 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=80015">https://rt.cpan.org/Ticket/Display.html?id=80015</a></span> &gt;

That&#39;s what I did before using the alter session statement.
Can you work around it by also using an alter session or DB2 equivalent statement while 
we look into a fix?
That will also enable you to use your schema for easy testing with SQLite which was my 
case for not prefixing all table names.

--------------------------------------------------------------------------
NOTICE: Morgan Stanley is not acting as a municipal advisor and the opinions or views contained herein are not intended to be, and do not constitute, advice within the meaning of Section 975 of the Dodd-Frank Wall Street Reform and Consumer Protection Act. If you have received this communication in error, please destroy all electronic and paper copies and notify the sender immediately. Mistransmission is not intended to waive confidentiality or privilege. Morgan Stanley reserves the right, to the extent permitted under applicable law, to monitor electronic communications. This message is subject to terms available at the following link: <span class="clickylink"><a target="new" rel="nofollow" href="http://www.morganstanley.com/disclaimers">http://www.morganstanley.com/disclaimers</a></span>. If you cannot access these links, please notify us by reply message and we will send the contents to you. By messaging with Morgan Stanley you consent to the foregoing.
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;03&nbsp;13:39:33&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io - Ticket #78844:  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Merging with identical ticket
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;03&nbsp;13:39:34&nbsp;2012</span>
    <span class="description">The RT System itself - Ticket #78844:  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;03&nbsp;13:39:34&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io - Ticket #78844:  Merged into ticket #80015</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction links AddLink odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sat&nbsp;Nov&nbsp;03&nbsp;13:39:34&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Merged into ticket #80015</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;19&nbsp;02:53:22&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Oct 04 20:15:58 2012, Josh.Arenberg@morganstanley.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; It seems that the delete&#40;&#41; method is dropping the schema names from
&gt;    the queries in certain cases. Examples below:
</div>
Please test and let us know if branch rt/80015 [1] solves your issue.

[1] <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/dbsrgits/DBIx-Class/tree/rt/80015">https://github.com/dbsrgits/DBIx-Class/tree/rt/80015</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;21&nbsp;09:40:27&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fix dropped in master
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;21&nbsp;09:40:32&nbsp;2012</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;23&nbsp;07:00:37&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;23&nbsp;07:00:38&nbsp;2013</span>
    <span class="description">ribasushi [...] leporine.io -  Fixed in 0.08205 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
