<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #78656 for Time-HiRes: Patch: OSX clock_getres&#40;&#41; and clock_gettime&#40;&#41; support</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #78656 for Time-HiRes: Patch: OSX clock_getres&#40;&#41; and clock_gettime&#40;&#41; support</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Time-HiRes">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Time-HiRes">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Time-HiRes">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Time-HiRes">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Time-HiRes">Time-HiRes CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">78656</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Time-HiRes">Time-HiRes</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
RCAPUTO [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33448-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-33449-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




0001-OS-X-clock_gettime-and-clock_getres-emulation.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1584312/846637/0001-OS-X-clock_gettime-and-clock_getres-emulation.patch">
Thu Jan 14 22:20:56 2016 (6.3k) by JHI [...] cpan.org
</a>
</font></li>
</ul>


0002-OS-X-clock_nanosleep-emulation.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1584312/846638/0002-OS-X-clock_nanosleep-emulation.patch">
Thu Jan 14 22:20:56 2016 (3.6k) by JHI [...] cpan.org
</a>
</font></li>
</ul>


0003-Warning-on-the-clock_getres-results.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1584312/846639/0003-Warning-on-the-clock_getres-results.patch">
Thu Jan 14 22:20:56 2016 (1.1k) by JHI [...] cpan.org
</a>
</font></li>
</ul>


macos-clock-monotonic.diff<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/1104010/580452/macos-clock-monotonic.diff">
Mon Jul 30 02:18:42 2012 (1.7k) by RCAPUTO [...] cpan.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=78656">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1104010" href="/Public/Bug/Display.html?id=78656#txn-1104010">#</a>      
    </span>
    <span class="date">Mon&nbsp;Jul&nbsp;30&nbsp;02:18:42&nbsp;2012</span>
    <span class="description">RCAPUTO [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Patch: OSX clock_getres&#40;&#41; and clock_gettime&#40;&#41; support</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1104010/580451/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/580451">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please find attached a patch that adds clock_getres&#40;&#41; and clock_gettime&#40;&#41; support for Mac OSX.  CLOCK_MONOTONIC is properly 
supported, and CLOCK_REALTIME is implemented in terms of gettimeofday&#40;&#41;.

The existing tests pass.

% prove -Ilib -Iblib/lib -Iblib/arch            
t/alarm.t ......... ok     
t/clock.t ......... ok   
t/gettimeofday.t .. ok   
t/itimer.t ........ ok   
t/nanosleep.t ..... ok   
t/sleep.t ......... ok   
t/stat.t .......... ok     
t/time.t .......... ok   
t/tv_interval.t ... ok   
t/ualarm.t ........ ok     
t/usleep.t ........ ok   
All tests successful.
Files=11, Tests=68, 26 wallclock secs &#40; 0.10 usr  0.05 sys + 14.34 cusr  0.21 csys = 14.70 CPU&#41;
Result: PASS

1&#41; macbook-wifki:~/projects/misc/3rd-party-projects/Time-HiRes-1.9725-patched% prove -Ilib -Iblib/lib -Iblib/arch -v 
t/clock.tt/clock.t .. 
1..5
# I am the main process 62659, starting the watchdog process...
# The watchdog process 62660 launched, continuing testing...
# I am the watchdog process 62660, sleeping for 360 seconds...
ok 1 - require Time::HiRes;
# have_clock_gettime   = 1
# have_clock_getres    = 1
# have_clock_nanosleep = 0
# have_clock           = 1
# CLOCK_REALTIME: try = 1
# t1 = 1343628900.29546, t0 = 1343628898.29596
# dt = 1.9995002746582, rt = 0.333000183105469
ok 2
ok 3
ok 4 # skip no clock_nanosleep
# clock = 0.047162
# clock = 0.047162 0.120666
# clock = 0.047162 0.120666 0.192792
# clock = 0.047162 0.120666 0.192792 0.264973
ok 5
# I am the main process 62659, terminating the watchdog process 62660 before it terminates me in 358 seconds &#40;testing took 2 
seconds&#41;.
# kill KILL 62660 = 1
# All done.
ok
All tests successful.
Files=1, Tests=5,  2 wallclock secs &#40; 0.03 usr  0.01 sys +  0.25 cusr  0.01 csys =  0.30 CPU&#41;
Result: PASS
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> macos-clock-monotonic.diff</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1104010/580452/macos-clock-monotonic.diff">Download macos-clock-monotonic.diff</a><br />
<span class="downloadcontenttype">text/x-diff 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">diff -rN Time-HiRes-1.9725/HiRes.xs Time-HiRes-1.9725-patched/HiRes.xs
42a43,44
&gt; #include &#34;clock_emu.h&#34;
&gt; 
diff -rN Time-HiRes-1.9725/Makefile.PL Time-HiRes-1.9725-patched/Makefile.PL
308a309
&gt; #include &#34;clock_emu.h&#34;
536,538c537
&lt;     if &#40;exists $Config{d_clock_gettime}&#41; {
&lt;         $has_clock_gettime++ if $Config{d_clock_gettime}; # Unlikely...
&lt;     } elsif &#40;has_clock_xxx&#40;&#39;gettime&#39;&#41;&#41; {
---
&gt;     if &#40;has_clock_xxx&#40;&#39;gettime&#39;&#41;&#41; {
540a540,541
&gt;     } elsif &#40;exists $Config{d_clock_gettime}&#41; {
&gt;         $has_clock_gettime++ if $Config{d_clock_gettime}; # Unlikely...
diff -rN Time-HiRes-1.9725/clock_emu.h Time-HiRes-1.9725-patched/clock_emu.h
0a1,49
&gt; #ifndef __CLOCK_EMU_H__
&gt; 
&gt; // MacOS X has a monotonic clock, but it&#39;s not POSIX.
&gt; 
&gt; #  if defined&#40;__APPLE__&#41;
&gt; 
&gt; #    include &lt;sys/time.h&gt;
&gt; #    include &lt;mach/mach_time.h&gt;
&gt; 
&gt; #    define CLOCK_REALTIME  0x01
&gt; #    define CLOCK_MONOTONIC 0x02
&gt; 
&gt; static uint64_t monotonic_timebase_factor = 0;
&gt; 
&gt; int clock_gettime&#40;int clock_id, struct timespec *ts&#41; {
&gt; 	switch &#40;clock_id&#41; {
&gt; 		case CLOCK_REALTIME:
&gt; 			// Cheezy hack?  What would be better?
&gt; 			return gettimeofday&#40;ts, NULL&#41;;
&gt; 
&gt; 		case CLOCK_MONOTONIC:
&gt; 			if &#40;monotonic_timebase_factor == 0&#41; {
&gt;         mach_timebase_info_data_t timebase_info;
&gt;         &#40;void&#41;mach_timebase_info&#40;&#38;timebase_info&#41;;
&gt;         monotonic_timebase_factor = timebase_info.numer / timebase_info.denom;
&gt; 			}
&gt; 
&gt; 			uint64_t monotonic_nanoseconds = &#40;
&gt; 				mach_absolute_time&#40;&#41; * monotonic_timebase_factor
&gt; 			&#41;;
&gt; 
&gt; 			ts-&gt;tv_sec  = monotonic_nanoseconds / 1E9;
&gt; 			ts-&gt;tv_nsec = monotonic_nanoseconds - ts-&gt;tv_sec;
&gt; 			return 0;
&gt; 
&gt; 		default:
&gt; 			return -1;
&gt; 	}
&gt; }
&gt; 
&gt; int clock_getres&#40;int clock_id, struct timespec *ts&#41; {
&gt; 	ts-&gt;tv_sec  = 0;
&gt; 	ts-&gt;tv_nsec = 1;
&gt; 	return 0;
&gt; }
&gt; 
&gt; #  endif
&gt; 
&gt; #endif
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1185713" href="/Public/Bug/Display.html?id=78656#txn-1185713">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;00:01:53&nbsp;2013</span>
    <span class="description">sri [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1185713/625488/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/625488">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 39b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I would love to see this patch applied.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1185716" href="/Public/Bug/Display.html?id=78656#txn-1185716">#</a>      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;26&nbsp;00:01:55&nbsp;2013</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1193619" href="/Public/Bug/Display.html?id=78656#txn-1193619">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;21&nbsp;21:36:16&nbsp;2013</span>
    <span class="description">sri [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1193619/629857/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/629857">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 124b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">There is now also a planned Mojolicious feature waiting for this patch to be applied. <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/kraih/mojo/pull/469">https://github.com/kraih/mojo/pull/469</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1195649" href="/Public/Bug/Display.html?id=78656#txn-1195649">#</a>      
    </span>
    <span class="date">Thu&nbsp;Mar&nbsp;28&nbsp;09:12:35&nbsp;2013</span>
    <span class="description">zefram [...] fysh.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #78656] Patch: OSX clock_getres&#40;&#41; and clock_gettime&#40;&#41; support</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 28 Mar 2013 13:12:22 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Rocco Caputo via RT &lt;bug-Time-HiRes [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Zefram &lt;zefram [...] fysh.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1195649/630990/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/630990">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">First, sorry about the delay in looking at this.  I was out of action
for some months for medical reasons, starting roughly when you submitted
this patch, and I still haven&#39;t fully resumed CPAN activities.

Rocco Caputo via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;Please find attached a patch that adds clock_getres&#40;&#41; and clock_gettime&#40;&#41; support for Mac OSX.  CLOCK_MONOTONIC is properly 
&gt;supported, and CLOCK_REALTIME is implemented in terms of gettimeofday&#40;&#41;.
</div>
Thanks.  I&#39;m fine with the intent of this patch, but I believe I see some
bugs that need fixing.  You mix up struct timeval and struct timespec
in the gettimeofday&#40;&#41; call.  Your splitting of the monotonic ns count
into s and ns looks wrong: presumably there should be a multiplication
of the seconds by 1e9 for the subtraction.  The 1e9 constant probably
ought to be an integer literal, rather than the present floating point.

It would help if you could work on these problems and submit a revised
patch, as I don&#39;t have an OS X to test on.  You&#39;ll need to apply the
kind of tests that aren&#39;t amenable to automation: things like reading
a clock repeatedly in a tight loop and checking that the readings are
spaced with reasonable consistency.

-zefram
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1584312" href="/Public/Bug/Display.html?id=78656#txn-1584312">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jan&nbsp;14&nbsp;22:20:56&nbsp;2016</span>
    <span class="description">JHI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1584312/846636/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/846636">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 452b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Please find attached three patches.  They implement the clock_getres&#40;&#41; and clock_gettime&#40;&#41; emulations for OSX, and while I was in the neighborhood, also clock_nanosleep&#40;&#41;.  Not perfectly, but should be close enough.  The patches were written from scratch.

Tested to work on OSX, without and with threads &#40;note that they introduce a mutex, only in OSX, for certain initialization stuff&#41;, and not to break things in a few Linux/BSD/Solaris/other boxes.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0001-OS-X-clock_gettime-and-clock_getres-emulation.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1584312/846637/0001-OS-X-clock_gettime-and-clock_getres-emulation.patch">Download 0001-OS-X-clock_gettime-and-clock_getres-emulation.patch</a><br />
<span class="downloadcontenttype">text/x-diff 6.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 2e136bd591cc68f15a816932a5084896208c4dfd Mon Sep 17 00:00:00 2001
From: Jarkko Hietaniemi &lt;jhi@iki.fi&gt;
Date: Thu, 14 Jan 2016 08:06:26 -0500
Subject: [PATCH 1/3] OS X clock_gettime&#40;&#41; and clock_getres&#40;&#41; emulation

Note that CLOCK_REALTIME and CLOCK_MONOTONIC are the same clock,
so both are monotonic.

The difference is that the CLOCK_REALTIME is offset by the
gettimeofday&#40;&#41; result on the first use of these interfaces,
and thereafter will closely track the gettimeofday&#40;&#41; values.

<span class="clickylink"><a target="new" rel="nofollow" href="https://developer.apple.com/library/mac/qa/qa1398/_index.html">https://developer.apple.com/library/mac/qa/qa1398/_index.html</a></span>
&#34;Mach Absolute Time Units&#34;
---
 cpan/Time-HiRes/HiRes.xs    | 97 +++++++++++++++++++++++++++++++++++++++++++++
 cpan/Time-HiRes/Makefile.PL | 22 +++++++++-
 2 files changed, 118 insertions&#40;+&#41;, 1 deletion&#40;-&#41;

diff --git a/cpan/Time-HiRes/HiRes.xs b/cpan/Time-HiRes/HiRes.xs
index a4cece2..8b39dfd 100644
--- a/cpan/Time-HiRes/HiRes.xs
+++ b/cpan/Time-HiRes/HiRes.xs
@@ -759,6 +759,103 @@ hrstatns&#40;UV *atime_nsec, UV *mtime_nsec, UV *ctime_nsec&#41;
 #endif /* !TIME_HIRES_STAT */
 }
 
+/* Until Apple implements clock_gettime&#40;&#41; &#40;ditto clock_getres&#40;&#41;&#41;
+ * we will emulate it using Mach interfaces. */
+#if defined&#40;PERL_DARWIN&#41; &#38;&#38; !defined&#40;CLOCK_REALTIME&#41;
+
+#  include &lt;mach/mach_time.h&gt;
+
+#  define CLOCK_REALTIME  0x01
+#  define CLOCK_MONOTONIC 0x02
+
+#  define TIMER_ABSTIME   0x01
+
+#ifdef USE_ITHREADS
+STATIC perl_mutex darwin_time_mutex;
+#endif
+
+static uint64_t absolute_time_init;
+static mach_timebase_info_data_t timebase_info;
+static struct timespec timespec_init;
+
+static int darwin_time_init&#40;&#41; {
+#ifdef USE_ITHREAD
+  PERL_MUTEX_LOCK&#40;&#38;darwin_time_mutex&#41;;
+#endif
+  struct timeval tv;
+  int success = 1;
+  if &#40;absolute_time_init == 0&#41; {
+    /* mach_absolute_time&#40;&#41; cannot fail */
+    absolute_time_init = mach_absolute_time&#40;&#41;;
+    success = mach_timebase_info&#40;&#38;timebase_info&#41; == KERN_SUCCESS;
+    if &#40;success&#41; {
+      success = gettimeofday&#40;&#38;tv, NULL&#41; == 0;
+      if &#40;success&#41; {
+        timespec_init.tv_sec  = tv.tv_sec;
+        timespec_init.tv_nsec = tv.tv_usec * 1000;
+      }
+    }
+  }
+#ifdef USE_ITHREAD
+  PERL_MUTEX_UNLOCK&#40;&#38;darwin_time_mutex&#41;;
+#endif
+  return success;
+}
+
+static int clock_gettime&#40;int clock_id, struct timespec *ts&#41; {
+  if &#40;darwin_time_init&#40;&#41; &#38;&#38; timebase_info.denom&#41; {
+    switch &#40;clock_id&#41; {
+      case CLOCK_REALTIME:
+      {
+	uint64_t nanos =
+	  &#40;&#40;mach_absolute_time&#40;&#41; - absolute_time_init&#41; *
+	   &#40;uint64_t&#41;timebase_info.numer&#41; / &#40;uint64_t&#41;timebase_info.denom;
+	ts-&gt;tv_sec  = timespec_init.tv_sec  + nanos / IV_1E9;
+	ts-&gt;tv_nsec = timespec_init.tv_nsec + nanos % IV_1E9;
+	return 0;
+      }
+
+      case CLOCK_MONOTONIC:
+      {
+	uint64_t nanos =
+	  &#40;mach_absolute_time&#40;&#41; *
+	   &#40;uint64_t&#41;timebase_info.numer&#41; / &#40;uint64_t&#41;timebase_info.denom;
+	ts-&gt;tv_sec  = nanos / IV_1E9;
+	ts-&gt;tv_nsec = nanos - ts-&gt;tv_sec * IV_1E9;
+	return 0;
+      }
+
+      default:
+	break;
+    }
+  }
+
+  SETERRNO&#40;EINVAL, LIB_INVARG&#41;;
+  return -1;
+}
+
+static int clock_getres&#40;int clock_id, struct timespec *ts&#41; {
+  if &#40;darwin_time_init&#40;&#41; &#38;&#38; timebase_info.denom&#41; {
+    switch &#40;clock_id&#41; {
+      case CLOCK_REALTIME:
+      case CLOCK_MONOTONIC:
+      ts-&gt;tv_sec  = 0;
+      /* In newer kernels both the numer and denom are one,
+       * resulting in conversion factor of one, which is of
+       * course unrealistic. */
+      ts-&gt;tv_nsec = timebase_info.numer / timebase_info.denom;
+      return 0;
+    default:
+      break;
+    }
+  }
+
+  SETERRNO&#40;EINVAL, LIB_INVARG&#41;;
+  return -1;
+}
+
+#endif /* PERL_DARWIN */
+
 #include &#34;const-c.inc&#34;
 
 MODULE = Time::HiRes            PACKAGE = Time::HiRes
diff --git a/cpan/Time-HiRes/Makefile.PL b/cpan/Time-HiRes/Makefile.PL
index bbdd7a7..d1647fe 100644
--- a/cpan/Time-HiRes/Makefile.PL
+++ b/cpan/Time-HiRes/Makefile.PL
@@ -536,6 +536,7 @@ EOD
 
     print &#34;Looking for clock_gettime&#40;&#41;... &#34;;
     my $has_clock_gettime;
+    my $has_clock_gettime_emulation;
     if &#40;exists $Config{d_clock_gettime}&#41; {
         $has_clock_gettime++ if $Config{d_clock_gettime}; # Unlikely...
     } elsif &#40;has_clock_xxx&#40;&#39;gettime&#39;&#41;&#41; {
@@ -544,11 +545,17 @@ EOD
     } elsif &#40;defined $SYSCALL_H &#38;&#38; has_clock_xxx_syscall&#40;&#39;gettime&#39;&#41;&#41; {
         $has_clock_gettime++;
 	$DEFINE .= &#39; -DTIME_HIRES_CLOCK_GETTIME -DTIME_HIRES_CLOCK_GETTIME_SYSCALL&#39;;
+    } elsif &#40;$^O eq &#39;darwin&#39;&#41; {
+       $has_clock_gettime_emulation++;
+       $has_clock_gettime++;
+       $DEFINE .= &#39; -DTIME_HIRES_CLOCK_GETTIME&#39;;
     }
 
     if &#40;$has_clock_gettime&#41; {
         if &#40;$DEFINE =~ /-DTIME_HIRES_CLOCK_GETTIME_SYSCALL/&#41; {
 	    print &#34;found &#40;via syscall&#41;.\n&#34;;
+	} elsif &#40;$has_clock_gettime_emulation&#41; {
+	    print &#34;found &#40;via emulation&#41;.\n&#34;;
 	} else {
 	    print &#34;found.\n&#34;;
 	}
@@ -558,6 +565,7 @@ EOD
 
     print &#34;Looking for clock_getres&#40;&#41;... &#34;;
     my $has_clock_getres;
+    my $has_clock_getres_emulation;
     if &#40;exists $Config{d_clock_getres}&#41; {
         $has_clock_getres++ if $Config{d_clock_getres}; # Unlikely...
     } elsif &#40;has_clock_xxx&#40;&#39;getres&#39;&#41;&#41; {
@@ -566,11 +574,17 @@ EOD
     } elsif &#40;defined $SYSCALL_H &#38;&#38; has_clock_xxx_syscall&#40;&#39;getres&#39;&#41;&#41; {
         $has_clock_getres++;
 	$DEFINE .= &#39; -DTIME_HIRES_CLOCK_GETRES -DTIME_HIRES_CLOCK_GETRES_SYSCALL&#39;;
+    } elsif &#40;$^O eq &#39;darwin&#39;&#41; {
+       $has_clock_getres_emulation++;
+       $has_clock_getres++;
+       $DEFINE .= &#39; -DTIME_HIRES_CLOCK_GETRES&#39;;
     }
 
     if &#40;$has_clock_getres&#41; {
         if &#40;$DEFINE =~ /-DTIME_HIRES_CLOCK_GETRES_SYSCALL/&#41; {
 	    print &#34;found &#40;via syscall&#41;.\n&#34;;
+	} elsif &#40;$has_clock_getres_emulation&#41; {
+	    print &#34;found &#40;via emulation&#41;.\n&#34;;
 	} else {
 	    print &#34;found.\n&#34;;
 	}
@@ -832,7 +846,7 @@ sub doConstants {
 		     d_nanosleep d_clock_gettime d_clock_getres
 		     d_clock d_clock_nanosleep d_hires_stat&#41;&#41; {
 	    my $macro = $_;
-	    if &#40;$macro =~ /^&#40;d_nanosleep|d_clock_gettime|d_clock_getres|d_clock|d_clock_nanosleep&#41;$/&#41; {
+	    if &#40;$macro =~ /^&#40;d_nanosleep|d_clock|d_clock_nanosleep&#41;$/&#41; {
 		$macro =~ s/^d_&#40;.+&#41;/TIME_HIRES_\U$1/;
 	    } elsif &#40;$macro =~ /^&#40;d_hires_stat&#41;$/&#41; {
 		my $d_hires_stat = 0;
@@ -840,6 +854,12 @@ sub doConstants {
 		push @names, {name =&gt; $_, macro =&gt; &#34;TIME_HIRES_STAT&#34;, value =&gt; $d_hires_stat,
 			      default =&gt; [&#34;IV&#34;, &#34;0&#34;]};
 		next;
+	    } elsif &#40;$macro =~ /^&#40;d_clock_gettime|d_clock_getres&#41;$/&#41; {
+		$macro =~ s/^d_&#40;.+&#41;/TIME_HIRES_\U$1/;
+		my $val = &#40;$DEFINE =~ /-D$macro\b/&#41; ? 1 : 0;
+		push @names, {name =&gt; $_, macro =&gt; $macro, value =&gt; $val,
+			      default =&gt; [&#34;IV&#34;, &#34;0&#34;]};
+		next;
 	    } else {
 		$macro =~ s/^d_&#40;.+&#41;/HAS_\U$1/;
 	    }
-- 
2.7.0

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0002-OS-X-clock_nanosleep-emulation.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1584312/846638/0002-OS-X-clock_nanosleep-emulation.patch">Download 0002-OS-X-clock_nanosleep-emulation.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 294d252078ecb71999397c6763f7ffdb4892a360 Mon Sep 17 00:00:00 2001
From: Jarkko Hietaniemi &lt;jhi@iki.fi&gt;
Date: Wed, 13 Jan 2016 21:47:44 -0500
Subject: [PATCH 2/3] OS X clock_nanosleep&#40;&#41; emulation

<span class="clickylink"><a target="new" rel="nofollow" href="https://developer.apple.com/library/ios/technotes/tn2169/_index.html">https://developer.apple.com/library/ios/technotes/tn2169/_index.html</a></span>
&#34;High Precision Timers in iOS / OS X&#34;

Returning the unspent time in the case of relative sleep is not implemented.
---
 cpan/Time-HiRes/HiRes.xs    | 38 ++++++++++++++++++++++++++++++++++++++
 cpan/Time-HiRes/Makefile.PL | 15 ++++++++++++---
 2 files changed, 50 insertions&#40;+&#41;, 3 deletions&#40;-&#41;

diff --git a/cpan/Time-HiRes/HiRes.xs b/cpan/Time-HiRes/HiRes.xs
index 8b39dfd..2efc018 100644
--- a/cpan/Time-HiRes/HiRes.xs
+++ b/cpan/Time-HiRes/HiRes.xs
@@ -854,6 +854,44 @@ static int clock_getres&#40;int clock_id, struct timespec *ts&#41; {
   return -1;
 }
 
+static int clock_nanosleep&#40;int clock_id, int flags,
+			   const struct timespec *rqtp,
+			   struct timespec *rmtp&#41; {
+  if &#40;darwin_time_init&#40;&#41;&#41; {
+    switch &#40;clock_id&#41; {
+    case CLOCK_REALTIME:
+    case CLOCK_MONOTONIC:
+      {
+	uint64_t nanos = rqtp-&gt;tv_sec * IV_1E9 + rqtp-&gt;tv_nsec;
+        int success;
+	if &#40;&#40;flags &#38; TIMER_ABSTIME&#41;&#41; {
+	  uint64_t back =
+	    timespec_init.tv_sec * IV_1E9 + timespec_init.tv_nsec;
+	  nanos = nanos &gt; back ? nanos - back : 0;
+	}
+        success =
+          mach_wait_until&#40;mach_absolute_time&#40;&#41; + nanos&#41; == KERN_SUCCESS;
+
+        /* In the relative sleep, the rmtp should be filled in with
+         * the &#39;unused&#39; part of the rqtp in case the sleep gets
+         * interrupted by a signal.  But it is unknown how signals
+         * interact with mach_wait_until&#40;&#41;.  In the absolute sleep,
+         * the rmtp should stay untouched. */
+        rmtp-&gt;tv_sec  = 0;
+        rmtp-&gt;tv_nsec = 0;
+
+        return success;
+      }
+
+    default:
+      break;
+    }
+  }
+
+  SETERRNO&#40;EINVAL, LIB_INVARG&#41;;
+  return -1;
+}
+
 #endif /* PERL_DARWIN */
 
 #include &#34;const-c.inc&#34;
diff --git a/cpan/Time-HiRes/Makefile.PL b/cpan/Time-HiRes/Makefile.PL
index d1647fe..a2d3b12 100644
--- a/cpan/Time-HiRes/Makefile.PL
+++ b/cpan/Time-HiRes/Makefile.PL
@@ -594,15 +594,24 @@ EOD
 
     print &#34;Looking for clock_nanosleep&#40;&#41;... &#34;;
     my $has_clock_nanosleep;
+    my $has_clock_nanosleep_emulation;
     if &#40;exists $Config{d_clock_nanosleep}&#41; {
         $has_clock_nanosleep++ if $Config{d_clock_nanosleep}; # Unlikely...
     } elsif &#40;has_clock_nanosleep&#40;&#41;&#41; {
         $has_clock_nanosleep++;
 	$DEFINE .= &#39; -DTIME_HIRES_CLOCK_NANOSLEEP&#39;;
+    } elsif &#40;$^O eq &#39;darwin&#39;&#41; {
+        $has_clock_nanosleep++;
+        $has_clock_nanosleep_emulation++;
+	$DEFINE .= &#39; -DTIME_HIRES_CLOCK_NANOSLEEP&#39;;
     }
 
     if &#40;$has_clock_nanosleep&#41; {
-        print &#34;found.\n&#34;;
+	if &#40;$has_clock_nanosleep_emulation&#41; {
+	    print &#34;found &#40;via emulation&#41;.\n&#34;;
+	} else {
+	    print &#34;found.\n&#34;;
+	}
     } else {
 	print &#34;NOT found.\n&#34;;
     }
@@ -846,7 +855,7 @@ sub doConstants {
 		     d_nanosleep d_clock_gettime d_clock_getres
 		     d_clock d_clock_nanosleep d_hires_stat&#41;&#41; {
 	    my $macro = $_;
-	    if &#40;$macro =~ /^&#40;d_nanosleep|d_clock|d_clock_nanosleep&#41;$/&#41; {
+	    if &#40;$macro =~ /^&#40;d_nanosleep|d_clock&#41;$/&#41; {
 		$macro =~ s/^d_&#40;.+&#41;/TIME_HIRES_\U$1/;
 	    } elsif &#40;$macro =~ /^&#40;d_hires_stat&#41;$/&#41; {
 		my $d_hires_stat = 0;
@@ -854,7 +863,7 @@ sub doConstants {
 		push @names, {name =&gt; $_, macro =&gt; &#34;TIME_HIRES_STAT&#34;, value =&gt; $d_hires_stat,
 			      default =&gt; [&#34;IV&#34;, &#34;0&#34;]};
 		next;
-	    } elsif &#40;$macro =~ /^&#40;d_clock_gettime|d_clock_getres&#41;$/&#41; {
+	    } elsif &#40;$macro =~ /^&#40;d_clock_gettime|d_clock_getres|d_clock_nanosleep&#41;$/&#41; {
 		$macro =~ s/^d_&#40;.+&#41;/TIME_HIRES_\U$1/;
 		my $val = &#40;$DEFINE =~ /-D$macro\b/&#41; ? 1 : 0;
 		push @names, {name =&gt; $_, macro =&gt; $macro, value =&gt; $val,
-- 
2.7.0

</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0003-Warning-on-the-clock_getres-results.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1584312/846639/0003-Warning-on-the-clock_getres-results.patch">Download 0003-Warning-on-the-clock_getres-results.patch</a><br />
<span class="downloadcontenttype">text/x-diff 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">From 48961e3f2140679f169454b31b2edd08ade5fb7e Mon Sep 17 00:00:00 2001
From: Jarkko Hietaniemi &lt;jhi@iki.fi&gt;
Date: Thu, 14 Jan 2016 10:31:01 -0500
Subject: [PATCH 3/3] Warning on the clock_getres&#40;&#41; results

---
 cpan/Time-HiRes/HiRes.pm | 8 ++++++++
 1 file changed, 8 insertions&#40;+&#41;

diff --git a/cpan/Time-HiRes/HiRes.pm b/cpan/Time-HiRes/HiRes.pm
index 843d586..ef87d4d 100644
--- a/cpan/Time-HiRes/HiRes.pm
+++ b/cpan/Time-HiRes/HiRes.pm
@@ -356,6 +356,14 @@ specified by C&lt;$which&gt;.  All implementations that support POSIX high
 resolution timers are supposed to support at least the C&lt;$which&gt; value
 of C&lt;CLOCK_REALTIME&gt;, see L&lt;/clock_gettime&gt;.
 
+B&lt;NOTE&gt;: the resolution returned may be highly optimistic.
+Even if the resolution is high &#40;a small number&#41;, all it means is that
+you&#39;ll be able to specify the arguments to clock_gettime&#40;&#41; and
+clock_nanosleep&#40;&#41; with that resolution, it doesn&#39;t mean that the
+clock_gettime&#40;&#41; results or the clock_nanosleep&#40;&#41; effects will be of
+that resolution, because various overheads and the overall system load
+will affect the execution.
+
 =item clock_nanosleep &#40; $which, $nanoseconds, $flags = 0&#41;
 
 Sleeps for the number of nanoseconds &#40;1e9ths of a second&#41; specified.
-- 
2.7.0

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1596790" href="/Public/Bug/Display.html?id=78656#txn-1596790">#</a>      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;17&nbsp;09:29:57&nbsp;2016</span>
    <span class="description">JHI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1596790/853574/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/853574">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 166b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in blead &#40;now that T::H is blead-first&#41; as of <span class="clickylink"><a target="new" rel="nofollow" href="http://perl5.git.perl.org/perl.git/commitdiff/bcd2c0efd9224fe75a0bb40ebb907817ba1713c4">http://perl5.git.perl.org/perl.git/commitdiff/bcd2c0efd9224fe75a0bb40ebb907817ba1713c4</a></span> which bumps T::H to 1.9729
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1607222" href="/Public/Bug/Display.html?id=78656#txn-1607222">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;13&nbsp;19:39:11&nbsp;2016</span>
    <span class="description">JHI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1607222/859785/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/859785">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 17b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Fixed in 1.9731.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1607225" href="/Public/Bug/Display.html?id=78656#txn-1607225">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;13&nbsp;19:39:18&nbsp;2016</span>
    <span class="description">JHI [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1607253" href="/Public/Bug/Display.html?id=78656#txn-1607253">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;13&nbsp;22:33:27&nbsp;2016</span>
    <span class="description">JHI [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1607253/859803/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/859803">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 133b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 13 19:39:11 2016, JHI wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Fixed in 1.9731.
</div>
The 1.9731 did not work with threaded Perls in OS X, so 1.9732 happened.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.62401</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
