<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #100186 for DBD-ODBC: Invalid precision value error</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #100186 for DBD-ODBC: Invalid precision value error</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DBD-ODBC">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DBD-ODBC">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DBD-ODBC">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DBD-ODBC">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/DBD-ODBC">DBD-ODBC CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">100186</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DBD-ODBC">DBD-ODBC</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
july [...] imperia.bg

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10188-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-10189-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.51_1    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=100186">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1430642" href="/Public/Bug/Display.html?id=100186#txn-1430642">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;07&nbsp;12:27:04&nbsp;2014</span>
    <span class="description">july [...] imperia.bg -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Invalid precision value error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 07 Nov 2014 19:26:33 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian &lt;july [...] imperia.bg&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1430642/760374/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760374">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I&#39;m getting the following error:

[Microsoft][ODBC Driver 11 for SQL Server]Invalid precision value 
&#40;SQL-HY104&#41;

This happens for:
INSERT into binary_meta
        VALUES &#40;?, ?, ?, ?, ?, ?&#41;
EOF

where the problematic column is of type VARBINARY&#40;MAX&#41;.

The setup is Linux &#40;x64bit  Ubuntu 14.04 and CentOS 5.9&#41; client with SQL 
Server 2008 R2 SP2.
The linux driver is the one officially provided by Microsoft:
libmsodbcsql-11.0.so.2270.0 &#40;Microsoft ODBC Driver 11 for SQL Server&#41;
<span class="clickylink"><a target="new" rel="nofollow" href="http://www.microsoft.com/en-us/download/details.aspx?id=36437">http://www.microsoft.com/en-us/download/details.aspx?id=36437</a></span>
plus unixODBC 2.3.0 &#40;prerequirement&#41;.

Perl versions &#40;5.18.2 and 5.8.8&#41;
DBD::ODBC version 1.50

My workaround for this issue is by adding the following code at:

dbdimp.c:4180:

if &#40;phs-&gt;sql_type == SQL_VARBINARY
     &#38;&#38; phs-&gt;param_size == 0 &#38;&#38; phs-&gt;requested_type == 0
     &#38;&#38; imp_dbh-&gt;driver_type == DT_DONT_CARE
     &#38;&#38; strstr&#40;imp_dbh-&gt;odbc_driver_name, &#34;libmsodbcsql-11&#34;&#41;
         == imp_dbh-&gt;odbc_driver_name
     &#38;&#38; strcmp&#40;imp_dbh-&gt;odbc_dbms_name, &#34;Microsoft SQL Server&#34;&#41; == 0
     &#41; {
     /*
         printf&#40;&#34;Driver name: %s\n&#34;, imp_dbh-&gt;odbc_driver_name&#41;;
         printf&#40;&#34;Driver type: %d\n&#34;, imp_dbh-&gt;driver_type&#41;;
         printf&#40;&#34;ODBC DBMS: %s\n&#34;, imp_dbh-&gt;odbc_dbms_name&#41;;
         printf&#40;&#34;Request type: %d\n&#34;, phs-&gt;requested_type&#41;;
         printf&#40;&#34;Param size: %d\n&#34;, phs-&gt;param_size&#41;;

         # Driver name: libmsodbcsql-11.0.so.2270.0
         # Driver type: 0
         # ODBC DBMS: Microsoft SQL Server
         # Request type: 0
         # Param size: 0
     */

     column_size = 0;
}

This fix is tested against our &#40;software&#41; complete test suits and it 
looks ok. However I&#39;m not sure whether the DBD::ODBC driver should also 
take extra care of  other column types.
Also it seems that the official ODBC driver for Linux, released by 
Microsoft is not exactly supported by the DBD::ODBC, since the 
driver_type is DT_DONT_CARE :&#41;

Regards,
Julian Lishev
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431406" href="/Public/Bug/Display.html?id=100186#txn-1431406">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;10&nbsp;08:12:55&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431406/760766/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/760766">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 07 12:27:04 2014, july@imperia.bg wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hello,
&gt; 
&gt; I&#39;m getting the following error:
&gt; 
&gt; [Microsoft][ODBC Driver 11 for SQL Server]Invalid precision value 
&gt; &#40;SQL-HY104&#41;
&gt; 
&gt; This happens for:
&gt; INSERT into binary_meta
&gt;         VALUES &#40;?, ?, ?, ?, ?, ?&#41;
&gt; EOF
&gt; 
&gt; where the problematic column is of type VARBINARY&#40;MAX&#41;.
&gt; 
&gt; The setup is Linux &#40;x64bit  Ubuntu 14.04 and CentOS 5.9&#41; client with SQL 
&gt; Server 2008 R2 SP2.
&gt; The linux driver is the one officially provided by Microsoft:
&gt; libmsodbcsql-11.0.so.2270.0 &#40;Microsoft ODBC Driver 11 for SQL Server&#41;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://www.microsoft.com/en-us/download/details.aspx?id=36437">http://www.microsoft.com/en-us/download/details.aspx?id=36437</a></span>
&gt; plus unixODBC 2.3.0 &#40;prerequirement&#41;.
&gt; 
&gt; Perl versions &#40;5.18.2 and 5.8.8&#41;
&gt; DBD::ODBC version 1.50
&gt; 
&gt; My workaround for this issue is by adding the following code at:
&gt; 
&gt; dbdimp.c:4180:
&gt; 
&gt; if &#40;phs-&gt;sql_type == SQL_VARBINARY
&gt;      &#38;&#38; phs-&gt;param_size == 0 &#38;&#38; phs-&gt;requested_type == 0
&gt;      &#38;&#38; imp_dbh-&gt;driver_type == DT_DONT_CARE
&gt;      &#38;&#38; strstr&#40;imp_dbh-&gt;odbc_driver_name, &#34;libmsodbcsql-11&#34;&#41;
&gt;          == imp_dbh-&gt;odbc_driver_name
&gt;      &#38;&#38; strcmp&#40;imp_dbh-&gt;odbc_dbms_name, &#34;Microsoft SQL Server&#34;&#41; == 0
&gt;      &#41; {
&gt;      /*
&gt;          printf&#40;&#34;Driver name: %s\n&#34;, imp_dbh-&gt;odbc_driver_name&#41;;
&gt;          printf&#40;&#34;Driver type: %d\n&#34;, imp_dbh-&gt;driver_type&#41;;
&gt;          printf&#40;&#34;ODBC DBMS: %s\n&#34;, imp_dbh-&gt;odbc_dbms_name&#41;;
&gt;          printf&#40;&#34;Request type: %d\n&#34;, phs-&gt;requested_type&#41;;
&gt;          printf&#40;&#34;Param size: %d\n&#34;, phs-&gt;param_size&#41;;
&gt; 
&gt;          # Driver name: libmsodbcsql-11.0.so.2270.0
&gt;          # Driver type: 0
&gt;          # ODBC DBMS: Microsoft SQL Server
&gt;          # Request type: 0
&gt;          # Param size: 0
&gt;      */
&gt; 
&gt;      column_size = 0;
&gt; }
&gt; 
&gt; This fix is tested against our &#40;software&#41; complete test suits and it 
&gt; looks ok. However I&#39;m not sure whether the DBD::ODBC driver should also 
&gt; take extra care of  other column types.
&gt; Also it seems that the official ODBC driver for Linux, released by 
&gt; Microsoft is not exactly supported by the DBD::ODBC, since the 
&gt; driver_type is DT_DONT_CARE :&#41;
&gt; 
&gt; Regards,
&gt; Julian Lishev
</div>
Julian,

Thanks for reporting this issue.

Is all of that code an addition?

You are right wrt areas in the code which are MS SQL Server specific - the driver you are using should not be DT_DONT_CARE. I don&#39;t have that driver so I&#39;m assuming from the above your driver name is libmsodbcsql-11.0.so.2270.0 and I will need to make sure that sets either DT_SQL_SERVER_NATIVE_CLIENT or DT_SQL_SERVER. I&#39;m guessing the latter as that is the newer one.

Could you provide a small self contained script I can use to reproduce then I will check it out and make the changes.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431407" href="/Public/Bug/Display.html?id=100186#txn-1431407">#</a>      
    </span>
    <span class="date">Mon&nbsp;Nov&nbsp;10&nbsp;08:12:55&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431888" href="/Public/Bug/Display.html?id=100186#txn-1431888">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;11&nbsp;13:50:28&nbsp;2014</span>
    <span class="description">july [...] imperia.bg -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100186] Invalid precision value error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 11 Nov 2014 16:03:10 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian &lt;july [...] imperia.bg&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431888/761044/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761044">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Martin,

Here is the patch file:
----------------------------

--- dbdimp2.c   2014-11-11 14:08:26.739154650 +0200
+++ dbdimp.c    2014-11-11 15:29:08.419093790 +0200
@@ -4177,6 +4177,25 @@
       * sloi = -500100 ps=0 sqlt=-3 &#40;SQL_VARBINARY&#41;
       * sloi = 4001 ps=0 sqlt=-9 &#40;SQL_WVARCHAR&#41; &lt;--- this one fails 
without above
       */
+    if &#40;phs-&gt;sql_type == SQL_VARBINARY &#38;&#38; phs-&gt;param_size == 0
+        &#38;&#38; phs-&gt;requested_type == 0 &#38;&#38; imp_dbh-&gt;driver_type == DT_DONT_CARE
+        &#38;&#38; strstr&#40;imp_dbh-&gt;odbc_driver_name, &#34;libmsodbcsql-11&#34;&#41;
+            == imp_dbh-&gt;odbc_driver_name
+        &#38;&#38; strcmp&#40;imp_dbh-&gt;odbc_dbms_name, &#34;Microsoft SQL Server&#34;&#41; == 0 &#41; {
+        /*
+            printf&#40;&#34;Driver name: %s\n&#34;, imp_dbh-&gt;odbc_driver_name&#41;;
+            printf&#40;&#34;Driver type: %d\n&#34;, imp_dbh-&gt;driver_type&#41;;
+            printf&#40;&#34;ODBC DBMS: %s\n&#34;, imp_dbh-&gt;odbc_dbms_name&#41;;
+            printf&#40;&#34;Request type: %d\n&#34;, phs-&gt;requested_type&#41;;
+            printf&#40;&#34;Param size: %d\n&#34;, phs-&gt;param_size&#41;;
+            # Driver name: libmsodbcsql-11.0.so.2270.0
+            # Driver type: 0
+            # ODBC DBMS: Microsoft SQL Server
+            # Request type: 0
+            # Param size: 0
+        */
+        column_size = 0;
+    }

      /*printf&#40;&#34;sloi = %d ps=%d sqlt=%d\n&#34;, strlen_or_ind, 
phs-&gt;param_size, phs-&gt;sql_type&#41;;*/


My /etc/odbc.ini config:
----------------------------

[VirtualODBC]
Description = VirtualODBC
Driver = /opt/microsoft/msodbcsql/lib64/libmsodbcsql-11.0.so.2270.0
Database = imperia_i10
Server = 10.29.0.184,1433
AutoTranslate = No


My /etc/odbcinst.ini config:
----------------------------

[VirtualODBC]
Description=Microsoft ODBC Driver 11 for SQL Server
Driver=/opt/microsoft/msodbcsql/lib64/libmsodbcsql-11.0.so.2270.0
Threading=1
UsageCount=1


The test script:
----------------------------

#!/usr/bin/perl

use strict;
use warnings;
use DBI;
use Storable qw &#40;thaw&#41;;

my &#40;$dsn, $user, $pwd&#41; = &#40;$ARGV[0], $ARGV[1], $ARGV[2]&#41;;

print &#34;Connecting to the ODBC database.\n&#34;;
my $h = DBI-&gt;connect&#40;&#34;dbi:ODBC:$dsn&#34;, $user, $pwd,
     {
         AutoCommit =&gt; 0,
         PrintError  =&gt; 1,
         RaiseError  =&gt; 1,
     }&#41;;

eval {
     local $h-&gt;{&#39;PrintError&#39;} = 0;
     local $h-&gt;{&#39;RaiseError&#39;} = 0;
     $h-&gt;do&#40;q/drop table metavarbin/&#41;;
     $h-&gt;commit;
};

print &#34;Create &#39;metavarbin&#39; test table.\n&#34;;
$h-&gt;do&#40;&lt;&lt;EOF&#41;;
CREATE TABLE &#34;metavarbin&#34; &#40;
     &#34;doc_id&#34; INTEGER,
     &#34;meta_name&#34; VARCHAR &#40;255&#41;,
     &#34;meta_value&#34; VARBINARY&#40;MAX&#41;,
     &#34;meta_idx&#34; INTEGER,
     &#34;from_ver&#34; BIGINT,
     &#34;to_ver&#34; BIGINT,
     PRIMARY KEY&#40;&#34;doc_id&#34;, &#34;meta_name&#34;, &#34;meta_idx&#34;, &#34;from_ver&#34;, &#34;to_ver&#34;&#41;&#41;;
EOF
$h-&gt;commit;

$h-&gt;do&#40;&lt;&lt;EOF&#41;;
CREATE INDEX &#34;metavarbin_idx&#34; ON &#34;metavarbin&#34;&#40;&#34;doc_id&#34;&#41;;
EOF
$h-&gt;commit;

my $sth = $h-&gt;prepare&#40;&#39;INSERT into metavarbin VALUES &#40;?, ?, ?, ?, ?, ?&#41;&#39;&#41;;

my @args = &#40;1234, &#39;name&#39;, &#34; &#34; x 8001, 0, &#39;1234567890&#39;, &#39;1234567899&#39;&#41;;

print &#34;Insert VARBINARY data over 8k.\n&#34;;
$sth-&gt;execute&#40;@args&#41;;

# Changing the data to prevent errors due PK constraint.
$args[0] = $args[0] . &#39;1&#39;;
print &#34;Insert VARBINARY data up to 8k.\n&#34;;
$args[2] = &#34; &#34; x 8000;
$sth-&gt;execute&#40;@args&#41;;

$args[0] = $args[0] . &#39;1&#39;;
print &#34;Insert VARBINARY data over 8k again.\n&#34;;
$args[2] = &#34; &#34; x 8001;

#use DBI &#39;:sql_types&#39;;
#$sth-&gt;bind_param&#40;3, undef, {TYPE =&gt; SQL_VARBINARY}&#41;;

$sth-&gt;execute&#40;@args&#41;;

$h-&gt;commit;


# $ perl odbc.pl VirtualODBC user password

I&#39;ve spent some time writing this script since it wasn&#39;t obvious what is 
actually happening. In our software we &#40;re&#41;use prepared statements for 
performance reasons. The problem is related to the 8000 size limit, but 
it does not affect the first execute&#40;&#41; call, but rather the second one 
that exceed the 8k limit.

I&#39;ve tried all types of bind_param variations to overcome and rebind the 
params for the second call, but no luck.

Additionally, in our software we use &#34;bytes&#34; over &#34;utf-8&#34;, so we have 
disabled every conversion setting to utf that exists, but it seems this 
is not related to this problem after all, at least this is still 
reproducible with the perl script.

Another issue I&#39;m not sure what is the origin - if I uncomment the 
&#39;bind_param&#39; lines at the end of the script I still receive the 
&#34;[Microsoft][ODBC Driver 11 for SQL Server]Invalid precision value 
&#40;SQL-HY104&#41;&#34; which probably means I don&#39;t know how to properly bind, by 
hand, that problematic column &#40;VARBINARY&#40;MAX&#41;&#41; with or without my patch. 
Probably that is another bug or some kind of knowledge lack on my side.

Regards,
Julian Lishev
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431949" href="/Public/Bug/Display.html?id=100186#txn-1431949">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;11&nbsp;17:18:02&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431949/761080/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761080">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Nov 11 13:50:28 2014, july@imperia.bg wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Martin,
&gt; 
&gt; Here is the patch file:
&gt; ----------------------------
&gt; 
&gt; --- dbdimp2.c   2014-11-11 14:08:26.739154650 +0200
&gt; +++ dbdimp.c    2014-11-11 15:29:08.419093790 +0200
&gt; @@ -4177,6 +4177,25 @@
&gt;        * sloi = -500100 ps=0 sqlt=-3 &#40;SQL_VARBINARY&#41;
&gt;        * sloi = 4001 ps=0 sqlt=-9 &#40;SQL_WVARCHAR&#41; &lt;--- this one fails 
&gt; without above
&gt;        */
&gt; +    if &#40;phs-&gt;sql_type == SQL_VARBINARY &#38;&#38; phs-&gt;param_size == 0
&gt; +        &#38;&#38; phs-&gt;requested_type == 0 &#38;&#38; imp_dbh-&gt;driver_type == DT_DONT_CARE
&gt; +        &#38;&#38; strstr&#40;imp_dbh-&gt;odbc_driver_name, &#34;libmsodbcsql-11&#34;&#41;
&gt; +            == imp_dbh-&gt;odbc_driver_name
&gt; +        &#38;&#38; strcmp&#40;imp_dbh-&gt;odbc_dbms_name, &#34;Microsoft SQL Server&#34;&#41; == 0 &#41; {
&gt; +        /*
&gt; +            printf&#40;&#34;Driver name: %s\n&#34;, imp_dbh-&gt;odbc_driver_name&#41;;
&gt; +            printf&#40;&#34;Driver type: %d\n&#34;, imp_dbh-&gt;driver_type&#41;;
&gt; +            printf&#40;&#34;ODBC DBMS: %s\n&#34;, imp_dbh-&gt;odbc_dbms_name&#41;;
&gt; +            printf&#40;&#34;Request type: %d\n&#34;, phs-&gt;requested_type&#41;;
&gt; +            printf&#40;&#34;Param size: %d\n&#34;, phs-&gt;param_size&#41;;
&gt; +            # Driver name: libmsodbcsql-11.0.so.2270.0
&gt; +            # Driver type: 0
&gt; +            # ODBC DBMS: Microsoft SQL Server
&gt; +            # Request type: 0
&gt; +            # Param size: 0
&gt; +        */
&gt; +        column_size = 0;
&gt; +    }
&gt; 
&gt;       /*printf&#40;&#34;sloi = %d ps=%d sqlt=%d\n&#34;, strlen_or_ind, 
&gt; phs-&gt;param_size, phs-&gt;sql_type&#41;;*/
&gt; 
&gt; 
&gt; My /etc/odbc.ini config:
&gt; ----------------------------
&gt; 
&gt; [VirtualODBC]
&gt; Description = VirtualODBC
&gt; Driver = /opt/microsoft/msodbcsql/lib64/libmsodbcsql-11.0.so.2270.0
&gt; Database = imperia_i10
&gt; Server = 10.29.0.184,1433
&gt; AutoTranslate = No
&gt; 
&gt; 
&gt; My /etc/odbcinst.ini config:
&gt; ----------------------------
&gt; 
&gt; [VirtualODBC]
&gt; Description=Microsoft ODBC Driver 11 for SQL Server
&gt; Driver=/opt/microsoft/msodbcsql/lib64/libmsodbcsql-11.0.so.2270.0
&gt; Threading=1
&gt; UsageCount=1
&gt; 
&gt; 
&gt; The test script:
&gt; ----------------------------
&gt; 
&gt; #!/usr/bin/perl
&gt; 
&gt; use strict;
&gt; use warnings;
&gt; use DBI;
&gt; use Storable qw &#40;thaw&#41;;
&gt; 
&gt; my &#40;$dsn, $user, $pwd&#41; = &#40;$ARGV[0], $ARGV[1], $ARGV[2]&#41;;
&gt; 
&gt; print &#34;Connecting to the ODBC database.\n&#34;;
&gt; my $h = DBI-&gt;connect&#40;&#34;dbi:ODBC:$dsn&#34;, $user, $pwd,
&gt;      {
&gt;          AutoCommit =&gt; 0,
&gt;          PrintError  =&gt; 1,
&gt;          RaiseError  =&gt; 1,
&gt;      }&#41;;
&gt; 
&gt; eval {
&gt;      local $h-&gt;{&#39;PrintError&#39;} = 0;
&gt;      local $h-&gt;{&#39;RaiseError&#39;} = 0;
&gt;      $h-&gt;do&#40;q/drop table metavarbin/&#41;;
&gt;      $h-&gt;commit;
&gt; };
&gt; 
&gt; print &#34;Create &#39;metavarbin&#39; test table.\n&#34;;
&gt; $h-&gt;do&#40;&lt;&lt;EOF&#41;;
&gt; CREATE TABLE &#34;metavarbin&#34; &#40;
&gt;      &#34;doc_id&#34; INTEGER,
&gt;      &#34;meta_name&#34; VARCHAR &#40;255&#41;,
&gt;      &#34;meta_value&#34; VARBINARY&#40;MAX&#41;,
&gt;      &#34;meta_idx&#34; INTEGER,
&gt;      &#34;from_ver&#34; BIGINT,
&gt;      &#34;to_ver&#34; BIGINT,
&gt;      PRIMARY KEY&#40;&#34;doc_id&#34;, &#34;meta_name&#34;, &#34;meta_idx&#34;, &#34;from_ver&#34;, &#34;to_ver&#34;&#41;&#41;;
&gt; EOF
&gt; $h-&gt;commit;
&gt; 
&gt; $h-&gt;do&#40;&lt;&lt;EOF&#41;;
&gt; CREATE INDEX &#34;metavarbin_idx&#34; ON &#34;metavarbin&#34;&#40;&#34;doc_id&#34;&#41;;
&gt; EOF
&gt; $h-&gt;commit;
&gt; 
&gt; my $sth = $h-&gt;prepare&#40;&#39;INSERT into metavarbin VALUES &#40;?, ?, ?, ?, ?, ?&#41;&#39;&#41;;
&gt; 
&gt; my @args = &#40;1234, &#39;name&#39;, &#34; &#34; x 8001, 0, &#39;1234567890&#39;, &#39;1234567899&#39;&#41;;
&gt; 
&gt; print &#34;Insert VARBINARY data over 8k.\n&#34;;
&gt; $sth-&gt;execute&#40;@args&#41;;
&gt; 
&gt; # Changing the data to prevent errors due PK constraint.
&gt; $args[0] = $args[0] . &#39;1&#39;;
&gt; print &#34;Insert VARBINARY data up to 8k.\n&#34;;
&gt; $args[2] = &#34; &#34; x 8000;
&gt; $sth-&gt;execute&#40;@args&#41;;
&gt; 
&gt; $args[0] = $args[0] . &#39;1&#39;;
&gt; print &#34;Insert VARBINARY data over 8k again.\n&#34;;
&gt; $args[2] = &#34; &#34; x 8001;
&gt; 
&gt; #use DBI &#39;:sql_types&#39;;
&gt; #$sth-&gt;bind_param&#40;3, undef, {TYPE =&gt; SQL_VARBINARY}&#41;;
&gt; 
&gt; $sth-&gt;execute&#40;@args&#41;;
&gt; 
&gt; $h-&gt;commit;
&gt; 
&gt; 
&gt; # $ perl odbc.pl VirtualODBC user password
&gt; 
&gt; I&#39;ve spent some time writing this script since it wasn&#39;t obvious what is 
&gt; actually happening. In our software we &#40;re&#41;use prepared statements for 
&gt; performance reasons. The problem is related to the 8000 size limit, but 
&gt; it does not affect the first execute&#40;&#41; call, but rather the second one 
&gt; that exceed the 8k limit.
&gt; 
&gt; I&#39;ve tried all types of bind_param variations to overcome and rebind the 
&gt; params for the second call, but no luck.
&gt; 
&gt; Additionally, in our software we use &#34;bytes&#34; over &#34;utf-8&#34;, so we have 
&gt; disabled every conversion setting to utf that exists, but it seems this 
&gt; is not related to this problem after all, at least this is still 
&gt; reproducible with the perl script.
&gt; 
&gt; Another issue I&#39;m not sure what is the origin - if I uncomment the 
&gt; &#39;bind_param&#39; lines at the end of the script I still receive the 
&gt; &#34;[Microsoft][ODBC Driver 11 for SQL Server]Invalid precision value 
&gt; &#40;SQL-HY104&#41;&#34; which probably means I don&#39;t know how to properly bind, by 
&gt; hand, that problematic column &#40;VARBINARY&#40;MAX&#41;&#41; with or without my patch. 
&gt; Probably that is another bug or some kind of knowledge lack on my side.
&gt; 
&gt; Regards,
&gt; Julian Lishev
</div>
Wow Julian, I wish everyone who reported an issue did as much work to help identify the problem.

Since my first reply I&#39;ve tried to reproduce your problem with our MS SQL Server driver and could not so in the hope you would provide a reproducible script I&#39;ve downloaded and installed the MS driver you are using. I&#39;ll look into your solution and also the issues you have when uncommented the bind params at the end of the script.

Hopefully, I&#39;ll be in a position to provide a new version you can try by the weekend.

BTW, the driver you are using is the same codebase as the Windows MS native client driver so I&#39;ve already fixed the issue of the workarounds in DBD::ODBC for MS SQL Server not working with the linux driver.

Any column which uses MAX is a PITA because the driver does not report a size for the parameter. This seems to be the case that MS added max support to MS SQL Server before realising it didn&#39;t fit into ODBC too well.

Rhanks again for the detailed info - I&#39;ll get back to you soon.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1431972" href="/Public/Bug/Display.html?id=100186#txn-1431972">#</a>      
    </span>
    <span class="date">Tue&nbsp;Nov&nbsp;11&nbsp;17:32:14&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1431972/761095/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761095">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 497b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">First interesting point is that script works perfectly on Windows using the SQL Server ODBC Driver or the native client driver without your patch.

It also works with the bind_param uncommented at the end of the script.

So it would seem the linux driver is different from the native client windows driver in some way or there is a difference due to the sql server databases we are using.

Will try again tomorrow with the linux driver I installed at work.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432184" href="/Public/Bug/Display.html?id=100186#txn-1432184">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;06:48:47&nbsp;2014</span>
    <span class="description">july [...] imperia.bg -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100186] Invalid precision value error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 Nov 2014 13:48:16 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian &lt;july [...] imperia.bg&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432184/761220/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761220">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 628b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Martin,

Thanks for the feedback.

I&#39;m using SQL Server 2008 R2 SP2 &#40;Express Edition&#41;.

But indeed, that worked quite well before with both Windows client and 
server. When I had a Windows based test machine, I&#39;ve successfully run 
all the tests, by using
DSN with &#34;SQL Server&#34; or &#34;SQL Server Native Client&#34; ODBC driver and 
DBD-ODBC 1.35 &#40;the latest version of the StateAactive&#39;s repository for 
my older Perl&#41;.

So, yes. I guess the problem is with the Linux driver, compiled by the 
Microsoft. Let me know if you need tips how to install their package &#40;I 
can forward you my documentation to your personal email&#41;.

Julian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432309" href="/Public/Bug/Display.html?id=100186#txn-1432309">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;08:18:54&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432309/761309/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761309">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 994b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 12 06:48:47 2014, july@imperia.bg wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Martin,
&gt; 
&gt; Thanks for the feedback.
&gt; 
&gt; I&#39;m using SQL Server 2008 R2 SP2 &#40;Express Edition&#41;.
&gt; 
&gt; But indeed, that worked quite well before with both Windows client and 
&gt; server. When I had a Windows based test machine, I&#39;ve successfully run 
&gt; all the tests, by using
&gt; DSN with &#34;SQL Server&#34; or &#34;SQL Server Native Client&#34; ODBC driver and 
&gt; DBD-ODBC 1.35 &#40;the latest version of the StateAactive&#39;s repository for 
&gt; my older Perl&#41;.
&gt; 
&gt; So, yes. I guess the problem is with the Linux driver, compiled by the 
&gt; Microsoft. Let me know if you need tips how to install their package &#40;I 
&gt; can forward you my documentation to your personal email&#41;.
&gt; 
&gt; Julian
</div>
The machine I was installing the MS linux driver on is not accessible to me today unfortunately. I have an ubuntu machine I could use. If you think your notes might work for ubuntu send them to my cpan address please - mjevans@cpan.org.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432428" href="/Public/Bug/Display.html?id=100186#txn-1432428">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;12:08:10&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432428/761374/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761374">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 178b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This driver even segfaults in 2nd connect call in 02simple.t test!

Issue reproduced at last so now I can start looking for a workaround.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432446" href="/Public/Bug/Display.html?id=100186#txn-1432446">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;12:14:43&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432446/761390/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761390">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 12 12:08:10 2014, MJEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This driver even segfaults in 2nd connect call in 02simple.t test!
&gt; 
&gt; Issue reproduced at last so now I can start looking for a workaround.
&gt; 
&gt; Martin
</div>
OOPS, your test code works &#40;with last bind_param still commented out&#41; without your patch.
It still continues to work when I make the following change to recognise it:


diff --git a/dbdimp.c b/dbdimp.c
index 35dd369..d56dec1 100644
--- a/dbdimp.c
+++ b/dbdimp.c
@@ -29,9 +29,8 @@
  *   <span class="clickylink"><a target="new" rel="nofollow" href="http://perldoc.perl.org/perlguts.html#Formatted-Printing-of-IVs,-UVs,-and-NVs">http://perldoc.perl.org/perlguts.html#Formatted-Printing-of-IVs,-UVs,-and-NVs</a></span>
  *   <span class="clickylink"><a target="new" rel="nofollow" href="http://cpansearch.perl.org/src/RURBAN/illguts-0.44/index.html">http://cpansearch.perl.org/src/RURBAN/illguts-0.44/index.html</a></span>
  * Internal replacements for standard C library functions:
- * <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~jesse/perl-5.12.1/pod/perlclib.pod">http://search.cpan.org/~jesse/perl-5.12.1/pod/perlclib.pod</a></span>
+ * <span class="clickylink"><a target="new" rel="nofollow" href="http://perldoc.perl.org/perlclib.html">http://perldoc.perl.org/perlclib.html</a></span>
  * <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/dist/Devel-PPPort/PPPort.pm">http://search.cpan.org/dist/Devel-PPPort/PPPort.pm</a></span>
- *
  * MS ODBC 64 bit:
  * <span class="clickylink"><a target="new" rel="nofollow" href="http://msdn.microsoft.com/en-us/library/ms716287%28v=vs.85%29.aspx">http://msdn.microsoft.com/en-us/library/ms716287%28v=vs.85%29.aspx</a></span>
  */
@@ -6541,7 +6540,8 @@ static int post_connect&#40;
         if &#40;strcmp&#40;imp_dbh-&gt;odbc_driver_name, &#34;SQLSRV32.DLL&#34;&#41; == 0&#41; {
             imp_dbh-&gt;driver_type = DT_SQL_SERVER;
         } else if &#40;&#40;strcmp&#40;imp_dbh-&gt;odbc_driver_name, &#34;sqlncli10.dll&#34;&#41; == 0&#41; ||
-                   &#40;strcmp&#40;imp_dbh-&gt;odbc_driver_name, &#34;SQLNCLI.DLL&#34;&#41; == 0&#41;&#41; {
+                   &#40;strcmp&#40;imp_dbh-&gt;odbc_driver_name, &#34;SQLNCLI.DLL&#34;&#41; == 0&#41; ||
+                   &#40;strcasestr&#40;imp_dbh-&gt;odbc_driver_name, &#34;libmsodbcsql&#34;&#41; == 0&#41;&#41; {
             imp_dbh-&gt;driver_type = DT_SQL_SERVER_NATIVE_CLIENT;
         } else if &#40;strcmp&#40;imp_dbh-&gt;odbc_driver_name, &#34;odbcjt32.dll&#34;&#41; == 0&#41; {
             imp_dbh-&gt;driver_type = DT_MS_ACCESS_JET;

Last bind_param &#40;when uncommented&#41; does still fail.

So it appears I have not reproduced it after all.

perl rt100186.pl 
Connecting to the ODBC database.
Create &#39;metavarbin&#39; test table.
Insert VARBINARY data over 8k.
Insert VARBINARY data up to 8k.
Insert VARBINARY data over 8k again.

use strict;
use warnings;
use DBI;
use Storable qw &#40;thaw&#41;;

print &#34;Connecting to the ODBC database.\n&#34;;
my $h = DBI-&gt;connect&#40;&#34;dbi:ODBC:xxx&#34;, &#34;xxx&#34;, &#34;xxx&#34;, { AutoCommit =&gt; 0, PrintError =&gt; 1, RaiseError =&gt; 1, }&#41;;
eval {
    local $h-&gt;{&#39;PrintError&#39;} = 0;
    local $h-&gt;{&#39;RaiseError&#39;} = 0;
    $h-&gt;do&#40;q/drop table metavarbin/&#41;;
    $h-&gt;commit;
};
print &#34;Create &#39;metavarbin&#39; test table.\n&#34;;
$h-&gt;do&#40;&lt;&lt;EOF&#41;;
CREATE TABLE &#34;metavarbin&#34; &#40; &#34;doc_id&#34; INTEGER, &#34;meta_name&#34; VARCHAR &#40;255&#41;, &#34;meta_value&#34; VARBINARY&#40;MAX&#41;, &#34;meta_idx&#34; INTEGER, &#34;from_ver&#34; BIGINT, &#34;to_ver&#34; BIGINT, PRIMARY KEY&#40;&#34;doc_id&#34;, &#34;meta_name&#34;, &#34;meta_idx&#34;, &#34;from_ver&#34;, &#34;to_ver&#34;&#41;&#41;;
EOF
$h-&gt;commit;
$h-&gt;do&#40;&lt;&lt;EOF&#41;;
CREATE INDEX &#34;metavarbin_idx&#34; ON &#34;metavarbin&#34;&#40;&#34;doc_id&#34;&#41;;
EOF
$h-&gt;commit;
my $sth = $h-&gt;prepare&#40;&#39;INSERT into metavarbin VALUES &#40;?, ?, ?, ?, ?, ?&#41;&#39;&#41;;
my @args = &#40;1234, &#39;name&#39;, &#34; &#34; x 8001, 0, &#39;1234567890&#39;, &#39;1234567899&#39;&#41;;
print &#34;Insert VARBINARY data over 8k.\n&#34;;
$sth-&gt;execute&#40;@args&#41;;
# Changing the data to prevent errors due PK constraint.
$args[0] = $args[0] . &#39;1&#39;;
print &#34;Insert VARBINARY data up to 8k.\n&#34;;
$args[2] = &#34; &#34; x 8000;
$sth-&gt;execute&#40;@args&#41;;
$args[0] = $args[0] . &#39;1&#39;;
print &#34;Insert VARBINARY data over 8k again.\n&#34;;
$args[2] = &#34; &#34; x 8001;
#use DBI &#39;:sql_types&#39;;
#$sth-&gt;bind_param&#40;3, undef, {TYPE =&gt; SQL_VARBINARY}&#41;;
#$sth-&gt;execute&#40;@args&#41;;
$h-&gt;commit; 

uncomment last few lines and I do get:

Connecting to the ODBC database.
Create &#39;metavarbin&#39; test table.
Insert VARBINARY data over 8k.
Insert VARBINARY data up to 8k.
Insert VARBINARY data over 8k again.
DBD::ODBC::st execute failed: [Microsoft][ODBC Driver 11 for SQL Server]Invalid precision value &#40;SQL-HY104&#41; at rt100186.pl line 37.
DBD::ODBC::st execute failed: [Microsoft][ODBC Driver 11 for SQL Server]Invalid precision value &#40;SQL-HY104&#41; at rt100186.pl line 37.
Issuing rollback&#40;&#41; due to DESTROY without explicit disconnect&#40;&#41; of DBD::ODBC::db handle gangrad at rt100186.pl line 37.


Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432456" href="/Public/Bug/Display.html?id=100186#txn-1432456">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;12:22:04&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432456/761396/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761396">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 437b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
# osname=linux, osvers=3.13.0-32-generic, archname=x86_64-linux
# Using DBI 1.632
# Using DBD::ODBC 1.50
# Using DBMS_NAME &#39;Microsoft SQL Server&#39;
# Using DBMS_VER &#39;11.00.2100&#39;
# Using DRIVER_NAME &#39;libmsodbcsql-11.0.so.2270.0&#39;
# Using DRIVER_VER &#39;11.00.2270&#39;
# odbc_has_unicode 0

Also tried with odbc_has_unicode=1

Test script runs fine.

I&#39;m using SQL Server Express 64bit version 11.0.2100.60

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432467" href="/Public/Bug/Display.html?id=100186#txn-1432467">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;12:32:06&nbsp;2014</span>
    <span class="description">july [...] imperia.bg -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100186] Invalid precision value error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 Nov 2014 19:31:48 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian &lt;july [...] imperia.bg&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432467/761404/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761404">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 446b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Martin,

I&#39;ve noticed that you have commented out the last execute&#40;&#41; statement:

#$sth-&gt;execute&#40;@args&#41;;

That last one is always needed to reproduce the issue. Running the first 
execute&#40;&#41; should be ok, although it passes the limit of 8k. The second 
execute&#40;&#41; should be ok, becuase it is exactly 8k and the third one 
should fail because it runs with data bigger than 8k.

The other reported issue what if uncomment the &#34;bind_param&#34;.

Julian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432469" href="/Public/Bug/Display.html?id=100186#txn-1432469">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;12:50:35&nbsp;2014</span>
    <span class="description">july [...] imperia.bg -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100186] Invalid precision value error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 Nov 2014 19:50:19 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian &lt;july [...] imperia.bg&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432469/761406/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761406">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 827b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I can reproduce it on two different machines:

CentOS 5.9:
Linux xxxxx 2.6.18-348.el5 #1 SMP Tue Jan 8 17:53:53 EST 2013 x86_64 
x86_64 x86_64 GNU/Linux

Here, without need for any &#34;hacks&#34;, i.e. library dependencies to 
satisfy, so I guess there is no room for a big configuration mistakes on 
our server. Also the DBD::ODBC tests fails when I run them.

Ubuntu 14.04:
Linux yyyyy 3.13.0-39-generic #66-Ubuntu SMP Tue Oct 28 13:30:27 UTC 
2014 x86_64 x86_64 x86_64 GNU/Linux

That is my primary dev machine and I had to do a small tweaks &#40;as you 
saw in my installation tips&#41;.

The common ground between those two is the SQL Server &#40;2008 R2 Express 
Edition&#41; :

Product: Microsoft SQL Server Express Edition with Advanced Services 
&#40;64-bit&#41;
Version: 10.50.1600.1
Server Collation: SQL_Latin1_General_CP1_CI_AS

Regards,
Julian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432483" href="/Public/Bug/Display.html?id=100186#txn-1432483">#</a>      
    </span>
    <span class="date">Wed&nbsp;Nov&nbsp;12&nbsp;13:19:39&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432483/761417/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761417">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 801b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Nov 12 12:32:06 2014, july@imperia.bg wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Hi Martin,
&gt; 
&gt; I&#39;ve noticed that you have commented out the last execute&#40;&#41; statement:
&gt; 
&gt; #$sth-&gt;execute&#40;@args&#41;;
&gt; 
&gt; That last one is always needed to reproduce the issue. Running the first 
&gt; execute&#40;&#41; should be ok, although it passes the limit of 8k. The second 
&gt; execute&#40;&#41; should be ok, becuase it is exactly 8k and the third one 
&gt; should fail because it runs with data bigger than 8k.
&gt; 
&gt; The other reported issue what if uncomment the &#34;bind_param&#34;.
&gt; 
&gt; Julian
</div>
ok, sorry, I misunderstood. It is probably reproduced then but I&#39;ll have to check tomorrow. I put it on a virtual box which is using nat and cannot get at it from here.

I did run with no lines commented out on Windows and it was ok.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432965" href="/Public/Bug/Display.html?id=100186#txn-1432965">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;06:44:03&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432965/761715/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761715">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 448b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I have actually found a native client driver on Windows which your script fails with. I also have this reproduced in Linux with MS&#39;s linux driver. I have fixed the issue as can be seen in the following git diff.

<span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-dbi/DBD-ODBC/commit/cdddb4f8e8dc3d8a7cd7aad481e22aa24e0c5d2d">https://github.com/perl5-dbi/DBD-ODBC/commit/cdddb4f8e8dc3d8a7cd7aad481e22aa24e0c5d2d</a></span>

If I did a delveopment release &#40;1.51_1&#41; which incorporated this change would you be prepared to try it out?

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432968" href="/Public/Bug/Display.html?id=100186#txn-1432968">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;07:09:18&nbsp;2014</span>
    <span class="description">july [...] imperia.bg -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100186] Invalid precision value error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 Nov 2014 14:08:51 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian &lt;july [...] imperia.bg&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432968/761718/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761718">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 576b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On 14/11/14 13:44, Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100186">https://rt.cpan.org/Ticket/Display.html?id=100186</a></span> &gt;
&gt;
&gt; I have actually found a native client driver on Windows which your script fails with. I also have this reproduced in Linux with MS&#39;s linux driver. I have fixed the issue as can be seen in the following git diff.
&gt;
&gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-dbi/DBD-ODBC/commit/cdddb4f8e8dc3d8a7cd7aad481e22aa24e0c5d2d">https://github.com/perl5-dbi/DBD-ODBC/commit/cdddb4f8e8dc3d8a7cd7aad481e22aa24e0c5d2d</a></span>
&gt;
&gt; If I did a delveopment release &#40;1.51_1&#41; which incorporated this change would you be prepared to try it out?
&gt;
&gt; Martin
</div>Sure, I&#39;ll try it when you are ready.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432973" href="/Public/Bug/Display.html?id=100186#txn-1432973">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;08:00:37&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432973/761720/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761720">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 807b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 14 07:09:18 2014, july@imperia.bg wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; 
&gt; On 14/11/14 13:44, Martin J Evans via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100186">https://rt.cpan.org/Ticket/Display.html?id=100186</a></span> &gt;
&gt; &gt;
&gt; &gt; I have actually found a native client driver on Windows which your
&gt; &gt; script fails with. I also have this reproduced in Linux with MS&#39;s
&gt; &gt; linux driver. I have fixed the issue as can be seen in the following
&gt; &gt; git diff.
&gt; &gt;
&gt; &gt; <span class="clickylink"><a target="new" rel="nofollow" href="https://github.com/perl5-dbi/DBD-">https://github.com/perl5-dbi/DBD-</a></span>
&gt; &gt; ODBC/commit/cdddb4f8e8dc3d8a7cd7aad481e22aa24e0c5d2d
&gt; &gt;
&gt; &gt; If I did a delveopment release &#40;1.51_1&#41; which incorporated this
&gt; &gt; change would you be prepared to try it out?
&gt; &gt;
&gt; &gt; Martin
</div>&gt; Sure, I&#39;ll try it when you are ready.
</div>
It is on its way to the CPAN - may take a while to be seen on whatever mirror you are using.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1432991" href="/Public/Bug/Display.html?id=100186#txn-1432991">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;09:15:37&nbsp;2014</span>
    <span class="description">july [...] imperia.bg -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #100186] Invalid precision value error</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 Nov 2014 16:15:01 +0200</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DBD-ODBC [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Julian &lt;july [...] imperia.bg&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1432991/761735/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761735">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 475b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On 14/11/14 15:00, Martin J Evans via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100186">https://rt.cpan.org/Ticket/Display.html?id=100186</a></span> &gt;
&gt;
&gt; It is on its way to the CPAN - may take a while to be seen on whatever mirror you are using.
&gt;
&gt; Martin
</div>
It seems that the new version works well on both CentOS and Ubuntu. Our 
test suits are running without errors. My pl script works as expected too.
The only thing that still fails are the DBD::ODBC own tests, but I guess 
you&#39;ll handle them later :&#41;

Julian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1433000" href="/Public/Bug/Display.html?id=100186#txn-1433000">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;09:36:34&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1433000/761742/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/761742">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 798b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Fri Nov 14 09:15:37 2014, july@imperia.bg wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 14/11/14 15:00, Martin J Evans via RT wrote:
<div class="message-stanza open">&gt; &gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=100186">https://rt.cpan.org/Ticket/Display.html?id=100186</a></span> &gt;
&gt; &gt;
&gt; &gt; It is on its way to the CPAN - may take a while to be seen on
&gt; &gt; whatever mirror you are using.
&gt; &gt;
&gt; &gt; Martin
</div>&gt; 
&gt; It seems that the new version works well on both CentOS and Ubuntu.
&gt; Our
&gt; test suits are running without errors. My pl script works as expected
&gt; too.
&gt; The only thing that still fails are the DBD::ODBC own tests, but I
&gt; guess
&gt; you&#39;ll handle them later :&#41;
&gt; 
&gt; Julian
</div>
Thanks Julian. Your efforts are much appreciated.

I will look at the test failures but some are going to be a real pain as I get a segfault during one test. I&#39;ll mark this issue fixed in 1.51_1.

Martin
-- 
Martin J. Evans
Wetherby, UK
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1433039" href="/Public/Bug/Display.html?id=100186#txn-1433039">#</a>      
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;12:18:48&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1433041" href="/Public/Bug/Display.html?id=100186#txn-1433041">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Nov&nbsp;14&nbsp;12:18:50&nbsp;2014</span>
    <span class="description">bohica [...] ntlworld.com -  Fixed in 1.51_1 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.887018</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
