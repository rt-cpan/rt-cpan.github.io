<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #33955 for Parallel-SubFork: Tests hang on Win32</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #33955 for Parallel-SubFork: Tests hang on Win32</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Parallel-SubFork">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Parallel-SubFork">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Parallel-SubFork">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Parallel-SubFork">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Parallel-SubFork">Parallel-SubFork CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">33955</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Parallel-SubFork">Parallel-SubFork</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
dagolden [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Normal    </td>
  </tr>
  <tr id="CF-221136-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<ul>
<li>
0.01</li>
<li>
0.02</li>
<li>
0.03</li>
</ul>
    </td>
  </tr>
  <tr id="CF-221137-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.04    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=33955">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-432776" href="/Public/Bug/Display.html?id=33955#txn-432776">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;10&nbsp;08:24:41&nbsp;2008</span>
    <span class="description">dagolden [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Tests hang on Win32</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/432776/211839/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/211839">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Tests hang on Win32.  If the module isn&#39;t Win32 compatible at all due to
forking, please see Devel::CheckOS for a way to indicate that in
Makefile.PL.  

Thanks,
David

Running make test
C:\strawberry\perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&#34;test_harness&#40;0,
&#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/*.t
t/00-distribution......skipped: Test::Distribution not installed
t/00-pod-coverage......ok
t/00-signature.........skipped: Set the environment variable
TEST_SIGNATURE to e
nable this test.
t/01-exit..............
#   Failed test &#39;Exit worked properly&#39;
#   at t/01-exit.t line 30.
#          got: undef
#     expected: &#39;42&#39;

#   Failed test &#39;Exec worked properly&#39;
#   at t/01-exit.t line 31.
#          got: undef
#     expected: &#39;12&#39;
# Looks like you failed 2 tests of 4.
 Dubious, test returned 42 &#40;wstat 10752, 0x2a00&#41;
 Failed 2/4 subtests
t/01-manager...........
#   Failed test &#39;Task exit code is fine&#39;
#   at t/01-manager.t line 72.
#          got: undef
#     expected: &#39;57&#39;

#   Failed test &#39;Task status is fine&#39;
#   at t/01-manager.t line 73.
#          got: undef
#     expected: &#39;14592&#39;

#   Failed test &#39;Second wait on the same task, exit code fine&#39;
#   at t/01-manager.t line 83.
#          got: undef
#     expected: &#39;57&#39;

#   Failed test &#39;Second wait on the same task, status fine&#39;
#   at t/01-manager.t line 84.
#          got: undef
#     expected: &#39;14592&#39;

#   Failed test &#39;No more processes&#39;
#   at t/01-manager.t line 90.
#          got: &#39;0&#39;
#     expected: &#39;-1&#39;
# Looks like you failed 5 tests of 17.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-432908" href="/Public/Bug/Display.html?id=33955#txn-432908">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;10&nbsp;14:09:08&nbsp;2008</span>
    <span class="description">emmanuel.rodriguez [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> emmanuel.rodriguez [...] gmail.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/432908/211918/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/211918">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Mar 10 08:24:41 2008, DAGOLDEN wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tests hang on Win32.  If the module isn&#39;t Win32 compatible at all due to
&gt; forking, please see Devel::CheckOS for a way to indicate that in
&gt; Makefile.PL.  
&gt; 
&gt; Thanks,
&gt; David
&gt; 
&gt; Running make test
&gt; C:\strawberry\perl\bin\perl.exe &#34;-MExtUtils::Command::MM&#34; &#34;-e&#34;
&gt; &#34;test_harness&#40;0,
&gt; &#39;blib\lib&#39;, &#39;blib\arch&#39;&#41;&#34; t/*.t
&gt; t/00-distribution......skipped: Test::Distribution not installed
&gt; t/00-pod-coverage......ok
&gt; t/00-signature.........skipped: Set the environment variable
&gt; TEST_SIGNATURE to e
&gt; nable this test.
&gt; t/01-exit..............
&gt; #   Failed test &#39;Exit worked properly&#39;
&gt; #   at t/01-exit.t line 30.
&gt; #          got: undef
&gt; #     expected: &#39;42&#39;
&gt; 
&gt; #   Failed test &#39;Exec worked properly&#39;
&gt; #   at t/01-exit.t line 31.
&gt; #          got: undef
&gt; #     expected: &#39;12&#39;
&gt; # Looks like you failed 2 tests of 4.
&gt;  Dubious, test returned 42 &#40;wstat 10752, 0x2a00&#41;
&gt;  Failed 2/4 subtests
&gt; t/01-manager...........
&gt; #   Failed test &#39;Task exit code is fine&#39;
&gt; #   at t/01-manager.t line 72.
&gt; #          got: undef
&gt; #     expected: &#39;57&#39;
&gt; 
&gt; #   Failed test &#39;Task status is fine&#39;
&gt; #   at t/01-manager.t line 73.
&gt; #          got: undef
&gt; #     expected: &#39;14592&#39;
&gt; 
&gt; #   Failed test &#39;Second wait on the same task, exit code fine&#39;
&gt; #   at t/01-manager.t line 83.
&gt; #          got: undef
&gt; #     expected: &#39;57&#39;
&gt; 
&gt; #   Failed test &#39;Second wait on the same task, status fine&#39;
&gt; #   at t/01-manager.t line 84.
&gt; #          got: undef
&gt; #     expected: &#39;14592&#39;
&gt; 
&gt; #   Failed test &#39;No more processes&#39;
&gt; #   at t/01-manager.t line 90.
&gt; #          got: &#39;0&#39;
&gt; #     expected: &#39;-1&#39;
&gt; # Looks like you failed 5 tests of 17.
</div>
Can you tell me which version of Perl you used? An who&#39;s the provider
&#40;ActiveState, Cygwin&#41;?

I&#39;ve realized that some of the tests have a race condition, although
from the output you pasted this doesn&#39;t seem to be the case.

I will try to take a look at the issue as fast as possible.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-432910" href="/Public/Bug/Display.html?id=33955#txn-432910">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;10&nbsp;14:09:11&nbsp;2008</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-432921" href="/Public/Bug/Display.html?id=33955#txn-432921">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;10&nbsp;14:47:57&nbsp;2008</span>
    <span class="description">dagolden [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #33955] Tests hang on Win32</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 10 Mar 2008 14:47:34 -0400</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parallel-SubFork [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;David Golden&#34; &lt;dagolden [...] cpan.org&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/432921/211926/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/211926">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 805b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Mar 10, 2008 at 2:09 PM, emmanuel.rodriguez@gmail.com via RT
&lt;bug-Parallel-SubFork@rt.cpan.org&gt; wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;  Can you tell me which version of Perl you used? An who&#39;s the provider
&gt;  &#40;ActiveState, Cygwin&#41;?
&gt;
&gt;  I&#39;ve realized that some of the tests have a race condition, although
&gt;  from the output you pasted this doesn&#39;t seem to be the case.
&gt;
&gt;  I will try to take a look at the issue as fast as possible.
</div>
I&#39;m using Strawberry Perl 5.10 on Windows XP.  I think the issue is
that you&#39;re trying to signal with SIGHUP -- which isn&#39;t supported on
Win32.  &#40;See the section about signals in perldoc perlwin32&#41;. If your
child threads just sleep a couple seconds instead, the test don&#39;t hang
anymore.  &#40;Though they do fail the tests&#41;.

Ultimately, fork on Windows is dicey because of pseudo-forks.

David
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-433192" href="/Public/Bug/Display.html?id=33955#txn-433192">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;11&nbsp;04:58:07&nbsp;2008</span>
    <span class="description">potyl [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> emmanuel.rodriguez [...] gmail.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/433192/212040/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/212040">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1014b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m using Strawberry Perl 5.10 on Windows XP.  I think the issue is
&gt; that you&#39;re trying to signal with SIGHUP -- which isn&#39;t supported on
&gt; Win32.  &#40;See the section about signals in perldoc perlwin32&#41;. If your
&gt; child threads just sleep a couple seconds instead, the test don&#39;t hang
&gt; anymore.  &#40;Though they do fail the tests&#41;.
&gt; 
&gt; Ultimately, fork on Windows is dicey because of pseudo-forks.
&gt; 
&gt; David
</div>
At first my tests where written with a sleep, this made them longer to
execute and less error prone with the race condition. Nevertheless, the
race condition was still there.

I will rewrite my tests to use a semaphore instead this will remove the
race condition, also adding an alarm should help to ensure that the
tests dont hang and that they fail in the case of another race condition.

As for windows, this seems to be another issue, the logs you pasted me
clearly show that the signal/fork stuff is not working right. I will
take the proper measures in order to test or probe this particular case.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-433455" href="/Public/Bug/Display.html?id=33955#txn-433455">#</a>      
    </span>
    <span class="date">Tue&nbsp;Mar&nbsp;11&nbsp;18:27:16&nbsp;2008</span>
    <span class="description">potyl [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> emmanuel.rodriguez [...] gmail.com</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/433455/212195/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/212195">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Mar 11 04:58:07 2008, POTYL wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed"><div class="message-stanza open">&gt; &gt; I&#39;m using Strawberry Perl 5.10 on Windows XP.  I think the issue is
&gt; &gt; that you&#39;re trying to signal with SIGHUP -- which isn&#39;t supported on
&gt; &gt; Win32.  &#40;See the section about signals in perldoc perlwin32&#41;. If your
&gt; &gt; child threads just sleep a couple seconds instead, the test don&#39;t hang
&gt; &gt; anymore.  &#40;Though they do fail the tests&#41;.
&gt; &gt; 
&gt; &gt; Ultimately, fork on Windows is dicey because of pseudo-forks.
&gt; &gt; 
&gt; &gt; David
</div>&gt; 
&gt; At first my tests where written with a sleep, this made them longer to
&gt; execute and less error prone with the race condition. Nevertheless, the
&gt; race condition was still there.
&gt; 
&gt; I will rewrite my tests to use a semaphore instead this will remove the
&gt; race condition, also adding an alarm should help to ensure that the
&gt; tests dont hang and that they fail in the case of another race condition.
&gt; 
&gt; As for windows, this seems to be another issue, the logs you pasted me
&gt; clearly show that the signal/fork stuff is not working right. I will
&gt; take the proper measures in order to test or probe this particular case.
</div>
I create a new set of tests. They should be less prone to errors as
alarm is used everywhere in order to ensure that the tests don&#39;t hang.

I&#39;ve replace the kill/pause system calls by semaphores &#40;which aren&#39;t
implemented under windows&#41;.

I checked on IRC and fork seems really broken in windows. The best is to
completely skip the tests that actually fork.

The version 0.03 should fix the hang on Win32.

Thanks for the bug report.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-434986" href="/Public/Bug/Display.html?id=33955#txn-434986">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;02:03:40&nbsp;2008</span>
    <span class="description">potyl [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-434988" href="/Public/Bug/Display.html?id=33955#txn-434988">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;02:03:41&nbsp;2008</span>
    <span class="description">potyl [...] cpan.org -  Fixed in 0.04 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-434989" href="/Public/Bug/Display.html?id=33955#txn-434989">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;02:03:41&nbsp;2008</span>
    <span class="description">potyl [...] cpan.org -  Broken in 0.01 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-434990" href="/Public/Bug/Display.html?id=33955#txn-434990">#</a>      
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;02:03:41&nbsp;2008</span>
    <span class="description">potyl [...] cpan.org -  Broken in 0.02 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-434991" href="/Public/Bug/Display.html?id=33955#txn-434991">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Sat&nbsp;Mar&nbsp;15&nbsp;02:03:41&nbsp;2008</span>
    <span class="description">potyl [...] cpan.org -  Broken in 0.03 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.484516</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
