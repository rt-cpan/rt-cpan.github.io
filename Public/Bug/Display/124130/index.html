<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #124130 for Crypt-SMIME: 0.21 no make under windows</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #124130 for Crypt-SMIME: 0.21 no make under windows</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Crypt-SMIME/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Crypt-SMIME/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Crypt-SMIME/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Crypt-SMIME/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Crypt-SMIME">Crypt-SMIME CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">124130</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Crypt-SMIME/Active/">Crypt-SMIME</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">mikage [...] ymir.co.jp
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Thomas.Eckardt [...] thockar.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45496-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-45497-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.23    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Jan&nbsp;19&nbsp;02:48:25&nbsp;2018</span>
    <span class="description">Thomas.Eckardt [...] thockar.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0.21 no make under windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 19 Jan 2018 08:47:54 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Crypt-SMIME [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Thomas Eckardt&#34; &lt;thomas.eckardt [...] thockar.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 0.21 no make under windows</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">The Makefile.pl in 0.21 contains nix &#39;only&#39; commands. This requires MSYS 
or linux utils under windows.

    depend              =&gt; {
        &#39;lib/SMIME.pm&#39;
          =&gt; &#34;SMIME.pl SMIME.pod const-autoload.inc\n&#34; .
             &#34;\tmkdir -p lib\n&#34; .
             &#34;\techo \&#34;# This file is automatically generated from 
SMIME.pl\&#34;           &gt; \$\@\n&#34; .
             &#34;\techo \&#34;# All of your changes will be lost if you edit this 
directly.\&#34; &gt;&gt; \$\@\n&#34; .
             &#34;\tcat SMIME.pl  &gt;&gt; \$\@\n&#34; .
             &#34;\tcat const-autoload.inc &gt;&gt; \$\@\n&#34; .
             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\techo __END__  &gt;&gt; \$\@\n&#34; .
             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\tcat SMIME.pod &gt;&gt; \$\@\n&#34;,

        &#39;SMIME.pod&#39;
          =&gt; &#34;SMIME.mlpod\n&#34; .
             &#34;\tmlpod2pod \$&lt; &gt; \$\@&#34;,

        &#39;lib/SMIME/JA.pod&#39;
          =&gt; &#34;SMIME.mlpod\n&#34; .
             &#34;\tmkdir -p lib/SMIME\n&#34; .
             &#34;\tmlpod2pod --langs=ja \$&lt; | perl -pe 
&#39;s/&#40;\\xe5\\x90\\x8d\\xe5\\x89\\x8d&#41;/NAME/&#39; &gt; \$\@&#34;,
    }, 


to make it on windows, commands have to be changed to

    depend              =&gt; {
        &#39;lib/SMIME.pm&#39;
          =&gt; &#34;SMIME.pl SMIME.pod const-autoload.inc\n&#34; .
#             &#34;\tmkdir lib\n&#34; .
             &#34;\techo \&#34;# This file is automatically generated from 
SMIME.pl\&#34;           &gt; \$\@\n&#34; .
             &#34;\techo \&#34;# All of your changes will be lost if you edit this 
directly.\&#34; &gt;&gt; \$\@\n&#34; .
             &#34;\ttype SMIME.pl  &gt;&gt; \$\@\n&#34; .
             &#34;\ttype const-autoload.inc &gt;&gt; \$\@\n&#34; .
             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\techo __END__  &gt;&gt; \$\@\n&#34; .
             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\ttype SMIME.pod &gt;&gt; \$\@\n&#34;,

        &#39;SMIME.pod&#39;
          =&gt; &#34;SMIME.mlpod\n&#34; .
             &#34;\tmlpod2pod \$&lt; &gt; \$\@&#34;,

        &#39;lib/SMIME/JA.pod&#39;
          =&gt; &#34;SMIME.mlpod\n&#34; .
#             &#34;\tmkdir lib/SMIME\n&#34; .
             &#34;\tmlpod2pod --langs=ja \$&lt; | perl -pe 
&#39;s/&#40;\\xe5\\x90\\x8d\\xe5\\x89\\x8d&#41;/NAME/&#39; &gt; \$\@&#34;,
    }, 

mkdir is not required, because the folders already exists - how ever, 
there is no &#39;-p&#39; switch under windows and mkdir fails if the folder 
already exists

&#40; -d &#39;lib&#39; ? &#39;&#39; : &#34;\tmkdir lib\n&#34;&#41; .
and
&#40; -d &#39;lib/SMIME&#39; ? &#39;&#39; : &#34;\tmkdir lib/SMIME\n&#34;&#41; .

will work on every OS

doing something like:

my $cat = $^O eq &#39;MSWin32&#39; ? &#39;type&#39; : &#39;cat&#39;;
...
 &#34;\t$cat SMIME.pl  &gt;&gt; \$\@\n&#34; .
...

would solve the problem for &#39;cat&#39;

The complete section may look like:

...
my $USE_PROXYSUBS = $^V gt v5.14.0; 
my $cat = $^O eq &#39;MSWin32&#39; ? &#39;type&#39; : &#39;cat&#39;;
...
...
    depend              =&gt; {
        &#39;lib/SMIME.pm&#39;
          =&gt; &#34;SMIME.pl SMIME.pod const-autoload.inc\n&#34; .
             &#40; -d &#39;lib&#39; ? &#39;&#39; : &#34;\tmkdir lib\n&#34;&#41; .
             &#34;\techo \&#34;# This file is automatically generated from 
SMIME.pl\&#34;           &gt; \$\@\n&#34; .
             &#34;\techo \&#34;# All of your changes will be lost if you edit this 
directly.\&#34; &gt;&gt; \$\@\n&#34; .
             &#34;\t$cat SMIME.pl  &gt;&gt; \$\@\n&#34; .
             &#34;\t$cat const-autoload.inc &gt;&gt; \$\@\n&#34; .
             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\techo __END__  &gt;&gt; \$\@\n&#34; .
             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\t$cat SMIME.pod &gt;&gt; \$\@\n&#34;,

        &#39;SMIME.pod&#39;
          =&gt; &#34;SMIME.mlpod\n&#34; .
             &#34;\tmlpod2pod \$&lt; &gt; \$\@&#34;,

        &#39;lib/SMIME/JA.pod&#39;
          =&gt; &#34;SMIME.mlpod\n&#34; .
             &#40; -d &#39;lib/SMIME&#39; ? &#39;&#39; : &#34;\tmkdir lib/SMIME\n&#34;&#41; .
             &#34;\tmlpod2pod --langs=ja \$&lt; | perl -pe 
&#39;s/&#40;\\xe5\\x90\\x8d\\xe5\\x89\\x8d&#41;/NAME/&#39; &gt; \$\@&#34;,
    }, 
...



Thomas




DISCLAIMER:
*******************************************************
This email and any files transmitted with it may be confidential, legally 
privileged and protected in law and are intended solely for the use of the 

individual to whom it is addressed.
This email was multiple times scanned for viruses. There should be no 
known virus in this email!
*******************************************************
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;02:06:04&nbsp;2018</span>
    <span class="description">mikage [...] ymir.co.jp -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Applied your changes and released 0.22. Thank you very much for your suggestion.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;02:06:05&nbsp;2018</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;02:06:05&nbsp;2018</span>
    <span class="description">mikage [...] ymir.co.jp -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Set odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;02:06:05&nbsp;2018</span>
    <span class="description">mikage [...] ymir.co.jp -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Jan&nbsp;22&nbsp;05:24:46&nbsp;2018</span>
    <span class="description">Thomas.Eckardt [...] thockar.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #124130] Resolved: 0.21 no make under windows</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 22 Jan 2018 11:24:20 +0100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Crypt-SMIME [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Thomas Eckardt&#34; &lt;thomas.eckardt [...] thockar.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #124130] Resolved: 0.21 no make under windows</td>
  </tr>
</table>
<div class="messageattachments">

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you very much,

but there is an additionally fix in the Makefile.PL required. I think this 
was my mistake - my fixlist was incomplete. I&#39;m sorry!

&lt;1&gt;

....
1             &#34;\techo \&#34;# This file is automatically generated from 
SMIME.pl\&#34;           &gt; \$\@\n&#34; .
2            &#34;\techo \&#34;# All of your changes will be lost if you edit this 
directly.\&#34; &gt;&gt; \$\@\n&#34; .
             &#34;\t$CAT SMIME.pl  &gt;&gt; \$\@\n&#34; .
             &#34;\t$CAT const-autoload.inc &gt;&gt; \$\@\n&#34; .
5             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\techo __END__  &gt;&gt; \$\@\n&#34; .
7             &#34;\techo          &gt;&gt; \$\@\n&#34; .
             &#34;\t$CAT SMIME.pod &gt;&gt; \$\@\n&#34;, 
....

lines 1 and 2 produces an syntaxerror in SMIME.pl, because the 
doublequotes are written to the file on windows
lines 5 and 7 produces an syntaxerror in SMIME.pl, because windows writes 
an local language dependend error string to the file, if no character is 
defined in the &#39;echo&#39; command

This can be fixed  the following way

....
my $USE_PROXYSUBS = $^V gt v5.14.0;
my $CAT = $^O eq &#39;MSWin32&#39; ? &#39;type&#39; : &#39;cat&#39;;
my $SEP = $^O eq &#39;MSWin32&#39; ? &#39;&#39; : &#39;\&#34;&#39;; 
....
    depend              =&gt; {
        &#39;lib/SMIME.pm&#39;
          =&gt; &#34;SMIME.pl SMIME.pod const-autoload.inc\n&#34; .
             &#40; -d &#39;lib&#39; ? &#39;&#39; : &#34;\tmkdir lib\n&#34;&#41; .
            &#34;\techo $SEP# This file is automatically generated from 
SMIME.pl$SEP           &gt; \$\@\n&#34; .
            &#34;\techo $SEP# All of your changes will be lost if you edit 
this directly.$SEP &gt;&gt; \$\@\n&#34; .
             &#34;\t$CAT SMIME.pl  &gt;&gt; \$\@\n&#34; .
             &#34;\t$CAT const-autoload.inc &gt;&gt; \$\@\n&#34; .
             &#34;\techo #        &gt;&gt; \$\@\n&#34; .
             &#34;\techo __END__  &gt;&gt; \$\@\n&#34; .
             &#34;\techo #        &gt;&gt; \$\@\n&#34; .
             &#34;\t$CAT SMIME.pod &gt;&gt; \$\@\n&#34;, 
....

The &#39;#&#39; in lines 5 and 7 is a bit &#39;quick and dirty&#39; but it works. Possibly 
the lines 5 to7 should be provided in a separate file and then to &#39;$CAT&#39; 
this file.


&lt;2&gt;

The following test fails on windows, because a file &#39;SMIME.def&#39; was 
created at compile time

t/manifest.t .......... 1/2
#   Failed test &#39;No extra files that aren&#39;t in MANIFEST&#39;
#   at t/manifest.t line 18.
# Not in MANIFEST: SMIME.def
# Looks like you failed 1 test of 2.
t/manifest.t .......... Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/2 subtests

adding the line

^SMIME\.def$

to MANIFEST.SKIP solves this for GCC on windows. But other compilers may 
produce other additionally files. I recommend to change the manifest.t 
test to warn or infom instead to fail for additionally found files or even 
better to remove this test for additionally files.
Skipping the second test in manifest.t on windows OS may be also an 
solution - see the working example.

manifest.t::

#!perl
use strict;
use warnings;
use ExtUtils::Manifest qw&#40;fullcheck&#41;;
use Test::More tests =&gt; &#40;$^O eq &#39;MSWin32&#39; ? 1 : 2&#41;; # windows has only one 
test

my &#40;$missing, $extra&#41; = do {
    local $ExtUtils::Manifest::Quiet = 1;
    fullcheck&#40;&#41;;
};

# check for missing files in every case
ok !scalar @$missing, &#39;No missing files that are in MANIFEST&#39;
  or do {
      diag &#34;No such file: $_&#34; foreach @$missing;
  };

# check for additonally files - but not on windows
if &#40;$^O ne &#39;MSWin32&#39;&#41; {
  ok !scalar @$extra, &#39;No extra files that aren\&#39;t in MANIFEST&#39;
    or do {
        diag &#34;Not in MANIFEST: $_&#34; foreach @$extra;
    };
}


&lt;3&gt;

The README file should contain a hint for windows users related to 
libcrypto. Depending on the used perl disribution &#40;eg. ActivePerl&#41; it may 
required to install openssl and to set ENV variables before running the 
Makefile.PL.

openssl has to be installed first - and openssl/bin must be in PATH for 
the module tests
the ENV for LIBCRYPTO_CFLAGS should point to the openssl include folder
the ENV for LIBCRYPTO_LIBS should point to the openssl libraries

example:

set PATH=C:\openssl\bin;%PATH%
set LIBCRYPTO_CFLAGS=-IC:/openssl/include
set LIBCRYPTO_LIBS=&#34;c:/openssl/lib/libeay32.lib&#34; 
&#34;c:/openssl/lib/ssleay32.lib&#34;

Strawberry perl always provides a full nix compatible libcrypro 
environment. There are no settings or additionally installations required 
for this perl distribution.


&lt;4&gt;

I also get some warning at compile time - but the module tests are fine 
and the module is running without an issue in my application.

gcc ...... SMIME.c
In file included from C:\perl\perl\lib\CORE/perl.h:3880:0,
                 from SMIME.xs:20:
SMIME.xs: In function &#39;XS_Crypt__SMIME_setPublicKeyStore&#39;:
C:\perl\perl\lib\CORE/iperlsys.h:723:39: warning: passing argument 3 of 
&#39;&#40;&#40;PerlInterpreter *&#41;Perl_get_context&#40;&#41;&#41;-&gt;ILIO-&gt;pNameStat&#39; from 
incompatible pointer type [-Wincompatible-pointer-types]
  &#40;*PL_LIO-&gt;pNameStat&#41;&#40;PL_LIO, &#40;name&#41;, &#40;buf&#41;&#41;
                                       ^
C:\perl\perl\lib\CORE/XSUB.h:611:26: note: in expansion of macro 
&#39;PerlLIO_stat&#39;
 #    define stat&#40;buf,sb&#41; PerlLIO_stat&#40;buf,sb&#41;
                          ^~~~~~~~~~~~
SMIME.xs:697:17: note: in expansion of macro &#39;stat&#39;
             if &#40;stat&#40;pathname, &#38;bufstat&#41; != 0&#41; {
                 ^
C:\perl\perl\lib\CORE/iperlsys.h:723:39: note: expected &#39;struct _stat64 *&#39; 
but argument is of type &#39;struct stat *&#39;
  &#40;*PL_LIO-&gt;pNameStat&#41;&#40;PL_LIO, &#40;name&#41;, &#40;buf&#41;&#41;
                                       ^
C:\perl\perl\lib\CORE/XSUB.h:611:26: note: in expansion of macro 
&#39;PerlLIO_stat&#39;
 #    define stat&#40;buf,sb&#41; PerlLIO_stat&#40;buf,sb&#41;
                          ^~~~~~~~~~~~
SMIME.xs:697:17: note: in expansion of macro &#39;stat&#39;
             if &#40;stat&#40;pathname, &#38;bufstat&#41; != 0&#41; {

g++ SMIME.def -o blib\arch\auto\Crypt\SMIME\SMIME.xs.dll -mdll ....

&lt;build OK&gt;
&lt;test OK&gt;

perl -V output is:

Summary of my perl5 &#40;revision 5 version 26 subversion 1&#41; configuration:

  Platform:
    osname=MSWin32
    osvers=6.3
    archname=MSWin32-x64-multi-thread
    uname=&#39;Win32 strawberry-perl 5.26.1.1 #1 Sun Sep 24 05:32:33 2017 x64&#39;
    config_args=&#39;undef&#39;
    hint=recommended
    useposix=true
    d_sigaction=undef
    useithreads=define
    usemultiplicity=define
    use64bitint=define
    use64bitall=undef
    uselongdouble=undef
    usemymalloc=n
    default_inc_excludes_dot=define
    bincompat5005=undef
  Compiler:
    cc=&#39;gcc&#39;
    ccflags =&#39; -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE 
-D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT 
-DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing 
-mms-bitfields&#39;
    optimize=&#39;-s -O2&#39;
    cppflags=&#39;-DWIN32&#39;
    ccversion=&#39;&#39;
    gccversion=&#39;7.1.0&#39;
    gccosandvers=&#39;&#39;
    intsize=4
    longsize=4
    ptrsize=8
    doublesize=8
    byteorder=12345678
    doublekind=3
    d_longlong=define
    longlongsize=8
    d_longdbl=define
    longdblsize=16
    longdblkind=3
    ivtype=&#39;long long&#39;
    ivsize=8
    nvtype=&#39;double&#39;
    nvsize=8
    Off_t=&#39;long long&#39;
    lseeksize=8
    alignbytes=8
    prototype=define
  Linker and Libraries:
    ld=&#39;g++.exe&#39;
    ldflags =&#39;-s -L&#34;C:\perl\perl\lib\CORE&#34; -L&#34;C:\perl\c\lib&#34;&#39;
    libpth=C:\perl\c\lib C:\perl\c\x86_64-w64-mingw32\lib 
C:\perl\c\lib\gcc\x86_64-w64-mingw32\7.1.0
    libs= -lmoldname -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 
-ladvapi32 -lshell32 -lole32 -loleaut32 -lnetapi32 -luuid -lws2_32 -lmpr 
-lwinmm -lversion -lodbc32 -lodbccp32 -lcomctl32
    perllibs= -lmoldname -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 
-ladvapi32 -lshell32 -lole32 -loleaut32 -lnetapi32 -luuid -lws2_32 -lmpr 
-lwinmm -lversion -lodbc32 -lodbccp32 -lcomctl32
    libc=
    so=dll
    useshrplib=true
    libperl=libperl526.a
    gnulibc_version=&#39;&#39;
  Dynamic Linking:
    dlsrc=dl_win32.xs
    dlext=xs.dll
    d_dlsymun=undef
    ccdlflags=&#39; &#39;
    cccdlflags=&#39; &#39;
    lddlflags=&#39;-mdll -s -L&#34;C:\perl\perl\lib\CORE&#34; -L&#34;C:\perl\c\lib&#34;&#39;


Characteristics of this binary &#40;from libperl&#41;:
  Compile-time options:
    HAS_TIMES
    HAVE_INTERP_INTERN
    MULTIPLICITY
    PERLIO_LAYERS
    PERL_COPY_ON_WRITE
    PERL_DONT_CREATE_GVSV
    PERL_IMPLICIT_CONTEXT
    PERL_IMPLICIT_SYS
    PERL_MALLOC_WRAP
    PERL_OP_PARENT
    PERL_PRESERVE_IVUV
    USE_64_BIT_INT
    USE_ITHREADS
    USE_LARGE_FILES
    USE_LOCALE
    USE_LOCALE_COLLATE
    USE_LOCALE_CTYPE
    USE_LOCALE_NUMERIC
    USE_LOCALE_TIME
    USE_PERLIO
    USE_PERL_ATOF
  Built under MSWin32
  Compiled at Sep 24 2017 05:47:34
  @INC:
    c:/perl/perl/site/lib/MSWin32-x64-multi-thread
    c:/perl/perl/site/lib
    c:/perl/perl/vendor/lib
    c:/perl/perl/lib

Best regards

Thomas





Von:    &#34;SANO Taku via RT&#34; &lt;bug-Crypt-SMIME@rt.cpan.org&gt;
An:     Thomas.Eckardt@thockar.com
Datum:  22.01.2018 08:06
Betreff:        [rt.cpan.org #124130] Resolved: 0.21 no make under windows



&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=124130">https://rt.cpan.org/Ticket/Display.html?id=124130</a></span> &gt;

According to our records, your request has been resolved. If you have any
further questions or concerns, please respond to this message.







DISCLAIMER:
*******************************************************
This email and any files transmitted with it may be confidential, legally 
privileged and protected in law and are intended solely for the use of the 

individual to whom it is addressed.
This email was multiple times scanned for viruses. There should be no 
known virus in this email!
*******************************************************
</div></div>

<div class="messagebody">
<p>Message body is not shown because it is too large.</p></div>
</div>

<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;24&nbsp;20:56:26&nbsp;2018</span>
    <span class="description">mikage [...] ymir.co.jp -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks. Applied your changes and released 0.23.
As for the warning, it&#39;s coming from a deeply esoteric labyrinth of
C preprocessor macros internally used by Perl, and I have no clue what is happening and why.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;24&nbsp;20:56:27&nbsp;2018</span>
    <span class="description">mikage [...] ymir.co.jp -  Fixed in 0.23 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
