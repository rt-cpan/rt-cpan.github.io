<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #102785 for DateTime: 1895-02-01 Australia/Melbourne - Invalid local time for date in time zone: Australia/Melbourne</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #102785 for DateTime: 1895-02-01 Australia/Melbourne - Invalid local time for date in time zone: Australia/Melbourne</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=DateTime">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=DateTime">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=DateTime">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=DateTime">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>




<div id="external_bugtracker">
<h3>Preferred bug tracker</h3>
<p>
<div>Please visit the <a href="https://github.com/houseabsolute/DateTime.pm/issues">preferred bug tracker</a> to report your issue.</div>
</p>
</div>

<p>This queue is for tickets about the <a href="https://metacpan.org/release/DateTime">DateTime CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">102785</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=DateTime">DateTime</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
brettrann [...] gmail.com

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9734-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-9735-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=102785">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1473744" href="/Public/Bug/Display.html?id=102785#txn-1473744">#</a>      
    </span>
    <span class="date">Sun&nbsp;Mar&nbsp;15&nbsp;08:15:50&nbsp;2015</span>
    <span class="description">brettrann [...] gmail.com -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> 1895-02-01 Australia/Melbourne - Invalid local time for date in time zone: Australia/Melbourne</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sun, 15 Mar 2015 23:15:30 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-DateTime [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> brett rann &lt;brettrann [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1473744/784814/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/784814">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 966b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Using DateTime-1.85:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; perl -e &#39;use DateTime; print new DateTime&#40;year =&gt; 1895, month =&gt; 02, day
</div>=&gt; 01, time_zone =&gt; &#34;Australia/Melbourne&#34;&#41;, $/;&#39;

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Invalid local time for date in time zone: Australia/Melbourne
</div>
It works with surrounding days, months, years.

I note this code in:
perl5/DateTime/TimeZone/Australia/Melbourne.pm

  20 my $spans =
  21 [
  22     [
  23 DateTime::TimeZone::NEG_INFINITY, #    utc_start
  24 59771571608, #      utc_end 1895-01-31 14:20:08 &#40;Thu&#41;
  25 DateTime::TimeZone::NEG_INFINITY, #  local_start
  26 59771606400, #    local_end 1895-02-01 00:00:00 &#40;Fri&#41;
  27 34792,
  28 0,
  29 &#39;LMT&#39;,
  30     ],
  31     [
  32 59771571608, #    utc_start 1895-01-31 14:20:08 &#40;Thu&#41;
  33 60463116060, #      utc_end 1916-12-31 14:01:00 &#40;Sun&#41;
  34 59771607608, #  local_start 1895-02-01 00:20:08 &#40;Fri&#41;
  35 60463152060, #    local_end 1917-01-01 00:01:00 &#40;Mon&#41;
  36 36000,
  37 0,
  38 &#39;AEST&#39;,
  39     ],

Something is possibly not right there.
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1473744/784815/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/784815">with headers</a>
<br />
<span class="downloadcontenttype">text/html 1.4k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1474049" href="/Public/Bug/Display.html?id=102785#txn-1474049">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;11:40:49&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1474049/785011/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/785011">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Sun Mar 15 08:15:50 2015, brettrann@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Using DateTime-1.85:
&gt; 
<div class="message-stanza open">&gt; &gt; perl -e &#39;use DateTime; print new DateTime&#40;year =&gt; 1895, month =&gt; 02, day
</div>&gt; =&gt; 01, time_zone =&gt; &#34;Australia/Melbourne&#34;&#41;, $/;&#39;
&gt; 
<div class="message-stanza open">&gt; &gt; Invalid local time for date in time zone: Australia/Melbourne
</div>&gt; 
&gt; It works with surrounding days, months, years.
&gt; 
&gt; I note this code in:
&gt; perl5/DateTime/TimeZone/Australia/Melbourne.pm
&gt; 
&gt;   20 my $spans =
&gt;   21 [
&gt;   22     [
&gt;   23 DateTime::TimeZone::NEG_INFINITY, #    utc_start
&gt;   24 59771571608, #      utc_end 1895-01-31 14:20:08 &#40;Thu&#41;
&gt;   25 DateTime::TimeZone::NEG_INFINITY, #  local_start
&gt;   26 59771606400, #    local_end 1895-02-01 00:00:00 &#40;Fri&#41;
&gt;   27 34792,
&gt;   28 0,
&gt;   29 &#39;LMT&#39;,
&gt;   30     ],
&gt;   31     [
&gt;   32 59771571608, #    utc_start 1895-01-31 14:20:08 &#40;Thu&#41;
&gt;   33 60463116060, #      utc_end 1916-12-31 14:01:00 &#40;Sun&#41;
&gt;   34 59771607608, #  local_start 1895-02-01 00:20:08 &#40;Fri&#41;
&gt;   35 60463152060, #    local_end 1917-01-01 00:01:00 &#40;Mon&#41;
&gt;   36 36000,
&gt;   37 0,
&gt;   38 &#39;AEST&#39;,
&gt;   39     ],
&gt; 
&gt; Something is possibly not right there.
</div>
I&#39;m not sure what you expected. Looking at the raw Olson data files, I see that Australia/Melbourne moved from an offset of +09:39.52 to +10:00.00 on February 1, 1895. That means that the clocks moved forward slightly more than 20 minutes, leaving a 20 minute gap in the local time that simply doesn&#39;t exist.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1474050" href="/Public/Bug/Display.html?id=102785#txn-1474050">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;11:40:50&nbsp;2015</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1474137" href="/Public/Bug/Display.html?id=102785#txn-1474137">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;16:00:44&nbsp;2015</span>
    <span class="description">brettrann [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102785] 1895-02-01 Australia/Melbourne - Invalid local time for date in time zone: Australia/Melbourne</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 17 Mar 2015 07:00:21 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-DateTime [...] rt.cpan.org&#34; &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Brett Rann &lt;brettrann [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1474137/785061/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/785061">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I expected to be able to get a date object representing that day, when time wasn&#39;t specified. Not the library dying acting as if that was too hard. If the beginning of that day needs to be 20:08 then so be it. 

Well. The programmer that used DateTime to format years did. 



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On 17 Mar 2015, at 02:41, Dave Rolsky via RT &lt;bug-DateTime@rt.cpan.org&gt; wrote:
&gt; 
&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102785">https://rt.cpan.org/Ticket/Display.html?id=102785</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt;&gt; On Sun Mar 15 08:15:50 2015, brettrann@gmail.com wrote:
&gt;&gt; Using DateTime-1.85:
&gt;&gt; 
<div class="message-stanza open">&gt;&gt;&gt; perl -e &#39;use DateTime; print new DateTime&#40;year =&gt; 1895, month =&gt; 02, day
</div>&gt;&gt; =&gt; 01, time_zone =&gt; &#34;Australia/Melbourne&#34;&#41;, $/;&#39;
&gt;&gt; 
<div class="message-stanza open">&gt;&gt;&gt; Invalid local time for date in time zone: Australia/Melbourne
</div>&gt;&gt; 
&gt;&gt; It works with surrounding days, months, years.
&gt;&gt; 
&gt;&gt; I note this code in:
&gt;&gt; perl5/DateTime/TimeZone/Australia/Melbourne.pm
&gt;&gt; 
&gt;&gt;  20 my $spans =
&gt;&gt;  21 [
&gt;&gt;  22     [
&gt;&gt;  23 DateTime::TimeZone::NEG_INFINITY, #    utc_start
&gt;&gt;  24 59771571608, #      utc_end 1895-01-31 14:20:08 &#40;Thu&#41;
&gt;&gt;  25 DateTime::TimeZone::NEG_INFINITY, #  local_start
&gt;&gt;  26 59771606400, #    local_end 1895-02-01 00:00:00 &#40;Fri&#41;
&gt;&gt;  27 34792,
&gt;&gt;  28 0,
&gt;&gt;  29 &#39;LMT&#39;,
&gt;&gt;  30     ],
&gt;&gt;  31     [
&gt;&gt;  32 59771571608, #    utc_start 1895-01-31 14:20:08 &#40;Thu&#41;
&gt;&gt;  33 60463116060, #      utc_end 1916-12-31 14:01:00 &#40;Sun&#41;
&gt;&gt;  34 59771607608, #  local_start 1895-02-01 00:20:08 &#40;Fri&#41;
&gt;&gt;  35 60463152060, #    local_end 1917-01-01 00:01:00 &#40;Mon&#41;
&gt;&gt;  36 36000,
&gt;&gt;  37 0,
&gt;&gt;  38 &#39;AEST&#39;,
&gt;&gt;  39     ],
&gt;&gt; 
&gt;&gt; Something is possibly not right there.
</div>&gt; 
&gt; I&#39;m not sure what you expected. Looking at the raw Olson data files, I see that Australia/Melbourne moved from an offset of +09:39.52 to +10:00.00 on February 1, 1895. That means that the clocks moved forward slightly more than 20 minutes, leaving a 20 minute gap in the local time that simply doesn&#39;t exist.
&gt; 
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1474142" href="/Public/Bug/Display.html?id=102785#txn-1474142">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;16:24:33&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1474142/785066/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/785066">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Mar 16 16:00:44 2015, brettrann@gmail.com wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I expected to be able to get a date object representing that day, when
&gt; time wasn&#39;t specified. Not the library dying acting as if that was too
&gt; hard. If the beginning of that day needs to be 20:08 then so be it.
</div>
There&#39;s no need to be snarky. When I asked what you expected I really wanted to know what you thought was wrong. I missed that you didn&#39;t specify a time in the code sample you provided.

The offset moved from +09:39.52 to +10:00.00 at midnight, so midnight on that day doesn&#39;t exist in the local time. You can verify this by running this command - &#34;zdump -v Australia/Melbourne&#34;, which outputs the following:

    Australia/Melbourne  Thu Jan 31 14:20:07 1895 UT = Thu Jan 31 23:59:59 1895 LMT isdst=0 gmtoff=34792
    Australia/Melbourne  Thu Jan 31 14:20:08 1895 UT = Fri Feb  1 00:20:08 1895 AEST isdst=0 gmtoff=36000

As you can see, it skips from 23:59:59 to 00:20:08. Time zones are weird.

If you want to just represent dates and do date math without worrying about times, you should create all your dates using the floating time zone, which is a sort of &#34;fake&#34; zone that doesn&#39;t have any DST transitions.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1474145" href="/Public/Bug/Display.html?id=102785#txn-1474145">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;16:24:39&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1474298" href="/Public/Bug/Display.html?id=102785#txn-1474298">#</a>      
    </span>
    <span class="date">Mon&nbsp;Mar&nbsp;16&nbsp;19:40:54&nbsp;2015</span>
    <span class="description">brettrann [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102785] 1895-02-01 Australia/Melbourne - Invalid local time for date in time zone: Australia/Melbourne</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 17 Mar 2015 10:40:43 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-DateTime [...] rt.cpan.org&#34; &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> brett rann &lt;brettrann [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1474298/785151/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/785151">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Dave,

I really wasn&#39;t being snarky. Lost in translations perhaps. You asked what
I expected, so I replied with what I expected the behavior to be. I&#39;ll be
more explicit.

In this case, the DateTime library is being used primarily as a date
formatter. The code to do so is generic, and so is unaware if it is being
passed just a date, or a date with time component. System wide the timezone
is set, and so it sets that always.

So in this use case it is taking a day, building a DateTime object, and
then asking it to format it into a different format.

I assume what is happening is when not passed any time components during
construction it defaults to to 0s, and then applies the timezone, which
breaks because that time never actually existed.

I wonder if better behavior in that circumstance would be to &#34;default&#34; it
to the beginning of that day, rather than enforcing a specific time
component that may be invalid with certain timezone and then die. Is it not
a reasonable question to ask for a DateTime object for a year month and day
in a given timezone, and have it return something valid? And if the
beginning of that day is not 00:00:00 then given it wasn&#39;t asked to be
that, it can be set to whatever it should be?


On Tue, Mar 17, 2015 at 7:24 AM, Dave Rolsky via RT &lt;
bug-DateTime@rt.cpan.org&gt; wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=102785">https://rt.cpan.org/Ticket/Display.html?id=102785</a></span> &gt;
&gt;
&gt; On Mon Mar 16 16:00:44 2015, brettrann@gmail.com wrote:
<div class="message-stanza open">&gt; &gt; I expected to be able to get a date object representing that day, when
&gt; &gt; time wasn&#39;t specified. Not the library dying acting as if that was too
&gt; &gt; hard. If the beginning of that day needs to be 20:08 then so be it.
</div>&gt;
&gt; There&#39;s no need to be snarky. When I asked what you expected I really
&gt; wanted to know what you thought was wrong. I missed that you didn&#39;t specify
&gt; a time in the code sample you provided.
&gt;
&gt; The offset moved from +09:39.52 to +10:00.00 at midnight, so midnight on
&gt; that day doesn&#39;t exist in the local time. You can verify this by running
&gt; this command - &#34;zdump -v Australia/Melbourne&#34;, which outputs the following:
&gt;
&gt;     Australia/Melbourne  Thu Jan 31 14:20:07 1895 UT = Thu Jan 31 23:59:59
&gt; 1895 LMT isdst=0 gmtoff=34792
&gt;     Australia/Melbourne  Thu Jan 31 14:20:08 1895 UT = Fri Feb  1 00:20:08
&gt; 1895 AEST isdst=0 gmtoff=36000
&gt;
&gt; As you can see, it skips from 23:59:59 to 00:20:08. Time zones are weird.
&gt;
&gt; If you want to just represent dates and do date math without worrying
&gt; about times, you should create all your dates using the floating time zone,
&gt; which is a sort of &#34;fake&#34; zone that doesn&#39;t have any DST transitions.
&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1474298/785152/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/785152">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.1k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1490699" href="/Public/Bug/Display.html?id=102785#txn-1490699">#</a>      
    </span>
    <span class="date">Mon&nbsp;Apr&nbsp;27&nbsp;12:15:50&nbsp;2015</span>
    <span class="description">DROLSKY [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1490699/793854/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/793854">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon Mar 16 19:40:54 2015, brettrann@gmail.com wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I assume what is happening is when not passed any time components
&gt; during
&gt; construction it defaults to to 0s, and then applies the timezone,
&gt; which
&gt; breaks because that time never actually existed.
</div>
Yes, that&#39;s what is happening.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I wonder if better behavior in that circumstance would be to &#34;default&#34;
&gt; it
&gt; to the beginning of that day, rather than enforcing a specific time
&gt; component that may be invalid with certain timezone and then die. Is
&gt; it not
&gt; a reasonable question to ask for a DateTime object for a year month
&gt; and day
&gt; in a given timezone, and have it return something valid? And if the
&gt; beginning of that day is not 00:00:00 then given it wasn&#39;t asked to be
&gt; that, it can be set to whatever it should be?
</div>
This would be nice, but I can&#39;t really change DateTime&#39;s defaults now. What I really wish I had provided was a separate date-only class, since I think that&#39;s what you want here.

That all said, if you&#39;re just trying to use DateTime to format _dates_ &#40;without times&#41;, then you should explicitly specify the &#34;floating&#34; time zone in all constructors and you&#39;ll get the behavior you want.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1490921" href="/Public/Bug/Display.html?id=102785#txn-1490921">#</a>      
    </span>
    <span class="date">Tue&nbsp;Apr&nbsp;28&nbsp;01:36:14&nbsp;2015</span>
    <span class="description">brettrann [...] gmail.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #102785] 1895-02-01 Australia/Melbourne - Invalid local time for date in time zone: Australia/Melbourne</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 28 Apr 2015 15:36:07 +1000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;bug-DateTime [...] rt.cpan.org&#34; &lt;bug-DateTime [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> brett rann &lt;brettrann [...] gmail.com&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/1490921/793980/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/793980">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 129b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yeah, fair enough. And yes, that is what I&#39;m wanting here.

I have made your recommended change and all is working fine. Thanks!
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1490921/793981/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/793981">with headers</a>
<br />
<span class="downloadcontenttype">text/html 249b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.462314</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
