<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #54897 for Parse-RecDescent: Version numbers must never decrease length for ease of packaging</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #54897 for Parse-RecDescent: Version numbers must never decrease length for ease of packaging</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Parse-RecDescent/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Parse-RecDescent/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Parse-RecDescent/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Parse-RecDescent/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Parse-RecDescent">Parse-RecDescent CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">54897</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Parse-RecDescent/Active/">Parse-RecDescent</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
mst [...] shadowcat.co.uk

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-24792-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-24793-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;22&nbsp;21:37:14&nbsp;2010</span>
    <span class="description">mst [...] shadowcat.co.uk -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Version numbers must never decrease length for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Feb 2010 02:36:07 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bugs-Parse-RecDescent [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matt S Trout &lt;mst [...] shadowcat.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">In order to deal with the fact that people don&#39;t always reliably use

0.1
0.2
...
0.9
0.10

versus

0.01
0.02
...
0.09
0.10

version numbers should compare greater both numerically -and- as a string.

Since 1.962 had subversions, subsequent releases also should - so please can
you release either 1.964.1 or 1.964001 to taste and ensure that the length
is maintained from now on.

-- 
        Matt S Trout         Catalyst and DBIx::Class consultancy with a clue
     Technical Director      and a commit bit: <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/catalyst/">http://shadowcat.co.uk/catalyst/</a></span>
 Shadowcat Systems Limited
  mst &#40;@&#41; shadowcat.co.uk        <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/blog/matt-s-trout/">http://shadowcat.co.uk/blog/matt-s-trout/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;22&nbsp;23:45:45&nbsp;2010</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54897] Version numbers must never decrease length  for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Feb 2010 15:44:48 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-RecDescent [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; please can you release either 1.964.1 or 1.964001 to taste and ensure
&gt; that the length is maintained from now on.
</div>
Okay. Will do.

But I&#39;m clearly missing something obvious here because I don&#39;t see how
1.964 &#40;or any future version numbers in that D.DDD, format&#41; will ever
compare incorrectly against any previous version number the module has
had, either numerically or stringifically.

I&#39;m evidently not smart enough to grasp the actual issue, so I&#39;d really be
grateful if you could spare a minute to give me an example of the
problem those extra three digits are solving.

Thanks,

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;22&nbsp;23:45:54&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;23&nbsp;16:20:07&nbsp;2010</span>
    <span class="description">mst [...] shadowcat.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54897] Version numbers must never decrease length  for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 23 Feb 2010 21:19:04 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;damian [...] conway.org via RT&#34; &lt;bug-Parse-RecDescent [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matt S Trout &lt;mst [...] shadowcat.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Mon, Feb 22, 2010 at 11:45:53PM -0500, damian@conway.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=54897">https://rt.cpan.org/Ticket/Display.html?id=54897</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; please can you release either 1.964.1 or 1.964001 to taste and ensure
&gt; &gt; that the length is maintained from now on.
</div>&gt; 
&gt; Okay. Will do.
&gt; 
&gt; But I&#39;m clearly missing something obvious here because I don&#39;t see how
&gt; 1.964 &#40;or any future version numbers in that D.DDD, format&#41; will ever
&gt; compare incorrectly against any previous version number the module has
&gt; had, either numerically or stringifically.
</div>
Ok.

1.962.2

expands as

1.962002

so that&#39;s how people dep on it, since that&#39;s how the numeric equality works.

But this means that the system gets a requirement for that, and

  1.962002 &gt; 1.964

but

  9620002 &lt; 1.964

So if you&#39;re going to do three part version numbers, you need to always use
them once you&#39;ve adopted them - or convert to a six digit minor version and
stay there.

Reducing the number of digits in a two part version has the same problem -

  1.81 &gt; 1.8001

but

  81 &lt; 8001

and you run into the same problem.

Basically, version numbers suck, BUT if you never DECREASE the size of your
minor version &#40;within a given major version&#41; then your version numbers are
consistent under both interpretations and work for everybody.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I&#39;m evidently not smart enough to grasp the actual issue, so I&#39;d really be
&gt; grateful if you could spare a minute to give me an example of the
&gt; problem those extra three digits are solving.
&gt; 
&gt; Thanks,
&gt; 
&gt; Damian
&gt; 
</div>
-- 
        Matt S Trout         Catalyst and DBIx::Class consultancy with a clue
     Technical Director      and a commit bit: <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/catalyst/">http://shadowcat.co.uk/catalyst/</a></span>
 Shadowcat Systems Limited
  mst &#40;@&#41; shadowcat.co.uk        <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/blog/matt-s-trout/">http://shadowcat.co.uk/blog/matt-s-trout/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Tue&nbsp;Feb&nbsp;23&nbsp;17:55:48&nbsp;2010</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54897] Version numbers must never decrease length  for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Feb 2010 09:54:53 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-RecDescent [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thanks for taking the time, Matt.

After having struggled to understand the issue for an embarrassingly
long time, I *think* I have it straight now.

You can never reduce the number of significant decimals in a version
number because of the following scenario:

     1. Multipart version 1.962.1 released
     2. User assumes all future versions will be in &#34;multipart&#34; format
     3. Decimal version 1.962002 released
     4. Under multipart assumption, user treats it as 1.962002.0
     5. Decimal version 1.964 released
     6. Under multipart assumption, user treats it as 1.964.0
     7. User then compares the last two versions using multipart semantics...
         7a. Try first compartment first: 1 == 1
         7b. So try second compartment: 964 &lt; 962002
         7c. So latest version number &lt; previous version number :-&#40;

In other words, once multipart versioning has been used anywhere, you
have to assume that dependency systems can no longer reliably
distinguish between decimal and multipart version numbers, and so must
ensure that the ordering of version numbers works under both interpretations.

Or, in other words...

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Basically, version numbers suck
</div>
AMEN to that!


Thanks again for taking the trouble to explain this issue to me.

Damian


PS: I&#39;m aware that I&#39;m probably still not understanding this issue
    properly, but I don&#39;t want to waste your time any further.
    The partial understanding illustrated above is enough to
    convince me that there&#39;s a real problem here that needs to
    be anticipated and avoided.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;24&nbsp;00:01:30&nbsp;2010</span>
    <span class="description">mst [...] shadowcat.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54897] Version numbers must never decrease length  for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Feb 2010 05:00:31 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;damian [...] conway.org via RT&#34; &lt;bug-Parse-RecDescent [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matt S Trout &lt;mst [...] shadowcat.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue, Feb 23, 2010 at 05:55:51PM -0500, damian@conway.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=54897">http://rt.cpan.org/Ticket/Display.html?id=54897</a></span> &gt;
&gt; 
&gt; Thanks for taking the time, Matt.
&gt; 
&gt; After having struggled to understand the issue for an embarrassingly
&gt; long time, I *think* I have it straight now.
&gt; 
&gt; You can never reduce the number of significant decimals in a version
&gt; number because of the following scenario:
</div>
Actually, it&#39;s worse than that.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;      1. Multipart version 1.962.1 released
&gt;      2. User assumes all future versions will be in &#34;multipart&#34; format
</div>
2. Everything that isn&#39;t sure its users can handle multipart represents this
as 1.962001

In this case, SQL::Translator did so which caused that version number to be
introduced into the arch linux packaging system.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;      5. Decimal version 1.964 released
</div>
And this is all that was required. Because that has decimal version 1.964.

So if somebody *then* treats decimal 1.962001 as multipart 1.962001.0 it
doesn&#39;t compare right to multipart 1.964.0.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;      7. User then compares the last two versions using multipart semantics...
&gt;          7a. Try first compartment first: 1 == 1
&gt;          7b. So try second compartment: 964 &lt; 962002
&gt;          7c. So latest version number &lt; previous version number :-&#40;
</div>
And some packaging systems treat CPAN versions as decimal and some as
multipart &#40;same goes for cpan authors, SQL::Abstract went 0.1 ... 0.9, 0.10,
0.11, ...&#41;.
 
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; In other words, once multipart versioning has been used anywhere, you
&gt; have to assume that dependency systems can no longer reliably
&gt; distinguish between decimal and multipart version numbers
</div>
Actually, no, it&#39;s worse than that. You have to assume that dependency systems
never reliably distinguish between them and that any given system you
encounter may simply assume one or the author.

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; , and so must
&gt; ensure that the ordering of version numbers works under both interpretations.
</div>
You always have to ensure that. But once you&#39;ve used multipart at all, you
have to ensure that the decimalisation of your versioning from then on works
under both interpretations.

You can reliably expect a decimal system to treat 1.962.1 as
sprintf&#40;&#34;%i.%03i%03i&#34;, split&#40;/\./, $version&#41;&#41; - or at least I&#39;ve not *yet*
seen that violated.

But really what that means is &#34;you now have a 6-digit fractional part for
the decimal version of your multipart&#34;.

That&#39;s one rule. The second is &#34;your decimal version must also work as a
two-part multipart&#34;.

Rule 2 is what makes 0.81 after 0.8001 bad in general. Rule 1 is how you
managed not to realise you&#39;d effectively had a 6 digit decimal and then
gone to a 3 digit one.

Does that clear things up, in so far as this subject can ever be clear?

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; PS: I&#39;m aware that I&#39;m probably still not understanding this issue
&gt;     properly, but I don&#39;t want to waste your time any further.
</div>
I&#39;m not finding it a waste, I&#39;m finding it an effective means of eliciting
a clear explanation of this that can be re-used to educate other CPAN authors.

-- 
        Matt S Trout         Catalyst and DBIx::Class consultancy with a clue
     Technical Director      and a commit bit: <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/catalyst/">http://shadowcat.co.uk/catalyst/</a></span>
 Shadowcat Systems Limited
  mst &#40;@&#41; shadowcat.co.uk        <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/blog/matt-s-trout/">http://shadowcat.co.uk/blog/matt-s-trout/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;24&nbsp;00:36:13&nbsp;2010</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54897] Version numbers must never decrease length  for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Feb 2010 16:35:07 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-RecDescent [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Does that clear things up, in so far as this subject can ever be clear?
</div>
Yep. Thanks.

Though it reveals such an appalling mess on misdesigned notations,
misimplemented tools, and misunderstood conventions that I&#39;m *strongly*
tempted to avoid the entire problem in the future and just switch to date-based
integer version numbers, like Abigail uses.

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;24&nbsp;01:27:00&nbsp;2010</span>
    <span class="description">mst [...] shadowcat.co.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54897] Version numbers must never decrease length  for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Feb 2010 06:25:10 +0000</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &#34;damian [...] conway.org via RT&#34; &lt;bug-Parse-RecDescent [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Matt S Trout &lt;mst [...] shadowcat.co.uk&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed, Feb 24, 2010 at 12:36:17AM -0500, damian@conway.org via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=54897">http://rt.cpan.org/Ticket/Display.html?id=54897</a></span> &gt;
&gt; 
<div class="message-stanza open">&gt; &gt; Does that clear things up, in so far as this subject can ever be clear?
</div>&gt; 
&gt; Yep. Thanks.
&gt; 
&gt; Though it reveals such an appalling mess on misdesigned notations,
&gt; misimplemented tools, and misunderstood conventions that I&#39;m *strongly*
&gt; tempted to avoid the entire problem in the future and just switch to date-based
&gt; integer version numbers, like Abigail uses.
</div>
Decimal with the proviso of &#34;never reduce the number of digits after the .&#34;
works fine.

Multipart as a human version with X.YYYzzz as the machine/decimal version
works fine.

I personally dislike date-based because a good human readable version indicates
things to the user - notably &#34;api version, feature additions within this api
version, bugfix release&#34; for the X, Y and Z respectively. And I can read
0.08112 &gt; 0.08109 much much easier than 20081102 &gt; 20081030 when skimming
information.

Once you get the rule of thumb down it&#39;s actually very easy to do right and
still be able to do reasonable things with your versions; the hard part is
understanding the baroque madness that requires the &#34;never reduce&#34; rule.

It&#39;d be a shame to switch versioning styles now after you&#39;ve already lost
the SAN points ... :&#41;

-- 
        Matt S Trout         Catalyst and DBIx::Class consultancy with a clue
     Technical Director      and a commit bit: <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/catalyst/">http://shadowcat.co.uk/catalyst/</a></span>
 Shadowcat Systems Limited
  mst &#40;@&#41; shadowcat.co.uk        <span class="clickylink"><a target="new" rel="nofollow" href="http://shadowcat.co.uk/blog/matt-s-trout/">http://shadowcat.co.uk/blog/matt-s-trout/</a></span>
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Wed&nbsp;Feb&nbsp;24&nbsp;03:08:24&nbsp;2010</span>
    <span class="description">damian [...] conway.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #54897] Version numbers must never decrease length  for ease of packaging</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 24 Feb 2010 19:07:33 +1100</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Parse-RecDescent [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Damian Conway &lt;damian [...] conway.org&gt;</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space"><span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; I personally dislike date-based because a good human readable version indicates
&gt; things to the user - notably &#34;api version, feature additions within this api
&gt; version, bugfix release&#34; for the X, Y and Z respectively.
</div>
Yep. That was why I was tempted, but not yet convinced. I&#39;d be less
tempted if people &#40;myself included&#41; were more consistent about actually
adhering to those conventions.

On the other hand, date-based conveys useful information at a glance
too: how actively the module is being maintained, how stable/dead it is.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; And I can read .08112 &gt; 0.08109 much much easier than 20081102 &gt;
&gt; 20081030 when skimming information.
</div>
I guess that&#39;s down to practice. I actually find the datestamps much
easier to compare, probably because I always use YYYYMMDD or
YYYYMMDD.hhmmss as my datestamping notation, so I&#39;m used to
interpreting numbers in that format.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Once you get the rule of thumb down it&#39;s actually very easy to do right and
&gt; still be able to do reasonable things with your versions; the hard part is
&gt; understanding the baroque madness that requires the &#34;never reduce&#34; rule.
</div>
As this conversation has demonstrated so well.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; It&#39;d be a shame to switch versioning styles now after you&#39;ve already lost
&gt; the SAN points ... :&#41;
</div>
Indeed. Though it&#39;s generous of you to assume I had any SAN points
left to lose. ;-&#41;

Damian
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;29&nbsp;01:58:51&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for the bug report, and detailed explanations.  Following
Damian&#39;s lead, I&#39;ll be keeping version numbers in the following forms:
    X.YYYzzz
    X.YYY_zzz
Along with this code from perlmodsub:
    our $VERSION = &#34;X.YYY_zzz&#34;;
    $version = eval $VERSION;
to allow for decimal comparisons by modules that use Parse::RecDescent.  

Also, X, YYY and zzz will only ever increment.

I believe that this will address the issues you&#39;ve raise.  If this isn&#39;t
sufficient, please reopen the bug.

Thanks!
Jeremy
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Sun&nbsp;Jan&nbsp;29&nbsp;01:58:52&nbsp;2012</span>
    <span class="description">jtbraun [...] CPAN.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
