<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #98806 for Text-BibTeX: problem parsing bare month field</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #98806 for Text-BibTeX: problem parsing bare month field</h1></div>



<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Text-BibTeX/Active/">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Text-BibTeX/Resolved/">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Text-BibTeX/Rejected/">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Dist/Text-BibTeX/Active/"></a></li>
</ul></div>
<div id="topactions">



</div>
<div id="body">


<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Text-BibTeX">Text-BibTeX CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">98806</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Public/Dist/Text-BibTeX/Active/">Text-BibTeX</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
DUFFEE [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-31784-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-31785-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;11&nbsp;14:29:59&nbsp;2014</span>
    <span class="description">DUFFEE [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> problem parsing bare month field</td>
  </tr>
</table>

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Exporting BibTeX format from Zotero doesn&#39;t protect the month field &#40;I don&#39;t know why&#41; and produces &#39;warning: undefined macro &#34;aug&#34;&#39; when I parse the entry and &#39;field &#34;month&#34; has undefined value&#39; when I try to write the entry to a new file.

Don&#39;t know if you consider it a bug in Zotero or a test case you hadn&#39;t considered.  Here&#39;s the entry it choked on.

@article{wu_modeling_2009,
    title = {Modeling scientific-citation patterns and other triangle-rich acyclic networks},
    url = {<span class="clickylink"><a target="new" rel="nofollow" href="http://arxiv.org/abs/0908.2615">http://arxiv.org/abs/0908.2615</a></span>},
    doi = {doi:10.1103/PhysRevE.80.037101},
    abstract = {We propose a model of the evolution of networks},
    journal = {0908.2615},
    author = {Wu, Zhi-Xi and Holme, Petter},
    month = aug,
    year = {2009},
    note = {Phys.Rev.E 80, 037101 &#40;2009&#41;.},
    keywords = {Computer Science - Digital Libraries, Physics - Physics and Society}
}
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;11&nbsp;14:45:07&nbsp;2014</span>
    <span class="description">ambs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 11 14:29:59 2014, DUFFEE wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Exporting BibTeX format from Zotero doesn&#39;t protect the month field &#40;I
&gt; don&#39;t know why&#41; and produces &#39;warning: undefined macro &#34;aug&#34;&#39; when I
&gt; parse the entry and &#39;field &#34;month&#34; has undefined value&#39; when I try to
&gt; write the entry to a new file.
&gt; 
&gt; Don&#39;t know if you consider it a bug in Zotero or a test case you
&gt; hadn&#39;t considered.  Here&#39;s the entry it choked on.
&gt; 
&gt; @article{wu_modeling_2009,
&gt;     title = {Modeling scientific-citation patterns and other triangle-
&gt; rich acyclic networks},
&gt;     url = {<span class="clickylink"><a target="new" rel="nofollow" href="http://arxiv.org/abs/0908.2615">http://arxiv.org/abs/0908.2615</a></span>},
&gt;     doi = {doi:10.1103/PhysRevE.80.037101},
&gt;     abstract = {We propose a model of the evolution of networks},
&gt;     journal = {0908.2615},
&gt;     author = {Wu, Zhi-Xi and Holme, Petter},
&gt;     month = aug,
&gt;     year = {2009},
&gt;     note = {Phys.Rev.E 80, 037101 &#40;2009&#41;.},
&gt;     keywords = {Computer Science - Digital Libraries, Physics -
&gt; Physics and Society}
&gt; }
</div>
Hello, 
Thanks for pointing this up.
In fact, accordingly with the spec &#40;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.bibtex.org/Format/&#41;">http://www.bibtex.org/Format/&#41;</a></span> non quoted strings are references to prior defined strings.

Making me more clear, if in the beginning of the document you have:

@string { aug = &#34;August&#34; } 

then the bibtex would be correct, and should be parsed correctly.

I would prefer if you could poke zotero devs, and see if they can include the quotes, or define the macros they use.

Nevertheless, if you do not get any answers from them, let us know, so we can see if there is an easy way to fix that for you.

Best,
Alberto
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;11&nbsp;14:45:07&nbsp;2014</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;11&nbsp;14:49:29&nbsp;2014</span>
    <span class="description">ambs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello again.

Rereading the spec I noticed that

   month = aug,

is never valid. predefined strings only can be used if they are concatenated with other strings:

   month = aug # &#34;something&#34;,

An the spec also says that values are enclosed in braces or quotes.
Given that the use you mention is not considered at all by the spec, we might just allow it.

Comments, Philip?

Thanks
ambs
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;11&nbsp;16:38:12&nbsp;2014</span>
    <span class="description">DANAJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">bibtex.org is not the spec.  It&#39;s someone&#39;s web site that collected some information, just like I did in 1996 &#40;but hosted on a university server that removed it after 10 years&#41;.

Leslie Lamport, &#34;LaTeX&#34;, 2nd edition, Appendix B, page 159:

&#34;Some abbreviations are predefined by the bibliography style.  These always include the usual three-letter abbreviations for the month: jan, feb, mar, etc.&#34;

Page 163:

&#34;month:  The month in which the work was published or, for an unpublished work, in which it was written.  Use the standard three-letter abbreviations decribed above.&#34;

You should always use the bare three-letter abbreviation.  Why?  So when you change to a style for a French journal it will use the French month names.  For English journals it will know how to properly format the date for the journal&#39;s requirements &#40;Aug, August, 08/year, etc&#41;.  It also helps prevent misspellings and helps translators.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;11&nbsp;16:45:07&nbsp;2014</span>
    <span class="description">ambs [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 11 16:38:12 2014, DANAJ wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; bibtex.org is not the spec.  It&#39;s someone&#39;s web site that collected
&gt; some information, just like I did in 1996 &#40;but hosted on a university
&gt; server that removed it after 10 years&#41;.
&gt; 
&gt; Leslie Lamport, &#34;LaTeX&#34;, 2nd edition, Appendix B, page 159:
&gt; 
&gt; &#34;Some abbreviations are predefined by the bibliography style.  These
&gt; always include the usual three-letter abbreviations for the month:
&gt; jan, feb, mar, etc.&#34;
&gt; 
&gt; Page 163:
</div>

Ok, good catch.
Thanks. Do not have the book at home :-&#41;

Will work on it.
Cheers
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;11&nbsp;17:00:14&nbsp;2014</span>
    <span class="description">DANAJ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">By the way, here is a link to the site I had back then:

<span class="clickylink"><a target="new" rel="nofollow" href="https://web.archive.org/web/20020605035122/http://www.ecst.csuchico.edu/~jacobsd/bib/formats/index.html">https://web.archive.org/web/20020605035122/http://www.ecst.csuchico.edu/~jacobsd/bib/formats/index.html</a></span>

Sadly CPAN didn&#39;t exist when I worked on my module, and right about the time it started I got a job and stopped doing Perl for a while.  Someday I should move my library to a proper module, but then I&#39;d want to clean it up from its Perl 4 and pre-Unicode state, which would take quite a bit of time.  It still works &#40;albeit now with a defined&#40;%hash&#41; warning&#41; and has some advantages over the other modules, but it&#39;s *old*.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      &nbsp;      
    </span>
    <span class="date">Fri&nbsp;Sep&nbsp;12&nbsp;05:19:20&nbsp;2014</span>
    <span class="description">DUFFEE [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      

<div class="messagebody">
<div class="message-stanza plain-text-white-space">Wow ...

So on Dana&#39;s information, I won&#39;t file a bug with Zotero and let Alberto work on it.  It&#39;s not a problem for me any more.  My work around was to pre-process the file with

perl -i -pe &#39;s/month = &#40;\w+&#41;,/month = \{$1\},/&#39; file.bib

With that in place, the module works very well as I try to convert accented characters to LaTeX acceptable forms.
    $author =~ s/ñ/\\~\{n\}/g

Many thanks,
Boyd

On Thu Sep 11 16:38:12 2014, DANAJ wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Leslie Lamport, &#34;LaTeX&#34;, 2nd edition, Appendix B, page 159:
&gt; 
&gt; &#34;Some abbreviations are predefined by the bibliography style.  These
&gt; always include the usual three-letter abbreviations for the month:
&gt; jan, feb, mar, etc.&#34;
</div></div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
</body>
</html>
