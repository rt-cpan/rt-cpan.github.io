<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #17887 for GDGraph: line_width does not accept an array reference</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #17887 for GDGraph: line_width does not accept an array reference</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=GDGraph">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=GDGraph">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=GDGraph">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=GDGraph">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/GDGraph">GDGraph CPAN distribution</a>.</p>


<h3>Maintainer&#40;s&#41;&#39; notes</h3>

<p>There are plenty of good ideas of what people can do published here on the queue. Turning a patch from the tracker into a pull request is not one of them. In order to get maintainers' attention way more quickier, PR should have at least a sample included. We know it's hard to test images generating software, but it doesn't mean we can not test numbers produced by intermediate algorithms used to generate these images, so either a test or a sample.</p>



<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">17887</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">open</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=GDGraph">GDGraph</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">bwarfield [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
michael [...] ndrix.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Wishlist    </td>
  </tr>
  <tr id="CF-14346-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
1.4307    </td>
  </tr>
  <tr id="CF-14347-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




line_width-multiple.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/168968/54794/line_width-multiple.patch">
Mon Feb 27 16:35:40 2006 (3.5k) by michael [...] ndrix.org
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=17887">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-168968" href="/Public/Bug/Display.html?id=17887#txn-168968">#</a>      
    </span>
    <span class="date">Mon&nbsp;Feb&nbsp;27&nbsp;16:35:40&nbsp;2006</span>
    <span class="description">michael [...] ndrix.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> line_width does not accept an array reference</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/168968/54791/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/54791">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 536b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">When using lines and linespoints graphs, all the lines in the graph must
have the same width.  I&#39;ve found it useful to be able to independently
specify the width of each line in the graph.

I&#39;ve attached a patch which allows for code like this

  $graph-&gt;set&#40; line_width =&gt; [1, 5, 10] &#41;

which would make the first &#40;fourth, seventh&#41; line 1 pixel wide, the
second line &#40;fifth, eighth&#41; 5 pixels wide and the third &#40;sixth, ninth&#41;
10 pixels wide.

Of course, the current behavior is still supported.  The patch also
includes a sample graph.
</div></div>
</div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> line_width-multiple.patch</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/168968/54794/line_width-multiple.patch">Download line_width-multiple.patch</a><br />
<span class="downloadcontenttype">text/x-diff 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">=== Graph/lines.pm
==================================================================
--- Graph/lines.pm	&#40;revision 5&#41;
+++ Graph/lines.pm	&#40;patch - level 1&#41;
@@ -70,7 +70,7 @@
 
         if &#40;defined $xb&#41;
         {
-            $self-&gt;draw_line&#40;$xb, $yb, $xe, $ye, $type, $dsci&#41;
+            $self-&gt;draw_line&#40;$xb, $yb, $xe, $ye, $type, $dsci, $ds&#41;
                 if defined $dsci;
             $self-&gt;{_hotspots}-&gt;[$ds]-&gt;[$i] = 
                 [&#39;line&#39;, $xb, $yb, $xe, $ye, $self-&gt;{line_width}];
@@ -91,12 +91,22 @@
         $num % 4 ? $num % 4 : 4
 }
 
-sub draw_line # &#40;$xs, $ys, $xe, $ye, $type, $colour_index&#41;
+sub pick_line_width
 {
     my $self = shift;
-    my &#40;$xs, $ys, $xe, $ye, $type, $clr&#41; = @_;
+    my $num = shift;
 
     my $lw = $self-&gt;{line_width};
+    return $lw if !ref $lw;
+    return $lw-&gt;[ $num % &#40; 1 + $#$lw &#41; - 1 ];
+}
+
+sub draw_line # &#40;$xs, $ys, $xe, $ye, $type, $colour_index, $ds&#41;
+{
+    my $self = shift;
+    my &#40;$xs, $ys, $xe, $ye, $type, $clr, $ds&#41; = @_;
+
+    my $lw = $self-&gt;pick_line_width&#40;$ds&#41;;
     my $lts = $self-&gt;{line_type_scale};
 
     my $style = gdStyled;
=== samples/sample52-t.pl
==================================================================
--- samples/sample52-t.pl	&#40;revision 5&#41;
+++ samples/sample52-t.pl	&#40;patch - level 1&#41;
@@ -0,0 +1,39 @@
+use GD::Graph::lines;
+require &#39;save.pl&#39;;
+
+print STDERR &#34;Processing sample52-t\n&#34;;
+
+@data = &#40; 
+    [ qw&#40; Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec&#41; ],
+    [ reverse&#40;4, 3, 5, 6, 3,  1.5, -1, -3, -4, -6, -7, -8&#41;],
+    [        &#40;4, 3, 5, 6, 3,  1.5, -1, -3, -4, -6, -7, -8&#41;],
+    [        &#40;2, 2, 2, 5, 5,  4.5,1.5,  2,  3,  5,  4,  3&#41;],
+&#41;;
+
+$my_graph = new GD::Graph::lines&#40;&#41;;
+
+$my_graph-&gt;set&#40; 
+	x_label =&gt; &#39;Month&#39;,
+	y_label =&gt; &#39;Measure of success&#39;,
+	title =&gt; &#39;A Line Graph with Varying Line Widths&#39;,
+
+	y_max_value =&gt; 8,
+	y_min_value =&gt; -8,
+	y_tick_number =&gt; 16,
+	y_label_skip =&gt; 2,
+	box_axis =&gt; 0,
+	line_width =&gt; [ 1, 5, 3 ],
+	zero_axis_only =&gt; 1,
+	x_label_position =&gt; 1,
+	y_label_position =&gt; 1,
+
+	x_label_skip =&gt; 3,
+	x_tick_offset =&gt; 2,
+
+	transparent =&gt; 0,
+&#41;;
+
+$my_graph-&gt;set_legend&#40;&#34;Us&#34;, &#34;Them&#34;, &#34;Others&#34;&#41;;
+$my_graph-&gt;plot&#40;\@data&#41;;
+save_chart&#40;$my_graph, &#39;sample52-t&#39;&#41;;
+
=== samples/Makefile
==================================================================
--- samples/Makefile	&#40;revision 5&#41;
+++ samples/Makefile	&#40;patch - level 1&#41;
@@ -30,7 +30,7 @@
     sample21 sample22 sample23 \
     sample31 \
     sample41 sample42\
-    sample51 sample52 sample53 sample54 sample55 sample56 \
+    sample51 sample52 sample52-t sample53 sample54 sample55 sample56 \
     sample57 \
     sample61 sample62 sample63 sample64  \
     sample71 \

Property changes on: samples
___________________________________________________________________
Name: svn:ignore
 +*.png
 +

=== Graph.pm
==================================================================
--- Graph.pm	&#40;revision 5&#41;
+++ Graph.pm	&#40;patch - level 1&#41;
@@ -1306,8 +1306,16 @@
 =item line_width
 
 The width of the line used in I&lt;lines&gt; and I&lt;linespoints&gt; graphs, in pixels.
-Default: 1.
+If C&lt;line_width&gt; is a scalar value, that width will be used for all lines.  If
+C&lt;line_width&gt; is a reference to an array, the contents of the array specify
+the line widths for each line.  If there are too few values in the array
+reference, the values are &#34;recycled&#34;.  For example, to alternate between lines
+one pixel wide and lines five pixels wide, one might do something like
 
+    $graph-&gt;set&#40; line_width =&gt; [1, 5] &#41;;
+
+Default: 1 &#40;make all lines 1 pixel wide&#41;
+
 =item skip_undef
 
 For all other axes graph types, the default behaviour is &#40;by their
</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction people Take even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-169593" href="/Public/Bug/Display.html?id=17887#txn-169593">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;01&nbsp;17:57:12&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Taken</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-169594" href="/Public/Bug/Display.html?id=17887#txn-169594">#</a>      
    </span>
    <span class="date">Wed&nbsp;Mar&nbsp;01&nbsp;17:57:21&nbsp;2006</span>
    <span class="description">bwarfield [...] cpan.org -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1226712" href="/Public/Bug/Display.html?id=17887#txn-1226712">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;21&nbsp;16:51:39&nbsp;2013</span>
    <span class="description">RUZ [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> New GD::Graph co-maintainer and new release on CPAN</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/1226712/648080/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/648080">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 514b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

You recieved this message as you filed a bug report or feature request against GD::Graph module on CPAN.

My name is Ruslan and I&#39;m new co-maintainer of the module. I&#39;ve updated the module to 1.45 with doc changes and released it to CPAN. See distribution status [1].

I have TODO list for several releases, so if your ticket was a patch then turning it into a nice pull request may expedite inclusion :&#41;

[1] <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS">http://search.cpan.org/~ruz/GDGraph-1.45/Graph.pm#DISTRIBUTION_STATUS</a></span>

-- 
Best regards, Ruslan.
</div></div>
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.325949</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
