<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #50849 for libnet: Net::FTP Bug 41878</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #50849 for libnet: Net::FTP Bug 41878</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=libnet">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=libnet">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=libnet">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=libnet">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/libnet">libnet CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">50849</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=libnet">libnet</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Jamie.Young [...] datamail.co.nz

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-18284-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-18285-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
1.22_01    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    




  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=50849">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682487" href="/Public/Bug/Display.html?id=50849#txn-682487">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;16:58:35&nbsp;2009</span>
    <span class="description">Jamie.Young [...] datamail.co.nz -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net::FTP Bug 41878</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 27 Oct 2009 09:57:50 +1300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-libnet [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jamie Young&#34; &lt;Jamie.Young [...] datamail.co.nz&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/682487/351434/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351434">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

This bug has been opened since December 22 2008. I took a look at the
code in the Net::FTP module - it looks like fixing it should be pretty
simple. I&#39;m a unix admin and do a lot of perl programming - can I write
a block of code that would fix this bug to help out? I&#39;m going to have
to write a workaround in my code anyway.

Thanks,

Jamie Young
Unix Administrator
Enterprise Services

Datamail Ltd
1 Victoria Street
Petone
Lower Hutt 5012
PO Box 31249
Lower Hutt 5040
Phone: + 64 4 568 8200  Extn: 8718
DDI:     + 64 4 576 4325
Fax:     + 64 4 568 9600
www.datamail.co.nz &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.datamail.co.nz/">http://www.datamail.co.nz/</a></span>&gt; 


&lt;/PRE&gt;&lt;div style=&#34;font-size:8pt;font-family:Tahoma,Arial; text-align:justify; color:gray;&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;hr size=&#34;0&#34;&gt;
At the Datamail Group we value teamwork, respect, achievement, client focus, and courage.&lt;br&gt;&lt;br&gt;This email with any attachments is confidential and may be subject to legal privilege.  If it is not intended for you please advise by replying immediately, destroy it and do not copy, disclose or use it in any way.&lt;br&gt;&lt;br&gt;&lt;/div&gt;
&lt;span lang=EN-AU style=&#39;font-size:18.0pt;font-family:Webdings;
color:green&#39;&gt;P&lt;/span&gt;&lt;span lang=EN-AU&gt;&#38;nbsp;&lt;/span&gt;&lt;span lang=EN-AU
style=&#39;font-size:7.5pt;font-family:&#34;Verdana&#34;,&#34;sans-serif&#34;&#39;&gt; &lt;span
style=&#39;color:green&#39;&gt;The Datamail Group, through our GoGreen programme, is committed to environmental sustainability.  Help us in our efforts by not printing this email.&lt;/span&gt;&lt;/span&gt;&lt;hr size=&#34;0&#34;&gt;
&lt;/PRE&gt;&lt;div style=&#34;font-size:8pt;font-family:Arial; text-align:center;&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;hr size=&#34;0&#34;&gt;
This email has been scanned by the DMZGlobal Business Quality Electronic Messaging Suite.&lt;br&gt;
Please see &lt;a href=&#34;http://www.dmzglobal.com/dmzmessaging.htm&#34;&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dmzglobal.com/dmzmessaging.htm">http://www.dmzglobal.com/dmzmessaging.htm</a></span>&lt;/a&gt; for details.&lt;br&gt;
&lt;hr size=&#34;0&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682487/351435/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351435">with headers</a>
<br />
<span class="downloadcontenttype">text/html 4.7k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682490" href="/Public/Bug/Display.html?id=50849#txn-682490">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;17:01:07&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50849] Net::FTP Bug 41878 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Oct 2009 16:00:45 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682490/351438/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351438">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 555b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Oct 26, 2009, at 3:58 PM, Jamie Young via RT wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; This bug has been opened since December 22 2008. I took a look at the
&gt; code in the Net::FTP module - it looks like fixing it should be pretty
&gt; simple. I&#39;m a unix admin and do a lot of perl programming - can I  
&gt; write
&gt; a block of code that would fix this bug to help out? I&#39;m going to have
&gt; to write a workaround in my code anyway.
</div>
sure any help is appreciated.

if you are familiar with git then there is a git repository on github  
at <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/gbarr/perl-libnet">http://github.com/gbarr/perl-libnet</a></span>

Thanks,
Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682491" href="/Public/Bug/Display.html?id=50849#txn-682491">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;17:01:08&nbsp;2009</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682549" href="/Public/Bug/Display.html?id=50849#txn-682549">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;18:07:32&nbsp;2009</span>
    <span class="description">Jamie.Young [...] datamail.co.nz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #50849] Net::FTP Bug 41878 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 27 Oct 2009 11:06:57 +1300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-libnet [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jamie Young&#34; &lt;Jamie.Young [...] datamail.co.nz&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/682549/351482/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351482">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;m not familiar with github - do I need to submit something to some kind of SVN or something?

To fix the bug you only need to comment out/remove the lines I&#39;ve highlighted below in the rmdir subroutine. If it fails to delete a file it may be because of the permissions of the file itself are too tight, not just that it&#39;s a directory.

sub rmdir {
  @_ == 2 || @_ == 3 or croak&#40;&#39;usage: $ftp-&gt;rmdir&#40; DIR [, RECURSE ] &#41;&#39;&#41;;
 
  # Pick off the args
  my &#40;$ftp, $dir, $recurse&#41; = @_;
  my $ok;
 
  return $ok
    if $ok = $ftp-&gt;_RMD&#40;$dir&#41;
    or !$recurse;
 
  # Try to delete the contents
  # Get a list of all the files in the directory
  my @filelist = grep { !/^\.{1,2}$/ } $ftp-&gt;ls&#40;$dir&#41;;
 
  return undef
    unless @filelist; # failed, it is probably not a directory
 
  # Go thru and delete each file or the directory
  my $file;
  foreach $file &#40;map { m,/, ? $_ : &#34;$dir/$_&#34; } @filelist&#41; {
next # successfully deleted the file
if $ftp-&gt;delete&#40;$file&#41;;
 
# Failed to delete it, assume its a directory
# Recurse and ignore errors, the final rmdir&#40;&#41; will
# fail on any errors here
return $ok
unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
}
 
# Directory should be empty
# Try to remove the directory again
# Pass results directly to caller
# If any of the prior deletes failed, this
# rmdir&#40;&#41; will fail because directory is not empty
return $ftp-&gt;_RMD&#40;$dir&#41;;
}



Thanks,

Jamie Young
Unix Administrator
Enterprise Services

Datamail Ltd
1 Victoria Street
Petone
Lower Hutt 5012
PO Box 31249
Lower Hutt 5040
Phone: + 64 4 568 8200  Extn: 8718
DDI:     + 64 4 576 4325
Fax:     + 64 4 568 9600
www.datamail.co.nz


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Graham Barr via RT [mailto:bug-libnet@rt.cpan.org] 
Sent: Tuesday, 27 October 2009 10:01 a.m.
To: Jamie Young
Subject: Re: [rt.cpan.org #50849] Net::FTP Bug 41878 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50849">https://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;

On Oct 26, 2009, at 3:58 PM, Jamie Young via RT wrote:
<div class="message-stanza open">&gt; This bug has been opened since December 22 2008. I took a look at the
&gt; code in the Net::FTP module - it looks like fixing it should be pretty
&gt; simple. I&#39;m a unix admin and do a lot of perl programming - can I  
&gt; write
&gt; a block of code that would fix this bug to help out? I&#39;m going to have
&gt; to write a workaround in my code anyway.
</div>
sure any help is appreciated.

if you are familiar with git then there is a git repository on github  
at <span class="clickylink"><a target="new" rel="nofollow" href="http://github.com/gbarr/perl-libnet">http://github.com/gbarr/perl-libnet</a></span>

Thanks,
Graham.


&lt;/PRE&gt;&lt;div style=&#34;font-size:8pt;font-family:Tahoma,Arial; text-align:justify; color:gray;&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;hr size=&#34;0&#34;&gt;
At the Datamail Group we value teamwork, respect, achievement, client focus, and courage.&lt;br&gt;&lt;br&gt;This email with any attachments is confidential and may be subject to legal privilege.  If it is not intended for you please advise by replying immediately, destroy it and do not copy, disclose or use it in any way.&lt;br&gt;&lt;br&gt;&lt;/div&gt;
&lt;span lang=EN-AU style=&#39;font-size:18.0pt;font-family:Webdings;
color:green&#39;&gt;P&lt;/span&gt;&lt;span lang=EN-AU&gt;&#38;nbsp;&lt;/span&gt;&lt;span lang=EN-AU
style=&#39;font-size:7.5pt;font-family:&#34;Verdana&#34;,&#34;sans-serif&#34;&#39;&gt; &lt;span
style=&#39;color:green&#39;&gt;The Datamail Group, through our GoGreen programme, is committed to environmental sustainability.  Help us in our efforts by not printing this email.&lt;/span&gt;&lt;/span&gt;&lt;hr size=&#34;0&#34;&gt;
&lt;/PRE&gt;&lt;div style=&#34;font-size:8pt;font-family:Arial; text-align:center;&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;hr size=&#34;0&#34;&gt;
This email has been scanned by the DMZGlobal Business Quality Electronic Messaging Suite.&lt;br&gt;
Please see &lt;a href=&#34;http://www.dmzglobal.com/dmzmessaging.htm&#34;&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dmzglobal.com/dmzmessaging.htm">http://www.dmzglobal.com/dmzmessaging.htm</a></span>&lt;/a&gt; for details.&lt;br&gt;
&lt;hr size=&#34;0&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682549/351483/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351483">with headers</a>
<br />
<span class="downloadcontenttype">text/html 10k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682576" href="/Public/Bug/Display.html?id=50849#txn-682576">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;18:58:07&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50849] Net::FTP Bug 41878 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Oct 2009 17:57:39 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682576/351501/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351501">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 655b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Oct 26, 2009, at 5:07 PM, Jamie Young via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: libnet
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50849">https://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;
&gt;
&gt; I&#39;m not familiar with github - do I need to submit something to some  
&gt; kind of SVN or something?
</div>
if you are not familiar do not worry about it

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; To fix the bug you only need to comment out/remove the lines I&#39;ve  
&gt; highlighted below in the rmdir subroutine. If it fails to delete a  
&gt; file it may be because of the permissions of the file itself are too  
&gt; tight, not just that it&#39;s a directory.
</div>
the ticket system removes any markup you may have added. please send a  
diff of the changes

Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682593" href="/Public/Bug/Display.html?id=50849#txn-682593">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;19:26:24&nbsp;2009</span>
    <span class="description">Jamie.Young [...] datamail.co.nz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #50849] Net::FTP Bug 41878 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 27 Oct 2009 12:26:07 +1300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-libnet [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jamie Young&#34; &lt;Jamie.Young [...] datamail.co.nz&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682593/351511/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351511">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I&#39;ve done a diff of before &#38; after: is this what you want?

602,603c602,603
&lt; return $ok
&lt; unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
---
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; #return $ok
&gt; #unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
</div>
Thanks,

Jamie Young
Unix Administrator
Enterprise Services

Datamail Ltd
1 Victoria Street
Petone
Lower Hutt 5012
PO Box 31249
Lower Hutt 5040
Phone: + 64 4 568 8200  Extn: 8718
DDI:     + 64 4 576 4325
Fax:     + 64 4 568 9600
www.datamail.co.nz


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Graham Barr via RT [mailto:bug-libnet@rt.cpan.org] 
Sent: Tuesday, 27 October 2009 11:58 a.m.
To: Jamie Young
Subject: Re: [rt.cpan.org #50849] Net::FTP Bug 41878 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=50849">http://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;


On Oct 26, 2009, at 5:07 PM, Jamie Young via RT wrote:

<div class="message-stanza open">&gt;       Queue: libnet
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50849">https://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;
&gt;
&gt; I&#39;m not familiar with github - do I need to submit something to some  
&gt; kind of SVN or something?
</div>
if you are not familiar do not worry about it

<div class="message-stanza open">&gt; To fix the bug you only need to comment out/remove the lines I&#39;ve  
&gt; highlighted below in the rmdir subroutine. If it fails to delete a  
&gt; file it may be because of the permissions of the file itself are too  
&gt; tight, not just that it&#39;s a directory.
</div>
the ticket system removes any markup you may have added. please send a  
diff of the changes

Graham.


At the Datamail Group we value teamwork, respect, achievement, client focus, and courage. 
This email with any attachments is confidential and may be subject to legal privilege.  
If it is not intended for you please advise by replying immediately, destroy it and do not 
copy, disclose or use it in any way.

The Datamail Group, through our GoGreen programme, is committed to environmental sustainability.  
Help us in our efforts by not printing this email.
<div class="message-stanza open">__________________________________________________________________
  This email has been scanned by the DMZGlobal Business Quality
              Electronic Messaging Suite.
Please see <span class="clickylink"><a target="new" rel="nofollow" href="http://www.dmzglobal.com/dmzmessaging.htm">http://www.dmzglobal.com/dmzmessaging.htm</a></span> for details.
<div class="message-stanza open">__________________________________________________________________
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682602" href="/Public/Bug/Display.html?id=50849#txn-682602">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;19:31:05&nbsp;2009</span>
    <span class="description">Jamie.Young [...] datamail.co.nz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #50849] Net::FTP Bug 41878 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 27 Oct 2009 12:30:39 +1300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-libnet [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jamie Young&#34; &lt;Jamie.Young [...] datamail.co.nz&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/682602/351519/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351519">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Sorry - you probably want this diff format:

--- original.pm 2009-10-27 12:10:51.000000000 +1300
+++ modified.pm 2009-10-27 12:13:05.000000000 +1300
@@ -599,8 +599,8 @@
 # Failed to delete it, assume its a directory
 # Recurse and ignore errors, the final rmdir&#40;&#41; will
 # fail on any errors here
-return $ok
-unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
+#return $ok
+#unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
 }

 # Directory should be empty

Thanks,

Jamie Young
Unix Administrator
Enterprise Services

Datamail Ltd
1 Victoria Street
Petone
Lower Hutt 5012
PO Box 31249
Lower Hutt 5040
Phone: + 64 4 568 8200  Extn: 8718
DDI:     + 64 4 576 4325
Fax:     + 64 4 568 9600
www.datamail.co.nz


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Graham Barr via RT [mailto:bug-libnet@rt.cpan.org] 
Sent: Tuesday, 27 October 2009 11:58 a.m.
To: Jamie Young
Subject: Re: [rt.cpan.org #50849] Net::FTP Bug 41878 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=50849">http://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;


On Oct 26, 2009, at 5:07 PM, Jamie Young via RT wrote:

<div class="message-stanza open">&gt;       Queue: libnet
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50849">https://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;
&gt;
&gt; I&#39;m not familiar with github - do I need to submit something to some  
&gt; kind of SVN or something?
</div>
if you are not familiar do not worry about it

<div class="message-stanza open">&gt; To fix the bug you only need to comment out/remove the lines I&#39;ve  
&gt; highlighted below in the rmdir subroutine. If it fails to delete a  
&gt; file it may be because of the permissions of the file itself are too  
&gt; tight, not just that it&#39;s a directory.
</div>
the ticket system removes any markup you may have added. please send a  
diff of the changes

Graham.


&lt;/PRE&gt;&lt;div style=&#34;font-size:8pt;font-family:Tahoma,Arial; text-align:justify; color:gray;&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;hr size=&#34;0&#34;&gt;
At the Datamail Group we value teamwork, respect, achievement, client focus, and courage.&lt;br&gt;&lt;br&gt;This email with any attachments is confidential and may be subject to legal privilege.  If it is not intended for you please advise by replying immediately, destroy it and do not copy, disclose or use it in any way.&lt;br&gt;&lt;br&gt;&lt;/div&gt;
&lt;span lang=EN-AU style=&#39;font-size:18.0pt;font-family:Webdings;
color:green&#39;&gt;P&lt;/span&gt;&lt;span lang=EN-AU&gt;&#38;nbsp;&lt;/span&gt;&lt;span lang=EN-AU
style=&#39;font-size:7.5pt;font-family:&#34;Verdana&#34;,&#34;sans-serif&#34;&#39;&gt; &lt;span
style=&#39;color:green&#39;&gt;The Datamail Group, through our GoGreen programme, is committed to environmental sustainability.  Help us in our efforts by not printing this email.&lt;/span&gt;&lt;/span&gt;&lt;hr size=&#34;0&#34;&gt;
&lt;/PRE&gt;&lt;div style=&#34;font-size:8pt;font-family:Arial; text-align:center;&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;hr size=&#34;0&#34;&gt;
This email has been scanned by the DMZGlobal Business Quality Electronic Messaging Suite.&lt;br&gt;
Please see &lt;a href=&#34;http://www.dmzglobal.com/dmzmessaging.htm&#34;&gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.dmzglobal.com/dmzmessaging.htm">http://www.dmzglobal.com/dmzmessaging.htm</a></span>&lt;/a&gt; for details.&lt;br&gt;
&lt;hr size=&#34;0&#34;&gt;&lt;br&gt;&lt;br&gt;&lt;/div&gt;
</div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682602/351520/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351520">with headers</a>
<br />
<span class="downloadcontenttype">text/html 6.7k</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682608" href="/Public/Bug/Display.html?id=50849#txn-682608">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;21:04:28&nbsp;2009</span>
    <span class="description">gbarr [...] pobox.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #50849] Net::FTP Bug 41878 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Mon, 26 Oct 2009 20:03:59 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-libnet [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Graham Barr &lt;gbarr [...] pobox.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682608/351524/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351524">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">
On Oct 26, 2009, at 6:31 PM, Jamie Young via RT wrote:

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt;       Queue: libnet
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50849">https://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;
&gt;
&gt; Sorry - you probably want this diff format:
&gt;
&gt; --- original.pm 2009-10-27 12:10:51.000000000 +1300
&gt; +++ modified.pm 2009-10-27 12:13:05.000000000 +1300
&gt; @@ -599,8 +599,8 @@
&gt; # Failed to delete it, assume its a directory
&gt; # Recurse and ignore errors, the final rmdir&#40;&#41; will
&gt; # fail on any errors here
&gt; -return $ok
&gt; -unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
&gt; +#return $ok
&gt; +#unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
</div>
I do not think that is the right solution as that will prevent it from  
recursively deleting more that one level

for example if you have a path a/b/c/d

$ftp-&gt;rmdir&#40;&#34;a&#34;,1&#41;; should remove it, but with you change it will fail  
to do so.

I think this patch will resolve the issue

--- a/Net/FTP.pm
+++ b/Net/FTP.pm
@@ -590,6 +590,9 @@ sub rmdir {
    return undef
      unless @filelist;    # failed, it is probably not a directory

+  return $ftp-&gt;delete&#40;$dir&#41;
+    if @filelist == 1 and $dir eq $filelist[0];
+
    # Go thru and delete each file or the directory
    my $file;
    foreach $file &#40;map { m,/, ? $_ : &#34;$dir/$_&#34; } @filelist&#41; {


Graham.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-682621" href="/Public/Bug/Display.html?id=50849#txn-682621">#</a>      
    </span>
    <span class="date">Mon&nbsp;Oct&nbsp;26&nbsp;22:13:04&nbsp;2009</span>
    <span class="description">Jamie.Young [...] datamail.co.nz -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #50849] Net::FTP Bug 41878 </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 27 Oct 2009 15:12:45 +1300</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-libnet [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> &#34;Jamie Young&#34; &lt;Jamie.Young [...] datamail.co.nz&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/682621/351530/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/351530">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Great!

Thanks,

Jamie Young
Unix Administrator
Enterprise Services

Datamail Ltd
1 Victoria Street
Petone
Lower Hutt 5012
PO Box 31249
Lower Hutt 5040
Phone: + 64 4 568 8200  Extn: 8718
DDI:     + 64 4 576 4325
Fax:     + 64 4 568 9600
www.datamail.co.nz


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Graham Barr via RT [mailto:bug-libnet@rt.cpan.org] 
Sent: Tuesday, 27 October 2009 2:04 p.m.
To: Jamie Young
Subject: Re: [rt.cpan.org #50849] Net::FTP Bug 41878 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=50849">http://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;


On Oct 26, 2009, at 6:31 PM, Jamie Young via RT wrote:

<div class="message-stanza open">&gt;       Queue: libnet
&gt; Ticket &lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=50849">https://rt.cpan.org/Ticket/Display.html?id=50849</a></span> &gt;
&gt;
&gt; Sorry - you probably want this diff format:
&gt;
&gt; --- original.pm 2009-10-27 12:10:51.000000000 +1300
&gt; +++ modified.pm 2009-10-27 12:13:05.000000000 +1300
&gt; @@ -599,8 +599,8 @@
&gt; # Failed to delete it, assume its a directory
&gt; # Recurse and ignore errors, the final rmdir&#40;&#41; will
&gt; # fail on any errors here
&gt; -return $ok
&gt; -unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
&gt; +#return $ok
&gt; +#unless $ok = $ftp-&gt;rmdir&#40;$file, 1&#41;;
</div>
I do not think that is the right solution as that will prevent it from  
recursively deleting more that one level

for example if you have a path a/b/c/d

$ftp-&gt;rmdir&#40;&#34;a&#34;,1&#41;; should remove it, but with you change it will fail  
to do so.

I think this patch will resolve the issue

--- a/Net/FTP.pm
+++ b/Net/FTP.pm
@@ -590,6 +590,9 @@ sub rmdir {
    return undef
      unless @filelist;    # failed, it is probably not a directory

+  return $ftp-&gt;delete&#40;$dir&#41;
+    if @filelist == 1 and $dir eq $filelist[0];
+
    # Go thru and delete each file or the directory
    my $file;
    foreach $file &#40;map { m,/, ? $_ : &#34;$dir/$_&#34; } @filelist&#41; {


Graham.


At the Datamail Group we value teamwork, respect, achievement, client focus, and courage. 
This email with any attachments is confidential and may be subject to legal privilege.  
If it is not intended for you please advise by replying immediately, destroy it and do not 
copy, disclose or use it in any way.

The Datamail Group, through our GoGreen programme, is committed to environmental sustainability.  
Help us in our efforts by not printing this email.
<div class="message-stanza open">__________________________________________________________________
  This email has been scanned by the DMZGlobal Business Quality
              Electronic Messaging Suite.
Please see <span class="clickylink"><a target="new" rel="nofollow" href="http://www.dmzglobal.com/dmzmessaging.htm">http://www.dmzglobal.com/dmzmessaging.htm</a></span> for details.
<div class="message-stanza open">__________________________________________________________________
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1246932" href="/Public/Bug/Display.html?id=50849#txn-1246932">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;08&nbsp;04:02:34&nbsp;2013</span>
    <span class="description">shay [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/1246932/659629/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/659629">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 25b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">This is fixed in 1.22_01.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1246935" href="/Public/Bug/Display.html?id=50849#txn-1246935">#</a>      
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;08&nbsp;04:02:35&nbsp;2013</span>
    <span class="description">shay [...] cpan.org -  Status changed from &#39;open&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-1246937" href="/Public/Bug/Display.html?id=50849#txn-1246937">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Thu&nbsp;Aug&nbsp;08&nbsp;04:02:35&nbsp;2013</span>
    <span class="description">shay [...] cpan.org -  Fixed in 1.22_01 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.639945</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
