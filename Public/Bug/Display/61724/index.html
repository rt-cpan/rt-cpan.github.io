<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #61724 for IO-Async: Test failure: socket listens on INADDR_ANY</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #61724 for IO-Async: Test failure: socket listens on INADDR_ANY</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do Iâ€¦?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=IO-Async">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=IO-Async">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=IO-Async">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=IO-Async">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/IO-Async">IO-Async CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">61724</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">resolved</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=IO-Async">IO-Async</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">Nobody in particular
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
squeek [...] cpan.org

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
Critical    </td>
  </tr>
  <tr id="CF-42614-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
0.30    </td>
  </tr>
  <tr id="CF-42615-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
0.31    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




io-async_report.txt<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/837203/433716/io-async_report.txt">
Tue Sep 28 11:52:46 2010 (5.1k) by squeek [...] cpan.org
</a>
</font></li>
</ul>


rt61724.patch<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/837731/433984/rt61724.patch">
Wed Sep 29 11:38:19 2010 (2.4k) by leonerd-cpan [...] leonerd.org.uk
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=61724">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-837203" href="/Public/Bug/Display.html?id=61724#txn-837203">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;28&nbsp;11:52:46&nbsp;2010</span>
    <span class="description">squeek [...] cpan.org -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Test failure: socket listens on INADDR_ANY</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/837203/433715/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/433715">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 505b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Tests speak louder than words:

t/23signal.t ................. ok
#   Failed test &#39;socket listens on INADDR_ANY&#39;
#   at t/24listener.t line 162.
#          got: &#39;
# ?&#39;
#     expected: &#39;&#39;
# Looks like you failed 1 test of 29.
t/24listener.t ............... 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/29 subtests 

I suspect that part of the reason of this failing is that this test was
run inside a FreeBSD jail.

Attached is the complete report itself, which was not sent to the CPAN
reporters.
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> io-async_report.txt</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/837203/433716/io-async_report.txt">Download io-async_report.txt</a><br />
<span class="downloadcontenttype">text/plain 5.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Dear Paul Evans,

This is a computer-generated report for IO-Async-0.30
on perl 5.12.1, created by CPAN-Reporter-1.18.

Thank you for uploading your work to CPAN.  However, there was a problem
testing your distribution.

If you think this report is invalid, please consult the CPAN Testers Wiki
for suggestions on how to avoid getting FAIL reports for missing library
or binary dependencies, unsupported operating systems, and so on:

<span class="clickylink"><a target="new" rel="nofollow" href="http://wiki.cpantesters.org/wiki/CPANAuthorNotes">http://wiki.cpantesters.org/wiki/CPANAuthorNotes</a></span>

Sections of this report:

    * Tester comments
    * Program output
    * Prerequisites
    * Environment and other context

------------------------------
TESTER COMMENTS
------------------------------

Additional comments from tester:

none provided

------------------------------
PROGRAM OUTPUT
------------------------------

Output from &#39;./Build test&#39;:

t/00use.t .................... ok
t/01timequeue.t .............. ok
t/02loop-magic.t ............. ok
t/03loop-osabstract.t ........ ok
t/04notifier.t ............... ok
t/05notifier-child.t ......... ok
t/10loop-poll-io.t ........... ok
t/10loop-select-io.t ......... ok
t/11loop-poll-timer.t ........ ok
t/11loop-select-timer.t ...... ok
t/12loop-poll-signal.t ....... ok
t/12loop-select-signal.t ..... ok
t/13loop-poll-idle.t ......... ok
t/13loop-select-idle.t ....... ok
t/14loop-poll-child.t ........ ok
t/14loop-select-child.t ...... ok
t/15loop-poll-control.t ...... ok
t/15loop-select-control.t .... ok
t/18loop-poll-legacy.t ....... ok
t/18loop-select-legacy.t ..... ok
t/19test.t ................... ok
t/20handle.t ................. ok
t/21stream.t ................. ok
t/22timer-countdown.t ........ ok
t/22timer-periodic.t ......... ok
t/23signal.t ................. ok

#   Failed test &#39;socket listens on INADDR_ANY&#39;
#   at t/24listener.t line 162.
#          got: &#39;
# ?&#39;
#     expected: &#39;&#39;
# Looks like you failed 1 test of 29.
t/24listener.t ............... 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/29 subtests 
t/25socket.t ................. ok
t/30loop-detachchild.t ....... ok
t/31loop-spawnchild.t ........ ok
t/32loop-spawnchild-setup.t .. ok
t/33loop-openchild.t ......... ok
t/34loop-runchild.t .......... ok
t/35loop-child-root.t ........ skipped: not root
t/40detachedcode-marshall.t .. ok
t/41detachedcode-call.t ...... ok
t/50loop-resolve.t ........... ok
t/51loop-connect.t ........... ok

#   Failed test &#39;$listenaddr is INADDR_LOOPBACK&#39;
#   at t/52loop-listen.t line 92.
#          got: &#39;
# ?&#39;
#     expected: &#39;&#39;
# Looks like you failed 1 test of 14.
t/52loop-listen.t ............ 
Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
Failed 1/14 subtests 
t/60protocol.t ............... ok
t/60sequencer-client.t ....... ok
t/60sequencer-server.t ....... ok
t/61protocol-stream.t ........ ok
t/99pod.t .................... ok

Test Summary Report
-------------------
t/24listener.t             &#40;Wstat: 256 Tests: 29 Failed: 1&#41;
  Failed test:  24
  Non-zero exit status: 1
t/52loop-listen.t          &#40;Wstat: 256 Tests: 14 Failed: 1&#41;
  Failed test:  10
  Non-zero exit status: 1
Files=44, Tests=1014, 94 wallclock secs &#40; 1.36 usr  0.62 sys + 23.68 cusr  5.00 csys = 30.66 CPU&#41;
Result: FAIL
Failed 2/44 test programs. 2/1014 subtests failed.

------------------------------
PREREQUISITES
------------------------------

Prerequisite modules loaded:

requires:

    Module              Need Have  
    ------------------- ---- ------
    Async::MergePoint   0    0.03  
    Heap                0.80 0.80  
    IO::Poll            0    0.07  
    Socket::GetAddrInfo 0.18 0.18  
    Storable            0    2.22  
    Time::HiRes         0    1.9719

build_requires:

    Module              Need Have  
    ------------------- ---- ------
    File::Temp          0    0.22  
    Test::Exception     0    0.29  
    Test::More          0    0.94  
    Test::Refcount      0    0.06  
    Test::Warn          0    0.22  

configure_requires:

    Module              Need Have  
    ------------------- ---- ------
    Module::Build       0.36 0.3603


------------------------------
ENVIRONMENT AND OTHER CONTEXT
------------------------------

Environment variables:

    PATH = /home/squeek/perl5/perlbrew/bin:/home/squeek/perl5/perlbrew/perls/current/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/games:/usr/local/sbin:/usr/local/bin:/home/squeek/bin
    PERL5LIB = 
    PERL5OPT = 
    PERL5_CPANPLUS_IS_RUNNING = 49242
    PERL5_CPAN_IS_RUNNING = 49242
    SHELL = /bin/csh
    TERM = xterm-color

Perl special variables &#40;and OS-specific diagnostics, for MSWin32&#41;:

    $^X = /home/squeek/perl5/perlbrew/perls/perl-5.12.1/bin/perl
    $UID/$EUID = 1002 / 1002
    $GID = 1002 1002 1002
    $EGID = 1002 1002 1002

Perl module toolchain versions installed:

    Module              Have   
    ------------------- -------
    CPAN                1.94_56
    Cwd                 3.31   
    ExtUtils::CBuilder  0.27   
    ExtUtils::Command   1.16   
    ExtUtils::Install   1.55   
    ExtUtils::MakeMaker 6.56   
    ExtUtils::Manifest  1.57   
    ExtUtils::ParseXS   2.2206 
    File::Spec          3.31   
    Module::Build       0.3603 
    Module::Signature   n/a    
    Test::Harness       3.17   
    Test::More          0.94   
    YAML                n/a    
    YAML::Syck          n/a    
    version             0.82   

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-837221" href="/Public/Bug/Display.html?id=61724#txn-837221">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;28&nbsp;12:54:13&nbsp;2010</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/837221/433729/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/433729">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 622b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Sep 28 11:52:46 2010, SQUEEK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; t/23signal.t ................. ok
&gt; #   Failed test &#39;socket listens on INADDR_ANY&#39;
&gt; #   at t/24listener.t line 162.
&gt; #          got: &#39;
&gt; # ?&#39;
&gt; #     expected: &#39;&#39;
&gt; # Looks like you failed 1 test of 29.
&gt; t/24listener.t ............... 
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 1/29 subtests 
&gt; 
&gt; I suspect that part of the reason of this failing is that this test was
&gt; run inside a FreeBSD jail.
</div>
Hmm... Probably networking-related.

Can you show an output of  ifconfig -A  or whatever it is, that shows
the interfaces and addresses, please?

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-837223" href="/Public/Bug/Display.html?id=61724#txn-837223">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;28&nbsp;12:54:15&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-837224" href="/Public/Bug/Display.html?id=61724#txn-837224">#</a>      
    </span>
    <span class="date">Tue&nbsp;Sep&nbsp;28&nbsp;12:59:16&nbsp;2010</span>
    <span class="description">squeek [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/837224/433731/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/433731">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Output from ifconfig -v:

fxp0: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=219b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4,WOL_MAGIC&gt;
        ether 00:10:f3:12:e0:96
        inet 10.21.5.150 netmask 0xfffff000 broadcast 10.21.15.255
        media: Ethernet autoselect &#40;100baseTX &lt;full-duplex&gt;&#41;
        status: active
fxp1: flags=8802&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=219b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4,WOL_MAGIC&gt;
        ether 00:10:f3:12:e0:97
        media: Ethernet autoselect &#40;none&#41;
        status: no carrier
fxp2: flags=8802&lt;BROADCAST,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=219b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4,WOL_MAGIC&gt;
        ether 00:10:f3:12:e0:98
        media: Ethernet autoselect &#40;none&#41;
        status: no carrier
fxp3: flags=8843&lt;UP,BROADCAST,RUNNING,SIMPLEX,MULTICAST&gt; metric 0 mtu 1500
        options=219b&lt;RXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4,WOL_MAGIC&gt;
        ether 00:10:f3:12:e0:99
        media: Ethernet autoselect &#40;none&#41;
        status: no carrier
plip0: flags=108810&lt;POINTOPOINT,SIMPLEX,MULTICAST,NEEDSGIANT&gt; metric 0
mtu 1500
lo0: flags=8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; metric 0 mtu 16384
        groups: lo 
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-837731" href="/Public/Bug/Display.html?id=61724#txn-837731">#</a>      
    </span>
    <span class="date">Wed&nbsp;Sep&nbsp;29&nbsp;11:38:19&nbsp;2010</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/837731/433983/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/433983">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 572b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Tue Sep 28 11:52:46 2010, SQUEEK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Tests speak louder than words:
&gt; 
&gt; t/23signal.t ................. ok
&gt; #   Failed test &#39;socket listens on INADDR_ANY&#39;
&gt; #   at t/24listener.t line 162.
&gt; #          got: &#39;
&gt; # ?&#39;
&gt; #     expected: &#39;&#39;
&gt; # Looks like you failed 1 test of 29.
&gt; t/24listener.t ............... 
&gt; Dubious, test returned 1 &#40;wstat 256, 0x100&#41;
&gt; Failed 1/29 subtests 
&gt; 
&gt; I suspect that part of the reason of this failing is that this test was
&gt; run inside a FreeBSD jail.
</div>
Try applying the attached patch, and see if that fixes it.

-- 

Paul Evans
</div></div>
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> rt61724.patch</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/837731/433984/rt61724.patch">Download rt61724.patch</a><br />
<span class="downloadcontenttype">text/x-diff 2.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">=== modified file &#39;t/24listener.t&#39;
--- t/24listener.t	2010-08-22 16:07:34 +0000
+++ t/24listener.t	2010-09-29 15:36:06 +0000
@@ -135,6 +135,16 @@
 undef $listener;
 undef $listensock;
 
+# Some odd locations like BSD jails might not like INADDR_ANY. We&#39;ll establish
+# a baseline first to test against
+my $INADDR_ANY = do {
+   my $anysock = IO::Socket::INET-&gt;new&#40; LocalPort =&gt; 0, Listen =&gt; 1 &#41;;
+   $anysock-&gt;sockaddr;
+};
+if&#40; $INADDR_ANY ne INADDR_ANY &#41; {
+   diag&#40; sprintf &#34;Testing with INADDR_ANY=%vd; this may be because of odd networking&#34;, $INADDR_ANY &#41;;
+}
+
 $listener = IO::Async::Listener-&gt;new&#40;
    on_accept =&gt; sub { &#40; undef, $newclient &#41; = @_ },
 &#41;;
@@ -146,7 +156,7 @@
 my $listen_self;
 
 $listener-&gt;listen&#40;
-   addr =&gt; [ AF_INET, SOCK_STREAM, 0, pack_sockaddr_in&#40; 0, INADDR_ANY &#41; ],
+   addr =&gt; [ AF_INET, SOCK_STREAM, 0, pack_sockaddr_in&#40; 0, $INADDR_ANY &#41; ],
    on_listen =&gt; sub { $listen_self = shift },
    on_listen_error =&gt; sub { die &#34;Test died early - $_[0] - $_[-1]\n&#34;; },
 &#41;;
@@ -159,7 +169,9 @@
 my &#40; $port, $sinaddr &#41; = unpack_sockaddr_in&#40; $sockname &#41;;
 
 ok&#40; $port &gt; 0, &#39;socket listens on some defined port number&#39; &#41;;
-is&#40; $sinaddr, INADDR_ANY, &#39;socket listens on INADDR_ANY&#39; &#41;;
+is&#40; sprintf&#40;&#34;%vd&#34;,$sinaddr&#41;,
+    sprintf&#40;&#34;%vd&#34;,$INADDR_ANY&#41;,
+    &#39;socket listens on INADDR_ANY&#39; &#41;;
 
 is&#40; $listen_self, $listener, &#39;$listen_self is $listener&#39; &#41;;
 undef $listen_self; # for refcount

=== modified file &#39;t/52loop-listen.t&#39;
--- t/52loop-listen.t	2010-09-20 21:17:21 +0000
+++ t/52loop-listen.t	2010-09-29 15:35:09 +0000
@@ -56,6 +56,16 @@
 undef $newclient;
 undef $notifier;
 
+# Some odd locations like BSD jails might not like INADDR_LOOPBACK. We&#39;ll
+# establish a baseline first to test against
+my $INADDR_LOOPBACK = do {
+   my $localsock = IO::Socket::INET-&gt;new&#40; LocalAddr =&gt; &#34;localhost&#34;, Listen =&gt; 1 &#41;;
+   $localsock-&gt;sockaddr;
+};
+if&#40; $INADDR_LOOPBACK ne INADDR_LOOPBACK &#41; {
+   diag&#40; sprintf &#34;Testing with INADDR_LOOPBACK=%vd; this may be because of odd networking&#34;, $INADDR_LOOPBACK &#41;;
+}
+
 $loop-&gt;listen&#40;
    family   =&gt; AF_INET,
    socktype =&gt; &#39;stream&#39;,
@@ -89,7 +99,9 @@
 
 my &#40; $listenport, $listen_inaddr &#41; = unpack_sockaddr_in&#40; $listenaddr &#41;;
 
-is&#40; $listen_inaddr, &#34;\x7f\0\0\1&#34;, &#39;$listenaddr is INADDR_LOOPBACK&#39; &#41;;
+is&#40; sprintf&#40;&#34;%vd&#34;,$listen_inaddr&#41;,
+    sprintf&#40;&#34;%vd&#34;,$INADDR_LOOPBACK&#41;,
+    &#39;$listenaddr is INADDR_LOOPBACK&#39; &#41;;
 
 $clientsock = IO::Socket::INET-&gt;new&#40; Type =&gt; SOCK_STREAM &#41;
    or die &#34;Cannot socket&#40;&#41; - $!&#34;;

</div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-838200" href="/Public/Bug/Display.html?id=61724#txn-838200">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;30&nbsp;16:53:08&nbsp;2010</span>
    <span class="description">squeek [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/838200/434215/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/434215">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 202b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Wed Sep 29 11:38:19 2010, PEVANS wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Try applying the attached patch, and see if that fixes it.
</div>
The patch appears to PASS, with the diag messages showing the fxp0 interface being used.

Cheers.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-838201" href="/Public/Bug/Display.html?id=61724#txn-838201">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;30&nbsp;16:57:46&nbsp;2010</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/838201/434216/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/434216">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 340b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">On Thu Sep 30 16:53:08 2010, SQUEEK wrote:
<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; On Wed Sep 29 11:38:19 2010, PEVANS wrote:
<div class="message-stanza open">&gt; &gt; Try applying the attached patch, and see if that fixes it.
</div>&gt; 
&gt; The patch appears to PASS, with the diag messages showing the fxp0
&gt; interface being used.
&gt; 
&gt; Cheers.
</div>
Excellent.

That&#39;s now committed in bzr repo; will be in 0.31.

-- 

Paul Evans
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-838202" href="/Public/Bug/Display.html?id=61724#txn-838202">#</a>      
    </span>
    <span class="date">Thu&nbsp;Sep&nbsp;30&nbsp;16:57:50&nbsp;2010</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Status changed from &#39;open&#39; to &#39;patched&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-877336" href="/Public/Bug/Display.html?id=61724#txn-877336">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;05&nbsp;07:34:49&nbsp;2011</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Status changed from &#39;patched&#39; to &#39;resolved&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction other CustomField even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-877338" href="/Public/Bug/Display.html?id=61724#txn-877338">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Wed&nbsp;Jan&nbsp;05&nbsp;07:34:52&nbsp;2011</span>
    <span class="description">leonerd-cpan [...] leonerd.org.uk -  Fixed in 0.31 added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 0.425017</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
