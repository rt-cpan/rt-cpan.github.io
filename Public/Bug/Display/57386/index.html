<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Bug #57386 for Net-SFTP-Foreign: Net-SFTP-Foreign Bug</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- The X-UA-Compatible <meta> tag above must be very early in <head> -->

    <script>
if (window.top !== window.self) {
    document.write = "";

    window.top.location = window.self.location;

    setTimeout(function(){
        document.body.innerHTML = "";
    }, 1);

    window.self.onload = function(){
        document.body.innerHTML = "";
    };
}
</script>



<link rel="shortcut icon" href="/NoAuth/images/favicon.png" type="image/png" />
<link rel="stylesheet" href="/NoAuth/css/aileron-squished-00f758259152f8b6670ee485f462e6b8.css" type="text/css" media="all" />
<link rel="stylesheet" href="/NoAuth/css/print.css" type="text/css" media="print" />




<script type="text/javascript" src="/NoAuth/js/squished-42167f2409ce368da2d31038e5cb2a57.js"></script>

<script type="text/javascript"><!--
	jQuery( loadTitleBoxStates );

--></script>


<!--[if lt IE 8]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie.css" type="text/css" media="all" />
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" href="/NoAuth/css/aileron/msie6.css" type="text/css" media="all" />
<![endif]-->
<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery.fn.supersubs.defaults = {
        maxWidth: 30,
        extraWidth: 2
    };

    jQuery("#app-nav.toplevel").addClass('sf-menu sf-js-enabled sf-shadow').supersubs().superfish({ speed: 'fast' });
    jQuery("#page-menu.toplevel").addClass('sf-menu sf-js-enabled').supersubs().superfish({ dropShadows: false, speed: 'fast' }).supposition();
});
</script>


<!-- Site CSS from theme editor -->
<style type="text/css" media="all" id="sitecss">
</style>

<meta name="google-site-verification" content="kD3-uEJK1AkTqaC-rckcSt_HPkAj674DPPuEN6i-y0g" />

</head>
  <body class="aileron sidebyside" id="comp-Public-Bug-Display">

<div id="logo">
<a href="https://rt.cpan.org/"><img
    src="/NoAuth/images/cpan.png"
    alt="CPAN"
    width="181"
    height="38" /></a>
    <span class="rtname">RT for rt.cpan.org</span>
</div>


<div id="quickbar">
  <div id="quick-personal">
    <span class="hide"><a href="#skipnav">Skip Menu</a> | </span>
</div>

</div>
<div id="header"><h1>Bug #57386 for Net-SFTP-Foreign: Net-SFTP-Foreign Bug</h1></div>


<div id="main-navigation"><ul id="app-nav" class="toplevel">
 <li id="li-search_dist"><a id="search_dist" class="menu-item " href="/Public/">Search Distributions</a></li>
 <li id="li-browse_dist"><a id="browse_dist" class="menu-item " href="/Public/Dist/Browse.html">Browse Distributions</a></li>
 <li id="li-about" class="has-children"><a id="about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About rt.cpan.org</a>
 <ul>
  <li id="li-about-usage"><a id="about-usage" class="menu-item " href="/NoAuth/RT/CPAN/Usage.html">How do I…?</a></li>
  <li id="li-about-about"><a id="about-about" class="menu-item " href="/NoAuth/RT/CPAN/About.html">About</a></li>
 </ul>
 </li>
 <li id="li-preferences"><a id="preferences" class="menu-item ">Welcome <span class="current-user">anonymous guest</span>.</a></li>
 <li id="li-login"><a id="login" class="menu-item " href="/NoAuth/Logout.html">Login as another user</a></li>
</ul></div>
<div id="page-navigation"><ul id="page-menu" class="toplevel">
 <li id="li-page-active_bugs"><a id="page-active_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Active;Name=Net-SFTP-Foreign">Active bugs</a></li>
 <li id="li-page-resolved_bugs"><a id="page-resolved_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Resolved;Name=Net-SFTP-Foreign">Resolved bugs</a></li>
 <li id="li-page-rejected_bugs"><a id="page-rejected_bugs" class="menu-item " href="/Public/Dist/Display.html?Status=Rejected;Name=Net-SFTP-Foreign">Rejected bugs</a></li>
 <li id="li-page-report"><a id="page-report" class="menu-item " href="/Public/Bug/Report.html?Queue=Net-SFTP-Foreign">Report a new bug</a></li>
</ul></div>
<div id="topactions"><form action="/Public/Search/Simple.html" id="simple-search">
  <input size="12" name="q" accesskey="0" class="field" value="" placeholder="Search..." />
</form>

<form action="/Public/Bug/Report.html" name="CreateTicketInQueue" id="CreateTicketInQueue" >
<input type="submit" class="button" value="New ticket in" />&nbsp;<label accesskey="9">
  <input name="Queue" size="25" placeholder="Module or distribution" value="" class="select-queue" data-autocomplete="Queues" data-autocomplete-autosubmit=1 data-autocomplete-params="right=CreateTicket" />

</label>

</form>

</div>
<div id="body">
<div id="announcement" style="padding: 1em; margin: 1em; border: solid black 1px; background: #eee">
<a href="https://log.perl.org/2020/12/rtcpanorg-sunset.html">rt.cpan.org will be shut down on March 1st, 2021.</a>
</div>

<a name="skipnav" id="skipnav" accesskey="8"></a>





<p>This queue is for tickets about the <a href="https://metacpan.org/release/Net-SFTP-Foreign">Net-SFTP-Foreign CPAN distribution</a>.</p>





<div class="">
  <div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DUmVwb3J0IGluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Report information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------UmVwb3J0IGluZm9ybWF0aW9u---0">


<table width="100%" class="ticket-summary">
<tr>
  <td valign="top" class="boxcontainer">
    <div class="ticket-info-basics">
  <div class="titlebox ticket-info-basics " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dbasics\x2D\x2D\x2D\x2DVGhlIEJhc2ljcw\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">The Basics</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-basics----VGhlIEJhc2ljcw__---0">


        <table>
  <tr class="id">
    <td class="label">Id:</td>
    <td class="value">57386</td>
  </tr>
  <tr class="status">
    <td class="label">Status:</td>
    <td class="value">rejected</td>
  </tr>
  <tr class="time worked">
    <td class="label">Worked:</td>
    <td class="value">16.2 hours (970 min)

</td>
  </tr>
  <tr class="priority">
    <td class="label">Priority:</td>
    <td class="value">0/
</td>
  </tr>
  <tr class="queue">
    <td class="label">Queue:</td>
    <td class="value"><a href="/Dist/Display.html?Queue=Net-SFTP-Foreign">Net-SFTP-Foreign</a>
</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-people">
  <div class="titlebox ticket-info-people " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dpeople\x2D\x2D\x2D\x2DUGVvcGxl\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">People</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-people----UGVvcGxl---0">


        <table>
  <tr>
    <td class="label">Owner:</td>
    <td class="value">salva [...] cpan.org
    
    </td>
  </tr>
  <tr>
    <td class="labeltop">Requestors:</td>
    <td class="value">
Heather.Fischer [...] nisc.coop

<br />

</td>
  </tr>
  <tr>
    <td class="labeltop">Cc:</td>
    <td class="value">

</td>
  </tr>
  <tr>
    <td class="labeltop">AdminCc:</td>
    <td class="value">

</td>
  </tr>
</table>

        <hr class="clear" />
  </div>
</div>




</div>



  </td>
  <td valign="top" class="boxcontainer">
    
    <div class="ticket-info-cfs">
  <div class="titlebox ticket-info-cfs " id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dcfs\x2D\x2D\x2D\x2DQnVnIEluZm9ybWF0aW9u\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Bug Information</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-cfs----QnVnIEluZm9ybWF0aW9u---0">

 
        <table>
  <tr id="CF-1-ShowRow">
    <td class="label">Severity:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23164-ShowRow">
    <td class="label">Broken in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
  <tr id="CF-23165-ShowRow">
    <td class="label">Fixed in:</td>
    <td class="value">
<i>(no value)</i>
    </td>
  </tr>
</table>


        <hr class="clear" />
  </div>
</div>




</div>


    <div class="ticket-info-attachments">
  <div class="titlebox ticket-info-attachments " id="">
  <div class="titlebox-title inverse">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2Dticket\x2Dinfo\x2Dattachments\x2D\x2D\x2D\x2DQXR0YWNobWVudHM\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">Attachments</span>
    <span class="right-empty">		    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html--ticket-info-attachments----QXR0YWNobWVudHM_---0">




net_sftp_resume_test_1.58_03.doc<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/783039/405591/net_sftp_resume_test_1.58_03.doc">
Thu May 27 11:48:56 2010 (31k) by Heather.Fischer [...] nisc.coop
</a>
</font></li>
</ul>


nisc.gif<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/775647/401722/nisc.gif">
Tue May 11 15:00:28 2010 (5.2k) by Heather.Fischer [...] nisc.coop
</a>
</font></li>
</ul>


secfiletrans052710-orig.out.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/783039/405592/secfiletrans052710-orig.out.gz">
Thu May 27 11:48:56 2010 (271.3k) by Heather.Fischer [...] nisc.coop
</a>
</font></li>
</ul>


secfiletrans052710-resume.out.gz<br />
<ul>


<li><font size="-2">
<a href="/Ticket/Attachment/783039/405593/secfiletrans052710-resume.out.gz">
Thu May 27 11:48:56 2010 (594.5k) by Heather.Fischer [...] nisc.coop
</a>
</font></li>
</ul>

    <hr class="clear" />
  </div>
</div>




</div>







  </td>
</tr>
</table>

    <hr class="clear" />
  </div>
</div>




</div>


<br />


<div class="history">
<div class="titlebox" id="">
  <div class="titlebox-title">
    <span class="widget"><a href="#" onclick="return rollup('TitleBox\x2D\x2D\x5FPublic\x5FBug\x5FDisplay\x5Fhtml\x2D\x2D\x2D\x2D\x2D\x2DSGlzdG9yeQ\x5F\x5F\x2D\x2D\x2D0');" title="Toggle visibility"></a></span>
    <span class="left">History</span>
    <span class="right">		<a href="#" data-direction="open" onclick="return toggle_all_folds(this, 'Show\x20all\x20quoted\x20text', 'Hide\x20all\x20quoted\x20text');">Show all quoted text</a> &mdash; <a href="/Public/Bug/Display.html?ShowHeaders=1;id=57386">Show full headers</a>    </span>
  </div>
  <div class="titlebox-content " id="TitleBox--_Public_Bug_Display_html------SGlzdG9yeQ__---0">


<div id="ticket-history">
<div class="ticket-transaction message Create odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-775647" href="/Public/Bug/Display.html?id=57386#txn-775647">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;11&nbsp;15:00:28&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Ticket created</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 11 May 2010 14:00:42 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/775647/401720/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/401720">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,
 
I&#39;m receiving the following error when attempting to get a file with the
module:
print&#40;&#41; on closed filehandle $fh at
/usr/lib/perl5/site_perl/5.8.3/Net/SFTP/Foreign.pm line 1585.
 
This error occured when I added the &#34;get&#34; option &#34;resume =&gt; 1&#34;.  The
error does not occur without the &#34;resume&#34; option included in the code.
 
Perl Module Version:
Net-SFTP-Foreign-1.55.tar.gz
 
OS Version:
tedev1:/pro/work/hfischer:# uname -a
Linux tedev1 2.6.5-7.282-smp #1 SMP Tue Aug 29 10:40:40 UTC 2006 x86_64
x86_64 x86_64 GNU/Linux

Per version:  
tedev1:/pro/work/hfischer:# perl -v
 
This is perl, v5.8.3 built for x86_64-linux-thread-multi
 
Copyright 1987-2003, Larry Wall
 
Perl may be copied only under the terms of either the Artistic License
or the
GNU General Public License, which may be found in the Perl 5 source kit.
 
Complete documentation for Perl, including FAQ lists, should be found on
this system using `man perl&#39; or `perldoc perl&#39;.  If you have access to
the
Internet, point your browser at <span class="clickylink"><a target="new" rel="nofollow" href="http://www.perl.com/">http://www.perl.com/</a></span>, the Perl Home
Page.
 
 
  &lt;<span class="clickylink"><a target="new" rel="nofollow" href="http://www.nisc.coop/">http://www.nisc.coop/</a></span>&gt;       Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop &lt;mailto:heather.fischer@nisc.coop&gt; 
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  
 
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/775647/401721/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/401721">with headers</a>
<br />
<span class="downloadcontenttype">text/html 3.8k</span>
</div>
<div class="messagebody">
</div>
</div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/775647/401722/nisc.gif">Download nisc.gif</a><br />
<span class="downloadcontenttype">image/gif 5.2k</span>
</div>
<div class="messagebody">
<img alt="nisc.gif" title="nisc.gif" src="/Ticket/Attachment/775647/401722/" /></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-775935" href="/Public/Bug/Display.html?id=57386#txn-775935">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;12&nbsp;03:52:53&nbsp;2010</span>
    <span class="description">salva [...] cpan.org -  Correspondence added</span>
    <span class="time-taken">10 min</span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/775935/401845/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/401845">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 385b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am unable to reproduce your problem.

Could you post the program that&#39;s failing &#40;or better, a minimal version
of it that still triggers the error&#41;. Include also a full listing of the
remote and local directories.

Could you try installing the current development version of the module,
there have been significative changes since version 1.55 and the problem
may be already resolved.
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-775937" href="/Public/Bug/Display.html?id=57386#txn-775937">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;12&nbsp;03:52:53&nbsp;2010</span>
    <span class="description">The RT System itself -  Status changed from &#39;new&#39; to &#39;open&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction people Give even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-775938" href="/Public/Bug/Display.html?id=57386#txn-775938">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;12&nbsp;03:52:54&nbsp;2010</span>
    <span class="description">salva [...] cpan.org -  Given to SALVA</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776054" href="/Public/Bug/Display.html?id=57386#txn-776054">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;12&nbsp;09:58:19&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 12 May 2010 08:58:30 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/776054/401910/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/401910">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you for writing this module. I found it very useful and it works
well.  This is the first issue I&#39;ve had with it.

The program is attached.  The resume code is removed but changed
$sftp-&gt;get&#40;&#34;$tranfle&#34;,&#34;$ldir/$tmplclfle&#34;&#41;;
To
$sftp-&gt;get&#40;&#34;$tranfle&#34;,&#34;$ldir/$tmplclfle&#34;, resume=&gt;1&#41;;  
To test the resume option that caused the error.  It appears the file
handle $fh is closed when it&#39;s trying to print to it on line 1585.

I did download and install the 1.57 version yesterday, but yielded the
same results when the &#34;resume =&gt; 1&#34; option was added.  

Syntax used to call script:
/pro/work/hfischer/secfiletrans.pl --flow get --protocol sftp --rhost
teconv --user hfischer --password ****** --rdir
/pro/work/hfischer/test/outgoing --ldir /pro/work/hfischer/test
--filename &#39;tbills*.zip&#39;

Local directory listing;
tedev1:/pro/work/hfischer/test:# ls -la
total 9
drw-rw-rw-   5 hfischer domain  120 May 11 12:24 ./
drwxr-xr-x  25 hfischer admn   9024 May 12 08:50 ../
drwxrwxrwx   2 hfischer domain  152 May  6 12:42 archive/
drwxrwxrwx   2 hfischer domain  272 Mar 11  2009 done/
drwxr-xr-x   2 root     root     48 Mar 23 11:26 temp/

Remote directory listing:
teconv:~/test/outgoing:-&gt; ls -la
total 658851
drwxrwxrwx  3 hfischer domain       432 May 11 11:39 ./
drwxrwxrwx  5 hfischer domain       240 May  7 08:00 ../
drwxr-xr-x  2 root     root          80 May  7 14:16 META-INF/
-rw-rw-rw-  1 hfischer domain       181 May  7 09:11 heathertest.tar.gz
-rw-rw-rw-  1 hfischer domain       181 May  7 11:11 heathertest.tgz
-rw-rw-rw-  1 hfischer domain       427 May  7 09:11 heathertest2.zip
-rw-rw-rw-  1 root     root         586 May  7 12:01 heathertest3.jar
-rw-rw-rw-  1 hfischer domain 673961453 May 11 09:48
tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.zip
-rw-rw-rw-  1 hfischer domain        15 May  7 09:09 test1
-rw-rw-rw-  1 hfischer domain        39 May  7 09:09 test1.gz
-rw-rw-rw-  1 hfischer domain        15 May  7 09:09 test2
-rw-rw-rw-  1 hfischer domain       345 May  7 09:09 test2.gpg
-rw-rw-rw-  1 hfischer domain        15 May  7 09:10 test3
-rw-rw-rw-  1 hfischer domain         8 May  7 11:31 test4


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador Fandino Garcia via RT
[mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Wednesday, May 12, 2010 2:53 AM
To: Heather Fischer
Subject: [rt.cpan.org #57386] Net-SFTP-Foreign Bug 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

I am unable to reproduce your problem.

Could you post the program that&#39;s failing &#40;or better, a minimal version
of it that still triggers the error&#41;. Include also a full listing of the
remote and local directories.

Could you try installing the current development version of the module,
there have been significative changes since version 1.55 and the problem
may be already resolved.
</div></div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776651" href="/Public/Bug/Display.html?id=57386#txn-776651">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;13&nbsp;13:02:24&nbsp;2010</span>
    <span class="description">salva [...] cpan.org -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<div class="downloadattachment">
<a href="/Ticket/Attachment/776651/402240/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402240">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 423b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am still unable to reproduce the problem.

Set 

  $Net::SFTP::Foreign=-1

in the script, run it again &#40;both with and with our resume&#41; and send me
the &#40;compressed&#41; output so I can see what is going on.

A capture at the OS level with strace would probably also help.

&#40;take care to not use files with sensible information as its contents
will appear on the debugging output and to remove passwords or to use
dummy ones&#41;
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776711" href="/Public/Bug/Display.html?id=57386#txn-776711">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;13&nbsp;15:29:36&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 13 May 2010 14:29:40 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/776711/402268/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402268">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Where exactly do I put &#34;$Net::SFTP::Foreign=-1&#34;.  It&#39;s erroring where I
put it.


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador Fandino Garcia via RT
[mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Thursday, May 13, 2010 12:02 PM
To: Heather Fischer
Subject: [rt.cpan.org #57386] Net-SFTP-Foreign Bug 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

I am still unable to reproduce the problem.

Set 

  $Net::SFTP::Foreign=-1

in the script, run it again &#40;both with and with our resume&#41; and send me
the &#40;compressed&#41; output so I can see what is going on.

A capture at the OS level with strace would probably also help.

&#40;take care to not use files with sensible information as its contents
will appear on the debugging output and to remove passwords or to use
dummy ones&#41;
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776713" href="/Public/Bug/Display.html?id=57386#txn-776713">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;13&nbsp;15:39:57&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug </td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 13 May 2010 14:40:10 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/776713/402270/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402270">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">How should the &#34;resume&#34; option be used?  Should it be specified in a
transfer only when you are trying to resume a previously failed file
transfer?  In which case resume, will start the file transfer where it
left off?  Or can it be used for all file transfers, which include new
and ones we want to resume?

I am really curious how and if this works reliably or if I am
misunderstanding it&#39;s function.


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Heather Fischer 
Sent: Thursday, May 13, 2010 2:30 PM
To: bug-Net-SFTP-Foreign@rt.cpan.org
Cc: heather.fischer@nisc.coop
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug 

Where exactly do I put &#34;$Net::SFTP::Foreign=-1&#34;.  It&#39;s erroring where I
put it.


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Salvador Fandino Garcia via RT
[mailto:bug-Net-SFTP-Foreign@rt.cpan.org]
Sent: Thursday, May 13, 2010 12:02 PM
To: Heather Fischer
Subject: [rt.cpan.org #57386] Net-SFTP-Foreign Bug 

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

I am still unable to reproduce the problem.

Set 

  $Net::SFTP::Foreign=-1

in the script, run it again &#40;both with and with our resume&#41; and send me
the &#40;compressed&#41; output so I can see what is going on.

A capture at the OS level with strace would probably also help.

&#40;take care to not use files with sensible information as its contents
will appear on the debugging output and to remove passwords or to use
dummy ones&#41;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776734" href="/Public/Bug/Display.html?id=57386#txn-776734">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;13&nbsp;16:14:44&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 13 May 2010 13:14:32 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/776734/402281/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402281">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 13, 2010 9:29:37 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug 
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Where exactly 
<div class="message-stanza open">&gt; do I put &#34;$Net::SFTP::Foreign=-1&#34;.  It&#39;s erroring where I
</div>put 
<div class="message-stanza open">&gt; it.
</div>
oops, it should say

 $Net::SFTP::Foreign::debug = -1;

and has to be placed at the begining of the script before the module is used.



    Heather Fischer___________________
Senior 
<div class="message-stanza open">&gt; Systems Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador Fandino 
<div class="message-stanza open">&gt; Garcia via RT
</div>[mailto:
<div class="message-stanza open">&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org] 
&gt; 
</div>Sent: Thursday, May 13, 2010 12:02 PM
To: Heather Fischer
Subject: [
<div class="message-stanza open">&gt; target=&#34;_blank&#34; href=&#34;http://rt.cpan.org&#34;&gt;rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug 
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
I am still 
<div class="message-stanza open">&gt; unable to reproduce the problem.
</div>
Set 

  
<div class="message-stanza open">&gt; $Net::SFTP::Foreign=-1
</div>
in the script, run it again &#40;both with and with 
<div class="message-stanza open">&gt; our resume&#41; and send me
</div>the &#40;compressed&#41; output so I can see what is going 
<div class="message-stanza open">&gt; on.
</div>
A capture at the OS level with strace would probably also 
<div class="message-stanza open">&gt; help.
</div>
&#40;take care to not use files with sensible information as its 
<div class="message-stanza open">&gt; contents
</div>will appear on the debugging output and to remove passwords or to 
<div class="message-stanza open">&gt; use
</div>dummy ones&#41;
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776737" href="/Public/Bug/Display.html?id=57386#txn-776737">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;13&nbsp;16:30:07&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 13 May 2010 13:29:54 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/776737/402284/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402284">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 13, 2010 9:39:57 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug 
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
<div class="message-stanza open">&gt; How should the 
&gt; &#34;resume&#34; option be used?  Should it be specified in a
&gt; transfer only when 
&gt; you are trying to resume a previously failed file
&gt; transfer?  In which 
&gt; case resume, will start the file transfer where it
&gt; left off?  Or can it 
&gt; be used for all file transfers, which include new
&gt; and ones we want to 
&gt; resume?
</div>
<div class="message-stanza open">&gt; I am really curious how and if this works reliably or if I 
&gt; am
&gt; misunderstanding it&#39;s function.
</div>
when &#34;resume =&gt; 1&#34; is used with &#34;get&#34;, if the local file already exists only the missing bits will be copied, otherwise the full file will be transferred.

if &#34;resume =&gt; &#39;auto&#39;&#34; is used, it will also check the timestamps of both files and resume the transfer only when the local file is newer than the remote one, otherwise, the local file will be deleted and the full remote file copied.

This operation is reliable as far as no other process modifies the partially transferred files. But no checksum or other means to corroborate the integrity of the local file is performed as these kind of operations are not supported by the SFTP protocol.

If you have weak networks, and your SSH connections break from time to time &#40;for instance, when connecting through a mobile network link, or a VPN&#41; using resume is a safe operation.

It can be also used to incrementally transfer files that are written in append mode as for instance log files.

Hope that helps,

Cheers,

 - Salva

    Heather 
<div class="message-stanza open">&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather Fischer 
<div class="message-stanza open">&gt; 
</div>Sent: Thursday, May 13, 2010 2:30 PM
To: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>Subject: 
<div class="message-stanza open">&gt; RE: [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug 
</div>
Where exactly do I put 
<div class="message-stanza open">&gt; &#34;$Net::SFTP::Foreign=-1&#34;.  It&#39;s erroring where I
</div>put it.



<div class="message-stanza open">&gt;     Heather Fischer___________________
</div>Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador Fandino 
<div class="message-stanza open">&gt; Garcia via RT
</div>[mailto:
<div class="message-stanza open">&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; Thursday, May 13, 2010 12:02 PM
</div>To: Heather Fischer
Subject: [rt.cpan.org 
<div class="message-stanza open">&gt; #57386] Net-SFTP-Foreign Bug 
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
I am still 
<div class="message-stanza open">&gt; unable to reproduce the problem.
</div>
Set 

  
<div class="message-stanza open">&gt; $Net::SFTP::Foreign=-1
</div>
in the script, run it again &#40;both with and with 
<div class="message-stanza open">&gt; our resume&#41; and send me
</div>the &#40;compressed&#41; output so I can see what is going 
<div class="message-stanza open">&gt; on.
</div>
A capture at the OS level with strace would probably also 
<div class="message-stanza open">&gt; help.
</div>
&#40;take care to not use files with sensible information as its 
<div class="message-stanza open">&gt; contents
</div>will appear on the debugging output and to remove passwords or to 
<div class="message-stanza open">&gt; use
</div>dummy ones&#41;
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776740" href="/Public/Bug/Display.html?id=57386#txn-776740">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;13&nbsp;16:35:23&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 13 May 2010 15:35:37 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/776740/402287/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402287">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Thank you. That is exactly what we are looking for.  I&#39;m still working on testing to produce the output you requested. 


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Thursday, May 13, 2010 3:30 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 13, 2010 9:39:57 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
<div class="message-stanza open">&gt; How should the
&gt; &#34;resume&#34; option be used?  Should it be specified in a transfer only 
&gt; when you are trying to resume a previously failed file transfer?  In 
&gt; which case resume, will start the file transfer where it left off?  Or 
&gt; can it be used for all file transfers, which include new and ones we 
&gt; want to resume?
</div>
<div class="message-stanza open">&gt; I am really curious how and if this works reliably or if I am 
&gt; misunderstanding it&#39;s function.
</div>
when &#34;resume =&gt; 1&#34; is used with &#34;get&#34;, if the local file already exists only the missing bits will be copied, otherwise the full file will be transferred.

if &#34;resume =&gt; &#39;auto&#39;&#34; is used, it will also check the timestamps of both files and resume the transfer only when the local file is newer than the remote one, otherwise, the local file will be deleted and the full remote file copied.

This operation is reliable as far as no other process modifies the partially transferred files. But no checksum or other means to corroborate the integrity of the local file is performed as these kind of operations are not supported by the SFTP protocol.

If you have weak networks, and your SSH connections break from time to time &#40;for instance, when connecting through a mobile network link, or a VPN&#41; using resume is a safe operation.

It can be also used to incrementally transfer files that are written in append mode as for instance log files.

Hope that helps,

Cheers,

 - Salva

    Heather 
<div class="message-stanza open">&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather Fischer 
<div class="message-stanza open">&gt; 
</div>Sent: Thursday, May 13, 2010 2:30 PM
To: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt
&gt; .cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>Subject: 
<div class="message-stanza open">&gt; RE: [rt.cpan.org #57386]
&gt; Net-SFTP-Foreign Bug
</div>
Where exactly do I put 
<div class="message-stanza open">&gt; &#34;$Net::SFTP::Foreign=-1&#34;.  It&#39;s erroring where I
</div>put it.



<div class="message-stanza open">&gt;     Heather Fischer___________________
</div>Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador Fandino 
<div class="message-stanza open">&gt; Garcia via RT
</div>[mailto:
<div class="message-stanza open">&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt
&gt; .cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; Thursday, May 13, 2010 12:02 PM
</div>To: Heather Fischer
Subject: [rt.cpan.org 
<div class="message-stanza open">&gt; #57386] Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
I am still 
<div class="message-stanza open">&gt; unable to reproduce the problem.
</div>
Set 

  
<div class="message-stanza open">&gt; $Net::SFTP::Foreign=-1
</div>
in the script, run it again &#40;both with and with 
<div class="message-stanza open">&gt; our resume&#41; and send me
</div>the &#40;compressed&#41; output so I can see what is going 
<div class="message-stanza open">&gt; on.
</div>
A capture at the OS level with strace would probably also 
<div class="message-stanza open">&gt; help.
</div>
&#40;take care to not use files with sensible information as its 
<div class="message-stanza open">&gt; contents
</div>will appear on the debugging output and to remove passwords or to 
<div class="message-stanza open">&gt; use
</div>dummy ones&#41;
</div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-776979" href="/Public/Bug/Display.html?id=57386#txn-776979">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;14&nbsp;09:42:02&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 May 2010 08:42:24 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/776979/402419/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402419">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.5k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Well, this is strange.  It now appears to be working with the 1.55 and 1.57 Foreign.pm!  I tested it and the resume works as well. Wonderful. I&#39;m so sorry to have bothered you and wasted your time.  I could not get it to work when I opened the ticket as I was getting the error below.

print&#40;&#41; on closed filehandle $fh at
/usr/lib/perl5/site_perl/5.8.3/Net/SFTP/Foreign.pm line 1585.


Thanks again for writing this module. I love it.


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Thursday, May 13, 2010 3:30 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 13, 2010 9:39:57 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
<div class="message-stanza open">&gt; How should the
&gt; &#34;resume&#34; option be used?  Should it be specified in a transfer only 
&gt; when you are trying to resume a previously failed file transfer?  In 
&gt; which case resume, will start the file transfer where it left off?  Or 
&gt; can it be used for all file transfers, which include new and ones we 
&gt; want to resume?
</div>
<div class="message-stanza open">&gt; I am really curious how and if this works reliably or if I am 
&gt; misunderstanding it&#39;s function.
</div>
when &#34;resume =&gt; 1&#34; is used with &#34;get&#34;, if the local file already exists only the missing bits will be copied, otherwise the full file will be transferred.

if &#34;resume =&gt; &#39;auto&#39;&#34; is used, it will also check the timestamps of both files and resume the transfer only when the local file is newer than the remote one, otherwise, the local file will be deleted and the full remote file copied.

This operation is reliable as far as no other process modifies the partially transferred files. But no checksum or other means to corroborate the integrity of the local file is performed as these kind of operations are not supported by the SFTP protocol.

If you have weak networks, and your SSH connections break from time to time &#40;for instance, when connecting through a mobile network link, or a VPN&#41; using resume is a safe operation.

It can be also used to incrementally transfer files that are written in append mode as for instance log files.

Hope that helps,

Cheers,

 - Salva

    Heather 
<div class="message-stanza open">&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather Fischer 
<div class="message-stanza open">&gt; 
</div>Sent: Thursday, May 13, 2010 2:30 PM
To: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt
&gt; .cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>Subject: 
<div class="message-stanza open">&gt; RE: [rt.cpan.org #57386]
&gt; Net-SFTP-Foreign Bug
</div>
Where exactly do I put 
<div class="message-stanza open">&gt; &#34;$Net::SFTP::Foreign=-1&#34;.  It&#39;s erroring where I
</div>put it.



<div class="message-stanza open">&gt;     Heather Fischer___________________
</div>Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador Fandino 
<div class="message-stanza open">&gt; Garcia via RT
</div>[mailto:
<div class="message-stanza open">&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt
&gt; .cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; Thursday, May 13, 2010 12:02 PM
</div>To: Heather Fischer
Subject: [rt.cpan.org 
<div class="message-stanza open">&gt; #57386] Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
I am still 
<div class="message-stanza open">&gt; unable to reproduce the problem.
</div>
Set 

  
<div class="message-stanza open">&gt; $Net::SFTP::Foreign=-1
</div>
in the script, run it again &#40;both with and with 
<div class="message-stanza open">&gt; our resume&#41; and send me
</div>the &#40;compressed&#41; output so I can see what is going 
<div class="message-stanza open">&gt; on.
</div>
A capture at the OS level with strace would probably also 
<div class="message-stanza open">&gt; help.
</div>
&#40;take care to not use files with sensible information as its 
<div class="message-stanza open">&gt; contents
</div>will appear on the debugging output and to remove passwords or to 
<div class="message-stanza open">&gt; use
</div>dummy ones&#41;
</div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-777147" href="/Public/Bug/Display.html?id=57386#txn-777147">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;14&nbsp;15:43:13&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 May 2010 14:43:05 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/777147/402510/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402510">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 10k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

Has the resume option been tested with encrypted files?  For the &#34;gets&#34;, resume works well for .tar, .zip and encrypted files. However, for &#34;put&#34;s, the files encrypted with GPG are corrupt when resume is used to finish a partial download.  The resume &#34;put&#34; option works good for the .tar and .zip files.

Should I open a different bug for this put, resume, encrypted file issue? 

Decrypt and tar commands showing corruption.
ndftp:/home/sftptest/incoming:# gpg --homedir /.gnupg -o tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar --decrypt tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar.gpg
gpg: WARNING: unsafe enclosing directory permissions on configuration file `/.gnupg/options&#39;
gpg: encrypted with 1024-bit ELG-E key, ID 1EA8814A, created 2001-06-25
      &#34;NISC ND &#40;NISC GnuPG Key&#41; &lt;nisc@nisc.cc&gt;&#34;
gpg: [don&#39;t know]: invalid packet &#40;ctb=20&#41;
gpg: [don&#39;t know]: invalid packet &#40;ctb=72&#41;
gpg: WARNING: encrypted message has been manipulated!
gpg: [don&#39;t know]: invalid packet &#40;ctb=66&#41;
ndftp:/home/sftptest/incoming:# ls -la
total 3553654
drwxr-xr-x 2 sftptest sftponly       576 May 14 12:20 ./
drwxr-xr-x 6 root     root           144 Apr 29 09:26 ../
-rw-r--r-- 1 root     root      86128640 May 14 11:25 18599.bills.tar
-rw-rw-rw- 1 sftptest sftponly  10490759 May 14 11:24 18599.bills.tar.gz.gpg
-rw-rw-rw- 1 sftptest sftponly    468663 May 14 09:54 28513110.cab.tar.gpg
-rw-r--r-- 1 sftptest sftponly       353 May 12 09:55 extract.d.gpg
-rw-r--r-- 1 root     root     842522690 May 14 12:20 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar
-rw-rw-rw- 1 sftptest sftponly 675455638 May 14 11:55 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar.gpg
-rw-r--r-- 1 root     root     675455639 May 14 11:48 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar.gpg.good
-rw-r--r-- 1 root     root     673974299 May 14 11:35 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar.gz
-rw-rw-rw- 1 sftptest sftponly 670869440 May 14 08:51 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.zip.gpg.bad
ndftp:/home/sftptest/incoming:# tar tvf tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar
-rw-rw-rw- hfischer/domain 6249 2010-04-24 02:14:58 B26561013553.rpt
-rw-rw-rw- hfischer/domain 39776 2010-04-24 02:14:58 B26561013600.rpt
-rw-rw-rw- hfischer/domain 53965 2010-04-24 02:14:58 B2656101err.rpt
-rw-rw-rw- hfischer/domain  8452 2010-04-24 02:14:58 B2656101group.rpt
-rw-rw-rw- hfischer/domain 60689 2010-04-24 02:14:58 B2656101man.rpt
-rw-rw-rw- hfischer/domain 10141 2010-04-24 02:14:58 B2656101piece.rpt
-rw-rw-rw- hfischer/domain 159362 2010-04-24 02:15:06 B2656101preports.pdf
-rw-rw-rw- hfischer/domain  20228 2010-04-24 02:14:58 B2656101sort.rpt
-rw-rw-rw- hfischer/domain 137864 2010-04-24 02:15:06 B2656101tray.rpt
-rw-rw-rw- hfischer/domain 1079024152 2010-04-24 02:16:54 B26561_01.ps
tar: Read 6210 bytes from tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar
tar: Unexpected EOF in archive
tar: Error is not recoverable: exiting now
ndftp:/home/sftptest/incoming:# tar xvf tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar
B26561013553.rpt
B26561013600.rpt
B2656101err.rpt
B2656101group.rpt
B2656101man.rpt
B2656101piece.rpt
B2656101preports.pdf
B2656101sort.rpt
B2656101tray.rpt
B26561_01.ps
tar: Read 6210 bytes from tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar
tar: Unexpected EOF in archive
tar: Unexpected EOF in archive
tar: Error is not recoverable: exiting now
ndftp:/home/sftptest/incoming:# ls -la
total 4377241
drwxr-xr-x 2 sftptest sftponly       920 May 14 12:26 ./
drwxr-xr-x 6 root     root           144 Apr 29 09:26 ../
-rw-r--r-- 1 root     root      86128640 May 14 11:25 18599.bills.tar
-rw-rw-rw- 1 sftptest sftponly  10490759 May 14 11:24 18599.bills.tar.gz.gpg
-rw-rw-rw- 1 sftptest sftponly    468663 May 14 09:54 28513110.cab.tar.gpg
-rw-rw-rw- 1 hfischer     1513      6249 Apr 24 02:14 B26561013553.rpt
-rw-rw-rw- 1 hfischer     1513     39776 Apr 24 02:14 B26561013600.rpt
-rw-rw-rw- 1 hfischer     1513     53965 Apr 24 02:14 B2656101err.rpt
-rw-rw-rw- 1 hfischer     1513      8452 Apr 24 02:14 B2656101group.rpt
-rw-rw-rw- 1 hfischer     1513     60689 Apr 24 02:14 B2656101man.rpt
-rw-rw-rw- 1 hfischer     1513     10141 Apr 24 02:14 B2656101piece.rpt
-rw-rw-rw- 1 hfischer     1513    159362 Apr 24 02:15 B2656101preports.pdf
-rw-rw-rw- 1 hfischer     1513     20228 Apr 24 02:14 B2656101sort.rpt
-rw-rw-rw- 1 hfischer     1513    137864 Apr 24 02:15 B2656101tray.rpt
-rw-rw-rw- 1 root     root     842018304 May 14 12:27 B26561_01.ps
-rw-r--r-- 1 sftptest sftponly       353 May 12 09:55 extract.d.gpg
-rw-r--r-- 1 root     root     842522690 May 14 12:20 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar
-rw-rw-rw- 1 sftptest sftponly 675455638 May 14 11:55 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar.gpg
-rw-r--r-- 1 root     root     675455639 May 14 11:48 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar.gpg.good
-rw-r--r-- 1 root     root     673974299 May 14 11:35 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.tar.gz
-rw-rw-rw- 1 sftptest sftponly 670869440 May 14 08:51 tbillsdoc1B26561_01_201005_201004_26561_00114_PRD.zip.gpg.bad
ndftp:/home/sftptest/incoming:#


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Heather Fischer 
Sent: Friday, May 14, 2010 8:42 AM
To: &#39;bug-Net-SFTP-Foreign@rt.cpan.org&#39;
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Well, this is strange.  It now appears to be working with the 1.55 and 1.57 Foreign.pm!  I tested it and the resume works as well. Wonderful. I&#39;m so sorry to have bothered you and wasted your time.  I could not get it to work when I opened the ticket as I was getting the error below.

print&#40;&#41; on closed filehandle $fh at
/usr/lib/perl5/site_perl/5.8.3/Net/SFTP/Foreign.pm line 1585.


Thanks again for writing this module. I love it.


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org]
Sent: Thursday, May 13, 2010 3:30 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 13, 2010 9:39:57 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
<div class="message-stanza open">&gt; How should the
&gt; &#34;resume&#34; option be used?  Should it be specified in a transfer only 
&gt; when you are trying to resume a previously failed file transfer?  In 
&gt; which case resume, will start the file transfer where it left off?  Or 
&gt; can it be used for all file transfers, which include new and ones we 
&gt; want to resume?
</div>
<div class="message-stanza open">&gt; I am really curious how and if this works reliably or if I am 
&gt; misunderstanding it&#39;s function.
</div>
when &#34;resume =&gt; 1&#34; is used with &#34;get&#34;, if the local file already exists only the missing bits will be copied, otherwise the full file will be transferred.

if &#34;resume =&gt; &#39;auto&#39;&#34; is used, it will also check the timestamps of both files and resume the transfer only when the local file is newer than the remote one, otherwise, the local file will be deleted and the full remote file copied.

This operation is reliable as far as no other process modifies the partially transferred files. But no checksum or other means to corroborate the integrity of the local file is performed as these kind of operations are not supported by the SFTP protocol.

If you have weak networks, and your SSH connections break from time to time &#40;for instance, when connecting through a mobile network link, or a VPN&#41; using resume is a safe operation.

It can be also used to incrementally transfer files that are written in append mode as for instance log files.

Hope that helps,

Cheers,

 - Salva

    Heather 
<div class="message-stanza open">&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather Fischer 
<div class="message-stanza open">&gt; 
</div>Sent: Thursday, May 13, 2010 2:30 PM
To: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt
&gt; .cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>Subject: 
<div class="message-stanza open">&gt; RE: [rt.cpan.org #57386]
&gt; Net-SFTP-Foreign Bug
</div>
Where exactly do I put 
<div class="message-stanza open">&gt; &#34;$Net::SFTP::Foreign=-1&#34;.  It&#39;s erroring where I
</div>put it.



<div class="message-stanza open">&gt;     Heather Fischer___________________
</div>Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador Fandino 
<div class="message-stanza open">&gt; Garcia via RT
</div>[mailto:
<div class="message-stanza open">&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt
&gt; .cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; Thursday, May 13, 2010 12:02 PM
</div>To: Heather Fischer
Subject: [rt.cpan.org 
<div class="message-stanza open">&gt; #57386] Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
I am still 
<div class="message-stanza open">&gt; unable to reproduce the problem.
</div>
Set 

  
<div class="message-stanza open">&gt; $Net::SFTP::Foreign=-1
</div>
in the script, run it again &#40;both with and with 
<div class="message-stanza open">&gt; our resume&#41; and send me
</div>the &#40;compressed&#41; output so I can see what is going 
<div class="message-stanza open">&gt; on.
</div>
A capture at the OS level with strace would probably also 
<div class="message-stanza open">&gt; help.
</div>
&#40;take care to not use files with sensible information as its 
<div class="message-stanza open">&gt; contents
</div>will appear on the debugging output and to remove passwords or to 
<div class="message-stanza open">&gt; use
</div>dummy ones&#41;
</div></div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-777163" href="/Public/Bug/Display.html?id=57386#txn-777163">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;14&nbsp;16:48:32&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 May 2010 13:48:14 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/777163/402522/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402522">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Fri, May 14, 2010 9:43:14 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hi,

Has 
<div class="message-stanza open">&gt; the resume option been tested with encrypted files?  For the &#34;gets&#34;, resume 
&gt; works well for .tar, .zip and encrypted files. However, for &#34;put&#34;s, the files 
&gt; encrypted with GPG are corrupt when resume is used to finish a partial 
&gt; download.  The resume &#34;put&#34; option works good for the .tar and .zip 
&gt; files.
</div>
I guess the problem is more related to some other property of the file than to being encrypted as the module does not process the file contents in anyway, it just sees raw data.

<div class="message-stanza open">&gt; Should I open a different bug for this put, resume, encrypted file 
&gt; issue? 
</div>
 just try to reproduce the problem with

  $Net::SFTP::Foreign::debug = -1 

And send me the output.

It seems that one byte has been lost in the &#34;resumed&#34; file transfer... I would investigate where the problem can be.

Cheers

- Salva
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-777166" href="/Public/Bug/Display.html?id=57386#txn-777166">#</a>      
    </span>
    <span class="date">Fri&nbsp;May&nbsp;14&nbsp;16:48:48&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Out of Office AutoReply: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 14 May 2010 15:49:02 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Salvador \&#34;Fandiño\&#34; via RT &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/777166/402526/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402526">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 229b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am currently out of the office and am unable to repond to your message at this time.  I will return to the office on Tuesday, May 18th. If you need immediate assistance, please email tele-tech@nisc.coop.  

Thank you.

Heather
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/777166/402527/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/402527">with headers</a>
<br />
<span class="downloadcontenttype">text/html 648b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-778592" href="/Public/Bug/Display.html?id=57386#txn-778592">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;18&nbsp;11:51:52&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 18 May 2010 10:51:31 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/778592/403259/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/403259">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Good morning,

Attached is the debug information for the *.zip.gpg file listed below that was resumed after the initial transmission was killed part way thru the ftp. 

The *.zip.gpg below is the file ftped with resume after the first transmission aborted partially thru the ftp process.  Not that it is one byte smaller than the good file.
ndftp:/home/sftptest/incoming:# ls -ltr
total 696
-rw-rw-rw- 1 sftptest sftponly 356053 May 18 10:08 ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
-rw-rw-rw- 1 sftptest sftponly 356052 May 18 10:37 ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg


Decryption failed:
ndftp:/home/sftptest/incoming:# gpg --homedir /.gnupg -o ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip --decrypt ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg
gpg: WARNING: unsafe enclosing directory permissions on configuration file `/.gnupg/options&#39;
gpg: encrypted with 1024-bit ELG-E key, ID 1EA8814A, created 2001-06-25
      &#34;NISC ND &#40;NISC GnuPG Key&#41; &lt;nisc@nisc.cc&gt;&#34;
gpg: fatal: zlib inflate problem: invalid code lengths set
secmem usage: 2112/2368 bytes in 4/7 blocks of pool 3456/32768


ndftp:/home/sftptest/incoming:# mv ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg ttbillsdoc1B01528_02_201005_201005_88888_0204_TST.zip.gpg.bad


The &#34;.zip.gpg.good&#34; file was ftped normally with no interruption in transmission so resume was not used.  The good file decrypts successfully.

ndftp:/home/sftptest/incoming:#  gpg --homedir /.gnupg -o ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip --decrypt ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
gpg: WARNING: unsafe enclosing directory permissions on configuration file `/.gnupg/options&#39;
gpg: encrypted with 1024-bit ELG-E key, ID 1EA8814A, created 2001-06-25
      &#34;NISC ND &#40;NISC GnuPG Key&#41; &lt;nisc@nisc.cc&gt;&#34;
ndftp:/home/sftptest/incoming:# ls -ltr
total 1048
-rw-rw-rw- 1 sftptest sftponly 356053 May 18 10:08 ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
-rw-rw-rw- 1 sftptest sftponly 356052 May 18 10:37 ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.bad
-rw-r--r-- 1 root     root     360136 May 18 10:39 ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
ndftp:/home/sftptest/incoming:# unzip -l ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
Archive:  ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
  Length     Date   Time    Name
 --------    ----   ----    ----
     6219  05-17-10 20:49   B01528023553.rpt
     3649  05-17-10 20:49   B0152802err.rpt
     5424  05-17-10 20:49   B0152802group.rpt
     5355  05-17-10 20:49   B0152802piece.rpt
   204552  05-17-10 20:49   B01528_02_201005_88888p.pdf
      416  05-17-10 20:49   B01528_02_201005_88888p.sni
  1490697  05-17-10 20:49   B01528_02.ps
 --------                   -------
  1716312                   7 files
ndftp:/home/sftptest/incoming:# 


Please let me know what you find.  We would really like to use the resume option to ftp very large encrypted disaster management files to our sftp server.


Thank you.

Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Friday, May 14, 2010 3:49 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Fri, May 14, 2010 9:43:14 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hi,

Has 
<div class="message-stanza open">&gt; the resume option been tested with encrypted files?  For the &#34;gets&#34;, resume 
&gt; works well for .tar, .zip and encrypted files. However, for &#34;put&#34;s, the files 
&gt; encrypted with GPG are corrupt when resume is used to finish a partial 
&gt; download.  The resume &#34;put&#34; option works good for the .tar and .zip 
&gt; files.
</div>
I guess the problem is more related to some other property of the file than to being encrypted as the module does not process the file contents in anyway, it just sees raw data.

<div class="message-stanza open">&gt; Should I open a different bug for this put, resume, encrypted file 
&gt; issue? 
</div>
 just try to reproduce the problem with

  $Net::SFTP::Foreign::debug = -1 

And send me the output.

It seems that one byte has been lost in the &#34;resumed&#34; file transfer... I would investigate where the problem can be.

Cheers

- Salva
</div></div></div></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-779802" href="/Public/Bug/Display.html?id=57386#txn-779802">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;20&nbsp;13:15:09&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 May 2010 10:14:58 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/779802/403865/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/403865">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.4k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Some questions:

1&#41; Can you deterministically reproduce the error or it just happens from time to time?

2&#41; Does it happen for any gpg compressed file or just for some specific one?

3&#41; If it is deterministic and happens for some specific file can you try repeating your tests with a newer perl as perl 5.8.9?

I have been running tests here trying to reproduce the problem without success and I am unable to see any problem in the module logic just looking at the code either.

My only guess at the moment is that it could be related to some unicode bug in your old perl version 5.8.3... though, that would not explain why it fails when resuming only.

Anyway, I am adding some more debugging to the resume feature and will send you a new version of the module soon that would allow me to find where the missing byte is dropped.

Cheers,

- Salva



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Tue, May 18, 2010 5:52:14 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
Good 
<div class="message-stanza open">&gt; morning,
</div>
Attached is the debug information for the *.zip.gpg file listed 
<div class="message-stanza open">&gt; below that was resumed after the initial transmission was killed part way thru 
&gt; the ftp. 
</div>
The *.zip.gpg below is the file ftped with resume after the 
<div class="message-stanza open">&gt; first transmission aborted partially thru the ftp process.  Not that it is 
&gt; one byte smaller than the good file.
</div>ndftp:/home/sftptest/incoming:# ls 
<div class="message-stanza open">&gt; -ltr
</div>total 696
-rw-rw-rw- 1 sftptest sftponly 356053 May 18 10:08 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
</div>-rw-rw-rw- 1 
<div class="message-stanza open">&gt; sftptest sftponly 356052 May 18 10:37 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg
</div>

Decryption 
<div class="message-stanza open">&gt; failed:
</div>ndftp:/home/sftptest/incoming:# gpg --homedir /.gnupg -o 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip --decrypt 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg
</div>gpg: WARNING: 
<div class="message-stanza open">&gt; unsafe enclosing directory permissions on configuration file 
&gt; `/.gnupg/options&#39;
</div>gpg: encrypted with 1024-bit ELG-E key, ID 1EA8814A, 
<div class="message-stanza open">&gt; created 2001-06-25
</div>      &#34;NISC ND &#40;NISC GnuPG Key&#41; &lt;
<div class="message-stanza open">&gt; ymailto=&#34;mailto:nisc@nisc.cc&#34; 
&gt; href=&#34;mailto:nisc@nisc.cc&#34;&gt;nisc@nisc.cc&gt;&#34;
</div>gpg: fatal: zlib inflate 
<div class="message-stanza open">&gt; problem: invalid code lengths set
</div>secmem usage: 2112/2368 bytes in 4/7 blocks 
<div class="message-stanza open">&gt; of pool 3456/32768
</div>

ndftp:/home/sftptest/incoming:# mv 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_0204_TST.zip.gpg.bad
</div>

The 
<div class="message-stanza open">&gt; &#34;.zip.gpg.good&#34; file was ftped normally with no interruption in transmission so 
&gt; resume was not used.  The good file decrypts 
&gt; successfully.
</div>
ndftp:/home/sftptest/incoming:#  gpg --homedir /.gnupg 
<div class="message-stanza open">&gt; -o ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip --decrypt 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
</div>gpg: WARNING: 
<div class="message-stanza open">&gt; unsafe enclosing directory permissions on configuration file 
&gt; `/.gnupg/options&#39;
</div>gpg: encrypted with 1024-bit ELG-E key, ID 1EA8814A, 
<div class="message-stanza open">&gt; created 2001-06-25
</div>      &#34;NISC ND &#40;NISC GnuPG Key&#41; &lt;
<div class="message-stanza open">&gt; ymailto=&#34;mailto:nisc@nisc.cc&#34; 
&gt; href=&#34;mailto:nisc@nisc.cc&#34;&gt;nisc@nisc.cc&gt;&#34;
</div>ndftp:/home/sftptest/incoming:# 
<div class="message-stanza open">&gt; ls -ltr
</div>total 1048
-rw-rw-rw- 1 sftptest sftponly 356053 May 18 10:08 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
</div>-rw-rw-rw- 1 
<div class="message-stanza open">&gt; sftptest sftponly 356052 May 18 10:37 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.bad
</div>-rw-r--r-- 1 
<div class="message-stanza open">&gt; root     root     360136 May 18 10:39 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
</div>ndftp:/home/sftptest/incoming:# 
<div class="message-stanza open">&gt; unzip -l 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
</div>Archive:  
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
</div>  Length  
<div class="message-stanza open">&gt;    Date   Time    Name
</div>--------    ----  
<div class="message-stanza open">&gt; ----    ----
</div>     6219  05-17-10 20:49  
<div class="message-stanza open">&gt; B01528023553.rpt
</div>     3649  05-17-10 20:49  
<div class="message-stanza open">&gt; B0152802err.rpt
</div>     5424  05-17-10 20:49  
<div class="message-stanza open">&gt; B0152802group.rpt
</div>     5355  05-17-10 20:49  
<div class="message-stanza open">&gt; B0152802piece.rpt
</div>   204552  05-17-10 20:49  
<div class="message-stanza open">&gt; B01528_02_201005_88888p.pdf
</div>      416  05-17-10 
<div class="message-stanza open">&gt; 20:49   B01528_02_201005_88888p.sni
</div>  1490697  05-17-10 
<div class="message-stanza open">&gt; 20:49   B01528_02.ps
</div>--------            
<div class="message-stanza open">&gt;        -------
</div>  1716312        
<div class="message-stanza open">&gt;            7 files
</div>ndftp:/home/sftptest/incoming:# 
<div class="message-stanza open">&gt; 
</div>

Please let me know what you find.  We would really like to use 
<div class="message-stanza open">&gt; the resume option to ftp very large encrypted disaster management files to our 
&gt; sftp server.
</div>

Thank you.

Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org] 
&gt; 
</div>Sent: Friday, May 14, 2010 3:49 PM
To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;http://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> 
&gt; &gt;
</div></div>




<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather 
&gt; Fischer via RT &lt;
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; Sent: Fri, May 14, 2010 9:43:14 PM
&gt; Subject: RE: [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;
&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hi,

Has 
<div class="message-stanza open">&gt; 
&gt; the resume option been tested with encrypted files?  For the 
&gt; &#34;gets&#34;, resume 
&gt; works well for .tar, .zip and encrypted files. However, 
&gt; for &#34;put&#34;s, the files 
&gt; encrypted with GPG are corrupt when resume is 
&gt; used to finish a partial 
&gt; download.  The resume &#34;put&#34; option works 
&gt; good for the .tar and .zip 
&gt; files.
</div>
I guess the problem is more 
<div class="message-stanza open">&gt; related to some other property of the file than to being encrypted as the module 
&gt; does not process the file contents in anyway, it just sees raw data.
</div>
<div class="message-stanza open">&gt; 
&gt; Should I open a different bug for this put, resume, encrypted file 
&gt; 
&gt; issue? 
</div>
just try to reproduce the problem with

  
<div class="message-stanza open">&gt; $Net::SFTP::Foreign::debug = -1 
</div>
And send me the output.

It seems 
<div class="message-stanza open">&gt; that one byte has been lost in the &#34;resumed&#34; file transfer... I would 
&gt; investigate where the problem can be.
</div>
Cheers

- Salva
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-779858" href="/Public/Bug/Display.html?id=57386#txn-779858">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;20&nbsp;16:07:38&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 20 May 2010 15:07:52 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/779858/403896/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/403896">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 7.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Salva,

Responses:
1. Everytime with gpg encrypted files. Tried .tar, .zip and .pdf encrypted files.
2. Tried several different files and file types to verify before reporting bug to you.
3. Do you still need me to dot his?

Thank you for looking into this issue and your professionalism. 


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Thursday, May 20, 2010 12:15 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

Some questions:

1&#41; Can you deterministically reproduce the error or it just happens from time to time?

2&#41; Does it happen for any gpg compressed file or just for some specific one?

3&#41; If it is deterministic and happens for some specific file can you try repeating your tests with a newer perl as perl 5.8.9?

I have been running tests here trying to reproduce the problem without success and I am unable to see any problem in the module logic just looking at the code either.

My only guess at the moment is that it could be related to some unicode bug in your old perl version 5.8.3... though, that would not explain why it fails when resuming only.

Anyway, I am adding some more debugging to the resume feature and will send you a new version of the module soon that would allow me to find where the missing byte is dropped.

Cheers,

- Salva



<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Tue, May 18, 2010 5:52:14 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
Good 
<div class="message-stanza open">&gt; morning,
</div>
Attached is the debug information for the *.zip.gpg file listed 
<div class="message-stanza open">&gt; below that was resumed after the initial transmission was killed part 
&gt; way thru the ftp.
</div>
The *.zip.gpg below is the file ftped with resume after the 
<div class="message-stanza open">&gt; first transmission aborted partially thru the ftp process.  Not that 
&gt; it is one byte smaller than the good file.
</div>ndftp:/home/sftptest/incoming:# ls 
<div class="message-stanza open">&gt; -ltr
</div>total 696
-rw-rw-rw- 1 sftptest sftponly 356053 May 18 10:08 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
</div>-rw-rw-rw- 1 
<div class="message-stanza open">&gt; sftptest sftponly 356052 May 18 10:37 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg
</div>

Decryption 
<div class="message-stanza open">&gt; failed:
</div>ndftp:/home/sftptest/incoming:# gpg --homedir /.gnupg -o 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip --decrypt 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg
</div>gpg: WARNING: 
<div class="message-stanza open">&gt; unsafe enclosing directory permissions on configuration file 
&gt; `/.gnupg/options&#39;
</div>gpg: encrypted with 1024-bit ELG-E key, ID 1EA8814A, 
<div class="message-stanza open">&gt; created 2001-06-25
</div>      &#34;NISC ND &#40;NISC GnuPG Key&#41; &lt;
<div class="message-stanza open">&gt; ymailto=&#34;mailto:nisc@nisc.cc&#34; 
&gt; href=&#34;mailto:nisc@nisc.cc&#34;&gt;nisc@nisc.cc&gt;&#34;
</div>gpg: fatal: zlib inflate 
<div class="message-stanza open">&gt; problem: invalid code lengths set
</div>secmem usage: 2112/2368 bytes in 4/7 blocks 
<div class="message-stanza open">&gt; of pool 3456/32768
</div>

ndftp:/home/sftptest/incoming:# mv 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg
&gt; ttbillsdoc1B01528_02_201005_201005_88888_0204_TST.zip.gpg.bad
</div>

The 
<div class="message-stanza open">&gt; &#34;.zip.gpg.good&#34; file was ftped normally with no interruption in transmission so 
&gt; resume was not used.  The good file decrypts 
&gt; successfully.
</div>
ndftp:/home/sftptest/incoming:#  gpg --homedir /.gnupg 
<div class="message-stanza open">&gt; -o ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip --decrypt 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
</div>gpg: WARNING: 
<div class="message-stanza open">&gt; unsafe enclosing directory permissions on configuration file 
&gt; `/.gnupg/options&#39;
</div>gpg: encrypted with 1024-bit ELG-E key, ID 1EA8814A, 
<div class="message-stanza open">&gt; created 2001-06-25
</div>      &#34;NISC ND &#40;NISC GnuPG Key&#41; &lt;
<div class="message-stanza open">&gt; ymailto=&#34;mailto:nisc@nisc.cc&#34; 
&gt; href=&#34;mailto:nisc@nisc.cc&#34;&gt;nisc@nisc.cc&gt;&#34;
</div>ndftp:/home/sftptest/incoming:# 
<div class="message-stanza open">&gt; ls -ltr
</div>total 1048
-rw-rw-rw- 1 sftptest sftponly 356053 May 18 10:08 
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.good
</div>-rw-rw-rw- 1 
<div class="message-stanza open">&gt; sftptest sftponly 356052 May 18 10:37 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip.gpg.bad
</div>-rw-r--r-- 1 
<div class="message-stanza open">&gt; root     root     360136 May 18 10:39 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
</div>ndftp:/home/sftptest/incoming:# 
<div class="message-stanza open">&gt; unzip -l 
&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
</div>Archive:  
<div class="message-stanza open">&gt; ttbillsdoc1B01528_02_201005_201005_88888_02042_TST.zip
</div>  Length  
<div class="message-stanza open">&gt;    Date   Time    Name
</div>--------    ----  
<div class="message-stanza open">&gt; ----    ----
</div>     6219  05-17-10 20:49  
<div class="message-stanza open">&gt; B01528023553.rpt
</div>     3649  05-17-10 20:49  
<div class="message-stanza open">&gt; B0152802err.rpt
</div>     5424  05-17-10 20:49  
<div class="message-stanza open">&gt; B0152802group.rpt
</div>     5355  05-17-10 20:49  
<div class="message-stanza open">&gt; B0152802piece.rpt
</div>   204552  05-17-10 20:49  
<div class="message-stanza open">&gt; B01528_02_201005_88888p.pdf
</div>      416  05-17-10 
<div class="message-stanza open">&gt; 20:49   B01528_02_201005_88888p.sni
</div>  1490697  05-17-10 
<div class="message-stanza open">&gt; 20:49   B01528_02.ps
</div>--------            
<div class="message-stanza open">&gt;        -------
</div>  1716312        
<div class="message-stanza open">&gt;            7 files
</div>ndftp:/home/sftptest/incoming:# 
<div class="message-stanza open">&gt; 
</div>

Please let me know what you find.  We would really like to use 
<div class="message-stanza open">&gt; the resume option to ftp very large encrypted disaster management files to our 
&gt; sftp server.
</div>

Thank you.

Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org] 
&gt; 
</div>Sent: Friday, May 14, 2010 3:49 PM
To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;http://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> 
&gt; &gt;
</div></div>




<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather 
&gt; Fischer via RT &lt;
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; Sent: Fri, May 14, 2010 9:43:14 PM
&gt; Subject: RE: [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;
&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hi,

Has 
<div class="message-stanza open">&gt; 
&gt; the resume option been tested with encrypted files?  For the 
&gt; &#34;gets&#34;, resume 
&gt; works well for .tar, .zip and encrypted files. However, 
&gt; for &#34;put&#34;s, the files 
&gt; encrypted with GPG are corrupt when resume is 
&gt; used to finish a partial 
&gt; download.  The resume &#34;put&#34; option works 
&gt; good for the .tar and .zip 
&gt; files.
</div>
I guess the problem is more 
<div class="message-stanza open">&gt; related to some other property of the file than to being encrypted as the module 
&gt; does not process the file contents in anyway, it just sees raw data.
</div>
<div class="message-stanza open">&gt; 
&gt; Should I open a different bug for this put, resume, encrypted file 
&gt; 
&gt; issue? 
</div>
just try to reproduce the problem with

  
<div class="message-stanza open">&gt; $Net::SFTP::Foreign::debug = -1 
</div>
And send me the output.

It seems 
<div class="message-stanza open">&gt; that one byte has been lost in the &#34;resumed&#34; file transfer... I would 
&gt; investigate where the problem can be.
</div>
Cheers

- Salva
</div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-780829" href="/Public/Bug/Display.html?id=57386#txn-780829">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;22&nbsp;04:32:10&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 May 2010 01:32:00 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/780829/404397/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/404397">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 900b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">&gt; Responses:
&gt; 1. Everytime with gpg encrypted files. Tried .tar, 
&gt; .zip and .pdf encrypted files.
&gt; 2. Tried several different files and file 
&gt; types to verify before reporting bug to you.
&gt; 3. Do you still need me to dot 
&gt; his?
</div>
Can you try the new version of the module available from CPAN &#40;1.58_02&#41;? It generates more useful debugging info for the put method.

Also, it contains a testing script, samples/resume_put.pl that creates random pgp files and simulates resumed transfers.

Run it for a while to see if it breaks on your system &#40;I have been running it here for several hours without a single failure&#41;. If it breaks then send me the generated debugging file Net-SFTP-Foreign.debug &#40;compressed, please :-&#41; &#41;

You can run the script from the unpacked module directory &#40;no need to install it&#41; as follows:

    $ perl -Ilib samples/resume_put.pl 1000000 some-pgp-id@foo.com

- Salva
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-780832" href="/Public/Bug/Display.html?id=57386#txn-780832">#</a>      
    </span>
    <span class="date">Sat&nbsp;May&nbsp;22&nbsp;04:36:28&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Sat, 22 May 2010 01:36:19 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/780832/404400/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/404400">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 82b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">BTW, which OS are you using? From the kernel version I guess it is SLES 9, right?
</div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-782066" href="/Public/Bug/Display.html?id=57386#txn-782066">#</a>      
    </span>
    <span class="date">Tue&nbsp;May&nbsp;25&nbsp;17:27:32&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Tue, 25 May 2010 13:53:39 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/782066/405100/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405100">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 616b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes.  


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Saturday, May 22, 2010 3:36 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

BTW, which OS are you using? From the kernel version I guess it is SLES 9, right?
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-782356" href="/Public/Bug/Display.html?id=57386#txn-782356">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;26&nbsp;09:20:44&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 May 2010 08:20:05 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/782356/405216/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405216">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Also, would you please remove my script from CPAN bug report page, which copyrighted property of NISC?


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Heather Fischer 
Sent: Tuesday, May 25, 2010 1:59 PM
To: bug-Net-SFTP-Foreign@rt.cpan.org
Cc: &#39;heather.fischer@nisc.coop&#39;
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Where exactly is the link to the new version?  I&#39;m not seeing it on: <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/~salva/Net-SFTP-Foreign/lib/Net/SFTP/Foreign.pm">http://search.cpan.org/~salva/Net-SFTP-Foreign/lib/Net/SFTP/Foreign.pm</a></span> 


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org]
Sent: Saturday, May 22, 2010 3:32 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

Hi,


<div class="message-stanza open">&gt; Responses:
&gt; 1. Everytime with gpg encrypted files. Tried .tar, .zip and .pdf 
&gt; encrypted files.
&gt; 2. Tried several different files and file types to verify before 
&gt; reporting bug to you.
&gt; 3. Do you still need me to dot
&gt; his?
</div>
Can you try the new version of the module available from CPAN &#40;1.58_02&#41;? It generates more useful debugging info for the put method.

Also, it contains a testing script, samples/resume_put.pl that creates random pgp files and simulates resumed transfers.

Run it for a while to see if it breaks on your system &#40;I have been running it here for several hours without a single failure&#41;. If it breaks then send me the generated debugging file Net-SFTP-Foreign.debug &#40;compressed, please :-&#41; &#41;

You can run the script from the unpacked module directory &#40;no need to install it&#41; as follows:

    $ perl -Ilib samples/resume_put.pl 1000000 some-pgp-id@foo.com

- Salva
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-782421" href="/Public/Bug/Display.html?id=57386#txn-782421">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;26&nbsp;12:29:37&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 May 2010 09:29:28 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/782421/405259/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405259">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 885b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Wed, May 26, 2010 3:20:45 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
<div class="message-stanza open">&gt; Also, would you please remove my script from CPAN bug report page, which copyrighted property of 
&gt; NISC?
</div>
I don&#39;t have the required permissions, you would have to ask to the RT administrators to do it: rt-cpan-admin@bestpractical.com

The latest version of the module is available from <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_02.tar.gz">http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_02.tar.gz</a></span>

Though I have already tried running the test script under SLES 9 for i386 &#40;not x86_64&#41; and it didn&#39;t fail.

Would you be able to provide me with some of the PGP files that are failing &#40;with out the PGP keys&#41;?

- Salva
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-782475" href="/Public/Bug/Display.html?id=57386#txn-782475">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;26&nbsp;15:05:43&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 May 2010 14:05:18 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/782475/405288/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405288">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.7k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello,

I installed the new version on our test server.

Do you have a very large test file I could test with?  All of the large files I have are customer related data that I cannot run tests on to prevent the data going to the debug output.  I need a large file so I have time to check for upload progress and kill the ftp before the ftp completes. Do you have a better idea how to partially upload a file to test the resume?

Thank you.


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Wednesday, May 26, 2010 11:30 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Wed, May 26, 2010 3:20:45 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
<div class="message-stanza open">&gt; Also, would you please remove my script from CPAN bug report page, 
&gt; which copyrighted property of NISC?
</div>
I don&#39;t have the required permissions, you would have to ask to the RT administrators to do it: rt-cpan-admin@bestpractical.com

The latest version of the module is available from <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_02.tar.gz">http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_02.tar.gz</a></span>

Though I have already tried running the test script under SLES 9 for i386 &#40;not x86_64&#41; and it didn&#39;t fail.

Would you be able to provide me with some of the PGP files that are failing &#40;with out the PGP keys&#41;?

- Salva
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-782663" href="/Public/Bug/Display.html?id=57386#txn-782663">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;26&nbsp;17:07:03&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 May 2010 16:06:41 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/782663/405372/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405372">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 6.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I found a large test file on the Internet to work with.  With the new module installed, the &#34;resume&#34; didn&#39;t even resume the transfer.  It restarted it as you can see by the bytes size on the file when it went from 295516160 bytes to 16977048 bytes in my &#34;ls -ltr&#34; when the transmission was restarted instead of continuing on where it left off.  

I need to redo and capture the proper debug output for you. This is all I have for today.

teconv:~/test:-&gt; ls -ltr
total 1338766
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 295516160 May 26 16:01 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1338766
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 295516160 May 26 16:01 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1338766
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 295516160 May 26 16:01 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1066488
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain  16977048 May 26 16:02 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1185300
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 138469624 May 26 16:02 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1355310
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 312442880 May 26 16:02 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1427124
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 385900536 May 26 16:02 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1500912
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 461353056 May 26 16:02 tmp.512MB.zip.gpg.tmp
teconv:~/test:-&gt; ls -ltr
total 1574984
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 537166134 May 26 16:02 512MB.zip.gpg
teconv:~/test:-&gt; ls -ltr
total 1574984
drwxrwxrwx  2 hfischer domain        80 Apr 16 14:57 incoming/
drwxrwxrwx  3 hfischer domain       424 May  7 09:11 archive/
drwxrwxrwx  3 hfischer domain       352 May 19 13:05 outgoing/
-rw-rw-rw-  1 hfischer domain 537166134 May 26 15:41 512MB.zip.gpg.good
-rw-rw-rw-  1 hfischer domain 536870912 May 26 15:43 512MB.zip.good
-rw-rw-rw-  1 hfischer domain 537166134 May 26 16:02 512MB.zip.gpg
teconv:~/test:-&gt; 


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Heather Fischer 
Sent: Wednesday, May 26, 2010 2:05 PM
To: bug-Net-SFTP-Foreign@rt.cpan.org
Cc: &#39;heather.fischer@nisc.coop&#39;
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Hello,

I installed the new version on our test server.

Do you have a very large test file I could test with?  All of the large files I have are customer related data that I cannot run tests on to prevent the data going to the debug output.  I need a large file so I have time to check for upload progress and kill the ftp before the ftp completes. Do you have a better idea how to partially upload a file to test the resume?

Thank you.


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org]
Sent: Wednesday, May 26, 2010 11:30 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Wed, May 26, 2010 3:20:45 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div>
<div class="message-stanza open">&gt; Also, would you please remove my script from CPAN bug report page, 
&gt; which copyrighted property of NISC?
</div>
I don&#39;t have the required permissions, you would have to ask to the RT administrators to do it: rt-cpan-admin@bestpractical.com

The latest version of the module is available from <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_02.tar.gz">http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_02.tar.gz</a></span>

Though I have already tried running the test script under SLES 9 for i386 &#40;not x86_64&#41; and it didn&#39;t fail.

Would you be able to provide me with some of the PGP files that are failing &#40;with out the PGP keys&#41;?

- Salva
</div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-782677" href="/Public/Bug/Display.html?id=57386#txn-782677">#</a>      
    </span>
    <span class="date">Wed&nbsp;May&nbsp;26&nbsp;18:43:31&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 26 May 2010 15:43:22 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/782677/405381/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405381">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Wed, May 26, 2010 11:07:04 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
I found a 
<div class="message-stanza open">&gt; large test file on the Internet to work with.  With the new module 
&gt; installed, the &#34;resume&#34; didn&#39;t even resume the transfer.  It restarted it 
&gt; as you can see by the bytes size on the file when it went from 295516160 bytes 
&gt; to 16977048 bytes in my &#34;ls -ltr&#34; when the transmission was restarted instead of 
&gt; continuing on where it left off.  
</div>
This looks like a completely different issue. Are you using the resume =&gt; &#39;auto&#39; feature? Are you using NTP or any other mean to keep the times on your machines synchronized?

Also, &#34;ls -ltr&#34; does not show the modification time of the file but the creation time, next time use &#34;ls -clrt&#34; instead.

I have uploaded a new development version of the module that also generates debugging info for the auto-resume feature. You can get it from <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_03.tar.gz">http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_03.tar.gz</a></span>

- Salva
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-782976" href="/Public/Bug/Display.html?id=57386#txn-782976">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;27&nbsp;09:25:50&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 May 2010 08:25:49 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/782976/405547/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405547">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.3k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hello Salva,

I am using &#34;resume =&gt; 1&#34; as before, which is why I reported this to you.  This version 1.58_02 is not behaving as it did with the 1.55 version did.  1.55 would resume all file transfers, but only corrupted the Gnupg encrypted files.  Now with the 1.58_02 version, the resume isn&#39;t even working.

 $sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 

The time on our servers are synchronized.  I verified between the two servers I&#39;m testing on, but is irrelevant since I&#39;m not using &#34;resume =&gt; auto&#34;.

I will be happy to capture the debug output you requested, but need a version where the resume works for &#34;resume =&gt; 1&#34; and includes the additional debugging you added.


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Wednesday, May 26, 2010 5:44 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="http://rt.cpan.org/Ticket/Display.html?id=57386">http://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Wed, May 26, 2010 11:07:04 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
I found a 
<div class="message-stanza open">&gt; large test file on the Internet to work with.  With the new module 
&gt; installed, the &#34;resume&#34; didn&#39;t even resume the transfer.  It restarted it 
&gt; as you can see by the bytes size on the file when it went from 295516160 bytes 
&gt; to 16977048 bytes in my &#34;ls -ltr&#34; when the transmission was restarted instead of 
&gt; continuing on where it left off.  
</div>
This looks like a completely different issue. Are you using the resume =&gt; &#39;auto&#39; feature? Are you using NTP or any other mean to keep the times on your machines synchronized?

Also, &#34;ls -ltr&#34; does not show the modification time of the file but the creation time, next time use &#34;ls -clrt&#34; instead.

I have uploaded a new development version of the module that also generates debugging info for the auto-resume feature. You can get it from <span class="clickylink"><a target="new" rel="nofollow" href="http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_03.tar.gz">http://search.cpan.org/CPAN/authors/id/S/SA/SALVA/Net-SFTP-Foreign-1.58_03.tar.gz</a></span>

- Salva
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-783010" href="/Public/Bug/Display.html?id=57386#txn-783010">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;27&nbsp;10:43:56&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 May 2010 07:43:48 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/783010/405572/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405572">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.2k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I reported 
<div class="message-stanza open">&gt; this to you.  This version 1.58_02 is not behaving as it did with the 1.55 
&gt; version did.  1.55 would resume all file transfers, but only corrupted the 
&gt; Gnupg encrypted files.  Now with the 1.58_02 version, the resume isn&#39;t even 
&gt; working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
<div class="message-stanza open">&gt; 
</div>
The time on our servers are synchronized.  I verified between the 
<div class="message-stanza open">&gt; two servers I&#39;m testing on, but is irrelevant since I&#39;m not using &#34;resume =&gt; 
&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the debug output you requested, but 
&gt; need a version where the resume works for &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you added.
</div>
1.58_03 works for me.

Could you install it, set in your tests

  $Net::SFTP::Foreign::debug = 20643;

and run them?

it will show why it is not resuming and maybe also why the transfer gets corrupted.

- Salva
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-783013" href="/Public/Bug/Display.html?id=57386#txn-783013">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;27&nbsp;10:47:54&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 May 2010 09:47:38 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/783013/405575/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405575">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Ignore my last message.  I was ftping the file and not sftping to it was using the Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as you suggested below and send the debug info.


Heather Fischer_
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Thursday, May 27, 2010 9:44 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I reported 
<div class="message-stanza open">&gt; this to you.  This version 1.58_02 is not behaving as it did with the 1.55 
&gt; version did.  1.55 would resume all file transfers, but only corrupted the 
&gt; Gnupg encrypted files.  Now with the 1.58_02 version, the resume isn&#39;t even 
&gt; working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
<div class="message-stanza open">&gt; 
</div>
The time on our servers are synchronized.  I verified between the 
<div class="message-stanza open">&gt; two servers I&#39;m testing on, but is irrelevant since I&#39;m not using &#34;resume =&gt; 
&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the debug output you requested, but 
&gt; need a version where the resume works for &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you added.
</div>
1.58_03 works for me.

Could you install it, set in your tests

  $Net::SFTP::Foreign::debug = 20643;

and run them?

it will show why it is not resuming and maybe also why the transfer gets corrupted.

- Salva
</div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-783039" href="/Public/Bug/Display.html?id=57386#txn-783039">#</a>      
    </span>
    <span class="date">Thu&nbsp;May&nbsp;27&nbsp;11:48:56&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 27 May 2010 10:48:00 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/783039/405590/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/405590">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 2.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi Salva,

Attached is a document that contains some notes.  Also attached are the debug logs.  The &#34;orig&#34; is the debug from the first put that was killed during transmission. The &#34;resume&#34; log is when the transfer is resumed and file transmissions completes.  Please let me know if you have any questions.

Thank you. 


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Heather Fischer 
Sent: Thursday, May 27, 2010 9:48 AM
To: bug-Net-SFTP-Foreign@rt.cpan.org
Cc: &#39;heather.fischer@nisc.coop&#39;
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Ignore my last message.  I was ftping the file and not sftping to it was using the Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as you suggested below and send the debug info.


Heather Fischer_
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org]
Sent: Thursday, May 27, 2010 9:44 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I reported 
<div class="message-stanza open">&gt; this to you.  This version 1.58_02 is not behaving as it did with the 
&gt; 1.55 version did.  1.55 would resume all file transfers, but only 
&gt; corrupted the Gnupg encrypted files.  Now with the 1.58_02 version, 
&gt; the resume isn&#39;t even working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
<div class="message-stanza open">&gt; 
</div>
The time on our servers are synchronized.  I verified between the 
<div class="message-stanza open">&gt; two servers I&#39;m testing on, but is irrelevant since I&#39;m not using 
&gt; &#34;resume =&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the debug output you requested, but need a 
&gt; version where the resume works for &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you added.
</div>
1.58_03 works for me.

Could you install it, set in your tests

  $Net::SFTP::Foreign::debug = 20643;

and run them?

it will show why it is not resuming and maybe also why the transfer gets corrupted.

- Salva
</div></div></div></div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/783039/405591/net_sftp_resume_test_1.58_03.doc">Download net_sftp_resume_test_1.58_03.doc</a><br />
<span class="downloadcontenttype">application/msword 31k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/783039/405592/secfiletrans052710-orig.out.gz">Download secfiletrans052710-orig.out.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 271.3k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/783039/405593/secfiletrans052710-resume.out.gz">Download secfiletrans052710-resume.out.gz</a><br />
<span class="downloadcontenttype">application/x-gzip 594.5k</span>
</div>
<div class="messagebody">
<p>Message body not shown because it is not plain text.</p></div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-785516" href="/Public/Bug/Display.html?id=57386#txn-785516">#</a>      
    </span>
    <span class="date">Wed&nbsp;Jun&nbsp;02&nbsp;13:01:06&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Wed, 2 Jun 2010 12:01:04 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/785516/406917/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/406917">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space"> 
From: Heather Fischer 
Sent: Wednesday, June 02, 2010 11:56 AM
To: &#39;salva@cpan.org&#39;
Cc: Heather Fischer
Subject: Copy_perm Option


Hi Salva,

I encountered this same issue trying to upload a file to a WS_FTP-SSH_1.1 server.  I tried your suggestion and it worked.  I am very thankful I found this issue and solution on Google otherwise I was thinking it was my script&#39;s issue.  Are there any consequences to turning this option off for all other transfers?

<span class="clickylink"><a target="new" rel="nofollow" href="http://www.perlmonks.org/?node_id=717506">http://www.perlmonks.org/?node_id=717506</a></span>



Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Heather Fischer 
Sent: Thursday, May 27, 2010 10:48 AM
To: &#39;bug-Net-SFTP-Foreign@rt.cpan.org&#39;
Cc: Heather Fischer
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Hi Salva,

Attached is a document that contains some notes.  Also attached are the debug logs.  The &#34;orig&#34; is the debug from the first put that was killed during transmission. The &#34;resume&#34; log is when the transfer is resumed and file transmissions completes.  Please let me know if you have any questions.

Thank you. 


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Heather Fischer
Sent: Thursday, May 27, 2010 9:48 AM
To: bug-Net-SFTP-Foreign@rt.cpan.org
Cc: &#39;heather.fischer@nisc.coop&#39;
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Ignore my last message.  I was ftping the file and not sftping to it was using the Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as you suggested below and send the debug info.


Heather Fischer_
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org]
Sent: Thursday, May 27, 2010 9:44 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I reported 
<div class="message-stanza open">&gt; this to you.  This version 1.58_02 is not behaving as it did with the
&gt; 1.55 version did.  1.55 would resume all file transfers, but only 
&gt; corrupted the Gnupg encrypted files.  Now with the 1.58_02 version, 
&gt; the resume isn&#39;t even working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
<div class="message-stanza open">&gt; 
</div>
The time on our servers are synchronized.  I verified between the 
<div class="message-stanza open">&gt; two servers I&#39;m testing on, but is irrelevant since I&#39;m not using 
&gt; &#34;resume =&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the debug output you requested, but need a 
&gt; version where the resume works for &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you added.
</div>
1.58_03 works for me.

Could you install it, set in your tests

  $Net::SFTP::Foreign::debug = 20643;

and run them?

it will show why it is not resuming and maybe also why the transfer gets corrupted.

- Salva
</div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789304" href="/Public/Bug/Display.html?id=57386#txn-789304">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;10&nbsp;16:01:08&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Jun 2010 15:01:17 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789304/408954/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/408954">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 3.1k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Any luck with this? 


        Heather Fischer___________________
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Heather Fischer 
Sent: Thursday, May 27, 2010 10:48 AM
To: &#39;bug-Net-SFTP-Foreign@rt.cpan.org&#39;
Cc: Heather Fischer
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Hi Salva,

Attached is a document that contains some notes.  Also attached are the debug logs.  The &#34;orig&#34; is the debug from the first put that was killed during transmission. The &#34;resume&#34; log is when the transfer is resumed and file transmissions completes.  Please let me know if you have any questions.

Thank you. 


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Heather Fischer
Sent: Thursday, May 27, 2010 9:48 AM
To: bug-Net-SFTP-Foreign@rt.cpan.org
Cc: &#39;heather.fischer@nisc.coop&#39;
Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

Ignore my last message.  I was ftping the file and not sftping to it was using the Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as you suggested below and send the debug info.


Heather Fischer_
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<div class="message-stanza open">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org]
Sent: Thursday, May 27, 2010 9:44 AM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;





<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I reported 
<div class="message-stanza open">&gt; this to you.  This version 1.58_02 is not behaving as it did with the
&gt; 1.55 version did.  1.55 would resume all file transfers, but only 
&gt; corrupted the Gnupg encrypted files.  Now with the 1.58_02 version, 
&gt; the resume isn&#39;t even working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
<div class="message-stanza open">&gt; 
</div>
The time on our servers are synchronized.  I verified between the 
<div class="message-stanza open">&gt; two servers I&#39;m testing on, but is irrelevant since I&#39;m not using 
&gt; &#34;resume =&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the debug output you requested, but need a 
&gt; version where the resume works for &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you added.
</div>
1.58_03 works for me.

Could you install it, set in your tests

  $Net::SFTP::Foreign::debug = 20643;

and run them?

it will show why it is not resuming and maybe also why the transfer gets corrupted.

- Salva
</div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789352" href="/Public/Bug/Display.html?id=57386#txn-789352">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;10&nbsp;17:13:28&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Jun 2010 14:13:19 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789352/408984/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/408984">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 4.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Not really.

I am still unable to reproduce the problem and the logs you sent did not show any error.

Where you able to run the resume_put.pl script from the samples directory?


- Salva


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, June 10, 2010 10:01:08 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Any luck with 
<div class="message-stanza open">&gt; this? 
</div>

    Heather 
<div class="message-stanza open">&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather Fischer 
<div class="message-stanza open">&gt; 
</div>Sent: Thursday, May 27, 2010 10:48 AM
To: &#39;
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#39;
</div>Cc: 
<div class="message-stanza open">&gt; Heather Fischer
</div>Subject: RE: [
<div class="message-stanza open">&gt; href=&#34;http://rt.cpan.org&#34;&gt;rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Hi 
<div class="message-stanza open">&gt; Salva,
</div>
Attached is a document that contains some notes.  Also 
<div class="message-stanza open">&gt; attached are the debug logs.  The &#34;orig&#34; is the debug from the first put 
&gt; that was killed during transmission. The &#34;resume&#34; log is when the transfer is 
&gt; resumed and file transmissions completes.  Please let me know if you have 
&gt; any questions.
</div>
Thank you. 


Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather 
<div class="message-stanza open">&gt; Fischer
</div>Sent: Thursday, May 27, 2010 9:48 AM
To: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; &#39;
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#39;
</div>Subject: 
<div class="message-stanza open">&gt; RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Ignore my last 
<div class="message-stanza open">&gt; message.  I was ftping the file and not sftping to it was using the 
&gt; Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as you suggested 
&gt; below and send the debug info.
</div>

Heather Fischer_
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; Thursday, May 27, 2010 9:44 AM
</div>To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> 
&gt; &gt;
</div></div>




<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather 
&gt; Fischer via RT &lt;
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;
&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; 
&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I reported 
<div class="message-stanza open">&gt; 
&gt; this to you.  This version 1.58_02 is not behaving as it did with 
&gt; the
&gt; 1.55 version did.  1.55 would resume all file transfers, but 
&gt; only 
&gt; corrupted the Gnupg encrypted files.  Now with the 1.58_02 
&gt; version, 
&gt; the resume isn&#39;t even 
&gt; working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
<div class="message-stanza open">&gt; 
&gt; 
</div>
The time on our servers are synchronized.  I verified 
<div class="message-stanza open">&gt; between the 
&gt; two servers I&#39;m testing on, but is irrelevant since I&#39;m not 
&gt; using 
&gt; &#34;resume =&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the 
&gt; debug output you requested, but need a 
&gt; version where the resume works 
&gt; for &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you 
&gt; added.
</div>
1.58_03 works for me.

Could you install it, set in your 
<div class="message-stanza open">&gt; tests
</div>
  $Net::SFTP::Foreign::debug = 20643;

and run 
<div class="message-stanza open">&gt; them?
</div>
it will show why it is not resuming and maybe also why the transfer 
<div class="message-stanza open">&gt; gets corrupted.
</div>
- Salva
</div></div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789355" href="/Public/Bug/Display.html?id=57386#txn-789355">#</a>      
    </span>
    <span class="date">Thu&nbsp;Jun&nbsp;10&nbsp;17:17:27&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Thu, 10 Jun 2010 14:17:16 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789355/408987/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/408987">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 322b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: &#34;Salvador \&#34;Fandiño\&#34; via RT&#34; &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, June 10, 2010 11:13:28 PM
&gt; Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt; Where you able to run the resume_put.pl script from the samples 
&gt; directory?
</div>

oops, I meant, *were* you able to...
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789752" href="/Public/Bug/Display.html?id=57386#txn-789752">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;11&nbsp;13:19:20&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Jun 2010 12:19:17 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789752/409201/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409201">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 5.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Hi,

I have not run the script as I&#39;m not comfortable running a script someone else wrote on our system.

I took a look at it, but your code is above my level of Perl understanding.

What exactly does the script do?

Looks like it needs two parameters of what appear to be the file length and gpg id.  Not sure what the gpg needs to be as I&#39;ve never used that option and what about the file length. Is that in bytes or record count or something else?

Is the file just renaming on the local server as I don&#39;t see any login credential code?

Thanks.


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  

<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Thursday, June 10, 2010 4:13 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

Not really.

I am still unable to reproduce the problem and the logs you sent did not show any error.

Where you able to run the resume_put.pl script from the samples directory?


- Salva


<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Thu, June 10, 2010 10:01:08 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Any luck with 
<div class="message-stanza open">&gt; this? 
</div>

    Heather 
<div class="message-stanza open">&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather Fischer 
<div class="message-stanza open">&gt; 
</div>Sent: Thursday, May 27, 2010 10:48 AM
To: &#39;
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#39;
</div>Cc: 
<div class="message-stanza open">&gt; Heather Fischer
</div>Subject: RE: [
<div class="message-stanza open">&gt; href=&#34;http://rt.cpan.org&#34;&gt;rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Hi 
<div class="message-stanza open">&gt; Salva,
</div>
Attached is a document that contains some notes.  Also 
<div class="message-stanza open">&gt; attached are the debug logs.  The &#34;orig&#34; is the debug from the first put 
&gt; that was killed during transmission. The &#34;resume&#34; log is when the transfer is 
&gt; resumed and file transmissions completes.  Please let me know if you have 
&gt; any questions.
</div>
Thank you. 


Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather 
<div class="message-stanza open">&gt; Fischer
</div>Sent: Thursday, May 27, 2010 9:48 AM
To: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; &#39;
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#39;
</div>Subject: 
<div class="message-stanza open">&gt; RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Ignore my last 
<div class="message-stanza open">&gt; message.  I was ftping the file and not sftping to it was using the 
&gt; Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as you suggested 
&gt; below and send the debug info.
</div>

Heather Fischer_
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; Thursday, May 27, 2010 9:44 AM
</div>To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> 
&gt; &gt;
</div></div>




<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather 
&gt; Fischer via RT &lt;
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;
&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; 
&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I reported 
<div class="message-stanza open">&gt; 
&gt; this to you.  This version 1.58_02 is not behaving as it did with 
&gt; the
&gt; 1.55 version did.  1.55 would resume all file transfers, but 
&gt; only 
&gt; corrupted the Gnupg encrypted files.  Now with the 1.58_02 
&gt; version, 
&gt; the resume isn&#39;t even 
&gt; working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
<div class="message-stanza open">&gt; 
&gt; 
</div>
The time on our servers are synchronized.  I verified 
<div class="message-stanza open">&gt; between the 
&gt; two servers I&#39;m testing on, but is irrelevant since I&#39;m not 
&gt; using 
&gt; &#34;resume =&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the 
&gt; debug output you requested, but need a 
&gt; version where the resume works 
&gt; for &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you 
&gt; added.
</div>
1.58_03 works for me.

Could you install it, set in your 
<div class="message-stanza open">&gt; tests
</div>
  $Net::SFTP::Foreign::debug = 20643;

and run 
<div class="message-stanza open">&gt; them?
</div>
it will show why it is not resuming and maybe also why the transfer 
<div class="message-stanza open">&gt; gets corrupted.
</div>
- Salva
</div></div></div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789834" href="/Public/Bug/Display.html?id=57386#txn-789834">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;11&nbsp;16:52:32&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Jun 2010 13:52:24 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789834/409253/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409253">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 1.8k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">



<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Fri, June 11, 2010 7:19:21 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hi,

<div class="message-stanza open">&gt; I have not run the script as I&#39;m not comfortable running a script someone else 
&gt; wrote on our system.
</div>
You are already running my code on your system! Do you think that being it an script or a module makes any difference?


<div class="message-stanza open">&gt; I took a look at it, but your code is above my level 
&gt; of Perl understanding.
</div>
<div class="message-stanza open">&gt; What exactly does the script do?
</div>
It repeatedly creates random files, encrypts them using pgp and simulates a resumed put operation checking for errors.

<div class="message-stanza open">&gt; Looks like 
&gt; it needs two parameters of what appear to be the file length and gpg id.  
&gt; Not sure what the gpg needs to be as I&#39;ve never used that option and what about 
&gt; the file length. Is that in bytes or record count or something else?
</div>
Yes, the first argument is the maximum length of the generated files. The second argument is the id of the pgp public key &#40;and email address&#41; used for encrypting the file.

  $ perl -Ilib samples/resume_put.pl 1000000 some-pgp-id@foo.com

You can create one pgp key running...

  $ gpg --gen-key

It will ask you some questions, you can just accept the defaults when given. At some point it would ask for a name and and email, the email is the id you should to the put-resume.pl script later.

<div class="message-stanza open">&gt; Is the file just renaming on the local server as I don&#39;t see any login credential 
&gt; code?
</div>
It connects to localhost and expects to have public keys authentication configured in order to not require passwords, though you could modify it to use passwords if you prefer it that way.

- Salva
</div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789837" href="/Public/Bug/Display.html?id=57386#txn-789837">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;11&nbsp;16:52:44&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Out of Office AutoReply: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Jun 2010 15:53:00 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> Salvador \&#34;Fandiño\&#34; via RT &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="messageattachments">
<div class="downloadattachment">
<a href="/Ticket/Attachment/789837/409257/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409257">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 230b</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">I am currently out of the office and am unable to repond to your message at this time.  I will return to the office on Tuesday, June 15th. If you need immediate assistance, please email tele-tech@nisc.coop.  

Thank you.

Heather
</div></div>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789837/409258/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409258">with headers</a>
<br />
<span class="downloadcontenttype">text/html 649b</span>
</div>
<div class="messagebody">
</div>
</div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789839" href="/Public/Bug/Display.html?id=57386#txn-789839">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;11&nbsp;16:56:49&nbsp;2010</span>
    <span class="description">sfandino [...] yahoo.com -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Jun 2010 13:56:41 -0700 &#40;PDT&#41;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> bug-Net-SFTP-Foreign [...] rt.cpan.org</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Salvador Fandino &lt;sfandino [...] yahoo.com&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789839/409260/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409260">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 8.6k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Just one question:

Are you encrypting the file with pgp again before resuming the transfer?

I mean, are you doing this:

 1&#41; encrypt the file
 2&#41; partial put
 3&#41; encrypt the file again
 4&#41; resume the put operation


?

- Salva


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Fri, June 11, 2010 7:19:21 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hi,

I 
<div class="message-stanza open">&gt; have not run the script as I&#39;m not comfortable running a script someone else 
&gt; wrote on our system.
</div>
I took a look at it, but your code is above my level 
<div class="message-stanza open">&gt; of Perl understanding.
</div>
What exactly does the script do?

Looks like 
<div class="message-stanza open">&gt; it needs two parameters of what appear to be the file length and gpg id.  
&gt; Not sure what the gpg needs to be as I&#39;ve never used that option and what about 
&gt; the file length. Is that in bytes or record count or something else?
</div>
Is 
<div class="message-stanza open">&gt; the file just renaming on the local server as I don&#39;t see any login credential 
&gt; code?
</div>
Thanks.


Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org] 
&gt; 
</div>Sent: Thursday, June 10, 2010 4:13 PM
To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Not 
<div class="message-stanza open">&gt; really.
</div>
I am still unable to reproduce the problem and the logs you sent 
<div class="message-stanza open">&gt; did not show any error.
</div>
Where you able to run the 
<div class="message-stanza open">&gt; href=&#34;http://resume_put.pl&#34;&gt;resume_put.pl script from the samples 
&gt; directory?
</div>

- Salva


<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; 
&gt; From: Heather Fischer via RT &lt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; Sent: Thu, June 10, 2010 10:01:08 PM
&gt; Subject: RE: [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;
&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Any luck with 
<div class="message-stanza open">&gt; 
&gt; this? 
</div>

    Heather 
<div class="message-stanza open">&gt; 
&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; 
&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 
<div class="message-stanza open">&gt; 58554
</div>**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 
&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt; 
&gt;    
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather 
<div class="message-stanza open">&gt; Fischer 
&gt; 
</div>Sent: Thursday, May 27, 2010 10:48 AM
To: &#39;
<div class="message-stanza open">&gt; 
&gt; ymailto=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#39;
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; Heather Fischer
</div>Subject: RE: [
<div class="message-stanza open">&gt; 
&gt; href=&#34;http://rt.cpan.org&#34;&gt;rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Hi 
<div class="message-stanza open">&gt; 
&gt; Salva,
</div>
Attached is a document that contains some notes.  
<div class="message-stanza open">&gt; Also 
&gt; attached are the debug logs.  The &#34;orig&#34; is the debug from 
&gt; the first put 
&gt; that was killed during transmission. The &#34;resume&#34; log is 
&gt; when the transfer is 
&gt; resumed and file transmissions completes.  
&gt; Please let me know if you have 
&gt; any questions.
</div>
Thank you. 
<div class="message-stanza open">&gt; 
</div>

Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National 
<div class="message-stanza open">&gt; Information Solutions Cooperative
</div>3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 
<div class="message-stanza open">&gt; 58554
</div>**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 
&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt; 
&gt;    
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather 
<div class="message-stanza open">&gt; 
&gt; Fischer
</div>Sent: Thursday, May 27, 2010 9:48 AM
To: 
<div class="message-stanza open">&gt; 
&gt; ymailto=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; &#39;
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#39;
</div>Subject: 
<div class="message-stanza open">&gt; 
&gt; RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Ignore my last 
<div class="message-stanza open">&gt; 
&gt; message.  I was ftping the file and not sftping to it was using 
&gt; the 
&gt; Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as 
&gt; you suggested 
&gt; below and send the debug info.
</div>

Heather 
<div class="message-stanza open">&gt; Fischer_
</div>Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions 
<div class="message-stanza open">&gt; Cooperative
</div>3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; 
&gt; ymailto=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 
&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt; 
&gt;    
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; 
&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; 
&gt; Thursday, May 27, 2010 9:44 AM
</div>To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; 
&gt; [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank 
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> 
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div></div>




<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather 
&gt; 
&gt; Fischer via RT &lt;
&gt; href=&#34;mailto:
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; 
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org 
&gt; #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;      
&gt;   Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;
&gt; href=&#34;
&gt; target=_blank &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; 
&gt; target=_blank 
<div class="message-stanza open">&gt; &gt;
</div>&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;
</div>&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; 
&gt; 
&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I 
<div class="message-stanza open">&gt; reported 
&gt; 
&gt; this to you.  This version 1.58_02 is not 
&gt; behaving as it did with 
&gt; the
&gt; 1.55 version did.  1.55 would 
&gt; resume all file transfers, but 
&gt; only 
&gt; corrupted the Gnupg 
&gt; encrypted files.  Now with the 1.58_02 
&gt; version, 
&gt; the 
&gt; resume isn&#39;t even 
&gt; working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, 
<div class="message-stanza open">&gt; &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
&gt; 
&gt; 
</div>
The time on our servers 
<div class="message-stanza open">&gt; are synchronized.  I verified 
&gt; between the 
&gt; two servers I&#39;m 
&gt; testing on, but is irrelevant since I&#39;m not 
&gt; using 
&gt; &#34;resume 
&gt; =&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the 
&gt; debug output 
&gt; you requested, but need a 
&gt; version where the resume works 
&gt; for 
&gt; &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you 
&gt; 
&gt; added.
</div>
1.58_03 works for me.

Could you install it, set in your 
<div class="message-stanza open">&gt; 
&gt; tests
</div>
  $Net::SFTP::Foreign::debug = 20643;

and run 
<div class="message-stanza open">&gt; 
&gt; them?
</div>
it will show why it is not resuming and maybe also why the 
<div class="message-stanza open">&gt; transfer 
&gt; gets corrupted.
</div>
- Salva
</div></div></div></div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction message Correspond odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789842" href="/Public/Bug/Display.html?id=57386#txn-789842">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;11&nbsp;17:09:34&nbsp;2010</span>
    <span class="description">Heather.Fischer [...] nisc.coop -  Correspondence added</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
      
<table>
  <tr>
    <td align="right" class="message-header-key">CC:</td>
    <td class="message-header-value"> &#34;heather.fischer [...] nisc.coop&#34; &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Subject:</td>
    <td class="message-header-value"> RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">Date:</td>
    <td class="message-header-value"> Fri, 11 Jun 2010 16:09:31 -0500</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">To:</td>
    <td class="message-header-value"> &lt;bug-Net-SFTP-Foreign [...] rt.cpan.org&gt;</td>
  </tr>
  <tr>
    <td align="right" class="message-header-key">From:</td>
    <td class="message-header-value"> Heather Fischer &lt;Heather.Fischer [...] nisc.coop&gt;</td>
  </tr>
</table>
<div class="downloadattachment">
<a href="/Ticket/Attachment/789842/409263/">Download &#40;untitled&#41;</a> / <a href="/Ticket/Attachment/WithHeaders/409263">with headers</a>
<br />
<span class="downloadcontenttype">text/plain 9.9k</span>
</div>
<div class="messagebody">
<div class="message-stanza plain-text-white-space">Yes.  I bet that is the problem since the same file encrypted can have slightly different byte sizes encrypted due to the way encryption works.   I set it up that way so that the encrypted file that failed to send is cleaned up on the local server when the script exits.  I&#39;m assuming that the sftp::foreign resume option will not work in this case?  This also explains why resume worked when getting encrypted files because the file on the remote server stayed in the original encrypted state.

So in order for the resume to work for putting encrypted files, I need to leave the original sftp attempted encrypted file on disk and not clean it up and create a new one on the second attempt.  I will see if this will fit into the logic of what we want to accomplish.

Thank you.


Heather Fischer
Senior Systems Specialist
National Information Solutions Cooperative
3201 Nygren Drive
Mandan, ND 58554
**Email: heather.fischer@nisc.coop
**Phone: 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
**Direct: 701-667-6776  
P Please consider the environment before printing this email.


<span
    class="message-stanza-folder closed"
    onclick="fold_message_stanza(this, 'Show\x20quoted\x20text', 'Hide\x20quoted\x20text');">Show quoted text</span><br /><div class="message-stanza closed">-----Original Message-----
From: Salvador \&#34;Fandiño\&#34; via RT [mailto:bug-Net-SFTP-Foreign@rt.cpan.org] 
Sent: Friday, June 11, 2010 3:57 PM
To: Heather Fischer
Subject: Re: [rt.cpan.org #57386] Net-SFTP-Foreign Bug

&lt;URL: <span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;

Just one question:

Are you encrypting the file with pgp again before resuming the transfer?

I mean, are you doing this:

 1&#41; encrypt the file
 2&#41; partial put
 3&#41; encrypt the file again
 4&#41; resume the put operation


?

- Salva


<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather Fischer via RT &lt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; Sent: Fri, June 11, 2010 7:19:21 PM
&gt; Subject: RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hi,

I 
<div class="message-stanza open">&gt; have not run the script as I&#39;m not comfortable running a script someone else 
&gt; wrote on our system.
</div>
I took a look at it, but your code is above my level 
<div class="message-stanza open">&gt; of Perl understanding.
</div>
What exactly does the script do?

Looks like 
<div class="message-stanza open">&gt; it needs two parameters of what appear to be the file length and gpg id.  
&gt; Not sure what the gpg needs to be as I&#39;ve never used that option and what about 
&gt; the file length. Is that in bytes or record count or something else?
</div>
Is 
<div class="message-stanza open">&gt; the file just renaming on the local server as I don&#39;t see any login credential 
&gt; code?
</div>
Thanks.


Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions Cooperative
3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt;     
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org] 
&gt; 
</div>Sent: Thursday, June 10, 2010 4:13 PM
To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Not 
<div class="message-stanza open">&gt; really.
</div>
I am still unable to reproduce the problem and the logs you sent 
<div class="message-stanza open">&gt; did not show any error.
</div>
Where you able to run the 
<div class="message-stanza open">&gt; href=&#34;http://resume_put.pl&#34;&gt;resume_put.pl script from the samples 
&gt; directory?
</div>

- Salva


<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; 
&gt; From: Heather Fischer via RT &lt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; Sent: Thu, June 10, 2010 10:01:08 PM
&gt; Subject: RE: [rt.cpan.org #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;        Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; href=&#34;
&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Any luck with 
<div class="message-stanza open">&gt; 
&gt; this? 
</div>

    Heather 
<div class="message-stanza open">&gt; 
&gt; Fischer___________________
</div>Senior Systems Specialist
National Information 
<div class="message-stanza open">&gt; 
&gt; Solutions Cooperative
</div>3201 Nygren Drive
Mandan, ND 
<div class="message-stanza open">&gt; 58554
</div>**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 
&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt; 
&gt;    
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather 
<div class="message-stanza open">&gt; Fischer 
&gt; 
</div>Sent: Thursday, May 27, 2010 10:48 AM
To: &#39;
<div class="message-stanza open">&gt; 
&gt; ymailto=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#39;
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; Heather Fischer
</div>Subject: RE: [
<div class="message-stanza open">&gt; 
&gt; href=&#34;http://rt.cpan.org&#34;&gt;rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Hi 
<div class="message-stanza open">&gt; 
&gt; Salva,
</div>
Attached is a document that contains some notes.  
<div class="message-stanza open">&gt; Also 
&gt; attached are the debug logs.  The &#34;orig&#34; is the debug from 
&gt; the first put 
&gt; that was killed during transmission. The &#34;resume&#34; log is 
&gt; when the transfer is 
&gt; resumed and file transmissions completes.  
&gt; Please let me know if you have 
&gt; any questions.
</div>
Thank you. 
<div class="message-stanza open">&gt; 
</div>

Heather Fischer
Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National 
<div class="message-stanza open">&gt; Information Solutions Cooperative
</div>3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 
<div class="message-stanza open">&gt; 58554
</div>**Email: 
<div class="message-stanza open">&gt; ymailto=&#34;mailto:
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 
&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt; 
&gt;    
</div>
<div class="message-stanza open">-----Original Message-----
From: Heather 
<div class="message-stanza open">&gt; 
&gt; Fischer
</div>Sent: Thursday, May 27, 2010 9:48 AM
To: 
<div class="message-stanza open">&gt; 
&gt; ymailto=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org
</div>Cc: 
<div class="message-stanza open">&gt; 
&gt; &#39;
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#39;
</div>Subject: 
<div class="message-stanza open">&gt; 
&gt; RE: [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
Ignore my last 
<div class="message-stanza open">&gt; 
&gt; message.  I was ftping the file and not sftping to it was using 
&gt; the 
&gt; Net::FTP module and not yours. Sorry for the confusion. I&#39;ll do as 
&gt; you suggested 
&gt; below and send the debug info.
</div>

Heather 
<div class="message-stanza open">&gt; Fischer_
</div>Senior Systems 
<div class="message-stanza open">&gt; Specialist
</div>National Information Solutions 
<div class="message-stanza open">&gt; Cooperative
</div>3201 Nygren 
<div class="message-stanza open">&gt; Drive
</div>Mandan, ND 58554
**Email: 
<div class="message-stanza open">&gt; 
&gt; ymailto=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34; 
&gt; 
&gt; href=&#34;mailto:
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop&#34;&gt;
&gt; ymailto=&#34;mailto:heather.fischer@nisc.coop&#34; 
&gt; href=&#34;mailto:heather.fischer@nisc.coop&#34;&gt;heather.fischer@nisc.coop
</div>**Phone: 
<div class="message-stanza open">&gt; 
&gt; 866.WWW.NISC &#40;866.999.6472&#41; ext 6776
</div>**Direct: 701-667-6776 
<div class="message-stanza open">&gt; 
&gt;    
</div>
<div class="message-stanza open">-----Original Message-----
From: Salvador 
<div class="message-stanza open">&gt; 
&gt; \&#34;Fandiño\&#34; via RT [mailto:
&gt; href=&#34;mailto:
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org]
</div>Sent: 
<div class="message-stanza open">&gt; 
&gt; Thursday, May 27, 2010 9:44 AM
</div>To: Heather Fischer
Subject: Re: 
<div class="message-stanza open">&gt; 
&gt; [rt.cpan.org #57386] Net-SFTP-Foreign Bug
</div>
&lt;URL: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank 
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> 
</div>&gt; 
<div class="message-stanza open">&gt; &gt;
</div></div>




<div class="message-stanza open">----- Original Message ----
<div class="message-stanza open">&gt; From: Heather 
&gt; 
&gt; Fischer via RT &lt;
&gt; href=&#34;mailto:
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;
&gt; ymailto=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34; 
&gt; href=&#34;mailto:bug-Net-SFTP-Foreign@rt.cpan.org&#34;&gt;bug-Net-SFTP-Foreign@rt.cpan.org&gt;
&gt; 
&gt; 
&gt; Sent: Thu, May 27, 2010 3:25:51 PM
&gt; Subject: RE: [rt.cpan.org 
&gt; #57386] 
&gt; Net-SFTP-Foreign Bug
&gt; 
&gt;      
&gt;   Queue: 
&gt; Net-SFTP-Foreign
</div>Ticket &lt;URL: 
<div class="message-stanza open">&gt; 
&gt; href=&#34;
&gt; href=&#34;
&gt; target=_blank &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; 
&gt; target=_blank 
<div class="message-stanza open">&gt; &gt;
</div>&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span>&#34; target=_blank
</div>&gt; 
&gt; 
<div class="message-stanza open">&gt; &gt;
&gt; &gt;
</div>&gt; href=&#34;https://rt.cpan.org/Ticket/Display.html?id=57386&#34; target=_blank 
<div class="message-stanza open">&gt; &gt;<span class="clickylink"><a target="new" rel="nofollow" href="https://rt.cpan.org/Ticket/Display.html?id=57386">https://rt.cpan.org/Ticket/Display.html?id=57386</a></span> &gt;
</div></div>
Hello 
<div class="message-stanza open">&gt; 
&gt; 
&gt; Salva,
</div>
I am using &#34;resume =&gt; 1&#34; as before, which is why I 
<div class="message-stanza open">&gt; reported 
&gt; 
&gt; this to you.  This version 1.58_02 is not 
&gt; behaving as it did with 
&gt; the
&gt; 1.55 version did.  1.55 would 
&gt; resume all file transfers, but 
&gt; only 
&gt; corrupted the Gnupg 
&gt; encrypted files.  Now with the 1.58_02 
&gt; version, 
&gt; the 
&gt; resume isn&#39;t even 
&gt; working.
</div>
$sftp-&gt;put&#40;&#34;$ldir/$tranfle&#34;, 
<div class="message-stanza open">&gt; &#34;$tmplclfle&#34;, resume =&gt; 1&#41;; 
&gt; 
&gt; 
</div>
The time on our servers 
<div class="message-stanza open">&gt; are synchronized.  I verified 
&gt; between the 
&gt; two servers I&#39;m 
&gt; testing on, but is irrelevant since I&#39;m not 
&gt; using 
&gt; &#34;resume 
&gt; =&gt; auto&#34;.
</div>
<div class="message-stanza open">&gt; I will be happy to capture the 
&gt; debug output 
&gt; you requested, but need a 
&gt; version where the resume works 
&gt; for 
&gt; &#34;resume =&gt; 1&#34; and includes the 
&gt; additional debugging you 
&gt; 
&gt; added.
</div>
1.58_03 works for me.

Could you install it, set in your 
<div class="message-stanza open">&gt; 
&gt; tests
</div>
  $Net::SFTP::Foreign::debug = 20643;

and run 
<div class="message-stanza open">&gt; 
&gt; them?
</div>
it will show why it is not resuming and maybe also why the 
<div class="message-stanza open">&gt; transfer 
&gt; gets corrupted.
</div>
- Salva
</div></div></div></div></div></div></div></div></div></div>
    </div>
</div>
</div>
<div class="ticket-transaction basics Set even">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789923" href="/Public/Bug/Display.html?id=57386#txn-789923">#</a>      
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;11&nbsp;18:46:07&nbsp;2010</span>
    <span class="description">salva [...] cpan.org -  TimeWorked changed from &#39;10&#39; to &#39;970&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
<div class="ticket-transaction basics Status odd">
<div class="ticket-transaction">
  <div class="metadata">
    <span class="type">
      <a name="txn-789924" href="/Public/Bug/Display.html?id=57386#txn-789924">#</a>      <a id="lasttrans" name="lasttrans"></a>
    </span>
    <span class="date">Fri&nbsp;Jun&nbsp;11&nbsp;18:46:07&nbsp;2010</span>
    <span class="description">salva [...] cpan.org -  Status changed from &#39;open&#39; to &#39;rejected&#39;</span>
    <span class="time-taken"></span>    <span class="actions hidden"></span>
  </div>
    <div class="content">
    </div>
</div>
</div>
</div>
    <hr class="clear" />
  </div>
</div>




</div>
 


  <hr class="clear" />
</div>
<p id="sponsors">
  This service is sponsored and maintained by
  <a href="http://bestpractical.com">Best Practical Solutions</a> and runs on
  <a href="http://noc.perl.org">Perl.org</a> infrastructure.
</p>

<p id="contact-info">
  Please report any issues with rt.cpan.org to <a href="mailto:rt-cpan-admin@bestpractical.com">rt-cpan-admin@bestpractical.com</a>.
</p>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA\x2D937849\x2D12');
  ga('send', 'pageview');
</script>

<div id="footer">
  <p id="time"><span>Time to display: 1.317683</span></p>
  <p id="bpscredits"><span>&#187;&#124;&#171; RT 4.0.18 Copyright 1996-2013 <a href="http://www.bestpractical.com?rt=4.0.18">Best Practical Solutions, LLC</a>.
</span></p>
</div>
  </body>
</html>
